---
layout: default
title: 记录protobuf和grpc的操作过程
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3E1+%E8%BF%9B%E5%85%A5%3Ca+href%3D%22https%3A%2F%2Fgithub.com%2Fgoogle%2Fprotobuf%2Freleases%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fgithub.com%2Fgoogle%2Fprotobuf%2Freleases%3C%2Fa%3E%E8%8E%B7%E5%8F%96%E7%89%B9%E5%AE%9Arelease%E7%89%88%E6%9C%AC%E7%9A%84%E5%AE%89%E8%A3%85%E5%8C%85%3C%2Fp%3E%0A++%3Cp%3E2+%E8%A7%A3%E5%8E%8B%26nbsp%3B%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3E+tar+xzvf+protobuf-all-3.5.1.tar.gz+%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E3+%E9%85%8D%E7%BD%AE%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Ecd+protobuf-3.5.1+%26amp%3B%26amp%3B+.%2Fconfigure%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E4+%E7%BC%96%E8%AF%91%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Emake%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E%3Cimg+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F2018052208592127%22+alt%3D%22%22%3E%3C%2Fp%3E%0A++%3Cp%3E%E5%A6%82%E4%B8%8A%E5%9B%BE%E6%89%80%E4%BB%A5%E7%BC%96%E8%AF%91%E6%88%90%E5%8A%9F%E3%80%82%3C%2Fp%3E%0A++%3Cp%3E5+%E5%AE%89%E8%A3%85%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Emake+install%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E6+%E6%94%AF%E6%8C%81go%E8%AF%AD%E8%A8%80%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Ego+get+-a+github.com%2Fgolang%2Fprotobuf%2Fprotoc-gen-go%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E8+%E4%BE%8B%E5%AD%90%EF%BC%9A%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Esyntax+%3D+%22proto3%22%3B%0A+%0Aoption+java_package+%3D+%22io.grpc.examples%22%3B%0A+%0Apackage+helloworld%3B%0A+%0A%2F%2F+The+greeter+service+definition.%0Aservice+Greeter+%7B%0A++%2F%2F+Sends+a+greeting%0A++rpc+SayHello+%28HelloRequest%29+returns+%28HelloReply%29+%7B%7D%0A%7D%0A+%0A%2F%2F+The+request+message+containing+the+user%27s+name.%0Amessage+HelloRequest+%7B%0A++string+name+%3D+1%3B%0A%7D%0A+%0A%2F%2F+The+response+message+containing+the+greetings%0Amessage+HelloReply+%7B%0A++string+message+%3D+1%3B%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E%E8%BF%90%E8%A1%8C%E7%BC%96%E8%AF%91%E5%91%BD%E4%BB%A4%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Eprotoc+--go_out%3D.+*.proto+%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E%E5%BE%97%E5%88%B0%E6%96%87%E4%BB%B6hellopb.go%EF%BC%8C%E8%BF%99%E6%98%AF%E8%A7%84%E5%AE%9Amessage%E7%9A%84%E6%96%87%E4%BB%B6%3C%2Fp%3E%0A++%3Cp%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%88go%EF%BC%89%EF%BC%9A%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Epackage+main%0A%0Aimport+%28%0A%09%22net%22%0A%0A%09pb+%22hello%22+%2F%2F+%E5%BC%95%E5%85%A5%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%E7%9A%84%E5%8C%85%0A%0A%09%22golang.org%2Fx%2Fnet%2Fcontext%22%0A%09%22google.golang.org%2Fgrpc%22%0A%09%22google.golang.org%2Fgrpc%2Fgrpclog%22%0A%29%0A%0Aconst+%28%0A%09%2F%2F+Address+gRPC%E6%9C%8D%E5%8A%A1%E5%9C%B0%E5%9D%80%0A%09Address+%3D+%22127.0.0.1%3A8080%22%0A%29%0A%0A%2F%2F+%E5%AE%9A%E4%B9%89helloService%E5%B9%B6%E5%AE%9E%E7%8E%B0%E7%BA%A6%E5%AE%9A%E7%9A%84%E6%8E%A5%E5%8F%A3%0Atype+helloService+struct%7B%7D%0A%0A%2F%2F+HelloService+...%0Avar+HelloService+%3D+helloService%7B%7D%0A%0Afunc+%28h+helloService%29+SayHello%28ctx+context.Context%2C+in+*pb.HelloRequest%29+%28*pb.HelloReply%2C+error%29+%7B%0A%09resp+%3A%3D+new%28pb.HelloReply%29%0A%09resp.Message+%3D+%22Hello+%22+%2B+in.Name+%2B+%22.%22%0A%0A%09return+resp%2C+nil%0A%7D%0A%0Afunc+main%28%29+%7B%0A%09listen%2C+err+%3A%3D+net.Listen%28%22tcp%22%2C+Address%29%0A%09if+err+%21%3D+nil+%7B%0A%09%09grpclog.Fatalf%28%22failed+to+listen%3A+%25v%22%2C+err%29%0A%09%7D%0A%0A%09%2F%2F+%E5%AE%9E%E4%BE%8B%E5%8C%96grpc+Server%0A%09s+%3A%3D+grpc.NewServer%28%29%0A%0A%09%2F%2F+%E6%B3%A8%E5%86%8CHelloService%0A%09pb.RegisterGreeterServer%28s%2C+HelloService%29%0A%0A%09grpclog.Println%28%22Listen+on+%22+%2B+Address%29%0A%0A%09s.Serve%28listen%29%0A%7D%0A%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cp%3E%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%88go%EF%BC%89%EF%BC%9A%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Epackage+main%0A%0A%2F%2Fclient.go%0A%0Aimport+%28%0A%09%22log%22%0A%09%22os%22%0A%0A%09%22golang.org%2Fx%2Fnet%2Fcontext%22%0A%09%22google.golang.org%2Fgrpc%22%0A%09pb+%22hello%22%0A%29%0A%0Aconst+%28%0A%09address+++++%3D+%22localhost%3A8080%22%0A%09defaultName+%3D+%22Kity%22%0A%29%0A%0Afunc+main%28%29+%7B%0A%09conn%2C+err+%3A%3D+grpc.Dial%28address%2C+grpc.WithInsecure%28%29%29%0A%09if+err+%21%3D+nil+%7B%0A%09%09log.Fatal%28%22did+not+connect%3A+%25v%22%2C+err%29%0A%09%7D%0A%09defer+conn.Close%28%29%0A%09c+%3A%3D+pb.NewGreeterClient%28conn%29%0A%0A%09name+%3A%3D+defaultName%0A%09if+len%28os.Args%29+%26gt%3B+1+%7B%0A%09%09name+%3D+os.Args%5B1%5D%0A%09%7D%0A%09r%2C+err+%3A%3D+c.SayHello%28context.Background%28%29%2C+%26amp%3Bpb.HelloRequest%7BName%3A+name%7D%29%0A%09if+err+%21%3D+nil+%7B%0A%09%09log.Fatal%28%22could+not+greet%3A+%25v%22%2C+err%29%0A%09%7D%0A%09log.Printf%28%22Greeting%3A+%25s%22%2C+r.Message%29%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E9+%E9%97%AE%E9%A2%98%3C%2Fp%3E%0A++%3Cp%3E1%EF%BC%89%E5%8C%85%E5%A4%AA%E6%97%A7%E2%80%94%E2%80%94%E7%94%B1%E4%BA%8E%E6%9B%B4%E6%96%B0%E4%BA%86protoc%EF%BC%8C%E8%80%8Cgo%E7%9A%84%E5%8C%85%E6%B2%A1%E6%9C%89%E6%9B%B4%E6%96%B0%E5%AF%BC%E8%87%B4%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Ehello%2Fhello.pb.go%3A115%3A+undefined%3A+grpc.SupportPackageIsVersion4%0Ahello%2Fhello.pb.go%3A135%3A+c.cc.Invoke+undefined+%28type+*grpc.ClientConn+has+no+field+or+method+Invoke%29%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E%E6%96%B9%E6%A1%88%EF%BC%9A%E6%9B%B4%E6%96%B0go%E5%8C%85%EF%BC%8C%E5%B9%B6%E9%87%8D%E6%96%B0%E7%94%9F%E6%88%90message%E6%96%87%E4%BB%B6hello.pb.go%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Ego+get+-u+github.com%2Fgolang%2Fprotobuf%2F%7Bproto%2Cprotoc-gen-go%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E2%29+grpc%E5%8C%85%E5%A4%AA%E6%97%A7%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Ehello%2Fhello.pb.go%3A115%3A+undefined%3A+grpc.SupportPackageIsVersion4%0Ahello%2Fhello.pb.go%3A135%3A+c.cc.Invoke+undefined+%28type+*grpc.ClientConn+has+no+field+or+method+Invoke%29%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E%E6%96%B9%E6%A1%88%EF%BC%9A%E5%9B%A0%E4%B8%BA%E5%A2%99%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%8C%E4%BB%8Egithub%E4%B8%8A%E7%9A%84%E9%95%9C%E5%83%8F%E8%8E%B7%E5%8F%96%E5%8C%85%EF%BC%8C%E5%86%8D%E7%A7%BB%E5%8A%A8%E5%88%B0%E5%8C%85%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BD%8D%E7%BD%AE%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Ego+get+-u+github.com%2Fgrpc%2Fgrpc-go%0Amv+%2Fopt%2FgoHome%2Fworkspace%2Fsrc%2Fgithub.com%2Fgrpc%2Fgrpc-go+%2Fopt%2FgoHome%2Fsrc%2Fgoogle.golang.org%2Fgrpc%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cp%3E%E5%90%8C%E6%A0%B7%E6%96%B9%E5%BC%8F%E6%9B%B4%E6%96%B0%E4%B8%89%E4%B8%AA%E5%8C%85%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-plain%22%3Egithub.com%2Fgolang%2Ftext%0Agithub.com%2Fgolang%2Fsys%0Agithub.com%2Fgolang%2Fnet%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cp%3E%3Cbr%3E%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fidwtwt%2Farticle%2Fdetails%2F80400598%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fidwtwt%2Farticle%2Fdetails%2F80400598%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}