---
layout: default
title: arcpy利用XY创建点
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-f57960eb32.css%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-f57960eb32.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22+id%3D%22content_views%22%3E+%0A++%3Cp%3E%E5%8F%82%E8%80%83%E4%BA%86%E5%BE%88%E5%A4%9A%E5%8D%9A%E5%AE%A2%E5%90%A7%EF%BC%8C%E6%9C%80%E5%90%8E%E6%8A%8A%E8%87%AA%E5%B7%B1%E9%83%BD%E6%94%B9%E8%92%99%E4%BA%86%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%8D%9A%E5%AE%A2%E6%9C%89%E5%88%86%E6%9E%90%3Ca+href%3D%22https%3A%2F%2Fblog.csdn.net%2FA873054267%2Farticle%2Fdetails%2F88207732%22+rel%3D%22nofollow%22%3Earcpy%E5%88%9B%E5%BB%BA%E5%B8%A6%E9%AB%98%E7%A8%8B%E7%9A%84%E7%82%B9%E5%9B%BE%E5%B1%82%E3%80%81%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-python%22%3E%23+-*-+coding%3A+utf-8+-*-%0A%22%22%22%0ACreated+on+Sun+Apr++7+15%3A32%3A24+2019%0A%0A%40author%3A+%0A%22%22%22%0A%0A%23+XYTableToPoint.py%0A%23+Description%3A+Creates+a+point+feature+class+from+input+table%0A%0A%23+import+system+modules+%0Aimport+arcpy%0Aimport+csv++%0A%23+Set+environment+settings%0Aimport+os%0Arootdir+%3D+%0Aoutpath%3D%0A%0Alist+%3D+os.listdir%28rootdir%29+%23%E5%88%97%E5%87%BA%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%89%80%E6%9C%89%E7%9A%84%E7%9B%AE%E5%BD%95%E4%B8%8E%E6%96%87%E4%BB%B6%0Afor+i+in+range%280%2Clen%28list%29%29%3A%0A++++path+%3D+os.path.join%28rootdir%2Clist%5Bi%5D%29%0A++++print+path%0A++++if+os.path.isfile%28path%29%3A++++++++%0A%23+Set+the+local+variables%0A++++++++outputname+%3D+path%5B40%3A57%5D%2B%22_%22%2Bpath%5B58%3A73%5D%2B%22.shp%22%0A++++++++print+outputname%0A++++++++spatRef+%3D+arcpy.SpatialReference%28%22WGS+1984%22%29+%23%22WGS+1984%22%0A++++++++in_table+%3D+path+%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29%0A++++++++++++column1+%3D+%5Brow%5B0%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29++++%0A++++++++++++column2+%3D+%5Brow%5B1%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29%0A++++++++++++end_lon+%3D+%5Brow%5B2%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29++++%0A++++++++++++end_lat+%3D+%5Brow%5B3%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29%0A++++++++++++distance+%3D+%5Brow%5B4%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29++++%0A++++++++++++speed+%3D+%5Brow%5B5%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29%0A++++++++++++angle+%3D+%5Brow%5B6%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29++++%0A++++++++++++u+%3D+%5Brow%5B7%5D+for+row+in+reader%5D%0A++++++++with+open%28in_table%2C%27rb%27%29+as+csvfile%3A%0A++++++++++++reader+%3D+csv.reader%28csvfile%29++++%0A++++++++++++v+%3D+%5Brow%5B8%5D+for+row+in+reader%5D%0A++++++++++++%0A++++++++out_feature_class+%3D+%22ice+vector%22%0A++++++++x_coords+%3D+column1+%23%22longitude%22%0A++++++++y_coords+%3D+column2+%23+%22latitude%22%0A++++++++fc%3Darcpy.CreateFeatureclass_management%28outpath%2C+outputname%2C+%22POINT%22%2C+%22%22%2C%22%22%2C%22%22%2C+spatRef%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22start_lon%22%2C+%22DOUBLE%22%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22start_lat%22%2C+%22DOUBLE%22%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22end_lon%22%2C+%22DOUBLE%22%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22end_lat%22%2C+%22DOUBLE%22%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22distance%22%2C+%22DOUBLE%22%29%23m%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22speed%22%2C+%22DOUBLE%22%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22angle%22%2C+%22DOUBLE%22%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22u%22%2C+%22DOUBLE%22%29%0A++++++++arcpy.AddField_management%28outpath%2B%22%5C%5C%22%2Boutputname%2C+%22v%22%2C+%22DOUBLE%22%29%0A++++++++cursor%3Darcpy.InsertCursor%28fc%2C%5B%22SHAPE%40XY%22%5D%29+%23+Add+the+point+geometry+to+the+feature+vertex+%3D+arcpy.CreateObject%28%22Point%22%29+vertex.X+%3D+line%5B0%5D+vertex.Y+%3Dline%5B1%5D+feature.shape+%3D+vertex+%23+Add+attributes+feature.leibie+%3D+%22shumu%22+%23+write+to+shapefile+cursor.insertRow%28feature%29+del+cursor+del+fc%0A++++++++num%3D0%0A++++++++for+x+in+x_coords%3A+%0A++++++++++++feature+%3D+cursor.newRow%28%29+%23+Add+the+point+geometry+to+the+feature+vertex+%3D+arcpy.CreateObject%28%22Point%22%29+vertex.X+%3D+line%5B0%5D+vertex.Y+%3Dline%5B1%5D+feature.shape+%3D+vertex+%23+Add+attributes+feature.leibie+%3D+%22shumu%22+%23+write+to+shapefile+cursor.insertRow%28feature%29+del+cursor+del+fc%0A++++++++++++%23+Add+the+point+geometry+to+the+feature%0A++++++++++++vertex+%3D+arcpy.CreateObject%28%22Point%22%29%0A++++++++++++vertex.X+%3D+float%28x%29%0A++++++++++++vertex.Y+%3D+float%28y_coords%5Bnum%5D%29%0A++++++++++++feature.shape+%3D+vertex%0A++++++++++++feature.start_lon+%3D+float%28x%29%0A++++++++++++feature.start_lat+%3D+float%28y_coords%5Bnum%5D%29%0A++++++++++++feature.end_lon+%3D+float%28x%29%0A++++++++++++feature.end_lat+%3D+float%28y_coords%5Bnum%5D%29%0A++++++++++++feature.distance+%3D+float%28distance%5Bnum%5D%29%0A++++++++++++feature.speed+%3D+float%28speed%5Bnum%5D%29%0A++++++++++++feature.angle+%3D+float%28angle%5Bnum%5D%29%0A++++++++++++feature.u+%3D+float%28u%5Bnum%5D%29%0A++++++++++++feature.v+%3D+float%28v%5Bnum%5D%29%0A++++++++++++%23print+vertex.X%2Cvertex.Y%2Cvertex.speed%0A++++++++++++cursor.insertRow%28feature%29%0A++++++++++++num%3Dnum%2B1%0A++++++++arcpy.DefineProjection_management%28outpath%2B%22%5C%5C%22%2Boutputname%2CspatRef%29%0A++++++++++++%23+Add+attributes%0A%23z_coords+%3D+%22elevation%22%0A%0A%23+Make+the+XY+event+layer...%0A%23+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%23+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A++++++++++++%0A%23++++++++++++newfc%3D%22newpoint.shp%22+%0A%23++++++++++++arcpy.CreateFeatureclass_management%28outpath%2C+newfc%2C+%22Point%22%29%0A%23++++++++++++cursor%3Darcpy.da.InsertCursor%28newfc%2C+%5B%22SHAPE%40%22%5D%29%0A%23++++++++++++array%3Darcpy.Array%28%29%0A++++++++++++%0A%23+++++++++++%0A%23++%23+Print+the+total+rows%0A%23++++++++++++print%28arcpy.GetCount_management%28out_feature_class%29%29%0A%23+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%23+%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E" | url_decode}}