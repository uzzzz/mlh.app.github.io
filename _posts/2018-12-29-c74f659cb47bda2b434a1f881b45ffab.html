---
layout: default
title: btc、usdt 根据交易hash如何得到交易明细和手续费
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Cdiv+class%3D%22article-copyright%22%3E%0A+++%E7%89%88%E6%9D%83%E5%A3%B0%E6%98%8E%EF%BC%9A%E2%80%9C%E5%81%87%E8%A3%85%E3%80%81%E6%98%AF%E4%B8%AA%E6%9C%89%E7%81%B5%E9%AD%82%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%91%98%E2%80%9D+%E2%80%94%E2%80%94+Go+Big+Or+Go+Home+https%3A%2F%2Fblog.csdn.net%2Fu011663149%2Farticle%2Fdetails%2F85342677+%0A+%3C%2Fdiv%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-f57960eb32.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22+id%3D%22content_views%22%3E+%0A++%3Chr%3E%0A++%3Cp%3E%3Cstrong%3E%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%EF%BC%9A1.%E5%9C%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E9%92%B1%E5%8C%85%E8%8A%82%E7%82%B9%E4%B8%8A%E6%A0%B9%E6%8D%AEtxId%E8%8E%B7%E5%8F%96%E4%BA%A4%E6%98%93%E5%8E%9F%E5%A7%8B%E4%BA%A4%E6%98%93%3C%2Fstrong%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cstrong%3E%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+2.%E9%80%9A%E8%BF%87%E5%8E%9F%E5%A7%8B%E4%BA%A4%E6%98%93%E9%80%92%E5%BD%92%E8%AE%A1%E7%AE%97%E6%89%8B%E7%BB%AD%E8%B4%B9%EF%BC%9A+%E5%85%AC%E5%BC%8F%5B+%E6%89%8B%E7%BB%AD%E8%B4%B9+%26nbsp%3Bsum%28vin%29-+sum%28vout%29+%5D%3C%2Fstrong%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cstrong%3E%26nbsp%3B+%26nbsp%3B+%E8%A6%81%E6%B1%82%EF%BC%9A%E9%9C%80%E8%A6%81%E5%AF%B9utxo%E6%9C%89%E4%B8%80%E5%AE%9A%E7%9A%84%E4%BA%86%E8%A7%A3%7E%7E%7E%3C%2Fstrong%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cstrong%3E%26nbsp%3B+%26nbsp%3B+blockchain%3A%3Ca+href%3D%22https%3A%2F%2Fwww.blockchain.com%2Fbtc%2Faddress%2F1NiRsrLA7WgNUQQNKfuz7nSx4eoKadXpNY%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fwww.blockchain.com%2Fbtc%2Faddress%2F1NiRsrLA7WgNUQQNKfuz7nSx4eoKadXpNY%3C%2Fa%3E%3C%2Fstrong%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cimg+alt%3D%22%22+class%3D%22has%22+height%3D%22551%22+src%3D%22https%3A%2F%2Fblog.uzzz.org.cn%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdnimg.cn%2F2019020611484827.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE2NjMxNDk%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%22+width%3D%221200%22%3E%3C%2Fp%3E+%0A++%3Cp%3E%E4%B8%8A%E9%9D%A2%E6%98%AF%E7%94%A8%E5%8C%BA%E5%9D%97%E9%93%BE%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8B%E4%BA%A4%E6%98%93txId+%E7%9A%84%E4%BA%A4%E6%98%93%E6%98%8E%E7%BB%86%EF%BC%8C%E6%9F%A5%E7%9C%8B%E8%AF%A5%E5%8E%9F%E5%A7%8B%E4%BA%A4%E6%98%93%E4%B8%BA%EF%BC%9A%3C%2Fp%3E+%0A++%3Cp%3E%3Cimg+alt%3D%22%22+class%3D%22has%22+height%3D%22862%22+src%3D%22https%3A%2F%2Fblog.uzzz.org.cn%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdnimg.cn%2F20190206115535896.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE2NjMxNDk%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%22+width%3D%221200%22%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cstrong%3E%E7%94%B1%E6%AD%A4%E6%A0%B9%E6%8D%AE%E4%BA%A4%E6%98%93hash%E4%BB%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E8%8A%82%E7%82%B9%E8%BF%9B%E8%A1%8C%E6%9F%A5%E7%9C%8B%E5%8E%9F%E5%A7%8B%E4%BA%A4%E6%98%93%E5%B9%B6%E8%AE%A1%E7%AE%97%E5%87%BA%E7%B1%BB%E4%BC%BC%E5%8C%BA%E5%9D%97%E9%93%BE%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%80%E8%87%B4%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%9A%3C%2Fstrong%3E%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3E%2F%2F%E4%BA%A4%E6%98%93%E4%BF%A1%E6%81%AF%0Apublic+class+BtcTransactionInfo+implements+Serializable+%7B%0A%0A%09private+static+final+long+serialVersionUID+%3D+1L%3B%0A%09%0A%09private+String+txId%3B+%2F%2F%E4%BA%A4%E6%98%93txid%0A%09private+String+hash%3B+%2F%2Fhash%0A%09private+String+blockheight%3B%2F%2F%E5%8C%BA%E5%9D%97%E9%AB%98%E5%BA%A6%0A%09private+String+blockweight%3B+%2F%2F%E5%8C%BA%E5%9D%97%E5%AE%BD%E5%BA%A6%0A%09private+String+blockconfirmations%3B%2F%2F%E5%8C%BA%E5%9D%97%E7%A1%AE%E8%AE%A4%E6%95%B0%0A%09private+String+blockversion%3B%0A%09private+String+previousblockhash%3B+%2F%2F%E4%B8%8A%E4%B8%80%E4%B8%AA%E5%8C%BA%E5%9D%97%E7%9A%84%E5%9D%97hash%0A%09private+String+nextblockhash%3B+%2F%2F%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%9D%97hash%0A%09private+String+version%3B%0A%09private+String+size%3B%0A%09private+String+vsize%3B%0A%09private+String+locktime%3B%0A%09private+String+hex%3B+%2F%2Fhex%0A%09private+String+blockhash%3B%0A%09private+String+confirmations%3B+%2F%2F%E7%A1%AE%E8%AE%A4%E6%AC%A1%E6%95%B0%0A%09private+String+time%3B%0A%09private+String+blocktime%3B%0A%09private+BigDecimal+amount%3B+%2F%2F%E9%87%91%E9%A2%9D%0A%09private+BigDecimal+free%3B+%2F%2F%E6%89%8B%E7%BB%AD%E8%B4%B9%0A%09private+String+from%3B+%2F%2F%E5%8F%91%E9%80%81%E6%96%B9%0A%09private+String+to%3B+%2F%2F%E6%8E%A5%E6%94%B6%E6%96%B9%0A%09%0A%09+%0A%7D%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%26nbsp%3B+%26nbsp%3B%E9%80%9A%E8%BF%87JSON-rpc+%E8%BF%9B%E8%A1%8C%E8%8A%82%E7%82%B9%E7%9A%84%E8%B0%83%E7%94%A8%E5%8F%82%E8%80%83%EF%BC%9A%3Ca+href%3D%22https%3A%2F%2Fblog.csdn.net%2Fu011663149%2Farticle%2Fdetails%2F87182097%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fblog.csdn.net%2Fu011663149%2Farticle%2Fdetails%2F87182097%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3E%2F%2F%E6%A0%B9%E6%8D%AE%E4%BA%A4%E6%98%93%E7%9A%84txid%E8%B0%83%E7%94%A8%E9%92%B1%E5%8C%85api%E8%8E%B7%E5%8F%96%E7%9B%B8%E5%BA%94%E4%BF%A1%E6%81%AF%0Apublic+Object+getrawTransactionByTxIdFromWallet%28String+txId%29+throws+Exception+%7B%0A%09%09BtcTransactionInfo+%09tranc+%3D+new+BtcTransactionInfo%28%29%3B%0A%09%09try+%7B%0A%09%09%09%2F%2F%E8%B0%83%E7%94%A8%E5%8E%9F%E5%A7%8B%E4%BA%A4%E6%98%93%E6%8E%A5%E5%8F%A3%0A%09%09%09Map+transaction+%3D+%28Map%29+btService.getTrawtransaction%28txId%2C+1%29%3B%0A%09%09%09JSONObject+info+%3D+JSONObject.parseObject%28JSON.toJSONString%28transaction%29%29%3B%0A%09%09%09String+blockHash+%3D+info.getString%28%22blockhash%22%29%3B%0A%09%09%09%2F*block*%2F%0A%09%09%09%2F%2F%E8%B0%83%E7%94%A8%E6%A0%B9%E6%8D%AEblockhash+%E8%8E%B7%E5%8F%96%E5%9D%97%E4%BF%A1%E6%81%AF%E6%8E%A5%E5%8F%A3%0A%09%09%09Map+blockInfo+%3D+%28Map%29btService.getblock%28blockHash%29%3B%0A%09%09%09JSONObject+block+%3D+JSONObject.parseObject%28JSON.toJSONString%28blockInfo%29%29%3B%0A%09%09%09tranc.setBlockconfirmations%28block.getString%28%22confirmations%22%29%29%3B%0A%09%09%09tranc.setBlocktime%28block.getString%28%22time%22%29%29%3B%0A%09%09%09tranc.setBlockversion%28block.getString%28%22version%22%29%29%3B%0A%09%09%09tranc.setBlockheight%28block.getString%28%22height%22%29%29%3B%0A%09%09%09tranc.setBlockweight%28block.getString%28%22weight%22%29%29%3B%0A%09%09%09tranc.setPreviousblockhash%28block.getString%28%22previousblockhash%22%29%29%3B%0A%09%09%09tranc.setNextblockhash%28block.getString%28%22nextblockhash%22%29%29%3B%0A%09%09%09%0A%09%09%09tranc.setTxId%28info.getString%28%22txid%22%29%29%3B%0A%09%09%09tranc.setHash%28info.getString%28%22hash%22%29%29%3B%0A%09%09%09tranc.setVersion%28info.getString%28%22version%22%29%29%3B%0A%09%09%09tranc.setSize%28info.getString%28%22size%22%29%29%3B%0A%09%09%09tranc.setVsize%28info.getString%28%22vsize%22%29%29%3B%0A%09%09%09tranc.setLocktime%28info.getString%28%22locktime%22%29%29%3B%0A%09%09%09tranc.setHex%28info.getString%28%22hex%22%29%29%3B%0A%09%09%09tranc.setBlockhash%28blockHash%29%3B%0A%09%09%09tranc.setConfirmations%28info.getString%28%22confirmations%22%29%29%3B%0A%09%09%09tranc.setTime%28info.getString%28%22time%22%29%29%3B%0A%09%09%09tranc.setBlocktime%28info.getString%28%22blocktime%22%29%29%3B%0A%09%09%09%0A%09%09%09JSONArray+vins+%3D+JSONArray.parseArray%28info.getString%28%22vin%22%29%29%3B%0A%09%09%09double+sumvin+%3D+0+%3B%0A%09%09%09List%26lt%3BString%26gt%3B+formAddress+%3D+new+ArrayList%26lt%3B%26gt%3B%28%29%3B%0A%09%09%09for+%28int+i+%3D+0%2Clen+%3D+vins.size%28%29%3B+i+%26lt%3B+len%3B+i%2B%2B%29+%7B%0A%09%09%09%09JSONObject+vin+%3D++JSONObject.parseObject%28vins.getString%28i%29%29%3B%0A%09%09%09%09String+txid+%3D+vin.getString%28%22txid%22%29%3B%0A%09%09%09%09Integer+vinN+%3D+vin.getInteger%28%22vout%22%29%3B%0A%09%09%09%09LOG.info%28%22%3D%3D%3D+%5BBTC%5D+search+txid%3A%7B%7D+trawtransaction%21+%3D%3D%3D%22%2Ctxid%29%3B%0A%09%09%09%09Map+parentTransaction+%3D+%28Map%29+btService.getTrawtransaction%28txid%2C+1%29%3B%0A%09%09%09%09JSONObject+parentInfo+%3D+JSONObject.parseObject%28JSON.toJSONString%28parentTransaction%29%29%3B%0A%09%09%09%09JSONArray+vouts+%3D+JSONArray.parseArray%28parentInfo.getString%28%22vout%22%29%29%3B%0A%09%09%09%09for+%28int+j+%3D+0%2Cleg+%3D+vouts.size%28%29%3B+j+%26lt%3B+leg%3B+j%2B%2B%29+%7B%0A%09%09%09%09%09JSONObject+vout+%3D+vouts.getJSONObject%28j%29%3B%0A%09%09%09%09%09Integer+n+%3D+vout.getInteger%28%22n%22%29%3B%0A%09%09%09%09%09if%28n+%3D%3D+vinN%29%7B+%2F%2F%E6%94%B6%E6%AC%BE%E9%87%91%E9%A2%9D%0A%09%09%09%09%09%09sumvin+%2B%3D+vout.getDouble%28%22value%22%29%3B%0A%09%09%09%09%09%09JSONObject+scriptPubKey+%3D+vout.getJSONObject%28%22scriptPubKey%22%29%3B%0A%09%09%09%09%09%09JSONArray+addresses+%3D+scriptPubKey.getJSONArray%28%22addresses%22%29%3B%0A%09%09%09%09%09%09formAddress.add%28addresses.getString%280%29%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09tranc.setFrom%28StringUtils.strip%28formAddress.toString%28%29%2C%22%5B%5D%22%29%29%3B%0A%09%09%09%0A%09%09%09JSONArray+vouts+%3D+JSONArray.parseArray%28info.getString%28%22vout%22%29%29%3B%0A%09%09%09BigDecimal+amount+%3D+null++%3B%0A%09%09%09double+sumvout+%3D+0%3B%0A%09%09%09%0A%09%09%09for+%28int+i+%3D+0%2Clen+%3D+vouts.size%28%29%3B+i+%26lt%3B+len%3B+i%2B%2B%29+%7B%0A%09%09%09%09JSONObject+vout+%3D++JSONObject.parseObject%28vouts.getString%28i%29%29%3B%0A%09%09%09%09Integer+n+%3D+vout.getInteger%28%22n%22%29%3B%0A%09%09%09%09JSONObject+scriptPubKey+%3D+vout.getJSONObject%28%22scriptPubKey%22%29%3B%0A%09%09%09%09JSONArray+addresses+%3D+scriptPubKey.getJSONArray%28%22addresses%22%29%3B%0A%09%09%09%09String+receviceAddr+%3D+addresses.getString%280%29%3B%0A%09%09%09%09if%28n+%3D%3D+0%29%7B%0A%09%09%09%09%09tranc.setTo%28receviceAddr%29%3B%0A%09%09%09%09%09amount+%3D+new+BigDecimal%28vout.getDouble%28%22value%22%29%29%3B%0A%09%09%09%09%09+%0A%09%09%09%09%7D%0A%09%09%09%09+%2F%2F%E6%89%BE%E9%9B%B6%E9%87%91%E9%A2%9D%0A%09%09%09%09%09sumvout++%2B%3D++vout.getDouble%28%22value%22%29%3B%0A%09%09%09%7D%0A%09%09%09%2F%2F%E6%89%8B%E7%BB%AD%E8%B4%B9++sum%28vin%29-+sum%28vout%29%0A%09%09%09tranc.setFree%28new+BigDecimal%28sumvin%29.subtract%28new+BigDecimal%28sumvout%29%29.setScale%288%2C+BigDecimal.ROUND_HALF_UP%29%29%3B%0A%09%09%09tranc.setAmount%28amount.setScale%288%2C+BigDecimal.ROUND_HALF_UP%29%29%3B%0A%09%09%7D+catch+%28Exception+e%29+%7B%0A%09%09%09throw+new+Exception%28e.getMessage%28%29%29%3B%0A%09%09%7D%0A%09%09%0A%09%09return+JSON.toJSON%28tranc%29%3B%0A%09%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E4%B9%8B%E5%89%8D%E7%9A%84%E5%8D%9A%E5%AE%A2%E6%89%BE%E4%B8%8D%E5%9B%9E%E6%9D%A5%E4%BA%86%EF%BC%8C%E5%86%B3%E5%AE%9A%E9%87%8D%E6%96%B0%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA%E3%80%82%E6%9C%9B%E6%94%AF%E6%8C%81%7E%7E%7E%3C%2Fp%3E+%0A++%3Chr%3E%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E" | url_decode}}