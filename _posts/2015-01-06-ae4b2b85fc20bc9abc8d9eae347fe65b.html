---
layout: default
title: 【比特币】Namecoin原理
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3E%3Cspan+style%3D%22line-height%3Ainherit%3Bcolor%3Argb%2837%2C37%2C37%29%3Bfont-family%3Asans-serif%3Bfont-size%3A.875em%3B%22%3E%3Cspan+style%3D%22color%3Argb%2837%2C37%2C37%29%3Bfont-family%3Asans-serif%3B%22%3EN%3C%2Fspan%3EOTE%3A+This+standard+is+used+by%26nbsp%3B%3C%2Fspan%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FNamecoin%22+rel%3D%22nofollow%22+title%3D%22Namecoin%22+class%3D%22mw-redirect%22+style%3D%22line-height%3Ainherit%3Bfont-family%3Asans-serif%3Bfont-size%3A.875em%3Btext-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3ENamecoin%3C%2Fa%3E%3Cspan+style%3D%22line-height%3Ainherit%3Bcolor%3Argb%2837%2C37%2C37%29%3Bfont-family%3Asans-serif%3Bfont-size%3A.875em%3B%22%3E%2C+but+new+merged+mining+data+should+likely+propose+a+new+BIP+to+supercede+it+with+something+based+on+p2pool%27s+merged+mining.%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cdiv+id%3D%22bodyContent%22+style%3D%22line-height%3A1.6%3Bfont-size%3A.875em%3Bcolor%3Argb%2837%2C37%2C37%29%3Bfont-family%3Asans-serif%3B%22%3E+%0A+++%3Cdiv+id%3D%22mw-content-text%22+lang%3D%22en%22+dir%3D%22ltr%22+class%3D%22mw-content-ltr%22+xml%3Alang%3D%22en%22%3E+%0A++++%3Cdiv+id%3D%22toc%22+class%3D%22toc%22+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Bfont-size%3A13px%3Bdisplay%3Atable%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3E+%0A+++++%3Cdiv+id%3D%22toctitle%22+style%3D%22text-align%3Acenter%3B%22%3E+%0A++++++%3Ch2+style%3D%22color%3A%23000000%3Boverflow%3Ahidden%3Bborder%3Anone%3Bfont-size%3A13px%3Bdisplay%3Ainline%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+Contents%3C%2Fh2%3E+%0A++++++%3Cspan+class%3D%22toctoggle%22%3E%26nbsp%3B%5B%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23%22+rel%3D%22nofollow%22+class%3D%22internal%22+id%3D%22togglelink%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3Ehide%3C%2Fa%3E%5D%26nbsp%3B%3C%2Fspan%3E%0A+++++%3C%2Fdiv%3E+%0A+++++%3Cul+style%3D%22line-height%3A1.5em%3Blist-style-type%3Anone%3B%22%3E%0A++++++%3Cli+class%3D%22toclevel-1+tocsection-1%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Terminology%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%3Cspan+class%3D%22tocnumber%22%3E1%3C%2Fspan%3E%26nbsp%3B%3Cspan+class%3D%22toctext%22%3ETerminology%3C%2Fspan%3E%3C%2Fa%3E%3C%2Fli%3E%0A++++++%3Cli+class%3D%22toclevel-1+tocsection-2%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Aux_proof-of-work_block%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%3Cspan+class%3D%22tocnumber%22%3E2%3C%2Fspan%3E%26nbsp%3B%3Cspan+class%3D%22toctext%22%3EAux+proof-of-work+block%3C%2Fspan%3E%3C%2Fa%3E%3C%2Fli%3E%0A++++++%3Cli+class%3D%22toclevel-1+tocsection-3%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Merkle_Branch%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%3Cspan+class%3D%22tocnumber%22%3E3%3C%2Fspan%3E%26nbsp%3B%3Cspan+class%3D%22toctext%22%3EMerkle+Branch%3C%2Fspan%3E%3C%2Fa%3E%3C%2Fli%3E%0A++++++%3Cli+class%3D%22toclevel-1+tocsection-4%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Merged_mining_coinbase%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%3Cspan+class%3D%22tocnumber%22%3E4%3C%2Fspan%3E%26nbsp%3B%3Cspan+class%3D%22toctext%22%3EMerged+mining+coinbase%3C%2Fspan%3E%3C%2Fa%3E%3C%2Fli%3E%0A++++++%3Cli+class%3D%22toclevel-1+tocsection-5%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Aux_work_merkle_tree%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%3Cspan+class%3D%22tocnumber%22%3E5%3C%2Fspan%3E%26nbsp%3B%3Cspan+class%3D%22toctext%22%3EAux+work+merkle+tree%3C%2Fspan%3E%3C%2Fa%3E%3C%2Fli%3E%0A++++++%3Cli+class%3D%22toclevel-1+tocsection-6%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Example%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%3Cspan+class%3D%22tocnumber%22%3E6%3C%2Fspan%3E%26nbsp%3B%3Cspan+class%3D%22toctext%22%3EExample%3C%2Fspan%3E%3C%2Fa%3E%3C%2Fli%3E%0A++++++%3Cli+class%3D%22toclevel-1+tocsection-7%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Notes%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%3Cspan+class%3D%22tocnumber%22%3E7%3C%2Fspan%3E%26nbsp%3B%3Cspan+class%3D%22toctext%22%3ENotes%3C%2Fspan%3E%3C%2Fa%3E%3C%2Fli%3E%0A+++++%3C%2Ful%3E%0A++++%3C%2Fdiv%3E+%0A++++%3Ch2+style%3D%22color%3A%23000000%3Bfont-weight%3Anormal%3Boverflow%3Ahidden%3Bborder-bottom-width%3A1px%3Bborder-bottom-style%3Asolid%3Bborder-bottom-color%3Argb%28170%2C170%2C170%29%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+%3Cspan+class%3D%22mw-headline%22+id%3D%22Terminology%22%3ETerminology%3C%2Fspan%3E%3C%2Fh2%3E+%0A++++%3Cdl%3E%0A+++++%3Cdt+style%3D%22font-weight%3Abold%3B%22%3E%0A+++++++Auxiliary+Proof-of-Work+%28POW%29%0A+++++%3C%2Fdt%3E%0A+++++%3Cdd+style%3D%22line-height%3A1.5em%3Bmargin-left%3A1.6em%3B%22%3E%0A+++++++a.k.a+%22AuxPOW%22.+This+is+the+way+that+merged+mining+can+exist%3B+it+is+the+relationship+between+two+blockchains+for+one+to+trust+the+other%27s+work+as+their+own+and+accept+AuxPOW+blocks.%0A+++++%3C%2Fdd%3E%0A+++++%3Cdt+style%3D%22font-weight%3Abold%3B%22%3E%0A++++++Merged+Mining%0A+++++%3C%2Fdt%3E%0A+++++%3Cdd+style%3D%22line-height%3A1.5em%3Bmargin-left%3A1.6em%3B%22%3E%0A+++++++The+act+of+using+work+done+on+one+blockchain+on+more+than+one+chain%2C+using+Auxiliary+POW.%0A+++++%3C%2Fdd%3E%0A++++%3C%2Fdl%3E%0A++++%3Chr+style%3D%22color%3Argb%28170%2C170%2C170%29%3Bborder%3A0px%3Bbackground-color%3Argb%28170%2C170%2C170%29%3B%22%3E%0A++++%3Cdl%3E%0A+++++%3Cdt+style%3D%22font-weight%3Abold%3B%22%3E%0A+++++++Auxiliary+Blockchain%0A+++++%3C%2Fdt%3E%0A+++++%3Cdd+style%3D%22line-height%3A1.5em%3Bmargin-left%3A1.6em%3B%22%3E%0A+++++++The+altcoin+that+is+accepting+work+done+on+alternate+chains+as+valid+on+its+own+chain.+Client+applications+have+to+be+modified+to+accept+Auxiliary+POW.%0A+++++%3C%2Fdd%3E%0A+++++%3Cdt+style%3D%22font-weight%3Abold%3B%22%3E%0A++++++Parent+Blockchain%0A+++++%3C%2Fdt%3E%0A+++++%3Cdd+style%3D%22line-height%3A1.5em%3Bmargin-left%3A1.6em%3B%22%3E%0A+++++++The+blockchain+where+the+actual+mining+work+is+taking+place.+This+chain+does+not+need+to+be+aware+of+the+Auxiliary+POW+logic%2C+as+AuxPOW+blocks+submitted+to+this+chain+are+still+valid+blocks.%0A+++++%3C%2Fdd%3E%0A++++%3C%2Fdl%3E%0A++++%3Chr+style%3D%22color%3Argb%28170%2C170%2C170%29%3Bborder%3A0px%3Bbackground-color%3Argb%28170%2C170%2C170%29%3B%22%3E%0A++++%3Cdl%3E%0A+++++%3Cdt+style%3D%22font-weight%3Abold%3B%22%3E%0A+++++++Parent+Block%0A+++++%3C%2Fdt%3E%0A+++++%3Cdd+style%3D%22line-height%3A1.5em%3Bmargin-left%3A1.6em%3B%22%3E%0A+++++++Not+to+be+confused+with+the+%22previous+block%22.+This+is+a+block+that+is+structured+for+the+parent+blockchain+%28i.e.+the%26nbsp%3B%0A++++++%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Eprev_block%3C%2Ftt%3E%26nbsp%3Bhash+points+to+the+prior+block+on+the+parent+blockchain%29.+The+header+of+this+block+is+part+of+the+AuxPOW+Block+in+the+auxiliary+blockchain.%0A+++++%3C%2Fdd%3E%0A+++++%3Cdt+style%3D%22font-weight%3Abold%3B%22%3E%0A++++++AuxPOW+Block%0A+++++%3C%2Fdt%3E%0A+++++%3Cdd+style%3D%22line-height%3A1.5em%3Bmargin-left%3A1.6em%3B%22%3E%0A+++++++This+is+a+new+type+of+block+that+is+similar+to+a+standard+blockchain+block%2C+with+two+important+differences.+Firstly%2C+the+hash+of+the+block+header+does+NOT+meet+the+difficulty+level+of+the+blockchain+%28so%2C+if+interpreted+by+a+naive+client%2C+will+be+thrown+out+as+not+meeting+the+difficulty+level%29.+Secondly%2C+it+has+additional+data+elements+that+show+that+the+miner+who+created+this+block+actually+did+mining+activity+%28hashing%29+on+the+parent+blockchain%2C+and+that+work+meets+the+difficulty+level+of+the+auxiliary+blockchain%2C+which+is+why+this+block+should+be+accepted.%0A+++++%3C%2Fdd%3E%0A++++%3C%2Fdl%3E%0A++++%3Ch2+style%3D%22color%3A%23000000%3Bfont-weight%3Anormal%3Boverflow%3Ahidden%3Bborder-bottom-width%3A1px%3Bborder-bottom-style%3Asolid%3Bborder-bottom-color%3Argb%28170%2C170%2C170%29%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+%3Cspan+class%3D%22mw-headline%22+id%3D%22Aux_proof-of-work_block%22%3EAux+proof-of-work+block%3C%2Fspan%3E%3C%2Fh2%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EThis+is+used+to+prove+work+on+the+auxiliary+blockchain.+In+vinced%27s+original+implementation+it%27s+generated+by+calling+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Egetworkaux%3C%2Ftt%3E%26nbsp%3BRPC+method+on+the+parent+blockchain+client+%28%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebitcoind%3C%2Ftt%3E%29+and+then+the+work+is+then+submitted+by+passing+it+to+the+auxiliary+chain+client+%28%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Enamecoind%3C%2Ftt%3E%29+as+the+second+parameter+to%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Egetauxblock%3C%2Ftt%3E.%3C%2Fp%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EWhen+receiving+an+Aux+proof-of-work+block+in+a%26nbsp%3B%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FProtocol_specification%23block%22+rel%3D%22nofollow%22+title%3D%22Protocol+specification%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%22%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Eblock%3C%2Ftt%3E%22+network+message%3C%2Fa%3E%2C+the+data+received+is+similar+to+a+standard+block%2C+but+extra+data+is+inserted+between+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Enonce%3C%2Ftt%3E%26nbsp%3Band%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Etxn_count%3C%2Ftt%3E%26nbsp%3Belements.+In+the+below+table%2C+the+shaded+rows+are+the+same+as+the+standard+block+definition%3A%3C%2Fp%3E+%0A++++%3Ctable+class%3D%22wikitable%22+style%3D%22font-size%3A14px%3Bborder%3A1px+solid+rgb%28170%2C170%2C170%29%3Bborder-collapse%3Acollapse%3Bcolor%3A%23000000%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3E%0A+++++%3Ctbody%3E%0A++++++%3Ctr%3E%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Field+Size%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Description%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Data+type%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Comments%3C%2Fth%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eversion%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Euint32_t%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E32%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eprev_block%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Echar%5B32%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E32%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Emerkle_root%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Echar%5B32%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Etimestamp%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Euint32_t%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Ebits%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Euint32_t%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Enonce%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Euint32_t%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3F%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Ecoinbase_txn%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FProtocol_specification%23tx%22+rel%3D%22nofollow%22+title%3D%22Protocol+specification%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3Etxn%3C%2Fa%3E%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3ECoinbase+transaction+that+is+in+the+parent+block%2C%26nbsp%3B%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Merged_mining_coinbase%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3Elinking%3C%2Fa%3E%26nbsp%3Bthe+AuxPOW+block+to+its+parent+block%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E32%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eblock_hash%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Echar%5B32%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EHash+of+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Eparent_block%3C%2Ftt%3E%26nbsp%3Bheader%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3F%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Ecoinbase_branch%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Merkle_Branch%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3EMerkle+branch%3C%2Fa%3E%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EThe+merkle+branch+linking+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ecoinbase_txn%3C%2Ftt%3E%26nbsp%3Bto+the+parent+block%27s%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Emerkle_root%3C%2Ftt%3E%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3F%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eblockchain_branch%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Merkle_Branch%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3EMerkle+branch%3C%2Fa%3E%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EThe+merkle+branch+linking+this+auxiliary+blockchain+to+the+others%2C+when+used+in+a+merged+mining+setup+with+multiple+auxiliary+chains%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E80%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eparent_block%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FProtocol_specification%23block%22+rel%3D%22nofollow%22+title%3D%22Protocol+specification%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3EBlock+header%3C%2Fa%3E%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EParent+block+header%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3F%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Etxn_count%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Evar_int%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr+style%3D%22color%3Argb%28153%2C153%2C153%29%3Bbackground-color%3Argb%28221%2C221%2C221%29%3B%22%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3F%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Etxns%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Etx%5B%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A+++++%3C%2Ftbody%3E%0A++++%3C%2Ftable%3E%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EFor+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ecoinbase_branch%3C%2Ftt%3E%26nbsp%3Bmerkle+branch%2C+because+the+coinbase+transaction+is+the+first+transaction+in+the+block+%28if+using+Bitcoin+as+a+parent+chain%2C+i.e.+hash+%237+in+the+example+given%26nbsp%3B%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23Merkle_Branch%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3Ebelow%3C%2Fa%3E%29%2C+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_side_mask%3C%2Ftt%3E%26nbsp%3Bis+always+going+to+be+all+zeroes%2C+because+the+branch+hashes+will+always+be+%22on+the+right%22+of+the+working+hash.%3C%2Fp%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EWhen+only+working+on+one+auxiliary+blockchain%2C+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Eblockchain_branch%3C%2Ftt%3E%26nbsp%3Blink+is+not+needed%2C+and+is+nulled-out+by+being+presented+as+5+bytes+of+zeros+%28interpreted+as+a+one-byte%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Evar_int%3C%2Ftt%3E%26nbsp%3Bindicating+a%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_length%3C%2Ftt%3E%26nbsp%3Bof+zero%2C+and+a+32-bit+%284+byte%29%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_side_mask%3C%2Ftt%3E%26nbsp%3Bof+all+zeroes%29.%3C%2Fp%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3ENote+that+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Eblock_hash%3C%2Ftt%3E%26nbsp%3Belement+is+not+needed+as+you+have+the+full%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Eparent_block%3C%2Ftt%3E%26nbsp%3Bheader+element+and+can+calculate+the+hash+from+that.+The+current+Namecoin+client+doesn%27t+check+this+field+for+validity%2C+and+as+such+some+AuxPOW+blocks+have+it+little-endian%2C+and+some+have+it+big-endian.%3C%2Fp%3E+%0A++++%3Ch2+style%3D%22color%3A%23000000%3Bfont-weight%3Anormal%3Boverflow%3Ahidden%3Bborder-bottom-width%3A1px%3Bborder-bottom-style%3Asolid%3Bborder-bottom-color%3Argb%28170%2C170%2C170%29%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+%3Cspan+class%3D%22mw-headline%22+id%3D%22Merkle_Branch%22%3EMerkle+Branch%3C%2Fspan%3E%3C%2Fh2%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3ESay+Alice+created+a+Merkle+tree%2C+and+it%27s+root+element+is+publicly+available.+For+example%3A%3C%2Fp%3E+%0A++++%3Cpre+style%3D%22font-family%3Amonospace%2C+Courier%3Bborder%3A1px+solid+rgb%28221%2C221%2C221%29%3Bcolor%3A%23000000%3Bline-height%3A1.3em%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3E+++++++++++++merkleRoot+%280%29%0A++++++++++++++%2F++++++++%5C%0A+++++++++++++%2F++++++++++%5C%0A++++++++++++1++++++++++++2%0A+++++++++++%2F+%5C++++++++++%2F+%5C%0A++++++++++%2F+++%5C++++++++%2F+++%5C%0A+++++++++3+++++4++++++5+++++6%0A++++++++%2F+%5C+++%2F+%5C++++%2F+%5C+++%2F+%5C%0A+++++++7+++8+9++10++11+12+13+14%0A%3C%2Fpre%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3ENow+she+wants+to+prove+to+Bob+that+a+given+hash+%28%2310%29+was+part+of+that+tree%2C+but+Bob+doesn%27t+have+the+full+tree+%28only+the+public+root%3B+hash+%230%29.+Alice+can+send+Bob+all+the+hashes+she+used+to+make+the+tree+in+the+first+place+%28hashes+%237-%2314%2C+total+of+7+extra+hashes%29%2C+so+Bob+can+build+the+whole+tree+to+verify+the+root+is+the+same%2C+but+that%27s+rather+data-intensive.+Instead%2C+she+could+give+Bob+hashes+%239%2C+%233%2C+and+%232+%28one+from+each+level+of+the+tree%2C+working+%2310+back+to+the+root%29.+Without+Bob+knowing+the+structure+of+the+tree%2C+Alice+also+has+to+tell+Bob+what+order+to+apply+the+hashes+in+%28since%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ehash%28%239%2C+%2310%29+%3D%3D+%234%3C%2Ftt%3E%2C+but%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ehash%28%2310%2C+%239%29%26nbsp%3B%21%3D+%234%3C%2Ftt%3E%29.+So+Alice+tells+Bob+%22left%2C+left%2C+right%22+to+indicate+which+operand+%239%2C+%233%2C+and+%232+are%2C+respectively.+That+can+be+encoded+as+a+bitmask+and+take+up+very+little+data+to+transmit.+So%2C+instead+of+transmitting+7+hashes+to+Bob%2C+Alice+transmits+3+hashes+and+a+bitmask.+The+data+savings+get+even+more+pronounced+if+the+merkle+tree+gets+even+bigger.%3C%2Fp%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EThat+is+the+overall+premise%2C+and+specifically+for+the+AuxPOW+protocol%2C+it%27s+been+termed+a+%22merkle+branch%22+%28since+it%27s+one+pathway+of+a+merkle+tree%29%2C+and+is+transmitted+thus%3A%3C%2Fp%3E+%0A++++%3Ctable+class%3D%22wikitable%22+style%3D%22font-size%3A14px%3Bborder%3A1px+solid+rgb%28170%2C170%2C170%29%3Bborder-collapse%3Acollapse%3Bcolor%3A%23000000%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3E%0A+++++%3Ctbody%3E%0A++++++%3Ctr%3E%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Field+Size%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Description%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Data+type%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Comments%3C%2Fth%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3F%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Ebranch_length%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FProtocol_specification%23Variable_length_integer%22+rel%3D%22nofollow%22+title%3D%22Protocol+specification%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3Evar_int%3C%2Fa%3E%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EThe+number+of+hashes+making+up+the+branch%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%26nbsp%3B%3F%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Ebranch_hash%5B%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Echar%5B32%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EIndividual+hash+in+the+branch%3B+repeated%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_length%3C%2Ftt%3E%26nbsp%3Bnumber+of+times%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Ebranch_side_mask%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eint32_t%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EBitmask+of+which+side+of+the+merkle+hash+function+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_hash%3C%2Ftt%3E%26nbsp%3Belement+should+go+on.+Zero+means+it+goes+on+the+right%2C+One+means+on+the+left.%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A+++++%3C%2Ftbody%3E%0A++++%3C%2Ftable%3E%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EThe+first%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_hash%3C%2Ftt%3E%26nbsp%3Bis+used+first%2C+and+the+least-significant+bit+of+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_side_mask%3C%2Ftt%3E%26nbsp%3Bdetermines+its+hash+position.+Then+the+second%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_hash%3C%2Ftt%3E%26nbsp%3Bis+applied+with+the+second-least-significant+bit+of+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_side_mask%3C%2Ftt%3E%2C+etc.+So+for+Alice%27s+example%2C%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_length%3C%2Ftt%3E%26nbsp%3Bwould+be+3%2C+the+hashes+would+be+given+in+the+order+%239%2C+%233%2C+then+%232%2C+and+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ebranch_side_mask%3C%2Ftt%3E%26nbsp%3Bwould+be%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3E0b011%3C%2Ftt%3E%26nbsp%3B%3D+3.%3C%2Fp%3E+%0A++++%3Ch2+style%3D%22color%3A%23000000%3Bfont-weight%3Anormal%3Boverflow%3Ahidden%3Bborder-bottom-width%3A1px%3Bborder-bottom-style%3Asolid%3Bborder-bottom-color%3Argb%28170%2C170%2C170%29%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+%3Cspan+class%3D%22mw-headline%22+id%3D%22Merged_mining_coinbase%22%3EMerged+mining+coinbase%3C%2Fspan%3E%3C%2Fh2%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EInsert+exactly+one+of+these+headers+into+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3EscriptSig%3C%2Ftt%3E%26nbsp%3Bof+the+coinbase+transaction+in+the+parent+block.%3C%2Fp%3E+%0A++++%3Ctable+class%3D%22wikitable%22+style%3D%22font-size%3A14px%3Bborder%3A1px+solid+rgb%28170%2C170%2C170%29%3Bborder-collapse%3Acollapse%3Bcolor%3A%23000000%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3E%0A+++++%3Ctbody%3E%0A++++++%3Ctr%3E%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Field+Size%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Description%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Data+type%3C%2Fth%3E+%0A+++++++%3Cth+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3Btext-align%3Acenter%3Bbackground-color%3Argb%28242%2C242%2C242%29%3B%22%3E+Comments%3C%2Fth%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Emagic%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Echar%5B4%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3E0xfa%3C%2Ftt%3E%2C%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3E0xbe%3C%2Ftt%3E%2C+%27m%27%2C+%27m%27%26nbsp%3B%3Cstrong%3E%28only+required+if+over+20+bytes+past+the+start+of+the+script%3B+optional+otherwise%29%3C%2Fstrong%3E%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E32%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eblock_hash%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Echar%5B32%5D%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3EHash+of+the+AuxPOW+block+header%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Emerkle_size%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eint32_t%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3ENumber+of+entries+in+aux+work+merkle+tree.%26nbsp%3B%3Cstrong%3E%28Must+be+a+power+of+2%29%3C%2Fstrong%3E%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A++++++%3Ctr%3E%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3E4%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Emerkle_nonce%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3Eint32_t%3C%2Ftd%3E+%0A+++++++%3Ctd+style%3D%22border%3A1px+solid+rgb%28170%2C170%2C170%29%3B%22%3ENonce+used+to+calculate+indexes+into+aux+work+merkle+tree%3B+you+may+as+well+leave+this+at+zero%3C%2Ftd%3E+%0A++++++%3C%2Ftr%3E%0A+++++%3C%2Ftbody%3E%0A++++%3C%2Ftable%3E%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EThat+string+of+44+bytes+being+part+of+the+coinbase+script+means+that+the+miner+constructed+the+AuxPOW+Block+before+creating+the+coinbase.%3C%2Fp%3E+%0A++++%3Ch2+style%3D%22color%3A%23000000%3Bfont-weight%3Anormal%3Boverflow%3Ahidden%3Bborder-bottom-width%3A1px%3Bborder-bottom-style%3Asolid%3Bborder-bottom-color%3Argb%28170%2C170%2C170%29%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+%3Cspan+class%3D%22mw-headline%22+id%3D%22Aux_work_merkle_tree%22%3EAux+work+merkle+tree%3C%2Fspan%3E%3C%2Fh2%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EIf+you%27re+just+mining+a+single+auxiliary+chain+and+using+getauxblock%2C+you+don%27t+have+to+worry+about+this+-+just+set+the+merkle+tree+hash+in+the+coinbase+to+the+aux+chain+block%27s+hash+as+given+by+getauxblock%2C+the+merkle+size+to+1%2C+and+the+merkle+nonce+to+0.+If+you%27re+mining+more+than+one%2C+this+is+a+bit+broken.+It+uses+the+following+algorithm+to+convert+the+chain+ID+to+a+slot+at+the+base+of+the+merkle+tree+in+which+that+chain%27s+block+hash+must+slot%3A%3C%2Fp%3E+%0A++++%3Cpre+style%3D%22font-family%3Amonospace%2C+Courier%3Bborder%3A1px+solid+rgb%28221%2C221%2C221%29%3Bcolor%3A%23000000%3Bline-height%3A1.3em%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3Eunsigned+int+rand+%3D+merkle_nonce%3B%0Arand+%3D+rand+*+1103515245+%2B+12345%3B%0Arand+%2B%3D+chain_id%3B%0Arand+%3D+rand+*+1103515245+%2B+12345%3B%0Aslot_num+%3D+rand%26nbsp%3B%25+merkle_size%3C%2Fpre%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EThe+idea+is+that+you+can+increment+merkle_nonce+until+the+chains+you%27re+mining+don%27t+clash+for+the+same+slot.+The+trouble+is+that+this+doesn%27t+work%3B+because+it+just+adds+a+number+derived+from+the+merkle_nonce+to+the+chain_id%2C+if+two+chains+clash+for+one+nonce+they%27ll+still+clash+for+all+possible+nonces.%3Csup+id%3D%22cite_ref-0%22+class%3D%22reference%22+style%3D%22line-height%3A1%3B%22%3E%3Ca+href%3D%22https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FMerged_mining_specification%23cite_note-0%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%2811%2C0%2C128%29%3Bbackground%3Anone%3B%22%3E%5B1%5D%3C%2Fa%3E%3C%2Fsup%3E%26nbsp%3BNew+implementers%3A+please+pick+your+chain_id+so+that+not+clashing+with+existing+chains+requires+as+small+a+value+of+merkle_size+as+possible%2C+or+use+a+better+algorithm+to+calculate+the+slot+id+for+your+chain.%3C%2Fp%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EOnce+you+know+where+in+the+merkle+tree+the+different+chains+go%2C%26nbsp%3B%3Cem%3Ereverse+the+bytes+of+each+chain%27s+block+hash+as+given+you+by+getauxblock%3C%2Fem%3E%26nbsp%3B%28so+the+byte+at+the+start+moves+to+the+end%2C+etc%29+and+insert+into+the+appropriate+slot%2C+filling+the+unused+ones+with+arbitrary+data.+Now+build+up+the+merkle+tree+as+usual+by+taking+each+pair+of+values+in+the+initial+row+and+double+SHA-256+hashing+them+to+give+a+new+row+of+hashes%2C+repeating+this+until+you+only+have+a+single+hash.+This+last+hash+is+the+merkle+root.+You+need+to%3Cem%3Ereverse+the+bytes+of+this+again%3C%2Fem%3E%26nbsp%3Bbefore+inserting+it+into+the+coinbase.+If+you%27re+not+using+getauxblock+to+get+the+block+hash%2C+you+can+skip+the+first+reversal+but+still+need+to+reverse+the+final+merkle+root+when+adding+it+to+the+coinbase.%3C%2Fp%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EThe+aux+proof-of-work+also+needs+a+merkle+branch%2C+which+is+built+as+follows%3A+find+the+location+of+the+block%27s+hash+in+the+merkle+tree%2C+and+add+the+other+value+that+you+hashed+it+with+in+building+the+merkle+tree.+Now+add+the+value+you+hashed+that+result+with.+Keep+doing+this+until+you+reach+the+root.+The+merkle+root+itself+is%26nbsp%3B%3Cem%3Enever%3C%2Fem%3Eincluded+in+the+merkle+branch.+If+you+just+have+a+single+aux+chain%2C+this+can+be+left+entirely+empty.+%28It+also+appears+you%26nbsp%3B%3Cem%3Edon%27t%3C%2Fem%3E%26nbsp%3Bneed+to+reverse+these+hashes.%29%3C%2Fp%3E+%0A++++%3Ch2+style%3D%22color%3A%23000000%3Bfont-weight%3Anormal%3Boverflow%3Ahidden%3Bborder-bottom-width%3A1px%3Bborder-bottom-style%3Asolid%3Bborder-bottom-color%3Argb%28170%2C170%2C170%29%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+%3Cspan+class%3D%22mw-headline%22+id%3D%22Example%22%3EExample%3C%2Fspan%3E%3C%2Fh2%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EThis+is+the+AuxPOW+block+at%26nbsp%3B%3Ca+class%3D%22external+text%22+href%3D%22http%3A%2F%2Fexplorer.dot-bit.org%2Fb%2F19200%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%28102%2C51%2C102%29%3B%22%3Eheight+19200%3C%2Fa%3E%26nbsp%3Bin+the+Namecoin+chain+%28the+first+block+that+allowed+AuxPOW+authentication%29.+It+has+a+hash+of%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Ed8a7c3e01e1e95bcee015e6fcc7583a2ca60b79e5a3aa0a171eddd344ada903d%3C%2Ftt%3E%2C+and+only+has+one+Namecoin+transaction+%28coinbase+sending+50+NMC+to+the+miner%27s+address%29.+The+parent+block+that+was+used+as+Proof+of+Work+has+a+hash+less+than+the+difficulty+target+of+Namecoin+at+the+time%2C+but+not+the+Bitcoin+target%3A%3C%2Fp%3E+%0A++++%3Cpre+style%3D%22font-family%3Amonospace%2C+Courier%3Bborder%3A1px+solid+rgb%28221%2C221%2C221%29%3Bcolor%3A%23000000%3Bline-height%3A1.3em%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3E0000000000003d47277359fb969c43e3c7e7c0306a17f6444b8e91e19def03a9+--+parent+block+hash%0A000000000000b269000000000000000000000000000000000000000000000000+--+Namecoin+difficulty+target%0A00000000000009ee5d0000000000000000000000000000000000000000000000+--+Bitcoin+difficulty+target%0A%3C%2Fpre%3E+%0A++++%3Cp+style%3D%22line-height%3Ainherit%3B%22%3EHence%2C+this+AuxPOW+block+was+valid+in+the+Namecoin+blockchain%2C+but+not+in+the+Bitcoin+blockchain+%28you+will+find+no+Bitcoin+block+with+the+hash+starting%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3E3d47277359fb969c%3C%2Ftt%3E.+If+it+were%2C+it+would+be+right+after%26nbsp%3B%3Ca+class%3D%22external+text%22+href%3D%22https%3A%2F%2Fblockchain.info%2Fblock-index%2F163650%2F00000000000004a59b7deb5c4e01b9786ea01ee8da000db77ce6035c2913be08%22+rel%3D%22nofollow%22+style%3D%22text-decoration%3Anone%3Bcolor%3Argb%28102%2C51%2C102%29%3B%22%3E%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3E4a59b7deb5c4e01b%3C%2Ftt%3E%3C%2Fa%3E%2C+since+that%27s+the%26nbsp%3B%3Ctt+style%3D%22font-family%3Amonospace%2C+Courier%3B%22%3Eprevious_block%3C%2Ftt%3E%26nbsp%3Bhash+used%29%3C%2Fp%3E+%0A++++%3Cpre+style%3D%22font-family%3Amonospace%2C+Courier%3Bborder%3A1px+solid+rgb%28221%2C221%2C221%29%3Bcolor%3A%23000000%3Bline-height%3A1.3em%3Bbackground-color%3Argb%28249%2C249%2C249%29%3B%22%3EBlock+Header%3A%0A+01+01+01+00++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Version%0A+36+90+9a+c0+7a+16+73+da+f6+5f+a7+d8+28+88+2e+66+c9+e8+9f+85+46+cd+d5+0a+9f+b1+00+00+00+00+00+00++++%2F%2F+Previous+block+hash%0A+0f+5c+65+49+bc+d6+08+ab+7c+4e+ac+59+3e+5b+d5+a7+3b+2d+43+2e+b6+35+18+70+8f+77+8f+c7+dc+df+af+88++++%2F%2F+Merkle+root%0A+8d+1a+90+4e++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Timestamp%0A+69+b2+00+1b++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Bits%0A+00+00+00+00++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Nonce%0A%0AParent+Block+Coinbase+Transaction%3A%0A+01+00+00+00++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Version%0A+01+++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+TxIn+Count%0A%0A+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00++++%2F%2F+Previous+Out%0A+00+00+00+00+00+00+00+00+00+00+00+00+00+00+ff+ff+ff+ff%0A%0A+35+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Script+size%0A+04+5d+ee+09+1a+01+4d+52+2c+fa+be+6d+6d+d8+a7+c3+e0+1e+1e+95+bc+ee+01+5e+6f+cc+75+83+a2+ca+60+b7++++%2F%2F+Script%0A+9e+5a+3a+a0+a1+71+ed+dd+34+4a+da+90+3d+01+00+00+00+00+00+00+00%0A%0A+ff+ff+ff+ff++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Sequence+Number%0A+01+++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+TxOut+Count%0A+60+a0+10+2a+01+00+00+00++++++++++++++++++++++++++++++++++%2F%2F+Amount%0A%0A+43+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Script+Size%0A+41+04+f8+bb+e9+7e+d2+ac+bc+5b+ba+11+c6+8f+6f+1a+03+13+f9+18+f3+d3+c0+e8+47+50+55+e3+51+e3+bf+44++++%2F%2F+Script%0A+2f+8c+8d+ce+e6+82+d2+45+7b+dc+53+51+b7+0d+d9+e3+40+26+76+6e+ba+18+b0+6e+ae+e2+e1+02+ef+d1+ab+63%0A+46+67+ac%0A%0A+00+00+00+00++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Lock+Time%0A%0ACoinbase+Link%3A%0A+a9+03+ef+9d+e1+91+8e+4b+44+f6+17+6a+30+c0+e7+c7+e3+43+9c+96+fb+59+73+27+47+3d+00+00+00+00+00+00++++%2F%2F+Hash+of+parent+block+header%0A+05+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Number+of+links+in+branch%0A+05+0a+c4+a1+a1+e1+bc+e0+c4+8e+55+5b+1a+9f+93+52+81+96+8c+72+d6+37+9b+24+72+9c+a0+42+5a+3f+c3+cb++++%2F%2F+Hash+%231%0A+43+3c+d3+48+b3+5e+a2+28+06+cf+21+c7+b1+46+48+9a+ef+69+89+55+1e+b5+ad+23+73+ab+61+21+06+0f+30+34++++%2F%2F+Hash+%232%0A+1d+64+87+57+c0+21+7d+43+e6+6c+57+ea+ed+64+fc+18+20+ec+65+d1+57+f3+3b+74+19+65+18+3a+5e+0c+85+06++++%2F%2F+Hash+%233%0A+ac+26+02+df+e2+f5+47+01+2d+1c+c7+50+04+d4+8f+97+ab+a4+6b+d9+93+0f+f2+85+c9+f2+76+f5+bd+09+f3+56++++%2F%2F+Hash+%234%0A+df+19+72+45+79+d6+5e+c7+cb+62+bf+97+94+6d+fc+6f+b0+e3+b2+83+9b+7f+da+b3+7c+db+60+e5+51+22+d3+5b++++%2F%2F+Hash+%235%0A+00+00+00+00++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Branch+sides+bitmask%0A%0AAux+Blockchain+Link%3A%0A+00+++++++++++++%2F%2F+Number+of+links+in+branch%0A+00+00+00+00++++%2F%2F+Branch+sides+bitmask%0A%0AParent+Block+Header%3A%0A+01+00+00+00++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Version%0A+08+be+13+29+5c+03+e6+7c+b7+0d+00+da+e8+1e+a0+6e+78+b9+01+4e+5c+eb+7d+9b+a5+04+00+00+00+00+00+00++++%2F%2F+Previous+block+hash%0A+e0+fd+42+db+8e+f6+d7+83+f0+79+d1+26+be+a1+2e+2d+10+c1+04+c0+92+7c+d6+8f+95+4d+85+6f+9e+81+11+e5++++%2F%2F+Merkle+root%0A+9a+23+90+4e++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Timestamp%0A+5d+ee+09+1a++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Bits%0A+1c+65+50+86++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Nonce%0A%0ATransactions%3A%0A+01+++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Tx++Count%0A+01+00+00+00++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Version%0A+01+++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+TxIn+Count%0A%0A+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00+00++++%2F%2F+Previous+Out%0A+00+00+00+00+00+00+00+00+00+00+00+00+00+00+ff+ff+ff+ff%0A%0A+08+++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Script+size%0A+04+69+b2+00+1b+01+01+52++++++++++++++++++++++++++++++++++%2F%2F+Script%0A+ff+ff+ff+ff++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Sequence+number%0A+01+++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+TxOut+Count%0A+00+f2+05+2a+01+00+00+00++++++++++++++++++++++++++++++++++%2F%2F+Amount%0A%0A+43+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Script+size%0A+41+04+89+fe+91+e6+28+47+57+5c+98+de+ea+b0+20+f6+5f+df+f1+7a+3a+87+0e+bb+05+82+0b+41+4f+3d+80+97++++%2F%2F+Script%0A+21+8e+c9+a6+5f+1e+0a+e0+ac+35+af+72+47+bd+79+ed+1f+2a+24+67+5f+ff+b5+aa+6f+96+20+e1+92+0a+d4+bf%0A+5a+a6+ac%0A%0A+00+00+00+00++++++++++++++++++++++++++++++++++++++++++++++%2F%2F+Lock+Time%0A%3C%2Fpre%3E+%0A++++%3Ch2+style%3D%22color%3A%23000000%3Bfont-weight%3Anormal%3Boverflow%3Ahidden%3Bborder-bottom-width%3A1px%3Bborder-bottom-style%3Asolid%3Bborder-bottom-color%3Argb%28170%2C170%2C170%29%3Bline-height%3A1.3%3Bbackground%3Anone%3B%22%3E+%3Cspan+style%3D%22font-family%3AArial%2C+Helvetica%2C+sans-serif%3Bfont-size%3A12px%3B%22%3Ehttp%3A%2F%2Fbitcoin.stackexchange.com%2Fquestions%2F273%2Fhow-does-merged-mining-work%3C%2Fspan%3E%3C%2Fh2%3E+%0A+++%3C%2Fdiv%3E+%0A++%3C%2Fdiv%3E+%0A++%3Cp%3E%3Cbr%3E%3C%2Fp%3E+%0A++%3Cp%3E%E9%9D%9E%E5%90%88%E5%B9%B6%E6%8C%96%E7%9F%BF%E5%BE%97%E5%88%B0%E7%9A%84namecoin+block%3C%2Fp%3E+%0A++%3Cp%3E%3Cimg+src%3D%22https%3A%2F%2Fimg-blog.csdn.net%2F20150108095751612%22+alt%3D%22%22%3E%3Cbr%3E%3C%2Fp%3E+%0A++%3Cp%3E%E5%90%88%E5%B9%B6%E6%8C%96%E7%9F%BF%E7%9A%84block%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%98%BE%E7%A4%BA%E6%8F%92%E5%85%A5%E7%9A%84AuxPow%E9%83%A8%E5%88%86%3C%2Fp%3E+%0A++%3Cp%3E%3Cimg+src%3D%22https%3A%2F%2Fimg-blog.csdn.net%2F20150108095733359%22+alt%3D%22%22%3E%3Cbr%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cbr%3E%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode+class%3D%22language-cpp%22%3Ebool+CheckWork%28CBlock*+pblock%2C+CWallet%26amp%3B+wallet%2C+CReserveKey%26amp%3B+reservekey%29%0A%7B%0A++++uint256+hash+%3D+pblock-%26gt%3BGetHash%28%29%3B%0A++++uint256+hashTarget+%3D+CBigNum%28%29.SetCompact%28pblock-%26gt%3BnBits%29.getuint256%28%29%3B%0A%0A++++CAuxPow+*auxpow+%3D+pblock-%26gt%3Bauxpow.get%28%29%3B%0A%0A++++if+%28auxpow+%21%3D+NULL%29%0A++++%7B%0A++++++++if+%28%21auxpow-%26gt%3BCheck%28hash%2C+pblock-%26gt%3BGetChainID%28%29%29%29%0A++++++++++++return+error%28%22AUX+POW+is+not+valid%22%29%3B%0A%0A++++++++if+%28auxpow-%26gt%3BGetParentBlockHash%28%29+%26gt%3B+hashTarget%29%0A++++++++++++return+error%28%22AUX+POW+parent+hash+%25s+is+not+under+target+%25s%22%2C+auxpow-%26gt%3BGetParentBlockHash%28%29.GetHex%28%29.c_str%28%29%2C+hashTarget.GetHex%28%29.c_str%28%29%29%3B%0A%0A++++++++%2F%2F%2F%2F+debug+print%0A++++++++printf%28%22BitcoinMiner%3A%5Cn%22%29%3B%0A++++++++printf%28%22AUX+proof-of-work+found++%5Cn+++++our+hash%3A+%25s+++%5Cn++parent+hash%3A+%25s++%5Cn+++++++target%3A+%25s%5Cn%22%2C%0A++++++++++++++++hash.GetHex%28%29.c_str%28%29%2C%0A++++++++++++++++auxpow-%26gt%3BGetParentBlockHash%28%29.GetHex%28%29.c_str%28%29%2C%0A++++++++++++++++hashTarget.GetHex%28%29.c_str%28%29%29%3B%0A++++%7D%0A++++else%0A++++%7B%0A++++++++if+%28hash+%26gt%3B+hashTarget%29%0A++++++++++++return+false%3B%0A%0A++++++++%2F%2F%2F%2F+debug+print%0A++++++++printf%28%22BitcoinMiner%3A%5Cn%22%29%3B%0A++++++++printf%28%22proof-of-work+found++%5Cn++hash%3A+%25s++%5Cntarget%3A+%25s%5Cn%22%2C+hash.GetHex%28%29.c_str%28%29%2C+hashTarget.GetHex%28%29.c_str%28%29%29%3B%0A++++%7D%0A%0A++++pblock-%26gt%3Bprint%28%29%3B%0A++++printf%28%22%25s+%22%2C+DateTimeStrFormat%28%22%25x+%25H%3A%25M%22%2C+GetTime%28%29%29.c_str%28%29%29%3B%0A++++printf%28%22generated+%25s%5Cn%22%2C+FormatMoney%28pblock-%26gt%3Bvtx%5B0%5D.vout%5B0%5D.nValue%29.c_str%28%29%29%3B%0A%0A++++%2F%2F+Found+a+solution%0A++++CRITICAL_BLOCK%28cs_main%29%0A++++%7B%0A++++++++if+%28pblock-%26gt%3BhashPrevBlock+%21%3D+hashBestChain%29%0A++++++++++++return+error%28%22BitcoinMiner+%3A+generated+block+is+stale%22%29%3B%0A%0A++++++++%2F%2F+Remove+key+from+key+pool%0A++++++++reservekey.KeepKey%28%29%3B%0A%0A++++++++%2F%2F+Track+how+many+getdata+requests+this+block+gets%0A++++++++CRITICAL_BLOCK%28wallet.cs_mapRequestCount%29%0A++++++++++++wallet.mapRequestCount%5Bpblock-%26gt%3BGetHash%28%29%5D+%3D+0%3B%0A%0A++++++++%2F%2F+Process+this+block+the+same+as+if+we+had+received+it+from+another+node%0A++++++++if+%28%21ProcessBlock%28NULL%2C+pblock%29%29%0A++++++++++++return+error%28%22BitcoinMiner+%3A+ProcessBlock%2C+block+not+accepted%22%29%3B%0A++++%7D%0A%0A++++Sleep%282000%29%3B%0A++++return+true%3B%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-cpp%22%3Ebool+CAuxPow%3A%3ACheck%28uint256+hashAuxBlock%2C+int+nChainID%29%0A%7B%0A++++if+%28nIndex+%21%3D+0%29%0A++++++++return+error%28%22AuxPow+is+not+a+generate%22%29%3B%0A%0A++++if+%28%21fTestNet+%26amp%3B%26amp%3B+parentBlock.GetChainID%28%29+%3D%3D+nChainID%29%0A++++++++return+error%28%22Aux+POW+parent+has+our+chain+ID%22%29%3B%0A%0A++++if+%28vChainMerkleBranch.size%28%29+%26gt%3B+30%29%0A++++++++return+error%28%22Aux+POW+chain+merkle+branch+too+long%22%29%3B%0A%0A++++%2F%2F+Check+that+the+chain+merkle+root+is+in+the+coinbase%0A++++uint256+nRootHash+%3D+CBlock%3A%3ACheckMerkleBranch%28hashAuxBlock%2C+vChainMerkleBranch%2C+nChainIndex%29%3B%0A++++vector%26lt%3Bunsigned+char%26gt%3B+vchRootHash%28nRootHash.begin%28%29%2C+nRootHash.end%28%29%29%3B%0A++++std%3A%3Areverse%28vchRootHash.begin%28%29%2C+vchRootHash.end%28%29%29%3B+%2F%2F+correct+endian%0A%0A++++%2F%2F+Check+that+we+are+in+the+parent+block+merkle+tree%0A++++if+%28CBlock%3A%3ACheckMerkleBranch%28GetHash%28%29%2C+vMerkleBranch%2C+nIndex%29+%21%3D+parentBlock.hashMerkleRoot%29%0A++++++++return+error%28%22Aux+POW+merkle+root+incorrect%22%29%3B%0A%0A++++const+CScript+script+%3D+vin%5B0%5D.scriptSig%3B%0A%0A++++%2F%2F+Check+that+the+same+work+is+not+submitted+twice+to+our+chain.%0A++++%2F%2F%0A%0A++++CScript%3A%3Aconst_iterator+pcHead+%3D%0A++++++++std%3A%3Asearch%28script.begin%28%29%2C+script.end%28%29%2C+UBEGIN%28pchMergedMiningHeader%29%2C+UEND%28pchMergedMiningHeader%29%29%3B%0A%0A++++CScript%3A%3Aconst_iterator+pc+%3D%0A++++++++std%3A%3Asearch%28script.begin%28%29%2C+script.end%28%29%2C+vchRootHash.begin%28%29%2C+vchRootHash.end%28%29%29%3B%0A%0A++++if+%28pc+%3D%3D+script.end%28%29%29%0A++++++++return+error%28%22Aux+POW+missing+chain+merkle+root+in+parent+coinbase%22%29%3B%0A%0A++++if+%28pcHead+%21%3D+script.end%28%29%29%0A++++%7B%0A++++++++%2F%2F+Enforce+only+one+chain+merkle+root+by+checking+that+a+single+instance+of+the+merged%0A++++++++%2F%2F+mining+header+exists+just+before.%0A++++++++if+%28script.end%28%29+%21%3D+std%3A%3Asearch%28pcHead+%2B+1%2C+script.end%28%29%2C+UBEGIN%28pchMergedMiningHeader%29%2C+UEND%28pchMergedMiningHeader%29%29%29%0A++++++++++++return+error%28%22Multiple+merged+mining+headers+in+coinbase%22%29%3B%0A++++++++if+%28pcHead+%2B+sizeof%28pchMergedMiningHeader%29+%21%3D+pc%29%0A++++++++++++return+error%28%22Merged+mining+header+is+not+just+before+chain+merkle+root%22%29%3B%0A++++%7D%0A++++else%0A++++%7B%0A++++++++%2F%2F+For+backward+compatibility.%0A++++++++%2F%2F+Enforce+only+one+chain+merkle+root+by+checking+that+it+starts+early+in+the+coinbase.%0A++++++++%2F%2F+8-12+bytes+are+enough+to+encode+extraNonce+and+nBits.%0A++++++++if+%28pc+-+script.begin%28%29+%26gt%3B+20%29%0A++++++++++++return+error%28%22Aux+POW+chain+merkle+root+must+start+in+the+first+20+bytes+of+the+parent+coinbase%22%29%3B%0A++++%7D%0A%0A%0A++++%2F%2F+Ensure+we+are+at+a+deterministic+point+in+the+merkle+leaves+by+hashing%0A++++%2F%2F+a+nonce+and+our+chain+ID+and+comparing+to+the+index.%0A++++pc+%2B%3D+vchRootHash.size%28%29%3B%0A++++if+%28script.end%28%29+-+pc+%26lt%3B+8%29%0A++++++++return+error%28%22Aux+POW+missing+chain+merkle+tree+size+and+nonce+in+parent+coinbase%22%29%3B%0A%0A++++int+nSize%3B%0A++++memcpy%28%26amp%3BnSize%2C+%26amp%3Bpc%5B0%5D%2C+4%29%3B%0A++++if+%28nSize+%21%3D+%281+%26lt%3B%26lt%3B+vChainMerkleBranch.size%28%29%29%29%0A++++++++return+error%28%22Aux+POW+merkle+branch+size+does+not+match+parent+coinbase%22%29%3B%0A%0A++++int+nNonce%3B%0A++++memcpy%28%26amp%3BnNonce%2C+%26amp%3Bpc%5B4%5D%2C+4%29%3B%0A%0A++++%2F%2F+Choose+a+pseudo-random+slot+in+the+chain+merkle+tree%0A++++%2F%2F+but+have+it+be+fixed+for+a+size%2Fnonce%2Fchain+combination.%0A++++%2F%2F%0A++++%2F%2F+This+prevents+the+same+work+from+being+used+twice+for+the%0A++++%2F%2F+same+chain+while+reducing+the+chance+that+two+chains+clash%0A++++%2F%2F+for+the+same+slot.%0A++++unsigned+int+rand+%3D+nNonce%3B%0A++++rand+%3D+rand+*+1103515245+%2B+12345%3B%0A++++rand+%2B%3D+nChainID%3B%0A++++rand+%3D+rand+*+1103515245+%2B+12345%3B%0A%0A++++if+%28nChainIndex+%21%3D+%28rand+%25+nSize%29%29%0A++++++++return+error%28%22Aux+POW+wrong+index%22%29%3B%0A%0A++++return+true%3B%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cbr%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fhacode%2Farticle%2Fdetails%2F42457197%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fhacode%2Farticle%2Fdetails%2F42457197%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}