---
layout: default
title: 国密SM2算法数字签名预处理1及预处理2数据封装测试，基于GmSSL
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cpre%3E%3Ccode+class%3D%22language-cpp%22%3E%2F**%0A+*+%E9%AA%8C%E8%AF%81GM%2FT+0003.5--2012+%E9%99%84%E5%BD%95A+%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E4%B8%8E%E9%AA%8C%E8%AF%81%E7%A4%BA%E4%BE%8B%0A+*+GmSSL%EF%BC%9A+https%3A%2F%2Fgithub.com%2Fguanzhi%2FGmSSL%0A+*+git%E7%89%88%E6%9C%AC%EF%BC%9A95c0dba%0A+*%2F%0Avoid+testSM2Prestreat%28%29+%7B%0A%0A%09BIGNUM+*a%2C+*b%2C+*xG%2C+*yG%2C+*xA%2C+*yA%2C+*zA%3B%0A%09a+%3D+BN_new%28%29%3B%0A%09b+%3D+BN_new%28%29%3B%0A%09xG+%3D+BN_new%28%29%3B%0A%09yG+%3D+BN_new%28%29%3B%0A%09xA+%3D+BN_new%28%29%3B%0A%09yA+%3D+BN_new%28%29%3B%0A%09zA+%3D+BN_new%28%29%3B%0A%0A%09BN_hex2bn%28%26amp%3Ba%2C%0A%09%09%09%22FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC%22%29%3B%0A%09BN_hex2bn%28%26amp%3Bb%2C%0A%09%09%09%2228E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93%22%29%3B%0A%09BN_hex2bn%28%26amp%3BxG%2C%0A%09%09%09%2232C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7%22%29%3B%0A%09BN_hex2bn%28%26amp%3ByG%2C%0A%09%09%09%22BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0%22%29%3B%0A%09BN_hex2bn%28%26amp%3BxA%2C%0A%09%09%09%2209F9DF311E5421A150DD7D161E4BC5C672179FAD1833FC076BB08FF356F35020+%22%29%3B%0A%09BN_hex2bn%28%26amp%3ByA%2C%0A%09%09%09%22CCEA490CE26775A52DC6EA718CC1AA600AED05FBF35E084A6632F6072DA9AD13%22%29%3B%0A%0A%09unsigned+char+ENTL%5B2%5D%3B%0A%09unsigned+char+id%5B%5D+%3D+%7B+0x31%2C+0x32%2C+0x33%2C+0x34%2C+0x35%2C+0x36%2C+0x37%2C+0x38%2C+0x31%2C%0A%09%09%090x32%2C+0x33%2C+0x34%2C+0x35%2C+0x36%2C+0x37%2C+0x38+%7D%3B%0A%09int+idLen+%3D+sizeof%28id%29+*+8%3B%0A%09unsigned+char+aBin%5B32%5D+%3D+%7B+0+%7D%3B%0A%09unsigned+char+bBin%5B32%5D+%3D+%7B+0+%7D%3B%0A%09unsigned+char+xGBin%5B32%5D+%3D+%7B+0+%7D%3B%0A%09unsigned+char+yGBin%5B32%5D+%3D+%7B+0+%7D%3B%0A%09unsigned+char+xABin%5B32%5D+%3D+%7B+0+%7D%3B%0A%09unsigned+char+yABin%5B32%5D+%3D+%7B+0+%7D%3B%0A%0A%09%2F%2F%E5%86%85%E5%AD%98%E4%B8%AD%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%9D%87%E9%87%87%E7%94%A8%E5%A4%A7%E7%AB%AF%E5%AD%98%E5%82%A8%0A%09BN_bn2bin%28a%2C+aBin%29%3B%0A%09BN_bn2bin%28b%2C+bBin%29%3B%0A%09BN_bn2bin%28xG%2C+xGBin%29%3B%0A%09BN_bn2bin%28yG%2C+yGBin%29%3B%0A%09BN_bn2bin%28xA%2C+xABin%29%3B%0A%09BN_bn2bin%28yA%2C+yABin%29%3B%0A%09ENTL%5B0%5D+%3D+0%3B%0A%09ENTL%5B1%5D+%3D+idLen%3B%0A%0A%09FILE+*fp+%3D+fopen%28%22%2Ftmp%2Fsm2Prestrest1.bin%22%2C+%22wb%22%29%3B%0A%09fwrite%28ENTL%2C+2%2C+1%2C+fp%29%3B%0A%09fwrite%28id%2C+sizeof%28id%29%2C+1%2C+fp%29%3B%0A%09fwrite%28aBin%2C+sizeof%28aBin%29%2C+1%2C+fp%29%3B%0A%09fwrite%28bBin%2C+sizeof%28bBin%29%2C+1%2C+fp%29%3B%0A%09fwrite%28xGBin%2C+sizeof%28xGBin%29%2C+1%2C+fp%29%3B%0A%09fwrite%28yGBin%2C+sizeof%28yGBin%29%2C+1%2C+fp%29%3B%0A%09fwrite%28xABin%2C+sizeof%28xABin%29%2C+1%2C+fp%29%3B%0A%09fwrite%28yABin%2C+sizeof%28yABin%29%2C+1%2C+fp%29%3B%0A%09fclose%28fp%29%3B%0A%09%2F*%0A%09+%5Byeqiang%40localhost+exampleProgram%5D%24+hexdump+-C+%2Ftmp%2Fsm2Prestrest1.bin%0A%09+00000000++00+80+31+32+33+34+35+36++37+38+31+32+33+34+35+36++%7C..12345678123456%7C%0A%09+00000010++37+38+ff+ff+ff+fe+ff+ff++ff+ff+ff+ff+ff+ff+ff+ff++%7C78..............%7C%0A%09+00000020++ff+ff+ff+ff+ff+ff+00+00++00+00+ff+ff+ff+ff+ff+ff++%7C................%7C%0A%09+00000030++ff+fc+28+e9+fa+9e+9d+9f++5e+34+4d+5a+9e+4b+cf+65++%7C..%28.....%5E4MZ.K.e%7C%0A%09+00000040++09+a7+f3+97+89+f5+15+ab++8f+92+dd+bc+bd+41+4d+94++%7C.............AM.%7C%0A%09+00000050++0e+93+32+c4+ae+2c+1f+19++81+19+5f+99+04+46+6a+39++%7C..2..%2C...._..Fj9%7C%0A%09+00000060++c9+94+8f+e3+0b+bf+f2+66++0b+e1+71+5a+45+89+33+4c++%7C.......f..qZE.3L%7C%0A%09+00000070++74+c7+bc+37+36+a2+f4+f6++77+9c+59+bd+ce+e3+6b+69++%7Ct..76...w.Y...ki%7C%0A%09+00000080++21+53+d0+a9+87+7c+c6+2a++47+40+02+df+32+e5+21+39++%7C%21S...%7C.*G%40..2.%219%7C%0A%09+00000090++f0+a0+09+f9+df+31+1e+54++21+a1+50+dd+7d+16+1e+4b++%7C.....1.T%21.P.%7D..K%7C%0A%09+000000a0++c5+c6+72+17+9f+ad+18+33++fc+07+6b+b0+8f+f3+56+f3++%7C..r....3..k...V.%7C%0A%09+000000b0++50+20+cc+ea+49+0c+e2+67++75+a5+2d+c6+ea+71+8c+c1++%7CP+..I..gu.-..q..%7C%0A%09+000000c0++aa+60+0a+ed+05+fb+f3+5e++08+4a+66+32+f6+07+2d+a9++%7C.%60.....%5E.Jf2..-.%7C%0A%09+000000d0++ad+13+++++++++++++++++++++++++++++++++++++++++++++%7C..%7C%0A%09+000000d2%0A%09+%5Byeqiang%40localhost+exampleProgram%5D%24+%2Fusr%2Flocal%2Fgmssl%2Fbin%2Fgmssl+dgst+-sm3+-hex+%2Ftmp%2Fsm2Prestrest1.bin%0A%09+SM3%28%2Ftmp%2Fsm2Prestrest1.bin%29%3D+b2e14c5c79c6df5b85f4fe7ed8db7a262b9da7e07ccb0ea9f4747b8ccda8a4f3%0A%09+*%2F%0A%0A%09%2F%2F%E8%AE%A1%E7%AE%97%E9%A2%84%E5%A4%84%E7%90%862%0A%09unsigned+char+m%5B%5D+%3D+%7B+0x6D%2C+0x65%2C+0x73%2C+0x73%2C+0x61%2C+0x67%2C+0x65%2C+0x20%2C+0x64%2C%0A%09%09%090x69%2C+0x67%2C+0x65%2C+0x73%2C+0x74+%7D%3B%0A%09BN_hex2bn%28%26amp%3BzA%2C%0A%09%09%09%22b2e14c5c79c6df5b85f4fe7ed8db7a262b9da7e07ccb0ea9f4747b8ccda8a4f3%22%29%3B%0A%09unsigned+char+zAm%5B32+%2B+sizeof%28m%29%5D%3B%0A%09BN_bn2bin%28zA%2C+zAm%29%3B%0A%09memcpy%28zAm+%2B+32%2C+m%2C+sizeof%28m%29%29%3B%0A%09fp+%3D+fopen%28%22%2Ftmp%2FzAm.bin%22%2C+%22wb%22%29%3B%0A%09fwrite%28zAm%2C+sizeof%28zAm%29%2C+1%2C+fp%29%3B%0A%09fclose%28fp%29%3B%0A%0A%09%2F**%0A%09+%5Byeqiang%40localhost+exampleProgram%5D%24+hexdump+-C+%2Ftmp%2FzAm.bin%0A%09+00000000++b2+e1+4c+5c+79+c6+df+5b++85+f4+fe+7e+d8+db+7a+26++%7C..L%5Cy..%5B...%7E..z%26amp%3B%7C%0A%09+00000010++2b+9d+a7+e0+7c+cb+0e+a9++f4+74+7b+8c+cd+a8+a4+f3++%7C%2B...%7C....t%7B.....%7C%0A%09+00000020++6d+65+73+73+61+67+65+20++64+69+67+65+73+74++++++++%7Cmessage+digest%7C%0A%09+0000002e%0A%09+%5Byeqiang%40localhost+exampleProgram%5D%24+%2Fusr%2Flocal%2Fgmssl%2Fbin%2Fgmssl+dgst+-sm3+-hex+%2Ftmp%2FzAm.bin%0A%09+SM3%28%2Ftmp%2FzAm.bin%29%3D+f0b43e94ba45accaace692ed534382eb17e6ab5a19ce7b31f4486fdfc0d28640%0A%09+*%2F%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cp%3E%E6%B3%A8%E6%84%8F%E5%A4%A7%E6%95%B4%E6%95%B0%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E9%87%87%E7%94%A8%3Cspan+style%3D%22color%3A%23FF0000%3B%22%3E%E5%A4%A7%E7%AB%AF%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%3C%2Fspan%3E%3Cbr%3E%3C%2Fp%3E+%0A++%3Cp%3EGM%2FT+0003.5+%E9%83%A8%E5%88%86%E5%8E%9F%E6%96%87%EF%BC%9A%3C%2Fp%3E+%0A++%3Cp%3E%3Cimg+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20171027145705650%3Fwatermark%2F2%2Ftext%2FaHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGtuYXJ1dG8%3D%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%2Fgravity%2FCenter%22+alt%3D%22%22%3E%3Cbr%3E%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fhknaruto%2Farticle%2Fdetails%2F78364940%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fhknaruto%2Farticle%2Fdetails%2F78364940%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}