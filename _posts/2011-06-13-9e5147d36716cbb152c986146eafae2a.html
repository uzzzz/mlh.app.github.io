---
layout: default
title: CRC-32C (Castagnoli) 校验算法优化(Delphi SSE优化算法应用之三)
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3ECRC-32C+%28Castagnoli%29%26nbsp%3B+%E7%AE%97%E6%B3%95%E6%98%AF+iSCSI+%E5%92%8CSCTP+%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E7%9A%84%E7%AE%97%E6%B3%95%EF%BC%8C%E5%92%8C%E5%B8%B8%E7%94%A8CRC-32-IEEE+802.3%E7%AE%97%E6%B3%95%E6%89%80%E4%B8%8D%E5%90%8C%E7%9A%84%E6%98%AF%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%B8%B8%E6%95%B0CRC32C%E6%98%AF0x1EDC6F41%26nbsp%3B%2CCRC32%E6%98%AF0x04C11DB7+%2C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E7%94%B1%E6%AD%A4%E7%94%9F%E6%88%90%E7%9A%84CRC%E8%A1%A8%E4%B8%8D%E5%90%8C%E5%A4%96%E7%AE%97%E6%B3%95%E6%98%AF%E4%B8%80%E6%A8%A1%E4%B8%80%E6%A0%B7.%3C%2Fp%3E+%0A++%3Cp%3ECRC32+%E5%B8%B8%E8%A7%84%E7%AE%97%E6%B3%95%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fp%3E+%0A++%3Cp%3E%3Ctextarea+cols%3D%2284%22+rows%3D%2215%22+name%3D%22code%22+class%3D%22delphi%22%3E++function+_CRC32CX86%28Data%3A+PByte%3B+aLength%3A+Integer%29%3A+DWORD%3B%0A++const%0A++++_CRC32CTable%3A+array%5B0..255%5D+of+DWORD+%3D+%28%0A++++++%2400000000%2C+%24F26B8303%2C+%24E13B70F7%2C+%241350F3F4%2C+%2F%2FCRC32C+Table%0A++++++%24C79A971F%2C+%2435F1141C%2C+%2426A1E7E8%2C+%24D4CA64EB%2C%0A++++++%248AD958CF%2C+%2478B2DBCC%2C+%246BE22838%2C+%249989AB3B%2C%0A++++++%244D43CFD0%2C+%24BF284CD3%2C+%24AC78BF27%2C+%245E133C24%2C%0A++++++%24105EC76F%2C+%24E235446C%2C+%24F165B798%2C+%24030E349B%2C%0A++++++%24D7C45070%2C+%2425AFD373%2C+%2436FF2087%2C+%24C494A384%2C%0A++++++%249A879FA0%2C+%2468EC1CA3%2C+%247BBCEF57%2C+%2489D76C54%2C%0A++++++%245D1D08BF%2C+%24AF768BBC%2C+%24BC267848%2C+%244E4DFB4B%2C%0A++++++%2420BD8EDE%2C+%24D2D60DDD%2C+%24C186FE29%2C+%2433ED7D2A%2C%0A++++++%24E72719C1%2C+%24154C9AC2%2C+%24061C6936%2C+%24F477EA35%2C%0A++++++%24AA64D611%2C+%24580F5512%2C+%244B5FA6E6%2C+%24B93425E5%2C%0A++++++%246DFE410E%2C+%249F95C20D%2C+%248CC531F9%2C+%247EAEB2FA%2C%0A++++++%2430E349B1%2C+%24C288CAB2%2C+%24D1D83946%2C+%2423B3BA45%2C%0A++++++%24F779DEAE%2C+%2405125DAD%2C+%241642AE59%2C+%24E4292D5A%2C%0A++++++%24BA3A117E%2C+%244851927D%2C+%245B016189%2C+%24A96AE28A%2C%0A++++++%247DA08661%2C+%248FCB0562%2C+%249C9BF696%2C+%246EF07595%2C%0A++++++%24417B1DBC%2C+%24B3109EBF%2C+%24A0406D4B%2C+%24522BEE48%2C%0A++++++%2486E18AA3%2C+%24748A09A0%2C+%2467DAFA54%2C+%2495B17957%2C%0A++++++%24CBA24573%2C+%2439C9C670%2C+%242A993584%2C+%24D8F2B687%2C%0A++++++%240C38D26C%2C+%24FE53516F%2C+%24ED03A29B%2C+%241F682198%2C%0A++++++%245125DAD3%2C+%24A34E59D0%2C+%24B01EAA24%2C+%2442752927%2C%0A++++++%2496BF4DCC%2C+%2464D4CECF%2C+%2477843D3B%2C+%2485EFBE38%2C%0A++++++%24DBFC821C%2C+%242997011F%2C+%243AC7F2EB%2C+%24C8AC71E8%2C%0A++++++%241C661503%2C+%24EE0D9600%2C+%24FD5D65F4%2C+%240F36E6F7%2C%0A++++++%2461C69362%2C+%2493AD1061%2C+%2480FDE395%2C+%2472966096%2C%0A++++++%24A65C047D%2C+%245437877E%2C+%244767748A%2C+%24B50CF789%2C%0A++++++%24EB1FCBAD%2C+%24197448AE%2C+%240A24BB5A%2C+%24F84F3859%2C%0A++++++%242C855CB2%2C+%24DEEEDFB1%2C+%24CDBE2C45%2C+%243FD5AF46%2C%0A++++++%247198540D%2C+%2483F3D70E%2C+%2490A324FA%2C+%2462C8A7F9%2C%0A++++++%24B602C312%2C+%2444694011%2C+%245739B3E5%2C+%24A55230E6%2C%0A++++++%24FB410CC2%2C+%24092A8FC1%2C+%241A7A7C35%2C+%24E811FF36%2C%0A++++++%243CDB9BDD%2C+%24CEB018DE%2C+%24DDE0EB2A%2C+%242F8B6829%2C%0A++++++%2482F63B78%2C+%24709DB87B%2C+%2463CD4B8F%2C+%2491A6C88C%2C%0A++++++%24456CAC67%2C+%24B7072F64%2C+%24A457DC90%2C+%24563C5F93%2C%0A++++++%24082F63B7%2C+%24FA44E0B4%2C+%24E9141340%2C+%241B7F9043%2C%0A++++++%24CFB5F4A8%2C+%243DDE77AB%2C+%242E8E845F%2C+%24DCE5075C%2C%0A++++++%2492A8FC17%2C+%2460C37F14%2C+%2473938CE0%2C+%2481F80FE3%2C%0A++++++%2455326B08%2C+%24A759E80B%2C+%24B4091BFF%2C+%24466298FC%2C%0A++++++%241871A4D8%2C+%24EA1A27DB%2C+%24F94AD42F%2C+%240B21572C%2C%0A++++++%24DFEB33C7%2C+%242D80B0C4%2C+%243ED04330%2C+%24CCBBC033%2C%0A++++++%24A24BB5A6%2C+%24502036A5%2C+%244370C551%2C+%24B11B4652%2C%0A++++++%2465D122B9%2C+%2497BAA1BA%2C+%2484EA524E%2C+%247681D14D%2C%0A++++++%242892ED69%2C+%24DAF96E6A%2C+%24C9A99D9E%2C+%243BC21E9D%2C%0A++++++%24EF087A76%2C+%241D63F975%2C+%240E330A81%2C+%24FC588982%2C%0A++++++%24B21572C9%2C+%24407EF1CA%2C+%24532E023E%2C+%24A145813D%2C%0A++++++%24758FE5D6%2C+%2487E466D5%2C+%2494B49521%2C+%2466DF1622%2C%0A++++++%2438CC2A06%2C+%24CAA7A905%2C+%24D9F75AF1%2C+%242B9CD9F2%2C%0A++++++%24FF56BD19%2C+%240D3D3E1A%2C+%241E6DCDEE%2C+%24EC064EED%2C%0A++++++%24C38D26C4%2C+%2431E6A5C7%2C+%2422B65633%2C+%24D0DDD530%2C%0A++++++%240417B1DB%2C+%24F67C32D8%2C+%24E52CC12C%2C+%241747422F%2C%0A++++++%2449547E0B%2C+%24BB3FFD08%2C+%24A86F0EFC%2C+%245A048DFF%2C%0A++++++%248ECEE914%2C+%247CA56A17%2C+%246FF599E3%2C+%249D9E1AE0%2C%0A++++++%24D3D3E1AB%2C+%2421B862A8%2C+%2432E8915C%2C+%24C083125F%2C%0A++++++%24144976B4%2C+%24E622F5B7%2C+%24F5720643%2C+%2407198540%2C%0A++++++%24590AB964%2C+%24AB613A67%2C+%24B831C993%2C+%244A5A4A90%2C%0A++++++%249E902E7B%2C+%246CFBAD78%2C+%247FAB5E8C%2C+%248DC0DD8F%2C%0A++++++%24E330A81A%2C+%24115B2B19%2C+%24020BD8ED%2C+%24F0605BEE%2C%0A++++++%2424AA3F05%2C+%24D6C1BC06%2C+%24C5914FF2%2C+%2437FACCF1%2C%0A++++++%2469E9F0D5%2C+%249B8273D6%2C+%2488D28022%2C+%247AB90321%2C%0A++++++%24AE7367CA%2C+%245C18E4C9%2C+%244F48173D%2C+%24BD23943E%2C%0A++++++%24F36E6F75%2C+%240105EC76%2C+%2412551F82%2C+%24E03E9C81%2C%0A++++++%2434F4F86A%2C+%24C69F7B69%2C+%24D5CF889D%2C+%2427A40B9E%2C%0A++++++%2479B737BA%2C+%248BDCB4B9%2C+%24988C474D%2C+%246AE7C44E%2C%0A++++++%24BE2DA0A5%2C+%244C4623A6%2C+%245F16D052%2C+%24AD7D5351%29%3B%0A++var%0A++++i%3A+Integer%3B%0A++begin%0A++++Result+%3A%3D+%24FFFFFFFF%3B%0A++++for+I+%3A%3D+0+to+aLength+-+1+do%0A++++begin%0A++++++Result+%3A%3D+%28Result+shr+8%29+xor+_CRC32CTable%5B%28Result+and+%24FF%29+xor+Data%5E%5D%3B%0A++++++Inc%28Data%29%3B%0A++++end%3B%0A++++Result+%3A%3D+not+Result%3B%0A++end%3B%3C%2Ftextarea%3E%26nbsp%3B%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3ECRC32C%E4%BD%BF%E7%94%A8SSE4.2%E7%A1%AC%E4%BB%B6%E6%8C%87%E4%BB%A4%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fp%3E+%0A++%3Cp%3E%3Ctextarea+cols%3D%2284%22+rows%3D%2215%22+name%3D%22code%22+class%3D%22delphi%22%3Efunction+_CRC32CSSE%28Data%3A+PByte%3B+aLength%3A+Integer%29%3A+DWORD%3B++++++++++++%0Aasm%0A+push+esi%0A+push+edx%0A+push+ecx%0A+mov+esi%2Ceax%0A+mov+eax%2C%24FFFFFFFF%0A+test+edx%2Cedx%0A+jz+%40Exit+%0A+test+esi%2Cesi%0A+jz+%40Exit+%0A+mov+ecx%2Cedx%0A+shr+ecx%2C+2+++++%0A+test+ecx%2Cecx%0A+jz+%40Exit%0A+xor+edx%2Cedx%0A%40Alignment%3A%0A+crc32+eax%2C%5Bedx*4%2Besi%5D%0A+inc+edx%0A+cmp+edx%2Cecx%0A+jb+%40Alignment%0A%40Exit%3A%0A+not+eax%0A+pop+ecx%0A+pop+edx%0A+pop+esi%0Aend%3B%3C%2Ftextarea%3E%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E%E4%BB%A5%E4%B8%8A2%E4%B8%AA%E4%B8%8D%E5%90%8C%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%9C%A8Intel+Core+i7+720QM+1.60GHz+CPU%E4%B8%8A%E6%B5%8B%E8%AF%95%E6%88%90%E7%BB%A9%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%28%E6%95%B0%E6%8D%AE%E9%87%87%E7%94%A8%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95%E7%94%9F%E6%88%90%EF%BC%8C1M*100%E8%A1%A8%E7%A4%BA%E4%BD%BF%E7%94%A81M%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C100%E6%AC%A1%E9%87%8D%E5%A4%8D%E8%AE%A1%E7%AE%97%EF%BC%8C%E6%95%B0%E6%8D%AE%E9%87%8F%E7%9B%B8%E5%BD%93%E4%BA%8E100M%29%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E--------------------------------------------------------------------------------------%3C%2Fp%3E+%0A++%3Cp%3E%7C%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B+%E6%95%B0%E6%8D%AE%E9%87%8F%26nbsp%3B%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B+%26nbsp%3B%E5%B8%B8%E8%A7%84%E7%AE%97%E6%B3%95%E6%97%B6%E9%97%B4%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B+%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95%E6%97%B6%E9%97%B4%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B+%E5%BF%AB%E5%87%BA%E7%99%BE%E5%88%86%E6%AF%94+%7C%3C%2Fp%3E+%0A++%3Cp%3E--------------------------------------------------------------------------------------%3C%2Fp%3E+%0A++%3Cp%3E%7C+1M%26nbsp%3B*100%26nbsp%3B%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B+X86+Time%3A390ms%26nbsp%3B%26nbsp%3B%26nbsp%3B+%26nbsp%3B%7C%26nbsp%3B%26nbsp%3B+SSE+Time%3A32ms%26nbsp%3B%26nbsp%3B%26nbsp%3B+%26nbsp%3B%7C%26nbsp%3B+1218%25%26nbsp%3B%26nbsp%3B%26nbsp%3B+%7C%3C%2Fp%3E+%0A++%3Cp%3E--------------------------------------------------------------------------------------%3C%2Fp%3E+%0A++%3Cp%3E%7C+4M+*100%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%7C%26nbsp%3B+X86+Time%3A1575ms%26nbsp%3B%26nbsp%3B%26nbsp%3B%7C%26nbsp%3B+%26nbsp%3BSSE+Time%3A156ms%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B+1009%25+%26nbsp%3B%26nbsp%3B+%7C%3C%2Fp%3E+%0A++%3Cp%3E--------------------------------------------------------------------------------------%3C%2Fp%3E+%0A++%3Cp%3E%7C+8M+*100%26nbsp%3B%26nbsp%3B%26nbsp%3B%26nbsp%3B%7C+%26nbsp%3BX86+Time%3A3136ms%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B+%26nbsp%3BSSE+Time%3A280ms%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B+1120%25%26nbsp%3B%26nbsp%3B%26nbsp%3B+%7C%3C%2Fp%3E+%0A++%3Cp%3E--------------------------------------------------------------------------------------%3C%2Fp%3E+%0A++%3Cp%3E%7C+32M+*100%26nbsp%3B%26nbsp%3B%7C+%26nbsp%3BX86+Time%3A12542ms%26nbsp%3B%26nbsp%3B+%7C%26nbsp%3B%26nbsp%3B+SSE+Time%3A1092ms%26nbsp%3B%7C+1148%25%26nbsp%3B%26nbsp%3B+%7C%3C%2Fp%3E+%0A++%3Cp%3E--------------------------------------------------------------------------------------%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E%E9%80%9A%E8%BF%87%E5%AF%B9%E6%AF%94%E5%8F%AF%E4%BB%A5%E6%B8%85%E6%A5%9A%E7%9A%84%E7%9C%8B%E5%88%B0%E4%BD%BF%E7%94%A8SSE4.2%E4%B8%AD%E7%9A%84%E6%96%B0%E6%8C%87%E4%BB%A4crc32%E5%8F%AF%E4%BB%A5%E6%AF%94%E5%B8%B8%E8%A7%84CRC32C%E7%AE%97%E6%B3%95%E8%A6%81%E5%BF%AB%E5%87%BA%E6%9C%80%E5%B0%9110%E5%80%8D%E7%9A%84%E6%95%88%E7%8E%87%EF%BC%8CIntel%E6%96%B0%E5%A2%9E%E7%9A%84%E6%8C%87%E4%BB%A4%E7%A1%AE%E5%AE%9E%E5%AF%B9%E5%B8%B8%E8%A7%84%E6%9F%90%E4%BA%9B%E7%AE%97%E6%B3%95%E6%8F%90%E4%BE%9B%E4%BA%86%E9%AB%98%E6%95%88%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%A5%BD%E5%AE%83%E4%BB%AC%E5%B0%86%E5%AF%B9%E6%88%91%E4%BB%AC%E5%9C%A8%E4%BB%A5%E5%90%8E%E7%9A%84%E5%BC%80%E5%8F%91%E4%B8%AD%E5%BE%97%E5%88%B0%E8%B4%A8%E7%9A%84%E6%8F%90%E5%8D%87%E3%80%82%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E%E6%9C%AC%E4%BE%8B%E6%B5%8B%E8%AF%95DEMO%EF%BC%9A+%3Ca+href%3D%22http%3A%2F%2Fdownload.csdn.net%2Fsource%2F3361729%22+rel%3D%22nofollow%22%3Ehttp%3A%2F%2Fdownload.csdn.net%2Fsource%2F3361729%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E*%3Cspan+class%3D%22hps%22+title%3D%22%E7%82%B9%E5%87%BB%E5%8F%AF%E6%98%BE%E7%A4%BA%E5%85%B6%E4%BB%96%E7%BF%BB%E8%AF%91%22%3EReferences%26nbsp%3B+%26nbsp%3Bintel+sse4+programming+reference+%28D91561-001%29%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+class%3D%22hps%22+title%3D%22%E7%82%B9%E5%87%BB%E5%8F%AF%E6%98%BE%E7%A4%BA%E5%85%B6%E4%BB%96%E7%BF%BB%E8%AF%91%22%3E%26nbsp%3B%3Cspan+class%3D%22f%22%3E%3Ccite%3E%3Ca+href%3D%22http%3A%2F%2Fsoftware.intel.com%2Ffile%2F18187%2F%22+rel%3D%22nofollow%22%3Ehttp%3A%2F%2Fsoftware.intel.com%2Ffile%2F18187%2F%3C%2Fa%3E%3C%2Fcite%3E%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fcodegame%2Farticle%2Fdetails%2F6540965%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fcodegame%2Farticle%2Fdetails%2F6540965%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}