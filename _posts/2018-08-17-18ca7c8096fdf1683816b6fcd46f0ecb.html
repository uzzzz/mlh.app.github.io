---
layout: default
title: 区块链学习之Fabric的Java应用层搭建
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3E%E8%87%AA%E4%BB%8E%E4%B8%8A%E7%AF%87Java-sdk%E8%B7%91%E9%80%9A%E4%B9%8B%E5%90%8E%EF%BC%8C%E4%BB%8A%E5%A4%A9%E5%B7%B2%E7%BB%8F%E6%98%AF8%2F17%E5%8F%B7%E4%BA%86%EF%BC%8C%E8%BF%99%E6%9C%9F%E9%97%B4%E5%B9%B2%E5%98%9B%E4%BA%86%E5%91%A2%EF%BC%9F%E4%B8%80%E7%9B%B4%E5%9C%A8%E5%B0%9D%E8%AF%95%E6%90%AD%E5%BB%BA%E5%87%BA%E4%B8%80%E4%B8%AAJava%E5%BA%94%E7%94%A8%E5%B1%82%EF%BC%8C%E5%A5%BD%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9B%E7%AE%80%E5%8D%95%E7%9A%84%E6%8E%A5%E5%8F%A3%E4%BB%A5%E4%BE%BF%E5%B0%86%E6%9D%A5%E8%83%BD%E5%A4%9F%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%BA%9B%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AD%98%E5%82%A8%E3%80%82%3C%2Fp%3E+%0A++%3Cp%3E%E6%AD%A4%E7%AF%87%E5%8D%9A%E5%AE%A2%E8%AE%B0%E5%BD%95%E6%97%B6%EF%BC%8CCA%E5%AE%B9%E5%99%A8%E6%B2%A1%E6%9C%89%E5%8D%95%E7%8B%AC%E8%B5%B7%EF%BC%8C%E8%80%8C%E4%BB%85%E4%BB%85%E6%98%AF%E5%9C%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%BB%E5%8F%96%E5%B7%B2%E7%BB%8F%E7%94%9F%E6%88%90%E5%A5%BD%E7%9A%84CA%E6%96%87%E4%BB%B6%E6%9D%A5%E6%88%90%E5%8A%9F%E8%AE%BF%E9%97%AE%E3%80%82%E4%B8%8B%E9%9D%A2%E8%AF%B4%E4%B8%8B%E4%B8%80%E4%BA%9B%E6%AD%A5%E9%AA%A4%E3%80%82%3C%2Fp%3E+%0A++%3Cp%3E1.+%E6%90%AD%E5%BB%BA%E5%87%BA%E4%B8%80%E4%B8%AAFabric%E7%8E%AF%E5%A2%83%E3%80%82%3C%2Fp%3E+%0A++%3Cp%3E%3Ca+href%3D%22https%3A%2F%2Fwww.cnblogs.com%2Fstudyzy%2Fp%2F7451276.html%22+rel%3D%22nofollow%22%3E%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%23f33b45%3B%22%3E%3Cstrong%3E%3Cem%3E1.1+%E8%BF%99%E8%BE%B9%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F1.3+%E7%94%A8%E5%B7%A5%E5%85%B7%E7%94%9F%E6%88%90%E7%9A%84%E7%A7%81%E9%92%A5%E5%92%8C%E8%AF%81%E4%B9%A6%EF%BC%8C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E6%8B%B7%E8%B4%9D%E5%88%B0%E5%B7%A5%E7%A8%8B%E4%B8%AD%E5%8E%BB%E3%80%82%3C%2Fem%3E%3C%2Fstrong%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3Echannel-artifacts+%E5%92%8C+crypto-config%EF%BC%88%E8%BF%99%E4%B8%80%E4%B8%AA%E6%98%AF%E8%BF%99%E4%B8%80%E6%9C%9F%E4%B8%BB%E8%A6%81%E7%9A%84%EF%BC%89%3C%2Fp%3E+%0A++%3Cp%3E2.+%E6%95%B4%E4%B8%AA%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95%E5%A6%82%E5%9B%BE%EF%BC%8C%E5%8F%AA%E6%98%AF%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84java%E9%A1%B9%E7%9B%AE%3C%2Fp%3E+%0A++%3Cp%3E%3Cimg+alt%3D%22%22+class%3D%22has%22+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20180817143945544%3Fwatermark%2F2%2Ftext%2FaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyOTI0MzQz%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%22%3E%3C%2Fp%3E+%0A++%3Cp%3E3.+pom%E6%96%87%E4%BB%B6%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3E%26lt%3B%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%26gt%3B%0A%26lt%3Bproject+xmlns%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%22%0A+++++++++xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A+++++++++xsi%3AschemaLocation%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0+http%3A%2F%2Fmaven.apache.org%2Fxsd%2Fmaven-4.0.0.xsd%22%26gt%3B%0A++++%26lt%3BmodelVersion%26gt%3B4.0.0%26lt%3B%2FmodelVersion%26gt%3B%0A%0A++++%26lt%3BgroupId%26gt%3Bcom.tc.fabric%26lt%3B%2FgroupId%26gt%3B%0A++++%26lt%3BartifactId%26gt%3BFabricSdk%26lt%3B%2FartifactId%26gt%3B%0A++++%26lt%3Bversion%26gt%3B1.0-SNAPSHOT%26lt%3B%2Fversion%26gt%3B%0A%0A++++%26lt%3Bdependencies%26gt%3B%0A++++++++%26lt%3Bdependency%26gt%3B%0A++++++++++++%26lt%3BgroupId%26gt%3Bjunit%26lt%3B%2FgroupId%26gt%3B%0A++++++++++++%26lt%3BartifactId%26gt%3Bjunit%26lt%3B%2FartifactId%26gt%3B%0A++++++++++++%26lt%3Bversion%26gt%3B4.12%26lt%3B%2Fversion%26gt%3B%0A++++++++%26lt%3B%2Fdependency%26gt%3B%0A++++++++%26lt%3Bdependency%26gt%3B%0A++++++++++++%26lt%3BgroupId%26gt%3Blog4j%26lt%3B%2FgroupId%26gt%3B%0A++++++++++++%26lt%3BartifactId%26gt%3Blog4j%26lt%3B%2FartifactId%26gt%3B%0A++++++++++++%26lt%3Bversion%26gt%3B1.2.14%26lt%3B%2Fversion%26gt%3B%0A++++++++%26lt%3B%2Fdependency%26gt%3B%0A++++++++%26lt%3Bdependency%26gt%3B%0A++++++++++++%26lt%3BgroupId%26gt%3Borg.hyperledger.fabric-sdk-java%26lt%3B%2FgroupId%26gt%3B%0A++++++++++++%26lt%3BartifactId%26gt%3Bfabric-sdk-java%26lt%3B%2FartifactId%26gt%3B%0A++++++++++++%26lt%3Bversion%26gt%3B1.0.0%26lt%3B%2Fversion%26gt%3B%0A++++++++%26lt%3B%2Fdependency%26gt%3B%0A++++%26lt%3B%2Fdependencies%26gt%3B%0A%0A++++%26lt%3Bbuild%26gt%3B%0A++++++++%26lt%3Bplugins%26gt%3B%0A++++++++++++%26lt%3Bplugin%26gt%3B%0A++++++++++++++++%26lt%3BgroupId%26gt%3Borg.apache.maven.plugins%26lt%3B%2FgroupId%26gt%3B%0A++++++++++++++++%26lt%3BartifactId%26gt%3Bmaven-compiler-plugin%26lt%3B%2FartifactId%26gt%3B%0A++++++++++++++++%26lt%3Bversion%26gt%3B3.1%26lt%3B%2Fversion%26gt%3B%0A++++++++++++++++%26lt%3Bconfiguration%26gt%3B%0A++++++++++++++++++++%26lt%3Bsource%26gt%3B1.8%26lt%3B%2Fsource%26gt%3B%0A++++++++++++++++++++%26lt%3Btarget%26gt%3B1.8%26lt%3B%2Ftarget%26gt%3B%0A++++++++++++++++%26lt%3B%2Fconfiguration%26gt%3B%0A++++++++++++%26lt%3B%2Fplugin%26gt%3B%0A++++++++%26lt%3B%2Fplugins%26gt%3B%0A++++%26lt%3B%2Fbuild%26gt%3B%0A%0A%26lt%3B%2Fproject%26gt%3B%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E4.+CommonUtils%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Apublic+class+CommonUtils+%7B%0A%0A++++%2F%2Fpeer%E8%8A%82%E7%82%B9%E7%9A%84CA%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%0A++++public+static+final+String+cryptoPeerPath+%3D+%22crypto-config%2FpeerOrganizations%2F%22%3B%0A++++%2F%2Forder%E8%8A%82%E7%82%B9%E7%9A%84CA%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%0A++++public+static+final+String+cryptoOrderPath+%3D+%22crypto-config%2FordererOrganizations%2F%22%3B%0A%0A++++%2F%2Fpeer%E8%8A%82%E7%82%B9%E7%9A%84CA%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%0A++++public+static+String+peerFilePath+%3D+CommonUtils.class.getResource%28%22%2F%22%29.getPath%28%29+%2B+cryptoPeerPath%3B%0A%0A++++%2F%2Forder%E8%8A%82%E7%82%B9%E7%9A%84CA%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%0A++++public+static+String+orderFilePath+%3D+CommonUtils.class.getResource%28%22%2F%22%29.getPath%28%29+%2B+cryptoOrderPath%3B%0A%0A++++%2F%2Forg1%E7%BB%84%E7%BB%87%E7%9A%84%E7%9B%AE%E5%BD%95%0A++++public+static+final+String+org1Path+%3D+%22org1.example.com%2Fusers%2F%22%3B%0A%0A++++%2F%2Forg1%E7%BB%84%E7%BB%87%E7%9A%84cert%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%0A++++public+static+final+String+org1CertFilePath+%3D+%22%40org1.example.com%2Fmsp%2Fsigncerts%2F%22%3B%0A%0A++++%2F%2Forg1%E7%BB%84%E7%BB%87%E7%9A%84Key%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%0A++++public+static+final+String+org1KeyFilePath+%3D+%22%40org1.example.com%2Fmsp%2Fkeystore%2F%22%3B%0A%0A++++%2F%2Forg2%E7%BB%84%E7%BB%87%E7%9A%84%E7%9B%AE%E5%BD%95%0A++++public+static+final+String+org2Path+%3D+%22org2.example.com%2Fusers%2F%22%3B%0A%0A++++%2F%2Forg2%E7%BB%84%E7%BB%87%E7%9A%84cert%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%0A++++public+static+final+String+org2CertFilePath+%3D+%22%40org2.example.com%2Fmsp%2Fsigncerts%2F%22%3B%0A%0A++++%2F%2Forg2%E7%BB%84%E7%BB%87%E7%9A%84Key%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%0A++++public+static+final+String+org2KeyFilePath+%3D+%22%40org2.example.com%2Fmsp%2Fkeystore%2F%22%3B%0A%0A++++%2F%2F%E9%93%BE%E7%A0%81%E5%90%8D%E7%A7%B0%0A++++public+static+final+String+chainCodeName+%3D+%22mycc%22%3B%0A%0A++++%2F%2F%E9%93%BE%E7%A0%81%E7%89%88%E6%9C%AC%0A++++public+static+final+String+chaincodeVersion+%3D+%221%22%3B%0A%0A++++%2F%2Fchannel%E5%90%8D%E7%A7%B0%0A++++public+static+final+String+channelId+%3D+%22mychannel%22%3B%0A%0A++++%2F%2Forder%E5%90%8D%E7%A7%B0+%E5%92%8C+Fabrci-java-sdk%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%0A++++public+static+final+String+orderName+%3D+%22orderer.example.com%22%3B%0A%0A++++%2F%2Fpeer0org1%E5%90%8D%E7%A7%B0++%E5%92%8C+Fabrci-java-sdk%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%0A++++public+static+final+String+peer0Org1Name+%3D+%22peer0.org1.example.com%22%3B%0A++++%2F%2Fpeer1org1%E5%90%8D%E7%A7%B0+%E5%92%8C+Fabrci-java-sdk%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%0A++++public+static+final+String+peer1Org1Name+%3D+%22peer1.org1.example.com%22%3B%0A%0A++++%2F%2Fpeer0org2%E5%90%8D%E7%A7%B0+%E5%92%8C+Fabrci-java-sdk%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%0A++++public+static+final+String+peer0Org2Name+%3D+%22peer0.org2.example.com%22%3B%0A++++%2F%2Fpeer1org2%E5%90%8D%E7%A7%B0+%E5%92%8C+Fabrci-java-sdk%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%0A++++public+static+final+String+peer1Org2Name+%3D+%22peer1.org2.example.com%22%3B%0A%0A++++%2F%2Forder%E5%9C%B0%E5%9D%80%0A++++public+static+final+String+orderLocation+%3D+%22grpc%3A%2F%2Flocalhost%3A7050%22%3B%0A++++%2F%2Fpeer0org1%E5%9C%B0%E5%9D%80%0A++++public+static+final+String+peer0Org1Location+%3D+%22grpc%3A%2F%2Flocalhost%3A7051%22%3B%0A++++%2F%2Fpeer1org1%E5%9C%B0%E5%9D%80%0A++++public+static+final+String+peer1Org1Location+%3D+%22grpc%3A%2F%2Flocalhost%3A8051%22%3B%0A++++%2F%2Fpeer0org2%E5%9C%B0%E5%9D%80%0A++++public+static+final+String+peer0Org2Location+%3D+%22grpc%3A%2F%2Flocalhost%3A9051%22%3B%0A++++%2F%2Fpeer1org2%E5%9C%B0%E5%9D%80%0A++++public+static+final+String+peer1Org2Location+%3D+%22grpc%3A%2F%2Flocalhost%3A10051%22%3B%0A%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E5.FabricUtils%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Aimport+org.apache.log4j.Logger%3B%0Aimport+org.hyperledger.fabric.sdk.*%3B%0Aimport+org.hyperledger.fabric.sdk.security.CryptoSuite%3B%0A%0Aimport+java.util.Collection%3B%0Aimport+java.util.HashMap%3B%0Aimport+java.util.Map%3B%0A%0Aimport+static+java.nio.charset.StandardCharsets.UTF_8%3B%0A%0A%2F**%0A+*+FabricUtils%2C%E6%9A%82%E6%97%B6%E4%B8%8D%E5%85%B3%E6%B3%A8CA%E6%96%B9%E9%9D%A2%E7%9A%84%E4%B8%9C%E8%A5%BF%0A+*%2F%0Apublic+class+FabricUtils+%7B%0A%0A++++%2F%2F%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%0A++++private+static+Logger+logger+%3D+Logger.getLogger%28FabricUtils.class%29%3B%0A%0A++++%2F%2FCA%E5%AE%A2%E6%88%B7%E7%AB%AF%0A++++public+static+HFClient+client+%3D+null%3B%0A%0A++++public+static+CryptoSuite+cs+%3D+null%3B%0A%0A++++public+static+HashMap%26lt%3BString%2C+SOrg%26gt%3B+orgHashMap%3Dnull%3B%0A%0A++++public+static+ChaincodeID+cid+%3D+null%3B%0A%0A++++public+static+User+peer0org1%3Dnull%3B%0A%0A++++public+static+void+init%28%29throws+Exception%7B%0A%0A++++++++cs+%3D+CryptoSuite.Factory.getCryptoSuite%28%29%3B%0A++++++++cid+%3D+ChaincodeID.newBuilder%28%29.setName%28CommonUtils.chainCodeName%29.build%28%29%3B%0A++++++++client+%3D+HFClient.createNewInstance%28%29%3B%0A++++++++client.setCryptoSuite%28cs%29%3B%0A++++++++orgHashMap+%3D+OrgConfig.getSOrg%28%29%3B%0A++++++++peer0org1+%3D+orgHashMap.get%28%22org1%22%29.getAdmin%28%29%3B%0A++++++++client.setUserContext%28peer0org1%29%3B%0A%0A++++%7D%0A%0A++++%2F*%0A+++++*+++%E5%AE%9E%E7%8E%B0%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%0A+++++*+*%2F%0A++++public+static+void+instertFabcar%28Channel+channel%2C+DataRecord+data%29+throws+Exception+%7B%0A++++++++TransactionProposalRequest+req+%3D+client.newTransactionProposalRequest%28%29%3B%0A++++++++req.setChaincodeID%28cid%29%3B%0A++++++++req.setFcn%28%22set%22%29%3B%0A++++++++req.setArgs%28data.toStringArray%28%29%29%3B%0A++++++++Map%26lt%3BString%2C+byte%5B%5D%26gt%3B+tm2+%3D+new+HashMap%26lt%3B%26gt%3B%28%29%3B%0A++++++++%2F%2F%E4%BB%A3%E7%A0%81%E6%9D%A5%E8%87%AAEnd2End%0A++++++++tm2.put%28%22HyperLedgerFabric%22%2C+%22TransactionProposalRequest%3AJavaSDK%22.getBytes%28UTF_8%29%29%3B%0A++++++++tm2.put%28%22method%22%2C+%22TransactionProposalRequest%22.getBytes%28UTF_8%29%29%3B%0A++++++++tm2.put%28%22result%22%2C+%22%3A%29%22.getBytes%28UTF_8%29%29%3B%0A++++++++req.setTransientMap%28tm2%29%3B%0A++++++++Collection%26lt%3BProposalResponse%26gt%3B+resps+%3D+channel.sendTransactionProposal%28req%29%3B%0A++++++++for+%28ProposalResponse+resp+%3A+resps%29+%7B%0A++++++++++++String+payload+%3D+new+String%28resp.getChaincodeActionResponsePayload%28%29%29%3B%0A++++++++++++logger.debug%28%22payload%21%21%21%21%21%21%21%3A+%22%2Bpayload%29%3B%0A++++++++%7D%0A++++++++channel.sendTransaction%28resps%29%3B%0A++++%7D%0A%0A++++%2F*%0A+++++*+++%E5%AE%9E%E7%8E%B0%E7%BB%99%E5%AE%9A%E7%9A%84Key%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%0A+++++*+*%2F%0A++++public+static+void+queryFabcar%28Channel+channel%2C+String+key%29+throws+Exception+%7B%0A++++++++QueryByChaincodeRequest+req+%3D+client.newQueryProposalRequest%28%29%3B%0A++++++++ChaincodeID+cid+%3D+ChaincodeID.newBuilder%28%29.setName%28CommonUtils.chainCodeName%29.build%28%29%3B%0A++++++++req.setChaincodeID%28cid%29%3B%0A++++++++req.setFcn%28%22get%22%29%3B%0A++++++++req.setArgs%28new+String%5B%5D+%7B+key+%7D%29%3B%0A++++++++Collection%26lt%3BProposalResponse%26gt%3B+resps+%3D+channel.queryByChaincode%28req%29%3B%0A++++++++for+%28ProposalResponse+resp+%3A+resps%29+%7B%0A++++++++++++String+payload+%3D+new+String%28resp.getChaincodeActionResponsePayload%28%29%29%3B%0A++++++++++++logger.debug%28%22payload%21%21%21%21%21%21%21%3A+%22%2Bpayload%29%3B%0A++++++++%7D%0A++++%7D%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E6.+OrgConfig%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Aimport+org.apache.commons.io.IOUtils%3B%0Aimport+org.bouncycastle.asn1.pkcs.PrivateKeyInfo%3B%0Aimport+org.bouncycastle.jce.provider.BouncyCastleProvider%3B%0Aimport+org.bouncycastle.openssl.PEMParser%3B%0Aimport+org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter%3B%0Aimport+org.hyperledger.fabric.sdk.Enrollment%3B%0A%0Aimport+java.io.*%3B%0Aimport+java.security.NoSuchAlgorithmException%3B%0Aimport+java.security.NoSuchProviderException%3B%0Aimport+java.security.PrivateKey%3B%0Aimport+java.security.spec.InvalidKeySpecException%3B%0Aimport+java.util.HashMap%3B%0A%0A%2F**%0A+*+%E6%A8%A1%E6%8B%9Fpeer%2Corder%2Cadmin%2Cuser%E7%AD%89%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE%E9%A1%B9%0A+*%2F%0Apublic+class+OrgConfig+%7B%0A%0A++++%2F**%0A+++++*+%E8%8E%B7%E5%8F%96Org%E7%BB%84%E7%BB%87%E4%BF%A1%E6%81%AF%2C%0A+++++*+%E4%BB%A3%E7%A0%81%E7%B2%BE%E7%AE%80%E8%87%AAEnd2End%0A+++++*+%40return%0A+++++*%2F%0A++++public+static+HashMap%26lt%3BString%2CSOrg%26gt%3B+getSOrg%28%29+throws+Exception%7B%0A%0A++++++++HashMap%26lt%3BString%2CSOrg%26gt%3B+orgMap+%3D+new+HashMap%26lt%3B%26gt%3B%28%29%3B%0A%0A++++++++SOrg+org1%3Dnew+SOrg%28%22Org1%22%2C%22Org1MSP%22%29%3B%0A++++++++org1.addPeerLocation%28CommonUtils.peer0Org1Name%2CCommonUtils.peer0Org1Location%29%3B%0A++++++++org1.addPeerLocation%28CommonUtils.peer1Org1Name%2CCommonUtils.peer1Org1Location%29%3B%0A++++++++org1.addOrdererLocation%28CommonUtils.orderName%2CCommonUtils.orderLocation%29%3B%0A%0A++++++++SUser+adminOrg1+%3D+new+SUser%28%22Admin%22%2C%22Org1MSP%22%29%3B%0A++++++++SUser+user1Org1+%3D+new+SUser%28%22User1%22%2C%22Org1MSP%22%29%3B%0A%0A++++++++adminOrg1.setEnrollment%28new+SampleStoreEnrollement%28getKeyFile%28adminOrg1.getName%28%29%2CadminOrg1.getMspId%28%29%29%0A++++++++++++++++%2CgetCertificateFile%28adminOrg1.getName%28%29%2CadminOrg1.getMspId%28%29%29%29%29%3B%0A%0A++++++++user1Org1.setEnrollment%28new+SampleStoreEnrollement%28getKeyFile%28user1Org1.getName%28%29%2Cuser1Org1.getMspId%28%29%29%0A++++++++++++++++%2CgetCertificateFile%28user1Org1.getName%28%29%2Cuser1Org1.getMspId%28%29%29%29%29%3B%0A%0A++++++++org1.addUser%28adminOrg1%29%3B%0A++++++++org1.addUser%28user1Org1%29%3B%0A++++++++org1.setAdmin%28adminOrg1%29%3B%0A%0A++++++++SOrg+org2%3Dnew+SOrg%28%22Org2%22%2C%22Org2MSP%22%29%3B%0A++++++++org2.addPeerLocation%28CommonUtils.peer0Org2Name%2CCommonUtils.peer0Org2Location%29%3B%0A++++++++org2.addPeerLocation%28CommonUtils.peer1Org2Name%2CCommonUtils.peer1Org2Location%29%3B%0A++++++++org2.addOrdererLocation%28CommonUtils.orderName%2CCommonUtils.orderLocation%29%3B%0A++++++++SUser+adminOrg2+%3D+new+SUser%28%22Admin%22%2C%22Org2MSP%22%29%3B%0A++++++++SUser+user1Org2+%3D+new+SUser%28%22User1%22%2C%22Org2MSP%22%29%3B%0A%0A++++++++adminOrg2.setEnrollment%28new+SampleStoreEnrollement%28getKeyFile%28adminOrg2.getName%28%29%2CadminOrg2.getMspId%28%29%29%0A++++++++++++++++%2CgetCertificateFile%28adminOrg2.getName%28%29%2CadminOrg2.getMspId%28%29%29%29%29%3B%0A%0A++++++++user1Org2.setEnrollment%28new+SampleStoreEnrollement%28getKeyFile%28user1Org2.getName%28%29%2Cuser1Org2.getMspId%28%29%29%0A++++++++++++++++%2CgetCertificateFile%28user1Org2.getName%28%29%2Cuser1Org2.getMspId%28%29%29%29%29%3B%0A%0A++++++++org2.addUser%28adminOrg2%29%3B%0A++++++++org2.addUser%28user1Org2%29%3B%0A++++++++org2.setAdmin%28adminOrg2%29%3B%0A%0A++++++++orgMap.put%28%22org1%22%2Corg1%29%3B%0A++++++++orgMap.put%28%22org2%22%2Corg2%29%3B%0A++++++++return+orgMap%3B%0A%0A++++%7D%0A%0A++++%2F**%0A+++++*+%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E7%94%A8%E6%88%B7%E7%9A%84%E7%A7%81%E9%92%A5Key%0A+++++*+%40param+userName%0A+++++*+%40param+mspId%0A+++++*+%40return%0A+++++*%2F%0A++++public+static+PrivateKey+getKeyFile%28String+userName%2CString+mspId%29+throws+Exception%7B%0A%0A++++++++String+tempPath+%3D+null%3B%0A%0A++++++++String+fileName+%3D+null%3B%0A%0A++++++++String+keyFile+%3D+null%3B%0A%0A++++++++if%28%22Org1MSP%22.equals%28mspId%29%29%7B%0A++++++++++++tempPath+%3D+CommonUtils.peerFilePath+%2BCommonUtils.org1Path+%2B+userName+%2B+CommonUtils.org1KeyFilePath%3B%0A%0A++++++++++++fileName+%3D+new+File%28tempPath%29.listFiles%28%29%5B0%5D.getName%28%29%3B%0A%0A++++++++++++keyFile+%3D+tempPath+%2B+fileName%3B%0A++++++++%7Delse+%7B%0A++++++++++++tempPath+%3D+CommonUtils.peerFilePath+%2B+CommonUtils.org2Path+%2B+userName+%2B+CommonUtils.org2KeyFilePath%3B%0A%0A++++++++++++fileName+%3D+new+File%28tempPath%29.listFiles%28%29%5B0%5D.getName%28%29%3B%0A%0A++++++++++++keyFile+%3D+tempPath+%2B+fileName%3B%0A++++++++%7D%0A++++++++%2F%2F%E6%9D%A5%E6%BA%90%E4%BA%8EChannelTest%0A++++++++return+getPrivateKeyFromBytes%28IOUtils.toByteArray%28new+FileInputStream%28keyFile%29%29%29%3B%0A%0A++++%7D%0A%0A++++%2F**%0A+++++*+%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E7%94%A8%E6%88%B7%E7%9A%84ceritificate%E8%AF%81%E4%B9%A6%0A+++++*+%40param+userName%0A+++++*+%40param+mspId%0A+++++*+%40return%0A+++++*+%40throws+Exception%0A+++++*%2F%0A++++public+static+String+getCertificateFile%28String+userName%2CString+mspId%29+throws+Exception%7B%0A%0A++++++++String+tempPath+%3D+null%3B%0A%0A++++++++String+fileName+%3D+null%3B%0A%0A++++++++String+certFile+%3D+null%3B%0A%0A++++++++if%28%22Org1MSP%22.equals%28mspId%29%29%7B%0A++++++++++++tempPath+%3D+CommonUtils.peerFilePath+%2B+CommonUtils.org1Path+%2B+userName+%2B+CommonUtils.org1CertFilePath%3B%0A%0A++++++++++++fileName+%3D+new+File%28tempPath%29.listFiles%28%29%5B0%5D.getName%28%29%3B%0A%0A++++++++++++certFile+%3D+tempPath+%2B+fileName%3B%0A++++++++%7Delse+%7B%0A++++++++++++tempPath+%3D+CommonUtils.peerFilePath+%2B+CommonUtils.org2Path+%2B+userName+%2B+CommonUtils.org2CertFilePath%3B%0A%0A++++++++++++fileName+%3D+new+File%28tempPath%29.listFiles%28%29%5B0%5D.getName%28%29%3B%0A%0A++++++++++++certFile+%3D+tempPath+%2B+fileName%3B%0A++++++++%7D%0A++++++++%2F%2F%E6%9D%A5%E6%BA%90%E4%BA%8EChannelTest%0A++++++++return+new+String%28IOUtils.toByteArray%28new+FileInputStream%28certFile%29%29%2C+%22UTF-8%22%29%3B%0A%0A++++%7D%0A%0A%0A%0A++++public+static+PrivateKey+getPrivateKeyFromBytes%28byte%5B%5D+data%29+throws+NoSuchProviderException%2C+NoSuchAlgorithmException%2C+InvalidKeySpecException%2C+IOException+%7B%0A++++++++final+Reader+pemReader+%3D+new+StringReader%28new+String%28data%29%29%3B%0A%0A++++++++final+PrivateKeyInfo+pemPair%3B%0A++++++++try+%28PEMParser+pemParser+%3D+new+PEMParser%28pemReader%29%29+%7B%0A++++++++++++pemPair+%3D+%28PrivateKeyInfo%29+pemParser.readObject%28%29%3B%0A++++++++%7D%0A%0A++++++++PrivateKey+privateKey+%3D+new+JcaPEMKeyConverter%28%29.setProvider%28BouncyCastleProvider.PROVIDER_NAME%29.getPrivateKey%28pemPair%29%3B%0A%0A++++++++return+privateKey%3B%0A++++%7D%0A%0A%0A++++static+final+class+SampleStoreEnrollement+implements+Enrollment%2C+Serializable+%7B%0A%0A++++++++private+final+PrivateKey+privateKey%3B%0A++++++++private+final+String+certificate%3B%0A%0A++++++++SampleStoreEnrollement%28PrivateKey+privateKey%2C+String+certificate%29++%7B%0A++++++++++++this.certificate+%3D+certificate%3B%0A++++++++++++this.privateKey+%3D++privateKey%3B%0A++++++++%7D%0A%0A++++++++%40Override%0A++++++++public+PrivateKey+getKey%28%29+%7B%0A%0A++++++++++++return+privateKey%3B%0A++++++++%7D%0A%0A++++++++%40Override%0A++++++++public+String+getCert%28%29+%7B%0A++++++++++++return+certificate%3B%0A++++++++%7D%0A%0A++++%7D%0A%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E7.+SOrg%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Aimport+org.hyperledger.fabric.sdk.Peer%3B%0Aimport+org.hyperledger.fabric.sdk.User%3B%0Aimport+org.hyperledger.fabric_ca.sdk.HFCAClient%3B%0A%0Aimport+java.util.*%3B%0A%0A%2F**%0A+*+Java-SDK%E7%9B%B4%E6%8E%A5%E5%A4%8D%E5%88%B6%E5%BE%97%E6%9D%A5%0A+*%2F%0Apublic+class+SOrg+%7B%0A%0A++++private+String+name%3B%0A++++private+String+mspid%3B%0A++++private+HFCAClient+caClient%3B++%2F%2F%E6%9A%82%E6%97%B6%E6%9C%AA%E4%BD%BF%E7%94%A8%0A++++private+Map%26lt%3BString%2C+User%26gt%3B+userMap+%3D+new+HashMap%26lt%3BString%2C+User%26gt%3B%28%29%3B%0A++++private+Map%26lt%3BString%2C+String%26gt%3B+peerLocations+%3D+new+HashMap%26lt%3BString%2C+String%26gt%3B%28%29%3B%0A++++private+Map%26lt%3BString%2C+String%26gt%3B+ordererLocations+%3D+new+HashMap%26lt%3BString%2C+String%26gt%3B%28%29%3B%0A++++private+Map%26lt%3BString%2C+String%26gt%3B+eventHubLocations+%3D+new+HashMap%26lt%3BString%2C+String%26gt%3B%28%29%3B+%2F%2F%E6%9A%82%E6%97%B6%E6%9C%AA%E4%BD%BF%E7%94%A8%0A++++private+Set%26lt%3BPeer%26gt%3B+peers+%3D+new+HashSet%26lt%3BPeer%26gt%3B%28%29%3B+%2F%2F%E6%9A%82%E6%97%B6%E6%9C%AA%E4%BD%BF%E7%94%A8%0A++++private+SUser+admin%3B%0A++++private+String+caLocation%3B+%2F%2F%E6%9A%82%E6%97%B6%E6%9C%AA%E4%BD%BF%E7%94%A8%0A++++private+Properties+caProperties+%3D+null%3B+%2F%2F%E6%9A%82%E6%97%B6%E6%9C%AA%E4%BD%BF%E7%94%A8%0A++++private+SUser+peerAdmin%3B+%2F%2F%E6%9A%82%E6%97%B6%E6%9C%AA%E4%BD%BF%E7%94%A8%0A++++private+String+domainName%3B+%2F%2F%E6%9A%82%E6%97%B6%E6%9C%AA%E4%BD%BF%E7%94%A8%0A%0A++++public+SOrg%28String+name%2C+String+mspid%29+%7B%0A++++++++this.name+%3D+name%3B%0A++++++++this.mspid+%3D+mspid%3B%0A++++%7D%0A%0A++++public+void+setName%28String+name%29+%7B%0A++++++++this.name+%3D+name%3B%0A++++%7D%0A%0A++++public+void+setMspid%28String+mspid%29+%7B%0A++++++++this.mspid+%3D+mspid%3B%0A++++%7D%0A%0A++++public+void+setCaClient%28HFCAClient+caClient%29+%7B%0A++++++++this.caClient+%3D+caClient%3B%0A++++%7D%0A%0A++++public+void+setUserMap%28Map%26lt%3BString%2C+User%26gt%3B+userMap%29+%7B%0A++++++++this.userMap+%3D+userMap%3B%0A++++%7D%0A%0A++++public+void+setPeerLocations%28Map%26lt%3BString%2C+String%26gt%3B+peerLocations%29+%7B%0A++++++++this.peerLocations+%3D+peerLocations%3B%0A++++%7D%0A%0A++++public+void+setOrdererLocations%28Map%26lt%3BString%2C+String%26gt%3B+ordererLocations%29+%7B%0A++++++++this.ordererLocations+%3D+ordererLocations%3B%0A++++%7D%0A%0A++++public+void+setEventHubLocations%28Map%26lt%3BString%2C+String%26gt%3B+eventHubLocations%29+%7B%0A++++++++this.eventHubLocations+%3D+eventHubLocations%3B%0A++++%7D%0A%0A++++public+void+setPeers%28Set%26lt%3BPeer%26gt%3B+peers%29+%7B%0A++++++++this.peers+%3D+peers%3B%0A++++%7D%0A%0A++++public+void+setAdmin%28SUser+admin%29+%7B%0A++++++++this.admin+%3D+admin%3B%0A++++%7D%0A%0A++++public+void+setCaLocation%28String+caLocation%29+%7B%0A++++++++this.caLocation+%3D+caLocation%3B%0A++++%7D%0A%0A++++public+void+setCaProperties%28Properties+caProperties%29+%7B%0A++++++++this.caProperties+%3D+caProperties%3B%0A++++%7D%0A%0A++++public+void+setPeerAdmin%28SUser+peerAdmin%29+%7B%0A++++++++this.peerAdmin+%3D+peerAdmin%3B%0A++++%7D%0A%0A++++public+void+setDomainName%28String+domainName%29+%7B%0A++++++++this.domainName+%3D+domainName%3B%0A++++%7D%0A%0A++++public+String+getName%28%29+%7B%0A++++++++return+name%3B%0A++++%7D%0A%0A++++public+String+getMspid%28%29+%7B%0A++++++++return+mspid%3B%0A++++%7D%0A%0A++++public+HFCAClient+getCaClient%28%29+%7B%0A++++++++return+caClient%3B%0A++++%7D%0A%0A++++public+Map%26lt%3BString%2C+User%26gt%3B+getUserMap%28%29+%7B%0A++++++++return+userMap%3B%0A++++%7D%0A%0A++++public+Map%26lt%3BString%2C+String%26gt%3B+getPeerLocations%28%29+%7B%0A++++++++return+peerLocations%3B%0A++++%7D%0A%0A++++public+Map%26lt%3BString%2C+String%26gt%3B+getOrdererLocations%28%29+%7B%0A++++++++return+ordererLocations%3B%0A++++%7D%0A%0A++++public+Map%26lt%3BString%2C+String%26gt%3B+getEventHubLocations%28%29+%7B%0A++++++++return+eventHubLocations%3B%0A++++%7D%0A%0A++++public+Set%26lt%3BPeer%26gt%3B+getPeers%28%29+%7B%0A++++++++return+peers%3B%0A++++%7D%0A%0A++++public+SUser+getAdmin%28%29+%7B%0A++++++++return+admin%3B%0A++++%7D%0A%0A++++public+String+getCaLocation%28%29+%7B%0A++++++++return+caLocation%3B%0A++++%7D%0A%0A++++public+Properties+getCaProperties%28%29+%7B%0A++++++++return+caProperties%3B%0A++++%7D%0A%0A++++public+SUser+getPeerAdmin%28%29+%7B%0A++++++++return+peerAdmin%3B%0A++++%7D%0A%0A++++public+String+getDomainName%28%29+%7B%0A++++++++return+domainName%3B%0A++++%7D%0A%0A++++public+void+addPeerLocation%28String+name%2C+String+location%29+%7B%0A%0A++++++++peerLocations.put%28name%2C+location%29%3B%0A++++%7D%0A%0A++++public+void+addOrdererLocation%28String+name%2C+String+location%29+%7B%0A%0A++++++++ordererLocations.put%28name%2C+location%29%3B%0A++++%7D%0A%0A++++public+void+addEventHubLocation%28String+name%2C+String+location%29+%7B%0A%0A++++++++eventHubLocations.put%28name%2C+location%29%3B%0A++++%7D%0A%0A++++public+String+getPeerLocation%28String+name%29+%7B%0A++++++++return+peerLocations.get%28name%29%3B%0A%0A++++%7D%0A%0A++++public+String+getOrdererLocation%28String+name%29+%7B%0A++++++++return+ordererLocations.get%28name%29%3B%0A%0A++++%7D%0A%0A++++public+String+getEventHubLocation%28String+name%29+%7B%0A++++++++return+eventHubLocations.get%28name%29%3B%0A%0A++++%7D%0A%0A++++public+void+addUser%28SUser+user%29+%7B%0A++++++++userMap.put%28user.getName%28%29%2C+user%29%3B%0A++++%7D%0A%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E8.SUser%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Aimport+org.hyperledger.fabric.sdk.Enrollment%3B%0Aimport+org.hyperledger.fabric.sdk.User%3B%0Aimport+java.util.HashSet%3B%0Aimport+java.util.Set%3B%0A%0A%2F**%0A+*+SUser%E7%9A%84%E6%9E%84%E9%80%A0%E7%94%A8crypton%E5%B7%A5%E5%85%B7%E7%94%9F%E6%88%90%E7%9A%84%E8%AF%81%E4%B9%A6%E6%9C%AC%E5%9C%B0%E8%AF%BB%E5%8F%96%E6%9D%A5%E7%94%9F%E6%88%90%0A+*%2F%0Apublic+class+SUser+implements+User+%7B%0A%0A++++private+String+userName%3B%0A%0A++++private+String+mspid%3B%0A%0A++++private+Enrollment+enrollment%3B%0A%0A++++public+SUser%28String+userName%2C+String+mspid%29+%7B%0A++++++++this.userName+%3D+userName%3B%0A++++++++this.mspid+%3D+mspid%3B%0A++++%7D%0A%0A++++public+String+getName%28%29+%7B%0A++++++++return+userName%3B%0A++++%7D%0A%0A++++public+Set%26lt%3BString%26gt%3B+getRoles%28%29+%7B%0A++++++++return+new+HashSet%26lt%3BString%26gt%3B%28%29%3B%0A++++%7D%0A%0A++++public+String+getAccount%28%29+%7B%0A++++++++return+%22%22%3B%0A++++%7D%0A%0A++++public+String+getAffiliation%28%29+%7B%0A++++++++return+%22%22%3B%0A++++%7D%0A%0A++++public+Enrollment+getEnrollment%28%29+%7B%0A++++++++return+this.enrollment%3B%0A++++%7D%0A%0A++++public+String+getMspId%28%29+%7B%0A++++++++return+this.mspid%3B%0A++++%7D%0A%0A++++public+void+setEnrollment%28Enrollment+enrollment%29+%7B%0A++++++++this.enrollment+%3D+enrollment%3B%0A++++%7D%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E9.+DataRecord%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Apublic+class+DataRecord+%7B%0A%0A++++private+String+key%3B%0A%0A++++private+String+value%3B%0A%0A++++public+DataRecord%28String+key%2C+String+value%29+%7B%0A++++++++this.key+%3D+key%3B%0A++++++++this.value+%3D+value%3B%0A++++%7D%0A%0A++++public+String+getKey%28%29+%7B%0A++++++++return+key%3B%0A++++%7D%0A%0A++++public+String+getValue%28%29+%7B%0A++++++++return+value%3B%0A++++%7D%0A%0A++++public+void+setKey%28String+key%29+%7B%0A++++++++this.key+%3D+key%3B%0A++++%7D%0A%0A++++public+void+setValue%28String+value%29+%7B%0A++++++++this.value+%3D+value%3B%0A++++%7D%0A%0A++++public+String%5B%5D+toStringArray%28%29+%7B%0A++++++++return+new+String%5B%5D+%7Bthis.getKey%28%29%2Cthis.getValue%28%29%7D%3B%0A++++%7D%0A%0A++++%40Override%0A++++public+String+toString%28%29+%7B%0A++++++++return+%22Data%3A+key+%3D+%22%2Bkey%2B%22++value+%3D+%22+%2Bvalue%3B%0A++++%7D%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E10+.Insert%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Aimport+org.apache.log4j.Logger%3B%0Aimport+org.hyperledger.fabric.sdk.Channel%3B%0A%0Apublic+class+TestFabricInsert+%7B%0A%0A++++private+static+Logger+logger%3DLogger.getLogger%28TestFabricInsert.class%29%3B%0A%0A++++public+static+void+main%28String%5B%5D+args%29+throws+Exception%7B%0A%0A++++++++FabricUtils.init%28%29%3B%0A%0A++++++++DataRecord+dataRecord+%3D+new+DataRecord%28%22data%22%2C%22%7Bname%3A%5C%22testName%5C%22%2Caddress%3A%5C%22testAddress%5C%22%7D%22%29%3B%0A%0A++++++++testInsert%28dataRecord%29%3B%0A%0A++++%7D%0A%0A++++public+static+void+testInsert%28DataRecord+record%29+throws+Exception+%7B%0A++++++++System.out.println%28%22test+insert%22%29%3B%0A++++++++Channel+channel+%3D+FabricUtils.client.newChannel%28CommonUtils.channelId%29%3B%0A++++++++channel.addPeer%28FabricUtils.client.newPeer%28CommonUtils.peer0Org1Name%2C+CommonUtils.peer0Org1Location%29%29%3B%0A++++++++channel.addOrderer%28FabricUtils.client.newOrderer%28CommonUtils.orderName%2C+CommonUtils.orderLocation%29%29%3B%0A++++++++channel.initialize%28%29%3B%0A++++++++FabricUtils.instert%28channel%2Crecord%29%3B%0A++++%7D%0A%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E11+.query%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+com.t.fabric%3B%0A%0Aimport+org.apache.log4j.Logger%3B%0Aimport+org.hyperledger.fabric.sdk.Channel%3B%0A%0Apublic+class+TestFabricQuery+%7B%0A%0A++++private+static+Logger+logger%3DLogger.getLogger%28TestFabricQuery.class%29%3B%0A%0A++++public+static+void+main%28String%5B%5D+args%29+throws+Exception%7B%0A++++++++DataRecord+dataRecord+%3D+new+DataRecord%28%22data%22%2C%22%22%29%3B%0A%0A++++++++FabricUtils.init%28%29%3B%0A%0A++++++++testQuery%28dataRecord%29%3B%0A%0A++++%7D%0A%0A++++public+static+void+testQuery%28DataRecord+record%29+throws+Exception+%7B%0A++++++++logger.debug%28%22%E6%B5%8B%E8%AF%95Fabric+%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD%22%29%3B%0A++++++++Channel+channel+%3D+FabricUtils.client.newChannel%28CommonUtils.channelId%29%3B%0A++++++++channel.addPeer%28FabricUtils.client.newPeer%28CommonUtils.peer0Org1Name%2C+FabricUtils.orgHashMap.get%28%22org1%22%29.getPeerLocation%28CommonUtils.peer0Org1Name%29%29%29%3B%0A++++++++channel.addOrderer%28FabricUtils.client.newOrderer%28CommonUtils.orderName%2C+FabricUtils.orgHashMap.get%28%22org1%22%29.getOrdererLocation%28CommonUtils.orderName%29%29%29%3B%0A++++++++channel.initialize%28%29%3B%0A++++++++FabricUtils.query%28channel%2C+record.getKey%28%29%29%3B%0A++++%7D%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%23f33b45%3B%22%3E%3Cem%3E%3Cstrong%3E%E4%BB%A5%E4%B8%8A%E5%B0%B1%E6%98%AF%E5%85%A8%E9%83%A8%E7%9A%84%E7%B2%BE%E7%AE%80%E4%BB%A3%E7%A0%81%E4%BA%86%E3%80%82%E4%BD%86%E6%98%AF%E5%A6%82%E6%9E%9C%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E4%BB%A5%E4%B8%8A%E4%BB%A3%E7%A0%81%E7%9A%84%E8%AF%9D%E4%BC%9A%E6%9C%89%E4%B8%80%E4%BA%9B%E7%8E%AF%E5%A2%83%E6%96%B9%E9%9D%A2%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%8C%E6%88%91%E8%BF%99%E8%BE%B9%E9%81%87%E5%88%B0%E7%9A%84%E5%B0%B1%E6%98%AFtls%E9%97%AE%E9%A2%98....%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%23f33b45%3B%22%3E%3Cem%3E%3Cstrong%3E%E4%B8%8B%E9%9D%A2%E6%98%AF%E6%88%91%E6%89%93%E5%BC%80orderer%E7%9A%84%E6%97%A5%E5%BF%97%E6%97%B6%E5%8F%91%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%88%E8%A1%A8%E6%98%8E%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E5%90%88%E6%B3%95%E7%9A%84tls%E8%AE%BF%E9%97%AE%2C%E4%B8%AA%E4%BA%BA%E6%8E%A8%E6%B5%8B%EF%BC%89%EF%BC%9A%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E1.%E9%94%99%E8%AF%AF1%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Egrpc%3A+Server.Serve+failed+to+complete+security+handshake+from+%22172.18.0.1%3A41678%22%3A+tls%3A+first+record+does+not+look+like+a+TLS+handshake%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E2.+%E4%BC%B4%E9%9A%8F%E9%94%99%E8%AF%AF1%E5%87%BA%E7%8E%B0%E5%9C%A8java%E6%97%A5%E5%BF%97%E9%87%8C%E7%9A%84%E6%98%AF%E9%94%99%E8%AF%AF2%EF%BC%9A%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3ECaused+by%3A+io.netty.handler.codec.http2.Http2Exception%3A+First+received+frame+was+not+SETTINGS.+Hex+dump+for+first+5+bytes%3A+1503010002%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%2386ca5e%3B%22%3E%3Cem%3E%3Cstrong%3E%E6%9A%82%E6%97%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E5%B0%B1%E6%98%AF%E5%85%B3%E9%97%ADtls.....%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%2386ca5e%3B%22%3E%3Cem%3E%3Cstrong%3E1.+%E5%9C%A8e2e%2Fbase%E5%86%85%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E5%88%86%E5%88%AB%E5%85%B3%E6%8E%89+%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%2386ca5e%3B%22%3E%3Cem%3E%3Cstrong%3Edocker-compose-base.yaml%26nbsp%3B+----+%26gt%3B%26nbsp%3B+ORDERER_GENERAL_TLS_ENABLED%3Dfalse%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%2386ca5e%3B%22%3E%3Cem%3E%3Cstrong%3Epeer-base.yaml%26nbsp%3B+----+%26gt%3B%26nbsp%3B+CORE_PEER_TLS_ENABLED%3Dfalse%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%2386ca5e%3B%22%3E%3Cem%3E%3Cstrong%3E2.%E5%9C%A8e2e%2Fdocker-compose-cli.yaml%E5%86%85%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%AD%E5%85%B3%E6%8E%89+CORE_PEER_TLS_ENABLED%3Dfalse%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%2386ca5e%3B%22%3E%3Cem%3E%3Cstrong%3E%E7%84%B6%E5%90%8E%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83%E3%80%82%3C%2Fstrong%3E%3C%2Fem%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan+style%3D%22color%3A%23ffbb66%3B%22%3E%3Cstrong%3E%E9%9C%80%E8%A6%81%E9%A2%9D%E5%A4%96%E6%B3%A8%E6%84%8F%E7%9A%84%E6%98%AF%EF%BC%8C%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4%E5%86%85%E7%9A%844.2%26nbsp%3B+%2F+5.2+%E7%AD%89%E6%B6%89%E5%8F%8A%E5%88%B0tls%E7%9A%84%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE+--tls+true+%E5%8E%BB%E6%8E%89%E3%80%82%3C%2Fstrong%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3Einsert%E8%BE%93%E5%87%BA%E6%97%A5%E5%BF%97%EF%BC%9A%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3EDEBUG+sdk.Channel+-+Creating+channel%3A+mychannel%2C+client+context+Admin%0ADEBUG+sdk.Channel+-+Channel+mychannel+adding+ordererorderer.example.com%2C+url%3A+grpc%3A%2F%2Flocalhost%3A7050%0ADEBUG+sdk.Channel+-+Channel+mychannel+initialize+shutdown+false%0ADEBUG+sdk.Channel+-+getConfigurationBlock+for+channel+mychannel%0ADEBUG+sdk.Channel+-+getConfigurationBlock+for+channel+mychannel%0A...%0ADEBUG+sdk.OrdererClient+-+resp+status+value%3A+0%2C+resp%3A+UNKNOWN%2C+type+case%3A+BLOCK%0ADEBUG+sdk.OrdererClient+-+resp+status+value%3A+200%2C+resp%3A+SUCCESS%2C+type+case%3A+STATUS%0ADEBUG+sdk.Channel+-+Channel+mychannel+getLatestBlock+returned+status+200%0ADEBUG+sdk.Channel+-+Last+config+index+is+2%0ADEBUG+transaction.ProtoUtils+-+ChannelHeader%3A+type%3A+DELIVER_SEEK_INFO%2C+version%3A+1%2C+Txid%3A+4104f7b6af57f3a9176ed9e6ce5a506304ef9d35f92d675eb8d64335ce43236d%2C+channelId%3A+mychannel%2C+epoch+0%0A...%0A....%0ADEBUG+sdk.Channel+-+Channel+mychannel+getConfigurationBlock+returned%0ADEBUG+sdk.Channel+-+Channel+mychannel+Got+config+block+getting+MSP+data+and+anchorPeers+data%0ADEBUG+sdk.Channel+-+Channel+mychannel+loadCACertificates%0ADEBUG+sdk.Channel+-+loading+certificates+for+MSP+%3A+Org2MSP%0ADEBUG+sdk.Channel+-+loading+certificates+for+MSP+%3A+Org1MSP%0ADEBUG+sdk.Channel+-+loading+certificates+for+MSP+%3A+OrdererMSP%0ADEBUG+sdk.Channel+-+Channel+mychannel+loadCACertificates+completed+%0ADEBUG+sdk.Channel+-+Eventque+started+null%0ADEBUG+sdk.Channel+-+0+eventhubs+initialized%0ADEBUG+sdk.Channel+-+Channel+mychannel+registerTransactionListenerProcessor+starting%0ADEBUG+sdk.Channel+-+Channel+mychannel+blockListener+32a8ef34-46b6-4d3e-af61-903c2e1f27ba+starting%0ADEBUG+sdk.Channel+-+Channel+mychannel+registerTransactionListenerProcessor+completed%0ADEBUG+sdk.Channel+-+Channel+mychannel+initialized%0ADEBUG+transaction.ProposalBuilder+-+transientMap%28%27result%27%2C+%27%3A%29%27%29%29%0ADEBUG+transaction.ProposalBuilder+-+transientMap%28%27method%27%2C+%27TransactionProposalRequest%27%29%29%0ADEBUG+transaction.ProposalBuilder+-+transientMap%28%27HyperLedgerFabric%27%2C+%27TransactionProposalRequest%3AJavaSDK%27%29%29%0ADEBUG+transaction.ProtoUtils+-+ChannelHeader%3A+type%3A+ENDORSER_TRANSACTION%2C+version%3A+1%2C+Txid%3A+7f0dc2e2ef4beca32e50d8115fd154e1347c4e8e85ccc6ea2138013e53d731f9%2C+channelId%3A+mychannel%2C+epoch+0%0ADEBUG+transaction.ProposalBuilder+-+ChaincodeInvocationSpec+type%3A+GOLANG%2C+chaincode+name%3A+mycc%2C+chaincode+path%3A+%2C+chaincode+version%3A++args%28%22set%22%2C+%22data%22%2C+%22%7Bname%3A%22testName%22%2Caddress%3A%22testAddress%22%7D%22%29%0ADEBUG+transaction.ProtoUtils+-+SignatureHeader%3A+nonce%3A+af86713b93d098b8ec2ef7380a2bb584c8355c393ea0d2ab%2C+User%3AAdmin%2C+MSPID%3A+Org1MSP%2C+idBytes%3A+427d0ae5efdfff9a663a66df1643f9c21130fc4b3b0f668e6d5e8df4cf43a2d6%0ADEBUG+sdk.Channel+-+Channel+mychannel+send+proposal+to+peer+peer0.org1.example.com+at+url+grpc%3A%2F%2Flocalhost%3A7051%0ADEBUG+sdk.Peer+-+peer.sendProposalAsync+name%3A+peer0.org1.example.com%2C+url%3A+grpc%3A%2F%2Flocalhost%3A7051%0A..%0A..%0ADEBUG+sdk.Channel+-+Channel+mychannel+got+back+from+peer+peer0.org1.example.com+status%3A+200%2C+message%3A+OK%0ADEBUG+fabric.FabricUtils+-+payload%21%21%21%21%21%21%21%3A+%0ADEBUG+sdk.Channel+-+Channel+mychannel+sending+transaction+to+orderer%28s%29+with+TxID+7f0dc2e2ef4beca32e50d8115fd154e1347c4e8e85ccc6ea2138013e53d731f9+%0ADEBUG+sdk.Orderer+-+Order.sendTransaction+name%3A+orderer.example.com%2C+url%3A+grpc%3A%2F%2Flocalhost%3A7050%0A....%0ADEBUG+sdk.Channel+-+Channel+mychannel+successful+sent+to+Orderer+transaction+id%3A+7f0dc2e2ef4beca32e50d8115fd154e1347c4e8e85ccc6ea2138013e53d731f9%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3Equery%E8%BE%93%E5%87%BA%E6%97%A5%E5%BF%97%EF%BC%9A%3Cbr%3E+%26nbsp%3B%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3EDEBUG+helper.Config+-+Loading+configuration+from+%2Fhome%2Fdell%2Fgo%2Fjavaproject%2FFabricSdk%2Fconfig.properties+and+it+is+present%3A+false%0A+WARN+helper.Config+-+Failed+to+load+any+configuration+from%3A+config.properties.+Using+toolkit+defaults%0ADEBUG+sdk.HFClient+-+Setting+user+context+to+MSPID%3A+Org1MSP+user%3A+Admin%0ADEBUG+fabric.TestFabricQuery+-+%E6%B5%8B%E8%AF%95Fabric+%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD%0ADEBUG+sdk.Channel+-+Creating+channel%3A+mychannel%2C+client+context+Admin%0ADEBUG+sdk.Channel+-+Channel+mychannel+adding+ordererorderer.example.com%2C+url%3A+grpc%3A%2F%2Flocalhost%3A7050%0ADEBUG+sdk.Channel+-+Channel+mychannel+initialize+shutdown+false%0ADEBUG+sdk.Channel+-+getConfigurationBlock+for+channel+mychannel%0ADEBUG+sdk.Channel+-+getConfigurationBlock+for+channel+mychannel%0ADEBUG+transaction.ProtoUtils+-+ChannelHeader%3A+type%3A+DELIVER_SEEK_INFO%2C+version%3A+1%2C+Txid%3A+7341e25d471cbc614a1a996f896462286a20f9ba78fd72b619fdedfed674255f%2C+channelId%3A+mychannel%2C+epoch+0%0ADEBUG+sdk.Orderer+-+Order.sendDeliver+name%3A+orderer.example.com%2C+url%3A+grpc%3A%2F%2Flocalhost%3A7050%0A....%0ADEBUG+sdk.OrdererClient+-+resp+status+value%3A+0%2C+resp%3A+UNKNOWN%2C+type+case%3A+BLOCK%0ADEBUG+sdk.OrdererClient+-+resp+status+value%3A+200%2C+resp%3A+SUCCESS%2C+type+case%3A+STATUS%0ADEBUG+sdk.Channel+-+Channel+mychannel+getLatestBlock+returned+status+200%0A%0A..%0ADEBUG+transaction.ProtoUtils+-+ChannelHeader%3A+type%3A+DELIVER_SEEK_INFO%2C+version%3A+1%2C+Txid%3A+21046ed568a93549a16224a977423351d5d7ef0ffe66455210929ab7acc6480f%2C+channelId%3A+mychannel%2C+epoch+0%0ADEBUG+sdk.Orderer+-+Order.sendDeliver+name%3A+orderer.example.com%2C+url%3A+grpc%3A%2F%2Flocalhost%3A7050%0A...%0A..%0ADEBUG+sdk.Channel+-+Channel+mychannel+getConfigurationBlock+returned%0ADEBUG+sdk.Channel+-+Channel+mychannel+Got+config+block+getting+MSP+data+and+anchorPeers+data%0ADEBUG+sdk.Channel+-+Channel+mychannel+loadCACertificates%0ADEBUG+sdk.Channel+-+loading+certificates+for+MSP+%3A+Org2MSP%0ADEBUG+sdk.Channel+-+loading+certificates+for+MSP+%3A+Org1MSP%0ADEBUG+sdk.Channel+-+loading+certificates+for+MSP+%3A+OrdererMSP%0ADEBUG+sdk.Channel+-+Channel+mychannel+loadCACertificates+completed+%0ADEBUG+sdk.Channel+-+Eventque+started+null%0ADEBUG+sdk.Channel+-+0+eventhubs+initialized%0ADEBUG+sdk.Channel+-+Channel+mychannel+registerTransactionListenerProcessor+starting%0ADEBUG+sdk.Channel+-+Channel+mychannel+blockListener+3d8076a4-fca7-466a-904f-5c104c96ea1f+starting%0ADEBUG+sdk.Channel+-+Channel+mychannel+registerTransactionListenerProcessor+completed%0ADEBUG+sdk.Channel+-+Channel+mychannel+initialized%0ADEBUG+transaction.ProtoUtils+-+ChannelHeader%3A+type%3A+ENDORSER_TRANSACTION%2C+version%3A+1%2C+Txid%3A+a08572d26702b2bdafe0ac53039e21faadb36e9a0640c9169dd66552af0a1994%2C+channelId%3A+mychannel%2C+epoch+0%0ADEBUG+transaction.ProposalBuilder+-+ChaincodeInvocationSpec+type%3A+GOLANG%2C+chaincode+name%3A+mycc%2C+chaincode+path%3A+%2C+chaincode+version%3A++args%28%22get%22%2C+%22data%22%29%0ADEBUG+transaction.ProtoUtils+-+SignatureHeader%3A+nonce%3A+ebc13657e548bdb8319e689baa9c263e6c8fa712835828b8%2C+User%3AAdmin%2C+MSPID%3A+Org1MSP%2C+idBytes%3A+427d0ae5efdfff9a663a66df1643f9c21130fc4b3b0f668e6d5e8df4cf43a2d6%0ADEBUG+sdk.Channel+-+Channel+mychannel+send+proposal+to+peer+peer0.org1.example.com+at+url+grpc%3A%2F%2Flocalhost%3A7051%0ADEBUG+sdk.Peer+-+peer.sendProposalAsync+name%3A+peer0.org1.example.com%2C+url%3A+grpc%3A%2F%2Flocalhost%3A7051%0A%0A....%0A%0A....%0A%0ADEBUG+sdk.Channel+-+Channel+mychannel+got+back+from+peer+peer0.org1.example.com+status%3A+200%2C+message%3A+OK%0ADEBUG+fabric.FabricUtils+-+payload%21%21%21%21%21%21%21%3A+%7Bname%3A%22testName%22%2Caddress%3A%22testAddress%22%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E6%9C%80%E5%90%8E%E8%B4%B4%E4%B8%80%E4%B8%8B%E8%87%AA%E5%B7%B1%E7%9A%84chaincode001%EF%BC%88%E5%85%B6%E5%AE%9E%E5%B0%B1%E6%98%AF%E4%BB%A5%E5%89%8D%E6%B5%8B%E8%AF%95%E7%9A%84%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84chaincode%EF%BC%89%3C%2Fp%3E+%0A++%3Cp%3E%3Ca+href%3D%22https%3A%2F%2Fblog.csdn.net%2Fqq_32924343%2Farticle%2Fdetails%2F81287985%22+rel%3D%22nofollow%22%3Echaincode%3C%2Fa%3E%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fqq_32924343%2Farticle%2Fdetails%2F81777067%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fqq_32924343%2Farticle%2Fdetails%2F81777067%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}