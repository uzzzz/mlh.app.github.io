---
layout: default
title: fabric链码操作方法不定期汇总
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Cdiv+class%3D%22article-copyright%22%3E%0A+++%E7%89%88%E6%9D%83%E5%A3%B0%E6%98%8E%EF%BC%9A%E5%AD%A6%E4%B9%A0%E4%B8%AD%E3%80%82%E3%80%82%E3%80%82+https%3A%2F%2Fblog.csdn.net%2Ffangdengfu123%2Farticle%2Fdetails%2F80579966+%0A+%3C%2Fdiv%3E+%0A+%3Cdiv+class%3D%22markdown_views%22%3E+%0A++%3Ch5+id%3D%22uuid%22%3EUUID%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+css%22%3E%3Cspan+class%3D%22hljs-tag%22%3Efunc%3C%2Fspan%3E+%28%3Cspan+class%3D%22hljs-tag%22%3Et%3C%2Fspan%3E+*%3Cspan+class%3D%22hljs-tag%22%3ETestChaincode%3C%2Fspan%3E%29+%3Cspan+class%3D%22hljs-tag%22%3EgetUUID%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-tag%22%3Estub%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-tag%22%3Eshim%3C%2Fspan%3E%3Cspan+class%3D%22hljs-class%22%3E.ChaincodeStubInterface%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-tag%22%3Eargs%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-attr_selector%22%3E%5B%5D%3C%2Fspan%3E%3Cspan+class%3D%22hljs-tag%22%3Estring%3C%2Fspan%3E%29+%3Cspan+class%3D%22hljs-tag%22%3Epb%3C%2Fspan%3E%3Cspan+class%3D%22hljs-class%22%3E.Response%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-rules%22%3E%7B+%3Cspan+class%3D%22hljs-rule%22%3E%3Cspan+class%3D%22hljs-attribute%22%3Earl+%3C%2Fspan%3E%3A%3Cspan+class%3D%22hljs-value%22%3E%3D+util.%3Cspan+class%3D%22hljs-function%22%3EGenerateUUID%28%29%3C%2Fspan%3E+fmt.%3Cspan+class%3D%22hljs-function%22%3EPrintln%28arl%29%3C%2Fspan%3E+return+shim.%3Cspan+class%3D%22hljs-function%22%3ESuccess%28%5B%5D%3Cspan+class%3D%22hljs-function%22%3Ebyte%28arl%29%3C%2Fspan%3E%29%3C%2Fspan%3E+%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fspan%3E%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22getlogger%22%3EgetLogger%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+avrasm%22%3Efunc+getLogger%28stub+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.ChaincodeStubInterface%3C%2Fspan%3E%29+%28c+*shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.ChaincodeLogger%3C%2Fspan%3E%29+%7B%0A++++fcn%2C+_+%3A%3D+stub%3Cspan+class%3D%22hljs-preprocessor%22%3E.GetFunctionAndParameters%3C%2Fspan%3E%28%29%0A++++c+%3D+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.NewLogger%3C%2Fspan%3E%28fmt%3Cspan+class%3D%22hljs-preprocessor%22%3E.Sprintf%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%25s.%25s.%25s%22%3C%2Fspan%3E%2C+stub%3Cspan+class%3D%22hljs-preprocessor%22%3E.GetChannelID%3C%2Fspan%3E%28%29%2C+%3Cspan+class%3D%22hljs-string%22%3E%22%E4%BD%A0%E7%9A%84%E9%93%BE%E7%A0%81%E5%90%8D%E7%A7%B0%22%3C%2Fspan%3E%2C+fcn%29%29%0A++++c%3Cspan+class%3D%22hljs-preprocessor%22%3E.SetLevel%3C%2Fspan%3E%28shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.LogDebug%3C%2Fspan%3E%29%0A++++return%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22rsakey%22%3ErsaKey%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+avrasm%22%3Efunc+%28t+*TestChaincode%29+getRSAKey%28stub+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.ChaincodeStubInterface%3C%2Fspan%3E%2C+args+%5B%5Dstring%29+pb%3Cspan+class%3D%22hljs-preprocessor%22%3E.Response%3C%2Fspan%3E+%7B%0A%0A++++logger+%3A%3D+getLogger%28stub%29%0A%0A++++%2F%2F+%E7%94%9F%E6%88%90%E7%A7%81%E9%92%A5%0A++++privateKey%2C+err+%3A%3D+rsa%3Cspan+class%3D%22hljs-preprocessor%22%3E.GenerateKey%3C%2Fspan%3E%28rand%3Cspan+class%3D%22hljs-preprocessor%22%3E.Reader%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-number%22%3E256%3C%2Fspan%3E%29%0A++++logger%3Cspan+class%3D%22hljs-preprocessor%22%3E.Debug%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22generate+key%22%3C%2Fspan%3E%29%0A++++%2F%2F+%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%0A++++publicKey+%3A%3D+%26amp%3BprivateKey%3Cspan+class%3D%22hljs-preprocessor%22%3E.PublicKey%3C%2Fspan%3E%0A++++if+err+%21%3D+nil+%7B%0A++++++++return+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28err%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28%29%29%0A++++%7D%0A++++%2F%2F%E7%94%9F%E6%88%90%E7%A7%81%E9%92%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%0A++++derStream+%3A%3D+MarshalPKCS8PrivateKey%28privateKey%29%0A++++block+%3A%3D+%26amp%3Bpem%3Cspan+class%3D%22hljs-preprocessor%22%3E.Block%3C%2Fspan%3E%7B%0A++++++++Type%3A++%3Cspan+class%3D%22hljs-string%22%3E%22PRIVATE+KEY%22%3C%2Fspan%3E%2C%0A++++++++Bytes%3A+derStream%2C%0A++++%7D%0A++++pribuffer+%3A%3D+bytes%3Cspan+class%3D%22hljs-preprocessor%22%3E.NewBuffer%3C%2Fspan%3E%28make%28%5B%5Dbyte%2C+%3Cspan+class%3D%22hljs-number%22%3E1024%3C%2Fspan%3E*%3Cspan+class%3D%22hljs-number%22%3E5%3C%2Fspan%3E%29%29%0A++++err+%3D+pem%3Cspan+class%3D%22hljs-preprocessor%22%3E.Encode%3C%2Fspan%3E%28pribuffer%2C+block%29%0A++++if+err+%21%3D+nil+%7B%0A++++++++return+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28err%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28%29%29%0A++++%7D%0A++++logger%3Cspan+class%3D%22hljs-preprocessor%22%3E.Debug%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22privatekey+is+%3A%22%3C%2Fspan%3E+%2B+pribuffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.String%3C%2Fspan%3E%28%29%29%0A++++%2F%2F+%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%0A++++pubbuffer+%3A%3D+bytes%3Cspan+class%3D%22hljs-preprocessor%22%3E.NewBuffer%3C%2Fspan%3E%28make%28%5B%5Dbyte%2C+%3Cspan+class%3D%22hljs-number%22%3E1024%3C%2Fspan%3E*%3Cspan+class%3D%22hljs-number%22%3E5%3C%2Fspan%3E%29%29%0A++++derPkix%2C+err+%3A%3D+x509%3Cspan+class%3D%22hljs-preprocessor%22%3E.MarshalPKIXPublicKey%3C%2Fspan%3E%28publicKey%29%0A++++if+err+%21%3D+nil+%7B%0A++++++++return+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28err%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28%29%29%0A++++%7D%0A++++block+%3D+%26amp%3Bpem%3Cspan+class%3D%22hljs-preprocessor%22%3E.Block%3C%2Fspan%3E%7B%0A++++++++Type%3A++%3Cspan+class%3D%22hljs-string%22%3E%22PUBLIC+KEY%22%3C%2Fspan%3E%2C%0A++++++++Bytes%3A+derPkix%2C%0A++++%7D%0A++++err+%3D+pem%3Cspan+class%3D%22hljs-preprocessor%22%3E.Encode%3C%2Fspan%3E%28pubbuffer%2C+block%29%0A++++if+err+%21%3D+nil+%7B%0A++++++++fmt%3Cspan+class%3D%22hljs-preprocessor%22%3E.Println%3C%2Fspan%3E%28err%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28%29%29%0A++++%7D%0A++++pubStr+%3A%3D+pubbuffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.String%3C%2Fspan%3E%28%29%0A++++priStr+%3A%3D+pribuffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.String%3C%2Fspan%3E%28%29%0A++++logger%3Cspan+class%3D%22hljs-preprocessor%22%3E.Debug%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22publickey+is+%3A+%22%3C%2Fspan%3E+%2B+pubStr%29%0A++++pubStr+%3D+pubStr%5Bstrings%3Cspan+class%3D%22hljs-preprocessor%22%3E.Index%3C%2Fspan%3E%28pubStr%2C+%3Cspan+class%3D%22hljs-string%22%3E%22-----BEGIN+PUBLIC+KE%22%3C%2Fspan%3E%29%3A%5D%0A++++priStr+%3D+priStr%5Bstrings%3Cspan+class%3D%22hljs-preprocessor%22%3E.Index%3C%2Fspan%3E%28priStr%2C+%3Cspan+class%3D%22hljs-string%22%3E%22-----BEGIN+PRIVATE+KE%22%3C%2Fspan%3E%29%3A%5D%0A%0A++++rsaKey+%3A%3D+%26amp%3BRSAKey%7BpubStr%2C+priStr%7D%0A++++value%2C+err+%3A%3D+json%3Cspan+class%3D%22hljs-preprocessor%22%3E.Marshal%3C%2Fspan%3E%28rsaKey%29%0A++++if+err+%21%3D+nil+%7B%0A++++++++return+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28err%3Cspan+class%3D%22hljs-preprocessor%22%3E.Error%3C%2Fspan%3E%28%29%29%0A++++%7D%0A%0A++++return+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.Success%3C%2Fspan%3E%28value%29%0A%7D%0Atype+RSAKey+struct+%7B%0A++++PrivateKey+string+%60json%3A%3Cspan+class%3D%22hljs-string%22%3E%22privateKey%22%3C%2Fspan%3E%60%0A++++PublicKey++string+%60json%3A%3Cspan+class%3D%22hljs-string%22%3E%22publicKey%22%3C%2Fspan%3E%60%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22%E8%8E%B7%E5%8F%96%E5%8A%A0%E5%AF%86%E5%AF%B9%E8%B1%A1%22%3E%E8%8E%B7%E5%8F%96%E5%8A%A0%E5%AF%86%E5%AF%B9%E8%B1%A1%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+go%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunc%3C%2Fspan%3E+getEnt%28key+%5B%5D%3Cspan+class%3D%22hljs-typename%22%3Ebyte%3C%2Fspan%3E%29+%28entities.EncrypterEntity%2C+error%29+%7B%0A++++factory.InitFactories%28%3Cspan+class%3D%22hljs-constant%22%3Enil%3C%2Fspan%3E%29%0A++++ent%2C+err+%3A%3D+entities.NewAES256EncrypterEntity%28%3Cspan+class%3D%22hljs-string%22%3E%22ID%22%3C%2Fspan%3E%2C+factory.GetDefault%28%29%2C+key%2C+%3Cspan+class%3D%22hljs-constant%22%3Enil%3C%2Fspan%3E%29%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+err+%21%3D+%3Cspan+class%3D%22hljs-constant%22%3Enil%3C%2Fspan%3E+%7B%0A++++++++%3Cspan+class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-constant%22%3Enil%3C%2Fspan%3E%2C+err%0A++++%7D%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E+ent%2C+%3Cspan+class%3D%22hljs-constant%22%3Enil%3C%2Fspan%3E%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22%E5%BC%80%E5%A7%8B%E5%8A%A0%E5%AF%86%22%3E%E5%BC%80%E5%A7%8B%E5%8A%A0%E5%AF%86%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+vbscript%22%3Eent%2C+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%3A%3D+getEnt%28aesKey%29%0A%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%21%3D+nil+%7B%0A++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%29%29%0A%7D%0Ares%2C+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%3A%3D+ent.Encrypt%28%5B%5Dbyte%28data%29%29%0A%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%21%3D+nil+%7B%0A++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%29%29%0A%7D%0Alogger.Debug%28fmt.Sprintf%28%3Cspan+class%3D%22hljs-string%22%3E%22get+encryptVal%3A+%25s%22%3C%2Fspan%3E%2C+res%29%29%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22%E5%BC%80%E5%A7%8B%E8%A7%A3%E5%AF%86%22%3E%E5%BC%80%E5%A7%8B%E8%A7%A3%E5%AF%86%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+vbscript%22%3Eent%2C+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%3A%3D+getEnt%28aesKey%29%0A%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%21%3D+nil+%7B%0A++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%29%29%0A%7D%0Ares%2C+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%3A%3D+ent.Decrypt%28aes.Data%29%0A%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%21%3D+nil+%7B%0A++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%29%29%0A%7D%0Alogger.Debug%28fmt.Sprintf%28%3Cspan+class%3D%22hljs-string%22%3E%22get+result%3A+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-built_in%22%3Estring%3C%2Fspan%3E%28res%29%29%29%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22%E8%A7%A3%E6%9E%90%E5%8E%86%E5%8F%B2%E7%BB%93%E6%9E%9C%E9%9B%86%E5%90%88%22%3E%E8%A7%A3%E6%9E%90%E5%8E%86%E5%8F%B2%E7%BB%93%E6%9E%9C%E9%9B%86%E5%90%88%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+avrasm%22%3Efunc+getHisResult%28result+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.HistoryQueryIteratorInterface%3C%2Fspan%3E%29+%28bytes%3Cspan+class%3D%22hljs-preprocessor%22%3E.Buffer%3C%2Fspan%3E%2C+error%29+%7B%0A++++%2F%2F%E7%94%B1%E4%BA%8E%E6%9F%A5%E8%AF%A2%E7%9A%84%E7%BB%93%E6%9E%9C%E6%98%AF%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88%EF%BC%8C%E6%89%80%E4%BB%A5%E8%A6%81%E5%B0%86%E7%BB%93%E6%9E%9C%E9%9B%86%E8%BD%AC%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E6%96%B9%E4%BE%BF%E4%BC%A0%E8%BE%93%0A++++var+buffer+bytes%3Cspan+class%3D%22hljs-preprocessor%22%3E.Buffer%3C%2Fspan%3E%0A++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5B%22%3C%2Fspan%3E%29%0A%0A++++bArrayMemberAlreadyWritten+%3A%3D+false%0A%0A++++for+result%3Cspan+class%3D%22hljs-preprocessor%22%3E.HasNext%3C%2Fspan%3E%28%29+%7B%0A%0A++++++++response%2C+err+%3A%3D+result%3Cspan+class%3D%22hljs-preprocessor%22%3E.Next%3C%2Fspan%3E%28%29%0A++++++++if+err+%21%3D+nil+%7B%0A++++++++++++return+buffer%2C+err%0A++++++++%7D%0A%0A++++++++if+bArrayMemberAlreadyWritten+%7B%0A++++++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%2C%22%3C%2Fspan%3E%29%0A++++++++%7D%0A%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%7B%5C%22TxId%5C%22%3A%5C%22%22%3C%2Fspan%3E%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28response%3Cspan+class%3D%22hljs-preprocessor%22%3E.TxId%3C%2Fspan%3E%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5C%22%2C%5C%22value%5C%22%3A%22%3C%2Fspan%3E%29%0A%0A++++++++if+response%3Cspan+class%3D%22hljs-preprocessor%22%3E.IsDelete%3C%2Fspan%3E+%7B%0A++++++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22null%22%3C%2Fspan%3E%29%0A++++++++%7D+else+%7B%0A++++++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28string%28response%3Cspan+class%3D%22hljs-preprocessor%22%3E.Value%3C%2Fspan%3E%29%29%0A++++++++%7D%0A%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%2C+%5C%22Timestamp%5C%22%3A%5C%22%22%3C%2Fspan%3E%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28time%3Cspan+class%3D%22hljs-preprocessor%22%3E.Unix%3C%2Fspan%3E%28response%3Cspan+class%3D%22hljs-preprocessor%22%3E.Timestamp%3C%2Fspan%3E%3Cspan+class%3D%22hljs-preprocessor%22%3E.Seconds%3C%2Fspan%3E%2C+int64%28response%3Cspan+class%3D%22hljs-preprocessor%22%3E.Timestamp%3C%2Fspan%3E%3Cspan+class%3D%22hljs-preprocessor%22%3E.Nanos%3C%2Fspan%3E%29%29%3Cspan+class%3D%22hljs-preprocessor%22%3E.Format%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%222006-01-02+15%3A04%3A05%22%3C%2Fspan%3E%29%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5C%22%22%3C%2Fspan%3E%29%0A%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%2C+%5C%22IsDelete%5C%22%3A%5C%22%22%3C%2Fspan%3E%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28strconv%3Cspan+class%3D%22hljs-preprocessor%22%3E.FormatBool%3C%2Fspan%3E%28response%3Cspan+class%3D%22hljs-preprocessor%22%3E.IsDelete%3C%2Fspan%3E%29%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5C%22%22%3C%2Fspan%3E%29%0A%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%7D%22%3C%2Fspan%3E%29%0A%0A++++++++%2F%2Fitem%2C_%3A%3D+json%3Cspan+class%3D%22hljs-preprocessor%22%3E.Marshal%3C%2Fspan%3E%28response%29%0A++++++++%2F%2Fbuffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.Write%3C%2Fspan%3E%28item%29%0A%0A++++++++bArrayMemberAlreadyWritten+%3D+true%0A++++%7D%0A%0A++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5D%22%3C%2Fspan%3E%29%0A++++return+buffer%2C+nil%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22%E8%A7%A3%E6%9E%90%E9%9B%86%E5%90%88%E7%BB%93%E6%9E%9C%22%3E%E8%A7%A3%E6%9E%90%E9%9B%86%E5%90%88%E7%BB%93%E6%9E%9C%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+avrasm%22%3Efunc+getListResult%28resultsIterator+shim%3Cspan+class%3D%22hljs-preprocessor%22%3E.StateQueryIteratorInterface%3C%2Fspan%3E%29+%28%5B%5Dbyte%2C+error%29+%7B%0A%0A++++defer+resultsIterator%3Cspan+class%3D%22hljs-preprocessor%22%3E.Close%3C%2Fspan%3E%28%29%0A++++%2F%2F+buffer+is+a+JSON+array+containing+QueryRecords%0A++++var+buffer+bytes%3Cspan+class%3D%22hljs-preprocessor%22%3E.Buffer%3C%2Fspan%3E%0A++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5B%22%3C%2Fspan%3E%29%0A%0A++++bArrayMemberAlreadyWritten+%3A%3D+false%0A++++for+resultsIterator%3Cspan+class%3D%22hljs-preprocessor%22%3E.HasNext%3C%2Fspan%3E%28%29+%7B%0A++++++++queryResponse%2C+err+%3A%3D+resultsIterator%3Cspan+class%3D%22hljs-preprocessor%22%3E.Next%3C%2Fspan%3E%28%29%0A++++++++if+err+%21%3D+nil+%7B%0A++++++++++++return+nil%2C+err%0A++++++++%7D%0A++++++++%2F%2F+%3Cspan+class%3D%22hljs-keyword%22%3EAdd%3C%2Fspan%3E+a+comma+before+array+members%2C+suppress+it+for+the+first+array+member%0A++++++++if+bArrayMemberAlreadyWritten+%3D%3D+true+%7B%0A++++++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%2C%22%3C%2Fspan%3E%29%0A++++++++%7D%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%7B%5C%22Key%5C%22%3A%22%3C%2Fspan%3E%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5C%22%22%3C%2Fspan%3E%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28queryResponse%3Cspan+class%3D%22hljs-preprocessor%22%3E.Key%3C%2Fspan%3E%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5C%22%22%3C%2Fspan%3E%29%0A%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%2C+%5C%22Record%5C%22%3A%22%3C%2Fspan%3E%29%0A++++++++%2F%2F+Record+is+a+JSON+object%2C+so+we+write+as-is%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28string%28queryResponse%3Cspan+class%3D%22hljs-preprocessor%22%3E.Value%3C%2Fspan%3E%29%29%0A++++++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%7D%22%3C%2Fspan%3E%29%0A++++++++bArrayMemberAlreadyWritten+%3D+true%0A++++%7D%0A++++buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.WriteString%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22%5D%22%3C%2Fspan%3E%29%0A++++fmt%3Cspan+class%3D%22hljs-preprocessor%22%3E.Printf%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22queryResult%3A%5Cn%25s%5Cn%22%3C%2Fspan%3E%2C+buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.String%3C%2Fspan%3E%28%29%29%0A++++return+buffer%3Cspan+class%3D%22hljs-preprocessor%22%3E.Bytes%3C%2Fspan%3E%28%29%2C+nil%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch5+id%3D%22%E4%BB%BB%E6%84%8F%E5%AF%8C%E6%9F%A5%E8%AF%A2%22%3E%E4%BB%BB%E6%84%8F%E5%AF%8C%E6%9F%A5%E8%AF%A2%3C%2Fh5%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+vbscript%22%3Efunc+%28t+*AccountChaincode%29+getResultForQueryString%28stub+shim.ChaincodeStubInterface%2C+args+%5B%5D%3Cspan+class%3D%22hljs-built_in%22%3Estring%3C%2Fspan%3E%29+pb.%3Cspan+class%3D%22hljs-built_in%22%3EResponse%3C%2Fspan%3E+%7B%0A%0A++++logger+%3A%3D+getLogger%28stub%29%0A++++logger.Debug%28%3Cspan+class%3D%22hljs-string%22%3E%22Enter+%5B%25s%5D+account.getResultForQueryString%2C+args%3A+%25s%22%3C%2Fspan%3E%2C+stub.GetChannelID%28%29%2C+args%29%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-built_in%22%3Elen%3C%2Fspan%3E%28args%29+%26lt%3B+%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E+%7B%0A++++++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22Incorrect+number+of+arguments.+Expecting+1%22%3C%2Fspan%3E%29%0A++++%7D%0A++++queryString+%3A%3D+args%5B%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%5D%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+queryString+%3D%3D+%3Cspan+class%3D%22hljs-string%22%3E%22%22%3C%2Fspan%3E+%7B%0A++++++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%22queryString+is+nil%22%3C%2Fspan%3E%29%0A++++%7D%0A++++queryResult%2C+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%3A%3D+stub.GetQueryResult%28queryString%29%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%21%3D+nil+%7B%0A++++++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%29%29%0A++++%7D%0A++++defer+queryResult.Close%28%29%0A++++value%2C+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%3A%3D+getListResult%28queryResult%29%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E+%21%3D+nil+%7B%0A++++++++return+shim.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-built_in%22%3Eerr%3C%2Fspan%3E.%3Cspan+class%3D%22hljs-keyword%22%3EError%3C%2Fspan%3E%28%29%29%0A++++%7D%0A++++logger.Debug%28%3Cspan+class%3D%22hljs-string%22%3E%22Leave+%5B%25s%5D+account.getResultForQueryString%2C+returned%3A+%25s%22%3C%2Fspan%3E%2C+stub.GetChannelID%28%29%2C+%3Cspan+class%3D%22hljs-built_in%22%3Estring%3C%2Fspan%3E%28value%29%29%0A++++return+shim.Success%28value%29%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A+%3C%2Fdiv%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fmarkdown_views-ea0013b516.css%22%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Ffangdengfu123%2Farticle%2Fdetails%2F80579966%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Ffangdengfu123%2Farticle%2Fdetails%2F80579966%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A+%3Ca+class%3D%22btn%22+href%3D%22https%3A%2F%2Fpassport.csdn.net%2Faccount%2Flogin%3Futm_source%3Dcsdn_blog_pc_more_login%22+target%3D%22_self%22+id%3D%22btn-lobinreadmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_557%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Ffangdengfu123%2Farticle%2Fdetails%2F80579966%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_557%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Ffangdengfu123%2Farticle%2Fdetails%2F80579966%2C%26quot%3B%7D%22%3E%E7%99%BB%E5%BD%95%E5%90%8E%E8%87%AA%E5%8A%A8%E5%B1%95%E5%BC%80%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}