---
layout: default
title: Openzeppelin库第二期：Math库详解
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-f76675cdea.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cul%3E%0A+++%3Cli%3ESafeMath.sol%3A%26nbsp%3B+%26nbsp%3B%E5%AE%89%E5%85%A8%E8%BF%90%E7%AE%97%3C%2Fli%3E+%0A+++%3Cli%3EMath.sol%3A%26nbsp%3B+%26nbsp%3Buint256%E4%B8%8Euint64%E7%9A%84%E6%9C%80%E5%80%BC%E8%8E%B7%E5%8F%96%3C%2Fli%3E+%0A++%3C%2Ful%3E%0A++%3Cp%3Emath.sol%EF%BC%9A%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-javascript%22%3Epragma+solidity+%5E0.4.24%3B%0A%0A%0A%2F**%0A+*+%40title+Math%0A+*+%40dev+Assorted+math+operations%0A+*%2F%0Alibrary+Math+%7B%0A++%2F%2F+%E5%8F%96%E6%9C%80%E5%A4%A7%E5%80%BC%0A++function+max64%28uint64+_a%2C+uint64+_b%29+internal+pure+returns+%28uint64%29+%7B%0A++++return+_a+%26gt%3B%3D+_b+%3F+_a+%3A+_b%3B%0A++%7D%0A++%2F%2F+%E5%8F%96%E6%9C%80%E5%B0%8F%E5%80%BC%0A++function+min64%28uint64+_a%2C+uint64+_b%29+internal+pure+returns+%28uint64%29+%7B%0A++++return+_a+%26lt%3B+_b+%3F+_a+%3A+_b%3B+%2F%2F+%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6%0A++%7D%0A%0A++function+max256%28uint256+_a%2C+uint256+_b%29+internal+pure+returns+%28uint256%29+%7B%0A++++return+_a+%26gt%3B%3D+_b+%3F+_a+%3A+_b%3B%0A++%7D%0A%0A++function+min256%28uint256+_a%2C+uint256+_b%29+internal+pure+returns+%28uint256%29+%7B%0A++++return+_a+%26lt%3B+_b+%3F+_a+%3A+_b%3B%0A++%7D%0A%7D%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp+style%3D%22margin-left%3A0pt%3B%22%3ESafeMath.sol%EF%BC%9A%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-javascript%22%3Epragma+solidity+%5E0.4.24%3B%0A%0A%0A%2F**%0A+*+%40title+SafeMath%0A+*+%40dev+Math+operations+with+safety+checks+that+throw+on+error%0A+*%2F%0A+%2F%2F+%E5%AE%89%E5%85%A8%E7%9A%84%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97%E5%BA%93%0Alibrary+SafeMath+%7B%0A%0A++%2F**%0A++*+%40dev+Multiplies+two+numbers%2C+throws+on+overflow.%0A++*%2F%0A++%0A++function+mul%28uint256+_a%2C+uint256+_b%29+internal+pure+returns+%28uint256+c%29+%7B%0A++++%2F%2F+Gas+optimization%3A+this+is+cheaper+than+asserting+%27a%27+not+being+zero%2C+but+the%0A++++%2F%2F+benefit+is+lost+if+%27b%27+is+also+tested.%0A++++%2F%2F+See%3A+https%3A%2F%2Fgithub.com%2FOpenZeppelin%2Fopenzeppelin-solidity%2Fpull%2F522%0A++++if+%28_a+%3D%3D+0%29+%7B+%2F%2F%E4%BC%98%E5%8C%96gas%E6%B6%88%E8%80%97%EF%BC%8C%E8%8A%82%E7%9C%81gas%0A++++++return+0%3B%0A++++%7D%0A%0A++++c+%3D+_a+*+_b%3B%0A++++assert%28c+%2F+_a+%3D%3D+_b%29%3B+%2F%2F+%E5%AE%89%E5%85%A8%E6%A3%80%E6%9F%A5%0A++++return+c%3B%0A++%7D%0A%0A++%2F**%0A++*+%40dev+Integer+division+of+two+numbers%2C+truncating+the+quotient.%0A++*%2F%0A++function+div%28uint256+_a%2C+uint256+_b%29+internal+pure+returns+%28uint256%29+%7B%0A++++%2F%2F+assert%28_b+%26gt%3B+0%29%3B+%2F%2F+Solidity+automatically+throws+when+dividing+by+0%0A++++%2F%2F+uint256+c+%3D+_a+%2F+_b%3B%0A++++%2F%2F+assert%28_a+%3D%3D+_b+*+c+%2B+_a+%25+_b%29%3B+%2F%2F+There+is+no+case+in+which+this+doesn%27t+hold%0A++++return+_a+%2F+_b%3B%0A++%7D%0A%0A++%2F**%0A++*+%40dev+Subtracts+two+numbers%2C+throws+on+overflow+%28i.e.+if+subtrahend+is+greater+than+minuend%29.%0A++*%2F%0A++function+sub%28uint256+_a%2C+uint256+_b%29+internal+pure+returns+%28uint256%29+%7B%0A++++assert%28_b+%26lt%3B%3D+_a%29%3B+%2F%2F+%E5%88%A4%E6%96%AD+a+%E4%B8%8D%E8%83%BD%E5%B0%8F%E4%BA%8E+b%0A++++return+_a+-+_b%3B%0A++%7D%0A%0A++%2F**%0A++*+%40dev+Adds+two+numbers%2C+throws+on+overflow.%0A++*%2F%0A++function+add%28uint256+_a%2C+uint256+_b%29+internal+pure+returns+%28uint256+c%29+%7B%0A++++c+%3D+_a+%2B+_b%3B%0A++++assert%28c+%26gt%3B%3D+_a%29%3B%0A++++return+c%3B%0A++%7D%0A%7D%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fsuper_lixiang%2Farticle%2Fdetails%2F83241443%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fsuper_lixiang%2Farticle%2Fdetails%2F83241443%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E+%0A%3Cscript%3E%0A%09%09%09%09%09%09%28function%28%29%7B%0A%09%09%09%09%09%09%09function+setArticleH%28btnReadmore%2Cposi%29%7B%0A%09%09%09%09%09%09%09%09var+winH+%3D+%24%28window%29.height%28%29%3B%0A%09%09%09%09%09%09%09%09var+articleBox+%3D+%24%28%22div.article_content%22%29%3B%0A%09%09%09%09%09%09%09%09var+artH+%3D+articleBox.height%28%29%3B%0A%09%09%09%09%09%09%09%09if%28artH+%3E+winH*posi%29%7B%0A%09%09%09%09%09%09%09%09%09articleBox.css%28%7B%0A%09%09%09%09%09%09%09%09%09%09%27height%27%3AwinH*posi%2B%27px%27%2C%0A%09%09%09%09%09%09%09%09%09%09%27overflow%27%3A%27hidden%27%0A%09%09%09%09%09%09%09%09%09%7D%29%0A%09%09%09%09%09%09%09%09%09btnReadmore.click%28function%28%29%7B%0A%09%09%09%09%09%09%09%09%09%09articleBox.removeAttr%28%22style%22%29%3B%0A%09%09%09%09%09%09%09%09%09%09%24%28this%29.parent%28%29.remove%28%29%3B%0A%09%09%09%09%09%09%09%09%09%7D%29%0A%09%09%09%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09%09%09%09btnReadmore.parent%28%29.remove%28%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09var+btnReadmore+%3D+%24%28%22%23btn-readmore%22%29%3B%0A%09%09%09%09%09%09%09if%28btnReadmore.length%3E0%29%7B%0A%09%09%09%09%09%09%09%09if%28currentUserName%29%7B%0A%09%09%09%09%09%09%09%09%09setArticleH%28btnReadmore%2C3%29%3B%0A%09%09%09%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09%09%09%09setArticleH%28btnReadmore%2C1.2%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%28%29%0A%09%09%09%09%09%3C%2Fscript%3E" | url_decode}}