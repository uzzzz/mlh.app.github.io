---
layout: default
title: gRPC远程过程调用之golang
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Cdiv+class%3D%22article-copyright%22%3E%0A+++%E7%89%88%E6%9D%83%E5%A3%B0%E6%98%8E%EF%BC%9A%E6%9C%AC%E4%BD%9C%E5%93%81%E9%87%87%E7%94%A8%E7%9F%A5%E8%AF%86%E5%85%B1%E4%BA%AB%E7%BD%B2%E5%90%8D-%E9%9D%9E%E5%95%86%E4%B8%9A%E6%80%A7%E4%BD%BF%E7%94%A8-%E7%9B%B8%E5%90%8C%E6%96%B9%E5%BC%8F%E5%85%B1%E4%BA%AB+4.0+%E5%9B%BD%E9%99%85%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE%E8%BF%9B%E8%A1%8C%E8%AE%B8%E5%8F%AF%E3%80%82%E8%BD%AC%E8%BD%BD%E6%97%B6%E8%AF%B7%E6%A0%87%E6%B3%A8http%3A%2F%2Fblog.csdn.net%2Fmarksinoberg.+https%3A%2F%2Fblog.csdn.net%2FMarksinoberg%2Farticle%2Fdetails%2F83049028+%0A+%3C%2Fdiv%3E+%0A+%3Cdiv+class%3D%22markdown_views+prism-atom-one-dark%22%3E+%0A++%3C%21--+flowchart+%E7%AE%AD%E5%A4%B4%E5%9B%BE%E6%A0%87+%E5%8B%BF%E5%88%A0+--%3E+%0A++%3Csvg+xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22+style%3D%22display%3A+none%3B%22%3E%0A+++%3Cpath+stroke-linecap%3D%22round%22+d%3D%22M5%2C0+0%2C2.5+5%2C5z%22+id%3D%22raphael-marker-block%22+style%3D%22-webkit-tap-highlight-color%3A+rgba%280%2C+0%2C+0%2C+0%29%3B%22%3E%3C%2Fpath%3E%0A++%3C%2Fsvg%3E+%0A++%3Cp%3EgRPC%E6%98%AFGoogle%E5%87%BA%E5%93%81%EF%BC%8C%E6%94%AF%E6%8C%81%E5%A4%9A%E7%A7%8D%E8%AF%AD%E8%A8%80%EF%BC%8C%E4%BD%86%E6%98%AF%E5%9B%BD%E5%86%85%E5%AE%89%E8%A3%85%E4%BC%9A%E6%9C%89%E7%82%B9%E9%97%AE%E9%A2%98%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%95%B4%E7%90%86%E4%B8%80%E4%B8%8B%EF%BC%8C%E6%96%B9%E4%BE%BF%E4%BB%8A%E5%90%8E%E9%85%8D%E7%8E%AF%E5%A2%83%E7%9A%84%E5%A4%8D%E4%B9%A0%E3%80%82%3C%2Fp%3E+%0A++%3Ch2%3E%3Ca+id%3D%22grpc_2%22%3E%3C%2Fa%3E%E5%AE%89%E8%A3%85grpc%3C%2Fh2%3E+%0A++%3Cpre%3E%3Ccode%3Ego+get+google.golang.org%2Fgrpc%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E7%BB%93%E6%9E%9C%E5%87%BA%E7%8E%B0%E4%BA%86%E5%A6%82%E4%B8%8B%E9%94%99%E8%AF%AF%EF%BC%9A%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3Epackage+google.golang.org%2Fgrpc%3A+unrecognized+import+path+%22google.golang.org%2Fgrpc%22%28https+fetch%3A+Get+https%3A%2F%2Fgoogle.golang.org%2Fgrpc%3Fgo-get%3D1%3A+dial+tcp+216.239.37.1%3A443%3A+i%2Fo+timeout%29%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E5%8F%82%E8%80%83+%3Ca+href%3D%22https%3A%2F%2Fblog.csdn.net%2Fcjj198561%2Farticle%2Fdetails%2F78133193%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fblog.csdn.net%2Fcjj198561%2Farticle%2Fdetails%2F78133193%3C%2Fa%3E+%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%A6%82%E4%B8%8B%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%E3%80%82%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3Egit+clone+https%3A%2F%2Fgithub.com%2Fgrpc%2Fgrpc-go.git+%24GOPATH%2Fsrc%2Fgoogle.golang.org%2Fgrpc%0Agit+clone+https%3A%2F%2Fgithub.com%2Fgolang%2Fnet.git+%24GOPATH%2Fsrc%2Fgolang.org%2Fx%2Fnet%0Agit+clone+https%3A%2F%2Fgithub.com%2Fgolang%2Ftext.git+%24GOPATH%2Fsrc%2Fgolang.org%2Fx%2Ftext%0Ago+get+-u+github.com%2Fgolang%2Fprotobuf%2F%7Bproto%2Cprotoc-gen-go%7D%0Agit+clone+https%3A%2F%2Fgithub.com%2Fgoogle%2Fgo-genproto.git+%24GOPATH%2Fsrc%2Fgoogle.golang.org%2Fgenproto%0A+%0Acd+%24GOPATH%2Fsrc%2F%0Ago+install+google.golang.org%2Fgrpc%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch2%3E%3Ca+id%3D%22protocal_buffer_compiler_26%22%3E%3C%2Fa%3E%E5%AE%89%E8%A3%85protocal+buffer+compiler%3C%2Fh2%3E+%0A++%3Cpre%3E%3Ccode%3Ehttps%3A%2F%2Fgithub.com%2Fgoogle%2Fprotobuf%2Freleases%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E4%B8%8B%E8%BD%BD%E5%90%8E%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%EF%BC%8C%E5%9B%BA%E5%AE%9A%E5%A5%97%E8%B7%AF%E4%B8%BA%EF%BC%9A%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3Etar+-zxvf+xxxx.tar.gz%0Acd+xxxx%2F%0A.%2Fconfigure%0Amake%0Amake+install%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E6%BC%AB%E9%95%BF%E7%AD%89%E5%BE%85%E5%90%8E%EF%BC%8C%E5%B0%B1%E5%AE%8C%E4%BA%8B%E4%BA%86%E3%80%82%E4%B8%8D%E8%BF%87%E8%BF%99%E6%AC%A1%E8%BF%98%E6%B2%A1%E5%AE%8C%EF%BC%8C%E5%A5%BD%E5%83%8F%E6%98%AF%E9%9C%80%E8%A6%81%E5%B0%86%E4%B8%80%E4%B8%AA%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%8A%A0%E5%88%B0path%E4%B8%AD%E3%80%82%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3Eexport+LD_LIBRARY_PATH%3D%2Fusr%2Flocal%2Flib%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch2%3E%3Ca+id%3D%22proto_47%22%3E%3C%2Fa%3E%E5%88%9B%E5%BB%BAproto%E6%96%87%E4%BB%B6%3C%2Fh2%3E+%0A++%3Cp%3E%3Ccode%3Ehelloworld.proto%3C%2Fcode%3E+%E6%94%BE%E5%88%B0+%3Ccode%3E%24GOPATH%2Fsrc%2Fhelloworld%3C%2Fcode%3E+%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%8C%E6%96%B9%E4%BE%BF%E8%87%AA%E5%B7%B1%E5%BE%85%E4%BC%9A%E7%9A%84%E5%BC%95%E7%94%A8%E3%80%82%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3Esyntax+%3D+%22proto3%22%3B%0A%0Apackage+grpcusage%3B%0A%0Aservice+Hello+%7B%0A++++rpc+SayHello+%28HelloRequest%29+returns+%28HelloReply%29+%7B%7D%0A%7D%0A%0Amessage+HelloRequest+%7B%0A++++string+Name+%3D+1%3B%0A%7D%0A%0Amessage+HelloReply+%7B%0A++++string+Message+%3D+1%3B%0A%7D%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E7%84%B6%E5%90%8E%E9%80%9A%E8%BF%87protoc+%E6%A0%B9%E6%8D%AE%E6%AD%A4%E6%A8%A1%E6%9D%BF%E6%9D%A5%E7%94%9F%E6%88%90%E5%AF%B9%E5%BA%94%E7%9A%84golang%E7%9A%84grpc%E4%BB%A3%E7%A0%81%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3E%23%E6%A0%BC%E5%BC%8F+protoc+--go_out%3Dplugins%3Dgrpc%3A%7Bgo%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E8%B7%AF%E5%BE%84%7D+%7Bproto%E6%96%87%E4%BB%B6%7D%0Aprotoc+--go_out%3Dplugins%3Dgrpc%3A.%2F+.%2Fhelloworld.proto%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch2%3E%3Ca+id%3D%22gRPC_75%22%3E%3C%2Fa%3EgRPC%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%3C%2Fh2%3E+%0A++%3Ch3%3E%3Ca+id%3D%22servergo_77%22%3E%3C%2Fa%3Eserver.go%3C%2Fh3%3E+%0A++%3Cpre%3E%3Ccode%3Epackage+main%0A%0Aimport+%28%0A%09%22golang.org%2Fx%2Fnet%2Fcontext%22%0A%09pb+%22helloworld%22%0A%0A%09%22net%22%0A%09%22log%22%0A%09%22google.golang.org%2Fgrpc%22%0A%09%22fmt%22%0A%29%0A%0Aconst+%28%0A%09port+%3D+%22%3A50051%22%0A%29%0A%0Atype+Server+struct+%7B%7D%0A%0Afunc+%28s+*Server%29+SayHello%28ctx+context.Context%2C+in+*pb.HelloRequest%29+%28*pb.HelloReply%2C+error%29+%7B%0A%09return+%26amp%3Bpb.HelloReply%7B%0A%09%09Message%3A+%22hello+%22+%2B+in.Name%2C%0A%09%7D%2C+nil%0A%7D%0A%0Afunc+main%28%29+%7B%0A%09conn%2C+err+%3A%3D+net.Listen%28%22tcp%22%2C+port%29%0A%09if+err+%21%3D+nil+%7B%0A%09%09log.Fatal%28err%29%0A%09%7D%0A%09fmt.Println%28%22grpc+server+listening+at%3A+50051+port%22%29%0A%09server+%3A%3D+grpc.NewServer%28%29%0A%09pb.RegisterHelloServer%28server%2C+%26amp%3BServer%7B%7D%29%0A%09server.Serve%28conn%29%0A%7D%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch3%3E%3Ca+id%3D%22clientgo_117%22%3E%3C%2Fa%3Eclient.go%3C%2Fh3%3E+%0A++%3Cpre%3E%3Ccode%3Epackage+main%0A%0Aimport+%28%0A%09%22google.golang.org%2Fgrpc%22%0A%09%22log%22%0A%09pb+%22helloworld%22%0A%09%22os%22%0A%09%22context%22%0A%09%09%22fmt%22%0A%29%0A%0Aconst+%28%0A%09address+%3D+%22localhost%3A50051%22%0A%09defaultName+%3D+%22%E9%83%AD%E7%92%9E%22%0A%29%0A%0Afunc+main%28%29++%7B%0A%09conn%2C+err+%3A%3D+grpc.Dial%28address%2C+grpc.WithInsecure%28%29%29%0A%09if+err+%21%3D+nil+%7B%0A%09%09log.Fatal%28err%29%0A%09%7D%0A%09defer+conn.Close%28%29%0A%09client+%3A%3D+pb.NewHelloClient%28conn%29%0A%0A%09name+%3A%3D+defaultName%0A%09if+len%28os.Args%29+%26gt%3B+1+%7B%0A%09%09name+%3D+os.Args%5B1%5D%0A%09%7D%0A%09request%2C+err+%3A%3D+client.SayHello%28context.Background%28%29%2C+%26amp%3Bpb.HelloRequest%7BName%3Aname%7D%29%0A%09if+err+%21%3D+nil+%7B%0A%09%09log.Fatal%28err%29%0A%09%7D%0A%09fmt.Println%28request.Message%29%0A%7D%0A%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch3%3E%3Ca+id%3D%22_157%22%3E%3C%2Fa%3E%E6%B5%8B%E8%AF%95%E6%9C%8D%E5%8A%A1%3C%2Fh3%3E+%0A++%3Cp%3E%E5%90%AF%E5%8A%A8server%E7%AB%AF%E7%A8%8B%E5%BA%8F%E3%80%82%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3E%E2%9E%9C++grpcusage+go+run+server.go%0Agrpc+server+listening+at%3A+50051+port%0A%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E5%90%AF%E5%8A%A8client%E7%A8%8B%E5%BA%8F%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode%3E%E2%9E%9C++client+go+run+client.go%0Ahello+%E9%83%AD%E7%92%9E%0A%E2%9E%9C++client%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E5%A6%82%E6%AD%A4%E4%BE%BF%E5%AE%9E%E7%8E%B0%E4%BA%86grpc%E5%9C%A8golang%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%9A%82%E4%B8%94%E8%AE%B0%E5%BD%95%E4%B8%8B%EF%BC%8C%E4%BB%A5%E5%A4%87%E4%B8%8D%E6%97%B6%E4%B9%8B%E9%9C%80%E3%80%82%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A+%3Clink+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Fmdeditor%2Fmarkdown_views-7f770a53f2.css%22+rel%3D%22stylesheet%22%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2FMarksinoberg%2Farticle%2Fdetails%2F83049028%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2FMarksinoberg%2Farticle%2Fdetails%2F83049028%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E+%0A%3Cscript%3E%0A%09%09%09%09%09%09%28function%28%29%7B%0A%09%09%09%09%09%09%09function+setArticleH%28btnReadmore%2Cposi%29%7B%0A%09%09%09%09%09%09%09%09var+winH+%3D+%24%28window%29.height%28%29%3B%0A%09%09%09%09%09%09%09%09var+articleBox+%3D+%24%28%22div.article_content%22%29%3B%0A%09%09%09%09%09%09%09%09var+artH+%3D+articleBox.height%28%29%3B%0A%09%09%09%09%09%09%09%09if%28artH+%3E+winH*posi%29%7B%0A%09%09%09%09%09%09%09%09%09articleBox.css%28%7B%0A%09%09%09%09%09%09%09%09%09%09%27height%27%3AwinH*posi%2B%27px%27%2C%0A%09%09%09%09%09%09%09%09%09%09%27overflow%27%3A%27hidden%27%0A%09%09%09%09%09%09%09%09%09%7D%29%0A%09%09%09%09%09%09%09%09%09btnReadmore.click%28function%28%29%7B%0A%09%09%09%09%09%09%09%09%09%09articleBox.removeAttr%28%22style%22%29%3B%0A%09%09%09%09%09%09%09%09%09%09%24%28this%29.parent%28%29.remove%28%29%3B%0A%09%09%09%09%09%09%09%09%09%7D%29%0A%09%09%09%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09%09%09%09btnReadmore.parent%28%29.remove%28%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09var+btnReadmore+%3D+%24%28%22%23btn-readmore%22%29%3B%0A%09%09%09%09%09%09%09if%28btnReadmore.length%3E0%29%7B%0A%09%09%09%09%09%09%09%09if%28currentUserName%29%7B%0A%09%09%09%09%09%09%09%09%09setArticleH%28btnReadmore%2C3%29%3B%0A%09%09%09%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09%09%09%09setArticleH%28btnReadmore%2C1.2%29%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%28%29%0A%09%09%09%09%09%3C%2Fscript%3E" | url_decode}}