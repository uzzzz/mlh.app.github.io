---
layout: default
title: 朴素贝叶斯法(2) 之 恶意留言过滤
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-f57960eb32.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22+id%3D%22content_views%22%3E+%0A++%3Cdiv+class%3D%22show-content-free%22%3E+%0A+++%3Cblockquote%3E+%0A++++%3Cp%3E%E6%90%BA%E7%A8%8B%E7%AC%94%E8%AF%95%E7%9A%84%E6%97%B6%E5%80%99%E7%A2%B0%E5%88%B0%E4%BA%86%E8%BF%99%E4%B8%AA%E9%A2%98%E7%9B%AE%EF%BC%8C%E5%BD%93%E6%97%B6%E5%85%B6%E5%AE%9E%E6%B2%A1%E5%A4%9A%E6%83%B3%E3%80%82%E8%B4%9D%E5%8F%B6%E6%96%AF%E8%BF%99%E4%B8%AA%E8%B7%AF%E5%AD%90%E6%80%95%E4%B9%9F%E5%A4%AA%E8%BF%87%E6%B0%94%E4%BA%86%E5%90%A7...+%E6%90%BA%E7%A8%8B%E4%B9%9F%E7%9C%9F%E6%98%AF...%3C%2Fp%3E+%0A+++%3C%2Fblockquote%3E+%0A+++%3Ch1%3E%E5%9B%9E%E9%A1%BE%E6%80%9D%E8%B7%AF%3C%2Fh1%3E+%0A+++%3Cul%3E%0A++++%3Cli%3E%E8%AE%A1%E7%AE%97%E5%85%88%E9%AA%8C%E6%A6%82%E7%8E%87%3C%2Fli%3E+%0A++++%3Cli%3E%E8%AE%A1%E7%AE%97%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87%3C%2Fli%3E+%0A++++%3Cli%3E%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%88%AB%E6%A6%82%E7%8E%87%E4%BC%B0%E8%AE%A1%3C%2Fli%3E+%0A+++%3C%2Ful%3E%0A+++%3Ch1%3E%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E9%9B%86%3C%2Fh1%3E+%0A+++%3Cdiv+class%3D%22image-package%22%3E+%0A++++%3Cdiv+class%3D%22image-container%22%3E+%0A+++++%3Cdiv+class%3D%22image-container-fill%22%3E%3C%2Fdiv%3E+%0A+++++%3Cdiv+class%3D%22image-view%22%3E%0A++++++%3Cimg+src%3D%22https%3A%2F%2Fupload-images.jianshu.io%2Fupload_images%2F3326314-42fc8062827f7e59.png%22+alt%3D%223326314-42fc8062827f7e59.png%22%3E%0A+++++%3C%2Fdiv%3E+%0A++++%3C%2Fdiv%3E+%0A++++%3Cdiv+class%3D%22image-caption%22%3E%0A+++++image%0A++++%3C%2Fdiv%3E+%0A+++%3C%2Fdiv%3E+%0A+++%3Ch1%3E%E4%BB%A3%E7%A0%81%3C%2Fh1%3E+%0A+++%3Ch2%3E%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86%3C%2Fh2%3E+%0A+++%3Cpre%3E%3Ccode%3Eimport+numpy+as+np%0A%0Adef+loadDataSet%28%29%3A%0A++++postingList%3D%5B%5B%27my%27%2C+%27dog%27%2C+%27has%27%2C+%27flea%27%2C+%27problems%27%2C+%27help%27%2C+%27please%27%5D%2C%0A+++++++++++++++++%5B%27maybe%27%2C+%27not%27%2C+%27take%27%2C+%27him%27%2C+%27to%27%2C+%27dog%27%2C+%27park%27%2C+%27stupid%27%5D%2C%0A+++++++++++++++++%5B%27my%27%2C+%27dalmation%27%2C+%27is%27%2C+%27so%27%2C+%27cute%27%2C+%27I%27%2C+%27love%27%2C+%27him%27%5D%2C%0A+++++++++++++++++%5B%27stop%27%2C+%27posting%27%2C+%27stupid%27%2C+%27worthless%27%2C+%27garbage%27%5D%2C%0A+++++++++++++++++%5B%27mr%27%2C+%27licks%27%2C+%27ate%27%2C+%27my%27%2C+%27steak%27%2C+%27how%27%2C+%27to%27%2C+%27stop%27%2C+%27him%27%5D%2C%0A+++++++++++++++++%5B%27quit%27%2C+%27buying%27%2C+%27worthless%27%2C+%27dog%27%2C+%27food%27%2C+%27stupid%27%5D%5D%0A++++classVec+%3D+%5B0%2C1%2C0%2C1%2C0%2C1%5D++++%231+is+abusive%2C+0+not%0A++++return+postingList%2CclassVec%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A+++%3Cp%3E%E8%BF%99%E9%87%8C%E7%B1%BB%E5%88%AB%E4%B8%BA%E4%B8%A4%E7%B1%BB%EF%BC%8C1-%E6%81%B6%E6%84%8F%E7%95%99%E8%A8%80%EF%BC%9B0-%E9%9D%9E%E6%81%B6%E6%84%8F%E7%95%99%E8%A8%80%E3%80%82%3C%2Fp%3E+%0A+++%3Ch2%3Evocab%3C%2Fh2%3E+%0A+++%3Cpre%3E%3Ccode%3Edef+getVocabList%28dataSet%29%3A%0A++++vocab+%3D+%7B%7D%0A++++vocab_reverse+%3D+%7B%7D%0A++++index+%3D+0%0A++++for+line+in+dataSet%3A%0A++++++++for+word+in+line%3A%0A++++++++++++if+word+not+in+vocab%3A%0A++++++++++++++++vocab%5Bword%5D+%3D+index%0A++++++++++++++++vocab_reverse%5Bindex%5D+%3D+word%0A++++++++++++++++index+%2B%3D+1%0A++++return+vocab%2Cvocab_reverse%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A+++%3Ch2%3E%E5%85%88%E9%AA%8C%E6%A6%82%E7%8E%87%E4%B8%8E%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87%3C%2Fh2%3E+%0A+++%3Cpre%3E%3Ccode%3Edef+native_bayes%28vocab%2CpostingList%2CclassVec%29%3A%0A++++%23+%E5%85%88%E9%AA%8C%E6%A6%82%E7%8E%87%0A++++label+%3D+%5B0%2C1%5D%0A++++label_num+%3D+len%28label%29%0A++++vocab_len+%3D+len%28vocab%29%0A%0A++++prior_probability+%3D+np.ones%28label_num%29+++++++++++++++++++++%23+%E5%88%9D%E5%A7%8B%E5%8C%96%E5%85%88%E9%AA%8C%E6%A6%82%E7%8E%87%0A++++conditional_probability+%3D+np.ones%28%28label_num%2Cvocab_len%29%29+++%23+%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87%0A++++postingList_ids+%3D+%5B%5Bvocab%5Bword%5D+for+word+in+line%5Dfor+line+in+postingList%5D%0A++++%23+%E9%BB%98%E8%AE%A4N%E4%B8%BA2%2C%0A++++p_n+%3D+np.array%28%5B2%2C2%5D%29%0A%0A++++for+i+in+range%28len%28postingList_ids%29%29%3A%0A++++++++for+word+in+postingList_ids%5Bi%5D%3A%0A++++++++++++conditional_probability%5BclassVec%5Bi%5D%5D%5Bword%5D%2B%3D1%0A++++++++++++p_n%5BclassVec%5Bi%5D%5D+%2B%3D+1%0A%0A++++%23+%E6%9D%A1%E4%BB%B6%E6%A6%82%E7%8E%87%0A++++conditional_probability%5B0%5D+%2F%3D+p_n%5B0%5D++%0A++++conditional_probability%5B1%5D+%2F%3D+p_n%5B1%5D++%0A%0A++++%23+%E5%85%88%E9%AA%8C%E6%A6%82%E7%8E%87%0A++++all_N+%3D+sum%28p_n%29%0A++++p_n+%3D+p_n%2Fall_N%0A++++return+p_n%2Cconditional_probability%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A+++%3Ch2%3Eargmax+%E5%88%A4%E6%96%AD%3C%2Fh2%3E+%0A+++%3Cpre%3E%3Ccode%3Edef+judge%28testEntry%29%3A%0A++++postingList%2CclassVec+%3D+loadDataSet%28%29%0A++++vocab%2Cvocab_reverse+%3D+getVocabList%28postingList%29%0A++++p_n%2Cconditional_probability+%3D+native_bayes%28vocab%2CpostingList%2CclassVec%29%0A++++Ans_p+%3D+p_n%0A++++%0A++++testEntry_ids+%3D+%5Bvocab%5Bword%5D+for+word+in+testEntry%5D%0A++++for+num+in+testEntry_ids%3A%0A++++++++Ans_p%5B0%5D+*%3D+conditional_probability%5B0%5D%5Bnum%5D%0A++++++++Ans_p%5B1%5D+*%3D+conditional_probability%5B1%5D%5Bnum%5D%0A++++return+np.argmax%28Ans_p%29%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A+++%3Ch2%3E%E8%B0%83%E7%94%A8%3C%2Fh2%3E+%0A+++%3Cpre%3E%3Ccode%3Ejudge%28testEntry+%3D+%5B%27stupid%27%2C+%27garbage%27%5D%29%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A+++%3Cp%3E%E8%BE%93%E5%87%BA+%3Ccode%3E1%3C%2Fcode%3E%EF%BC%8C%E5%92%8C%E6%88%91%E4%BB%AC%E9%A2%84%E6%9C%9F%E7%9A%84%E4%B8%80%E6%A0%B7%E3%80%82%3C%2Fp%3E+%0A++%3C%2Fdiv%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E" | url_decode}}