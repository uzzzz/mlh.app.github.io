---
layout: default
title: 【比特币】创世块-GenesisBlock
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cpre%3E%3Ccode+class%3D%22language-cpp%22%3E%2F%2F+HarryWu%2C+generate+genesis+block+by+genesis.py+as+following%3A%0A%2F%2F%0A%2F%2F+genesis+%23+python+genesis.py+%5C%0A%2F%2F+%26nbsp%3B+-t+%24%28date+%2B%25s%29+%5C%0A%2F%2F+%26nbsp%3B+-z+%22shanghai+stock+index+closed+at+2343.57%2C+on+24th+Sept.%2C+2014%22+%5C%0A%2F%2F+%26nbsp%3B+-a+SHA256+%5C%0A%2F%2F+%26nbsp%3B+-p+049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc+%5C%0A%2F%2F+%26nbsp%3B+-v+10000000000%0A%2F%2F%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-cpp%22%3E%0A%2F%2F+Raw+block+data%3A+04%3F%3F%3F%3F%3F%3F%3F%3F%0A%0A%0A%2F%2F+algorithm%3A+SHA256%0A%0A%0A%2F%2F+merkle+hash%3A+7bf229f629a6666596c1ce57117c28d1d29299e8a5303347929bd70847c49adb%0A%0A%0A%2F%2F+pszTimestamp%3A+shanghai+stock+index+closed+at+2343.57%2C+on+24th+Sept.%2C+2014%0A%0A%0A%2F%2F+pubkey%3A+049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc%0A%0A%0A%2F%2F+time%3A+1411666331%0A%0A%0A%2F%2F+bits%3A+0x1d00ffff%0A%0A%0A%2F%2F+Searching+for+genesis+hash..%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-cpp%22%3E%2F%2F%0A%2F%2F+nonce%3A+2056985438%0A%2F%2F+genesis+hash%3A+0000000061b1aca334b059920fed7bace2336ea4d23d63428c7aee04da49e942%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%3Cbr%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Ca+href%3D%22https%3A%2F%2Fraw.githubusercontent.com%2Flhartikk%2FGenesisH0%2Fmaster%2Fgenesis.py%22+rel%3D%22nofollow%22%3E%E8%84%9A%E6%9C%AC%E6%BA%90%E4%BB%A3%E7%A0%81%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cpre%3E%3Ccode+class%3D%22language-python%22%3E%26lt%3Bpre%26gt%3Bimport+hashlib%2C+binascii%2C+struct%2C+array%2C+os%2C+time%2C+sys%2C+optparse%0Aimport+scrypt%0A%0Afrom+construct+import+*%0A%0A%0Adef+main%28%29%3A%0A++options+%3D+get_args%28%29%0A%0A++algorithm+%3D+get_algorithm%28options%29%0A%0A++%23+https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FDifficulty%0A++bits%2C+target+++%3D+get_difficulty%28algorithm%29%0A%0A++input_script++%3D+create_input_script%28options.timestamp%29%0A++output_script+%3D+create_output_script%28options.pubkey%29%0A++%23+hash+merkle+root+is+the+double+sha256+hash+of+the+transaction%28s%29+%0A++tx+%3D+create_transaction%28input_script%2C+output_script%2Coptions%29%0A++hash_merkle_root+%3D+hashlib.sha256%28hashlib.sha256%28tx%29.digest%28%29%29.digest%28%29%0A++print_block_info%28options%2C+hash_merkle_root%2C+bits%29%0A%0A++block_header++++++++%3D+create_block_header%28hash_merkle_root%2C+options.time%2C+bits%2C+options.nonce%29%0A++genesis_hash%2C+nonce+%3D+generate_hash%28block_header%2C+algorithm%2C+options.nonce%2C+target%29%0A++announce_found_genesis%28genesis_hash%2C+nonce%29%0A%0A%0Adef+get_args%28%29%3A%0A++parser+%3D+optparse.OptionParser%28%29%0A++parser.add_option%28%22-t%22%2C+%22--time%22%2C+dest%3D%22time%22%2C+default%3Dint%28time.time%28%29%29%2C+%0A+++++++++++++++++++type%3D%22int%22%2C+help%3D%22the+%28unix%29+time+when+the+genesisblock+is+created%22%29%0A++parser.add_option%28%22-z%22%2C+%22--timestamp%22%2C+dest%3D%22timestamp%22%2C+default%3D%22The+Times+03%2FJan%2F2009+Chancellor+on+brink+of+second+bailout+for+banks%22%2C%0A+++++++++++++++++++type%3D%22string%22%2C+help%3D%22the+pszTimestamp+found+in+the+coinbase+of+the+genesisblock%22%29%0A++parser.add_option%28%22-n%22%2C+%22--nonce%22%2C+dest%3D%22nonce%22%2C+default%3D0%2C%0A+++++++++++++++++++type%3D%22int%22%2C+help%3D%22the+first+value+of+the+nonce+that+will+be+incremented+when+searching+the+genesis+hash%22%29%0A++parser.add_option%28%22-a%22%2C+%22--algorithm%22%2C+dest%3D%22algorithm%22%2C+default%3D%22SHA256%22%2C%0A++++++++++++++++++++help%3D%22the+PoW+algorithm%3A+%5BSHA256%7Cscrypt%7CX11%7CX13%7CX15%5D%22%29%0A++parser.add_option%28%22-p%22%2C+%22--pubkey%22%2C+dest%3D%22pubkey%22%2C+default%3D%2204678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5f%22%2C%0A+++++++++++++++++++type%3D%22string%22%2C+help%3D%22the+pubkey+found+in+the+output+script%22%29%0A++parser.add_option%28%22-v%22%2C+%22--value%22%2C+dest%3D%22value%22%2C+default%3D5000000000%2C%0A+++++++++++++++++++type%3D%22int%22%2C+help%3D%22the+value+in+coins+for+the+output%2C+full+value+%28exp.+in+bitcoin+5000000000+-+To+get+other+coins+value%3A+Block+Value+*+100000000%29%22%29%0A%0A++%28options%2C+args%29+%3D+parser.parse_args%28%29%0A++return+options%0A%0Adef+get_algorithm%28options%29%3A%0A++supported_algorithms+%3D+%5B%22SHA256%22%2C+%22scrypt%22%2C+%22X11%22%2C+%22X13%22%2C+%22X15%22%5D%0A++if+options.algorithm+in+supported_algorithms%3A%0A++++return+options.algorithm%0A++else%3A%0A++++sys.exit%28%22Error%3A+Given+algorithm+must+be+one+of%3A+%22+%2B+str%28supported_algorithms%29%29%0A%0Adef+get_difficulty%28algorithm%29%3A%0A++if+algorithm+%3D%3D+%22scrypt%22%3A%0A++++return+0x1e0ffff0%2C+0x0ffff0+*+2**%288*%280x1e+-+3%29%29%0A++elif+algorithm+%3D%3D+%22SHA256%22%3A%0A++++return+0x1d00ffff%2C+0x00ffff+*+2**%288*%280x1d+-+3%29%29+%0A++elif+algorithm+%3D%3D+%22X11%22+or+algorithm+%3D%3D+%22X13%22+or+algorithm+%3D%3D+%22X15%22%3A%0A++++return+0x1e0ffff0%2C+0x0ffff0+*+2**%288*%280x1e+-+3%29%29%0A%0Adef+create_input_script%28psz_timestamp%29%3A%0A++psz_prefix+%3D+%22%22%0A++%23use+OP_PUSHDATA1+if+required%0A++if+len%28psz_timestamp%29+%26gt%3B+76%3A+psz_prefix+%3D+%274c%27%0A%0A++script_prefix+%3D+%2704ffff001d0104%27+%2B+psz_prefix+%2B+chr%28len%28psz_timestamp%29%29.encode%28%27hex%27%29%0A++print+%28script_prefix+%2B+psz_timestamp.encode%28%27hex%27%29%29%0A++return+%28script_prefix+%2B+psz_timestamp.encode%28%27hex%27%29%29.decode%28%27hex%27%29%0A%0A%0Adef+create_output_script%28pubkey%29%3A%0A++script_len+%3D+%2741%27%0A++OP_CHECKSIG+%3D+%27ac%27%0A++return+%28script_len+%2B+pubkey+%2B+OP_CHECKSIG%29.decode%28%27hex%27%29%0A%0A%0Adef+create_transaction%28input_script%2C+output_script%2Coptions%29%3A%0A++transaction+%3D+Struct%28%22transaction%22%2C%0A++++Bytes%28%22version%22%2C+4%29%2C%0A++++Byte%28%22num_inputs%22%29%2C%0A++++StaticField%28%22prev_output%22%2C+32%29%2C%0A++++UBInt32%28%27prev_out_idx%27%29%2C%0A++++Byte%28%27input_script_len%27%29%2C%0A++++Bytes%28%27input_script%27%2C+len%28input_script%29%29%2C%0A++++UBInt32%28%27sequence%27%29%2C%0A++++Byte%28%27num_outputs%27%29%2C%0A++++Bytes%28%27out_value%27%2C+8%29%2C%0A++++Byte%28%27output_script_len%27%29%2C%0A++++Bytes%28%27output_script%27%2C++0x43%29%2C%0A++++UBInt32%28%27locktime%27%29%29%0A%0A++tx+%3D+transaction.parse%28%27%5Cx00%27*%28127+%2B+len%28input_script%29%29%29%0A++tx.version+++++++++++%3D+struct.pack%28%27%26lt%3BI%27%2C+1%29%0A++tx.num_inputs++++++++%3D+1%0A++tx.prev_output+++++++%3D+struct.pack%28%27%26lt%3Bqqqq%27%2C+0%2C0%2C0%2C0%29%0A++tx.prev_out_idx++++++%3D+0xFFFFFFFF%0A++tx.input_script_len++%3D+len%28input_script%29%0A++tx.input_script++++++%3D+input_script%0A++tx.sequence++++++++++%3D+0xFFFFFFFF%0A++tx.num_outputs+++++++%3D+1%0A++tx.out_value+++++++++%3D+struct.pack%28%27%26lt%3Bq%27+%2Coptions.value%29%230x000005f5e100%29%23012a05f200%29+%2350+coins%0A++%23tx.out_value+++++++++%3D+struct.pack%28%27%26lt%3Bq%27+%2C0x000000012a05f200%29+%2350+coins%0A++tx.output_script_len+%3D+0x43%0A++tx.output_script+++++%3D+output_script%0A++tx.locktime++++++++++%3D+0+%0A++return+transaction.build%28tx%29%0A%0A%0Adef+create_block_header%28hash_merkle_root%2C+time%2C+bits%2C+nonce%29%3A%0A++block_header+%3D+Struct%28%22block_header%22%2C%0A++++Bytes%28%22version%22%2C4%29%2C%0A++++Bytes%28%22hash_prev_block%22%2C+32%29%2C%0A++++Bytes%28%22hash_merkle_root%22%2C+32%29%2C%0A++++Bytes%28%22time%22%2C+4%29%2C%0A++++Bytes%28%22bits%22%2C+4%29%2C%0A++++Bytes%28%22nonce%22%2C+4%29%29%0A%0A++genesisblock+%3D+block_header.parse%28%27%5Cx00%27*80%29%0A++genesisblock.version++++++++++%3D+struct.pack%28%27%26lt%3BI%27%2C+1%29%0A++genesisblock.hash_prev_block++%3D+struct.pack%28%27%26lt%3Bqqqq%27%2C+0%2C0%2C0%2C0%29%0A++genesisblock.hash_merkle_root+%3D+hash_merkle_root%0A++genesisblock.time+++++++++++++%3D+struct.pack%28%27%26lt%3BI%27%2C+time%29%0A++genesisblock.bits+++++++++++++%3D+struct.pack%28%27%26lt%3BI%27%2C+bits%29%0A++genesisblock.nonce++++++++++++%3D+struct.pack%28%27%26lt%3BI%27%2C+nonce%29%0A++return+block_header.build%28genesisblock%29%0A%0A%0A%23+https%3A%2F%2Fen.bitcoin.it%2Fwiki%2FBlock_hashing_algorithm%0Adef+generate_hash%28data_block%2C+algorithm%2C+start_nonce%2C+target%29%3A%0A++print+%27Searching+for+genesis+hash..%27%0A++nonce+++++++++++%3D+start_nonce%0A++last_updated++++%3D+time.time%28%29%0A++difficulty++++++%3D+float%280xFFFF%29+*+2**208+%2F+target%0A++update_interval+%3D+int%281000000+*+difficulty%29%0A%0A++while+True%3A%0A++++sha256_hash%2C+header_hash+%3D+generate_hashes_from_block%28data_block%2C+algorithm%29%0A++++last_updated+++++++++++++%3D+calculate_hashrate%28nonce%2C+update_interval%2C+difficulty%2C+last_updated%29%0A++++if+is_genesis_hash%28header_hash%2C+target%29%3A%0A++++++if+algorithm+%3D%3D+%22X11%22+or+algorithm+%3D%3D+%22X13%22+or+algorithm+%3D%3D+%22X15%22%3A%0A++++++++return+%28header_hash%2C+nonce%29%0A++++++return+%28sha256_hash%2C+nonce%29%0A++++else%3A%0A+++++nonce++++++%3D+nonce+%2B+1%0A+++++data_block+%3D+data_block%5B0%3Alen%28data_block%29+-+4%5D+%2B+struct.pack%28%27%26lt%3BI%27%2C+nonce%29++%0A%0A%0Adef+generate_hashes_from_block%28data_block%2C+algorithm%29%3A%0A++sha256_hash+%3D+hashlib.sha256%28hashlib.sha256%28data_block%29.digest%28%29%29.digest%28%29%5B%3A%3A-1%5D%0A++header_hash+%3D+%22%22%0A++if+algorithm+%3D%3D+%27scrypt%27%3A%0A++++header_hash+%3D+scrypt.hash%28data_block%2Cdata_block%2C1024%2C1%2C1%2C32%29%5B%3A%3A-1%5D+%0A++elif+algorithm+%3D%3D+%27SHA256%27%3A%0A++++header_hash+%3D+sha256_hash%0A++elif+algorithm+%3D%3D+%27X11%27%3A%0A++++try%3A%0A++++++exec%28%27import+%25s%27+%25+%22xcoin_hash%22%29%0A++++except+ImportError%3A%0A++++++sys.exit%28%22Cannot+run+X11+algorithm%3A+module+xcoin_hash+not+found%22%29%0A++++header_hash+%3D+xcoin_hash.getPoWHash%28data_block%29%5B%3A%3A-1%5D%0A++elif+algorithm+%3D%3D+%27X13%27%3A%0A++++try%3A%0A++++++exec%28%27import+%25s%27+%25+%22x13_hash%22%29%0A++++except+ImportError%3A%0A++++++sys.exit%28%22Cannot+run+X13+algorithm%3A+module+x13_hash+not+found%22%29%0A++++header_hash+%3D+x13_hash.getPoWHash%28data_block%29%5B%3A%3A-1%5D%0A++elif+algorithm+%3D%3D+%27X15%27%3A%0A++++try%3A%0A++++++exec%28%27import+%25s%27+%25+%22x15_hash%22%29%0A++++except+ImportError%3A%0A++++++sys.exit%28%22Cannot+run+X15+algorithm%3A+module+x15_hash+not+found%22%29%0A++++header_hash+%3D+x15_hash.getPoWHash%28data_block%29%5B%3A%3A-1%5D%0A++return+sha256_hash%2C+header_hash%0A%0A%0Adef+is_genesis_hash%28header_hash%2C+target%29%3A%0A++return+int%28header_hash.encode%28%27hex_codec%27%29%2C+16%29+%26lt%3B+target%0A%0A%0Adef+calculate_hashrate%28nonce%2C+update_interval%2C+difficulty%2C+last_updated%29%3A%0A++if+nonce+%25+update_interval+%3D%3D+update_interval+-+1%3A%0A++++now+++++++++++++%3D+time.time%28%29%0A++++hashrate++++++++%3D+round%28update_interval%2F%28now+-+last_updated%29%29%0A++++generation_time+%3D+round%28difficulty+*+pow%282%2C+32%29+%2F+hashrate+%2F+3600%2C+1%29%0A++++sys.stdout.write%28%22%5Cr%25s+hash%2Fs%2C+estimate%3A+%25s+h%22%25%28str%28hashrate%29%2C+str%28generation_time%29%29%29%0A++++sys.stdout.flush%28%29%0A++++return+now%0A++else%3A%0A++++return+last_updated%0A%0A%0Adef+print_block_info%28options%2C+hash_merkle_root%2C+bits%29%3A%0A++print+%22algorithm%3A+%22++++%2B+%28options.algorithm%29%0A++print+%22merkle+hash%3A+%22++%2B+hash_merkle_root%5B%3A%3A-1%5D.encode%28%27hex_codec%27%29%0A++print+%22pszTimestamp%3A+%22+%2B+options.timestamp%0A++print+%22pubkey%3A+%22+++++++%2B+options.pubkey%0A++print+%22time%3A+%22+++++++++%2B+str%28options.time%29%0A++print+%22bits%3A+%22+++++++++%2B+str%28hex%28bits%29%29%0A%0A%0Adef+announce_found_genesis%28genesis_hash%2C+nonce%29%3A%0A++print+%22genesis+hash+found%21%22%0A++print+%22nonce%3A+%22++++++++%2B+str%28nonce%29%0A++print+%22genesis+hash%3A+%22+%2B+genesis_hash.encode%28%27hex_codec%27%29%0A%0A%0A%23+GOGOGO%21%0Amain%28%29%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cpre%3E%3C%2Fpre%3E+%EF%BC%9D%EF%BC%9D%EF%BC%9D%EF%BC%9D+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fhacode%2Farticle%2Fdetails%2F39638819%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fhacode%2Farticle%2Fdetails%2F39638819%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}