---
layout: default
title: 树莓派3B+ 智能家居（HomeKit）
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Cdiv+class%3D%22markdown_views%22%3E+%0A++%3Ch2+id%3D%22%E6%A0%91%E8%8E%93%E6%B4%BE3b-%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85homekit%22%3E%E6%A0%91%E8%8E%93%E6%B4%BE3B%2B+%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%EF%BC%88HomeKit%EF%BC%89%3C%2Fh2%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E5%BD%93%E4%BB%8A%E7%A7%91%E6%8A%80%E5%8F%91%E5%B1%95%E6%97%A5%E6%96%B0%E6%9C%88%E5%BC%82%EF%BC%8C%E8%B6%8A%E6%9D%A5%E8%B6%8A%E5%A4%9A%E7%9A%84%E6%96%B0%E5%85%B4%E6%8A%80%E6%9C%AF%E6%AD%A5%E5%85%A5%E4%BA%BA%E4%BB%AC%E7%94%9F%E6%B4%BB%EF%BC%8C%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E5%90%8C%E6%A0%B7%E4%B9%9F%E4%B8%8D%E4%BE%8B%E5%A4%96%EF%BC%8C%E7%84%B6%E5%90%8E%E4%BA%BA%E4%BB%AC%E9%9D%A2%E5%AF%B9%E6%96%B0%E7%A7%91%E6%8A%80%E5%8D%B4%E6%9C%9B%E8%80%8C%E5%8D%B4%E6%AD%A5%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%95%B4%E5%A5%97%E8%AE%BE%E5%A4%87%E7%9A%84%E4%BB%B7%E6%A0%BC%E6%98%AF%E9%9D%9E%E5%B8%B8%E6%98%82%E8%B4%B5%E7%9A%84%EF%BC%8C%E8%80%8C%E4%B8%94%E7%8E%B0%E5%9C%A8%E8%BF%98%E6%B2%A1%E6%9C%89%E4%B8%80%E4%B8%AA%E5%8E%82%E5%95%86%E8%83%BD%E6%8F%90%E4%BE%9B%E4%B8%80%E5%A5%97%E5%AE%8C%E6%95%B4%E4%B8%94%E7%A8%B3%E5%AE%9A%E7%9A%84%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%AF%BC%E8%87%B4%E7%8E%B0%E5%9C%A8%E8%BF%98%E4%B8%8D%E8%83%BD%E5%BF%AB%E9%80%9F%E6%99%AE%E5%8F%8A%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%83%B3%E5%B0%9D%E5%B0%9D%E9%B2%9C%EF%BC%8C%E9%82%A3%E4%B9%88%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%A0%91%E8%8E%93%E6%B4%BE%E5%B0%B1%E8%83%BD%E4%B8%BA%E4%BD%A0%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%BF%99%E6%A0%B7%E7%9A%84%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E3%80%82%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Ch3+id%3D%221%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%22%3E1.%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%3C%2Fh3%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E6%AF%94%E8%BE%83%E7%B4%AF%E8%B5%98%EF%BC%8C%E8%BF%99%E9%87%8C%E5%B0%B1%E4%B8%8D%E5%81%9A%E8%BF%87%E5%A4%9A%E7%9A%84%E8%A7%A3%E9%87%8A%E4%BA%86%E3%80%82+%3Cbr%3E+%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93+%EF%BC%9ANode+%E5%92%8C+HAP-NodeJS%EF%BC%88Node%E7%89%88%E6%9C%AC%E4%B8%BA8.2.1%EF%BC%8CHAP-NodeJS%E6%9B%B4%E6%96%B0%E4%B8%BANov+6%2C+2017%EF%BC%89+%3Cbr%3E+%E6%89%93%E5%8C%85%E9%93%BE%E6%8E%A5%EF%BC%9A%3Ca+href%3D%22http%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fkxwinxp%2F10124545%22+rel%3D%22nofollow%22+target%3D%22_blank%22%3Ehttp%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fkxwinxp%2F10124545%3C%2Fa%3E%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Ch4+id%3D%22%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E8%84%9A%E6%9C%AC%E5%A6%82%E4%B8%8B%22%3E%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E8%84%9A%E6%9C%AC%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fh4%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+bash%22%3E%3Cspan+class%3D%22hljs-shebang%22%3E%23%21%2Fbin%2Fbash%3C%2Fspan%3E%0APATH%3D%2Fbin%3A%2Fsbin%3A%2Fusr%2Fbin%3A%2Fusr%2Fsbin%3A%2Fusr%2Flocal%2Fbin%3A%2Fusr%2Flocal%2Fsbin%3A%7E%2Fbin%0A%3Cspan+class%3D%22hljs-keyword%22%3Eexport%3C%2Fspan%3E+PATH%0A%0A%3Cspan+class%3D%22hljs-built_in%22%3Eecho%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-string%22%3E%22+%2B----------------------------------------------------------------------+%7C+HAP-NodeJS+FOR+Debian+raspberry+%2B----------------------------------------------------------------------+%7C+Copyright+%C2%A9+2017+kioye+All+rights+reserved.+%2B----------------------------------------------------------------------+%22%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%23make+sure+your+confirm.+%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-built_in%22%3Eread%3C%2Fspan%3E+-p+%3Cspan+class%3D%22hljs-string%22%3E%22Do+you+want+to+install+HAP-NodeJS+to+the+%3Cspan+class%3D%22hljs-variable%22%3E%24setup_path%3C%2Fspan%3E+directory+now%3F%28y%2Fn%29%3A+%22%3C%2Fspan%3E+go%3B%0A%0A%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%5B+%3Cspan+class%3D%22hljs-string%22%3E%22%3Cspan+class%3D%22hljs-variable%22%3E%24go%3C%2Fspan%3E%22%3C%2Fspan%3E+%3D%3D+%3Cspan+class%3D%22hljs-string%22%3E%27n%27%3C%2Fspan%3E+%5D%7C%7C%5B+%3Cspan+class%3D%22hljs-string%22%3E%22%3Cspan+class%3D%22hljs-variable%22%3E%24go%3C%2Fspan%3E%22%3C%2Fspan%3E+%3D%3D+%3Cspan+class%3D%22hljs-string%22%3E%27N%27%3C%2Fspan%3E+%5D%3B%3Cspan+class%3D%22hljs-keyword%22%3Ethen%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eexit%3C%2Fspan%3E%3B%0A%3Cspan+class%3D%22hljs-keyword%22%3Efi%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+get+into+directory+of+application%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-built_in%22%3Ecd%3C%2Fspan%3E+%7E%0Amkdir+application%0A%3Cspan+class%3D%22hljs-built_in%22%3Ecd%3C%2Fspan%3E+application%0A%0A%3Cspan+class%3D%22hljs-built_in%22%3Esudo%3C%2Fspan%3E+apt-get+install+-y+git+avahi-daemon+avahi-discover+libnss-mdns+libavahi-compat-libdnssd-dev+build-essential%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+apt-get+update+--fix-missing+-y%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-built_in%22%3Esudo%3C%2Fspan%3E+service+avahi-daemon+start%0Awget+-O+node.tar.gz+https%3A%2F%2Fnodejs.org%2Fdist%2Fv8.%3Cspan+class%3D%22hljs-number%22%3E2.1%3C%2Fspan%3E%2Fnode-v8.%3Cspan+class%3D%22hljs-number%22%3E2.1%3C%2Fspan%3E-linux-armv7l.tar.xz%0Atar+-zxvf+node.tar.gz%0Amv+node-*l+usr%0A%3Cspan+class%3D%22hljs-built_in%22%3Esudo%3C%2Fspan%3E+cp+-rf+usr+%2F%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+install+node+base+cross-platform%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-built_in%22%3Esudo%3C%2Fspan%3E+npm+install+-g+-y+node-gyp%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+install+C%2B%2B+lib%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-built_in%22%3Esudo%3C%2Fspan%3E+apt-get+install+-y+libavahi-compat-libdnssd-dev%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+download+HAP-NodeJS%3C%2Fspan%3E%0Agit+clone+https%3A%2F%2Fgithub.com%2FKhaosT%2FHAP-NodeJS.git%0A%3Cspan+class%3D%22hljs-built_in%22%3Esudo%3C%2Fspan%3E+chmod+-R+%3Cspan+class%3D%22hljs-number%22%3E777%3C%2Fspan%3E+%2Froot+.%2FHAP-NodeJS%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+get+into+HAP-NodeJS+directory%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-built_in%22%3Ecd%3C%2Fspan%3E+HAP-NodeJS%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+install+some+access+for+HAP-NodeJS%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-built_in%22%3Esudo%3C%2Fspan%3E+npm+install+-y+node-persist+debug+mdns+fast-srp-hap+ed25519+buffer-shims+curve25519-n2+ip+python-shell%0A%3Cspan+class%3D%22hljs-built_in%22%3Ecd%3C%2Fspan%3E+..%0A%3Cspan+class%3D%22hljs-built_in%22%3Eecho%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-string%22%3E%22+%2B----------------------------------------------------------------------+%7C+HAP-NodeJS+Installed+finish%21%21+%2B----------------------------------------------------------------------+%7C+start+in+Bridged+mode%3A+%7C+sudo+node+HAP-NodeJS%2FBridgedCore.js+%2B----------------------------------------------------------------------+%7C+run+as+an+independent+HomeKit+device%3A+%7C+sudo+node+HAP-NodeJS%2FCore.js+%2B----------------------------------------------------------------------+%22%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-keyword%22%3Eexit%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch3+id%3D%222%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%87%AA%E5%90%AF%E5%8A%A8%22%3E2.%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%87%AA%E5%90%AF%E5%8A%A8%3C%2Fh3%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+livecodeserver%22%3Esudo+vim+%2Fetc%2Frc.%3Cspan+class%3D%22hljs-built_in%22%3Elocal%3C%2Fspan%3E%3Cspan+class%3D%22hljs-comment%22%3E+%2F%2F+%E5%9C%A8+exit+0+%E5%89%8D%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+HAP-NodeJS+%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E8%84%9A%E6%9C%AC%EF%BC%88nohup%E4%B8%BA%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8C%2Crun.log%E4%B8%BA%E8%BF%90%E8%A1%8C%E8%AE%B0%E5%BD%95%E3%80%82%EF%BC%89%3C%2Fspan%3E%0Asudo+nohup+node+%2Fhome%2F%3Cspan+class%3D%22hljs-constant%22%3Epi%3C%2Fspan%3E%2Fapplication%2FHAP-NodeJS%2FCore.js+%26gt%3B%2Fhome%2F%3Cspan+class%3D%22hljs-constant%22%3Epi%3C%2Fspan%3E%2Fapplication%2FHAP-NodeJS%2Frun.%3Cspan+class%3D%22hljs-built_in%22%3Elog%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-number%22%3E2%3C%2Fspan%3E%26gt%3B%26amp%3B%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E+%26amp%3B%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+python+GPIO%E5%8F%A3%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%81%3C%2Fspan%3E%0Apython+%2Fhome%2F%3Cspan+class%3D%22hljs-constant%22%3Epi%3C%2Fspan%3E%2Fapplication%2FHAP-NodeJS%2Fpython%2Finit.py%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3EGPIO%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%A3%EF%BC%8C%E6%88%91%E6%8E%A5%E4%B8%8B%E6%9D%A5%E8%A6%81%E7%94%A8%E7%9A%84%E6%98%AF+11%E3%80%8113%E5%92%8C15%E5%8F%A3%E3%80%82+%3Cbr%3E+%E8%84%9A%E6%9C%AC%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+python%22%3Evim+%7E%2Fapplication%2FHAP-NodeJS%2Fpython%2Finit.py%0A%2F%2F+-------------%E8%AF%B7%E5%AE%8C%E6%95%B4%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%81%EF%BC%81------------------%0A%3Cspan+class%3D%22hljs-comment%22%3E%23%21%2Fusr%2Fbin%2Fenv+python%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-keyword%22%3Eimport%3C%2Fspan%3E+RPi.GPIO+%3Cspan+class%3D%22hljs-keyword%22%3Eas%3C%2Fspan%3E+GPIO%0A%3Cspan+class%3D%22hljs-keyword%22%3Eimport%3C%2Fspan%3E+sys%0A%0A%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Edef%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-title%22%3Esetup%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28p%29%3C%2Fspan%3E%3A%3C%2Fspan%3E%0A++++GPIO.setmode%28GPIO.BOARD%29%0A++++GPIO.setup%28p%2C+GPIO.OUT%29%0A%0A%0AGPIO.setwarnings%28%3Cspan+class%3D%22hljs-keyword%22%3EFalse%3C%2Fspan%3E%29%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+%E5%88%9D%E5%A7%8B%E5%8C%96+11%E3%80%8113%E5%92%8C15%E5%8F%A3%E3%80%82%3C%2Fspan%3E%0Aarr%3D%7B%3Cspan+class%3D%22hljs-number%22%3E11%3C%2Fspan%3E%2C%3Cspan+class%3D%22hljs-number%22%3E13%3C%2Fspan%3E%2C%3Cspan+class%3D%22hljs-number%22%3E15%3C%2Fspan%3E%7D%0A%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+gp+%3Cspan+class%3D%22hljs-keyword%22%3Ein%3C%2Fspan%3E+arr%3A%0A++++setup%28gp%29%3B%0A%0A%0Asys.exit%28%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%29%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch3+id%3D%223hap-nodejs%E4%BB%8B%E7%BB%8D%22%3E3.HAP-NodeJS%E4%BB%8B%E7%BB%8D%3C%2Fh3%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3EGitHub%EF%BC%9A%3Ca+href%3D%22https%3A%2F%2Fgithub.com%2FKhaosT%2FHAP-NodeJS%22+rel%3D%22nofollow%22+target%3D%22_blank%22%3Ehttps%3A%2F%2Fgithub.com%2FKhaosT%2FHAP-NodeJS%3C%2Fa%3E%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Chr%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3EHAP+Nodejs%E6%98%AF%E4%B8%80%E4%B8%AA%E9%80%9A%E8%BF%87Nodejs%E6%90%AD%E5%BB%BA%E7%9A%84HomeKit%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%82%E5%9B%A0%E6%AD%A4%EF%BC%8C%E5%AE%83%E8%83%BD%E7%9B%B4%E6%8E%A5%E5%92%8C%E8%8B%B9%E6%9E%9C+%E5%AE%B6%E5%BA%AD%EF%BC%88home%EF%BC%89%E5%BA%94%E7%94%A8%E7%9B%B8%E8%BF%9E%E3%80%82%E8%8B%B9%E6%9E%9C%E8%AE%BE%E5%A4%87%E5%8F%88%E6%94%AF%E6%8C%81Siri%EF%BC%8C%E6%95%85%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87Siri%E6%8E%A7%E5%88%B6HomeKit%E8%AE%BE%E5%A4%87%E3%80%82%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Ch4+id%3D%22%E5%AE%83%E6%9C%89%E4%B8%A4%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%22%3E%E5%AE%83%E6%9C%89%E4%B8%A4%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%EF%BC%9A%3C%2Fh4%3E+%0A++%3Cul%3E+%0A+++%3Cli%3E%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E5%90%AF%E5%8A%A8HAP%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%9A+%3Cbr%3E+sudo+node+HAP-NodeJS%2FBridgedCore.js%3C%2Fli%3E+%0A+++%3Cli%3E%E7%8B%AC%E7%AB%8B%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%90%84%E9%85%8D%E4%BB%B6%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E7%9A%84HomeKit%E8%AE%BE%E5%A4%87%E5%90%AF%E5%8A%A8%EF%BC%89%EF%BC%9A+%3Cbr%3E+sudo+node+HAP-NodeJS%2FCore.js%3C%2Fli%3E+%0A++%3C%2Ful%3E+%0A++%3Ch4+id%3D%22%E5%8F%AF%E8%87%AA%E5%B7%B1%E5%AE%9A%E4%B9%89%E9%85%8D%E4%BB%B6%22%3E%E5%8F%AF%E8%87%AA%E5%B7%B1%E5%AE%9A%E4%B9%89%E9%85%8D%E4%BB%B6%EF%BC%9A%3C%2Fh4%3E+%0A++%3Cul%3E+%0A+++%3Cli%3E%E6%A0%BC%E5%BC%8F%E4%B8%BA%EF%BC%9Aaccessories%2F**_accessory.js%E6%96%87%E4%BB%B6+%3Cbr%3E+**%E4%B8%BA%E7%AE%80%E7%9F%AD%E7%9A%84%E6%8F%8F%E8%BF%B0%EF%BC%8C%E6%89%80%E6%9C%89%E6%AD%A4%E7%B1%BB%E5%AE%9A%E4%B9%89%E7%9A%84%E9%99%84%E4%BB%B6%E9%83%BD%E4%BC%9A%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%8A%A0%E8%BD%BD%E3%80%82%EF%BC%88%E9%9D%9E%E6%AD%A4%E7%B1%BB%E5%B0%86%E4%B8%8D%E4%BC%9A%E5%8A%A0%E8%BD%BD%EF%BC%81%EF%BC%89%3C%2Fli%3E+%0A++%3C%2Ful%3E+%0A++%3Ch3+id%3D%224%E6%A8%A1%E6%8B%9F%E9%85%8D%E4%BB%B6%22%3E4.%E6%A8%A1%E6%8B%9F%E9%85%8D%E4%BB%B6%3C%2Fh3%3E+%0A++%3Chr%3E+%0A++%3Ch4+id%3D%2241-%E6%A8%A1%E6%8B%9F%E4%B8%80%E4%B8%AA%E4%B8%A4%E7%BA%A7%E4%BA%AE%E5%BA%A6%E7%9A%84%E7%81%AF%22%3E4.1+%E6%A8%A1%E6%8B%9F%E4%B8%80%E4%B8%AA%E4%B8%A4%E7%BA%A7%E4%BA%AE%E5%BA%A6%E7%9A%84%E7%81%AF%3C%2Fh4%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E8%AF%A5%E9%85%8D%E4%BB%B6%E6%98%AF%E9%80%9A%E8%BF%87python-shell%E6%9D%A5%E6%8E%A7%E5%88%B6GPIO%EF%BC%8C%E6%95%85%E9%9C%80%E5%AE%89%E8%A3%85python%E7%9A%84gpio%E5%8C%85%E3%80%82%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+lasso%22%3Esudo+apt%3Cspan+class%3D%22hljs-attribute%22%3E-get%3C%2Fspan%3E+install+%3Cspan+class%3D%22hljs-attribute%22%3E-y%3C%2Fspan%3E+python%3Cspan+class%3D%22hljs-attribute%22%3E-rpi%3C%2Fspan%3E%3Cspan+class%3D%22hljs-built_in%22%3E.%3C%2Fspan%3Egpio%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch4+id%3D%22%E4%B8%80%E4%B8%AA%E6%8E%A7%E5%88%B6%E7%81%AF%E7%9A%84%E9%99%84%E4%BB%B6%E4%BB%A3%E7%A0%81%22%3E%E4%B8%80%E4%B8%AA%E6%8E%A7%E5%88%B6%E7%81%AF%E7%9A%84%E9%99%84%E4%BB%B6%E4%BB%A3%E7%A0%81%EF%BC%9A%3C%2Fh4%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E5%8A%9F%E8%83%BD%EF%BC%9A%E6%8E%A7%E5%88%B6+GPIO+13+%E5%92%8C+15+%E5%8F%A3%EF%BC%8C%E5%88%86%E5%88%AB%E6%8E%A7%E5%88%B6%E7%81%AF%E5%BC%80%E5%85%B3%E5%92%8C%E4%BA%AE%E5%BA%A6%EF%BC%88%E4%B8%A4%E7%BA%A7%EF%BC%89%EF%BC%8C%E9%BB%98%E8%AE%A4%E9%AB%98%E7%94%B5%E5%B9%B3%E4%B8%BA%E5%BC%80%E5%90%AF%E3%80%82+%3Cbr%3E+%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%9C%A8%3Ccode%3Evar+powergp%3D%2713%27%3B%3C%2Fcode%3E%E5%92%8C%3Ccode%3Evar+brightnessgp%3D%2715%27%3B%3C%2Fcode%3E%E4%BF%AE%E6%94%B9GPIO%E5%8F%A3%E3%80%82%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Cp%3E%3Cimg+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20171123232116894%3Fwatermark%2F2%2Ftext%2FaHR0cDovL2Jsb2cuY3Nkbi5uZXQva3h3aW54cA%3D%3D%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%2Fgravity%2FSouthEast%22+alt%3D%22GPIO%22+title%3D%22%22%3E%3C%2Fp%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+javascript%22%3E%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+%E5%88%9B%E5%BB%BAMyTableLight_accessory.js%3C%2Fspan%3E%0Asudo+vim+%7E%3Cspan+class%3D%22hljs-regexp%22%3E%2Fapplication%2F%3C%2Fspan%3EHAP-NodeJS%2Faccessories%2FMyTableLight_accessory.js%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+-------------%E8%AF%B7%E5%AE%8C%E6%95%B4%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%81%EF%BC%81------------------%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+Accessory+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.Accessory%3B%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+Service+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.Service%3B%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+Characteristic+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.Characteristic%3B%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+uuid+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.uuid%3B%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+PythonShell+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27python-shell%27%3C%2Fspan%3E%29%3B%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+powergp%3D%3Cspan+class%3D%22hljs-string%22%3E%2713%27%3C%2Fspan%3E%3B%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+brightnessgp%3D%3Cspan+class%3D%22hljs-string%22%3E%2715%27%3C%2Fspan%3E%3B%0A%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+LightController+%3D+%7B%0A++name%3A+%3Cspan+class%3D%22hljs-string%22%3E%22My+Table+Light%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fname+of+accessory%3C%2Fspan%3E%0A++pincode%3A+%3Cspan+class%3D%22hljs-string%22%3E%22031-45-154%22%3C%2Fspan%3E%2C%0A++username%3A+%3Cspan+class%3D%22hljs-string%22%3E%22FA%3A3C%3AED%3A5A%3A1A%3A1F%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+MAC+like+address+used+by+HomeKit+to+differentiate+accessories.+%3C%2Fspan%3E%0A++manufacturer%3A+%3Cspan+class%3D%22hljs-string%22%3E%22HAP-NodeJS%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fmanufacturer+%28optional%29%3C%2Fspan%3E%0A++model%3A+%3Cspan+class%3D%22hljs-string%22%3E%22v1.0%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fmodel+%28optional%29%3C%2Fspan%3E%0A++serialNumber%3A+%3Cspan+class%3D%22hljs-string%22%3E%22A12S345KGB%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fserial+number+%28optional%29%3C%2Fspan%3E%0A%0A++power%3A+%3Cspan+class%3D%22hljs-literal%22%3Efalse%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fcurent+power+status%3C%2Fspan%3E%0A++brightness%3A+%3Cspan+class%3D%22hljs-number%22%3E100%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fcurrent+brightness%3C%2Fspan%3E%0A++hue%3A+%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fcurrent+hue%3C%2Fspan%3E%0A++saturation%3A+%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fcurrent+saturation%3C%2Fspan%3E%0A%0A++outputLogs%3A+%3Cspan+class%3D%22hljs-literal%22%3Etrue%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Foutput+logs%3C%2Fspan%3E%0A%0A++setPower%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28status%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fset+power+of+accessory%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+%7B%0A++++++++console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Turning+the+%27%25s%27+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+status+%3F+%3Cspan+class%3D%22hljs-string%22%3E%22on%22%3C%2Fspan%3E+%3A+%3Cspan+class%3D%22hljs-string%22%3E%22off%22%3C%2Fspan%3E%29%3B%0A++++%7D%0A++++PythonShell.run%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F..%2Fhome%2Fpi%2Fapplication%2FHAP-NodeJS%2Fpython%2Fgpio.py%27%3C%2Fspan%3E%2C+%7Bargs%3A%5Bpowergp%2B%3Cspan+class%3D%22hljs-string%22%3E%27%3A%27%3C%2Fspan%3E%2B%28status%3F%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%3A%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%29%5D%7D%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-params%22%3E%28err%2Cresults%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%28err%29+console.log%28err%29%3B%0A++++%7D%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.power+%3D+status%3B%0A++%7D%2C%0A%0A++getPower%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fget+power+of+accessory%3C%2Fspan%3E%0A++++PythonShell.run%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F..%2Fhome%2Fpi%2Fapplication%2FHAP-NodeJS%2Fpython%2Fgpio.py%27%3C%2Fspan%3E%2C+%7Bargs%3A%5Bpowergp%2B%3Cspan+class%3D%22hljs-string%22%3E%27%3Ag%27%3C%2Fspan%3E%5D%7D%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28err%2Cresults%29%3C%2Fspan%3E%7B%3C%2Fspan%3E%0A++++++++console.log%28%3Cspan+class%3D%22hljs-string%22%3E%27results%3A+%25j%27%3C%2Fspan%3E%2C+results%29%3B%0A++++++++%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+resultMap%3D%3Cspan+class%3D%22hljs-built_in%22%3Eeval%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27%28%27%3C%2Fspan%3E%2Bresults.pop%28%29%2B%3Cspan+class%3D%22hljs-string%22%3E%27%29%27%3C%2Fspan%3E%29%3B%0A++++++++%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.power%3D%28resultMap%5Bpowergp%5D%3D%3D%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%29%3F%3Cspan+class%3D%22hljs-literal%22%3Etrue%3C%2Fspan%3E%3A%3Cspan+class%3D%22hljs-literal%22%3Efalse%3C%2Fspan%3E%3B%0A++++%7D%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22%27%25s%27+is+%25s.%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.power+%3F+%3Cspan+class%3D%22hljs-string%22%3E%22on%22%3C%2Fspan%3E+%3A+%3Cspan+class%3D%22hljs-string%22%3E%22off%22%3C%2Fspan%3E%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.power%3B%0A++%7D%2C%0A%0A++setBrightness%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28brightness%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fset+brightness%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Setting+%27%25s%27+brightness+to+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+brightness%29%3B%0A++++PythonShell.run%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F..%2Fhome%2Fpi%2Fapplication%2FHAP-NodeJS%2Fpython%2Fgpio.py%27%3C%2Fspan%3E%2C+%7Bargs%3A%5Bbrightnessgp%2B%3Cspan+class%3D%22hljs-string%22%3E%27%3A%27%3C%2Fspan%3E%2B%28%28brightness+%26lt%3B%3D+%3Cspan+class%3D%22hljs-number%22%3E50%3C%2Fspan%3E%29%3F%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%3A%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%29%5D%7D%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-params%22%3E%28err%2Cresults%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%28err%29+console.log%28err%29%3B%0A++++%7D%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.brightness+%3D+brightness%3B%0A++%7D%2C%0A%0A++getBrightness%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fget+brightness%3C%2Fspan%3E%0A++++PythonShell.run%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F..%2Fhome%2Fpi%2Fapplication%2FHAP-NodeJS%2Fpython%2Fgpio.py%27%3C%2Fspan%3E%2C+%7Bargs%3A%5Bbrightnessgp%2B%3Cspan+class%3D%22hljs-string%22%3E%27%3Ag%27%3C%2Fspan%3E%5D%7D%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28err%2Cresults%29%3C%2Fspan%3E%7B%3C%2Fspan%3E%0A++++++++console.log%28%3Cspan+class%3D%22hljs-string%22%3E%27results%3A+%25j%27%3C%2Fspan%3E%2C+results%29%3B%0A++++++++%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+resultMap%3D%3Cspan+class%3D%22hljs-built_in%22%3Eeval%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27%28%27%3C%2Fspan%3E%2Bresults.pop%28%29%2B%3Cspan+class%3D%22hljs-string%22%3E%27%29%27%3C%2Fspan%3E%29%3B%0A++++++++%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.brightness%3D%28resultMap%5Bbrightnessgp%5D%3D%3D%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%29%3F%3Cspan+class%3D%22hljs-number%22%3E50%3C%2Fspan%3E%3A%3Cspan+class%3D%22hljs-number%22%3E100%3C%2Fspan%3E%3B%0A++++%7D%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22%27%25s%27+brightness+is+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.brightness%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.brightness%3B%0A++%7D%2C%0A%0A++setSaturation%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28saturation%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fset+brightness%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Setting+%27%25s%27+saturation+to+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+saturation%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.saturation+%3D+saturation%3B%0A++%7D%2C%0A%0A++getSaturation%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fget+brightness%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22%27%25s%27+saturation+is+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.saturation%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.saturation%3B%0A++%7D%2C%0A%0A++setHue%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28hue%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fset+brightness%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Setting+%27%25s%27+hue+to+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+hue%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.hue+%3D+hue%3B%0A++%7D%2C%0A%0A++getHue%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fget+hue%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22%27%25s%27+hue+is+%25s%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.hue%29%3B%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.hue%3B%0A++%7D%2C%0A%0A++identify%3A+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2Fidentify+the+accessory%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.outputLogs%29+console.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Identify+the+%27%25s%27%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E.name%29%3B%0A++%7D%0A%7D%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+Generate+a+consistent+UUID+for+our+light+Accessory+that+will+remain+the+same+even+when%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+restarting+our+server.+We+use+the+%60uuid.generate%60+helper+function+to+create+a+deterministic%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+UUID+based+on+an+arbitrary+%22namespace%22+and+the+word+%22light%22.%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+lightUUID+%3D+uuid.generate%28%3Cspan+class%3D%22hljs-string%22%3E%27hap-nodejs%3Aaccessories%3Alight%27%3C%2Fspan%3E+%2B+LightController.name%29%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+This+is+the+Accessory+that+we%27ll+return+to+HAP-NodeJS+that+represents+our+light.%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-keyword%22%3Evar%3C%2Fspan%3E+lightAccessory+%3D+exports.accessory+%3D+%3Cspan+class%3D%22hljs-keyword%22%3Enew%3C%2Fspan%3E+Accessory%28LightController.name%2C+lightUUID%29%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+Add+properties+for+publishing+%28in+case+we%27re+using+Core.js+and+not+BridgedCore.js%29%3C%2Fspan%3E%0AlightAccessory.username+%3D+LightController.username%3B%0AlightAccessory.pincode+%3D+LightController.pincode%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+set+some+basic+properties+%28these+values+are+arbitrary+and+setting+them+is+optional%29%3C%2Fspan%3E%0AlightAccessory%0A++.getService%28Service.AccessoryInformation%29%0A++++.setCharacteristic%28Characteristic.Manufacturer%2C+LightController.manufacturer%29%0A++++.setCharacteristic%28Characteristic.Model%2C+LightController.model%29%0A++++.setCharacteristic%28Characteristic.SerialNumber%2C+LightController.serialNumber%29%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+listen+for+the+%22identify%22+event+for+this+Accessory%3C%2Fspan%3E%0AlightAccessory.on%28%3Cspan+class%3D%22hljs-string%22%3E%27identify%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28paired%2C+callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++LightController.identify%28%29%3B%0A++callback%28%29%3B%0A%7D%29%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+Add+the+actual+Lightbulb+Service+and+listen+for+change+events+from+iOS.%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+We+can+see+the+complete+list+of+Services+and+Characteristics+in+%60lib%2Fgen%2FHomeKitTypes.js%60%3C%2Fspan%3E%0AlightAccessory%0A++.addService%28Service.Lightbulb%2C+LightController.name%29+%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+services+exposed+to+the+user+should+have+%22names%22+like+%22Light%22+for+this+case%3C%2Fspan%3E%0A++.getCharacteristic%28Characteristic.On%29%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27set%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28value%2C+callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++LightController.setPower%28value%29%3B%0A%0A++++%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+Our+light+is+synchronous+-+this+value+has+been+successfully+set%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+Invoke+the+callback+when+you+finished+processing+the+request%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+If+it%27s+going+to+take+more+than+1s+to+finish+the+request%2C+try+to+invoke+the+callback%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+after+getting+the+request+instead+of+after+finishing+it.+This+avoids+blocking+other%3C%2Fspan%3E%0A++++%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+requests+from+HomeKit.%3C%2Fspan%3E%0A++++callback%28%29%3B%0A++%7D%29%0A++%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+We+want+to+intercept+requests+for+our+current+power+state+so+we+can+query+the+hardware+itself+instead+of%3C%2Fspan%3E%0A++%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+allowing+HAP-NodeJS+to+return+the+cached+Characteristic.value.%3C%2Fspan%3E%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27get%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++callback%28%3Cspan+class%3D%22hljs-literal%22%3Enull%3C%2Fspan%3E%2C+LightController.getPower%28%29%29%3B%0A++%7D%29%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+To+inform+HomeKit+about+changes+occurred+outside+of+HomeKit+%28like+user+physically+turn+on+the+light%29%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+Please+use+Characteristic.updateValue%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+lightAccessory%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+.getService%28Service.Lightbulb%29%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+.getCharacteristic%28Characteristic.On%29%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+.updateValue%28true%29%3B%3C%2Fspan%3E%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+also+add+an+%22optional%22+Characteristic+for+Brightness%3C%2Fspan%3E%0AlightAccessory%0A++.getService%28Service.Lightbulb%29%0A++.addCharacteristic%28Characteristic.Brightness%29%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27set%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28value%2C+callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++LightController.setBrightness%28value%29%3B%0A++++callback%28%29%3B%0A++%7D%29%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27get%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++callback%28%3Cspan+class%3D%22hljs-literal%22%3Enull%3C%2Fspan%3E%2C+LightController.getBrightness%28%29%29%3B%0A++%7D%29%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+also+add+an+%22optional%22+Characteristic+for+Saturation%3C%2Fspan%3E%0AlightAccessory%0A++.getService%28Service.Lightbulb%29%0A++.addCharacteristic%28Characteristic.Saturation%29%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27set%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28value%2C+callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++LightController.setSaturation%28value%29%3B%0A++++callback%28%29%3B%0A++%7D%29%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27get%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++callback%28%3Cspan+class%3D%22hljs-literal%22%3Enull%3C%2Fspan%3E%2C+LightController.getSaturation%28%29%29%3B%0A++%7D%29%3B%0A%0A%3Cspan+class%3D%22hljs-comment%22%3E%2F%2F+also+add+an+%22optional%22+Characteristic+for+Hue%3C%2Fspan%3E%0AlightAccessory%0A++.getService%28Service.Lightbulb%29%0A++.addCharacteristic%28Characteristic.Hue%29%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27set%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28value%2C+callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++LightController.setHue%28value%29%3B%0A++++callback%28%29%3B%0A++%7D%29%0A++.on%28%3Cspan+class%3D%22hljs-string%22%3E%27get%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Efunction%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28callback%29%3C%2Fspan%3E+%7B%3C%2Fspan%3E%0A++++callback%28%3Cspan+class%3D%22hljs-literal%22%3Enull%3C%2Fspan%3E%2C+LightController.getHue%28%29%29%3B%0A++%7D%29%3B%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch4+id%3D%22%E5%87%86%E5%A4%87%E4%B8%80%E4%B8%AApython%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6gpio%E5%8F%A3%22%3E%E5%87%86%E5%A4%87%E4%B8%80%E4%B8%AApython%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6GPIO%E5%8F%A3%EF%BC%9A%3C%2Fh4%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+python%22%3Esudo+vim+%7E%2Fapplication%2FHAP-NodeJS%2Fpython%2Fgpio.py%0A%2F%2F+-------------%E8%AF%B7%E5%AE%8C%E6%95%B4%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%81%EF%BC%81------------------%0A%3Cspan+class%3D%22hljs-comment%22%3E%23%21%2Fusr%2Fbin%2Fenv+python%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-keyword%22%3Eimport%3C%2Fspan%3E+RPi.GPIO+%3Cspan+class%3D%22hljs-keyword%22%3Eas%3C%2Fspan%3E+GPIO%0A%3Cspan+class%3D%22hljs-keyword%22%3Eimport%3C%2Fspan%3E+sys%0A%0A%3Cspan+class%3D%22hljs-function%22%3E%3Cspan+class%3D%22hljs-keyword%22%3Edef%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-title%22%3Einit%3C%2Fspan%3E%3Cspan+class%3D%22hljs-params%22%3E%28gp%29%3C%2Fspan%3E%3A%3C%2Fspan%3E%0A++++GPIO.setmode%28GPIO.BOARD%29%0A++++GPIO.setup%28gp%2C+GPIO.OUT%29%0A%0AGPIO.setwarnings%28%3Cspan+class%3D%22hljs-keyword%22%3EFalse%3C%2Fspan%3E%29%0A%3Cspan+class%3D%22hljs-comment%22%3E%23+simple+argument+echo+script%3C%2Fspan%3E%0Aret%3D%7B%7D%0A%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+arg+%3Cspan+class%3D%22hljs-keyword%22%3Ein%3C%2Fspan%3E+sys.argv%5B%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%3A%5D%3A%0A++++%3Cspan+class%3D%22hljs-comment%22%3E%23print+arg%3C%2Fspan%3E%0A++++args%3Darg.split%28%3Cspan+class%3D%22hljs-string%22%3E%27%3A%27%3C%2Fspan%3E%29%0A++++init%28int%28args%5B%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%5D%29%29%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+args%5B%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%5D%3D%3D%3Cspan+class%3D%22hljs-string%22%3E%27g%27%3C%2Fspan%3E%3A%0A++++++++ret%5Bargs%5B%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%5D%5D%3DGPIO.input%28int%28args%5B%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%5D%29%29%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eelif%3C%2Fspan%3E+args%5B%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%5D%3D%3D%3Cspan+class%3D%22hljs-string%22%3E%270%27%3C%2Fspan%3E%3A%0A++++++++GPIO.output%28int%28args%5B%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%5D%29%2C+GPIO.LOW%29%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eelif%3C%2Fspan%3E+args%5B%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%5D%3D%3D%3Cspan+class%3D%22hljs-string%22%3E%271%27%3C%2Fspan%3E%3A%0A++++++++GPIO.output%28int%28args%5B%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%5D%29%2C+GPIO.HIGH%29%0A++++%3Cspan+class%3D%22hljs-comment%22%3E%23setup%28int%28v%29%29%3C%2Fspan%3E%0A%0A%3Cspan+class%3D%22hljs-keyword%22%3Eprint%3C%2Fspan%3E+ret%0Asys.exit%28%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%29%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Ch4+id%3D%2242-%E6%A8%A1%E6%8B%9F%E4%B8%80%E4%B8%AA%E5%BC%80%E5%85%B3%E6%8F%92%E5%BA%A7%22%3E4.2+%E6%A8%A1%E6%8B%9F%E4%B8%80%E4%B8%AA%E5%BC%80%E5%85%B3%E6%8F%92%E5%BA%A7%3C%2Fh4%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E6%88%91%E8%BF%99%E4%B8%AA%E6%8F%92%E5%BA%A7%E6%98%AF%E6%8E%A5%E7%9A%84%E9%9F%B3%E5%93%8D%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AB%E2%80%9CMy+sound%E2%80%9D%EF%BC%8C%E4%B8%8D%E8%A6%81%E8%A7%81%E6%80%AA%E3%80%82+%3Cbr%3E+%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF+GPIO+11+%E5%8F%A3%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AF%E9%AB%98%E7%94%B5%E5%B9%B3%E6%98%AF%E5%BC%80%E5%90%AF%E3%80%82+%3Cbr%3E+%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Cpre+class%3D%22prettyprint%22%3E%3Ccode+class%3D%22+hljs+coffeescript%22%3E%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+%E5%88%9B%E5%BB%BAMySound_accessory.js%0Asudo+vim+%7E%2Fapplication%2FHAP-NodeJS%2Faccessories%2FMySound_accessory.js%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+-------------%E8%AF%B7%E5%AE%8C%E6%95%B4%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%EF%BC%81%EF%BC%81------------------%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+Accessory+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.Accessory%3B%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+Service+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.Service%3B%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+Characteristic+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.Characteristic%3B%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+uuid+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F%27%3C%2Fspan%3E%29.uuid%3B%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+err+%3D+%3Cspan+class%3D%22hljs-literal%22%3Enull%3C%2Fspan%3E%3B+%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ein%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-reserved%22%3Ecase%3C%2Fspan%3E+there+were+any+problems%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+PythonShell+%3D+%3Cspan+class%3D%22hljs-built_in%22%3Erequire%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27python-shell%27%3C%2Fspan%3E%29%3B%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+soundgp%3D%3Cspan+class%3D%22hljs-string%22%3E%2711%27%3C%2Fspan%3E%3B%0A%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+here%3Cspan+class%3D%22hljs-string%22%3E%27s+a+fake+hardware+device+that+we%27%3C%2Fspan%3Ell+expose+to+HomeKit%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+FAKE_OUTLET+%3D+%7B%0A++++%3Cspan+class%3D%22hljs-attribute%22%3EsetPowerOn%3C%2Fspan%3E%3A+%3Cspan+class%3D%22hljs-reserved%22%3Efunction%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E%29+%7B%0A++++%3Cspan+class%3D%22hljs-built_in%22%3Econsole%3C%2Fspan%3E.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Turning+the+MySound+%25s%21...%22%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E+%3F+%3Cspan+class%3D%22hljs-string%22%3E%22on%22%3C%2Fspan%3E+%3A+%3Cspan+class%3D%22hljs-string%22%3E%22off%22%3C%2Fspan%3E%29%3B%0A++++PythonShell.run%28%3Cspan+class%3D%22hljs-string%22%3E%27..%2F..%2Fhome%2Fpi%2Fapplication%2FHAP-NodeJS%2Fpython%2Fgpio.py%27%3C%2Fspan%3E%2C+%7B%3Cspan+class%3D%22hljs-attribute%22%3Eargs%3C%2Fspan%3E%3A%5Bsoundgp%2B%3Cspan+class%3D%22hljs-string%22%3E%27%3A%27%3C%2Fspan%3E%2B%28%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E%3F%3Cspan+class%3D%22hljs-number%22%3E1%3C%2Fspan%3E%3A%3Cspan+class%3D%22hljs-number%22%3E0%3C%2Fspan%3E%29%5D%7D%2C+%3Cspan+class%3D%22hljs-reserved%22%3Efunction%3C%2Fspan%3E+%28err%2Cresults%29+%7B%0A++++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%28err%29+%3Cspan+class%3D%22hljs-built_in%22%3Econsole%3C%2Fspan%3E.log%28err%29%3B%0A++++%7D%29%3B%0A++++FAKE_OUTLET.powerOn%3D%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E%3B%0A++%7D%2C%0A++++%3Cspan+class%3D%22hljs-attribute%22%3Eidentify%3C%2Fspan%3E%3A+%3Cspan+class%3D%22hljs-reserved%22%3Efunction%3C%2Fspan%3E%28%29+%7B%0A++++%3Cspan+class%3D%22hljs-built_in%22%3Econsole%3C%2Fspan%3E.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Identify+the+MySound.%22%3C%2Fspan%3E%29%3B%0A++++%7D%0A%7D%0A%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+Generate+a+consistent+UUID+%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+our+MySound+Accessory+that+will+remain+the+same+even+%3Cspan+class%3D%22hljs-keyword%22%3Ewhen%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+restarting+our+server.+We+use+the+%60%3Cspan+class%3D%22javascript%22%3Euuid.generate%3C%2Fspan%3E%60+helper+%3Cspan+class%3D%22hljs-reserved%22%3Efunction%3C%2Fspan%3E+to+create+a+deterministic%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+UUID+based+%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E+an+arbitrary+%3Cspan+class%3D%22hljs-string%22%3E%22namespace%22%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Eand%3C%2Fspan%3E+the+accessory+name.%0A%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+outletUUID+%3D+uuid.generate%28%3Cspan+class%3D%22hljs-string%22%3E%27hap-nodejs%3Aaccessories%3AMySound%27%3C%2Fspan%3E%29%3B%0A%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+This+%3Cspan+class%3D%22hljs-keyword%22%3Eis%3C%2Fspan%3E+the+Accessory+that+we%3Cspan+class%3D%22hljs-string%22%3E%27ll+return+to+HAP-NodeJS+that+represents+our+fake+light.+var+outlet+%3D+exports.accessory+%3D+new+Accessory%28%27%3C%2Fspan%3EMySound%3Cspan+class%3D%22hljs-string%22%3E%27%2C+outletUUID%29%3B+%2F%2F+Add+properties+for+publishing+%28in+case+we%27%3C%2Fspan%3Ere+using+Core.js+%3Cspan+class%3D%22hljs-keyword%22%3Eand%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Enot%3C%2Fspan%3E+BridgedCore.js%29%0Aoutlet.username+%3D+%3Cspan+class%3D%22hljs-string%22%3E%221A%3A2B%3A3C%3A4D%3A5D%3AFG%22%3C%2Fspan%3E%3B%0Aoutlet.pincode+%3D+%3Cspan+class%3D%22hljs-string%22%3E%22031-45-154%22%3C%2Fspan%3E%3B%0A%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+set+some+basic+properties+%28these+values+are+arbitrary+%3Cspan+class%3D%22hljs-keyword%22%3Eand%3C%2Fspan%3E+setting+them+%3Cspan+class%3D%22hljs-keyword%22%3Eis%3C%2Fspan%3E+optional%29%0Aoutlet%0A++.getService%28Service.AccessoryInformation%29%0A++.setCharacteristic%28Characteristic.Manufacturer%2C+%3Cspan+class%3D%22hljs-string%22%3E%22Oltica%22%3C%2Fspan%3E%29%0A++.setCharacteristic%28Characteristic.Model%2C+%3Cspan+class%3D%22hljs-string%22%3E%22Rev-1%22%3C%2Fspan%3E%29%0A++.setCharacteristic%28Characteristic.SerialNumber%2C+%3Cspan+class%3D%22hljs-string%22%3E%22A1S2NASF88EW%22%3C%2Fspan%3E%29%3B%0A%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+listen+%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+the+%3Cspan+class%3D%22hljs-string%22%3E%22identify%22%3C%2Fspan%3E+event+%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E+Accessory%0Aoutlet.%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27identify%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-reserved%22%3Efunction%3C%2Fspan%3E%28paired%2C+callback%29+%7B%0A++FAKE_OUTLET.identify%28%29%3B%0A++callback%28%29%3B+%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+success%0A%7D%29%3B%0A%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+Add+the+actual+MySound+Service+%3Cspan+class%3D%22hljs-keyword%22%3Eand%3C%2Fspan%3E+listen+%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+change+events+from+iOS.%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+We+can+see+the+complete+list+%3Cspan+class%3D%22hljs-keyword%22%3Eof%3C%2Fspan%3E+Services+%3Cspan+class%3D%22hljs-keyword%22%3Eand%3C%2Fspan%3E+Characteristics+%3Cspan+class%3D%22hljs-keyword%22%3Ein%3C%2Fspan%3E+%60%3Cspan+class%3D%22javascript%22%3Elib%2Fgen%2FHomeKitTypes.js%3C%2Fspan%3E%60%0Aoutlet%0A++.addService%28Service.Outlet%2C+%3Cspan+class%3D%22hljs-string%22%3E%22My+Sound%22%3C%2Fspan%3E%29+%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+services+exposed+to+the+user+should+have+%3Cspan+class%3D%22hljs-string%22%3E%22names%22%3C%2Fspan%3E+like+%3Cspan+class%3D%22hljs-string%22%3E%22Fake+Light%22%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+us%0A++.getCharacteristic%28Characteristic.On%29%0A++.%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27set%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-reserved%22%3Efunction%3C%2Fspan%3E%28value%2C+callback%29+%7B%0A++++FAKE_OUTLET.setPowerOn%28value%29%3B%0A++++callback%28%29%3B+%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+Our+fake+Outlet+%3Cspan+class%3D%22hljs-keyword%22%3Eis%3C%2Fspan%3E+synchronous+-+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E+value+has+been+successfully+set%0A++%7D%29%3B%0A%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+We+want+to+intercept+requests+%3Cspan+class%3D%22hljs-keyword%22%3Efor%3C%2Fspan%3E+our+current+power+state+so+we+can+query+the+hardware+itself+instead+%3Cspan+class%3D%22hljs-keyword%22%3Eof%3C%2Fspan%3E%0A%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+allowing+HAP-NodeJS+to+%3Cspan+class%3D%22hljs-keyword%22%3Ereturn%3C%2Fspan%3E+the+cached+Characteristic.value.%0Aoutlet%0A++.getService%28Service.Outlet%29%0A++.getCharacteristic%28Characteristic.On%29%0A++.%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E%28%3Cspan+class%3D%22hljs-string%22%3E%27get%27%3C%2Fspan%3E%2C+%3Cspan+class%3D%22hljs-reserved%22%3Efunction%3C%2Fspan%3E%28callback%29+%7B%0A%0A++++%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E+event+%3Cspan+class%3D%22hljs-keyword%22%3Eis%3C%2Fspan%3E+emitted+%3Cspan+class%3D%22hljs-keyword%22%3Ewhen%3C%2Fspan%3E+you+ask+Siri+directly+whether+your+light+%3Cspan+class%3D%22hljs-keyword%22%3Eis%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-literal%22%3Eon%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Eor%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Enot%3C%2Fspan%3E.+you+might+query%0A++++%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+the+light+hardware+itself+to+find+%3Cspan+class%3D%22hljs-keyword%22%3Ethis%3C%2Fspan%3E+out%2C+%3Cspan+class%3D%22hljs-keyword%22%3Ethen%3C%2Fspan%3E+call+the+callback.+But+%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+you+take+longer+than+a%0A++++%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+few+seconds+to+respond%2C+Siri+will+give+up.%0A%0A++++%3Cspan+class%3D%22hljs-reserved%22%3Evar%3C%2Fspan%3E+err+%3D+%3Cspan+class%3D%22hljs-literal%22%3Enull%3C%2Fspan%3E%3B+%3Cspan+class%3D%22hljs-regexp%22%3E%2F%2F%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-keyword%22%3Ein%3C%2Fspan%3E+%3Cspan+class%3D%22hljs-reserved%22%3Ecase%3C%2Fspan%3E+there+were+any+problems%0A%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eif%3C%2Fspan%3E+%28FAKE_OUTLET.powerOn%29+%7B%0A++++++%3Cspan+class%3D%22hljs-built_in%22%3Econsole%3C%2Fspan%3E.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Are+we+on%3F+Yes.%22%3C%2Fspan%3E%29%3B%0A++++++callback%28err%2C+%3Cspan+class%3D%22hljs-literal%22%3Etrue%3C%2Fspan%3E%29%3B%0A++++%7D%0A++++%3Cspan+class%3D%22hljs-keyword%22%3Eelse%3C%2Fspan%3E+%7B%0A++++++%3Cspan+class%3D%22hljs-built_in%22%3Econsole%3C%2Fspan%3E.log%28%3Cspan+class%3D%22hljs-string%22%3E%22Are+we+on%3F+No.%22%3C%2Fspan%3E%29%3B%0A++++++callback%28err%2C+%3Cspan+class%3D%22hljs-literal%22%3Efalse%3C%2Fspan%3E%29%3B%0A++++%7D%0A++%7D%29%3B+%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E6%8E%A7%E5%88%B6%E4%B9%9F%E6%98%AF%E9%80%9A%E8%BF%87%E8%B0%83%E7%94%A8+gpio.py+%E7%9A%84+python+%E8%84%9A%E6%9C%AC%EF%BC%8C%E5%92%8C+4.1+%E9%87%8C%E9%9D%A2%E7%9A%84+python+%E8%84%9A%E6%9C%AC%E4%B8%80%E6%A0%B7%E7%9A%84%E3%80%82%3C%2Fp%3E+%0A+++%3Cp%3E%E5%A5%BD%E4%BA%86%EF%BC%8C%E7%8E%B0%E5%9C%A8%E5%8F%AF%E4%BB%A5%E9%87%8D%E5%90%AF%E4%B8%80%E4%B8%8B%E6%A0%91%E8%8E%93%E6%B4%BE%E3%80%82%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Ch3+id%3D%225%E5%B0%86homekit%E8%AE%BE%E5%A4%87%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%AE%B6%E5%BA%AD%E4%B8%AD%22%3E5.%E5%B0%86HomeKit%E8%AE%BE%E5%A4%87%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%AE%B6%E5%BA%AD%E4%B8%AD%3C%2Fh3%3E+%0A++%3Cp%3E%3Cimg+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20171117210948168%3Fwatermark%2F2%2Ftext%2FaHR0cDovL2Jsb2cuY3Nkbi5uZXQva3h3aW54cA%3D%3D%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%2Fgravity%2FSouthEast%22+alt%3D%22%E6%B7%BB%E5%8A%A0%E8%AE%BE%E5%A4%87%22+title%3D%22%22%3E%3C%2Fp%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E5%A6%82%E5%9B%BE%EF%BC%8C%E9%80%89%E6%8B%A9%E5%B0%86%E8%BF%99%E4%BA%9B%E8%AE%BE%E5%A4%87%E6%B7%BB%E5%8A%A0%E8%BF%9B%E5%8E%BB%EF%BC%8C%E8%BE%93%E5%85%A5%E8%AE%A4%E8%AF%81%E4%BB%A3%E7%A0%81+%3Ccode%3E03145154%3C%2Fcode%3E%EF%BC%88%E8%BF%99%E4%B8%AA%E5%8F%AF%E4%BB%A5%E5%9C%A8accessary.js%E4%BF%AE%E6%94%B9%EF%BC%89%E3%80%82%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A++%3Cp%3E%3Cimg+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20171123233146977%3Fwatermark%2F2%2Ftext%2FaHR0cDovL2Jsb2cuY3Nkbi5uZXQva3h3aW54cA%3D%3D%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%2Fgravity%2FSouthEast%22+alt%3D%22%E8%BF%99%E9%87%8C%E5%86%99%E5%9B%BE%E7%89%87%E6%8F%8F%E8%BF%B0%22+title%3D%22%22%3E%3C%2Fp%3E+%0A++%3Cblockquote%3E+%0A+++%3Cp%3E%E7%84%B6%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%84%89%E5%BF%AB%E4%BD%BF%E7%94%A8+Siri+%E8%BF%9B%E8%A1%8C%E8%AF%AD%E9%9F%B3%E6%8E%A7%E5%88%B6%E4%BA%86%EF%BC%81%3C%2Fp%3E+%0A++%3C%2Fblockquote%3E+%0A+%3C%2Fdiv%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fmarkdown_views-ea0013b516.css%22%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fkxwinxp%2Farticle%2Fdetails%2F78434062%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fkxwinxp%2Farticle%2Fdetails%2F78434062%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}