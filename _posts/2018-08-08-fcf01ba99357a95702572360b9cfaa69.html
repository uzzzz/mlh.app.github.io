---
layout: default
title: web3j 发送以太币(ropsten 测试网络)
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3E%E8%BF%99%E9%87%8C%E8%BF%9E%E6%8E%A5%E7%9A%84ropsten%E7%BD%91%E7%BB%9C%2C%E6%9C%AC%E6%9D%A5%E6%83%B3%E5%86%99%E8%BF%99%E4%B9%88%E8%BF%9B%E8%A1%8CERC20+%E4%BB%A3%E5%B8%81%E7%9A%84%E8%BD%AC%E8%B4%A6%2C%E5%8F%AF%E6%98%AF%E4%B8%80%E7%9B%B4%E5%9B%A0%E4%B8%BAgas+%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%B2%A1%E6%88%90%E5%8A%9F%2C%E5%AF%B9%E4%BA%8E%E8%BF%99%E4%B8%AA%E6%88%91%E4%B9%9F%E4%B8%8D%E6%98%AF%E5%BE%88%E7%86%9F%E6%82%89%2C%E5%B0%B1%E5%85%88%E6%94%BE%E4%B8%8A%E4%BB%A5%E5%A4%AA%E5%B8%81%E8%BD%AC%E8%B4%A6%E7%9A%84%E4%BE%8B%E5%AD%90%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epackage+test%3B%0A%0Aimport+java.io.IOException%3B%0Aimport+java.math.BigDecimal%3B%0Aimport+java.math.BigInteger%3B%0Aimport+java.util.concurrent.ExecutionException%3B%0A%0Aimport+org.web3j.crypto.Credentials%3B%0Aimport+org.web3j.crypto.RawTransaction%3B%0Aimport+org.web3j.crypto.TransactionEncoder%3B%0Aimport+org.web3j.protocol.Web3j%3B%0Aimport+org.web3j.protocol.admin.Admin%3B%0Aimport+org.web3j.protocol.core.DefaultBlockParameterName%3B%0Aimport+org.web3j.protocol.core.RemoteCall%3B%0Aimport+org.web3j.protocol.core.methods.response.EthGetTransactionCount%3B%0Aimport+org.web3j.protocol.core.methods.response.EthSendTransaction%3B%0Aimport+org.web3j.protocol.core.methods.response.TransactionReceipt%3B%0Aimport+org.web3j.protocol.http.HttpService%3B%0Aimport+org.web3j.tx.gas.DefaultGasProvider%3B%0Aimport+org.web3j.utils.Convert%3B%0Aimport+org.web3j.utils.Numeric%3B%0A%0Aimport+contract.MttContract%3B%0Aimport+sun.reflect.generics.reflectiveObjects.NotImplementedException%3B%0A%0A%0A%2F**%0A+*+%E9%80%9A%E8%BF%87%E8%BE%93%E5%85%A5%E7%A7%81%E9%92%A5%E7%9A%84%E6%96%B9%E5%BC%8F%2C%E5%8F%96%E5%BE%97%E9%92%B1%E5%8C%85%E6%9D%83%E9%99%90%E8%BD%AC%E8%B4%A6%0A+*+%E5%8F%82%E8%80%83%3A+https%3A%2F%2Fwww.cnblogs.com%2Fhongpxiaozhu%2Fp%2F8574986.html%0A+*+%40author+12198%0A+*%0A+*%2F%0Apublic+class+Test+%7B%0A%09%0A%09%0A++++public+static+void+main%28String%5B%5D+args%29+throws+Exception+%7B%0A++++++++String+sendTest+%3D+sendTest%28StaticValue.myRopstenService%2C+StaticValue.account2%2C+StaticValue.account1%2C+StaticValue.account2Pri%2C+%221%22%29%3B%0A++++++++System.out.println%28sendTest%29%3B%0A++++++++%0A%2F%2F++++++++String+sendERC20+%3D+sendERC20%28StaticValue.myRopstenService%2C+StaticValue.account2%2C+StaticValue.account1%2C+StaticValue.MttContractAddress%2C+StaticValue.account2Pri%2C+%22100000%22%29%3B%0A%2F%2F++++++++System.out.println%28sendERC20%29%3B%0A++++%7D%0A++++%0A+++%0A++++%0A++++%0A++++public+static+String+sendTest%28String+netUrl%2CString+ownAddress%2CString+toAddress%2CString+fromPri%2CString+bigDecimalValue%29+throws+InterruptedException%2C+ExecutionException%2C+IOException%7B%0A++++%09%2F%2F%E8%AE%BE%E7%BD%AE%E9%9C%80%E8%A6%81%E7%9A%84%E7%9F%BF%E5%B7%A5%E8%B4%B9%0A++++++++BigInteger+GAS_PRICE+%3D+BigInteger.valueOf%2822_000_000_000L%29%3B%0A++++++++BigInteger+GAS_LIMIT+%3D+BigInteger.valueOf%284_300_000%29%3B%0A%0A++++++++%2F%2F%E8%B0%83%E7%94%A8%E7%9A%84%E6%98%AFkovan%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%EF%BC%8C%E8%BF%99%E9%87%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AFinfura%E8%BF%99%E4%B8%AA%E5%AE%A2%E6%88%B7%E7%AB%AF+++https%3A%2F%2Fkovan.infura.io%2F%26lt%3Byour-token%26gt%3B%0A++++++++Web3j+web3j+%3D+getWeb3j%28netUrl%29%3B%0A++++++++%0A++++++++%2F%2F%E8%8E%B7%E5%BE%97%E4%BD%99%E9%A2%9D%0A++++++++String+ethBanlance+%3D+TestGetBalance.getEthBanlance%28web3j%2C+ownAddress%29%3B%0A++++++++String+checkMoney+%3D+checkMoney%28bigDecimalValue%2C+ethBanlance%29%3B%0A++++++++if%28%21checkMoney.contentEquals%28%22%22%29%29%7B%0A++++++++%09return+checkMoney%3B%0A++++++++%7D%0A++++++++%0A%2F%2F++++++++Web3j+web3j+%3D+Web3j.build%28new+HttpService%28StaticValue.chongtiService%29%29%3B+%2F%2Ftest%0A%2F%2F++++++++Web3j+web3j+%3D+Web3j.build%28new+HttpService%28chongtiService%29%29%3B+%2F%2Ftest%0A++++++++%2F%2F%E8%BD%AC%E8%B4%A6%E4%BA%BA%E8%B4%A6%E6%88%B7%E5%9C%B0%E5%9D%80%0A%2F%2F++++++++String+ownAddress+%3D+StaticValue.account1%3B%0A++++++++%2F%2F%E8%A2%AB%E8%BD%AC%E4%BA%BA%E8%B4%A6%E6%88%B7%E5%9C%B0%E5%9D%80%0A%2F%2F++++++++String+toAddress+%3D+StaticValue.account2%3B%0A%2F%2F++++++++String+toAddress+%3D+StaticValue.testk1234%3B%0A%2F%2F++++++++String+toAddress+%3D+testk1234%3B%0A++++++++%2F%2F%E8%BD%AC%E8%B4%A6%E4%BA%BA%E7%A7%81%E9%92%A5%0A++++++++Credentials+credentials+%3D+Credentials.create%28fromPri%29%3B%0A+++++++%0A++++++++BigInteger+nonce+%3D+getNonce%28web3j%2C+ownAddress%29%3B%0A%0A++++++++%2F%2F%E5%88%9B%E5%BB%BA%E4%BA%A4%E6%98%93%EF%BC%8C%E8%BF%99%E9%87%8C%E6%98%AF%E8%BD%AC0.5%E4%B8%AA%E4%BB%A5%E5%A4%AA%E5%B8%81%0A++++++++BigInteger+value+%3D+Convert.toWei%28bigDecimalValue%2C+Convert.Unit.ETHER%29.toBigInteger%28%29%3B%0A++++++++RawTransaction+rawTransaction+%3D+RawTransaction.createEtherTransaction%28%0A++++++++++++++++nonce%2C+GAS_PRICE%2C+GAS_LIMIT%2C+toAddress%2C+value%29%3B%0A%0A++++++++%2F%2F%E7%AD%BE%E5%90%8DTransaction%EF%BC%8C%E8%BF%99%E9%87%8C%E8%A6%81%E5%AF%B9%E4%BA%A4%E6%98%93%E5%81%9A%E7%AD%BE%E5%90%8D%0A++++++++byte%5B%5D+signedMessage+%3D+TransactionEncoder.signMessage%28rawTransaction%2C+credentials%29%3B%0A++++++++String+hexValue+%3D+Numeric.toHexString%28signedMessage%29%3B%0A%0A++++++++%2F%2F%E5%8F%91%E9%80%81%E4%BA%A4%E6%98%93%0A++++++++EthSendTransaction+ethSendTransaction+%3D%0A++++++++++++++++web3j.ethSendRawTransaction%28hexValue%29.send%28%29%3B%0A++++++++String+transactionHash+%3D+ethSendTransaction.getTransactionHash%28%29%3B%0A%0A+++++++%0A++++++++%2F%2F%E8%8E%B7%E5%BE%97%E5%88%B0transactionHash%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%88%B0%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%9A%84%E7%BD%91%E7%AB%99%E4%B8%8A%E6%9F%A5%E8%AF%A2%E8%BF%99%E7%AC%94%E4%BA%A4%E6%98%93%E7%9A%84%E7%8A%B6%E6%80%81%E4%BA%86%0A++++++++printTransaction%28rawTransaction%29%3B%0A++++++++System.out.println%28%22%E4%BA%A4%E6%98%93id%3A%22%2BtransactionHash%29%3B%0A++++++++%0A++++++++close%28web3j%29%3B%0A++++++++if%28transactionHash+%21%3D+null%29%7B%0A++++++++%09return+%22peding%22%3B%2F%2F%E4%BA%A4%E6%98%93%E8%BF%9B%E8%A1%8C%E4%B8%AD%0A++++++++%7Delse%7B%0A++++++++%09return+%22fail%22%3B%2F%2F%E4%BA%A4%E6%98%93%E5%A4%B1%E8%B4%A5%0A++++++++%7D%0A%09%09%0A++++%7D%0A++++%0A++%0A+++%0A++++%0A++++%0A++++%0A++++%0A++++%0A++++%2F**%0A%09+*+%E8%BF%9E%E6%8E%A5%E7%BD%91%E7%BB%9C%0A%09+*+%40param+netUrl%0A%09+*+%40return%0A%09+*%2F%0A%09public+static+Web3j+getWeb3j%28String+netUrl%29%7B%0A%09%09Admin+web3j+%3D+Admin.build%28new+HttpService%28netUrl%29%29%3B%0A%09%09return+web3j%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09+*+%E5%85%B3%E9%97%AD%E7%BD%91%E7%BB%9C%0A%09+*+%40param+web3j%0A%09+*%2F%0A%09public+static+void+close%28Web3j+web3j%29%7B%0A%09%09web3j.shutdown%28%29%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09+*+%E8%8E%B7%E5%BE%97%E4%BA%A4%E6%98%93%E7%AC%94%E6%95%B0%0A%09+*+%40param+web3j%0A%09+*+%40param+ownAddress%0A%09+*+%40return%0A%09+*+%40throws+InterruptedException%0A%09+*+%40throws+ExecutionException%0A%09+*+%40throws+IOException+%0A%09+*%2F%0A%09public+static+BigInteger+getNonce%28Web3j+web3j%2CString+ownAddress%29+throws+InterruptedException%2C+ExecutionException%2C+IOException%7B%0A%09%09+%2F%2FgetNonce%EF%BC%88%E8%BF%99%E9%87%8C%E7%9A%84Nonce%E6%88%91%E4%B9%9F%E4%B8%8D%E6%98%AF%E5%BE%88%E6%98%8E%E7%99%BD%EF%BC%8C%E5%A4%A7%E6%A6%82%E6%98%AF%E4%BA%A4%E6%98%93%E7%9A%84%E7%AC%94%E6%95%B0%E5%90%A7%EF%BC%89%0A%09%09+EthGetTransactionCount+ethGetTransactionCount+%3D+web3j.ethGetTransactionCount%28%0A%09++++++++++++++++ownAddress%2C+DefaultBlockParameterName.LATEST%29.send%28%29%3B%0A%09++++++++BigInteger+nonce+%3D+ethGetTransactionCount.getTransactionCount%28%29%3B%0A%09++++++++return+nonce%3B%0A%09%7D%0A%09%0A%09%2F**%0A%09+*+%E9%92%B1%E5%8C%85%E5%9C%B0%E5%9D%80%E4%BD%99%E9%A2%9D%E6%98%AF%E5%90%A6%E8%B6%B3%E5%A4%9F%E8%BD%AC%E8%B4%A6%E6%A0%A1%E9%AA%8C%0A%09+*+%40param+bigDecimalValue%0A%09+*+%40param+addressBalance%0A%09+*+%40return%0A%09+*%2F%0A%09public+static+String+checkMoney%28String+bigDecimalValue%2CString+addressBalance%29%7B%0A%09%09if%28new+BigDecimal%28addressBalance%29.subtract%28new+BigDecimal%28bigDecimalValue%29%29.compareTo%28new+BigDecimal%28%220%22%29%29+%26lt%3B%3D+0%29%7B%0A++++++++%09return++%22%E8%BD%AC%E8%B4%A6%E9%87%91%E9%A2%9D%E5%A4%A7%E4%BA%8E%E9%92%B1%E5%8C%85%E5%9C%B0%E5%9D%80%E4%BD%99%E9%A2%9D%22%3B%0A++++++++%7Delse%7B%0A++++++++%09return+%22%22%3B%0A++++++++%7D%0A%09%09%0A%09%7D%0A%09%0A%09+%2F**%0A+++++*+%E6%89%93%E5%8D%B0%E4%BA%8B%E5%8A%A1%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BF%A1%E6%81%AF%0A+++++*+%40param+rawTransaction%0A+++++*%2F%0A++++private+static+void+printTransaction%28RawTransaction+rawTransaction%29%7B%0A++++%09System.out.println%28%22%E4%BA%A4%E6%98%93%E6%97%B6%E9%97%B4%22%2BrawTransaction.getData%28%29%29%3B%0A++++%09System.out.println%28%22%E8%BD%AC%E5%85%A5%E5%9C%B0%E5%9D%80%3A%22%2BrawTransaction.getTo%28%29%29%3B%0A++++%09System.out.println%28%22gaslimit%3A%22%2BrawTransaction.getGasLimit%28%29%29%3B%0A++++%09System.out.println%28%22gasPrice%3A%22%2BrawTransaction.getGasPrice%28%29%29%3B%0A++++%09System.out.println%28%22nonce%3A%22%2BrawTransaction.getNonce%28%29%29%3B%0A++++%09System.out.println%28%22value%3A%22%2BrawTransaction.getValue%28%29%29%3B%0A++++%7D%0A%09%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%E5%8F%82%E8%80%83%3A+%3Ca+href%3D%22https%3A%2F%2Fwww.cnblogs.com%2Fhongpxiaozhu%2Fp%2F8574986.html%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fwww.cnblogs.com%2Fhongpxiaozhu%2Fp%2F8574986.html%3C%2Fa%3E%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fkzcming%2Farticle%2Fdetails%2F81511679%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fkzcming%2Farticle%2Fdetails%2F81511679%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}