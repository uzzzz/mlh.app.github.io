---
layout: default
title: php实现银联网关/WAP支付接入
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3E%E9%93%B6%E8%81%94%E6%94%AF%E4%BB%98%E7%94%A8%E7%9A%84%E8%BF%98%E6%98%AF%E6%AF%94%E8%BE%83%E5%B0%91%E7%9A%84%EF%BC%8C%E8%80%8C%E4%B8%94%E5%BC%80%E5%8F%91%E4%B8%AD%E4%B9%9F%E6%B2%A1%E6%8E%A5%E8%A7%A6%E5%A4%9A%E5%B0%91%EF%BC%8C%E4%B8%8D%E8%BF%87%E5%9B%A0%E4%B8%BA%E5%B7%A5%E4%BD%9C%E9%A1%B9%E7%9B%AE%E7%94%A8%E9%93%B6%E8%81%94%E6%94%AF%E4%BB%98%E8%83%BD%E9%99%8D%E4%BD%8E%E8%B4%B9%E7%8E%87%EF%BC%8C%E6%89%80%E4%BB%A5%E8%BF%98%E6%98%AF%E6%8E%A5%E5%85%A5%E4%BA%86%E9%93%B6%E8%81%94%E6%94%AF%E4%BB%98%E3%80%82%E6%9C%AC%E6%96%87%E6%94%AF%E4%BB%98%E4%B8%BA%E9%93%B6%E8%81%94%E7%BD%91%E5%85%B3%E5%92%8CWAP%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3%E3%80%82%3C%2Fp%3E+%0A++%3Cp%3E%E5%AE%98%E6%96%B9%E7%BD%91%E7%AB%99SDK%26amp%3BDEMO%3Ahttps%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fproduct%2Fdetail%3Fid%3D66%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cdiv%3E%0A+++%E4%BA%A7%E5%93%81API%3A%0A+++%3Ca+href%3D%22https%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fproduct%2FnewProApiShow%3FproId%3D1%26amp%3BapiId%3D63%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fproduct%2FnewProApiShow%3FproId%3D1%26amp%3BapiId%3D63%3C%2Fa%3E%0A++%3C%2Fdiv%3E+%0A++%3Cdiv%3E%0A+++API%E6%96%87%E6%A1%A3%0A+++%3Ca+href%3D%22https%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2Fapi%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2Fapi%3C%2Fa%3E%0A++%3C%2Fdiv%3E+%E5%9C%A8%E5%BC%80%E5%A7%8B%E4%B9%8B%E5%89%8D%E8%A6%81%E4%BB%94%E7%BB%86%E9%98%85%E8%AF%BB%E5%AE%98%E6%96%B9%E5%8C%85%E9%87%8C%E7%9A%84%E8%AF%B4%E6%98%8E%E6%96%87%E4%BB%B6%EF%BC%8C%E5%BF%85%E8%A6%81%E7%9A%84%E8%AF%81%E4%B9%A6%E5%92%8C%E5%95%86%E6%88%B7%E4%BF%A1%E6%81%AF%E8%A6%81%E6%8F%90%E5%89%8D%E8%8E%B7%E5%8F%96%E3%80%82+%0A++%3Cp%3E%3C%2Fp%3E+%0A++%3Cp%3E%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81%E5%8F%8A%E6%AD%A5%E9%AA%A4%EF%BC%9A%3C%2Fp%3E+%0A++%3Cp%3E%3Cspan%3E%3Cspan+style%3D%22font-size%3A14pt%3B%22%3E%E4%BF%AE%E6%94%B9demo%2Fapi_01_gateway%2FForm_6_2_FrontConsume.php%28%E5%8F%91%E9%80%81%E8%AE%A2%E5%8D%95%E5%8F%82%E6%95%B0%EF%BC%8C%E8%B7%B3%E8%BD%AC%E6%94%AF%E4%BB%98%E7%95%8C%E9%9D%A2%29%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fp%3E+%0A++%3Cp%3E%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-html%22%3E%26lt%3B%3Fphp%0Aheader+%28+%27Content-type%3Atext%2Fhtml%3Bcharset%3Dutf-8%27+%29%3B%0Ainclude_once%28%22..%2F..%2F..%2F..%2Finclude%2Fconfig.inc.php%22%29%3B%0Ainclude_once+dirname+%28+__FILE__+%29.DIRECTORY_SEPARATOR+.+%27.%2F..%2F..%2Fsdk%2Facp_service.php%27%3B%0A%0A%2F**%0A*+%E9%87%8D%E8%A6%81%EF%BC%9A%E8%81%94%E8%B0%83%E6%B5%8B%E8%AF%95%E6%97%B6%E8%AF%B7%E4%BB%94%E7%BB%86%E9%98%85%E8%AF%BB%E6%B3%A8%E9%87%8A%EF%BC%81%0A*%0A*+%E4%BA%A7%E5%93%81%EF%BC%9A%E8%B7%B3%E8%BD%AC%E7%BD%91%E5%85%B3%E6%94%AF%E4%BB%98%E4%BA%A7%E5%93%81%26lt%3Bbr%26gt%3B%0A*+%E4%BA%A4%E6%98%93%EF%BC%9A%E6%B6%88%E8%B4%B9%EF%BC%9A%E5%89%8D%E5%8F%B0%E8%B7%B3%E8%BD%AC%EF%BC%8C%E6%9C%89%E5%89%8D%E5%8F%B0%E9%80%9A%E7%9F%A5%E5%BA%94%E7%AD%94%E5%92%8C%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E5%BA%94%E7%AD%94%26lt%3Bbr%26gt%3B%0A*+%E6%97%A5%E6%9C%9F%EF%BC%9A+2015-09%26lt%3Bbr%26gt%3B%0A*+%E7%89%88%E6%9C%AC%EF%BC%9A+1.0.0%0A*+%E7%89%88%E6%9D%83%EF%BC%9A+%E4%B8%AD%E5%9B%BD%E9%93%B6%E8%81%94%26lt%3Bbr%26gt%3B%0A*+%E8%AF%B4%E6%98%8E%EF%BC%9A%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E5%8F%AA%E6%98%AF%E4%B8%BA%E4%BA%86%E6%96%B9%E4%BE%BF%E5%95%86%E6%88%B7%E6%B5%8B%E8%AF%95%E8%80%8C%E6%8F%90%E4%BE%9B%E7%9A%84%E6%A0%B7%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%95%86%E6%88%B7%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E9%9C%80%E8%A6%81%EF%BC%8C%E6%8C%89%E7%85%A7%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%E7%BC%96%E5%86%99%E3%80%82%E8%AF%A5%E4%BB%A3%E7%A0%81%E4%BB%85%E4%BE%9B%E5%8F%82%E8%80%83%EF%BC%8C%E4%B8%8D%E6%8F%90%E4%BE%9B%E7%BC%96%E7%A0%81%E6%80%A7%E8%83%BD%E8%A7%84%E8%8C%83%E6%80%A7%E7%AD%89%E6%96%B9%E9%9D%A2%E7%9A%84%E4%BF%9D%E9%9A%9C%26lt%3Bbr%26gt%3B%0A*+%E6%8F%90%E7%A4%BA%EF%BC%9A%E8%AF%A5%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%E4%BD%8D%E7%BD%AE%EF%BC%9Aopen.unionpay.com%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83+%E4%B8%8B%E8%BD%BD++%E4%BA%A7%E5%93%81%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83++%E3%80%8A%E7%BD%91%E5%85%B3%E6%94%AF%E4%BB%98%E4%BA%A7%E5%93%81%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83%E3%80%8B%EF%BC%8C%26lt%3Bbr%26gt%3B%0A*++++++++++++++%E3%80%8A%E5%B9%B3%E5%8F%B0%E6%8E%A5%E5%85%A5%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83-%E7%AC%AC5%E9%83%A8%E5%88%86-%E9%99%84%E5%BD%95%E3%80%8B%EF%BC%88%E5%86%85%E5%8C%85%E5%90%AB%E5%BA%94%E7%AD%94%E7%A0%81%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83%EF%BC%8C%E5%85%A8%E6%B8%A0%E9%81%93%E5%B9%B3%E5%8F%B0%E9%93%B6%E8%A1%8C%E5%90%8D%E7%A7%B0-%E7%AE%80%E7%A0%81%E5%AF%B9%E7%85%A7%E8%A1%A8%29%26lt%3Bbr%26gt%3B%0A*++++++++++++++%E3%80%8A%E5%85%A8%E6%B8%A0%E9%81%93%E5%B9%B3%E5%8F%B0%E6%8E%A5%E5%85%A5%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83+%E7%AC%AC3%E9%83%A8%E5%88%86+%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E3%80%8B%EF%BC%88%E5%AF%B9%E8%B4%A6%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E%EF%BC%89%26lt%3Bbr%26gt%3B%0A*+%E6%B5%8B%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E5%A6%82%E6%9E%9C%E9%81%87%E5%88%B0%E7%96%91%E9%97%AE%E6%88%96%E9%97%AE%E9%A2%98%E6%82%A8%E5%8F%AF%E4%BB%A5%EF%BC%9A1%EF%BC%89%E4%BC%98%E5%85%88%E5%9C%A8open%E5%B9%B3%E5%8F%B0%E4%B8%AD%E6%9F%A5%E6%89%BE%E7%AD%94%E6%A1%88%EF%BC%9A%0A*++++++++++++++++++++++++++++++++%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E6%88%96%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98%E8%AF%B7%E5%9C%A8+https%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2Ffaq%2Flist%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83+FAQ+%E6%90%9C%E7%B4%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%0A*+++++++++++++++++++++++++++++%E6%B5%8B%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%BA%A7%E7%94%9F%E7%9A%847%E4%BD%8D%E5%BA%94%E7%AD%94%E7%A0%81%E9%97%AE%E9%A2%98%E7%96%91%E9%97%AE%E8%AF%B7%E5%9C%A8https%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2FrespCode%2FrespCodeList%E8%BE%93%E5%85%A5%E5%BA%94%E7%AD%94%E7%A0%81%E6%90%9C%E7%B4%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%0A*++++++++++++++++++++++++++2%EF%BC%89+%E5%92%A8%E8%AF%A2%E5%9C%A8%E7%BA%BF%E4%BA%BA%E5%B7%A5%E6%94%AF%E6%8C%81%EF%BC%9A+open.unionpay.com%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E5%B9%B6%E7%99%BB%E9%99%86%E5%9C%A8%E5%8F%B3%E4%B8%8A%E8%A7%92%E7%82%B9%E5%87%BB%E2%80%9C%E5%9C%A8%E7%BA%BF%E5%AE%A2%E6%9C%8D%E2%80%9D%EF%BC%8C%E5%92%A8%E8%AF%A2%E4%BA%BA%E5%B7%A5QQ%E6%B5%8B%E8%AF%95%E6%94%AF%E6%8C%81%E3%80%82%0A*+%E4%BA%A4%E6%98%93%E8%AF%B4%E6%98%8E%3A1%EF%BC%89%E4%BB%A5%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E6%88%96%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E7%A1%AE%E5%AE%9A%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%2C%E5%89%8D%E5%8F%B0%E9%80%9A%E7%9F%A5%E4%B8%8D%E8%83%BD%E4%BD%9C%E4%B8%BA%E5%88%A4%E6%96%AD%E6%88%90%E5%8A%9F%E7%9A%84%E6%A0%87%E5%87%86.%0A*+++++++2%EF%BC%89%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%EF%BC%88Form_6_5_Query%EF%BC%89%E5%BB%BA%E8%AE%AE%E8%B0%83%E7%94%A8%E6%9C%BA%E5%88%B6%EF%BC%9A%E5%89%8D%E5%8F%B0%E7%B1%BB%E4%BA%A4%E6%98%93%E5%BB%BA%E8%AE%AE%E9%97%B4%E9%9A%94%EF%BC%885%E5%88%86%E3%80%8110%E5%88%86%E3%80%8130%E5%88%86%E3%80%8160%E5%88%86%E3%80%81120%E5%88%86%EF%BC%89%E5%8F%91%E8%B5%B7%E4%BA%A4%E6%98%93%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9F%A5%E8%AF%A2%E5%88%B0%E7%BB%93%E6%9E%9C%E6%88%90%E5%8A%9F%EF%BC%8C%E5%88%99%E4%B8%8D%E7%94%A8%E5%86%8D%E6%9F%A5%E8%AF%A2%E3%80%82%EF%BC%88%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%A4%84%E7%90%86%E4%B8%AD%EF%BC%8C%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%88%B0%E8%AE%A2%E5%8D%95%E5%9D%87%E5%8F%AF%E8%83%BD%E4%B8%BA%E4%B8%AD%E9%97%B4%E7%8A%B6%E6%80%81%EF%BC%89%E3%80%82%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%BB%BA%E8%AE%AE%E5%95%86%E6%88%B7%E4%BD%BF%E7%94%A8payTimeout%EF%BC%88%E6%94%AF%E4%BB%98%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%EF%BC%89%EF%BC%8C%E8%BF%87%E4%BA%86%E8%BF%99%E4%B8%AA%E6%97%B6%E9%97%B4%E7%82%B9%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%BE%97%E5%88%B0%E7%9A%84%E7%BB%93%E6%9E%9C%E4%B8%BA%E6%9C%80%E7%BB%88%E7%BB%93%E6%9E%9C%E3%80%82%0A*%2F%0A%0A%2F%2F%E6%8E%A5%E6%94%B6%E6%94%AF%E4%BB%98%E6%95%B0%E6%8D%AE%0A%24order_data+++++++%3D+trim%28get_param%28%22orderDa%22%29%29%3B+%2F%2F%E8%AE%A2%E5%8D%95%E6%95%B0%E6%8D%AE%0Aif%28%24order_data+%3D%3D+%22%22+%29%7B%0A++++%24mssage+%3D+%22%E6%95%B0%E6%8D%AE%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA%22%3B%0A++++showinfo%28%24mssage%2C%27%27+%2C3%29%3B%0A++++exit%3B%0A%7D%0A%24result_order+%3D+json_decode%28uc_authcode%28base64_decode%28%24order_data%29%2C+%27DECODE%27%2C+ADMIN_KEY%29%2Ctrue%29%3B%0A%0A%2F%2F%E5%95%86%E6%88%B7%E8%AE%A2%E5%8D%95%E5%8F%B7%EF%BC%8C%E5%95%86%E6%88%B7%E7%BD%91%E7%AB%99%E8%AE%A2%E5%8D%95%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%94%AF%E4%B8%80%E8%AE%A2%E5%8D%95%E5%8F%B7%EF%BC%8C%E5%BF%85%E5%A1%AB%0A%24out_trade_no+%3D+%24result_order%5B%27WIDout_trade_no%27%5D%3B%0A%0A%2F%2F%E4%BB%98%E6%AC%BE%E9%87%91%E9%A2%9D%EF%BC%8C%E5%BF%85%E5%A1%AB%28%E5%8D%95%E4%BD%8D%E5%85%83%29%0A%24total_amount+%3D+%24result_order%5B%27WIDtotal_amount%27%5D%3B%0A%0A%2F%2F%E5%95%86%E6%88%B7%E4%BB%A3%E7%A0%81%EF%BC%8C%E8%AF%B7%E6%94%B9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%B5%8B%E8%AF%95%E5%95%86%E6%88%B7%E5%8F%B7%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%0A%0A%0A%2F%2F%E8%AE%A2%E5%8D%95%E5%8F%91%E9%80%81%E6%97%B6%E9%97%B4%0A%24send_time+%3D+date%28%27YmdHis%27%2CTHIS_DATETIME%29%3B%0A%0A%2F%2F%E8%AE%A2%E5%8D%95%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%0A%24time_out+%3D+date%28%27YmdHis%27%2Cstrtotime%28%27%2B15+minutes%27%2CTHIS_DATETIME%29%29%3B%0A%0A%2F%2F%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%0A%24pay_md5++++++%3D+%24result_order%5B%27infoPy%27%5D%3B++++++++++++%2F%2F%E8%AE%A2%E5%8D%95%E9%AA%8C%E8%AF%81%0A%0Aif%28%24out_trade_no%3D%3D%27%27%29%7B%0A++++%24mssage+%3D+%22%E8%AE%A2%E5%8D%95%E5%8F%B7%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA%22%3B%0A++++showinfo%28%24mssage%2C%27%27+%2C3%29%3B%0A++++exit%3B%0A%7D%0Aif%28%24total_amount%3D%3D%27%27+%7C%7C+%24total_amount%3D%3D0%29%7B%0A++++%24mssage+%3D+%22%E8%AE%A2%E5%8D%95%E9%87%91%E9%A2%9D%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA%22%3B%0A++++showinfo%28%24mssage%2C%27%27+%2C3%29%3B%0A++++exit%3B%0A%7D%0A%0A%2F%2F%E8%B4%AD%E4%B9%B0%E5%95%86%E5%93%81%0Aif%28%24result_order%5B%27flag%27%5D%3D%3D%27paycard%27%29%7B%0A++++%2F%2F%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E6%9C%89%E8%AE%A2%E5%8D%95%E5%8F%B7%0A++++%24where+%3D+%22+and+o_orderid+%3D+%27%22.%24out_trade_no.%22%27+and+o_totalprice%3D%27%22.%24total_amount.%22%27+and+o_status%3D4++%22%3B%0A++++%24info++%3D+get_info%28%24GLOBALS%5B%22conn%22%5D%2C%22game_order%22%2Carray%28%29%2C%24where%29%3B%0A%0A++++if%28+empty%28%24info%29+%29%7B%0A++++++++%24mssage+%3D+%22%E6%B2%A1%E6%9C%89%E6%AD%A4%E8%AE%A2%E5%8D%95%EF%BC%81%22%3B%0A++++++++showinfo%28%24mssage%2C%27%27+%2C3%29%3B%0A++++++++exit%3B%0A++++%7D%0A++++%2F%2F%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%0A++++%24p_arr++%3D+array%28+%27uid%27%3D%26gt%3B%24info%5B%27o_playerid%27%5D%2C+%27uorder%27%3D%26gt%3B%24info%5B%27o_orderid%27%5D%2C+%27uprice%27%3D%26gt%3B%24info%5B%27o_totalprice%27%5D%2C%29%3B%0A++++%24p_time+%3D+%24info%5B%27o_addtime%27%5D%3B%0A++++%24p_key++%3D+ADMIN_KEY%3B%0A++++%24p_md5++%3D+md5%28%24p_arr.%24p_time.%24p_key%29%3B%0A++++if%28+%24p_md5+%21%3D+%24pay_md5+%29%7B%0A++++++++%24mssage+%3D+%22%E8%AF%B7%E5%8B%BF%E9%9D%9E%E6%B3%95%E6%93%8D%E4%BD%9C%EF%BC%81%22%3B%0A++++++++showinfo%28%24mssage%2C%27%27+%2C3%29%3B%0A++++++++exit%3B%0A++++%7D%0A%7D%0A%0A%2F%2F%E7%94%B3%E8%AF%B7%E8%BF%98%E6%AC%BE%0Aif%28%24result_order%5B%27flag%27%5D%3D%3D%27repayment%27%29%7B%0A++++%2F%2F%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E6%9C%89%E8%AE%A2%E5%8D%95%E5%8F%B7%0A++++%24where+%3D+%22+and+l_orderid+%3D+%27%22.%24out_trade_no.%22%27+and+l_returnnum%3D%27%22.%24total_amount.%22%27+and+l_status%3D3++%22%3B%0A++++%24info++%3D+get_info%28%24GLOBALS%5B%22conn%22%5D%2C%22game_loan_order%22%2Carray%28%29%2C%24where%29%3B%0A%0A++++if%28+empty%28%24info%29+%29%7B%0A++++++++%24mssage+%3D+%22%E6%B2%A1%E6%9C%89%E6%AD%A4%E8%AE%A2%E5%8D%95%EF%BC%81%22%3B%0A++++++++showinfo%28%24mssage%2C%27%27+%2C3%29%3B%0A++++++++exit%3B%0A++++%7D%0A++++%2F%2F%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%0A++++%24p_arr++%3D+array%28+%27uid%27%3D%26gt%3B%24info%5B%27l_playerid%27%5D%2C+%27uorder%27%3D%26gt%3B%24info%5B%27l_orderid%27%5D%2C+%27uprice%27%3D%26gt%3B%24info%5B%27l_returnnum%27%5D%29%3B%0A++++%24p_time+%3D+%24info%5B%27l_addtime%27%5D%3B%0A++++%24p_key++%3D+ADMIN_KEY%3B%0A++++%24p_md5++%3D+md5%28%24p_arr.%24p_time.%24p_key%29%3B%0A++++if%28+%24p_md5+%21%3D+%24pay_md5+%29%7B%0A++++++++%24mssage+%3D+%22%E8%AF%B7%E5%8B%BF%E9%9D%9E%E6%B3%95%E6%93%8D%E4%BD%9C%EF%BC%81%22%3B%0A++++++++showinfo%28%24mssage%2C%27%27+%2C3%29%3B%0A++++++++exit%3B%0A++++%7D%0A%7D%0A%0A%2F%2F%E8%AE%B0%E5%BD%95%E8%A6%81%E6%8F%90%E4%BA%A4%E7%9A%84%E8%AE%A2%E5%8D%95%E4%BF%A1%E6%81%AF%E5%88%B0%E6%97%A5%E5%BF%97%0A%24log_msg+%3D+%22%E8%AE%A2%E5%8D%95%E5%86%85%E5%AE%B9%3A%22+.+json_encode%28%24result_order%29%3B%0Asys_log_write_content%28+%24log_msg.__FILE__.__LINE__+%2C%22pay_log%22%2C%22jsapi%22%29%3B%0A%0A%24params+%3D+array%28%0A+++++++%0A+++++++%2F%2F%E4%BB%A5%E4%B8%8B%E4%BF%A1%E6%81%AF%E9%9D%9E%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%E4%B8%8D%E9%9C%80%E8%A6%81%E6%94%B9%E5%8A%A8%0A++++++++%27version%27+%3D%26gt%3B+com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3Bversion%2C+++++++++++++++++%2F%2F%E7%89%88%E6%9C%AC%E5%8F%B7%0A++++++++%27encoding%27+%3D%26gt%3B+%27utf-8%27%2C+++++++++++++%2F%2F%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%0A++++++++%27txnType%27+%3D%26gt%3B+%2701%27%2C++++++++++++++++++%2F%2F%E4%BA%A4%E6%98%93%E7%B1%BB%E5%9E%8B%0A++++++++%27txnSubType%27+%3D%26gt%3B+%2701%27%2C++++++++++++++%2F%2F%E4%BA%A4%E6%98%93%E5%AD%90%E7%B1%BB%0A++++++++%27bizType%27+%3D%26gt%3B+%27000201%27%2C+++++++++++++%2F%2F%E4%B8%9A%E5%8A%A1%E7%B1%BB%E5%9E%8B%0A++++++++%27frontUrl%27+%3D%26gt%3B++com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3BfrontUrl%2C++%2F%2F%E5%89%8D%E5%8F%B0%E9%80%9A%E7%9F%A5%E5%9C%B0%E5%9D%80%0A++++++++%27backUrl%27+%3D%26gt%3B+com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3BbackUrl%2C+++++%2F%2F%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E5%9C%B0%E5%9D%80%0A++++++++%27signMethod%27+%3D%26gt%3B+com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3BsignMethod%2C+++++++++++++++++%2F%2F%E7%AD%BE%E5%90%8D%E6%96%B9%E6%B3%95%0A++++++++%27channelType%27+%3D%26gt%3B+%2708%27%2C++++++++++++++%2F%2F%E6%B8%A0%E9%81%93%E7%B1%BB%E5%9E%8B%EF%BC%8C07-PC%EF%BC%8C08-%E6%89%8B%E6%9C%BA%0A++++++++%27accessType%27+%3D%26gt%3B+%270%27%2C++++++++++++++++%2F%2F%E6%8E%A5%E5%85%A5%E7%B1%BB%E5%9E%8B%0A++++++++%27currencyCode%27+%3D%26gt%3B+%27156%27%2C++++++++++++%2F%2F%E4%BA%A4%E6%98%93%E5%B8%81%E7%A7%8D%EF%BC%8C%E5%A2%83%E5%86%85%E5%95%86%E6%88%B7%E5%9B%BA%E5%AE%9A156%0A+++++++%0A+++++++%2F%2FTODO+%E4%BB%A5%E4%B8%8B%E4%BF%A1%E6%81%AF%E9%9C%80%E8%A6%81%E5%A1%AB%E5%86%99%0A+++++++%27merId%27+%3D%26gt%3B+%27%27%2C++++%2F%2F%E5%95%86%E6%88%B7%E4%BB%A3%E7%A0%81%EF%BC%8C%E8%AF%B7%E6%94%B9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%B5%8B%E8%AF%95%E5%95%86%E6%88%B7%E5%8F%B7%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%0A++++++++%27orderId%27+%3D%26gt%3B+%24out_trade_no%2C+++%2F%2F%E5%95%86%E6%88%B7%E8%AE%A2%E5%8D%95%E5%8F%B7%EF%BC%8C8-32%E4%BD%8D%E6%95%B0%E5%AD%97%E5%AD%97%E6%AF%8D%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%90%AB%E2%80%9C-%E2%80%9D%E6%88%96%E2%80%9C_%E2%80%9D%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%87%AA%E8%A1%8C%E5%AE%9A%E5%88%B6%E8%A7%84%E5%88%99%0A++++++++%27txnTime%27+%3D%26gt%3B+%24send_time%2C++%2F%2F%E8%AE%A2%E5%8D%95%E5%8F%91%E9%80%81%E6%97%B6%E9%97%B4%EF%BC%8C%E6%A0%BC%E5%BC%8F%E4%B8%BAYYYYMMDDhhmmss%EF%BC%8C%E5%8F%96%E5%8C%97%E4%BA%AC%E6%97%B6%E9%97%B4%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%0A++++++++%27txnAmt%27+%3D%26gt%3B+%24total_amount*100%2C++++%2F%2F%E4%BA%A4%E6%98%93%E9%87%91%E9%A2%9D%EF%BC%8C%E5%8D%95%E4%BD%8D%E5%88%86%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%0A++++++++%0A++++++++%2F%2F+%E8%AE%A2%E5%8D%95%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%E3%80%82%0A++++++++%2F%2F+%E8%B6%85%E8%BF%87%E6%AD%A4%E6%97%B6%E9%97%B4%E5%90%8E%EF%BC%8C%E9%99%A4%E7%BD%91%E9%93%B6%E4%BA%A4%E6%98%93%E5%A4%96%EF%BC%8C%E5%85%B6%E4%BB%96%E4%BA%A4%E6%98%93%E9%93%B6%E8%81%94%E7%B3%BB%E7%BB%9F%E4%BC%9A%E6%8B%92%E7%BB%9D%E5%8F%97%E7%90%86%EF%BC%8C%E6%8F%90%E7%A4%BA%E8%B6%85%E6%97%B6%E3%80%82+%E8%B7%B3%E8%BD%AC%E9%93%B6%E8%A1%8C%E7%BD%91%E9%93%B6%E4%BA%A4%E6%98%93%E5%A6%82%E6%9E%9C%E8%B6%85%E6%97%B6%E5%90%8E%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%EF%BC%8C%E4%BC%9A%E8%87%AA%E5%8A%A8%E9%80%80%E6%AC%BE%EF%BC%8C%E5%A4%A7%E7%BA%A65%E4%B8%AA%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%87%91%E9%A2%9D%E8%BF%94%E8%BF%98%E5%88%B0%E6%8C%81%E5%8D%A1%E4%BA%BA%E8%B4%A6%E6%88%B7%E3%80%82%0A++++++++%2F%2F+%E6%AD%A4%E6%97%B6%E9%97%B4%E5%BB%BA%E8%AE%AE%E5%8F%96%E6%94%AF%E4%BB%98%E6%97%B6%E7%9A%84%E5%8C%97%E4%BA%AC%E6%97%B6%E9%97%B4%E5%8A%A015%E5%88%86%E9%92%9F%E3%80%82%0A++++++++%2F%2F+%E8%B6%85%E8%BF%87%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%E8%B0%83%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3%E5%BA%94%E7%AD%94origRespCode%E4%B8%8D%E6%98%AFA6%E6%88%96%E8%80%8500%E7%9A%84%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%88%A4%E6%96%AD%E4%B8%BA%E5%A4%B1%E8%B4%A5%E3%80%82%0A++++++++%27payTimeout%27+%3D%26gt%3B+%24time_out%0A%0A+++++++%2F%2F+%E8%AF%B7%E6%B1%82%E6%96%B9%E4%BF%9D%E7%95%99%E5%9F%9F%EF%BC%8C%0A++++++++%2F%2F+%E9%80%8F%E4%BC%A0%E5%AD%97%E6%AE%B5%EF%BC%8C%E6%9F%A5%E8%AF%A2%E3%80%81%E9%80%9A%E7%9F%A5%E3%80%81%E5%AF%B9%E8%B4%A6%E6%96%87%E4%BB%B6%E4%B8%AD%E5%9D%87%E4%BC%9A%E5%8E%9F%E6%A0%B7%E5%87%BA%E7%8E%B0%EF%BC%8C%E5%A6%82%E6%9C%89%E9%9C%80%E8%A6%81%E8%AF%B7%E5%90%AF%E7%94%A8%E5%B9%B6%E4%BF%AE%E6%94%B9%E8%87%AA%E5%B7%B1%E5%B8%8C%E6%9C%9B%E9%80%8F%E4%BC%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82%0A++++++++%2F%2F+%E5%87%BA%E7%8E%B0%E9%83%A8%E5%88%86%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E6%97%B6%E5%8F%AF%E8%83%BD%E5%BD%B1%E5%93%8D%E8%A7%A3%E6%9E%90%EF%BC%8C%E8%AF%B7%E6%8C%89%E4%B8%8B%E9%9D%A2%E5%BB%BA%E8%AE%AE%E7%9A%84%E6%96%B9%E5%BC%8F%E5%A1%AB%E5%86%99%EF%BC%9A%0A++++++++%2F%2F+1.+%E5%A6%82%E6%9E%9C%E8%83%BD%E7%A1%AE%E5%AE%9A%E5%86%85%E5%AE%B9%E4%B8%8D%E4%BC%9A%E5%87%BA%E7%8E%B0%26amp%3B%3D%7B%7D%5B%5D%22%27%E7%AD%89%E7%AC%A6%E5%8F%B7%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E5%A1%AB%E5%86%99%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9A%84%E6%96%B9%E6%B3%95%E5%A6%82%E4%B8%8B%E3%80%82%0A++++++++%2F%2F++++%27reqReserved%27+%3D%26gt%3B%27%E9%80%8F%E4%BC%A0%E4%BF%A1%E6%81%AF1%7C%E9%80%8F%E4%BC%A0%E4%BF%A1%E6%81%AF2%7C%E9%80%8F%E4%BC%A0%E4%BF%A1%E6%81%AF3%27%2C%0A+++++++%2F%2F+2.+%E5%86%85%E5%AE%B9%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%26amp%3B%3D%7B%7D%5B%5D%22%27%E7%AC%A6%E5%8F%B7%E6%97%B6%EF%BC%9A%0A++++++++%2F%2F+1%29+%E5%A6%82%E6%9E%9C%E9%9C%80%E8%A6%81%E5%AF%B9%E8%B4%A6%E6%96%87%E4%BB%B6%E9%87%8C%E8%83%BD%E6%98%BE%E7%A4%BA%EF%BC%8C%E5%8F%AF%E5%B0%86%E5%AD%97%E7%AC%A6%E6%9B%BF%E6%8D%A2%E6%88%90%E5%85%A8%E8%A7%92%EF%BC%86%EF%BC%9D%EF%BD%9B%EF%BD%9D%E3%80%90%E3%80%91%E2%80%9C%E2%80%98%E5%AD%97%E7%AC%A6%EF%BC%88%E8%87%AA%E5%B7%B1%E5%86%99%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%AD%A4%E5%A4%84%E4%B8%8D%E6%BC%94%E7%A4%BA%EF%BC%89%EF%BC%9B%0A++++++++%2F%2F+2%29+%E5%A6%82%E6%9E%9C%E5%AF%B9%E8%B4%A6%E6%96%87%E4%BB%B6%E6%B2%A1%E6%9C%89%E6%98%BE%E7%A4%BA%E8%A6%81%E6%B1%82%EF%BC%8C%E5%8F%AF%E5%81%9A%E4%B8%80%E4%B8%8Bbase64%EF%BC%88%E5%A6%82%E4%B8%8B%EF%BC%89%E3%80%82%0A++++++++%2F%2F++++%E6%B3%A8%E6%84%8F%E6%8E%A7%E5%88%B6%E6%95%B0%E6%8D%AE%E9%95%BF%E5%BA%A6%EF%BC%8C%E5%AE%9E%E9%99%85%E4%BC%A0%E8%BE%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%95%BF%E5%BA%A6%E4%B8%8D%E8%83%BD%E8%B6%85%E8%BF%871024%E4%BD%8D%E3%80%82%0A++++++++%2F%2F++++%E6%9F%A5%E8%AF%A2%E3%80%81%E9%80%9A%E7%9F%A5%E7%AD%89%E6%8E%A5%E5%8F%A3%E8%A7%A3%E6%9E%90%E6%97%B6%E4%BD%BF%E7%94%A8base64_decode%E8%A7%A3base64%E5%90%8E%E5%86%8D%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%81%9A%E5%90%8E%E7%BB%AD%E8%A7%A3%E6%9E%90%E3%80%82%0A++++++++%2F%2F++++%27reqReserved%27+%3D%26gt%3B+base64_encode%28%27%E4%BB%BB%E6%84%8F%E6%A0%BC%E5%BC%8F%E7%9A%84%E4%BF%A1%E6%81%AF%E9%83%BD%E5%8F%AF%E4%BB%A5%27%29%2C%0A+++++++%0A+++++++%2F%2FTODO+%E5%85%B6%E4%BB%96%E7%89%B9%E6%AE%8A%E7%94%A8%E6%B3%95%E8%AF%B7%E6%9F%A5%E7%9C%8B+special_use_purchase.php%0A++++%29%3B%0A%0Acom%5Cunionpay%5Cacp%5Csdk%5CAcpService%3A%3Asign+%28+%24params+%29%3B%0A%24uri+%3D+com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3BfrontTransUrl%3B%0A%24html_form+%3D+com%5Cunionpay%5Cacp%5Csdk%5CAcpService%3A%3AcreateAutoFormHtml%28+%24params%2C+%24uri+%29%3B%0Aecho+%24html_form%3B%0A%3F%26gt%3B%0A%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cspan%3E%3Cspan+style%3D%22font-size%3A14pt%3B%22%3E%E4%BF%AE%E6%94%B9demo%2Fapi_01_gateway%2FFrontReceive.php%28%E5%89%8D%E5%8F%B0%E5%90%8C%E6%AD%A5%E9%80%9A%E7%9F%A5%29%3C%2Fspan%3E%3C%2Fspan%3E+%0A++%3Cp%3E%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-html%22%3E%26lt%3B%3Fphp%0Ainclude_once%28%22..%2F..%2F..%2F..%2Finclude%2Fconfig.inc.php%22%29%3B%0Ainclude_once+dirname+%28+__FILE__+%29.DIRECTORY_SEPARATOR+.+%27.%2F..%2F..%2Fsdk%2Facp_service.php%27%3B%0A%2F**%0A*+%E4%BA%A4%E6%98%93%E8%AF%B4%E6%98%8E%EF%BC%9A+++%E5%89%8D%E5%8F%B0%E7%B1%BB%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%E6%89%8D%E4%BC%9A%E5%8F%91%E9%80%81%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E3%80%82%E5%90%8E%E5%8F%B0%E7%B1%BB%E4%BA%A4%E6%98%93%EF%BC%88%E6%9C%89%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%89%E4%BA%A4%E6%98%93%E7%BB%93%E6%9D%9F%E4%B9%8B%E5%90%8E%E6%88%90%E5%8A%9F%E5%A4%B1%E8%B4%A5%E9%83%BD%E4%BC%9A%E5%8F%91%E9%80%9A%E7%9F%A5%E3%80%82%0A*++++++++++++++%E4%B8%BA%E4%BF%9D%E8%AF%81%E5%AE%89%E5%85%A8%EF%BC%8C%E6%B6%89%E5%8F%8A%E8%B5%84%E9%87%91%E7%B1%BB%E7%9A%84%E4%BA%A4%E6%98%93%EF%BC%8C%E6%94%B6%E5%88%B0%E9%80%9A%E7%9F%A5%E5%90%8E%E8%AF%B7%E5%86%8D%E5%8F%91%E8%B5%B7%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3%E7%A1%AE%E8%AE%A4%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%E3%80%82%E4%B8%8D%E6%B6%89%E5%8F%8A%E8%B5%84%E9%87%91%E7%9A%84%E4%BA%A4%E6%98%93%E5%8F%AF%E4%BB%A5%E4%BB%A5%E9%80%9A%E7%9F%A5%E6%8E%A5%E5%8F%A3respCode%3D00%E5%88%A4%E6%96%AD%E6%88%90%E5%8A%9F%E3%80%82%0A*++++++++++++++%E6%9C%AA%E6%94%B6%E5%88%B0%E9%80%9A%E7%9F%A5%E6%97%B6%EF%BC%8C%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%97%B6%E9%97%B4%E7%82%B9%E8%AF%B7%E5%8F%82%E7%85%A7%E6%AD%A4FAQ%EF%BC%9Ahttps%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2Ffaq%2Flist%3Fid%3D77%26amp%3Blevel%3D0%26amp%3Bfrom%3D0%0A*%2F%0A%0A%24logger+%3D+com%5Cunionpay%5Cacp%5Csdk%5CLogUtil%3A%3AgetLogger%28%29%3B%0A%24logger-%26gt%3BLogInfo%28%22receive+front+notify%3A+%22+.+com%5Cunionpay%5Cacp%5Csdk%5CcreateLinkString+%28+%24_POST%2C+false%2C+true+%29%29%3B%0A%0A%2F%2F%E9%A1%B5%E9%9D%A2%E5%9B%9E%E8%B7%B3%E5%9C%B0%E5%9D%80%0A%24fail_back_url+%3D+WEBPATH_DIR_INC.%27enter-query.html%27%3B%0A%24succ_back_url+%3D+WEBPATH_DIR_INC.%27enter-query.html%27%3B%0A%0A%2F%2F%E9%AA%8C%E7%AD%BE%0Aif+%28isset+%28+%24_POST+%5B%27signature%27%5D+%29%29+%7B%0A++++%24result+%3D+com%5Cunionpay%5Cacp%5Csdk%5CAcpService%3A%3Avalidate+%28+%24_POST+%29%3B%0A++++if%28%24result%29%7B%2F%2F%E9%AA%8C%E7%AD%BE%E6%88%90%E5%8A%9F%0A++++++++%24respCode+%3D+%24_POST+%5B%27respCode%27%5D%3B%2F%2F%E5%BA%94%E7%AD%94%E7%A0%81%0A++++++++if%28%24respCode%3D%3D%2700%27+%7C%7C+%24respCode%3D%3D%27A6%27%29%7B%2F%2F%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%0A++++++++++++%2F%2F%E8%AF%B7%E5%9C%A8%E8%BF%99%E9%87%8C%E5%8A%A0%E4%B8%8A%E5%95%86%E6%88%B7%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81%0A++++++++++++%2F%2F%E8%BF%94%E5%9B%9E%E5%8F%82%E6%95%B0%0A++++++++++++%24orderId+%3D+%24_POST+%5B%27orderId%27%5D%3B%2F%2F%E5%95%86%E6%88%B7%E8%AE%A2%E5%8D%95%E5%8F%B7%0A++++++++++++%24totalAmount+%3D+%24_POST%5B%27txnAmt%27%5D%3B%2F%2F%E4%BA%A4%E6%98%93%E9%87%91%E9%A2%9D%0A++++++++++++%24merId+%3D+%24_POST%5B%27merId%27%5D%3B%2F%2F%E5%95%86%E6%88%B7%E4%BB%A3%E7%A0%81%0A%0A++++++++++++%24res+%3D+%27success%27%3B%0A++++++++++++%2F%2F%E5%88%A4%E6%96%AD%E6%94%AF%E4%BB%98%E7%B1%BB%E5%9E%8B%EF%BC%88%E6%8F%90%E7%8E%B0%E8%BF%98%E6%98%AF%E5%80%9F%E8%B4%B7%EF%BC%89%0A++++++++++++%24type+%3D+substr%28%24orderId%2C0%2C2%29%3B%0A%0A++++++++++++%2F%2F%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E8%AE%A2%E5%8D%95%E4%BF%A1%E6%81%AF%0A++++++++++++if%28%24type%3D%3D%27tx%27%29%7B%0A++++++++++++++++%24order_info+%3D+get_order_info%28%24orderId%29%3B%0A%0A++++++++++++++++%2F%2F%E9%AA%8C%E8%AF%81%E8%AE%A2%E5%8D%95%E6%95%B0%E6%8D%AE%0A++++++++++++++++if%28empty%28%24order_info%29%29%7B%0A++++++++++++++++++++%24res+%3D+%27fail%27%3B%0A++++++++++++++++%7D%0A++++++++++++++++if%28%24totalAmount+%21%3D+%24order_info%5B%27o_totalprice%27%5D*100%29%7B%0A++++++++++++++++++++%24res+%3D+%27fail%27%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A%0A++++++++++++if%28%24type%3D%3D%27jd%27%29%7B%0A++++++++++++++++%24order_info+%3D+get_loan_order_info%28%24orderId%29%3B%0A%0A++++++++++++++++%2F%2F%E9%AA%8C%E8%AF%81%E8%AE%A2%E5%8D%95%E6%95%B0%E6%8D%AE%0A++++++++++++++++if%28empty%28%24order_info%29%29%7B%0A++++++++++++++++++++%24res+%3D+%27fail%27%3B%0A++++++++++++++++%7D%0A++++++++++++++++if%28%24totalAmount+%21%3D+%24order_info%5B%27l_returnnum%27%5D*100%29%7B%0A++++++++++++++++++++%24res+%3D+%27fail%27%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A%0A++++++++++++%2F%2F%E9%AA%8C%E8%AF%81%E5%95%86%E6%88%B7%E4%BB%A3%E7%A0%81%0A++++++++++++%2F%2FTODO%0A%0A%0A%0A++++++++%7Delse%7B%0A++++++++++++%24res+%3D+%27fail%27%3B%0A++++++++%7D%0A++++%7Delse%7B%0A++++++++%24res+%3D+%27fail%27%3B%0A++++%7D%0A%7D+else+%7B%0A++++%24res+%3D++%27fail%27%3B%0A%7D%0A%0A%3F%26gt%3B%0A%26lt%3Bhtml%26gt%3B%0A%26lt%3Bhead%26gt%3B%0A++++%26lt%3Bmeta+http-equiv%3D%22content-type%22+content%3D%22text%2Fhtml%3Bcharset%3Dutf-8%22%2F%26gt%3B%0A++++%26lt%3Bmeta+name%3D%22viewport%22+content%3D%22width%3Ddevice-width%2C+initial-scale%3D1%22%2F%26gt%3B%0A++++%26lt%3Btitle%26gt%3B%E9%93%B6%E8%81%94%E6%94%AF%E4%BB%98-%E8%AE%A2%E5%8D%95%E6%94%AF%E4%BB%98%26lt%3B%2Ftitle%26gt%3B%0A++++%26lt%3Bscript+type%3D%22text%2Fjavascript%22%26gt%3B%0A++++++++function+callpay%28%29%7B%0A++++++++++++var+res+%3D+%27%26lt%3B%3Fphp+echo+%24res%3B%3F%26gt%3B%27%3B%0A++++++++++++if%28res%3D%3D%27success%27%29%7B%0A++++++++++++++++var+Idiv+%3D+document.getElementById%28%22pay_error2%22%29%3B%0A++++++++++++%7Delse%7B%0A++++++++++++++++var+Idiv+%3D+document.getElementById%28%22pay_error%22%29%3B%0A++++++++++++%7D%0A++++++++++++Idiv.style.display+%3D+%22block%22%3B%0A++++++++%7D%0A%0A%0A%0A++++++++%2F%2F%E9%A1%B5%E9%9D%A2%E8%BF%9B%E5%85%A5%E5%8D%B3%E8%BF%9B%E8%A1%8C%E6%94%AF%E4%BB%98%0A++++++++window.onload+%3D+function%28%29%7B+++++callpay%28%29%3B+++++%7D%3B%0A%0A++++%26lt%3B%2Fscript%26gt%3B%0A%26lt%3B%2Fhead%26gt%3B%0A%26lt%3Bbody%26gt%3B%0A%26lt%3Bstyle%26gt%3B%0A++++*%7B+margin%3A0%3B+padding%3A0%3B+background%3A%23e1e1e1%3B%7D%0A++++%23pay_error%2C+%23pay_error2%7B+display%3Anone%3B+width%3A90%25%3B+height%3A100%25%3B+text-align%3Acenter%3B+color%3A%23fe5f16%3B+font-size%3A20px%3B+padding%3A20px+0%3B+font-weight%3Abolder%3B+border%3A1px+solid+%23ccc%3B+margin%3A0+5%25%3B+height%3A100px%3B+margin-top%3A50%25%3B+border-radius%3A10px%3B+background%3A%23fff%3B%7D%0A++++%23pay_error+p%2C%23pay_error2+p%7B+background%3A%23fff%3B%7D%0A++++%23pay_error+a%2C%23pay_error2+a%7B+background%3A%2383da49%3B+color%3A%23fff%3B+text-decoration%3Anone%3B+display%3Ablock%3B+padding%3A10px+0%3B+width%3A60%25%3B+margin-left%3A20%25%3B+margin-top%3A20px%3B%7D%0A%26lt%3B%2Fstyle%26gt%3B%0A%26lt%3Bdiv+id%3D%22pay_error%22%26gt%3B%0A++++%26lt%3Bp+class%3D%22p1%22%26gt%3B%E6%94%AF%E4%BB%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E8%AF%B7%E9%87%8D%E6%96%B0%E5%AE%8C%E6%88%90%E6%94%AF%E4%BB%98%EF%BC%81%26lt%3B%2Fp%26gt%3B%0A++++%26lt%3Bp+class%3D%22bt%22%26gt%3B%26lt%3Ba+href%3D%22%26lt%3B%3Fphp+echo+%24fail_back_url%3B%3F%26gt%3B%22%26gt%3B%E7%A1%AE%E5%AE%9A%26lt%3B%2Fa%26gt%3B%26lt%3B%2Fp%26gt%3B%0A%26lt%3B%2Fdiv%26gt%3B%0A%26lt%3Bdiv+id%3D%22pay_error2%22%26gt%3B%0A++++%26lt%3Bp+class%3D%22p1%22%26gt%3B%E6%81%AD%E5%96%9C%E4%BD%A0%EF%BC%8C%E6%94%AF%E4%BB%98%E6%88%90%E5%8A%9F%26lt%3B%2Fp%26gt%3B%0A++++%26lt%3Bp+class%3D%22bt%22%26gt%3B%26lt%3Ba+href%3D%22%26lt%3B%3Fphp+echo+%24succ_back_url%3B%3F%26gt%3B%22%26gt%3B%E7%A1%AE%E5%AE%9A%26lt%3B%2Fa%26gt%3B%26lt%3B%2Fp%26gt%3B%0A%26lt%3B%2Fdiv%26gt%3B%0A%26lt%3B%2Fbody%26gt%3B%0A%26lt%3B%2Fhtml%26gt%3B%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cspan%3E%3Cspan+style%3D%22font-size%3A14pt%3B%22%3E%E4%BF%AE%E6%94%B9demo%2Fapi_01_gateway%2FBackReceive.php%28%E5%90%8E%E5%8F%B0%E5%BC%82%E6%AD%A5%E9%80%9A%E7%9F%A5%29%3C%2Fspan%3E%3C%2Fspan%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-html%22%3E%26lt%3B%3Fphp%0Ainclude_once%28%22..%2F..%2F..%2F..%2Finclude%2Fconfig.inc.php%22%29%3B%0Ainclude_once+dirname+%28+__FILE__+%29.DIRECTORY_SEPARATOR+.+%27.%2F..%2F..%2Fsdk%2Facp_service.php%27%3B%0Ainclude_once+%22Form_6_5_Query.php%22%3B%0A%2F**%0A*+%E4%BA%A4%E6%98%93%E8%AF%B4%E6%98%8E%EF%BC%9A+++%E5%89%8D%E5%8F%B0%E7%B1%BB%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%E6%89%8D%E4%BC%9A%E5%8F%91%E9%80%81%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E3%80%82%E5%90%8E%E5%8F%B0%E7%B1%BB%E4%BA%A4%E6%98%93%EF%BC%88%E6%9C%89%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%89%E4%BA%A4%E6%98%93%E7%BB%93%E6%9D%9F%E4%B9%8B%E5%90%8E%E6%88%90%E5%8A%9F%E5%A4%B1%E8%B4%A5%E9%83%BD%E4%BC%9A%E5%8F%91%E9%80%9A%E7%9F%A5%E3%80%82%0A*++++++++++++++%E4%B8%BA%E4%BF%9D%E8%AF%81%E5%AE%89%E5%85%A8%EF%BC%8C%E6%B6%89%E5%8F%8A%E8%B5%84%E9%87%91%E7%B1%BB%E7%9A%84%E4%BA%A4%E6%98%93%EF%BC%8C%E6%94%B6%E5%88%B0%E9%80%9A%E7%9F%A5%E5%90%8E%E8%AF%B7%E5%86%8D%E5%8F%91%E8%B5%B7%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3%E7%A1%AE%E8%AE%A4%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%E3%80%82%E4%B8%8D%E6%B6%89%E5%8F%8A%E8%B5%84%E9%87%91%E7%9A%84%E4%BA%A4%E6%98%93%E5%8F%AF%E4%BB%A5%E4%BB%A5%E9%80%9A%E7%9F%A5%E6%8E%A5%E5%8F%A3respCode%3D00%E5%88%A4%E6%96%AD%E6%88%90%E5%8A%9F%E3%80%82%0A*++++++++++++++%E6%9C%AA%E6%94%B6%E5%88%B0%E9%80%9A%E7%9F%A5%E6%97%B6%EF%BC%8C%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%97%B6%E9%97%B4%E7%82%B9%E8%AF%B7%E5%8F%82%E7%85%A7%E6%AD%A4FAQ%EF%BC%9Ahttps%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2Ffaq%2Flist%3Fid%3D77%26amp%3Blevel%3D0%26amp%3Bfrom%3D0%0A*%2F%0A%0A%24logger+%3D+com%5Cunionpay%5Cacp%5Csdk%5CLogUtil%3A%3AgetLogger%28%29%3B%0A%24logger-%26gt%3BLogInfo%28%22receive+back+notify%3A+%22+.+com%5Cunionpay%5Cacp%5Csdk%5CcreateLinkString+%28+%24_POST%2C+false%2C+true+%29%29%3B%0A%0A%2F%2F%E9%AA%8C%E7%AD%BE%0Aif+%28isset+%28+%24_POST+%5B%27signature%27%5D+%29%29+%7B%0A++++%24result+%3D+com%5Cunionpay%5Cacp%5Csdk%5CAcpService%3A%3Avalidate+%28+%24_POST+%29%3B%0A++++if%28%24result%29%7B%2F%2F%E9%AA%8C%E7%AD%BE%E6%88%90%E5%8A%9F%0A++++++++%24respCode+%3D+%24_POST+%5B%27respCode%27%5D%3B%2F%2F%E5%BA%94%E7%AD%94%E7%A0%81%0A++++++++if%28%24respCode%3D%3D%2700%27+%7C%7C+%24respCode%3D%3D%27A6%27%29%7B%2F%2F%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%0A++++++++++++%2F%2F%E8%BF%94%E5%9B%9E%E5%8F%82%E6%95%B0%0A++++++++++++%24orderId+%3D+%24_POST+%5B%27orderId%27%5D%3B%2F%2F%E5%95%86%E6%88%B7%E8%AE%A2%E5%8D%95%E5%8F%B7%0A++++++++++++%24totalAmount+%3D+%24_POST%5B%27txnAmt%27%5D%3B%2F%2F%E4%BA%A4%E6%98%93%E9%87%91%E9%A2%9D%0A++++++++++++%24merId+%3D+%24_POST%5B%27merId%27%5D%3B%2F%2F%E5%95%86%E6%88%B7%E4%BB%A3%E7%A0%81%0A++++++++++++%24txnTime+%3D+%24_POST%5B%27txnTime%27%5D%3B%2F%2F%E8%AE%A2%E5%8D%95%E5%8F%91%E9%80%81%E6%97%B6%E9%97%B4%0A++++++++++++%24trade_no+%3D+%24_POST%5B%27queryId%27%5D%3B%2F%2F%E9%93%B6%E8%81%94%E6%B5%81%E6%B0%B4%E5%8F%B7%0A%0A++++++++++++%2F%2F%E5%8F%91%E8%B5%B7%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E6%8E%A5%E5%8F%A3%0A++++++++++++%24check_res+%3D+check_Trade_Res%28%24orderId%2C%24merId%2C%24txnTime%2CTHIS_DATETIME%29%3B%0A++++++++++++if%28%24check_res%3D%3D%27200%27%29%7B%0A++++++++++++++++%2F%2F%E6%88%90%E5%8A%9F%0A++++++++++++++++%2F%2F%E8%AF%B7%E5%9C%A8%E8%BF%99%E9%87%8C%E5%8A%A0%E4%B8%8A%E5%95%86%E6%88%B7%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81%0A++++++++++++++++%2F%2F%E5%88%A4%E6%96%AD%E6%94%AF%E4%BB%98%E7%B1%BB%E5%9E%8B%EF%BC%88%E6%8F%90%E7%8E%B0%E8%BF%98%E6%98%AF%E5%80%9F%E8%B4%B7%EF%BC%89%0A++++++++++++++++%24type+%3D+substr%28%24orderId%2C0%2C2%29%3B%0A%0A++++++++++++++++%2F%2F%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E8%AE%A2%E5%8D%95%E4%BF%A1%E6%81%AF%0A++++++++++++++++if%28%24type%3D%3D%27tx%27%29%7B%0A++++++++++++++++++++%24order_info+%3D+get_order_info%28%24orderId%29%3B%0A%0A++++++++++++++++++++%2F%2F%E9%AA%8C%E8%AF%81%E8%AE%A2%E5%8D%95%E6%95%B0%E6%8D%AE%0A++++++++++++++++++++if%28empty%28%24order_info%29%29%7B%0A++++++++++++++++++++++++echo+%27fail%27%3B%0A++++++++++++++++++++++++return%3B%0A++++++++++++++++++++%7D%0A++++++++++++++++++++if%28%24totalAmount+%21%3D+%24order_info%5B%27o_totalprice%27%5D*100%29%7B%0A++++++++++++++++++++++++echo+%27fail%27%3B%0A++++++++++++++++++++++++return%3B%0A++++++++++++++++++++%7D%0A++++++++++++++++%7D%0A%0A++++++++++++++++if%28%24type%3D%3D%27jd%27%29%7B%0A++++++++++++++++++++%24order_info+%3D+get_loan_order_info%28%24orderId%29%3B%0A%0A++++++++++++++++++++%2F%2F%E9%AA%8C%E8%AF%81%E8%AE%A2%E5%8D%95%E6%95%B0%E6%8D%AE%0A++++++++++++++++++++if%28empty%28%24order_info%29%29%7B%0A++++++++++++++++++++++++echo+%27fail%27%3B%0A++++++++++++++++++++++++return%3B%0A++++++++++++++++++++%7D%0A++++++++++++++++++++if%28%24totalAmount+%21%3D+%24order_info%5B%27l_returnnum%27%5D*100%29%7B%0A++++++++++++++++++++++++echo+%27fail%27%3B%0A++++++++++++++++++++++++return%3B%0A++++++++++++++++++++%7D%0A++++++++++++++++%7D%0A%0A++++++++++++++++%2F%2F%E9%AA%8C%E8%AF%81%E5%95%86%E6%88%B7%E4%BB%A3%E7%A0%81%0A++++++++++++++++%2F%2FTODO%0A%0A++++++++++++++++%2F%2F%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%E5%90%8E%E7%9A%84%E4%B8%9A%E5%8A%A1%E7%A8%8B%E5%BA%8F%0A++++++++++++++++if%28%24type%3D%3D%27tx%27%29%7B%0A++++++++++++++++++++if%28%24order_info%5B%27o_status%27%5D%3D%3D4%29%7B%0A++++++++++++++++++++++++%2F%2F%E6%89%A7%E8%A1%8C%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%0A++++++++++++++++++++++++%2F%2F%E5%8F%96%E5%87%BA%E7%A4%BC%E5%8C%85%E7%A0%81%0A++++++++++++++++++++++++%24sql+%3D+%22select+sysid%2Cgc_code+from+%22.get_table%28%22game_gift_code%22%29.%22+where+gc_status%3D1+limit+1%22%3B%0A++++++++++++++++++++++++%24query+%3D+%24GLOBALS%5B%22conn%22%5D-%26gt%3BQuery%28%24sql%29%3B%0A++++++++++++++++++++++++%24value+%3D+%24GLOBALS%5B%27conn%27%5D-%26gt%3BFetchArray%28%24query%29%3B%0A%0A++++++++++++++++++++++++%24up_arr+%3D+array%28%0A++++++++++++++++++++++++++++%27o_status%27+%3D%26gt%3B+1%2C%0A++++++++++++++++++++++++++++%27o_trade_no%27+%3D%26gt%3B+%24trade_no%2C%0A++++++++++++++++++++++++++++%27o_giftcode%27+%3D%26gt%3B+%24value%5B%27gc_code%27%5D%0A++++++++++++++++++++++++%29%3B%0A++++++++++++++++++++++++%24up_where+%3D+%22+and+o_orderid%3D%27%22.%24orderId.%22%27%22%3B%0A++++++++++++++++++++++++%24row+%3D+update_record%28%24GLOBALS%5B%22conn%22%5D%2C%27game_order%27%2C%24up_arr%2Carray%28%29%2C%24up_where%29%3B%2F%2F%E6%9B%B4%E6%96%B0%E8%AE%A2%E5%8D%95%E6%95%B0%E6%8D%AE%0A++++++++++++++++++++++++if%28%24row%26gt%3B0%29%7B%0A++++++++++++++++++++++++++++%24msg+%3D+%22%E8%AE%A2%E5%8D%95+%22.%24orderId.%22+%E5%B7%B2%E6%94%AF%E4%BB%98%22%3B%0A++++++++++++++++++++++++++++%24log_msg+%3D+%22call+back%3A%22+.+%24msg%3B%0A++++++++++++++++++++++++++++sys_log_write_content%28+%24log_msg.__FILE__.__LINE__+%2C%22pay_log%22%2C%22notify_order_success%22%29%3B%0A%0A++++++++++++++++++++++++++++%2F%2F%E6%9B%B4%E6%96%B0%E7%A4%BC%E5%8C%85%E7%A0%81%E7%8A%B6%E6%80%81%0A++++++++++++++++++++++++++++%24up_gift+%3D+array%28%0A++++++++++++++++++++++++++++++++%27gc_status%27%3D%26gt%3B2%2C%0A++++++++++++++++++++++++++++++++%27gc_time%27+%3D%26gt%3B+THIS_DATETIME%2C%0A++++++++++++++++++++++++++++++++%27gc_orderid%27+%3D%26gt%3B+%24orderId%0A++++++++++++++++++++++++++++%29%3B%0A++++++++++++++++++++++++++++%24gift_where+%3D+%22+and+sysid%3D%22.%24value%5B%27sysid%27%5D%3B%0A++++++++++++++++++++++++++++update_record%28%24GLOBALS%5B%22conn%22%5D%2C%27game_gift_code%27%2C%24up_gift%2Carray%28%29%2C%24gift_where%29%3B%0A%0A++++++++++++++++++++++++++++%2F%2F%E6%9B%B4%E6%96%B0%E5%95%86%E5%93%81%E5%87%BA%E5%94%AE%E6%95%B0%E9%87%8F%0A++++++++++++++++++++++++++++%2F*%24where+%3D+%22+and+og_sysid%3D%27%22.%24orderId.%22%27%22%3B%0A++++++++++++++++++++++++++++%24garr+%3D+get_info%28%24GLOBALS%5B%27conn%27%5D%2C%22game_order_goods%22%2Carray%28%27og_goodsid%27%29%2C%24where%2C%27%27%2Ctrue%29%3B%0A++++++++++++++++++++++++++++foreach%28%24garr+as+%24k%3D%26gt%3B%24v%29%7B%0A++++++++++++++++++++++++++++++++%24up_num+%3D+array%28%0A++++++++++++++++++++++++++++++++++++%27g_sellnum%27+%3D%26gt%3B+%27g_sellnum%27%2B1%0A++++++++++++++++++++++++++++++++%29%3B%0A++++++++++++++++++++++++++++++++%24num_where+%3D+%22+and+g_id%3D%27%22.%24v.%22%27%22%3B%0A++++++++++++++++++++++++++++++++update_record%28%24GLOBALS%5B%27conn%27%5D%2C%22game_goods%22%2C%24up_num%2Carray%28%29%2C%24num_where%29%3B%2F%2F%E6%9B%B4%E6%96%B0%E5%95%86%E5%93%81%E5%87%BA%E5%94%AE%0A++++++++++++++++++++++++++++%7D*%2F%0A%0A++++++++++++++++++++++++++++%2F%2F%E6%96%B0%E5%A2%9E%E7%94%A8%E6%88%B7%E6%B6%88%E6%81%AF%0A++++++++++++++++++++++++++++%24title+%3D+%27%E4%BB%98%E6%AC%BE%E6%88%90%E5%8A%9F%EF%BC%8C%E8%AF%B7%E8%AF%95%E7%94%A8%E5%90%8E%E5%B0%BD%E5%BF%AB%E9%80%80%E6%AC%BE%27%3B%2F%2F%E6%A0%87%E9%A2%98%0A++++++++++++++++++++++++++++%24content+%3D+%27%E6%82%A8%E7%9A%84%E8%AE%A2%E5%8D%95%5B%27.%24orderId.%27%5D%E5%B7%B2%E7%BB%8F%E4%BB%98%E6%AC%BE%E6%88%90%E5%8A%9F%EF%BC%8C%26lt%3Bbr%26gt%3B%E9%81%93%E5%85%B7%E8%AF%95%E7%94%A8%E5%90%8E%E5%8F%AF%E7%94%B3%E8%AF%B7%E9%80%80%E6%AC%BE%E9%80%80%E5%9B%9E%E7%BB%91%E5%AE%9A%E5%80%9F%E8%AE%B0%E5%8D%A1%EF%BC%8C%E9%80%82%E5%90%88%E7%8E%B0%E9%87%91%E7%B4%A7%E7%BC%BA%E7%9A%84%E7%8E%A9%E5%AE%B6%EF%BC%81%E7%B3%BB%E7%BB%9F%E8%B5%A0%E9%80%81%E6%82%A8%E7%9A%84%E6%B8%B8%E6%88%8F%E5%85%91%E6%8D%A2%E7%A0%81%3A%27.%24value%5B%27gc_code%27%5D.%27%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%9C%A8%E6%82%A8%E7%9A%84%E6%B8%B8%E6%88%8F%E4%B8%AD%E8%BF%9B%E8%A1%8C%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%84%9F%E8%B0%A2%E6%82%A8%E7%9A%84%E6%94%AF%E6%8C%81%EF%BC%81%26lt%3Bbr%26gt%3B%E5%A6%82%E9%9C%80%E5%B8%AE%E5%8A%A9%EF%BC%8C%E8%AF%B7%E7%82%B9%E5%87%BB%E5%B7%A6%E4%B8%8A%E8%A7%92%E3%80%90%E5%B8%AE%E5%8A%A9%E3%80%91%E6%89%BE%E5%88%B0%E6%82%A8%E7%9A%84%E9%97%AE%E9%A2%98%E6%88%96%E8%80%85%E8%81%94%E7%B3%BB%E5%AE%A2%E6%9C%8D%E8%BF%9B%E8%A1%8C%E4%BA%BA%E5%B7%A5%E6%9C%8D%E5%8A%A1%EF%BC%8CQQ%3A2013609564%27%3B%0A++++++++++++++++++++++++++++add_player_msg%28%24order_info%5B%27o_playerid%27%5D%2C%24title%2C%24content%29%3B%0A++++++++++++++++++++++++%7D%0A++++++++++++++++++++%7D%0A++++++++++++++++%7D%0A%0A++++++++++++++++if%28%24type%3D%3D%27jd%27%29%7B%0A++++++++++++++++++++if%28%24order_info%5B%27l_status%27%5D%3D%3D3%29%7B%0A++++++++++++++++++++++++%2F%2F%E6%89%A7%E8%A1%8C%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%0A++++++++++++++++++++++++%24up_arr+%3D+array%28%0A++++++++++++++++++++++++++++%27l_status%27+%3D%26gt%3B+4%2C%0A++++++++++++++++++++++++++++%27l_trade_no%27+%3D%26gt%3B+%24trade_no%2C%0A++++++++++++++++++++++++++++%27l_returntime%27+%3D%26gt%3B+THIS_DATETIME%0A++++++++++++++++++++++++%29%3B%0A++++++++++++++++++++++++%24up_where+%3D+%22+and+l_orderid%3D%27%22.%24orderId.%22%27%22%3B%0A++++++++++++++++++++++++%24row+%3D+update_record%28%24GLOBALS%5B%22conn%22%5D%2C%27game_loan_order%27%2C%24up_arr%2Carray%28%29%2C%24up_where%29%3B%2F%2F%E6%9B%B4%E6%96%B0%E8%AE%A2%E5%8D%95%E6%95%B0%E6%8D%AE%0A++++++++++++++++++++++++if%28%24row%26gt%3B0%29%7B%0A++++++++++++++++++++++++++++%24msg+%3D+%22%E8%AE%A2%E5%8D%95+%22.%24orderId.%22+%E5%B7%B2%E6%94%AF%E4%BB%98%22%3B%0A++++++++++++++++++++++++++++%24log_msg+%3D+%22call+back%3A%22+.+%24msg%3B%0A++++++++++++++++++++++++++++sys_log_write_content%28+%24log_msg.__FILE__.__LINE__+%2C%22pay_log%22%2C%22notify_order_success%22%29%3B%0A++++++++++++++++++++++++%7D%0A++++++++++++++++++++%7D%0A++++++++++++++++%7D%0A%0A++++++++++++++++echo+%22success%22%3B%0A++++++++++++%7Delse%7B%0A++++++++++++++++echo+%22fail%22%3B%0A++++++++++++%7D%0A++++++++%7Delse%7B%0A++++++++++++echo+%27fail%27%3B%0A++++++++%7D%0A++++%7Delse%7B%0A++++++++echo+%27fail%27%3B%0A++++%7D%0A%7D+else+%7B%0A++++echo+%27fail%27%3B%0A%7D%0A%0A%3F%26gt%3B%0A%0A%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cspan%3E%3Cspan+style%3D%22font-size%3A14pt%3B%22%3E%E5%B0%81%E8%A3%85%E4%B8%BB%E5%8A%A8%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E7%BB%93%E6%9E%9C%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95%3C%2Fspan%3E%3C%2Fspan%3E+%0A++%3Cp%3E%3C%2Fp%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-html%22%3E%26lt%3B%3Fphp%0Ainclude_once%28%22..%2F..%2F..%2F..%2Finclude%2Fconfig.inc.php%22%29%3B%0Aheader+%28+%27Content-type%3Atext%2Fhtml%3Bcharset%3Dutf-8%27+%29%3B%0A%2F%2Finclude_once+%24_SERVER+%5B%27DOCUMENT_ROOT%27%5D+.+%27%2Fupacp_demo_b2c%2Fsdk%2Facp_service.php%27%3B%0A%0A%2F**%0A*+%E9%87%8D%E8%A6%81%EF%BC%9A%E8%81%94%E8%B0%83%E6%B5%8B%E8%AF%95%E6%97%B6%E8%AF%B7%E4%BB%94%E7%BB%86%E9%98%85%E8%AF%BB%E6%B3%A8%E9%87%8A%EF%BC%81%0A*%0A*+%E4%BA%A7%E5%93%81%EF%BC%9A%E8%B7%B3%E8%BD%AC%E7%BD%91%E5%85%B3%E6%94%AF%E4%BB%98%E4%BA%A7%E5%93%81%26lt%3Bbr%26gt%3B%0A*+%E4%BA%A4%E6%98%93%EF%BC%9A%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%EF%BC%9A%E5%8F%AA%E6%9C%89%E5%90%8C%E6%AD%A5%E5%BA%94%E7%AD%94+%26lt%3Bbr%26gt%3B%0A*+%E6%97%A5%E6%9C%9F%EF%BC%9A+2015-09%26lt%3Bbr%26gt%3B%0A*+%E7%89%88%E6%9C%AC%EF%BC%9A+1.0.0%0A*+%E7%89%88%E6%9D%83%EF%BC%9A+%E4%B8%AD%E5%9B%BD%E9%93%B6%E8%81%94%26lt%3Bbr%26gt%3B%0A*+%E8%AF%B4%E6%98%8E%EF%BC%9A%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E5%8F%AA%E6%98%AF%E4%B8%BA%E4%BA%86%E6%96%B9%E4%BE%BF%E5%95%86%E6%88%B7%E6%B5%8B%E8%AF%95%E8%80%8C%E6%8F%90%E4%BE%9B%E7%9A%84%E6%A0%B7%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%95%86%E6%88%B7%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E9%9C%80%E8%A6%81%EF%BC%8C%E6%8C%89%E7%85%A7%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%E7%BC%96%E5%86%99%E3%80%82%E8%AF%A5%E4%BB%A3%E7%A0%81%E4%BB%85%E4%BE%9B%E5%8F%82%E8%80%83%EF%BC%8C%E4%B8%8D%E6%8F%90%E4%BE%9B%E7%BC%96%E7%A0%81%E6%80%A7%E8%83%BD%E5%8F%8A%E8%A7%84%E8%8C%83%E6%80%A7%E7%AD%89%E6%96%B9%E9%9D%A2%E7%9A%84%E4%BF%9D%E9%9A%9C%26lt%3Bbr%26gt%3B%0A*+%E8%AF%A5%E6%8E%A5%E5%8F%A3%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%E4%BD%8D%E7%BD%AE%EF%BC%9Aopen.unionpay.com%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83+%E4%B8%8B%E8%BD%BD++%E4%BA%A7%E5%93%81%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83++%E3%80%8A%E7%BD%91%E5%85%B3%E6%94%AF%E4%BB%98%E4%BA%A7%E5%93%81%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83%E3%80%8B%EF%BC%8C%26lt%3Bbr%26gt%3B%0A*++++++++++++++%E3%80%8A%E5%B9%B3%E5%8F%B0%E6%8E%A5%E5%85%A5%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83-%E7%AC%AC5%E9%83%A8%E5%88%86-%E9%99%84%E5%BD%95%E3%80%8B%EF%BC%88%E5%86%85%E5%8C%85%E5%90%AB%E5%BA%94%E7%AD%94%E7%A0%81%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83%EF%BC%8C%E5%85%A8%E6%B8%A0%E9%81%93%E5%B9%B3%E5%8F%B0%E9%93%B6%E8%A1%8C%E5%90%8D%E7%A7%B0-%E7%AE%80%E7%A0%81%E5%AF%B9%E7%85%A7%E8%A1%A8%EF%BC%89%26lt%3Bbr%26gt%3B%0A*+%E6%B5%8B%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E5%A6%82%E6%9E%9C%E9%81%87%E5%88%B0%E7%96%91%E9%97%AE%E6%88%96%E9%97%AE%E9%A2%98%E6%82%A8%E5%8F%AF%E4%BB%A5%EF%BC%9A1%EF%BC%89%E4%BC%98%E5%85%88%E5%9C%A8open%E5%B9%B3%E5%8F%B0%E4%B8%AD%E6%9F%A5%E6%89%BE%E7%AD%94%E6%A1%88%EF%BC%9A%0A*++++++++++++++++++++++++++++++++%E8%B0%83%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E6%88%96%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98%E8%AF%B7%E5%9C%A8+https%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2Ffaq%2Flist%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83+FAQ+%E6%90%9C%E7%B4%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%0A*+++++++++++++++++++++++++++++%E6%B5%8B%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E4%BA%A7%E7%94%9F%E7%9A%847%E4%BD%8D%E5%BA%94%E7%AD%94%E7%A0%81%E9%97%AE%E9%A2%98%E7%96%91%E9%97%AE%E8%AF%B7%E5%9C%A8https%3A%2F%2Fopen.unionpay.com%2Fajweb%2Fhelp%2FrespCode%2FrespCodeList%E8%BE%93%E5%85%A5%E5%BA%94%E7%AD%94%E7%A0%81%E6%90%9C%E7%B4%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%0A*+++++++++++++++++++++++++++2%EF%BC%89+%E5%92%A8%E8%AF%A2%E5%9C%A8%E7%BA%BF%E4%BA%BA%E5%B7%A5%E6%94%AF%E6%8C%81%EF%BC%9A+open.unionpay.com%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E5%B9%B6%E7%99%BB%E9%99%86%E5%9C%A8%E5%8F%B3%E4%B8%8A%E8%A7%92%E7%82%B9%E5%87%BB%E2%80%9C%E5%9C%A8%E7%BA%BF%E5%AE%A2%E6%9C%8D%E2%80%9D%EF%BC%8C%E5%92%A8%E8%AF%A2%E4%BA%BA%E5%B7%A5QQ%E6%B5%8B%E8%AF%95%E6%94%AF%E6%8C%81%E3%80%82%0A*+%E4%BA%A4%E6%98%93%E8%AF%B4%E6%98%8E%EF%BC%9A+1%EF%BC%89%E5%AF%B9%E5%89%8D%E5%8F%B0%E4%BA%A4%E6%98%93%E5%8F%91%E8%B5%B7%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%EF%BC%9A%E5%89%8D%E5%8F%B0%E7%B1%BB%E4%BA%A4%E6%98%93%E5%BB%BA%E8%AE%AE%E9%97%B4%E9%9A%94%EF%BC%885%E5%88%86%E3%80%8110%E5%88%86%E3%80%8130%E5%88%86%E3%80%8160%E5%88%86%E3%80%81120%E5%88%86%EF%BC%89%E5%8F%91%E8%B5%B7%E4%BA%A4%E6%98%93%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9F%A5%E8%AF%A2%E5%88%B0%E7%BB%93%E6%9E%9C%E6%88%90%E5%8A%9F%EF%BC%8C%E5%88%99%E4%B8%8D%E7%94%A8%E5%86%8D%E6%9F%A5%E8%AF%A2%E3%80%82%EF%BC%88%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%A4%84%E7%90%86%E4%B8%AD%EF%BC%8C%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%88%B0%E8%AE%A2%E5%8D%95%E5%9D%87%E5%8F%AF%E8%83%BD%E4%B8%BA%E4%B8%AD%E9%97%B4%E7%8A%B6%E6%80%81%EF%BC%89%E3%80%82%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%BB%BA%E8%AE%AE%E5%95%86%E6%88%B7%E4%BD%BF%E7%94%A8payTimeout%EF%BC%88%E6%94%AF%E4%BB%98%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%EF%BC%89%EF%BC%8C%E8%BF%87%E4%BA%86%E8%BF%99%E4%B8%AA%E6%97%B6%E9%97%B4%E7%82%B9%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%BE%97%E5%88%B0%E7%9A%84%E7%BB%93%E6%9E%9C%E4%B8%BA%E6%9C%80%E7%BB%88%E7%BB%93%E6%9E%9C%E3%80%82%0A*++++++++2%EF%BC%89%E5%AF%B9%E5%90%8E%E5%8F%B0%E4%BA%A4%E6%98%93%E5%8F%91%E8%B5%B7%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%EF%BC%9A%E5%90%8E%E5%8F%B0%E7%B1%BB%E8%B5%84%E9%87%91%E7%B1%BB%E4%BA%A4%E6%98%93%E5%90%8C%E6%AD%A5%E8%BF%94%E5%9B%9E00%EF%BC%8C%E6%88%90%E5%8A%9F%E9%93%B6%E8%81%94%E6%9C%89%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%EF%BC%8C%E5%95%86%E6%88%B7%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%8F%91%E8%B5%B7+%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%EF%BC%8C%E5%8F%AF%E6%9F%A5%E8%AF%A2N%E6%AC%A1%EF%BC%88%E4%B8%8D%E8%B6%85%E8%BF%876%E6%AC%A1%EF%BC%89%EF%BC%8C%E6%AF%8F%E6%AC%A1%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%942N%E7%A7%92%E5%8F%91%E8%B5%B7%2C%E5%8D%B3%E9%97%B4%E9%9A%941%EF%BC%8C2%EF%BC%8C4%EF%BC%8C8%EF%BC%8C16%EF%BC%8C32S%E6%9F%A5%E8%AF%A2%EF%BC%88%E6%9F%A5%E8%AF%A2%E5%88%B003%EF%BC%8C04%EF%BC%8C05%E7%BB%A7%E7%BB%AD%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%90%A6%E5%88%99%E7%BB%88%E6%AD%A2%E6%9F%A5%E8%AF%A2%EF%BC%89%E3%80%82%0A*+++++++++++++++++++++++++++++++++%E5%90%8E%E5%8F%B0%E7%B1%BB%E8%B5%84%E9%87%91%E7%B1%BB%E5%90%8C%E6%AD%A5%E8%BF%9403+04+05%E5%93%8D%E5%BA%94%E7%A0%81%E5%8F%8A%E6%9C%AA%E5%BE%97%E5%88%B0%E9%93%B6%E8%81%94%E5%93%8D%E5%BA%94%EF%BC%88%E8%AF%BB%E8%B6%85%E6%97%B6%EF%BC%89%E9%9C%80%E5%8F%91%E8%B5%B7%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%EF%BC%8C%E5%8F%AF%E6%9F%A5%E8%AF%A2N%E6%AC%A1%EF%BC%88%E4%B8%8D%E8%B6%85%E8%BF%876%E6%AC%A1%EF%BC%89%EF%BC%8C%E6%AF%8F%E6%AC%A1%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%942N%E7%A7%92%E5%8F%91%E8%B5%B7%2C%E5%8D%B3%E9%97%B4%E9%9A%941%EF%BC%8C2%EF%BC%8C4%EF%BC%8C8%EF%BC%8C16%EF%BC%8C32S%E6%9F%A5%E8%AF%A2%EF%BC%88%E6%9F%A5%E8%AF%A2%E5%88%B003%EF%BC%8C04%EF%BC%8C05%E7%BB%A7%E7%BB%AD%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%90%A6%E5%88%99%E7%BB%88%E6%AD%A2%E6%9F%A5%E8%AF%A2%EF%BC%89%E3%80%82%0A*%2F%0A%0Afunction+check_Trade_Res%28%24orderId%2C%24merId%2C%24txnTime%2C%24firTime%3DTHIS_DATETIME%29%7B%0A++++%24params+%3D+array%28%0A++++++++%2F%2F%E4%BB%A5%E4%B8%8B%E4%BF%A1%E6%81%AF%E9%9D%9E%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%E4%B8%8D%E9%9C%80%E8%A6%81%E6%94%B9%E5%8A%A8%0A++++++++%27version%27+%3D%26gt%3B+com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3Bversion%2C++++++++%2F%2F%E7%89%88%E6%9C%AC%E5%8F%B7%0A++++++++%27encoding%27+%3D%26gt%3B+%27utf-8%27%2C++++++%2F%2F%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%0A++++++++%27signMethod%27+%3D%26gt%3B+com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3BsignMethod%2C+++++++++%2F%2F%E7%AD%BE%E5%90%8D%E6%96%B9%E6%B3%95%0A++++++++%27txnType%27+%3D%26gt%3B+%2700%27%2C++++++++++%2F%2F%E4%BA%A4%E6%98%93%E7%B1%BB%E5%9E%8B%0A++++++++%27txnSubType%27+%3D%26gt%3B+%2700%27%2C+++++++%2F%2F%E4%BA%A4%E6%98%93%E5%AD%90%E7%B1%BB%0A++++++++%27bizType%27+%3D%26gt%3B+%27000000%27%2C++++++%2F%2F%E4%B8%9A%E5%8A%A1%E7%B1%BB%E5%9E%8B%0A++++++++%27accessType%27+%3D%26gt%3B+%270%27%2C++++++++%2F%2F%E6%8E%A5%E5%85%A5%E7%B1%BB%E5%9E%8B%0A++++++++%27channelType%27+%3D%26gt%3B+%2707%27%2C++++++%2F%2F%E6%B8%A0%E9%81%93%E7%B1%BB%E5%9E%8B%0A%0A++++++++%2F%2FTODO+%E4%BB%A5%E4%B8%8B%E4%BF%A1%E6%81%AF%E9%9C%80%E8%A6%81%E5%A1%AB%E5%86%99%0A++++++++%27orderId%27+%3D%26gt%3B+%24orderId%2C+++%2F%2F%E8%AF%B7%E4%BF%AE%E6%94%B9%E8%A2%AB%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BA%A4%E6%98%93%E7%9A%84%E8%AE%A2%E5%8D%95%E5%8F%B7%EF%BC%8C8-32%E4%BD%8D%E6%95%B0%E5%AD%97%E5%AD%97%E6%AF%8D%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%90%AB%E2%80%9C-%E2%80%9D%E6%88%96%E2%80%9C_%E2%80%9D%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%0A++++++++%27merId%27+%3D%26gt%3B+%24merId%2C++++%2F%2F%E5%95%86%E6%88%B7%E4%BB%A3%E7%A0%81%EF%BC%8C%E8%AF%B7%E6%94%B9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%B5%8B%E8%AF%95%E5%95%86%E6%88%B7%E5%8F%B7%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%0A++++++++%27txnTime%27+%3D%26gt%3B+%24txnTime%2C%2F%2F%E8%AF%B7%E4%BF%AE%E6%94%B9%E8%A2%AB%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BA%A4%E6%98%93%E7%9A%84%E8%AE%A2%E5%8D%95%E5%8F%91%E9%80%81%E6%97%B6%E9%97%B4%EF%BC%8C%E6%A0%BC%E5%BC%8F%E4%B8%BAYYYYMMDDhhmmss%EF%BC%8C%E6%AD%A4%E5%A4%84%E9%BB%98%E8%AE%A4%E5%8F%96demo%E6%BC%94%E7%A4%BA%E9%A1%B5%E9%9D%A2%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%0A++++%29%3B%0A%0A++++com%5Cunionpay%5Cacp%5Csdk%5CAcpService%3A%3Asign+%28+%24params+%29%3B+%2F%2F+%E7%AD%BE%E5%90%8D%0A++++%24url+%3D+com%5Cunionpay%5Cacp%5Csdk%5CSDKConfig%3A%3AgetSDKConfig%28%29-%26gt%3BsingleQueryUrl%3B%0A%0A++++%24result_arr+%3D+com%5Cunionpay%5Cacp%5Csdk%5CAcpService%3A%3Apost+%28+%24params%2C+%24url%29%3B%0A++++if%28count%28%24result_arr%29%26lt%3B%3D0%29+%7B+%2F%2F%E6%B2%A1%E6%94%B6%E5%88%B0200%E5%BA%94%E7%AD%94%E7%9A%84%E6%83%85%E5%86%B5%0A++++++++%2F%2FprintResult+%28+%24url%2C+%24params%2C+%22%22+%29%3B%0A++++++++return%3B%0A++++%7D%0A%0A++++%2F%2FprintResult+%28%24url%2C+%24params%2C+%24result_arr+%29%3B+%2F%2F%E9%A1%B5%E9%9D%A2%E6%89%93%E5%8D%B0%E8%AF%B7%E6%B1%82%E5%BA%94%E7%AD%94%E6%95%B0%E6%8D%AE%0A%0A++++if+%28%21com%5Cunionpay%5Cacp%5Csdk%5CAcpService%3A%3Avalidate+%28%24result_arr%29+%29%7B%0A++++++++return+%27400%27%3B%0A++++%7D%0A%0A++++if+%28%24result_arr%5B%22respCode%22%5D+%3D%3D+%2200%22%29%7B%0A++++++++if+%28%24result_arr%5B%22origRespCode%22%5D+%3D%3D+%2200%22%29%7B%0A++++++++++++%2F%2F%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%0A++++++++++++%2F%2FTODO%0A++++++++++++%2F%2Fecho+%22%E4%BA%A4%E6%98%93%E6%88%90%E5%8A%9F%E3%80%82%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++++++++++return+%27200%27%3B%0A++++++++%7D+else+if+%28%24result_arr%5B%22origRespCode%22%5D+%3D%3D+%2203%22%0A++++++++++++%7C%7C+%24result_arr%5B%22origRespCode%22%5D+%3D%3D+%2204%22%0A++++++++++++%7C%7C+%24result_arr%5B%22origRespCode%22%5D+%3D%3D+%2205%22%29%7B%0A++++++++++++%2F%2F%E5%90%8E%E7%BB%AD%E9%9C%80%E5%8F%91%E8%B5%B7%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E7%A1%AE%E5%AE%9A%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%0A++++++++++++%2F%2FTODO%0A++++++++++++%2F%2Fecho+%22%E4%BA%A4%E6%98%93%E5%A4%84%E7%90%86%E4%B8%AD%EF%BC%8C%E8%AF%B7%E7%A8%8D%E5%BE%AE%E6%9F%A5%E8%AF%A2%E3%80%82%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++++++++++%2F%2F%E9%97%B4%E9%9A%94%E6%9F%A5%E8%AF%A2%0A++++++++++++ignore_user_abort%281%29%3B%0A++++++++++++set_time_limit%280%29%3B%0A++++++++++++%24interval+%3D+60*5%3B%2F%2F5%E5%88%86%E9%92%9F%0A++++++++++++sleep%28%24interval%29%3B%0A++++++++++++do%7B%0A++++++++++++++++if%28THIS_DATETIME-%24firTime%26gt%3B60*120%29%7B%0A++++++++++++++++++++return+%27400%27%3B%0A++++++++++++++++%7D%0A++++++++++++++++check_Trade_Res%28%24orderId%2C%24merId%2C%24txnTime%29%3B%2F%2F%E5%86%8D%E6%AC%A1%E6%9F%A5%E8%AF%A2%0A++++++++++++%7Dwhile%28true%29%3B%0A++++++++%7D+else+%7B%0A++++++++++++%2F%2F%E5%85%B6%E4%BB%96%E5%BA%94%E7%AD%94%E7%A0%81%E5%81%9A%E4%BB%A5%E5%A4%B1%E8%B4%A5%E5%A4%84%E7%90%86%0A++++++++++++%2F%2FTODO%0A++++++++++++%2F%2Fecho+%22%E4%BA%A4%E6%98%93%E5%A4%B1%E8%B4%A5%EF%BC%9A%22+.+%24result_arr%5B%22origRespMsg%22%5D+.+%22%E3%80%82%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++++++++++return+%27400%27%3B%0A++++++++%7D%0A++++%7D+else+if+%28%24result_arr%5B%22respCode%22%5D+%3D%3D+%2203%22%0A++++++++%7C%7C+%24result_arr%5B%22respCode%22%5D+%3D%3D+%2204%22%0A++++++++%7C%7C+%24result_arr%5B%22respCode%22%5D+%3D%3D+%2205%22+%29%7B%0A++++++++%2F%2F%E5%90%8E%E7%BB%AD%E9%9C%80%E5%8F%91%E8%B5%B7%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E7%A1%AE%E5%AE%9A%E4%BA%A4%E6%98%93%E7%8A%B6%E6%80%81%0A++++++++%2F%2FTODO%0A++++++++%2F%2Fecho+%22%E5%A4%84%E7%90%86%E8%B6%85%E6%97%B6%EF%BC%8C%E8%AF%B7%E7%A8%8D%E5%BE%AE%E6%9F%A5%E8%AF%A2%E3%80%82%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++++++%2F%2F%E9%97%B4%E9%9A%94%E6%9F%A5%E8%AF%A2%0A++++++++ignore_user_abort%281%29%3B%0A++++++++set_time_limit%280%29%3B%0A++++++++%24interval+%3D+60*5%3B%2F%2F5%E5%88%86%E9%92%9F%0A++++++++sleep%28%24interval%29%3B%0A++++++++do%7B%0A++++++++++++if%28THIS_DATETIME-%24firTime%26gt%3B60*120%29%7B%0A++++++++++++++++return+%27400%27%3B%0A++++++++++++%7D%0A++++++++++++check_Trade_Res%28%24orderId%2C%24merId%2C%24txnTime%29%3B%2F%2F%E5%86%8D%E6%AC%A1%E6%9F%A5%E8%AF%A2%0A++++++++%7Dwhile%28true%29%3B%0A++++%7D+else+%7B%0A++++++++%2F%2F%E5%85%B6%E4%BB%96%E5%BA%94%E7%AD%94%E7%A0%81%E5%81%9A%E4%BB%A5%E5%A4%B1%E8%B4%A5%E5%A4%84%E7%90%86%0A++++++++%2F%2FTODO%0A++++++++%2F%2Fecho+%22%E5%A4%B1%E8%B4%A5%EF%BC%9A%22+.+%24result_arr%5B%22respMsg%22%5D+.+%22%E3%80%82%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++++++return+%27400%27%3B%0A++++%7D%0A%7D%0A%0A%0A%2F**%0A*+%E6%89%93%E5%8D%B0%E8%AF%B7%E6%B1%82%E5%BA%94%E7%AD%94%0A*%0A*+%40param%0A*+++++++++%24url%0A*+%40param%0A*+++++++++%24req%0A*+%40param%0A*+++++++++%24resp%0A*%2F%0Afunction+printResult%28%24url%2C+%24req%2C+%24resp%29+%7B%0A++++echo+%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++echo+%22%E5%9C%B0%E5%9D%80%EF%BC%9A%22+.+%24url+.+%22%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++echo+%22%E8%AF%B7%E6%B1%82%EF%BC%9A%22+.+str_replace+%28+%22%5Cn%22%2C+%22%5Cn%26lt%3Bbr%26gt%3B%22%2C+htmlentities+%28+com%5Cunionpay%5Cacp%5Csdk%5CcreateLinkString+%28+%24req%2C+false%2C+true+%29+%29+%29+.+%22%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++echo+%22%E5%BA%94%E7%AD%94%EF%BC%9A%22+.+str_replace+%28+%22%5Cn%22%2C+%22%5Cn%26lt%3Bbr%26gt%3B%22%2C+htmlentities+%28+com%5Cunionpay%5Cacp%5Csdk%5CcreateLinkString+%28+%24resp+%2C+false%2C+false+%29%29+%29+.+%22%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A++++echo+%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%26lt%3Bbr%26gt%3B%5Cn%22%3B%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fqq603283912%2Farticle%2Fdetails%2F78720960%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fqq603283912%2Farticle%2Fdetails%2F78720960%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}