---
layout: default
title: Bitcoinj开发 WalletAppKit 生成钱包，恢复钱包，发送btc
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3E1.%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C+%E8%8E%B7%E5%8F%96btc%26nbsp%3B%3Ca+href%3D%22https%3A%2F%2Ftestnet.coinfaucet.eu%2Fen%2F%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Ftestnet.coinfaucet.eu%2Fen%2F%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cp%3E%3Ca+href%3D%22https%3A%2F%2Flive.blockcypher.com%2F%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Flive.blockcypher.com%2F%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cp%3Ebtc%3A%3Cbr%3E%3Ca+href%3D%22https%3A%2F%2Fgithub.com%2FSamourai-Wallet%2Fsamourai-wallet-android%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fgithub.com%2FSamourai-Wallet%2Fsamourai-wallet-android%3C%2Fa%3E%3Cbr%3E+eth%3A%3Cbr%3E%3Ca+href%3D%22https%3A%2F%2Fgitter.im%2Fweb3j%2Fweb3j%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Fgitter.im%2Fweb3j%2Fweb3j%3C%2Fa%3E%3Cbr%3E+eos%3A%3Cbr%3E%3Ca+href%3D%22https%3A%2F%2Feos.io%2F%22+rel%3D%22nofollow%22%3Ehttps%3A%2F%2Feos.io%2F%3C%2Fa%3E%3C%2Fp%3E+%0A++%3Cp%3E2.%E5%BC%95%E5%85%A5%E5%BA%93%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cpre%3E%0A%3Ccode+class%3D%22language-html+hljs%22%3Eimplementation+%27org.bitcoinj%3Abitcoinj-core%3A0.14.7%27+%2F%2Fbtc%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E3.%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-java%22%3Epublic+class+BitUtil+%7B%0A++++public+static+final+String+passphrase+%3D+%22%22%3B%0A++++%2F**%0A+++++*+%E9%80%9A%E8%BF%87Wallet+%E8%8E%B7%E5%8F%96+%E5%8A%A9%E8%AE%B0%E8%AF%8D%0A+++++*+%40param+wallet%0A+++++*+%40return%0A+++++*%2F%0A++++public+static+List%26lt%3BString%26gt%3B+getSeedWordsFromWallet%28Wallet+wallet%29%7B%0A++++++++DeterministicSeed+seed+%3D+wallet.getKeyChainSeed%28%29%3B%0A++++++++return++seed.getMnemonicCode%28%29%3B%0A++++%7D%0A%0A++++%2F**%0A+++++*+%E9%80%9A%E8%BF%87%E7%A7%81%E9%92%A5%E8%8E%B7%E5%8F%96ECKey%0A+++++*+%40param+priKey%0A+++++*+%40return%0A+++++*%2F%0A++++public+static+ECKey+getECKeyFromPriKey%28String+priKey%29%7B%0A++++++++ECKey+ecKey+%3D+ECKey.fromPrivate%28Numeric.toBigInt%28priKey%29%29%3B%0A++++++++return+ecKey%3B%0A++++%7D%0A++++public++static+String+getPubKeyFrom%28ECKey+ecKey%29%7B%0A++++++++NetworkParameters+params+%3DgetParams%28%29%3B%0A+++++++return+ecKey.toAddress%28params%29.toBase58%28%29.toString%28%29%3B%0A++++%7D%0A%0A%0A++++%2F%2F%E9%80%9A%E8%BF%87speed+%E8%8E%B7%E5%8F%96%E9%92%B1%E5%8C%85%0A++++public+static+Wallet+getFromSpeed%28String+seedCode%29%7B%0A++++++++NetworkParameters+params+%3D+getParams%28%29%3B%0A++++++++DeterministicSeed+seed%3B%0A++++++++try+%7B%0A++++++++++++seed+%3D+new+DeterministicSeed%28seedCode%2C+null%2C+passphrase%2CUtils.currentTimeSeconds%28%29+%29%3B%0A%0A++++++++++++Wallet+restoredWallet+%3D+Wallet.fromSeed%28params%2C+seed%29%3B%0A++++++++++++return++restoredWallet%3B%0A++++++++%7D+catch+%28UnreadableWalletException+e%29+%7B%0A++++++++++++e.printStackTrace%28%29%3B%0A++++++++%7D%0A++++++++return++null%3B%0A++++%7D%0A%0A%0A%0A++++%2F%2F%E9%80%9A%E8%BF%87%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E8%8E%B7%E5%8F%96Wallet%0A++++public+static++Wallet+getWalletFromFile%28String+filePath%29%7B%0A++++++++try+%7B%0A++++++++++++return++Wallet.loadFromFile%28new+File%28filePath%29%29%3B%0A++++++++%7D+catch+%28UnreadableWalletException+e%29+%7B%0A++++++++++++e.printStackTrace%28%29%3B%0A++++++++%7D%0A++++++++return+null%3B%0A++++%7D%0A%0A%0A++++%2F%2F%E5%8F%91%E9%80%81%E4%BA%A4%E6%98%93%0A++++public+static+void+send%28Wallet+wallet%2CString+recipientAddress%2C+String+amount%29%7B%0A++++++++NetworkParameters+params+%3D+getParams%28%29%3B%0A+++++++Address+targetAddress++%3D+Address.fromBase58%28params%2C+recipientAddress%29%3B%0A++++%2F%2F+Do+the+send+of+1+BTC+in+the+background.+This+could+throw+InsufficientMoneyException.%0A++++++++SPVBlockStore+blockStore+%3D+null%3B%0A++++++++try+%7B%0A++++++++++++blockStore+%3D+new+SPVBlockStore%28params%2C+getBLockFile%28%29%29%3B%0A++++++++%7D+catch+%28BlockStoreException+e%29+%7B%0A++++++++++++e.printStackTrace%28%29%3B%0A++++++++%7D%0A++++++++BlockChain+chain+%3D+null%3B%0A++++++++try+%7B%0A++++++++++++chain+%3D+new+BlockChain%28params%2C+wallet%2CblockStore%29%3B%0A++++++++++++PeerGroup+peerGroup+%3D+new+PeerGroup%28params%2C+chain%29%3B%0A++++++++++++try+%7B%0A++++++++++++++++Wallet.SendResult+result+%3D+wallet.sendCoins%28peerGroup%2C+targetAddress%2C+Coin.parseCoin%28amount%29%29%3B%0A++++++++++++++++%2F%2F+Save+the+wallet+to+disk%2C+optional+if+using+auto+saving+%28see+below%29.%0A++++++++++++++++%2F%2Fwallet.saveToFile%28....%29%3B%0A++++++++++++++++++++%2F%2F+Wait+for+the+transaction+to+propagate+across+the+P2P+network%2C+indicating+acceptance.%0A++++++++++++++++try+%7B%0A++++++++++++++++++++Transaction+transaction+%3D+result.broadcastComplete.get%28%29%3B%0A++++++++++++++++%7D+catch+%28InterruptedException+e%29+%7B%0A++++++++++++++++++++e.printStackTrace%28%29%3B%0A++++++++++++++++%7D+catch+%28ExecutionException+e%29+%7B%0A++++++++++++++++++++e.printStackTrace%28%29%3B%0A++++++++++++++++%7D%0A++++++++++++++++return%3B%0A++++++++++++%7D+catch+%28InsufficientMoneyException+e%29+%7B%0A++++++++++++++++e.printStackTrace%28%29%3B%0A++++++++++++%7D%0A++++++++%7D+catch+%28BlockStoreException+e%29+%7B%0A++++++++++++e.printStackTrace%28%29%3B%0A++++++++%7D%0A%0A++++%7D%0A%0A++++public+static++String+send%28WalletAppKit+walletAppKit%2CString+recipientAddress%2C+String+amount%29%7B%0A++++++++NetworkParameters+params+%3D+getParams%28%29%3B%0A++++++++String+err+%3D+%22%22%3B%0A++++++++if%28TextUtils.isEmpty%28recipientAddress%29+%7C%7C+recipientAddress.equals%28%22Scan+recipient+QR%22%29%29+%7B%0A++++++++++++err+%3D+%22Select+recipient%22%3B%0A++++++++++++return+err%3B%0A++++++++%7D%0A++++++++if%28TextUtils.isEmpty%28amount%29+%7C+Double.parseDouble%28amount%29+%26lt%3B%3D+0%29+%7B%0A++++++++++++err+%3D+%22Select+valid+amount%22%3B%0A++++++++++++return+err%3B%0A%0A++++++++%7D%0A++++++++if%28walletAppKit.wallet%28%29.getBalance%28%29.isLessThan%28Coin.parseCoin%28amount%29%29%29+%7B%0A++++++++++++err+%3D+%22You+got+not+enough+coins%22%3B%0A++++++++++++return+err%3B%0A++++++++%7D%0A++++++++SendRequest+request+%3D+SendRequest.to%28Address.fromBase58%28params%2C+recipientAddress%29%2C+Coin.parseCoin%28amount%29%29%3B%0A++++++++try+%7B%0A++++++++++++walletAppKit.wallet%28%29.completeTx%28request%29%3B%0A++++++++++++walletAppKit.wallet%28%29.commitTx%28request.tx%29%3B%0A++++++++++++walletAppKit.peerGroup%28%29.broadcastTransaction%28request.tx%29.broadcast%28%29%3B%0A++++++++++++return+%22%22%3B%0A++++++++%7D+catch+%28InsufficientMoneyException+e%29+%7B%0A++++++++++++e.printStackTrace%28%29%3B%0A++++++++++++return++e.getMessage%28%29%3B%0A++++++++%7D%0A++++%7D%0A%0A%0A%0A++++public+static+File+getBLockFile%28%29%7B%0A++++++++File+file+%3D+new+File%28%22%2Ftmp%2Fbitcoin-blocks%22%29%3B%0A++++++++if%28%21file.exists%28%29%29%7B%0A++++++++++++try+%7B%0A++++++++++++++++boolean+newFile+%3D+file.createNewFile%28%29%3B%0A++++++++++++++++if%28newFile%29%7B%0A++++++++++++++++++++return+file%3B%0A++++++++++++++++%7D%0A++++++++++++%7D+catch+%28IOException+e%29+%7B%0A++++++++++++++++e.printStackTrace%28%29%3B%0A++++++++++++%7D%0A++++++++%7D%0A++++++++return+file%3B%0A++++%7D%0A%0A+++public+static+void+getWallet%28%29%7B%0A+++++++NetworkParameters+params+%3D+getParams%28%29%3B%0A+++++++Wallet+wallet+%3D+new+Wallet%28params%29%3B%0A%0A+++++++List%26lt%3BECKey%26gt%3B+keys+%3D+new+ArrayList%26lt%3B%26gt%3B%28%29%3B%0A+++++++ECKey+ecKey+%3D+new+ECKey%28%29%3B%0A+++++++%2F%2F%E5%8A%A0%E5%AF%86eckey%0A+++++++ecKey.encrypt%28wallet.getKeyCrypter%28%29%2Cwallet.getKeyCrypter%28%29.deriveKey%28%22123456%22%29%29%3B%0A+++++++keys.add%28ecKey%29%3B%0A%0A%0A+++++++wallet.importKeysAndEncrypt%28keys%2C%22123456%22%29%3B%0A+++++++try+%7B%0A+++++++++++SPVBlockStore+blockStore+%3D+new+SPVBlockStore%28params%2C+getBLockFile%28%29%29%3B%0A+++++++++++BlockChain+chain+%3D+new+BlockChain%28params%2C+wallet%2CblockStore%29%3B%0A+++++++++++PeerGroup+peerGroup+%3D+new+PeerGroup%28params%2C+chain%29%3B%0A+++++++++++peerGroup.addWallet%28wallet%29%3B%0A+++++++++++peerGroup.startAsync%28%29%3B%0A+++++++++++peerGroup.downloadBlockChain%28%29%3B%0A+++++++++++%2F%2FstartAndWait%28%29%0A+++++++%7D+catch+%28BlockStoreException+e%29+%7B%0A+++++++++++e.printStackTrace%28%29%3B%0A+++++++%7D%0A+++%7D%0A%0A%0A+++public+static+void+testAddress%28Wallet+wallet%29%7B%0A+++++++Address+a+%3D+wallet.currentReceiveAddress%28%29%3B%0A+++++++ECKey+b+%3D+wallet.currentReceiveKey%28%29%3B%0A+++++++Address+c+%3D+wallet.freshReceiveAddress%28%29%3B%0A+++%7D%0A%0A%0A%0A%0A+++public+static+void+userSPeed%28Wallet+wallet%29%7B%0A%0A+++++++NetworkParameters+params+%3D+getParams%28%29%3B%0A+++++++DeterministicSeed+seed+%3D+wallet.getKeyChainSeed%28%29%3B%0A+++++++println%28%22Seed+words+are%3A+%22+%2B+Joiner.on%28%22+%22%29.join%28seed.getMnemonicCode%28%29%29%29%3B%0A+++++++println%28%22Seed+birthday+is%3A+%22+%2B+seed.getCreationTimeSeconds%28%29%29%3B%0A%0A%0A+++++++%2F%2F%E9%80%9A%E8%BF%87speed+%E8%8E%B7%E5%8F%96Wallet%0A+++++++String+seedCode+%3D+%22yard+impulse+luxury+drive+today+throw+farm+pepper+survey+wreck+glass+federal%22%3B%0A+++++++String+seedCode2+%3D+%22liberty+identify+erase+shuffle+dignity+armed+produce+mention+actual+you+top+vendor%22%3B%0A+++++++long+creationtime+%3D+1409478661L%3B%0A+++++++DeterministicSeed+seed2%3B%0A+++++++try+%7B%0A+++++++++++seed2+%3D+new+DeterministicSeed%28seedCode%2C+null%2C+%22%22%2C+creationtime%29%3B%0A+++++++++++Wallet+restoredWallet+%3D+Wallet.fromSeed%28params%2C+seed2%29%3B%0A+++++++%7D+catch+%28UnreadableWalletException+e%29+%7B%0A+++++++++++e.printStackTrace%28%29%3B%0A+++++++%7D%0A%0A+++%7D%0A%0A+++public+static+NetworkParameters+getParams%28%29%7B%0A++++++++return+Constant.IS_PRODUCTION+%3F+MainNetParams.get%28%29+%3A+TestNet3Params.get%28%29%3B%0A+++%7D%0A%0A%0A+++public+static+void+t%28Wallet+wallet%2CString+recipientAddress%2CString+password%2CString+mount%29%7B%0A+++++++Address+a+%3DAddress.fromBase58%28getParams%28%29%2C+recipientAddress%29%3B%0A+++++++SendRequest+req+%3D+SendRequest.to%28a%2C+Coin.parseCoin%28mount%29%29%3B%0A+++++++req.aesKey+%3D+wallet.getKeyCrypter%28%29.deriveKey%28password%29%3B%0A+++++++try+%7B%0A+++++++++++wallet.sendCoins%28req%29%3B%0A+++++++%7D+catch+%28InsufficientMoneyException+e%29+%7B%0A+++++++++++e.printStackTrace%28%29%3B%0A+++++++%7D%0A+++%7D%0A%0A+++public+static+void+watchAddress%28%29%7B%0A+++++++Wallet+toWatch+%3D+null%3B%0A+++++++DeterministicKey+watchingKey+%3D+toWatch.getWatchingKey%28%29%3B%0A+++++++String+s+%3D+watchingKey.serializePubB58%28getParams%28%29%29%3B%0A+++++++long+creationTimeSeconds+%3D+watchingKey.getCreationTimeSeconds%28%29%3B%0A%0A%0A+++++++DeterministicKey+key+%3D+DeterministicKey.deserializeB58%28null%2C+%22key+data+goes+here%22%2CgetParams%28%29%29%3B%0A%0A+++++++Wallet+wallet+%3D+Wallet.fromWatchingKey%28getParams%28%29%2C+key%29%3B%0A%0A%0A+++++++NetworkParameters+params+%3D+TestNet3Params.get%28%29%3B%0A%0A+++++++DeterministicSeed+seed+%3D+new+DeterministicSeed%28new+SecureRandom%28%29%2C128%2C%22password%22%2C+Utils.currentTimeSeconds%28%29%29%3B%0A+++++++wallet+%3D+Wallet.fromSeed%28params%2Cseed%29%3B%0A%0A++++++++%2F%2Ftobytes%0A+++++++byte%5B%5D+bytes+%3D+MnemonicCode.toSeed%28new+ArrayList%26lt%3B%26gt%3B%28%29%2C+passphrase%29%3B%0A%0A+++%7D%0A%0A+++public+static+void+test%28%29%7B%0A+++++++NetworkParameters+params+%3D+TestNet3Params.get%28%29%3B%0A+++++++DeterministicSeed+seed+%3D+new+DeterministicSeed%28new+SecureRandom%28%29%2C128%2C%22123456%22%2CUtils.currentTimeSeconds%28%29%29%3B%0A+++++++List%26lt%3BString%26gt%3B+mnemonicCode+%3D+seed.getMnemonicCode%28%29%3B%0A+++++++LogUtil.e%28%22mnemonicCode%22%2BmnemonicCode%29%3B%0A%2F%2F+++++++byte%5B%5D+bytes+%3D+MnemonicCode.toSeed%28mnemonicCode%2C+%22123456%22%29%3B%0A+++++++Wallet+wallet+%3D+Wallet.fromSeed%28params%2Cseed%29%3B%0A+++%7D%0A%0A+++public+static+void+test2%28ECKey+ceKey%29%7B%0A+++++++NetworkParameters+params+%3DgetParams%28%29%3B%0A+++++++String+s+%3D+ceKey.toAddress%28params%29.toBase58%28%29.toString%28%29%3B%0A+++++++String+privateKeyAsWiF+%3D+ceKey.getPrivateKeyAsWiF%28params%29%3B%2F%2F+%E7%A7%81%E9%92%A5%EF%BC%8C+WIF%28Wallet+Import+Format%29%0A+++++++LogUtil.e%28privateKeyAsWiF%2B%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%22%2Bs%29%3B%0A+++%7D%0A%0A%0A%0A+++%2F%2F%E9%80%9A%E8%BF%87%E7%A7%81%E9%92%A5%E6%8B%BF%E5%88%B0eckey%0A+++public+static+ECKey+getECkey%28String+prikey%29%7B%0A+++++++ECKey+key+%3D+DumpedPrivateKey.fromBase58%28getParams%28%29%2C+prikey%29.getKey%28%29%3B%0A+++++++return+key%3B%0A+++%7D%0A%0A%0A+++%2F%2F%E9%80%9A%E8%BF%87%E5%8A%A9%E8%AE%B0%E8%AF%8D%E5%AF%BC%E5%85%A5%E6%96%B0%E9%92%B1%E5%8C%85%0A+++public+static+Wallet+createWallet%28String+seedCode%2CString+password%29+%7B%0A++++++++KeyChainGroup+kcg%3B%0A++++++++DeterministicSeed+deterministicSeed+%3D+null%3B%0A++++++++try+%7B%0A++++++++++++deterministicSeed+%3D+new+DeterministicSeed%28seedCode%2C+null%2C+password%2C+Utils.currentTimeSeconds%28%29%29%3B%0A++++++++%7D+catch+%28UnreadableWalletException+e%29+%7B%0A++++++++++++e.printStackTrace%28%29%3B%0A++++++++%7D%0A++++++++kcg+%3D+new+KeyChainGroup%28getParams%28%29%2C+deterministicSeed%29%3B%0A++++++++Wallet+wallet+%3D+new+Wallet%28getParams%28%29%2C+kcg%29%3B%0A++++++++return+wallet%3B%0A++++%7D%0A%0A++++%2F%2F%E5%88%9B%E5%BB%BA%E6%96%B0%E9%92%B1%E5%8C%85%E3%80%82%0A++++public+static+Wallet+createWallet2%28%29+%7B%0A++++++++KeyChainGroup+kcg+%3D+new+KeyChainGroup%28getParams%28%29%29%3B%0A++++++++Wallet+wallet+%3D+new+Wallet%28getParams%28%29%2C+kcg%29%3B%0A++++++++wallet.getParams%28%29.getId%28%29%3B%0A++++++++return+wallet%3B%0A%0A++++%7D%0A%0A++++%2F%2F%E9%80%9A%E8%BF%87%E5%8A%A9%E8%AE%B0%E8%AF%8D%0A++++public+static+WalletAppKit+getWalletKit%28Context+context%2CString+seedcode%29%7B%0A++++++++WalletAppKit+walletAppKit+%3D+new+WalletAppKit%28getParams%28%29%2C+context.getCacheDir%28%29%2C+Constant.WALLET_NAME%29+%7B%0A++++++++++++%40Override%0A++++++++++++protected+void+onSetupCompleted%28%29+%7B%0A++++++++++++++++if+%28wallet%28%29.getImportedKeys%28%29.size%28%29+%26lt%3B+1%29+wallet%28%29.importKey%28new+ECKey%28%29%29%3B%0A++++++++++++++++wallet%28%29.allowSpendingUnconfirmedTransactions%28%29%3B%0A++++++++++++++++setupWalletListeners%28wallet%28%29%29%3B%0A++++++++++++++++ECKey+ecKey+%3D+wallet%28%29.getImportedKeys%28%29.get%280%29%3B%0A++++++++++++++++LogUtil.e%28getPubKeyFrom%28ecKey%29%29%3B%0A%2F%2F++++++++++++++++test2%28ecKey%29%3B%0A%2F%2F++++++++++++++++%2F%2F%E6%89%93%E5%8D%B0%E5%8A%A9%E8%AE%B0%E8%AF%8D%0A++++++++++++++++List%26lt%3BString%26gt%3B+seedWordsFromWallet+%3D+getSeedWordsFromWallet%28wallet%28%29%29%3B%0A++++++++++++++++LogUtil.e%28seedWordsFromWallet.toString%28%29%29%3B%0A++++++++++++++++%2F%2F%E5%BD%93%E5%89%8D%E5%9C%B0%E5%9D%80%0A++++++++++++++++String+s1+%3D+wallet%28%29.currentReceiveAddress%28%29.toBase58%28%29%3B%0A%0A+++++++++++++++%2F%2F+String+s2+%3D+wallet%28%29.currentChangeAddress%28%29.toBase58%28%29%3B%0A++++++++++++++++String+privateKeyAsWiF+%3D+wallet%28%29.currentReceiveKey%28%29.getPrivateKeyAsWiF%28getParams%28%29%29%3B%0A++++++++++++++++LogUtil.e%28%22currentReceiveAddress%3D%22%2Bs1%2B%22%3D%3D%3DprivateKeyAsWiF%3D%22%2BprivateKeyAsWiF%29%3B%0A++++++++++++++++%2F%2FLogUtil.e%28%22freshReceiveAddress%3D%22%2Bs%2B%22%3D%3D%3D%22%2B%22currentReceiveAddress%3D%22%2Bs1%29%3B%0A++++++++++++%7D%0A++++++++%7D%3B%0A%0A%0A++++++++walletAppKit.setAutoSave%28true%29%3B%0A++++++++walletAppKit.setBlockingStartup%28false%29%3B%0A%0A++++++++setDownListener%28walletAppKit%29%3B%0A++++++++if+%28getParams%28%29+%3D%3D+RegTestParams.get%28%29%29+%7B%0A++++++++++++AppContext.walletAppKit.connectToLocalHost%28%29%3B%0A++++++++%7D%0A++++++++if%28%21StringUtils.isEmpty%28seedcode%29%29%7B%0A++++++++++++try+%7B%0A++++++++++++++++DeterministicSeed+seed+%3D+new+DeterministicSeed%28seedcode%2C+null%2C+passphrase%2CUtils.currentTimeSeconds%28%29%29%3B%0A++++++++++++++++walletAppKit.restoreWalletFromSeed%28seed%29%3B%0A++++++++++++%7D+catch+%28UnreadableWalletException+e%29+%7B%0A++++++++++++++++e.printStackTrace%28%29%3B%0A++++++++++++%7D%0A%0A++++++++%7D%0A++++++++walletAppKit.startAsync%28%29%3B%0A++++++++walletAppKit.awaitRunning%28%29%3B%0A++++++++return++walletAppKit%3B%0A++++%7D%0A%0A++++%2F%2F%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%0A++++public+static+WalletAppKit+getWalletKit%28Context+context%29%7B%0A++++++++return+getWalletKit%28context%2C%22%22%29%3B%0A++++%7D%0A%0A%0A++++public+static+void+setDownListener%28WalletAppKit+walletAppKit%29%7B%0A++++++++walletAppKit.setDownloadListener%28new+DownloadProgressTracker%28%29+%7B%0A++++++++++++%40Override%0A++++++++++++protected+void+progress%28double+pct%2C+int+blocksSoFar%2C+Date+date%29+%7B%0A++++++++++++++++super.progress%28pct%2C+blocksSoFar%2C+date%29%3B%0A++++++++++++++++int+percentage+%3D+%28int%29+pct%3B%0A++++++++++++++++LogUtil.e%28percentage%2B%22percentage%22%29%3B%0A++++++++++++%7D%0A%0A++++++++++++%40Override%0A++++++++++++protected+void+doneDownload%28%29+%7B%0A++++++++++++++++super.doneDownload%28%29%3B%0A++++++++++++++++String+myAddress+%3D+walletAppKit.wallet%28%29.currentReceiveAddress%28%29.toBase58%28%29%3B%0A++++++++++++++++String+s+%3D+walletAppKit.wallet%28%29.getBalance%28%29.toFriendlyString%28%29%3B%0A++++++++++++++++BtcData+btcData+%3D+new+BtcData%28myAddress%2Cs%29%3B%0A++++++++++++++++RxBus.getInstance%28%29.send%28new+MessageModel%28BTC_DATA%2CbtcData%29%29%3B%0A++++++++++++++++LogUtil.e%28myAddress%2B%22%3D%3D%22%2Bs%29%3B%0A%0A++++++++++++%7D%0A++++++++%7D%29%3B%0A++++%7D%0A%0A++++public++static+void++setupWalletListeners%28Wallet+wallet%29+%7B%0A++++++++wallet.addCoinsReceivedEventListener%28%28wallet1%2C+tx%2C+prevBalance%2C+newBalance%29+-%26gt%3B+%7B%0A++++++++++++String+s+%3D+wallet.getBalance%28%29.toFriendlyString%28%29%3B%0A++++++++++++String+s1+%3D+%22%22%3B%0A++++++++++++if%28tx.getPurpose%28%29+%3D%3D+Transaction.Purpose.UNKNOWN%29+%7B%0A+++++++++++++++++s1+%3D+newBalance.minus%28prevBalance%29.toFriendlyString%28%29%3B%0A++++++++++++%7D%0A++++++++++++LogUtil.e%28s%2B%22%3D%3D%3D%22%2Bs1%29%3B%0A++++++++%7D%29%3B%0A++++++++wallet.addCoinsSentEventListener%28%28wallet12%2C+tx%2C+prevBalance%2C+newBalance%29+-%26gt%3B+%7B%0A++++++++++++String+s+%3D+wallet.getBalance%28%29.toFriendlyString%28%29%3B%0A++++++++++++String+s1+%3D+%22Sent+%22%2BprevBalance.minus%28newBalance%29.minus%28tx.getFee%28%29%29.toFriendlyString%28%29%3B%0A++++++++++++LogUtil.e%28s%2B%22%3D%3D%3D%22%2Bs1%29%3B%0A++++++++%7D%29%3B%0A%0A%0A++++%7D%0A%0A++++public+void+Test%28%29+%7B%0A%0A++++++++ECKey+k1+%3D+new+ECKey%28%29%3B+%2F%2F+some+random+key%0A%0A++++++++%2F%2F+encrypting+a+key%0A++++++++KeyCrypter+crypter1+%3D+new+KeyCrypterScrypt%28%29%3B%0A%0A++++++++KeyParameter+aesKey1+%3D+crypter1.deriveKey%28%22some+arbitrary+passphrase%22%29%3B%0A++++++++ECKey+k2+%3D+k1.encrypt%28crypter1%2C+aesKey1%29%3B%0A++++++++++++%2F%2FSystem.out.println%28k2.isEncrypted%28%29%29%3B+%2F%2F+true%0A%0A++++++++%2F%2F+decrypting+a+key%0A++++++++KeyCrypter+crypter2+%3D+k2.getKeyCrypter%28%29%3B%0A++++++++KeyParameter+aesKey2+%3D+crypter2.deriveKey%28%22some+arbitrary+passphrase%22%29%3B%0A++++++++ECKey+k3+%3D+k2.decrypt%28aesKey2%29%3B%0A%0A++++++++%2F%2FSystem.out.println%28k1.equals%28k3%29%29%3B++%2F%2F+true%0A++++%7D%0A%0A%0A++++public+static+void+closedWallet%28%29%7B%0A++++++++AppContext.walletAppKit.stopAsync%28%29%3B%0A++++++++AppContext.walletAppKit.awaitTerminated%28%29%3B%0A++++%7D%0A%0A++++public+static+void+test2%28%29%7B%0A++++++++DeterministicKey+deterministicKey+%3D+AppContext.walletAppKit.wallet%28%29.getWatchingKey%28%29.dropPrivateBytes%28%29%3B%0A++++++++deterministicKey+%3D+HDKeyDerivation.createMasterPubKeyFromBytes%28deterministicKey.getPubKey%28%29%2C+deterministicKey.getChainCode%28%29%29%3B%0A++++++++String+xPublicKey+%3D+deterministicKey.serializePubB58%28getParams%28%29%29%3B%0A++++++++String++privateKey%3D+AppContext.walletAppKit.wallet%28%29.getKeyByPath%28DeterministicKeyChain.ACCOUNT_ZERO_PATH%29.getPrivateKeyAsWiF%28getParams%28%29%29%3B%0A++++++++Log.e%28%22key%22%2C+xPublicKey.toString%28%29%29%3B%0A++++++++Log.e%28%22privatekey%22%2C+privateKey.toString%28%29%29%3B%0A++++++++if+%28getParams%28%29+%3D%3D+RegTestParams.get%28%29%29+%7B%0A++++++++++++AppContext.walletAppKit.connectToLocalHost%28%29%3B%0A++++++++%7D%0A++++%7D%0A%0A++++public+static+void+si%28String+privateKey%2CString+recipientAddress%2CString+amount%29%7B%0A++++++++SendRequest+request+%3D+SendRequest.to%28Address.fromBase58%28getParams%28%29%2C%0A++++++++++++++++recipientAddress%29%2C+Coin.parseCoin%28amount%29%29%3B%0A++++++++Signingtrasaction%28privateKey%2Crequest.tx.getHashAsString%28%29%29%3B%0A++++%7D%0A%0A++++public+static++void+Signingtrasaction%28String+wif%2C+String+msg%29+%7B%0A++++++++try+%7B%0A++++++++++++%2F%2F+creating+a+key+object+from+WiF%0A++++++++++++DumpedPrivateKey+dpk+%3D+DumpedPrivateKey.fromBase58%28getParams%28%29%2C+wif%29%3B%0A++++++++++++ECKey+key+%3D+dpk.getKey%28%29%3B%0A++++++++++++%2F%2F+checking+our+key+object%0A++++++++++++%2F%2F+NetworkParameters+main+%3D+MainNetParams.get%28%29%3B%0A++++++++++++String+check+%3D+key.getPrivateKeyAsWiF%28getParams%28%29%29%3B%0A++++++++++++System.out.println%28wif.equals%28check%29%29%3B++%2F%2F+true%0A++++++++++++Log.e%28%22wif+check%22%2C+String.valueOf%28wif.equals%28check%29%29%29%3B%0A++++++++++++%2F%2F+creating+Sha+object+from+string%0A++++++++++++Sha256Hash+hash+%3D+Sha256Hash.wrap%28msg%29%3B%0A++++++++++++%2F%2F+creating+signature%0A++++++++++++ECKey.ECDSASignature+sig+%3D+key.sign%28hash%29%3B%0A++++++++++++%2F%2F+encoding%0A++++++++++++byte%5B%5D+res+%3D+sig.encodeToDER%28%29%3B%0A++++++++++++%2F%2F+converting+to+hex%0A++++++++++++%2F%2FString+hex+%3D+DatatypeConverter.printHexBinary%28res%29%3B%0A++++++++++++%2F%2F+String+hex+%3D+new+String%28res%29%3B%0A++++++++++++String+hex+%3D+android.util.Base64.encodeToString%28res%2C+16%29%3B%0A++++++++++++Log.e%28%22sigendTransiction%22%2C+hex.toString%28%29%29%3B%0A++++++++++++Log.e%28%22decrypttx%22%2C%22%22%2B+Hex.decode%28sig.encodeToDER%28%29%29%29%3B%0A++++++++%7D+catch+%28Exception+e%29+%7B+++%2F%2Fsigningkey+%3D+ecdsa.from_string%28privateKey.decode%28%27hex%27%29%2C+curve%3Decdsa.SECP256k1%29%0A++++++++++++Log.e%28%22signing+exception%22%2C+e.getMessage%28%29.toString%28%29%29%3B%0A++++++++%7D%0A++++%7D%0A%0A%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E%3Cimg+alt%3D%22%22+class%3D%22has%22+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20180713173954858%3Fwatermark%2F2%2Ftext%2FaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l1anVubG9uZzM5MTk%3D%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%22%3E%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fyujunlong3919%2Farticle%2Fdetails%2F81035278%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fyujunlong3919%2Farticle%2Fdetails%2F81035278%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A+%3C%21--+%3Ca+class%3D%22btn%22+href%3D%22https%3A%2F%2Fpassport.csdn.net%2Faccount%2Flogin%3Futm_source%3Dcsdn_blog_pc_more_login%22+target%3D%22_self%22+id%3D%22btn-lobinreadmore%22+data-track-view%3D%27%7B%22mod%22%3A%22popu_557%22%2C%22con%22%3A%22%2Chttps%3A%2F%2Fblog.csdn.net%2Fyujunlong3919%2Farticle%2Fdetails%2F81035278%2C%22%7D%27+data-track-click%3D%27%7B%22mod%22%3A%22popu_557%22%2C%22con%22%3A%22%2Chttps%3A%2F%2Fblog.csdn.net%2Fyujunlong3919%2Farticle%2Fdetails%2F81035278%2C%22%7D%27%3E%E7%99%BB%E5%BD%95%E5%90%8E%E8%87%AA%E5%8A%A8%E5%B1%95%E5%BC%80%3C%2Fa%3E+--%3E+%0A%3C%2Fdiv%3E" | url_decode}}