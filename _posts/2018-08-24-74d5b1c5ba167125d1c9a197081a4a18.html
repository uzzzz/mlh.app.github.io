---
layout: default
title: 简单区块链实现
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Cdiv+class%3D%22article-copyright%22%3E%0A+++%E7%89%88%E6%9D%83%E5%A3%B0%E6%98%8E%EF%BC%9A%E6%9C%AC%E6%96%87%E4%B8%BA%E5%8D%9A%E4%B8%BB%E5%8E%9F%E5%88%9B%E6%96%87%E7%AB%A0%EF%BC%8C%E6%9C%AA%E7%BB%8F%E5%8D%9A%E4%B8%BB%E5%85%81%E8%AE%B8%E4%B8%8D%E5%BE%97%E8%BD%AC%E8%BD%BD%E3%80%82+https%3A%2F%2Fblog.csdn.net%2Fsinat_32023305%2Farticle%2Fdetails%2F82021024+%0A+%3C%2Fdiv%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cul%3E%0A+++%3Cli%3E+%3Ch2%3E%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF%EF%BC%9A%3C%2Fh2%3E+%3C%2Fli%3E+%0A++%3C%2Ful%3E%0A++%3Ch2%3E%3Cimg+alt%3D%22%22+class%3D%22has%22+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20180824150641599%3Fwatermark%2F2%2Ftext%2FaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzMyMDIzMzA1%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%22%3E%3C%2Fh2%3E+%0A++%3Cul%3E%0A+++%3Cli%3E+%3Ch2%3E%E4%BB%A3%E7%A0%81%3C%2Fh2%3E+%3C%2Fli%3E+%0A++%3C%2Ful%3E%0A++%3Cp%3E%3Cimg+alt%3D%22%22+class%3D%22has%22+src%3D%22https%3A%2F%2Fblog.uzzz.org%2F_p%3Fhttps%3A%2F%2Fimg-blog.csdn.net%2F20180824162914949%3Fwatermark%2F2%2Ftext%2FaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzMyMDIzMzA1%2Ffont%2F5a6L5L2T%2Ffontsize%2F400%2Ffill%2FI0JBQkFCMA%3D%3D%2Fdissolve%2F70%22%3E%3C%2Fp%3E+%0A++%3Cp%3E%26nbsp%3Bblock.go%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-Go%22%3Epackage+main%0A%0Aimport+%28%0A%09%22time%22%0A%09%22bytes%22%0A%09%22crypto%2Fsha256%22%0A%29%0A%0Atype+Block+struct+%7B%0A%09%2F%2F%E7%89%88%E6%9C%AC%0A%09Version+int64%0A%09%2F%2F%E5%89%8D%E5%8C%BA%E5%9D%97%E7%9A%84%E5%93%88%E5%B8%8C%E5%80%BC%0A%09PrevBlockHash+%5B%5Dbyte%0A%09%2F%2F%E5%BD%93%E5%89%8D%E5%8C%BA%E5%9D%97%E7%9A%84%E5%93%88%E5%B8%8C%E5%80%BC%EF%BC%8C%E4%B8%BA%E4%BA%86%E7%AE%80%E5%8C%96%E4%BB%A3%E7%A0%81%0A%09Hash+%5B%5Dbyte%0A%09%2F%2F%E6%A2%85%E5%85%8B%E5%B0%94%E6%A0%B9%0A%09MerKelRoot+%5B%5Dbyte%0A%09%2F%2F%E6%97%B6%E9%97%B4%E6%88%B3%0A%09TimeStamp+int64%0A%09%2F%2F%E9%9A%BE%E5%BA%A6%E5%80%BC%0A%09Bits+int64%0A%09%2F%2F%E9%9A%8F%E6%9C%BA%E5%80%BC%0A%09Nonce+int64%0A%0A%09%2F%2F%E4%BA%A4%E6%98%93%E4%BF%A1%E6%81%AF%0A%09Data+%5B%5Dbyte%0A%7D%0A%0Afunc+NewBlock%28data+string%2CprevBlockHash+%5B%5Dbyte%29+*Block%7B%0A%0A%09var+block+Block%0A%09block+%3D+Block+%7B%0A%09%09Version%3A1%2C%0A%09%09PrevBlockHash%3AprevBlockHash%2C%0A%09%09MerKelRoot%3A+%5B%5Dbyte%7B%7D%2C%0A%09%09TimeStamp%3Atime.Now%28%29.Unix%28%29%2C%0A%09%09Bits%3A1%2C%0A%09%09Nonce%3A1%2C%0A%09%09Data%3A%5B%5Dbyte%28data%29%7D%0A%09%09block.SetHash%28%29%0A%09return+%26amp%3Bblock%0A%7D%0A%0Afunc+%28block+*Block%29SetHash%28%29%7B%0A%09tmp+%3A%3D+%5B%5D%5B%5Dbyte%7B%0A%09%09IntToByte%28block.Version%29%2C%0A%09%09block.PrevBlockHash%2C%0A%09%09block.MerKelRoot%2C%0A%09%09IntToByte%28block.TimeStamp%29%2C%0A%09%09IntToByte%28block.Bits%29%2C%0A%09%09IntToByte%28block.Nonce%29%2C%0A%09%09block.Data%7D%0A%09%09data+%3A%3D+bytes.Join%28tmp%2C%5B%5Dbyte%7B%7D%29%0A%09%09hash+%3A%3D+sha256.Sum256%28data%29%0A%09%09block.Hash+%3D+hash%5B%3A%5D%0A%7D%0Afunc+NewGenesisBlock%28%29+*Block%7B%0A%09return+NewBlock%28%22Genesis+Block%22%2C%5B%5Dbyte%7B%7D%29%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3EblockChain.go%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-Go%22%3Epackage+main%0A%0Atype+BlockChain+struct+%7B%0A%09blocks+%5B%5D*Block%0A%7D%0A%0Afunc+NewBlockChain%28%29+*BlockChain%7B%0A%09block+%3A%3D+NewGenesisBlock%28%29%0A%09return+%26amp%3BBlockChain%7Bblocks%3A%5B%5D*Block%7Bblock%7D%7D%0A%7D%0A%0Afunc+%28bc+*BlockChain%29AddBlock%28data+string%29%7B%0A%09preBlockHash+%3A%3D+bc.blocks%5Blen%28bc.blocks%29-1%5D.Hash%0A%09block+%3A%3D+NewBlock%28data%2CpreBlockHash%29%0A%09bc.blocks+%3D+append%28bc.blocks%2Cblock%29%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A++%3Cp%3Eutils.go%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-Go%22%3Epackage+main%0A%0Aimport+%28%0A%09%22encoding%2Fbinary%22%0A%09%22bytes%22%0A%09%22os%22%0A%09%22fmt%22%0A%29%0A%0Afunc+IntToByte%28num+int64%29+%5B%5Dbyte%7B%0A%09%2F%2Ffunc+Write%28w+io.Writer%2C+order+ByteOrder%2C+data+interface%7B%7D%29+error+%7B%0A%0A%09var+buffer+bytes.Buffer%0A%09err+%3A%3D+binary.Write%28%26amp%3Bbuffer%2C+binary.BigEndian%2C+num%29%0A%09CheckErr%28%22IntToBye%22%2C+err%29%0A%09return+buffer.Bytes%28%29%0A%7D%0A%0Afunc+CheckErr%28pos+string%2C+err+error%29++%7B%0A%09if+err+%21%3D+nil+%7B%0A%09%09fmt.Println%28%22error+%2C+pos+%3A%22%2C+pos%2C+err%29%0A%09%09os.Exit%281%29%0A%09%7D%0A%7D%0A%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3Emain.go%3C%2Fp%3E+%0A++%3Cpre+class%3D%22has%22%3E%0A%3Ccode+class%3D%22language-Go%22%3Epackage+main%0A%0Aimport+%22fmt%22%0A%0Afunc+main%28%29%7B%0A%09bc+%3A%3D+NewBlockChain%28%29%0A%09bc.AddBlock%28%22A+send+B+1+btc%22%29%0A%09bc.AddBlock%28%22B+send+C+1+btc%22%29%0A%0A%09for+_%2Cblock+%3A%3Drange+bc.blocks%7B%0A%09%09fmt.Printf%28%22version%3A%22%2Cblock.Version%29%0A%09%09fmt.Printf%28%22preBlockHash%22%2Cblock.PrevBlockHash%29%0A%09%09fmt.Printf%28%22Hsah%3A+%25x%5Cn%22%2Cblock.Hash%29%0A%09%09fmt.Printf%28%22data%3A+%25s%5Cn%22%2Cblock.Data%29%0A%09%7D%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E+%0A++%3Cp%3E%26nbsp%3B%3C%2Fp%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fsinat_32023305%2Farticle%2Fdetails%2F82021024%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fsinat_32023305%2Farticle%2Fdetails%2F82021024%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}