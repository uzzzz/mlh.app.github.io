---
layout: default
title: 【ACM菜逼解题报告】Boxes in a Line
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Ch1%3EBoxes+in+a+Line%3C%2Fh1%3E+You+have+n+boxes+in+a+line+on+the+table+numbered+1+.+.+.+n+from+left+to+right.+Your+task+is+to+simulate+4+kinds+of+commands%3A%0A++%3Cbr%3E+%E2%80%A2+1+X+Y+%3A+move+box+X+to+the+left+to+Y+%28ignore+this+if+X+is+already+the+left+of+Y+%29%0A++%3Cbr%3E+%E2%80%A2+2+X+Y+%3A+move+box+X+to+the+right+to+Y+%28ignore+this+if+X+is+already+the+right+of+Y+%29%0A++%3Cbr%3E+%E2%80%A2+3+X+Y+%3A+swap+box+X+and+Y%0A++%3Cbr%3E+%E2%80%A2+4%3A+reverse+the+whole+line.%0A++%3Cbr%3E+Commands+are+guaranteed+to+be+valid%2C+i.e.+X+will+be+not+equal+to+Y+.%0A++%3Cbr%3E+For+example%2C+if+n+%3D+6%2C+after+executing+1+1+4%2C+the+line+becomes+2+3+1+4+5+6.+Then+after+executing+2+3+5%2C+the+line+becomes+2+1+4+5+3+6.+Then+after+executing+3+1+6%2C+the+line+becomes+2+6+4+5+3+1.Then+after+executing+4%2C+then+line+becomes+1+3+5+4+6+2.%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cstrong%3E%3Cspan+style%3D%22color%3Argb%28255%2C0%2C0%29%3B%22%3EInput%3C%2Fspan%3E%3C%2Fstrong%3E%0A++%3Cbr%3E+There+will+be+at+most+10+test+cases.+Each+test+case+begins+with+a+line+containing+2+integers+n%2C+m+%281+%26lt%3B%3D+n%2C+m+%26lt%3B%3D+100%2C+000%29.+Each+of+the+following+m+lines+contain+a+command.%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cstrong%3E%3Cspan+style%3D%22color%3Argb%28255%2C0%2C0%29%3B%22%3EOutput%3C%2Fspan%3E%3C%2Fstrong%3E%0A++%3Cbr%3E+For+each+test+case%2C+print+the+sum+of+numbers+at+odd-indexed+positions.+Positions+are+numbered+1+to+n+from+left+to+right.%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cstrong%3E%3Cspan+style%3D%22color%3Argb%28255%2C0%2C0%29%3B%22%3ESample+Input%3C%2Fspan%3E%3C%2Fstrong%3E%0A++%3Cbr%3E+6+4%0A++%3Cbr%3E+1+1+4%0A++%3Cbr%3E+2+3+5%0A++%3Cbr%3E+3+1+6%0A++%3Cbr%3E+4%0A++%3Cbr%3E+6+3%0A++%3Cbr%3E+1+1+4%0A++%3Cbr%3E+2+3+5%0A++%3Cbr%3E+3+1+6%0A++%3Cbr%3E+100000+1%0A++%3Cbr%3E+4%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cstrong%3E%3Cspan+style%3D%22color%3Argb%28255%2C0%2C0%29%3B%22%3ESample+Output%3C%2Fspan%3E%3C%2Fstrong%3E%0A++%3Cbr%3E+Case+1%3A+12%0A++%3Cbr%3E+Case+2%3A+9%0A++%3Cbr%3E+Case+3%3A+2500050000%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cp%3E%E6%B0%B4%E5%90%A7%EF%BC%8C%E6%85%A2%E6%85%A2%E8%B0%83%E8%AF%95%E5%90%A7%E3%80%82%3C%2Fp%3E+%0A++%3Cp%3E%3Cbr%3E%3C%2Fp%3E+%0A++%3Cstrong%3E%E9%99%84%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%EF%BC%9A%3C%2Fstrong%3E%0A++%3Cpre%3E%3Ccode+class%3D%22language-cpp%22%3E%23include%26lt%3Bcstdio%26gt%3B+%0A%23include%26lt%3Balgorithm%26gt%3B%0A%0Ausing+namespace+std%3B%0A%0A%23define+MAXN+%28100000%2B5%29+%0A%0Astruct+DoubleLinked%7B%0A%09int+l%2Cr%3B%0A%7D%3B%0A%0ADoubleLinked+a%5BMAXN%5D%3B%0Aint+n%2Cm%3B%0A%0Avoid+build%28int+x%2Cint+y%29%7B%0A%09a%5Bx%5D.r%3Dy%3Ba%5By%5D.l%3Dx%3B%0A%7D%0A%0Aint+main%28%29%7B%0A%09int+K%3D1%3B%0A%09while%28scanf%28%22%25d%25d%22%2C%26amp%3Bn%2C%26amp%3Bm%29%3D%3D2%29%7B%0A%09%09for%28int+i%3D1%3Bi%26lt%3B%3Dn%3Bi%2B%2B%29build%28i-1%2Ci%29%3Bbuild%28n%2C0%29%3B%0A%09%09bool+isltor%3Dtrue%3B%0A%09%09for%28int+i%3D0%3Bi%26lt%3Bm%3Bi%2B%2B%29%7B%0A%09%09%09int+op%2Cx%2Cy%3B%0A%09%09%09scanf%28%22%25d%22%2C%26amp%3Bop%29%3B%0A%09%09%09if%28op%3D%3D4%29%7B%0A%09%09%09%09isltor%3D%21isltor%3B%0A%09%09%09%7Delse%7B%0A%09%09%09%09scanf%28%22%25d%25d%22%2C%26amp%3Bx%2C%26amp%3By%29%3B%0A%09%09%09%09if%28%21isltor%26amp%3B%26amp%3Bop%21%3D3%29op%3Dop%252%2B1%3B%0A%09%09%09%09if%28op%3D%3D3%26amp%3B%26amp%3Ba%5Bx%5D.l%3D%3Dy%29swap%28x%2Cy%29%3B%0A%09%09%09%09int+XL%3Da%5Bx%5D.l%2CXR%3Da%5Bx%5D.r%3B%0A%09%09%09%09int+YL%3Da%5By%5D.l%2CYR%3Da%5By%5D.r%3B%0A%09%09%09%09if%28op%3D%3D1%26amp%3B%26amp%3BXR%3D%3Dy%29continue%3B%0A%09%09%09%09if%28op%3D%3D2%26amp%3B%26amp%3BXL%3D%3Dy%29continue%3B%0A%09%09%09%09if%28op%3D%3D1%29%7Bbuild%28XL%2CXR%29%3Bbuild%28YL%2Cx%29%3Bbuild%28x%2Cy%29%3B%7D%0A%09%09%09%09else+if%28op%3D%3D2%29%7Bbuild%28XL%2CXR%29%3Bbuild%28y%2Cx%29%3Bbuild%28x%2CYR%29%3B%7D%0A%09%09%09%09else+if%28op%3D%3D3%29%7B%0A%09%09%09%09%09if%28XR%3D%3Dy%29%7Bbuild%28XL%2Cy%29%3Bbuild%28y%2Cx%29%3Bbuild%28x%2CYR%29%3B%7D%0A%09%09%09%09%09else%7Bbuild%28XL%2Cy%29%3Bbuild%28y%2CXR%29%3Bbuild%28YL%2Cx%29%3Bbuild%28x%2CYR%29%3B%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%09%09%0A%09%09%7D%0A%09%09int+b%3D0%3B%0A%09%09long+long+int+ans%3D0%3B%0A%09%09for%28int+i%3D1%3Bi%26lt%3B%3Dn%3Bi%2B%2B%29%7B%0A%09%09%09b%3Da%5Bb%5D.r%3B%0A%09%09%09%2F%2Fprintf%28%22%25d+%22%2Cb%29%3B%0A%09%09%09if%28i%252%3D%3D1%29ans%2B%3Db%3B%0A%09%09%7D%0A%09%09if%28%21isltor%26amp%3B%26amp%3Bn%252%3D%3D0%29ans%3D%28long+long%29n*%28n%2B1%29%2F2-ans%3B%0A%09%09printf%28%22Case+%25d%3A+%25lld%5Cn%22%2CK%2B%2B%2Cans%29%3B%0A%09%7D%0A%09return+0%3B%0A%7D%3C%2Fcode%3E%3C%2Fpre%3E%0A++%3Cbr%3E%0A++%3Cbr%3E+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fyzxin95%2Farticle%2Fdetails%2F43888115%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fyzxin95%2Farticle%2Fdetails%2F43888115%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}