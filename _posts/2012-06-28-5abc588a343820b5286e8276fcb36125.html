---
layout: default
title: APDU指令学习：如何读取NFC手机钱包的余额
---

{{ "%3Cdiv+id%3D%22article_content%22+class%3D%22article_content+clearfix+csdn-tracking-statistics%22+data-pid%3D%22blog%22+data-mod%3D%22popu_307%22+data-dsm%3D%22post%22%3E+%0A+%3Clink+rel%3D%22stylesheet%22+href%3D%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fphoenix%2Ftemplate%2Fcss%2Fck_htmledit_views-e2445db1a8.css%22%3E+%0A+%3Cdiv+class%3D%22htmledit_views%22%3E+%0A++%3Cp%3E%3Cbr%3E%3C%2Fp%3E%0A++%3Cp%3E%3Cspan%3E+%3C%2Fspan%3E%2F%2F+select+PSF+%281PAY.SYS.DDF01%29%3C%2Fp%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%2F*--------------------------------------------------------------*%2F%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebeijing.Util.log%28%22select+file%3A+tag.selectByName%28DFN_PSE%29%22%29%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Eif+%28tag.selectByName%28DFN_PSE%29.isOkey%28%29%29+%7B%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Eprotected+final+static+byte%5B%5D+DFN_PSE+%3D+%7B+%28byte%29+%271%27%2C+%28byte%29+%27P%27%2C%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+%27A%27%2C+%28byte%29+%27Y%27%2C+%28byte%29+%27.%27%2C+%28byte%29+%27S%27%2C+%28byte%29+%27Y%27%2C%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+%27S%27%2C+%28byte%29+%27.%27%2C+%28byte%29+%27D%27%2C+%28byte%29+%27D%27%2C+%28byte%29+%27F%27%2C%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+%270%27%2C+%28byte%29+%271%27%2C+%7D%3B%0A++%3Cspan%3E+%3C%2Fspan%3E%2F%2F1PAY.SYS.DDF01%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3Ename+%3D+DFN_PSE%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3EByteBuffer+buff+%3D+ByteBuffer.allocate%28name.length+%2B+6%29%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x00%29%3B+%2F%2F+CLA+Class%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0xA4%29%3B+%2F%2F+INS+Instruction%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x04%29%3B+%2F%2F+P1+Parameter+1%0A++%3Cspan%3E+%3C%2Fspan%3ESELECT+by+NAME%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x00%29%3B+%2F%2F+P2+Parameter+2%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+name.length%29%3B+%2F%2F+Lc%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28name%29%3B%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x00%29%3B+%2F%2F+Le%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3ESELECT%E5%91%BD%E4%BB%A4%E5%8F%82%E8%80%83%0A++%3Cbr%3E%E7%AC%AC1%E9%83%A8%E5%88%86%E7%94%B5%E5%AD%90%E9%92%B1%E5%8C%85%E7%94%B5%E5%AD%90%E5%AD%98%E6%8A%98%E5%BA%94%E7%94%A8%E5%8D%A1%E7%89%87%E8%A7%84%E8%8C%83+%E4%B9%8B%26nbsp%3B%0A++%3Cbr%3E%26nbsp%3B+%E8%A1%A833+SELECT+%E5%91%BD%E4%BB%A4%E6%8A%A5%E6%96%87%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3E%26nbsp%3B+%E8%A1%A834+SELECT+%E5%91%BD%E4%BB%A4%E5%BC%95%E7%94%A8%E6%8E%A7%E5%88%B6%E5%8F%82%E6%95%B0%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%E5%A6%82%E6%9E%9C%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E7%BB%93%E5%B0%BE%E6%98%AF+0x9000+%26nbsp%3B%EF%BC%8C%E5%B0%B1SELECT%E6%88%90%E5%8A%9F%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A++%3Cbr%3ESFI_EXTRA_LOG+%3D+4%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%2F%2F+read+card+info+file%2C+binary+%284%29%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%2F*--------------------------------------------------------------*%2F%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3EINFO+%3D+tag.readBinary%28SFI_EXTRA_LOG%29%3B%0A++%3Cbr%3E%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A++%3Cbr%3ESFI_EXTRA_CNT+%3D+5%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%2F%2F+read+card+operation+file%2C+binary+%285%29%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%2F*--------------------------------------------------------------*%2F%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3ECNT+%3D+tag.readBinary%28SFI_EXTRA_CNT%29%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Epublic+Response+readBinary%28int+sfi%29+%7B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Efinal+byte%5B%5D+cmd+%3D+%7B+%28byte%29+0x00%2C+%2F%2F+CLA+Class%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+0xB0%2C+%2F%2F+INS+Instruction%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+%280x00000080+%7C+%28sfi+%26amp%3B+0x1F%29%29%2C+%2F%2F+P1+Parameter+1%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+0x00%2C+%2F%2F+P2+Parameter+2%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+0x00%2C+%2F%2F+Le%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%7D%3B%0A++%3Cbr%3ECNT+%3D+tag.readBinary%28SFI_EXTRA_CNT%29%3B%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%E5%8F%82%E8%80%83%EF%BC%9A%0A++%3Cbr%3E%E7%AC%AC1%E9%83%A8%E5%88%86%E7%94%B5%E5%AD%90%E9%92%B1%E5%8C%85%E7%94%B5%E5%AD%90%E5%AD%98%E6%8A%98%E5%BA%94%E7%94%A8%E5%8D%A1%E7%89%87%E8%A7%84%E8%8C%83+%E4%B9%8B%26nbsp%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%E8%A1%A825+READ+BINARY+%E5%91%BD%E4%BB%A4%E6%8A%A5%E6%96%87%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3E%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A++%3Cbr%3E%E8%AF%BB%E4%BD%99%E9%A2%9D%E4%B9%8B%E5%89%8D%E7%9A%84%E6%93%8D%E4%BD%9C%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%2F%2F+select+Main+Application+%26nbsp%3B%0A++%3Cbr%3Ebyte%5B%5D+DFI_EP+%3D+%7B+%28byte%29+0x10%2C+%28byte%29+0x01+%7D%3B%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%2F*--------------------------------------------------------------*%2F%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Eif+%28tag.selectByID%28DFI_EP%29.isOkey%28%29%29+%7B%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3Epublic+Response+selectByID%28byte%5B%5D+name%29+%7B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3EByteBuffer+buff+%3D+ByteBuffer.allocate%28name.length+%2B+6%29%3B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x00%29%3B+%2F%2F+CLA+Class%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0xA4%29%3B+%2F%2F+INS+Instruction%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x00%29%3B+%2F%2F+P1+Parameter+1%0A++%3Cspan%3E+%3C%2Fspan%3ESELECT+by+ID%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x00%29%3B+%2F%2F+P2+Parameter+2%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+name.length%29%3B+%2F%2F+Lc%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28name%29%3B%0A++%3Cspan%3E+%3C%2Fspan%3Ebuff.put%28%28byte%29+0x00%29%3B+%2F%2F+Le%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Ereturn+new+Response%28transceive%28buff.array%28%29%29%29%3B%0A++%3Cbr%3E%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%0A++%3Cbr%3E%E8%AF%BB%E4%BD%99%E9%A2%9D%0A++%3Cbr%3ECASH+%3D+tag.getBalance%28true%29%3B%0A++%3Cspan%3E+%3C%2Fspan%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Epublic+Response+getBalance%28boolean+isEP%29+%7B%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3Efinal+byte%5B%5D+cmd+%3D+%7B+%28byte%29+0x80%2C+%2F%2F+CLA+Class%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+0x5C%2C+%2F%2F+INS+Instruction%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+0x00%2C+%2F%2F+P1+Parameter+1%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+%28isEP+%3F+2+%3A+1%29%2C+%2F%2F+P2+Parameter+2%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%28byte%29+0x04%2C+%2F%2F+Le%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%7D%3B%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3E%E5%8F%82%E8%80%83%EF%BC%9A%0A++%3Cbr%3Ehttp%3A%2F%2Fblog.csdn.net%2Fjennyvenus%2Farticle%2Fdetails%2F4183994%0A++%3Cbr%3E%2F%2FGet+Balance+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%26nbsp%3B+%28defined+by+PBOC%29%0A++%3Cbr%3E80+5C+00+02+04%0A++%3Cbr%3E%0A++%3Cbr%3E%0A++%3Cbr%3EPBOC+%E7%AC%AC2%E9%83%A8%E5%88%86%28%E7%94%B5%E5%AD%90%E9%92%B1%E5%8C%85_%E7%94%B5%E5%AD%90%E5%AD%98%E6%8A%98%E5%BA%94%E7%94%A8%E8%A7%84%E8%8C%83%29%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%E8%A1%A82+%E5%91%BD%E4%BB%A4%E7%9A%84%E7%B1%BB%E5%88%AB%E5%AD%97%E8%8A%82%E5%92%8C%E6%8C%87%E4%BB%A4%E5%AD%97%E8%8A%82%0A++%3Cbr%3E%0A++%3Cspan%3E+%3C%2Fspan%3E%E8%AF%BB%E4%BD%99%E9%A2%9D%EF%BC%88GET+BALANCE%EF%BC%89%0A++%3Cbr%3E%E2%80%9880%E2%80%99+%E2%80%985C%E2%80%99+%E2%80%9800%E2%80%99+%E2%80%980X%E2%80%99%26nbsp%3B+%0A+%3C%2Fdiv%3E+%0A%3C%2Fdiv%3E+%0A%3Cdiv+class%3D%22hide-article-box+text-center%22%3E+%0A+%3Ca+class%3D%22btn+btn-red-hollow%22+id%3D%22btn-readmore%22+data-track-view%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fberryreload%2Farticle%2Fdetails%2F7700134%2C%26quot%3B%7D%22+data-track-click%3D%22%7B%26quot%3Bmod%26quot%3B%3A%26quot%3Bpopu_376%26quot%3B%2C%26quot%3Bcon%26quot%3B%3A%26quot%3B%2Chttps%3A%2F%2Fblog.csdn.net%2Fberryreload%2Farticle%2Fdetails%2F7700134%2C%26quot%3B%7D%22%3E%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A%3C%2Fa%3E+%0A%3C%2Fdiv%3E" | url_decode}}