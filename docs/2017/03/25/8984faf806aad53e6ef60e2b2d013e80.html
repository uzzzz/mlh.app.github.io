<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>iOS之app中接入支付宝的流程解析（一） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="iOS之app中接入支付宝的流程解析（一）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="第一步：创建应用并获取APPID，添加应用功能 要在您的应用中使用支付宝开放产品的接口能力，您需要先去蚂蚁金服开放平台（open.alipay.com），在开发者中心中创建登记您的应用，并提交审核，审核通过后会为您生成应用唯一标识（APPID），并且可以申请开通开放产品使用权限，通过APPID您的应用才能调用开放产品的接口能力。 1.添加应用功能 某些功能必须签约才能使用：签约 如下： &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 应用上线后，可选择自己使用和推广给他人使用。供他人使用指的是应用开发者和应用使用者不是同一个人。使用者在使用应用前，需要做两件事情：授权、签约（如果应用中包含需要签约的功能则需要签约，不包含则不需要） 开发者和使用者的区别，开发者：应用（功能或者服务）的开发人员（或者企业），使用者：购买和使用应用（功能或者服务）的人员（或者企业）。当开发者自己使用自己开发的应用时，开发者和使用者的两个身份是重合的。 商户（例如：是某个电商网站）对开发者进行应用授权后，开发者可以帮助商户完成相应的业务逻辑，例如代替商户发起当面付的收单请求。 2、授权采用标准的OAuth 2.0流程。 3、要进行第三方调用，开发者需要在应用中添加对应功能并获得商户授权，商户需要申请开通相应的权限（例如对于当面付，开发者只需在应用中添加“当面付”功能并获得商户授权，商户则需要开通“当面付”产品，之后开发者就可以帮助商户发起当面付的收单请求）。 必须填写“接口加密方式”（加密方式只需填写一个），才可以提交审核。 第二步：配置密钥 上传应用公钥并获取支付宝公钥，（https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.TvAv9s&amp;treeId=291&amp;articleId=105972&amp;docType=1）；支付宝公钥内容，在代码中验签使用。 服务端的SDK，签名和验签（https://doc.open.alipay.com/docs/doc.htm?treeId=54&amp;articleId=103419&amp;docType=1）； 开发者调用接口前需要先生成RSA密钥，RSA密钥包含应用私钥(APP_PRIVATE_KEY)、应用公钥(APP_PUBLIC_KEY）。生成密钥后在开放平台开发者中心进行密钥配置，配置完成后可以获取支付宝公钥(ALIPAY_PUBLIC_KEY)。 生成RSA密钥 支付宝提供一键生成工具便于开发者生成一对RSA密钥，可通过下方链接下载密钥生成工具： WINDOWS MAC_OSX 下载该工具后，解压打开文件夹，运行“RSA签名验签工具.bat”（WINDOWS）或“RSA签名验签工具.command”（MAC_OSX）。 界面示例： 详细步骤： 1.根据开发语言选择密钥格式。 2.选择密钥长度，建议使用2048位。 3.点击 “生成密钥”，会自动生成商户应用公钥和应用私钥。 4.点击“打开密钥文件路径”，即可找到生成的公私钥。如图： 生成的私钥需妥善保管，避免遗失，不要泄露。应用私钥需填写到代码中供签名时使用。应用公钥需提供给支付宝账号管理者上传到支付宝开放平台。 除了使用支付宝提供的一键生成密钥工具外，也可以使用OpenSSL工具命令生成密钥。步骤如下： 使用OpenSSL工具生成密钥 更新时间：2016/12/22&nbsp; 访问次数：5028 除了使用支付宝提供的一键生成工具外，也可以使用OpenSSL工具（下载地址https://www.openssl.org/source/?spm=a219a.7629140.0.0.b0VRLV）命令生成密钥。 第一步&nbsp;生成RSA密钥 首先进入OpenSSL工具，输入以下命令。 1 2 3 4 OpenSSL&gt; genrsa -out app_private_key.pem&nbsp;&nbsp; 1024&nbsp; #生成私钥 OpenSSL&gt; pkcs8 -topk8 -inform PEM -in app_private_key.pem -outform PEM -nocrypt -out app_private_key_pkcs8.pem #Java开发者需要将私钥转换成PKCS8格式 OpenSSL&gt; rsa -in app_private_key.pem -pubout -out app_public_key.pem #生成公钥 OpenSSL&gt; exit #退出OpenSSL程序 经过以上步骤，开发者可以在当前文件夹中（OpenSSL运行文件夹），看到app_private_key.pem（开发者RSA私钥，非Java语言适用）、app_private_key_pkcs8.pem（pkcs8格式开发者RSA私钥，Java语言适用）和app_public_key.pem（开发者RSA公钥）3个文件。开发者将私钥保留，将公钥提交给支付宝配置到开发平台，用于验证签名。以下为私钥文件和公钥文件示例。 TIPS：对于使用Java的开发者，需将生成的pkcs8格式的私钥去除头尾、换行和空格，作为私钥填入代码中，对于.NET和PHP的开发者来说，无需进行pkcs8命令行操作。&nbsp; 标准的私钥文件示例（PHP、.NET使用） 1 2 3 -----BEGIN RSA PRIVATE KEY----- MIICXQIBAAKBgQC+L0rfjLl3neHleNMOsYTW8r0QXZ5RVb2p/vvY3fJNNugvJ7lo4+fdBz+LN4mDxTz4MTOhi5e2yeAqx+v3nKpNmPzC5LmDjhHZURhwbqFtIpZD51mOfno2c3MDwlrsVi6mTypbNu4uaQzw/TOpwufSLWF7k6p2pLoVmmqJzQiD0QIDAQABAoGAakB1risquv9D4zX7hCv9MTFwGyKSfpJOYhkIjwKAik7wrNeeqFEbisqv35FpjGq3Q1oJpGkem4pxaLVEyZOHONefZ9MGVChT/MNH5b0FJYWl392RZy8KCdq376Vt4gKVlABvaV1DkapL+nLh7LMo/bENudARsxD55IGObMU19lkCQQDwHmzWPMHfc3kdY6AqiLrOss+MVIAhQqZOHhDe0aW2gZtwiWeYK1wB/fRxJ5esk1sScOWgzvCN/oGJLhU3kipHAkEAysNoSdG2oWADxlIt4W9kUiiiqNgimHGMHPwp4JMxupHMTm7D9XtGUIiDijZxunHv3kvktNfWj3Yji0661zHVJwJBAM8TDf077F4NsVc9AXVs8N0sq3xzqwQD/HPFzfq6hdR8tVY5yRMb4X7+SX4EDPORKKsgnYcur5lk8MUi7r072iUCQQC8xQvUne+fcdpRyrR4StJlQvucogwjTKMbYRBDygXkIlTJOIorgudFlrKP/HwJDoY4uQNl8gQJb/1LdrKwIe7FAkBl0TNtfodGrDXBHwBgtN/t3pyi+sz7OpJdUklKE7zMSBuLd1E3O4JMzvWP9wEE7JDb+brjgK4/cxxUHUTkk592 -----END RSA PRIVATE KEY----- PKCS8处理后的私钥文件示例（Java使用） 1 MIICeAIBADANBgkqhkiG9w0BAQEFAASCAmIwggJeAgEAAoGBAN0yqPkLXlnhM+2H/57aHsYHaHXazr9pFQun907TMvmbR04wHChVsKVgGUF1hC0FN9hfeYT5v2SXg1WJSg2tSgk7F29SpsF0I36oSLCIszxdu7ClO7c22mxEVuCjmYpJdqb6XweAZzv4Is661jXP4PdrCTHRdVTU5zR9xUByiLSVAgMBAAECgYEAhznORRonHylm9oKaygEsqQGkYdBXbnsOS6busLi6xA+iovEUdbAVIrTCG9t854z2HAgaISoRUKyztJoOtJfI1wJaQU+XL+U3JIh4jmNx/k5UzJijfvfpT7Cv3ueMtqyAGBJrkLvXjiS7O5ylaCGuB0Qz711bWGkRrVoosPM3N6ECQQD8hVQUgnHEVHZYtvFqfcoq2g/onPbSqyjdrRu35a7PvgDAZx69Mr/XggGNTgT3jJn7+2XmiGkHM1fd1Ob/3uAdAkEA4D7aE3ZgXG/PQqlm3VbE/+4MvNl8xhjqOkByBOY2ZFfWKhlRziLEPSSAh16xEJ79WgY9iti+guLRAMravGrs2QJBAOmKWYeaWKNNxiIoF7/4VDgrcpkcSf3uRB44UjFSn8kLnWBUPo6WV+x1FQBdjqRviZ4NFGIP+KqrJnFHzNgJhVUCQFzCAukMDV4PLfeQJSmna8PFz2UKva8fvTutTryyEYu+PauaX5laDjyQbc4RIEMU0Q29CRX3BA8WDYg7YPGRdTkCQQCG+pjU2FB17ZLuKRlKEdtXNV6zQFTmFc1TKhlsDTtCkWs/xwkoCfZKstuV3Uc5J4BNJDkQOGm38pDRPcUDUh2/ 公钥文件示例 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB -----END PUBLIC KEY----- 第二步 处理应用公钥格式 将公钥文件去除头尾、换行和空格，转成一行字符串。把该字符串提供给支付宝账号管理者，登录开放平台上传应用公钥并获取支付宝公钥。教程 例如转换前公钥pem文件格式： 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB -----END PUBLIC KEY----- 转换后得到的字符串为： 1 MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB 第三步 处理支付宝公钥格式(针对文本读取方式) 上一步获取到支付宝公钥，用于支付宝返回数据的验签。 对于支付宝公钥，看到的是一个字符串，如下： 1 MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB 如果需要使用文件方式（如PHP/.NET版本）读取支付宝公钥，需要在头尾加入标示后保存至文件，文件内容如下： 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB -----END PUBLIC KEY----- 第三步：搭建和配置开发环境 接入移动支付需要集成两个SDK，客户端SDK需要集成在商户自己的APP中，用于唤起支付宝APP并发送交易数据，并在支付宝APP返回商户APP时获得支付结果。服务端SDK需要商户集成在自己的服务端系统中，用于协助解析并验证客户端同步返回的支付结果和异步通知。 SDK调用前需要进行初始化，代码示例如下： 1 AlipayClient alipayClient = new DefaultAlipayClient(URL, APP_ID, APP_PRIVATE_KEY, FORMAT, CHARSET, ALIPAY_PUBLIC_KEY, SIGN_TYPE); 关键参数说明： 配置参数 示例值解释 获取方式/示例值 URL 支付宝网关（固定） https://openapi.alipay.com/gateway.do APP_ID APPID即创建应用后生成 获取见上面创建应用并获取APPID APP_PRIVATE_KEY 开发者应用私钥，由开发者自己生成 获取见上面配置密钥 FORMAT 参数返回格式，只支持json json（固定） CHARSET 请求和签名使用的字符编码格式，支持GBK和UTF-8 开发者根据实际工程编码配置 ALIPAY_PUBLIC_KEY 支付宝公钥，由支付宝生成 获取详见上面配置密钥 SIGN_TYPE 商户生成签名字符串所使用的签名算法类型，目前支持RSA2和RSA，推荐使用RSA2 RSA2 接下来，就可以用alipayClient来调用具体的API了。alipayClient只需要初始化一次，后续调用不同的API都可以使用同一个alipayClient对象。 注意：App支付不支持第三方授权，不能代商家发起请求。 ========= 应用开发完成后，请开发者自行进行验收并完成安全性检查。 开放平台第三方应用安全开发指南（https://doc.open.alipay.com/docs/doc.htm?treeId=275&amp;articleId=105912&amp;docType=1）。 ／／支付宝中验签的解释： 说一下简单支付流程：你提交等待支付的订单信息给支付宝，支付宝返回订单支付结果给你（这里暂时先不考虑服务器）。但是这里就有安全问题了，支付宝怎么知道你提交的订单信息商家的真实性？你又怎么知道支付宝返回的结果是支付宝官方操作而不是被篡改过的呢？ 所以就有了安全验证一说，也就是私钥和公钥了。商家和支付宝都有一对公钥和私钥，支付宝的公钥提供给了每个商家（现在是统一的），商家的公钥在生成时也是应该提交到了支付宝的。私钥都是自己留着，不给别人。私钥用来数字签名，公钥用来对私钥签过名的信息做验证。 所以为了安全，你需要在发送订单信息的时候用你的私钥签名，发送给支付宝，支付宝用你的公钥去验证你的订单是否是本人。然后支付宝返回用支付宝私钥签名过的支付结果给你，你这个时候就需要用支付宝公钥去验证到底是不是真正的支付宝返回的信息。 &nbsp; &nbsp;&nbsp;/* &nbsp;&nbsp; &nbsp; *生成订单信息及签名 &nbsp;&nbsp; &nbsp; */ &nbsp; &nbsp; //将商品信息赋予AlixPayOrder的成员变量 &nbsp; &nbsp; Order* order = [Ordernew]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: app_id设置 &nbsp; &nbsp; order.app_id = appID; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 支付接口名称 &nbsp; &nbsp; order.method =@&quot;alipay.trade.app.pay&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 参数编码格式 &nbsp; &nbsp; order.charset =@&quot;utf-8&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 当前时间点 &nbsp; &nbsp; NSDateFormatter* formatter = [NSDateFormatternew]; &nbsp; &nbsp; [formatter setDateFormat:@&quot;yyyy-MM-dd HH:mm:ss&quot;]; &nbsp; &nbsp; order.timestamp = [formatterstringFromDate:[NSDatedate]]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 支付版本 &nbsp; &nbsp; order.version =@&quot;1.0&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: sign_type设置 &nbsp; &nbsp; order.sign_type =@&quot;RSA&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 商品数据 &nbsp; &nbsp; order.biz_content = [BizContentnew]; &nbsp; &nbsp; order.biz_content.body =@&quot;我是测试数据&quot;; &nbsp; &nbsp; order.biz_content.subject =@&quot;1&quot;; &nbsp; &nbsp; order.biz_content.out_trade_no = [selfgenerateTradeNO];//订单ID（由商家自行制定） &nbsp; &nbsp; order.biz_content.timeout_express =@&quot;30m&quot;;//超时时间设置 &nbsp; &nbsp; order.biz_content.total_amount = [NSStringstringWithFormat:@&quot;%.2f&quot;,0.01];//商品价格 &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; //将商品信息拼接成字符串 &nbsp; &nbsp; NSString *orderInfo = [orderorderInfoEncoded:NO]; &nbsp; &nbsp; NSString *orderInfoEncoded = [orderorderInfoEncoded:YES]; &nbsp; &nbsp; NSLog(@&quot;orderSpec = %@&quot;,orderInfo); &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 获取私钥并将商户信息签名，外部商户的加签过程请务必放在服务端，防止公私钥数据泄露； &nbsp; &nbsp; // 需要遵循RSA签名规范，并将签名字符串base64编码和UrlEncode &nbsp; &nbsp; id&lt;DataSigner&gt; signer =CreateRSADataSigner(privateKey);／／生成签名器 &nbsp; &nbsp; NSString *signedString = [signersignString:orderInfo]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 如果加签成功，则继续执行支付 &nbsp; &nbsp; if (signedString !=nil) { &nbsp; &nbsp; &nbsp; &nbsp; //应用注册scheme,在AliSDKDemo-Info.plist定义URL types &nbsp; &nbsp; &nbsp; &nbsp; NSString *appScheme =@&quot;alisdkdemo&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 将签名成功字符串格式化为订单字符串,请严格按照该格式 &nbsp; &nbsp; &nbsp; &nbsp; NSString *orderString = [NSStringstringWithFormat:@&quot;%@&amp;sign=%@&quot;, &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; orderInfoEncoded, signedString]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 调用支付结果开始支付 &nbsp; &nbsp; &nbsp; &nbsp; [[AlipaySDKdefaultService]payOrder:orderStringfromScheme:appSchemecallback:^(NSDictionary *resultDic) { //这里的支付结果是在没有安装支付宝客服端的情况下跳转网页支付时，会在这回调 NSLog(@&quot;返回结果resultDic = %@&quot;,resultDic); if (resultDic) { /* 9000 订单支付成功 8000 正在处理中 4000 订单支付失败 6001 用户中途取消 6002 网络连接出错 */ if ([resultDic[@&quot;resultStatus&quot;]integerValue] == 9000) //网上很多教程到这里就结束了，因为他们没有验证返回订单签名 { //验签 //去掉返回字典中result值里面的“\\” NSString *result = [resultDic[@&quot;result&quot;] stringByReplacingOccurrencesOfString:@&quot;\\\\&quot; withString:@&quot;&quot;]; //分割字符串获取订单信息和签名 NSArray *array = [result componentsSeparatedByString:@&quot;&amp;sign_type=\\&quot;RSA\\&quot;&amp;sign=\\&quot;&quot;]; //返回的订单信息 NSString *orderString = array[0]; //返回的订单签名 NSString *signedString = [array[1] substringToIndex:[array[1]length]-1]; id&lt;DataVerifier&gt; dataVeri = CreateRSADataVerifier(@&quot;public&quot;);／／用支付宝公钥生成签名器 //支付宝公钥匙验证返回信息与签名 if ([dataVeri verifyString:orderString withSign:signedString]) { //验证签名成功，交易结果无篡改 NSLog(@&quot;------------支付成功---------------&quot;); } else { //验签错误 } } } else { //交易失败 } }]; } &nbsp; &nbsp; &nbsp; &nbsp; }]; &nbsp; &nbsp; } } 下面是appdelegate中的方法： //跳转支付宝支付(安装了支付宝客户端的情况)时，支付完成之后重新回到本app会调用此方法，在此可以根据resultDic提示支付结果 - (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;NSString *,id&gt; *)options { if ([url.host isEqualToString:@&quot;safepay&quot;]) { [[AlipaySDK defaultService] processOrderWithPaymentResult:url standbyCallback:^(NSDictionary *resultDic) { **验证方式同上面的网页支付** }]; } //这个是进程KILL掉之后也会调用，这个只是第一次授权回调，同时也会返回支付信息，／／处理支付宝客户端返回的url（在app被杀模式下，通过这个方法获取支付结果）。 [[AlipaySDK defaultService]processAuth_V2Result:url standbyCallback:^(NSDictionary *resultDic) { NSString * str = resultDic[@&quot;result&quot;]; NSLog(@&quot;result = %@&quot;,str); }]; return YES;} 不推荐客户端验证，应该由后台来做（后台做更安全）。 由于同步通知和异步通知都可以作为支付完成的凭证，且异步通知支付宝一定会确保发送给商户服务端。为了简化集成流程，商户可以将同步结果仅仅作为一个支付结束的通知（忽略执行校验），实际支付是否成功，完全依赖服务端异步通知。 阅读更多" />
<meta property="og:description" content="第一步：创建应用并获取APPID，添加应用功能 要在您的应用中使用支付宝开放产品的接口能力，您需要先去蚂蚁金服开放平台（open.alipay.com），在开发者中心中创建登记您的应用，并提交审核，审核通过后会为您生成应用唯一标识（APPID），并且可以申请开通开放产品使用权限，通过APPID您的应用才能调用开放产品的接口能力。 1.添加应用功能 某些功能必须签约才能使用：签约 如下： &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 应用上线后，可选择自己使用和推广给他人使用。供他人使用指的是应用开发者和应用使用者不是同一个人。使用者在使用应用前，需要做两件事情：授权、签约（如果应用中包含需要签约的功能则需要签约，不包含则不需要） 开发者和使用者的区别，开发者：应用（功能或者服务）的开发人员（或者企业），使用者：购买和使用应用（功能或者服务）的人员（或者企业）。当开发者自己使用自己开发的应用时，开发者和使用者的两个身份是重合的。 商户（例如：是某个电商网站）对开发者进行应用授权后，开发者可以帮助商户完成相应的业务逻辑，例如代替商户发起当面付的收单请求。 2、授权采用标准的OAuth 2.0流程。 3、要进行第三方调用，开发者需要在应用中添加对应功能并获得商户授权，商户需要申请开通相应的权限（例如对于当面付，开发者只需在应用中添加“当面付”功能并获得商户授权，商户则需要开通“当面付”产品，之后开发者就可以帮助商户发起当面付的收单请求）。 必须填写“接口加密方式”（加密方式只需填写一个），才可以提交审核。 第二步：配置密钥 上传应用公钥并获取支付宝公钥，（https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.TvAv9s&amp;treeId=291&amp;articleId=105972&amp;docType=1）；支付宝公钥内容，在代码中验签使用。 服务端的SDK，签名和验签（https://doc.open.alipay.com/docs/doc.htm?treeId=54&amp;articleId=103419&amp;docType=1）； 开发者调用接口前需要先生成RSA密钥，RSA密钥包含应用私钥(APP_PRIVATE_KEY)、应用公钥(APP_PUBLIC_KEY）。生成密钥后在开放平台开发者中心进行密钥配置，配置完成后可以获取支付宝公钥(ALIPAY_PUBLIC_KEY)。 生成RSA密钥 支付宝提供一键生成工具便于开发者生成一对RSA密钥，可通过下方链接下载密钥生成工具： WINDOWS MAC_OSX 下载该工具后，解压打开文件夹，运行“RSA签名验签工具.bat”（WINDOWS）或“RSA签名验签工具.command”（MAC_OSX）。 界面示例： 详细步骤： 1.根据开发语言选择密钥格式。 2.选择密钥长度，建议使用2048位。 3.点击 “生成密钥”，会自动生成商户应用公钥和应用私钥。 4.点击“打开密钥文件路径”，即可找到生成的公私钥。如图： 生成的私钥需妥善保管，避免遗失，不要泄露。应用私钥需填写到代码中供签名时使用。应用公钥需提供给支付宝账号管理者上传到支付宝开放平台。 除了使用支付宝提供的一键生成密钥工具外，也可以使用OpenSSL工具命令生成密钥。步骤如下： 使用OpenSSL工具生成密钥 更新时间：2016/12/22&nbsp; 访问次数：5028 除了使用支付宝提供的一键生成工具外，也可以使用OpenSSL工具（下载地址https://www.openssl.org/source/?spm=a219a.7629140.0.0.b0VRLV）命令生成密钥。 第一步&nbsp;生成RSA密钥 首先进入OpenSSL工具，输入以下命令。 1 2 3 4 OpenSSL&gt; genrsa -out app_private_key.pem&nbsp;&nbsp; 1024&nbsp; #生成私钥 OpenSSL&gt; pkcs8 -topk8 -inform PEM -in app_private_key.pem -outform PEM -nocrypt -out app_private_key_pkcs8.pem #Java开发者需要将私钥转换成PKCS8格式 OpenSSL&gt; rsa -in app_private_key.pem -pubout -out app_public_key.pem #生成公钥 OpenSSL&gt; exit #退出OpenSSL程序 经过以上步骤，开发者可以在当前文件夹中（OpenSSL运行文件夹），看到app_private_key.pem（开发者RSA私钥，非Java语言适用）、app_private_key_pkcs8.pem（pkcs8格式开发者RSA私钥，Java语言适用）和app_public_key.pem（开发者RSA公钥）3个文件。开发者将私钥保留，将公钥提交给支付宝配置到开发平台，用于验证签名。以下为私钥文件和公钥文件示例。 TIPS：对于使用Java的开发者，需将生成的pkcs8格式的私钥去除头尾、换行和空格，作为私钥填入代码中，对于.NET和PHP的开发者来说，无需进行pkcs8命令行操作。&nbsp; 标准的私钥文件示例（PHP、.NET使用） 1 2 3 -----BEGIN RSA PRIVATE KEY----- MIICXQIBAAKBgQC+L0rfjLl3neHleNMOsYTW8r0QXZ5RVb2p/vvY3fJNNugvJ7lo4+fdBz+LN4mDxTz4MTOhi5e2yeAqx+v3nKpNmPzC5LmDjhHZURhwbqFtIpZD51mOfno2c3MDwlrsVi6mTypbNu4uaQzw/TOpwufSLWF7k6p2pLoVmmqJzQiD0QIDAQABAoGAakB1risquv9D4zX7hCv9MTFwGyKSfpJOYhkIjwKAik7wrNeeqFEbisqv35FpjGq3Q1oJpGkem4pxaLVEyZOHONefZ9MGVChT/MNH5b0FJYWl392RZy8KCdq376Vt4gKVlABvaV1DkapL+nLh7LMo/bENudARsxD55IGObMU19lkCQQDwHmzWPMHfc3kdY6AqiLrOss+MVIAhQqZOHhDe0aW2gZtwiWeYK1wB/fRxJ5esk1sScOWgzvCN/oGJLhU3kipHAkEAysNoSdG2oWADxlIt4W9kUiiiqNgimHGMHPwp4JMxupHMTm7D9XtGUIiDijZxunHv3kvktNfWj3Yji0661zHVJwJBAM8TDf077F4NsVc9AXVs8N0sq3xzqwQD/HPFzfq6hdR8tVY5yRMb4X7+SX4EDPORKKsgnYcur5lk8MUi7r072iUCQQC8xQvUne+fcdpRyrR4StJlQvucogwjTKMbYRBDygXkIlTJOIorgudFlrKP/HwJDoY4uQNl8gQJb/1LdrKwIe7FAkBl0TNtfodGrDXBHwBgtN/t3pyi+sz7OpJdUklKE7zMSBuLd1E3O4JMzvWP9wEE7JDb+brjgK4/cxxUHUTkk592 -----END RSA PRIVATE KEY----- PKCS8处理后的私钥文件示例（Java使用） 1 MIICeAIBADANBgkqhkiG9w0BAQEFAASCAmIwggJeAgEAAoGBAN0yqPkLXlnhM+2H/57aHsYHaHXazr9pFQun907TMvmbR04wHChVsKVgGUF1hC0FN9hfeYT5v2SXg1WJSg2tSgk7F29SpsF0I36oSLCIszxdu7ClO7c22mxEVuCjmYpJdqb6XweAZzv4Is661jXP4PdrCTHRdVTU5zR9xUByiLSVAgMBAAECgYEAhznORRonHylm9oKaygEsqQGkYdBXbnsOS6busLi6xA+iovEUdbAVIrTCG9t854z2HAgaISoRUKyztJoOtJfI1wJaQU+XL+U3JIh4jmNx/k5UzJijfvfpT7Cv3ueMtqyAGBJrkLvXjiS7O5ylaCGuB0Qz711bWGkRrVoosPM3N6ECQQD8hVQUgnHEVHZYtvFqfcoq2g/onPbSqyjdrRu35a7PvgDAZx69Mr/XggGNTgT3jJn7+2XmiGkHM1fd1Ob/3uAdAkEA4D7aE3ZgXG/PQqlm3VbE/+4MvNl8xhjqOkByBOY2ZFfWKhlRziLEPSSAh16xEJ79WgY9iti+guLRAMravGrs2QJBAOmKWYeaWKNNxiIoF7/4VDgrcpkcSf3uRB44UjFSn8kLnWBUPo6WV+x1FQBdjqRviZ4NFGIP+KqrJnFHzNgJhVUCQFzCAukMDV4PLfeQJSmna8PFz2UKva8fvTutTryyEYu+PauaX5laDjyQbc4RIEMU0Q29CRX3BA8WDYg7YPGRdTkCQQCG+pjU2FB17ZLuKRlKEdtXNV6zQFTmFc1TKhlsDTtCkWs/xwkoCfZKstuV3Uc5J4BNJDkQOGm38pDRPcUDUh2/ 公钥文件示例 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB -----END PUBLIC KEY----- 第二步 处理应用公钥格式 将公钥文件去除头尾、换行和空格，转成一行字符串。把该字符串提供给支付宝账号管理者，登录开放平台上传应用公钥并获取支付宝公钥。教程 例如转换前公钥pem文件格式： 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB -----END PUBLIC KEY----- 转换后得到的字符串为： 1 MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB 第三步 处理支付宝公钥格式(针对文本读取方式) 上一步获取到支付宝公钥，用于支付宝返回数据的验签。 对于支付宝公钥，看到的是一个字符串，如下： 1 MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB 如果需要使用文件方式（如PHP/.NET版本）读取支付宝公钥，需要在头尾加入标示后保存至文件，文件内容如下： 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB -----END PUBLIC KEY----- 第三步：搭建和配置开发环境 接入移动支付需要集成两个SDK，客户端SDK需要集成在商户自己的APP中，用于唤起支付宝APP并发送交易数据，并在支付宝APP返回商户APP时获得支付结果。服务端SDK需要商户集成在自己的服务端系统中，用于协助解析并验证客户端同步返回的支付结果和异步通知。 SDK调用前需要进行初始化，代码示例如下： 1 AlipayClient alipayClient = new DefaultAlipayClient(URL, APP_ID, APP_PRIVATE_KEY, FORMAT, CHARSET, ALIPAY_PUBLIC_KEY, SIGN_TYPE); 关键参数说明： 配置参数 示例值解释 获取方式/示例值 URL 支付宝网关（固定） https://openapi.alipay.com/gateway.do APP_ID APPID即创建应用后生成 获取见上面创建应用并获取APPID APP_PRIVATE_KEY 开发者应用私钥，由开发者自己生成 获取见上面配置密钥 FORMAT 参数返回格式，只支持json json（固定） CHARSET 请求和签名使用的字符编码格式，支持GBK和UTF-8 开发者根据实际工程编码配置 ALIPAY_PUBLIC_KEY 支付宝公钥，由支付宝生成 获取详见上面配置密钥 SIGN_TYPE 商户生成签名字符串所使用的签名算法类型，目前支持RSA2和RSA，推荐使用RSA2 RSA2 接下来，就可以用alipayClient来调用具体的API了。alipayClient只需要初始化一次，后续调用不同的API都可以使用同一个alipayClient对象。 注意：App支付不支持第三方授权，不能代商家发起请求。 ========= 应用开发完成后，请开发者自行进行验收并完成安全性检查。 开放平台第三方应用安全开发指南（https://doc.open.alipay.com/docs/doc.htm?treeId=275&amp;articleId=105912&amp;docType=1）。 ／／支付宝中验签的解释： 说一下简单支付流程：你提交等待支付的订单信息给支付宝，支付宝返回订单支付结果给你（这里暂时先不考虑服务器）。但是这里就有安全问题了，支付宝怎么知道你提交的订单信息商家的真实性？你又怎么知道支付宝返回的结果是支付宝官方操作而不是被篡改过的呢？ 所以就有了安全验证一说，也就是私钥和公钥了。商家和支付宝都有一对公钥和私钥，支付宝的公钥提供给了每个商家（现在是统一的），商家的公钥在生成时也是应该提交到了支付宝的。私钥都是自己留着，不给别人。私钥用来数字签名，公钥用来对私钥签过名的信息做验证。 所以为了安全，你需要在发送订单信息的时候用你的私钥签名，发送给支付宝，支付宝用你的公钥去验证你的订单是否是本人。然后支付宝返回用支付宝私钥签名过的支付结果给你，你这个时候就需要用支付宝公钥去验证到底是不是真正的支付宝返回的信息。 &nbsp; &nbsp;&nbsp;/* &nbsp;&nbsp; &nbsp; *生成订单信息及签名 &nbsp;&nbsp; &nbsp; */ &nbsp; &nbsp; //将商品信息赋予AlixPayOrder的成员变量 &nbsp; &nbsp; Order* order = [Ordernew]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: app_id设置 &nbsp; &nbsp; order.app_id = appID; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 支付接口名称 &nbsp; &nbsp; order.method =@&quot;alipay.trade.app.pay&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 参数编码格式 &nbsp; &nbsp; order.charset =@&quot;utf-8&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 当前时间点 &nbsp; &nbsp; NSDateFormatter* formatter = [NSDateFormatternew]; &nbsp; &nbsp; [formatter setDateFormat:@&quot;yyyy-MM-dd HH:mm:ss&quot;]; &nbsp; &nbsp; order.timestamp = [formatterstringFromDate:[NSDatedate]]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 支付版本 &nbsp; &nbsp; order.version =@&quot;1.0&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: sign_type设置 &nbsp; &nbsp; order.sign_type =@&quot;RSA&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 商品数据 &nbsp; &nbsp; order.biz_content = [BizContentnew]; &nbsp; &nbsp; order.biz_content.body =@&quot;我是测试数据&quot;; &nbsp; &nbsp; order.biz_content.subject =@&quot;1&quot;; &nbsp; &nbsp; order.biz_content.out_trade_no = [selfgenerateTradeNO];//订单ID（由商家自行制定） &nbsp; &nbsp; order.biz_content.timeout_express =@&quot;30m&quot;;//超时时间设置 &nbsp; &nbsp; order.biz_content.total_amount = [NSStringstringWithFormat:@&quot;%.2f&quot;,0.01];//商品价格 &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; //将商品信息拼接成字符串 &nbsp; &nbsp; NSString *orderInfo = [orderorderInfoEncoded:NO]; &nbsp; &nbsp; NSString *orderInfoEncoded = [orderorderInfoEncoded:YES]; &nbsp; &nbsp; NSLog(@&quot;orderSpec = %@&quot;,orderInfo); &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 获取私钥并将商户信息签名，外部商户的加签过程请务必放在服务端，防止公私钥数据泄露； &nbsp; &nbsp; // 需要遵循RSA签名规范，并将签名字符串base64编码和UrlEncode &nbsp; &nbsp; id&lt;DataSigner&gt; signer =CreateRSADataSigner(privateKey);／／生成签名器 &nbsp; &nbsp; NSString *signedString = [signersignString:orderInfo]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 如果加签成功，则继续执行支付 &nbsp; &nbsp; if (signedString !=nil) { &nbsp; &nbsp; &nbsp; &nbsp; //应用注册scheme,在AliSDKDemo-Info.plist定义URL types &nbsp; &nbsp; &nbsp; &nbsp; NSString *appScheme =@&quot;alisdkdemo&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 将签名成功字符串格式化为订单字符串,请严格按照该格式 &nbsp; &nbsp; &nbsp; &nbsp; NSString *orderString = [NSStringstringWithFormat:@&quot;%@&amp;sign=%@&quot;, &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; orderInfoEncoded, signedString]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 调用支付结果开始支付 &nbsp; &nbsp; &nbsp; &nbsp; [[AlipaySDKdefaultService]payOrder:orderStringfromScheme:appSchemecallback:^(NSDictionary *resultDic) { //这里的支付结果是在没有安装支付宝客服端的情况下跳转网页支付时，会在这回调 NSLog(@&quot;返回结果resultDic = %@&quot;,resultDic); if (resultDic) { /* 9000 订单支付成功 8000 正在处理中 4000 订单支付失败 6001 用户中途取消 6002 网络连接出错 */ if ([resultDic[@&quot;resultStatus&quot;]integerValue] == 9000) //网上很多教程到这里就结束了，因为他们没有验证返回订单签名 { //验签 //去掉返回字典中result值里面的“\\” NSString *result = [resultDic[@&quot;result&quot;] stringByReplacingOccurrencesOfString:@&quot;\\\\&quot; withString:@&quot;&quot;]; //分割字符串获取订单信息和签名 NSArray *array = [result componentsSeparatedByString:@&quot;&amp;sign_type=\\&quot;RSA\\&quot;&amp;sign=\\&quot;&quot;]; //返回的订单信息 NSString *orderString = array[0]; //返回的订单签名 NSString *signedString = [array[1] substringToIndex:[array[1]length]-1]; id&lt;DataVerifier&gt; dataVeri = CreateRSADataVerifier(@&quot;public&quot;);／／用支付宝公钥生成签名器 //支付宝公钥匙验证返回信息与签名 if ([dataVeri verifyString:orderString withSign:signedString]) { //验证签名成功，交易结果无篡改 NSLog(@&quot;------------支付成功---------------&quot;); } else { //验签错误 } } } else { //交易失败 } }]; } &nbsp; &nbsp; &nbsp; &nbsp; }]; &nbsp; &nbsp; } } 下面是appdelegate中的方法： //跳转支付宝支付(安装了支付宝客户端的情况)时，支付完成之后重新回到本app会调用此方法，在此可以根据resultDic提示支付结果 - (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;NSString *,id&gt; *)options { if ([url.host isEqualToString:@&quot;safepay&quot;]) { [[AlipaySDK defaultService] processOrderWithPaymentResult:url standbyCallback:^(NSDictionary *resultDic) { **验证方式同上面的网页支付** }]; } //这个是进程KILL掉之后也会调用，这个只是第一次授权回调，同时也会返回支付信息，／／处理支付宝客户端返回的url（在app被杀模式下，通过这个方法获取支付结果）。 [[AlipaySDK defaultService]processAuth_V2Result:url standbyCallback:^(NSDictionary *resultDic) { NSString * str = resultDic[@&quot;result&quot;]; NSLog(@&quot;result = %@&quot;,str); }]; return YES;} 不推荐客户端验证，应该由后台来做（后台做更安全）。 由于同步通知和异步通知都可以作为支付完成的凭证，且异步通知支付宝一定会确保发送给商户服务端。为了简化集成流程，商户可以将同步结果仅仅作为一个支付结束的通知（忽略执行校验），实际支付是否成功，完全依赖服务端异步通知。 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/03/25/8984faf806aad53e6ef60e2b2d013e80.html" />
<meta property="og:url" content="https://mlh.app/2017/03/25/8984faf806aad53e6ef60e2b2d013e80.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-03-25T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"第一步：创建应用并获取APPID，添加应用功能 要在您的应用中使用支付宝开放产品的接口能力，您需要先去蚂蚁金服开放平台（open.alipay.com），在开发者中心中创建登记您的应用，并提交审核，审核通过后会为您生成应用唯一标识（APPID），并且可以申请开通开放产品使用权限，通过APPID您的应用才能调用开放产品的接口能力。 1.添加应用功能 某些功能必须签约才能使用：签约 如下： &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 应用上线后，可选择自己使用和推广给他人使用。供他人使用指的是应用开发者和应用使用者不是同一个人。使用者在使用应用前，需要做两件事情：授权、签约（如果应用中包含需要签约的功能则需要签约，不包含则不需要） 开发者和使用者的区别，开发者：应用（功能或者服务）的开发人员（或者企业），使用者：购买和使用应用（功能或者服务）的人员（或者企业）。当开发者自己使用自己开发的应用时，开发者和使用者的两个身份是重合的。 商户（例如：是某个电商网站）对开发者进行应用授权后，开发者可以帮助商户完成相应的业务逻辑，例如代替商户发起当面付的收单请求。 2、授权采用标准的OAuth 2.0流程。 3、要进行第三方调用，开发者需要在应用中添加对应功能并获得商户授权，商户需要申请开通相应的权限（例如对于当面付，开发者只需在应用中添加“当面付”功能并获得商户授权，商户则需要开通“当面付”产品，之后开发者就可以帮助商户发起当面付的收单请求）。 必须填写“接口加密方式”（加密方式只需填写一个），才可以提交审核。 第二步：配置密钥 上传应用公钥并获取支付宝公钥，（https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.TvAv9s&amp;treeId=291&amp;articleId=105972&amp;docType=1）；支付宝公钥内容，在代码中验签使用。 服务端的SDK，签名和验签（https://doc.open.alipay.com/docs/doc.htm?treeId=54&amp;articleId=103419&amp;docType=1）； 开发者调用接口前需要先生成RSA密钥，RSA密钥包含应用私钥(APP_PRIVATE_KEY)、应用公钥(APP_PUBLIC_KEY）。生成密钥后在开放平台开发者中心进行密钥配置，配置完成后可以获取支付宝公钥(ALIPAY_PUBLIC_KEY)。 生成RSA密钥 支付宝提供一键生成工具便于开发者生成一对RSA密钥，可通过下方链接下载密钥生成工具： WINDOWS MAC_OSX 下载该工具后，解压打开文件夹，运行“RSA签名验签工具.bat”（WINDOWS）或“RSA签名验签工具.command”（MAC_OSX）。 界面示例： 详细步骤： 1.根据开发语言选择密钥格式。 2.选择密钥长度，建议使用2048位。 3.点击 “生成密钥”，会自动生成商户应用公钥和应用私钥。 4.点击“打开密钥文件路径”，即可找到生成的公私钥。如图： 生成的私钥需妥善保管，避免遗失，不要泄露。应用私钥需填写到代码中供签名时使用。应用公钥需提供给支付宝账号管理者上传到支付宝开放平台。 除了使用支付宝提供的一键生成密钥工具外，也可以使用OpenSSL工具命令生成密钥。步骤如下： 使用OpenSSL工具生成密钥 更新时间：2016/12/22&nbsp; 访问次数：5028 除了使用支付宝提供的一键生成工具外，也可以使用OpenSSL工具（下载地址https://www.openssl.org/source/?spm=a219a.7629140.0.0.b0VRLV）命令生成密钥。 第一步&nbsp;生成RSA密钥 首先进入OpenSSL工具，输入以下命令。 1 2 3 4 OpenSSL&gt; genrsa -out app_private_key.pem&nbsp;&nbsp; 1024&nbsp; #生成私钥 OpenSSL&gt; pkcs8 -topk8 -inform PEM -in app_private_key.pem -outform PEM -nocrypt -out app_private_key_pkcs8.pem #Java开发者需要将私钥转换成PKCS8格式 OpenSSL&gt; rsa -in app_private_key.pem -pubout -out app_public_key.pem #生成公钥 OpenSSL&gt; exit #退出OpenSSL程序 经过以上步骤，开发者可以在当前文件夹中（OpenSSL运行文件夹），看到app_private_key.pem（开发者RSA私钥，非Java语言适用）、app_private_key_pkcs8.pem（pkcs8格式开发者RSA私钥，Java语言适用）和app_public_key.pem（开发者RSA公钥）3个文件。开发者将私钥保留，将公钥提交给支付宝配置到开发平台，用于验证签名。以下为私钥文件和公钥文件示例。 TIPS：对于使用Java的开发者，需将生成的pkcs8格式的私钥去除头尾、换行和空格，作为私钥填入代码中，对于.NET和PHP的开发者来说，无需进行pkcs8命令行操作。&nbsp; 标准的私钥文件示例（PHP、.NET使用） 1 2 3 -----BEGIN RSA PRIVATE KEY----- MIICXQIBAAKBgQC+L0rfjLl3neHleNMOsYTW8r0QXZ5RVb2p/vvY3fJNNugvJ7lo4+fdBz+LN4mDxTz4MTOhi5e2yeAqx+v3nKpNmPzC5LmDjhHZURhwbqFtIpZD51mOfno2c3MDwlrsVi6mTypbNu4uaQzw/TOpwufSLWF7k6p2pLoVmmqJzQiD0QIDAQABAoGAakB1risquv9D4zX7hCv9MTFwGyKSfpJOYhkIjwKAik7wrNeeqFEbisqv35FpjGq3Q1oJpGkem4pxaLVEyZOHONefZ9MGVChT/MNH5b0FJYWl392RZy8KCdq376Vt4gKVlABvaV1DkapL+nLh7LMo/bENudARsxD55IGObMU19lkCQQDwHmzWPMHfc3kdY6AqiLrOss+MVIAhQqZOHhDe0aW2gZtwiWeYK1wB/fRxJ5esk1sScOWgzvCN/oGJLhU3kipHAkEAysNoSdG2oWADxlIt4W9kUiiiqNgimHGMHPwp4JMxupHMTm7D9XtGUIiDijZxunHv3kvktNfWj3Yji0661zHVJwJBAM8TDf077F4NsVc9AXVs8N0sq3xzqwQD/HPFzfq6hdR8tVY5yRMb4X7+SX4EDPORKKsgnYcur5lk8MUi7r072iUCQQC8xQvUne+fcdpRyrR4StJlQvucogwjTKMbYRBDygXkIlTJOIorgudFlrKP/HwJDoY4uQNl8gQJb/1LdrKwIe7FAkBl0TNtfodGrDXBHwBgtN/t3pyi+sz7OpJdUklKE7zMSBuLd1E3O4JMzvWP9wEE7JDb+brjgK4/cxxUHUTkk592 -----END RSA PRIVATE KEY----- PKCS8处理后的私钥文件示例（Java使用） 1 MIICeAIBADANBgkqhkiG9w0BAQEFAASCAmIwggJeAgEAAoGBAN0yqPkLXlnhM+2H/57aHsYHaHXazr9pFQun907TMvmbR04wHChVsKVgGUF1hC0FN9hfeYT5v2SXg1WJSg2tSgk7F29SpsF0I36oSLCIszxdu7ClO7c22mxEVuCjmYpJdqb6XweAZzv4Is661jXP4PdrCTHRdVTU5zR9xUByiLSVAgMBAAECgYEAhznORRonHylm9oKaygEsqQGkYdBXbnsOS6busLi6xA+iovEUdbAVIrTCG9t854z2HAgaISoRUKyztJoOtJfI1wJaQU+XL+U3JIh4jmNx/k5UzJijfvfpT7Cv3ueMtqyAGBJrkLvXjiS7O5ylaCGuB0Qz711bWGkRrVoosPM3N6ECQQD8hVQUgnHEVHZYtvFqfcoq2g/onPbSqyjdrRu35a7PvgDAZx69Mr/XggGNTgT3jJn7+2XmiGkHM1fd1Ob/3uAdAkEA4D7aE3ZgXG/PQqlm3VbE/+4MvNl8xhjqOkByBOY2ZFfWKhlRziLEPSSAh16xEJ79WgY9iti+guLRAMravGrs2QJBAOmKWYeaWKNNxiIoF7/4VDgrcpkcSf3uRB44UjFSn8kLnWBUPo6WV+x1FQBdjqRviZ4NFGIP+KqrJnFHzNgJhVUCQFzCAukMDV4PLfeQJSmna8PFz2UKva8fvTutTryyEYu+PauaX5laDjyQbc4RIEMU0Q29CRX3BA8WDYg7YPGRdTkCQQCG+pjU2FB17ZLuKRlKEdtXNV6zQFTmFc1TKhlsDTtCkWs/xwkoCfZKstuV3Uc5J4BNJDkQOGm38pDRPcUDUh2/ 公钥文件示例 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB -----END PUBLIC KEY----- 第二步 处理应用公钥格式 将公钥文件去除头尾、换行和空格，转成一行字符串。把该字符串提供给支付宝账号管理者，登录开放平台上传应用公钥并获取支付宝公钥。教程 例如转换前公钥pem文件格式： 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB -----END PUBLIC KEY----- 转换后得到的字符串为： 1 MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB 第三步 处理支付宝公钥格式(针对文本读取方式) 上一步获取到支付宝公钥，用于支付宝返回数据的验签。 对于支付宝公钥，看到的是一个字符串，如下： 1 MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB 如果需要使用文件方式（如PHP/.NET版本）读取支付宝公钥，需要在头尾加入标示后保存至文件，文件内容如下： 1 2 3 -----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB -----END PUBLIC KEY----- 第三步：搭建和配置开发环境 接入移动支付需要集成两个SDK，客户端SDK需要集成在商户自己的APP中，用于唤起支付宝APP并发送交易数据，并在支付宝APP返回商户APP时获得支付结果。服务端SDK需要商户集成在自己的服务端系统中，用于协助解析并验证客户端同步返回的支付结果和异步通知。 SDK调用前需要进行初始化，代码示例如下： 1 AlipayClient alipayClient = new DefaultAlipayClient(URL, APP_ID, APP_PRIVATE_KEY, FORMAT, CHARSET, ALIPAY_PUBLIC_KEY, SIGN_TYPE); 关键参数说明： 配置参数 示例值解释 获取方式/示例值 URL 支付宝网关（固定） https://openapi.alipay.com/gateway.do APP_ID APPID即创建应用后生成 获取见上面创建应用并获取APPID APP_PRIVATE_KEY 开发者应用私钥，由开发者自己生成 获取见上面配置密钥 FORMAT 参数返回格式，只支持json json（固定） CHARSET 请求和签名使用的字符编码格式，支持GBK和UTF-8 开发者根据实际工程编码配置 ALIPAY_PUBLIC_KEY 支付宝公钥，由支付宝生成 获取详见上面配置密钥 SIGN_TYPE 商户生成签名字符串所使用的签名算法类型，目前支持RSA2和RSA，推荐使用RSA2 RSA2 接下来，就可以用alipayClient来调用具体的API了。alipayClient只需要初始化一次，后续调用不同的API都可以使用同一个alipayClient对象。 注意：App支付不支持第三方授权，不能代商家发起请求。 ========= 应用开发完成后，请开发者自行进行验收并完成安全性检查。 开放平台第三方应用安全开发指南（https://doc.open.alipay.com/docs/doc.htm?treeId=275&amp;articleId=105912&amp;docType=1）。 ／／支付宝中验签的解释： 说一下简单支付流程：你提交等待支付的订单信息给支付宝，支付宝返回订单支付结果给你（这里暂时先不考虑服务器）。但是这里就有安全问题了，支付宝怎么知道你提交的订单信息商家的真实性？你又怎么知道支付宝返回的结果是支付宝官方操作而不是被篡改过的呢？ 所以就有了安全验证一说，也就是私钥和公钥了。商家和支付宝都有一对公钥和私钥，支付宝的公钥提供给了每个商家（现在是统一的），商家的公钥在生成时也是应该提交到了支付宝的。私钥都是自己留着，不给别人。私钥用来数字签名，公钥用来对私钥签过名的信息做验证。 所以为了安全，你需要在发送订单信息的时候用你的私钥签名，发送给支付宝，支付宝用你的公钥去验证你的订单是否是本人。然后支付宝返回用支付宝私钥签名过的支付结果给你，你这个时候就需要用支付宝公钥去验证到底是不是真正的支付宝返回的信息。 &nbsp; &nbsp;&nbsp;/* &nbsp;&nbsp; &nbsp; *生成订单信息及签名 &nbsp;&nbsp; &nbsp; */ &nbsp; &nbsp; //将商品信息赋予AlixPayOrder的成员变量 &nbsp; &nbsp; Order* order = [Ordernew]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: app_id设置 &nbsp; &nbsp; order.app_id = appID; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 支付接口名称 &nbsp; &nbsp; order.method =@&quot;alipay.trade.app.pay&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 参数编码格式 &nbsp; &nbsp; order.charset =@&quot;utf-8&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 当前时间点 &nbsp; &nbsp; NSDateFormatter* formatter = [NSDateFormatternew]; &nbsp; &nbsp; [formatter setDateFormat:@&quot;yyyy-MM-dd HH:mm:ss&quot;]; &nbsp; &nbsp; order.timestamp = [formatterstringFromDate:[NSDatedate]]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 支付版本 &nbsp; &nbsp; order.version =@&quot;1.0&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: sign_type设置 &nbsp; &nbsp; order.sign_type =@&quot;RSA&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 商品数据 &nbsp; &nbsp; order.biz_content = [BizContentnew]; &nbsp; &nbsp; order.biz_content.body =@&quot;我是测试数据&quot;; &nbsp; &nbsp; order.biz_content.subject =@&quot;1&quot;; &nbsp; &nbsp; order.biz_content.out_trade_no = [selfgenerateTradeNO];//订单ID（由商家自行制定） &nbsp; &nbsp; order.biz_content.timeout_express =@&quot;30m&quot;;//超时时间设置 &nbsp; &nbsp; order.biz_content.total_amount = [NSStringstringWithFormat:@&quot;%.2f&quot;,0.01];//商品价格 &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; //将商品信息拼接成字符串 &nbsp; &nbsp; NSString *orderInfo = [orderorderInfoEncoded:NO]; &nbsp; &nbsp; NSString *orderInfoEncoded = [orderorderInfoEncoded:YES]; &nbsp; &nbsp; NSLog(@&quot;orderSpec = %@&quot;,orderInfo); &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 获取私钥并将商户信息签名，外部商户的加签过程请务必放在服务端，防止公私钥数据泄露； &nbsp; &nbsp; // 需要遵循RSA签名规范，并将签名字符串base64编码和UrlEncode &nbsp; &nbsp; id&lt;DataSigner&gt; signer =CreateRSADataSigner(privateKey);／／生成签名器 &nbsp; &nbsp; NSString *signedString = [signersignString:orderInfo]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 如果加签成功，则继续执行支付 &nbsp; &nbsp; if (signedString !=nil) { &nbsp; &nbsp; &nbsp; &nbsp; //应用注册scheme,在AliSDKDemo-Info.plist定义URL types &nbsp; &nbsp; &nbsp; &nbsp; NSString *appScheme =@&quot;alisdkdemo&quot;; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 将签名成功字符串格式化为订单字符串,请严格按照该格式 &nbsp; &nbsp; &nbsp; &nbsp; NSString *orderString = [NSStringstringWithFormat:@&quot;%@&amp;sign=%@&quot;, &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; orderInfoEncoded, signedString]; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // NOTE: 调用支付结果开始支付 &nbsp; &nbsp; &nbsp; &nbsp; [[AlipaySDKdefaultService]payOrder:orderStringfromScheme:appSchemecallback:^(NSDictionary *resultDic) { //这里的支付结果是在没有安装支付宝客服端的情况下跳转网页支付时，会在这回调 NSLog(@&quot;返回结果resultDic = %@&quot;,resultDic); if (resultDic) { /* 9000 订单支付成功 8000 正在处理中 4000 订单支付失败 6001 用户中途取消 6002 网络连接出错 */ if ([resultDic[@&quot;resultStatus&quot;]integerValue] == 9000) //网上很多教程到这里就结束了，因为他们没有验证返回订单签名 { //验签 //去掉返回字典中result值里面的“\\\\” NSString *result = [resultDic[@&quot;result&quot;] stringByReplacingOccurrencesOfString:@&quot;\\\\\\\\&quot; withString:@&quot;&quot;]; //分割字符串获取订单信息和签名 NSArray *array = [result componentsSeparatedByString:@&quot;&amp;sign_type=\\\\&quot;RSA\\\\&quot;&amp;sign=\\\\&quot;&quot;]; //返回的订单信息 NSString *orderString = array[0]; //返回的订单签名 NSString *signedString = [array[1] substringToIndex:[array[1]length]-1]; id&lt;DataVerifier&gt; dataVeri = CreateRSADataVerifier(@&quot;public&quot;);／／用支付宝公钥生成签名器 //支付宝公钥匙验证返回信息与签名 if ([dataVeri verifyString:orderString withSign:signedString]) { //验证签名成功，交易结果无篡改 NSLog(@&quot;------------支付成功---------------&quot;); } else { //验签错误 } } } else { //交易失败 } }]; } &nbsp; &nbsp; &nbsp; &nbsp; }]; &nbsp; &nbsp; } } 下面是appdelegate中的方法： //跳转支付宝支付(安装了支付宝客户端的情况)时，支付完成之后重新回到本app会调用此方法，在此可以根据resultDic提示支付结果 - (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;NSString *,id&gt; *)options { if ([url.host isEqualToString:@&quot;safepay&quot;]) { [[AlipaySDK defaultService] processOrderWithPaymentResult:url standbyCallback:^(NSDictionary *resultDic) { **验证方式同上面的网页支付** }]; } //这个是进程KILL掉之后也会调用，这个只是第一次授权回调，同时也会返回支付信息，／／处理支付宝客户端返回的url（在app被杀模式下，通过这个方法获取支付结果）。 [[AlipaySDK defaultService]processAuth_V2Result:url standbyCallback:^(NSDictionary *resultDic) { NSString * str = resultDic[@&quot;result&quot;]; NSLog(@&quot;result = %@&quot;,str); }]; return YES;} 不推荐客户端验证，应该由后台来做（后台做更安全）。 由于同步通知和异步通知都可以作为支付完成的凭证，且异步通知支付宝一定会确保发送给商户服务端。为了简化集成流程，商户可以将同步结果仅仅作为一个支付结束的通知（忽略执行校验），实际支付是否成功，完全依赖服务端异步通知。 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/03/25/8984faf806aad53e6ef60e2b2d013e80.html","headline":"iOS之app中接入支付宝的流程解析（一）","dateModified":"2017-03-25T00:00:00+08:00","datePublished":"2017-03-25T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/03/25/8984faf806aad53e6ef60e2b2d013e80.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>iOS之app中接入支付宝的流程解析（一）</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h1 id="s0" style="margin:37px 0px 35px; padding:0px 0px 12px; font-size:22px; font-weight:normal; line-height:20px; border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> <span style="color:#cc0000">第一步：创建应用并获取APPID，添加应用功能</span></h1> 
  <h1 id="s0" style="margin:37px 0px 35px; padding:0px 0px 12px; line-height:20px; border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> <span style="color:rgb(51,51,51); font-size:14px; font-weight:normal">要在您的应用中使用支付宝开放产品的接口能力，您需要先去蚂蚁金服开放平台（</span><a target="_blank" href="https://open.alipay.com/" rel="nofollow" style="color:rgb(0,137,205); font-size:14px; font-weight:normal; text-decoration:none; margin:0px; padding:0px; border:0px; line-height:inherit; vertical-align:baseline; outline:none; font-family:FZLanTingHei!important">open.alipay.com</a><span style="color:rgb(51,51,51); font-size:14px; font-weight:normal; font-family:FZLanTingHei">），在开发者中心中创建登记您的应用，并提交审核，审核通过后会为您生成应用唯一标识（</span><span style="color:rgb(153,51,0); font-size:14px; font-weight:normal; font-family:FZLanTingHei!important"><span style="font-weight:700; margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline">APPID</span></span><span style="font-family:FZLanTingHei"><span style="color:rgb(51,51,51); font-size:14px; font-weight:normal">），并且可以申请开通开放产品使用权限，通过APPID您的应用才能调用开放产品的接口能力。</span></span></h1> 
  <h1 id="s1" style="margin:37px 0px 35px; padding:0px 0px 12px; font-size:22px; font-weight:normal; line-height:20px; color:rgb(51,51,51); border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> 1.添加应用功能</h1> 
  <div>
   <img src="" alt="">
   <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325142039930" alt="" style="color:rgb(51,51,51); font-family:FZLanTingHei; font-size:22px">
  </div> 
  <div>
   <span style="color:rgb(51,51,51); font-family:FZLanTingHei; font-size:22px">某些功能必须签约才能使用：签约 如下：</span>
   <br> 
  </div> 
  <div>
   <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325142145140" alt="">
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <h1 id="s1" style="color:rgb(51,51,51); font-size:22px; font-weight:normal; margin:37px 0px 35px; padding:0px 0px 12px; line-height:20px; border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325142213984" alt=""><br> </h1> 
  <div>
   <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325142225499" alt="">
   <br> 
  </div> 
  <h1 id="s1" style="color:rgb(51,51,51); font-size:22px; font-weight:normal; margin:37px 0px 35px; padding:0px 0px 12px; line-height:20px; border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> <br> </h1> 
  <h1 id="s1" style="color:rgb(51,51,51); font-size:22px; font-weight:normal; margin:37px 0px 35px; padding:0px 0px 12px; line-height:20px; border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325142225499" alt=""><br> </h1> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div>
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <img src="" alt="">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <img src="" alt="">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51)">
   <span style="font-size:18px"><span style="color:rgb(51,51,51); font-family:FZLanTingHei">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 应用上线后，可选择自己使用和推广给他人使用。<span style="color:rgb(51,51,51); font-family:FZLanTingHei">供他人使用指的是应用开发者和应用使用者不是同一个人。使用者在使用应用前，需要做两件事情：授权、签约（如果应用中包含需要签约的功能则需要签约，不包含则不需要）</span></span><br> </span>
  </div> 
  <div style="color:rgb(51,51,51)">
   <span style="font-size:18px"><span style="color:rgb(51,51,51); font-family:FZLanTingHei"><span style="color:rgb(109,65,44); font-family:FZLanTingHei; font-size:14px; background-color:rgb(255,247,178)">开发者和使用者的区别，开发者：应用（功能或者服务）的开发人员（或者企业），使用者：购买和使用应用（功能或者服务）的人员（或者企业）。当开发者自己使用自己开发的应用时，开发者和使用者的两个身份是重合的。</span><br> </span></span>
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal"> 
   <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="margin:0px; padding:0px; border:0px; font-size:10pt; font-style:inherit; line-height:inherit; vertical-align:baseline">商户（例如：是某个电商网站）对开发者进行应用授权后，开发者可以帮助商户完成相应的业务逻辑，例如代替商户发起当面付的收单请求。</span></p> 
   <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="margin:0px; padding:0px; border:0px; font-size:10pt; font-style:inherit; line-height:inherit; vertical-align:baseline">2、授权采用标准的OAuth 2.0流程。</span></p> 
   <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="margin:0px; padding:0px; border:0px; font-size:10pt; font-style:inherit; line-height:inherit; vertical-align:baseline">3、要进行第三方调用，开发者需要在应用中添加对应功能并获得商户授权，商户需要申请开通相应的权限（例如对于当面付，开发者只需在应用中添加“当面付”功能并获得商户授权，商户则需要开通“当面付”产品，之后开发者就可以帮助商户发起当面付的收单请求）。</span></p> 
   <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="margin:0px; padding:0px; border:0px; font-size:10pt; font-style:inherit; line-height:inherit; vertical-align:baseline"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325143149253?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMTE0NjUxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325143205737" alt=""><br> </span></p> 
   <img src="" alt="">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325143735376" alt="">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <img src="" alt="">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-size:14px; font-weight:normal">
   <br> 
  </div> 
  <div style="color:rgb(51,51,51); font-weight:normal">
   <span style="font-size:18px"><span style="color:rgb(109,65,44); font-family:FZLanTingHei; background-color:rgb(255,247,178)">必须填写“接口加密方式”（加密方式只需填写一个），才可以提交审核。</span><br> </span>
  </div> 
  <div style="color:rgb(51,51,51); font-weight:normal">
   <span style="font-size:18px"><span style="color:rgb(109,65,44); font-family:FZLanTingHei; background-color:rgb(255,247,178)"><br> </span></span>
  </div> 
  <div style="color:rgb(51,51,51); font-weight:normal">
   <span style="font-size:18px"><span style="color:rgb(109,65,44); font-family:FZLanTingHei; background-color:rgb(255,247,178)"><br> </span></span>
  </div> 
  <h1 id="s1" style="font-size:22px; font-weight:normal; margin:37px 0px 35px; padding:0px 0px 12px; line-height:20px; border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> <span style="color:#cc0000">第二步：配置密钥</span></h1> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="font-size:18px; color:#ff0000"><span style="font-weight:normal"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170329085509908" alt=""><br> </span></span></p> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="font-size:18px; color:#ff0000">上传应用公钥并获取支付宝公钥，（https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.TvAv9s&amp;treeId=291&amp;articleId=105972&amp;docType=1）；<span style="color:rgb(51,51,51); font-family:FZLanTingHei; font-size:14.000000953674316px">支付宝公钥内容，在代码中验签使用。</span></span></p> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="font-size:18px; color:#ff0000"><span style="color:rgb(51,51,51); font-family:FZLanTingHei; font-size:14.000000953674316px"><br> </span></span></p> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="font-size:18px; color:#333333">服务端的SDK，签名和验签（https://doc.open.alipay.com/docs/doc.htm?treeId=54&amp;articleId=103419&amp;docType=1）；</span></p> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="color:#333333"><span style="font-size:14.000000953674316px"><br> </span></span></p> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="font-size:18px; color:#ff0000"><span style="font-weight:normal">开发者调用接口前需要先生成RSA密钥，RSA密钥包含应用私钥(APP_PRIVATE_KEY)、应用公钥(APP_PUBLIC_KEY）。生成密钥后在开放平台开发者中心进行密钥配置，配置完成后可以</span><strong>获取支付宝公钥</strong>(ALIPAY_PUBLIC_KEY)。</span></p> 
  <p style="font-weight:normal; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> </p> 
  <div class="mtl" style="color:rgb(26,26,26); margin:-6px 0px 35px; padding:0px; height:auto; width:710px; border:0px; position:relative; z-index:9; font-family:FZLanTingHei!important"> 
   <h2 class="mtl-main" style="margin:0px 0px 5px; padding:0px; font-size:28px; font-weight:normal; line-height:34px; color:rgb(51,51,51); border:0px; font-style:inherit; vertical-align:baseline; float:none"> <br> </h2> 
   <h2 class="mtl-main" style="margin:0px 0px 5px; padding:0px; font-size:28px; font-weight:normal; line-height:34px; color:rgb(51,51,51); border:0px; font-style:inherit; vertical-align:baseline; float:none"> 生成RSA密钥</h2> 
   <h2 class="mtl-main" style="font-size:28px; margin:0px 0px 5px; padding:0px; font-weight:normal; line-height:34px; color:rgb(51,51,51); border:0px; font-style:inherit; vertical-align:baseline; float:none"> <span style="font-size:14px">支付宝提供一键生成工具便于开发者生成一对RSA密钥，可通过下方链接下载密钥生成工具：</span></h2> 
  </div> 
  <div class="doc-detail-bd" id="bd" style="margin:0px; padding:0px; position:relative; font-family:FZLanTingHei!important"> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <a target="_blank" href="http://p.tb.cn/rmsportal_6680_secret_key_tools_RSA_win.zip" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">WINDOWS</a></p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <a target="_blank" href="http://p.tb.cn/rmsportal_6680_secret_key_tools_RSA_macosx.zip" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">MAC_OSX</a></p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> 下载该工具后，解压打开文件夹，运行“RSA签名验签工具.bat”（WINDOWS）或“RSA签名验签工具.command”（MAC_OSX）。</p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> 界面示例：</p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <img src="https://img.alicdn.com/top/i1/LB1_Al7OVXXXXX5XXXXXXXXXXXX" alt="" style="border:0px; max-width:99%; height:auto; vertical-align:baseline; margin:16px 0px; padding:4px; font-size:undefined; font-style:inherit; line-height:inherit; position:relative; display:block; overflow:hidden"></p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> 详细步骤：</p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> 1.根据开发语言选择密钥格式。</p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> 2.选择密钥长度，建议使用2048位。</p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> 3.点击 “生成密钥”，会自动生成商户应用公钥和应用私钥。</p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> 4.点击“打开密钥文件路径”，即可找到生成的公私钥。如图：</p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <img src="https://img.alicdn.com/top/i1/LB1eYX8OVXXXXaiXXXXXXXXXXXX" alt="" style="border:0px; max-width:99%; height:auto; vertical-align:baseline; margin:16px 0px; padding:4px; font-size:undefined; font-style:inherit; line-height:inherit; position:relative; display:block; overflow:hidden"></p> 
   <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <span style="color:rgb(51,51,51); font-size:14px">生成的私钥需妥善保管，避免遗失，不要泄露。</span><span style="font-size:18px; color:#ff0000"><strong>应用私钥需填写到代码中供签名时使用。应用公钥需提供给支付宝账号管理者上传到支付宝开放平台</strong></span><span style="color:rgb(51,51,51); font-size:14px">。</span></p> 
   <p style="font-size:14px; color:rgb(51,51,51); margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <span style="color:rgb(109,65,44); font-family:FZLanTingHei; font-size:14px; background-color:rgb(255,247,178)">除了使用支付宝提供的一键生成密钥工具外，也可以使用OpenSSL工具命令生成密钥。步骤如下：</span><br> </p> 
   <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <span style="font-family:FZLanTingHei; background-color:rgb(255,247,178)"></span></p> 
   <div class="mtl" style="font-size:14px; color:rgb(109,65,44); margin:-6px 0px 35px; padding:0px; height:auto; width:710px; border:0px; position:relative; z-index:9; font-family:FZLanTingHei!important"> 
    <h2 class="mtl-main" style="margin:0px 0px 5px; padding:0px; font-size:28px; font-weight:normal; line-height:34px; color:rgb(51,51,51); border:0px; font-style:inherit; vertical-align:baseline; float:none"> 使用OpenSSL工具生成密钥</h2> 
    <div class="update-access-wrap" style="margin:0px; padding:0px; right:0px; top:inherit; color:rgb(153,153,153); position:inherit; float:right"> 
     <span class="update-time" style="margin:0px 0px 0px 15px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline">更新时间：2016/12/22</span>&nbsp;
     <span class="access-times" style="margin:0px 0px 0px 15px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline">访问次数：5028</span>
    </div> 
    <div class="mao-list" style="margin:0px; padding:0px; position:absolute; top:50px; left:auto; min-width:180px; border:0px; right:-210px; width:170px; overflow:hidden"> 
     <div class="inner header-fixed" id="maoList" style="margin:30px auto 0px; padding:0px; z-index:999; position:fixed; top:0px; width:170px!important"> 
     </div> 
     <div class="fixed-placeholder" style="margin:0px; padding:0px; height:0px; overflow:hidden"> 
     </div> 
    </div> 
   </div> 
   <div class="doc-detail-bd" id="bd" style="font-size:14px; color:rgb(109,65,44); margin:0px; padding:0px; position:relative; font-family:FZLanTingHei!important"> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 除了使用支付宝提供的一键生成工具外，也可以使用<a target="_blank" href="https://www.openssl.org/source/?spm=a219a.7629140.0.0.b0VRLV" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">OpenSSL工具</a>（下载地址https://www.openssl.org/source/?spm=a219a.7629140.0.0.b0VRLV）命令生成密钥。</p> 
    <h2 style="margin:15px 0px; padding:0px; font-size:18px; font-weight:normal; line-height:20px; color:rgb(51,51,51); border:0px; vertical-align:baseline; height:inherit"> 第一步&nbsp;<span style="margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline">生成RSA密钥</span></h2> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 首先进入OpenSSL工具，输入以下命令。</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_684992" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> 
          <div class="line number2 index1 alt1" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            2
          </div> 
          <div class="line number3 index2 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            3
          </div> 
          <div class="line number4 index3 alt1" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            4
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">OpenSSL&gt; genrsa -out app_private_key.pem&nbsp;&nbsp; </code>
            <code class="java value" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,153,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">1024</code>&nbsp;
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">#生成私钥</code>
           </div> 
           <div class="line number2 index1 alt1" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">OpenSSL&gt; pkcs8 -topk8 -inform PEM -in app_private_key.pem -outform PEM -nocrypt -out app_private_key_pkcs8.pem #Java开发者需要将私钥转换成PKCS8格式</code>
           </div> 
           <div class="line number3 index2 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">OpenSSL&gt; rsa -in app_private_key.pem -pubout -out app_public_key.pem #生成公钥</code>
           </div> 
           <div class="line number4 index3 alt1" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">OpenSSL&gt; exit #退出OpenSSL程序</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 经过以上步骤，开发者可以在当前文件夹中（OpenSSL运行文件夹），看到app_private_key.pem（开发者RSA私钥，非Java语言适用）、app_private_key_pkcs8.pem（pkcs8格式开发者RSA私钥，Java语言适用）和app_public_key.pem（开发者RSA公钥）3个文件。开发者将私钥保留，将公钥提交给支付宝配置到开发平台，用于验证签名。以下为私钥文件和公钥文件示例。</p> 
    <div style="margin:15px 0px; padding:8px; color:rgb(109,65,44); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all; background-color:rgb(255,247,178); border:1px solid rgb(195,195,195)"> 
     <span style="margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; color:rgb(51,51,51)"><span style="font-weight:700; margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline">TIPS：</span></span>对于使用Java的开发者，需将生成的pkcs8格式的私钥去除头尾、换行和空格，作为私钥填入代码中，对于.NET和PHP的开发者来说，无需进行pkcs8命令行操作。&nbsp;
    </div> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 标准的私钥文件示例（PHP、.NET使用）</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_766418" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> 
          <div class="line number2 index1 alt1" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            2
          </div> 
          <div class="line number3 index2 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            3
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----BEGIN RSA PRIVATE KEY-----</code>
           </div> 
           <div class="line number2 index1 alt1" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">MIICXQIBAAKBgQC+L0rfjLl3neHleNMOsYTW8r0QXZ5RVb2p/vvY3fJNNugvJ7lo4+fdBz+LN4mDxTz4MTOhi5e2yeAqx+v3nKpNmPzC5LmDjhHZURhwbqFtIpZD51mOfno2c3MDwlrsVi6mTypbNu4uaQzw/TOpwufSLWF7k6p2pLoVmmqJzQiD0QIDAQABAoGAakB1risquv9D4zX7hCv9MTFwGyKSfpJOYhkIjwKAik7wrNeeqFEbisqv35FpjGq3Q1oJpGkem4pxaLVEyZOHONefZ9MGVChT/MNH5b0FJYWl392RZy8KCdq376Vt4gKVlABvaV1DkapL+nLh7LMo/bENudARsxD55IGObMU19lkCQQDwHmzWPMHfc3kdY6AqiLrOss+MVIAhQqZOHhDe0aW2gZtwiWeYK1wB/fRxJ5esk1sScOWgzvCN/oGJLhU3kipHAkEAysNoSdG2oWADxlIt4W9kUiiiqNgimHGMHPwp4JMxupHMTm7D9XtGUIiDijZxunHv3kvktNfWj3Yji0661zHVJwJBAM8TDf077F4NsVc9AXVs8N0sq3xzqwQD/HPFzfq6hdR8tVY5yRMb4X7+SX4EDPORKKsgnYcur5lk8MUi7r072iUCQQC8xQvUne+fcdpRyrR4StJlQvucogwjTKMbYRBDygXkIlTJOIorgudFlrKP/HwJDoY4uQNl8gQJb/1LdrKwIe7FAkBl0TNtfodGrDXBHwBgtN/t3pyi+sz7OpJdUklKE7zMSBuLd1E3O4JMzvWP9wEE7JDb+brjgK4/cxxUHUTkk592</code>
           </div> 
           <div class="line number3 index2 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----END RSA PRIVATE KEY-----</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> PKCS8处理后的私钥文件示例（Java使用）</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_318143" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">MIICeAIBADANBgkqhkiG9w0BAQEFAASCAmIwggJeAgEAAoGBAN0yqPkLXlnhM+2H/57aHsYHaHXazr9pFQun907TMvmbR04wHChVsKVgGUF1hC0FN9hfeYT5v2SXg1WJSg2tSgk7F29SpsF0I36oSLCIszxdu7ClO7c22mxEVuCjmYpJdqb6XweAZzv4Is661jXP4PdrCTHRdVTU5zR9xUByiLSVAgMBAAECgYEAhznORRonHylm9oKaygEsqQGkYdBXbnsOS6busLi6xA+iovEUdbAVIrTCG9t854z2HAgaISoRUKyztJoOtJfI1wJaQU+XL+U3JIh4jmNx/k5UzJijfvfpT7Cv3ueMtqyAGBJrkLvXjiS7O5ylaCGuB0Qz711bWGkRrVoosPM3N6ECQQD8hVQUgnHEVHZYtvFqfcoq2g/onPbSqyjdrRu35a7PvgDAZx69Mr/XggGNTgT3jJn7+2XmiGkHM1fd1Ob/3uAdAkEA4D7aE3ZgXG/PQqlm3VbE/+4MvNl8xhjqOkByBOY2ZFfWKhlRziLEPSSAh16xEJ79WgY9iti+guLRAMravGrs2QJBAOmKWYeaWKNNxiIoF7/4VDgrcpkcSf3uRB44UjFSn8kLnWBUPo6WV+x1FQBdjqRviZ4NFGIP+KqrJnFHzNgJhVUCQFzCAukMDV4PLfeQJSmna8PFz2UKva8fvTutTryyEYu+PauaX5laDjyQbc4RIEMU0Q29CRX3BA8WDYg7YPGRdTkCQQCG+pjU2FB17ZLuKRlKEdtXNV6zQFTmFc1TKhlsDTtCkWs/xwkoCfZKstuV3Uc5J4BNJDkQOGm38pDRPcUDUh2/</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 公钥文件示例</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_864895" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> 
          <div class="line number2 index1 alt1" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            2
          </div> 
          <div class="line number3 index2 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            3
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----BEGIN PUBLIC KEY-----</code>
           </div> 
           <div class="line number2 index1 alt1" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB</code>
           </div> 
           <div class="line number3 index2 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----END PUBLIC KEY-----</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <h2 style="margin:15px 0px; padding:0px; font-size:18px; font-weight:normal; line-height:20px; color:rgb(51,51,51); border:0px; vertical-align:baseline; height:inherit"> <span style="margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"><span style="margin:0px; padding:0px; border:0px; font-size:14pt; font-style:inherit; line-height:inherit; vertical-align:baseline">第二步 处理应用公钥格式</span></span></h2> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 将公钥文件去除头尾、换行和空格，转成一行字符串。把该字符串提供给支付宝账号管理者，登录开放平台上传应用公钥并获取支付宝公钥。<a target="_blank" href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.ryV3KF&amp;treeId=291&amp;articleId=105972&amp;docType=1" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">教程</a></p> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 例如转换前公钥pem文件格式：</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_734805" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> 
          <div class="line number2 index1 alt1" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            2
          </div> 
          <div class="line number3 index2 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            3
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----BEGIN PUBLIC KEY-----</code>
           </div> 
           <div class="line number2 index1 alt1" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB</code>
           </div> 
           <div class="line number3 index2 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----END PUBLIC KEY-----</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 转换后得到的字符串为：</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_335713" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDQWiDVZ7XYxa4CQsZoB3n7bfxLDkeGKjyQPt2FUtm4TWX9OYrd523iw6UUqnQ+Evfw88JgRnhyXadp+vnPKP7unormYQAfsM/CxzrfMoVdtwSiGtIJB4pfyRXjA+KL8nIa2hdQy5nLfgPVGZN4WidfUY/QpkddCVXnZ4bAUaQjXQIDAQAB</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <h2 style="margin:15px 0px; padding:0px; font-size:18px; font-weight:normal; line-height:20px; color:rgb(51,51,51); border:0px; vertical-align:baseline; height:inherit"> <span style="margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"><span style="margin:0px; padding:0px; border:0px; font-size:14pt; font-style:inherit; line-height:inherit; vertical-align:baseline">第三步 处理支付宝公钥格式(针对文本读取方式)</span></span></h2> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 上一步获取到支付宝公钥，用于支付宝返回数据的验签。</p> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 对于支付宝公钥，看到的是一个字符串，如下：</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_713748" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
    <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; font-size:14px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all"> 如果需要使用文件方式（如PHP/.NET版本）读取支付宝公钥，需要在头尾加入标示后保存至文件，文件内容如下：</p> 
    <div style="margin:15px 0px; padding:0px; color:rgb(51,51,51); font-size:14px; line-height:20px; word-wrap:break-word; word-break:break-all"> 
     <div id="highlighter_814137" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
      <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
       <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
         <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
          <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            1
          </div> 
          <div class="line number2 index1 alt1" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            2
          </div> 
          <div class="line number3 index2 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
            3
          </div> </td> 
         <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
          <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
           <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----BEGIN PUBLIC KEY-----</code>
           </div> 
           <div class="line number2 index1 alt1" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDI6d306Q8fIfCOaTXyiUeJHkrIvYISRcc73s3vF1ZT7XN8RNPwJxo8pWaJMmvyTn9N4HQ632qJBVHf8sxHi/fEsraprwCtzvzQETrNRwVxLO5jVmRGi60j8Ue1efIlzPXV9je9mkjzOmdssymZkh2QhUrCmZYI/FCEa3/cNMW0QIDAQAB</code>
           </div> 
           <div class="line number3 index2 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
            <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">-----END PUBLIC KEY-----</code>
           </div> 
          </div> </td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
    </div> 
   </div> 
   <h1 id="s2" style="font-size:22px; margin:37px 0px 35px; padding:0px 0px 12px; font-weight:normal; line-height:20px; border-width:0px 0px 1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); vertical-align:baseline; height:20px; position:relative; font-family:FZLanTingHei!important"> <span style="color:#cc0000">第三步：搭建和配置开发环境</span></h1> 
   <div style="font-size:14px; color:rgb(109,65,44)">
    <span style="color:rgb(51,51,51); font-family:FZLanTingHei; font-size:14px">接入移动支付需要集成两个SDK，客户端SDK需要集成在商户自己的APP中，用于唤起支付宝APP并发送交易数据，并在支付宝APP返回商户APP时获得支付结果。服务端SDK需要商户集成在自己的服务端系统中，用于协助解析并验证客户端同步返回的支付结果和异步通知。</span>
    <br> 
   </div> 
   <p></p> 
   <p style="font-size:14px; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> SDK调用前需要进行初始化，代码示例如下：</p> 
   <div style="font-size:14px; margin:15px 0px; padding:0px; color:rgb(51,51,51); line-height:20px; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> 
    <div id="highlighter_192972" class="syntaxhighlighter  java" title="复制代码请双击" style="padding:0px; line-height:20px; word-wrap:break-word; word-break:break-all; margin:1em 0px!important; width:100%!important; position:relative!important; overflow:auto!important; font-size:1em!important"> 
     <table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse; border-spacing:0px; margin:0px!important; padding:0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; width:100%!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; min-height:auto!important; table-layout:auto!important"> 
      <tbody style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
       <tr style="margin:0px!important; padding:0px!important; border:0px!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important"> 
        <td class="gutter" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(243,243,243)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important; color:rgb(175,175,175)!important"> 
         <div class="line number1 index0 alt2" style="color:rgb(190,190,190); word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 0.5em 0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; text-align:right!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important">
           1
         </div> </td> 
        <td class="code" style="word-break:break-all; word-wrap:break-word; margin:0px!important; padding:10px 0px!important; border:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; line-height:1.1em!important; vertical-align:baseline!important; background-color:rgb(235,238,239)!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:100%!important; min-height:auto!important"> 
         <div class="container" style="color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; min-width:0px; margin:0px!important; padding:0px!important; width:auto!important; min-height:auto!important; position:relative!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; right:auto!important; top:auto!important; vertical-align:baseline!important; font-size:1em!important"> 
          <div class="line number1 index0 alt2" style="word-wrap:break-word; word-break:break-all; margin:0px!important; padding:0px 1em!important; border:0px!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; line-height:1.1em!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; vertical-align:baseline!important; width:auto!important; font-size:1em!important; min-height:auto!important; white-space:pre!important"> 
           <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">AlipayClient alipayClient = </code>
           <code class="java keyword" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; font-weight:700!important; color:rgb(163,21,21)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">new</code>
           <code class="java plain" style="white-space:pre-wrap; word-break:break-all; word-wrap:break-word; margin:0px!important; padding:0px!important; font-family:Consolas,'Bitstream Vera Sans Mono','Courier New',Courier,monospace!important; font-size:1em!important; color:rgb(0,0,0)!important; border:0px!important; line-height:1.1em!important; vertical-align:baseline!important; bottom:auto!important; float:none!important; height:auto!important; left:auto!important; outline:0px!important; overflow:visible!important; position:static!important; right:auto!important; top:auto!important; width:auto!important; min-height:auto!important">DefaultAlipayClient(URL, APP_ID, APP_PRIVATE_KEY, FORMAT, CHARSET, ALIPAY_PUBLIC_KEY, SIGN_TYPE);</code>
          </div> 
         </div> </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <p style="font-size:14px; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> 关键参数说明：</p> 
   <table style="font-size:12px; border-collapse:collapse; border-spacing:0px; margin:0px 0px 35px; padding:0px; border:1px solid rgb(221,221,221); line-height:inherit; vertical-align:baseline; width:709px; color:rgb(26,26,26); font-family:FZLanTingHei!important; table-layout:auto!important"> 
    <thead style="margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <th style="margin:0px; padding:5px 10px; font-style:inherit; font-weight:normal; border:1px solid rgb(221,221,221); line-height:inherit; vertical-align:baseline; background-color:rgb(102,102,102); color:rgb(255,255,255); height:auto; min-width:8em; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 配置参数</th> 
      <th style="margin:0px; padding:5px 10px; font-style:inherit; font-weight:normal; border:1px solid rgb(221,221,221); line-height:inherit; vertical-align:baseline; background-color:rgb(102,102,102); color:rgb(255,255,255); height:auto; min-width:8em; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 示例值解释</th> 
      <th style="margin:0px; padding:5px 10px; font-style:inherit; font-weight:normal; border:1px solid rgb(221,221,221); line-height:inherit; vertical-align:baseline; background-color:rgb(102,102,102); color:rgb(255,255,255); height:auto; min-width:8em; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 获取方式/示例值</th> 
     </tr> 
    </thead> 
    <tbody style="margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> URL</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 支付宝网关（固定）</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> <a target="_blank" href="https://openapi.alipay.com/gateway.do" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">https://openapi.alipay.com/gateway.do</a></td> 
     </tr> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> APP_ID</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> APPID即创建应用后生成</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 获取见上面<a target="_blank" href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.ATKlV2&amp;treeId=204&amp;articleId=105297&amp;docType=1#s0" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">创建应用并获取APPID</a></td> 
     </tr> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> APP_PRIVATE_KEY</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 开发者应用私钥，由开发者自己生成</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 获取见上面<a target="_blank" href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.ATKlV2&amp;treeId=204&amp;articleId=105297&amp;docType=1#s1" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">配置密钥</a></td> 
     </tr> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> FORMAT</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 参数返回格式，只支持json</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> json（固定）</td> 
     </tr> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> CHARSET</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 请求和签名使用的字符编码格式，支持GBK和UTF-8</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 开发者根据实际工程编码配置</td> 
     </tr> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> ALIPAY_PUBLIC_KEY</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 支付宝公钥，由支付宝生成</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 获取详见上面<a target="_blank" href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.ATKlV2&amp;treeId=204&amp;articleId=105297&amp;docType=1#s1" rel="nofollow" style="text-decoration:none; color:rgb(0,137,205); margin:0px; padding:0px; border:0px; font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline; outline:none">配置密钥</a></td> 
     </tr> 
     <tr style="margin:0px; padding:0px; border:1px solid rgb(159,221,228); font-size:undefined; font-style:inherit; line-height:inherit; vertical-align:baseline"> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> SIGN_TYPE</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> 商户生成签名字符串所使用的签名算法类型，目前支持RSA2和RSA，推荐使用RSA2</td> 
      <td style="margin:0px; padding:5px 10px; border:1px solid rgb(221,221,221); font-style:inherit; line-height:25px; vertical-align:text-top; word-break:break-all; word-wrap:break-word; font-family:FZLanTingHei!important"> RSA2</td> 
     </tr> 
    </tbody> 
   </table> 
   <p style="font-size:14px; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; color:rgb(51,51,51); word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> 接下来，就可以用alipayClient来调用具体的API了。alipayClient只需要初始化一次，后续调用不同的API都可以使用同一个alipayClient对象。</p> 
   <div style="font-size:14px">
    <br> 
   </div> 
   <span style="font-size:18px"><span style="margin:0px; padding:0px; border:0px; line-height:inherit; vertical-align:baseline; background-color:rgb(255,247,178); color:rgb(51,51,51); font-family:FZLanTingHei!important"><span style="font-weight:700; margin:0px; padding:0px; border:0px; font-style:inherit; line-height:inherit; vertical-align:baseline">注意：</span></span><span style="color:rgb(109,65,44); font-family:FZLanTingHei; background-color:rgb(255,247,178)">App支付不支持第三方授权，不能代商家发起请求。</span><br> </span>
  </div> 
  <p></p> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <span style="font-family:FZLanTingHei; background-color:rgb(255,247,178)"><span style="font-size:18px"><span style="color:rgb(109,65,44); font-family:FZLanTingHei; background-color:rgb(255,247,178)"><img src="" alt=""><br> </span></span></span></p> 
  <p style="margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all"> <span style="font-family:FZLanTingHei; background-color:rgb(255,247,178)"><span style="font-size:18px"><span style="color:rgb(109,65,44); font-family:FZLanTingHei; background-color:rgb(255,247,178)"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170325143410629" alt=""><br> </span></span></span></p> 
  <span style="font-size:18px"></span>
  <span style="color:#333333; font-size:14px">=========</span> 
  <p style="color:rgb(51,51,51); font-weight:normal; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> <span style="font-size:18px"><span style="font-weight:700; margin:0px; padding:0px; border:0px; line-height:inherit; vertical-align:baseline; color:rgb(51,51,51); font-family:FZLanTingHei!important">应用开发完成后，请开发者自行进行验收并完成安全性检查。</span><br> </span></p> 
  <p style="color:rgb(51,51,51); font-weight:normal; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> </p> 
  <h2 class="mtl-main" style="margin:0px 0px 5px; padding:0px; font-size:28px; font-weight:normal; line-height:34px; color:rgb(51,51,51); border:0px; vertical-align:baseline; font-family:FZLanTingHei!important"> 开放平台第三方应用安全开发指南（https://doc.open.alipay.com/docs/doc.htm?treeId=275&amp;articleId=105912&amp;docType=1）。</h2> 
  <br> 
  <p><span style="font-size:24px"><strong>／／支付宝中验签的解释：</strong></span></p> 
  <p><br> </p> 
  <p style="color:rgb(51,51,51); font-size:14px; font-weight:normal; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> </p> 
  <p style="margin-top:0px; margin-bottom:25px; word-break:break-word; color:rgb(47,47,47); font-size:16px"> 说一下简单支付流程：你提交等待支付的订单信息给支付宝，支付宝返回订单支付结果给你（这里暂时先不考虑服务器）。但是这里就有安全问题了，支付宝怎么知道你提交的订单信息商家的真实性？你又怎么知道支付宝返回的结果是支付宝官方操作而不是被篡改过的呢？</p> 
  <p style="margin-top:0px; margin-bottom:25px; word-break:break-word; color:rgb(47,47,47); font-size:16px"> 所以就有了安全验证一说，也就是私钥和公钥了。商家和支付宝都有一对公钥和私钥，支付宝的公钥提供给了每个商家（现在是统一的），商家的公钥在生成时也是应该提交到了支付宝的。私钥都是自己留着，不给别人。私钥用来数字签名，公钥用来对私钥签过名的信息做验证。</p> 
  <p style="margin-top:0px; margin-bottom:25px; word-break:break-word; color:rgb(47,47,47); font-size:16px"> 所以为了安全，你需要在发送订单信息的时候用你的私钥签名，发送给支付宝，支付宝用你的公钥去验证你的订单是否是本人。然后支付宝返回用支付宝私钥签名过的支付结果给你，你这个时候就需要用支付宝公钥去验证到底是不是真正的支付宝返回的信息。</p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp;&nbsp;</span><span style="color:#1e9421">/*</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)"> <span style="line-height:normal; font-family:Menlo">&nbsp;&nbsp; &nbsp; *</span><span style="">生成订单信息及签名</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="">&nbsp;&nbsp; &nbsp; */</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">//</span><span style="line-height:normal; font-family:'PingFang SC'">将商品信息赋予</span><span style="">AlixPayOrder</span><span style="line-height:normal; font-family:'PingFang SC'">的成员变量</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; </span><span style="color:#3c828b">Order</span><span style="">* order = [</span><span style="color:#3c828b">Order</span><span style=""></span><span style="color:#3e1e81">new</span><span style="">];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// NOTE: app_id</span><span style="line-height:normal; font-family:'PingFang SC'">设置</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; order.</span><span style="color:#539aa4">app_id</span><span style=""> = appID;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// NOTE: </span><span style="line-height:normal; font-family:'PingFang SC'">支付接口名称</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(200,27,19)"> <span style="color:#000000">&nbsp; &nbsp; order.</span><span style="color:#539aa4">method</span><span style="color:#000000"> =</span><span style="">@"alipay.trade.app.pay"</span><span style="color:#000000">;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// NOTE: </span><span style="line-height:normal; font-family:'PingFang SC'">参数编码格式</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; order.</span><span style="color:#539aa4">charset</span><span style=""> =</span><span style="color:#c81b13">@"utf-8"</span><span style="">;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// NOTE: </span><span style="line-height:normal; font-family:'PingFang SC'">当前时间点</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(97,34,174)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">NSDateFormatter</span><span style="color:#000000">* formatter = [</span><span style="">NSDateFormatter</span><span style="color:#000000"></span><span style="color:#3e1e81">new</span><span style="color:#000000">];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(200,27,19)"> <span style="color:#000000">&nbsp; &nbsp; [formatter </span><span style="color:#3e1e81">setDateFormat</span><span style="color:#000000">:</span><span style="">@"yyyy-MM-dd HH:mm:ss"</span><span style="color:#000000">];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; order.</span><span style="color:#539aa4">timestamp</span><span style=""> = [formatter</span><span style="color:#3e1e81">stringFromDate</span><span style="">:[</span><span style="color:#6122ae">NSDate</span><span style=""></span><span style="color:#3e1e81">date</span><span style="">]];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// NOTE: </span><span style="line-height:normal; font-family:'PingFang SC'">支付版本</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; order.</span><span style="color:#539aa4">version</span><span style=""> =</span><span style="color:#c81b13">@"1.0"</span><span style="">;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// NOTE: sign_type</span><span style="line-height:normal; font-family:'PingFang SC'">设置</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; order.</span><span style="color:#539aa4">sign_type</span><span style=""> =</span><span style="color:#c81b13">@"RSA"</span><span style="">;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// NOTE: </span><span style="line-height:normal; font-family:'PingFang SC'">商品数据</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; order.</span><span style="color:#539aa4">biz_content</span><span style=""> = [</span><span style="color:#3c828b">BizContent</span><span style=""></span><span style="color:#3e1e81">new</span><span style="">];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; order.</span><span style="color:#539aa4">biz_content</span><span style="">.</span><span style="color:#539aa4">body</span><span style=""> =</span><span style="color:#c81b13">@"</span><span style="line-height:normal; font-family:'PingFang SC'; color:rgb(200,27,19)">我是测试数据</span><span style="color:#c81b13">"</span><span style="">;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(83,154,164)"> <span style="color:#000000">&nbsp; &nbsp; order.</span><span style="">biz_content</span><span style="color:#000000">.</span><span style="">subject</span><span style="color:#000000"> =</span><span style="color:#c81b13">@"1"</span><span style="color:#000000">;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(83,154,164)"> <span style="color:#000000">&nbsp; &nbsp; order.</span><span style="">biz_content</span><span style="color:#000000">.</span><span style="">out_trade_no</span><span style="color:#000000"> = [</span><span style="color:#c42275">self</span><span style="color:#000000"></span><span style="color:#294c50">generateTradeNO</span><span style="color:#000000">];</span><span style="color:#1e9421">//</span><span style="line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)">订单</span><span style="color:#1e9421">ID</span><span style="line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)">（由商家自行制定）</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(83,154,164)"> <span style="color:#000000">&nbsp; &nbsp; order.</span><span style="">biz_content</span><span style="color:#000000">.</span><span style="">timeout_express</span><span style="color:#000000"> =</span><span style="color:#c81b13">@"30m"</span><span style="color:#000000">;</span><span style="color:#1e9421">//</span><span style="line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)">超时时间设置</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(83,154,164)"> <span style="color:#000000">&nbsp; &nbsp; order.</span><span style="">biz_content</span><span style="color:#000000">.</span><span style="">total_amount</span><span style="color:#000000"> = [</span><span style="color:#6122ae">NSString</span><span style="color:#000000"></span><span style="color:#3e1e81">stringWithFormat</span><span style="color:#000000">:</span><span style="color:#c81b13">@"%.2f"</span><span style="color:#000000">,</span><span style="color:#0435ff">0.01</span><span style="color:#000000">];</span><span style="color:#1e9421">//</span><span style="line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)">商品价格</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)"> <span style="line-height:normal; font-family:Menlo; color:rgb(0,0,0)">&nbsp; &nbsp; </span> <span style="line-height:normal; font-family:Menlo">//</span><span style="">将商品信息拼接成字符串</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; </span><span style="color:#6122ae">NSString</span><span style=""> *orderInfo = [order</span><span style="color:#294c50">orderInfoEncoded</span><span style="">:</span><span style="color:#c42275">NO</span><span style="">];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; </span><span style="color:#6122ae">NSString</span><span style=""> *orderInfoEncoded = [order</span><span style="color:#294c50">orderInfoEncoded</span><span style="">:</span><span style="color:#c42275">YES</span><span style="">];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; </span><span style="color:#3e1e81">NSLog</span><span style="">(</span><span style="color:#c81b13">@"orderSpec = %@"</span><span style="">,orderInfo);</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)"> <span style="line-height:normal; font-family:Menlo; color:rgb(0,0,0)">&nbsp; &nbsp; </span> <span style="line-height:normal; font-family:Menlo">// NOTE: </span><span style="">获取私钥并将商户信息签名，外部商户的加签过程请务必放在服务端，防止公私钥数据泄露；</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; </span><span style="">// </span><span style="line-height:normal; font-family:'PingFang SC'">需要遵循</span><span style="">RSA</span><span style="line-height:normal; font-family:'PingFang SC'">签名规范，并将签名字符串</span><span style="">base64</span><span style="line-height:normal; font-family:'PingFang SC'">编码和</span><span style="">UrlEncode</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; </span><span style="color:#c42275">id</span><span style="">&lt;</span><span style="color:#3c828b">DataSigner</span><span style="">&gt; signer =</span><span style="color:#294c50">CreateRSADataSigner</span><span style="">(privateKey);／／生成签名器</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; </span><span style="color:#6122ae">NSString</span><span style=""> *signedString = [signer</span><span style="color:#294c50">signString</span><span style="">:orderInfo];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)"> <span style="line-height:normal; font-family:Menlo; color:rgb(0,0,0)">&nbsp; &nbsp; </span> <span style="line-height:normal; font-family:Menlo">// NOTE: </span><span style="">如果加签成功，则继续执行支付</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; </span><span style="color:#c42275">if</span><span style=""> (signedString !=</span><span style="color:#c42275">nil</span><span style="">) {</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="">//</span><span style="line-height:normal; font-family:'PingFang SC'">应用注册</span><span style="">scheme,</span><span style="line-height:normal; font-family:'PingFang SC'">在</span><span style="">AliSDKDemo-Info.plist</span><span style="line-height:normal; font-family:'PingFang SC'">定义</span><span style="">URL types</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color:#6122ae">NSString</span><span style=""> *appScheme =</span><span style="color:#c81b13">@"alisdkdemo"</span><span style="">;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:'PingFang SC'; color:rgb(30,148,33)"> <span style="line-height:normal; font-family:Menlo; color:rgb(0,0,0)">&nbsp; &nbsp; &nbsp; &nbsp; </span> <span style="line-height:normal; font-family:Menlo">// NOTE: </span><span style="">将签名成功字符串格式化为订单字符串</span><span style="line-height:normal; font-family:Menlo">,</span><span style="">请严格按照该格式</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color:#6122ae">NSString</span><span style=""> *orderString = [</span><span style="color:#6122ae">NSString</span><span style=""></span><span style="color:#3e1e81">stringWithFormat</span><span style="">:</span><span style="color:#c81b13">@"%@&amp;sign=%@"</span><span style="">,</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; orderInfoEncoded, signedString];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; min-height:21px"> <span style="">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo; color:rgb(30,148,33)"> <span style="color:#000000">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="">// NOTE: </span><span style="line-height:normal; font-family:'PingFang SC'">调用支付结果开始支付</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; &nbsp; &nbsp; [[</span><span style="color:#6122ae">AlipaySDK</span><span style=""></span><span style="color:#3e1e81">defaultService</span><span style="">]</span><span style="color:#3e1e81">payOrder</span><span style="">:orderString</span><span style="color:#3e1e81">fromScheme</span><span style="">:appScheme</span><span style="color:#3e1e81">callback</span><span style="">:^(</span><span style="color:#6122ae">NSDictionary</span><span style=""> *resultDic) {</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style=""></span></p> 
  <pre class="hljs stata" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:15px; margin-top:0px; margin-bottom:20px; line-height:1.42857; word-break:break-word; word-wrap:normal; color:rgb(101,123,131); background-color:rgb(246,246,246); border:1px solid rgb(204,204,204)"><code class="stata" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none"><span class="hljs-comment" style="color:rgb(147,161,161)">//这里的支付结果是在没有安装支付宝客服端的情况下跳转网页支付时，会在这回调</span>
            NSLog(@<span class="hljs-string" style="color:rgb(42,161,152)">"返回结果resultDic = %@"</span>,resultDic);
            <span class="hljs-keyword" style="color:rgb(133,153,0)">if</span> (resultDic)
            {
                <span class="hljs-comment" style="color:rgb(147,161,161)">/* 9000 订单支付成功 8000 正在处理中 4000 订单支付失败 6001 用户中途取消 6002 网络连接出错 */</span>
                <span class="hljs-keyword" style="color:rgb(133,153,0)">if</span> ([resultDic[@<span class="hljs-string" style="color:rgb(42,161,152)">"resultStatus"</span>]integerValue] == 9000)
<span class="hljs-comment" style="color:rgb(147,161,161)">//网上很多教程到这里就结束了，因为他们没有验证返回订单签名</span>
                {
                   <span class="hljs-comment" style="color:rgb(147,161,161)">//验签</span>
                   <span class="hljs-comment" style="color:rgb(147,161,161)">//去掉返回字典中result值里面的“\\”</span>
                   NSString *result = [resultDic[@<span class="hljs-string" style="color:rgb(42,161,152)">"result"</span>] stringByReplacingOccurrencesOfString:@<span class="hljs-string" style="color:rgb(42,161,152)">"\\\\"</span> withString:@<span class="hljs-string" style="color:rgb(42,161,152)">""</span>];
                    <span class="hljs-comment" style="color:rgb(147,161,161)">//分割字符串获取订单信息和签名</span>
                    NSArray *array = [result componentsSeparatedByString:@<span class="hljs-string" style="color:rgb(42,161,152)">"&amp;sign_type=\\"</span>RSA\\<span class="hljs-string" style="color:rgb(42,161,152)">"&amp;sign=\\"</span>"];
                    <span class="hljs-comment" style="color:rgb(147,161,161)">//返回的订单信息</span>
                    NSString *orderString = array[0];
                    <span class="hljs-comment" style="color:rgb(147,161,161)">//返回的订单签名</span>
                    NSString *signedString = [array[1] substringToIndex:[array[1]length]-1];</code><pre class="hljs objectivec" style="margin-top:0px; margin-bottom:20px; background-color:rgb(246,246,246); color:rgb(101,123,131); overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:15px; line-height:1.42857; word-break:break-word; word-wrap:normal; border:1px solid rgb(204,204,204)"><code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none"></code></pre><pre class="hljs objectivec" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:15px; margin-top:0px; margin-bottom:20px; line-height:1.42857; word-break:break-word; word-wrap:normal; color:rgb(101,123,131); background-color:rgb(246,246,246); border:1px solid rgb(204,204,204)"><code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none">            <span class="hljs-keyword" style="color:rgb(133,153,0)">id</span>&lt;DataVerifier&gt; dataVeri = CreateRSADataVerifier(<span class="hljs-string" style="color:rgb(42,161,152)">@"public"</span>);／／用支付宝公钥生成签名器</code></pre>                    <span class="hljs-comment" style="color:rgb(147,161,161)">//支付宝公钥匙验证返回信息与签名</span>                    <span class="hljs-keyword" style="color:rgb(133,153,0)">if</span> ([<span style="background-color:transparent">dataVeri </span>verifyString:orderString withSign:signedString])                    {                        <span class="hljs-comment" style="color:rgb(147,161,161)">//验证签名成功，交易结果无篡改</span>                        NSLog(@<span class="hljs-string" style="color:rgb(42,161,152)">"------------支付成功---------------"</span>);                    }                    <span class="hljs-keyword" style="color:rgb(133,153,0)">else</span>                    {                        <span class="hljs-comment" style="color:rgb(147,161,161)">//验签错误</span>                    }                }            }            <span class="hljs-keyword" style="color:rgb(133,153,0)">else</span>            {                <span class="hljs-comment" style="color:rgb(147,161,161)">//交易失败</span>            }         }];    }</pre> 
  <span style=""></span> 
  <p></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; &nbsp; &nbsp; }];</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">&nbsp; &nbsp; }</span></p> 
  <p style="margin-top:0px; margin-bottom:0px; font-size:18px; line-height:normal; font-family:Menlo"> <span style="">}</span></p> 
  <div>
   <span style=""><br> </span>
  </div> 
  <span style="font-size:18px">下面是appdelegate中的方法：</span> 
  <p style="color:rgb(51,51,51); font-weight:normal; margin-top:15px; margin-bottom:15px; padding-top:0px; padding-bottom:0px; border:0px; line-height:20px; vertical-align:baseline; word-wrap:break-word; word-break:break-all; font-family:FZLanTingHei!important"> </p> 
  <pre class="hljs objectivec" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:15px; margin-top:0px; margin-bottom:20px; line-height:1.42857; word-break:break-word; word-wrap:normal; color:rgb(101,123,131); background-color:rgb(246,246,246); border:1px solid rgb(204,204,204)"><code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none"><span class="hljs-comment" style="color:rgb(147,161,161)">//跳转支付宝支付(安装了支付宝客户端的情况)时，支付完成之后重新回到本app会调用此方法，在此可以根据resultDic提示支付结果</span>
- (<span class="hljs-built_in" style="color:rgb(38,139,210)">BOOL</span>)application:(<span class="hljs-built_in" style="color:rgb(38,139,210)">UIApplication</span> *)app openURL:(<span class="hljs-built_in" style="color:rgb(38,139,210)">NSURL</span> *)url options:(<span class="hljs-built_in" style="color:rgb(38,139,210)">NSDictionary</span>&lt;<span class="hljs-built_in" style="color:rgb(38,139,210)">NSString</span> *,<span class="hljs-keyword" style="color:rgb(133,153,0)">id</span>&gt; *)options
{
    <span class="hljs-keyword" style="color:rgb(133,153,0)">if</span> ([url.host isEqualToString:<span class="hljs-string" style="color:rgb(42,161,152)">@"safepay"</span>]) {
  [[AlipaySDK defaultService] processOrderWithPaymentResult:url standbyCallback:^(<span class="hljs-built_in" style="color:rgb(38,139,210)">NSDictionary</span> *resultDic) { 
**验证方式同上面的网页支付**
}];
}</code></pre> 
  <pre class="hljs objectivec" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:15px; margin-top:0px; margin-bottom:20px; line-height:1.42857; word-break:break-word; word-wrap:normal; background-color:rgb(246,246,246); border:1px solid rgb(204,204,204)"><span style="color:#657b83"><span style=""><code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none"></code></span></span><pre class="hljs objectivec" style="color:rgb(101,123,131); overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:15px; margin-top:0px; margin-bottom:20px; line-height:1.42857; word-break:break-word; word-wrap:normal; background-color:rgb(246,246,246); border:1px solid rgb(204,204,204)"><code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none">        <span class="hljs-comment" style="color:rgb(147,161,161)">//这个是进程KILL掉之后也会调用，这个只是第一次授权回调，同时也会返回支付信息，</span></code><span style="color:rgb(26,26,26); font-family:FZLanTingHei; font-size:12px; background-color:transparent">／／处理支付宝客户端返回的url（在app被杀模式下，通过这个方法获取支付结果）。</span></pre><pre class="hljs objectivec" style="overflow:auto; font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:13px; padding:15px; margin-top:0px; margin-bottom:20px; line-height:1.42857; word-break:break-word; word-wrap:normal; background-color:rgb(246,246,246); border:1px solid rgb(204,204,204)"><code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none">        [[AlipaySDK defaultService]processAuth_V2Result:url standbyCallback:^(<span class="hljs-built_in" style="color:rgb(38,139,210)">NSDictionary</span><span style="color:#657b83"> *resultDic) { </span><span class="hljs-built_in" style="color:rgb(38,139,210)">NSString</span><span style="color:#657b83"> * str = resultDic[</span><span class="hljs-string" style="color:rgb(42,161,152)">@"result"</span><span style="color:#657b83">]; </span><span class="hljs-built_in" style="color:rgb(38,139,210)">NSLog</span><span style="color:#657b83">(</span><span class="hljs-string" style="color:rgb(42,161,152)">@"result = %@"</span><span style="color:#657b83">,str); }]; </span></code></pre>
   <div style="color:rgb(101,123,131)">
    <code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none"><br></code>
   </div><span style="color:#657b83">  </span><span class="hljs-keyword" style="color:rgb(133,153,0)">return</span><span style="color:#657b83"> </span><span class="hljs-literal" style="color:rgb(101,123,131)">YES</span><span style="color:#657b83">;}</span></pre> 
  <div>
   <code class="objectivec" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size:12px; background-color:transparent; padding:0px; border:none"><span style="color:rgb(47,47,47); font-size:16px">不推荐客户端验证，应该由后台来做（后台做更安全）。</span><br> </code>
  </div> 
  <span style="color:rgb(51,51,51); font-family:FZLanTingHei; font-size:14.000000953674316px">由于同步通知和异步通知都可以作为支付完成的凭证，且异步通知支付宝一定会确保发送给商户服务端。为了简化集成流程，商户可以将同步结果仅仅作为一个支付结束的通知（忽略执行校验），实际支付是否成功，完全依赖服务端异步通知。</span>
  <br> 
  <p></p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u011146511/article/details/65935863,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u011146511/article/details/65935863,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
