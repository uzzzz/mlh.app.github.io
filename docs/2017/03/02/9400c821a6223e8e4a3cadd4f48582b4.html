<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>以太坊私有链环境下智能合约部署流程 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="以太坊私有链环境下智能合约部署流程" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="待补充。 很多朋友照着教程部署合约会遇到一些问题，我觉得主要是在获取abi这一步。 var Multiply7 = eth.contract(contract.info.abiDefinition); 所以这里记录一下用browser-solidity编译。 一、初始化私有链 首先需要准备一个创世区块信息用于初始化私有链，其中difficulty为挖矿难度，建议设置低一点方便挖矿测试，保存为init.json。 { &quot;nonce&quot;: &quot;0×0000000000000042&quot;, &quot;mixhash&quot;: &quot;0×0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;difficulty&quot;: &quot;0×20000&quot;, &quot;alloc&quot;: {}, &quot;coinbase&quot;: &quot;0×0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0×00&quot;, &quot;parentHash&quot;: &quot;0×0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;blossom&quot;, &quot;gasLimit&quot;: &quot;0xffffffff&quot; } 进入终端，创建私有链。命令中--datadir后的参数根据你放置init.json的路径自行更改。 geth --datadir &quot;/home/swb/test&quot; init init.json 进入私有链console。--identity和--datadir需要根据你的需要而定。 geth --identity &quot;blossom&quot; --rpc --rpccorsdomain &quot;*&quot; --datadir &quot;/home/swb/test&quot; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --networkid 123456 console 2&gt;&gt; /home/swb/test/geth.log 二、码合约 这一步不多说，具体的合约代码自己编写。以下是Solidity的官方文档：链接 本文以一个简单的加法合约为例介绍部署步骤。 还可以参考wiki中给的教程案例：Contracts and Transactions pragma solidity ^0.4.0; contract test { /// @notice Will multiply `a` by 7. function multiply(uint a) returns(uint d) { return a * 7; } } 三，编译合约 如前文中提到的，想要部署合约需要得到合约代码的ABI和EVM code。很多朋友看教程是在geth控制台里编译合约的，但是有一个问题是： MyContract = eth.contract(contract.info.abiDefinition) 无法获得contract的abi。导致接下来的步骤出错。所以这里推荐使用browser-solidity网页编译。 上图中Bytecode和interface就是我们需要的结果。 四、部署合约 在部署合约前，我们要明确需要以下几项条件： 一个有Ether的账户； 该账户已解锁； 编译合约得到的abi和code。 所以首先需要做以下工作： //创建账户 personal.newAccount(&#39;密码&#39;) //挖矿获取Ether。其中miner.start(4)应该是CPU数，admin.sleepBlock()可以指定挖的区块数 miner.start(4);admin.sleepBlocks(10);miner.stop(); //账户解锁 personal.unlockAccount(eth.coinbase,&#39;密码&#39;,10000) 之后可以进行部署了。 //获取abi信息，即上述编译得到的interface &gt; abi = [{constant:false,inputs:[{name:&#39;a&#39;,type:&#39;uint256&#39;}],name:&#39;multiply&#39;,outputs:[{name:&#39;d&#39;,type:&#39;uint256&#39;}],type:&#39;function&#39;}] [{ constant: false, inputs: [{ name: &quot;a&quot;, type: &quot;uint256&quot; }], name: &quot;multiply&quot;, outputs: [{ name: &quot;d&quot;, type: &quot;uint256&quot; }], type: &quot;function&quot; }] //创建合约。 &gt; multiplyContract = web3.eth.contract(abi) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], eth: { accounts: [&quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;], blockNumber: 10, coinbase: &quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;, compile: { lll: function(), serpent: function(), solidity: function() }, defaultAccount: undefined, defaultBlock: &quot;latest&quot;, gasPrice: 20000000000, hashrate: 0, mining: false, pendingTransactions: [], protocolVersion: &quot;0x3f&quot;, syncing: false, call: function(), contract: function(abi), estimateGas: function(), filter: function(fil, callback), getAccounts: function(callback), getBalance: function(), getBlock: function(), getBlockNumber: function(callback), getBlockTransactionCount: function(), getBlockUncleCount: function(), getCode: function(), getCoinbase: function(callback), getCompilers: function(), getGasPrice: function(callback), getHashrate: function(callback), getMining: function(callback), getPendingTransactions: function(callback), getProtocolVersion: function(callback), getRawTransaction: function(), getRawTransactionFromBlock: function(), getStorageAt: function(), getSyncing: function(callback), getTransaction: function(), getTransactionCount: function(), getTransactionFromBlock: function(), getTransactionReceipt: function(), getUncle: function(), getWork: function(), iban: function(iban), icapNamereg: function(), isSyncing: function(callback), namereg: function(), resend: function(), sendIBANTransaction: function(), sendRawTransaction: function(), sendTransaction: function(), sign: function(), signTransaction: function(), submitTransaction: function(), submitWork: function() }, at: function(address, callback), getData: function(), new: function() } //解锁账户 &gt; personal.unlockAccount(eth.coinbase, &#39;111&#39;, 10000) true //部署合约。data为上述编译得到的Bytecode &gt; multiply = multiplyContract.new({from: eth.coinbase, data: &quot;0x60606040523415600b57fe5b5b60788061001a6000396000f300606060405263ffffffff60e060020a600035041663c6888fa181146020575bfe5b3415602757fe5b60306004356042565b60408051918252519081900360200190f35b600781025b9190505600a165627a7a7230582007a6259ba3d57941abda2e261e9a67958a3eda78b779d9dd8d42518791fddd590029&quot;}) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], address: undefined, transactionHash: &quot;0x2c61f267d9578d312dd0b0455db97ff615bb0c052c2b0f7ca3ea5946d57e210b&quot; } //我们知道部署合约的过程实际也是由创建合约的账户发送的一笔交易（即eth.coinbase账户）。需要挖矿进行确认。 &gt; miner.start(4);admin.sleepBlocks(2);miner.stop(); true 至此合约已经存在于区块链中，可以查看区块信息获取合约的地址和交易hash。 五、与合约交互 //获取合约对象 &gt; MyContract = eth.contract(abi) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], eth: { accounts: [&quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;], blockNumber: 15, coinbase: &quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;, compile: { lll: function(), serpent: function(), solidity: function() }, defaultAccount: undefined, defaultBlock: &quot;latest&quot;, gasPrice: 20000000000, hashrate: 0, mining: false, pendingTransactions: [], protocolVersion: &quot;0x3f&quot;, syncing: false, call: function(), contract: function(abi), estimateGas: function(), filter: function(fil, callback), getAccounts: function(callback), getBalance: function(), getBlock: function(), getBlockNumber: function(callback), getBlockTransactionCount: function(), getBlockUncleCount: function(), getCode: function(), getCoinbase: function(callback), getCompilers: function(), getGasPrice: function(callback), getHashrate: function(callback), getMining: function(callback), getPendingTransactions: function(callback), getProtocolVersion: function(callback), getRawTransaction: function(), getRawTransactionFromBlock: function(), getStorageAt: function(), getSyncing: function(callback), getTransaction: function(), getTransactionCount: function(), getTransactionFromBlock: function(), getTransactionReceipt: function(), getUncle: function(), getWork: function(), iban: function(iban), icapNamereg: function(), isSyncing: function(callback), namereg: function(), resend: function(), sendIBANTransaction: function(), sendRawTransaction: function(), sendTransaction: function(), sign: function(), signTransaction: function(), submitTransaction: function(), submitWork: function() }, at: function(address, callback), getData: function(), new: function() } //实例化合约 &gt; myContract = MyContract.at(multiply.address) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], address: &quot;0xe6c436f2964bd57692a7c3929e5451916a491401&quot;, transactionHash: null, allEvents: function(), multiply: function() } //调用合约 &gt; myContract.multiply.call(5) 35 阅读更多" />
<meta property="og:description" content="待补充。 很多朋友照着教程部署合约会遇到一些问题，我觉得主要是在获取abi这一步。 var Multiply7 = eth.contract(contract.info.abiDefinition); 所以这里记录一下用browser-solidity编译。 一、初始化私有链 首先需要准备一个创世区块信息用于初始化私有链，其中difficulty为挖矿难度，建议设置低一点方便挖矿测试，保存为init.json。 { &quot;nonce&quot;: &quot;0×0000000000000042&quot;, &quot;mixhash&quot;: &quot;0×0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;difficulty&quot;: &quot;0×20000&quot;, &quot;alloc&quot;: {}, &quot;coinbase&quot;: &quot;0×0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0×00&quot;, &quot;parentHash&quot;: &quot;0×0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;blossom&quot;, &quot;gasLimit&quot;: &quot;0xffffffff&quot; } 进入终端，创建私有链。命令中--datadir后的参数根据你放置init.json的路径自行更改。 geth --datadir &quot;/home/swb/test&quot; init init.json 进入私有链console。--identity和--datadir需要根据你的需要而定。 geth --identity &quot;blossom&quot; --rpc --rpccorsdomain &quot;*&quot; --datadir &quot;/home/swb/test&quot; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --networkid 123456 console 2&gt;&gt; /home/swb/test/geth.log 二、码合约 这一步不多说，具体的合约代码自己编写。以下是Solidity的官方文档：链接 本文以一个简单的加法合约为例介绍部署步骤。 还可以参考wiki中给的教程案例：Contracts and Transactions pragma solidity ^0.4.0; contract test { /// @notice Will multiply `a` by 7. function multiply(uint a) returns(uint d) { return a * 7; } } 三，编译合约 如前文中提到的，想要部署合约需要得到合约代码的ABI和EVM code。很多朋友看教程是在geth控制台里编译合约的，但是有一个问题是： MyContract = eth.contract(contract.info.abiDefinition) 无法获得contract的abi。导致接下来的步骤出错。所以这里推荐使用browser-solidity网页编译。 上图中Bytecode和interface就是我们需要的结果。 四、部署合约 在部署合约前，我们要明确需要以下几项条件： 一个有Ether的账户； 该账户已解锁； 编译合约得到的abi和code。 所以首先需要做以下工作： //创建账户 personal.newAccount(&#39;密码&#39;) //挖矿获取Ether。其中miner.start(4)应该是CPU数，admin.sleepBlock()可以指定挖的区块数 miner.start(4);admin.sleepBlocks(10);miner.stop(); //账户解锁 personal.unlockAccount(eth.coinbase,&#39;密码&#39;,10000) 之后可以进行部署了。 //获取abi信息，即上述编译得到的interface &gt; abi = [{constant:false,inputs:[{name:&#39;a&#39;,type:&#39;uint256&#39;}],name:&#39;multiply&#39;,outputs:[{name:&#39;d&#39;,type:&#39;uint256&#39;}],type:&#39;function&#39;}] [{ constant: false, inputs: [{ name: &quot;a&quot;, type: &quot;uint256&quot; }], name: &quot;multiply&quot;, outputs: [{ name: &quot;d&quot;, type: &quot;uint256&quot; }], type: &quot;function&quot; }] //创建合约。 &gt; multiplyContract = web3.eth.contract(abi) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], eth: { accounts: [&quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;], blockNumber: 10, coinbase: &quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;, compile: { lll: function(), serpent: function(), solidity: function() }, defaultAccount: undefined, defaultBlock: &quot;latest&quot;, gasPrice: 20000000000, hashrate: 0, mining: false, pendingTransactions: [], protocolVersion: &quot;0x3f&quot;, syncing: false, call: function(), contract: function(abi), estimateGas: function(), filter: function(fil, callback), getAccounts: function(callback), getBalance: function(), getBlock: function(), getBlockNumber: function(callback), getBlockTransactionCount: function(), getBlockUncleCount: function(), getCode: function(), getCoinbase: function(callback), getCompilers: function(), getGasPrice: function(callback), getHashrate: function(callback), getMining: function(callback), getPendingTransactions: function(callback), getProtocolVersion: function(callback), getRawTransaction: function(), getRawTransactionFromBlock: function(), getStorageAt: function(), getSyncing: function(callback), getTransaction: function(), getTransactionCount: function(), getTransactionFromBlock: function(), getTransactionReceipt: function(), getUncle: function(), getWork: function(), iban: function(iban), icapNamereg: function(), isSyncing: function(callback), namereg: function(), resend: function(), sendIBANTransaction: function(), sendRawTransaction: function(), sendTransaction: function(), sign: function(), signTransaction: function(), submitTransaction: function(), submitWork: function() }, at: function(address, callback), getData: function(), new: function() } //解锁账户 &gt; personal.unlockAccount(eth.coinbase, &#39;111&#39;, 10000) true //部署合约。data为上述编译得到的Bytecode &gt; multiply = multiplyContract.new({from: eth.coinbase, data: &quot;0x60606040523415600b57fe5b5b60788061001a6000396000f300606060405263ffffffff60e060020a600035041663c6888fa181146020575bfe5b3415602757fe5b60306004356042565b60408051918252519081900360200190f35b600781025b9190505600a165627a7a7230582007a6259ba3d57941abda2e261e9a67958a3eda78b779d9dd8d42518791fddd590029&quot;}) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], address: undefined, transactionHash: &quot;0x2c61f267d9578d312dd0b0455db97ff615bb0c052c2b0f7ca3ea5946d57e210b&quot; } //我们知道部署合约的过程实际也是由创建合约的账户发送的一笔交易（即eth.coinbase账户）。需要挖矿进行确认。 &gt; miner.start(4);admin.sleepBlocks(2);miner.stop(); true 至此合约已经存在于区块链中，可以查看区块信息获取合约的地址和交易hash。 五、与合约交互 //获取合约对象 &gt; MyContract = eth.contract(abi) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], eth: { accounts: [&quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;], blockNumber: 15, coinbase: &quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;, compile: { lll: function(), serpent: function(), solidity: function() }, defaultAccount: undefined, defaultBlock: &quot;latest&quot;, gasPrice: 20000000000, hashrate: 0, mining: false, pendingTransactions: [], protocolVersion: &quot;0x3f&quot;, syncing: false, call: function(), contract: function(abi), estimateGas: function(), filter: function(fil, callback), getAccounts: function(callback), getBalance: function(), getBlock: function(), getBlockNumber: function(callback), getBlockTransactionCount: function(), getBlockUncleCount: function(), getCode: function(), getCoinbase: function(callback), getCompilers: function(), getGasPrice: function(callback), getHashrate: function(callback), getMining: function(callback), getPendingTransactions: function(callback), getProtocolVersion: function(callback), getRawTransaction: function(), getRawTransactionFromBlock: function(), getStorageAt: function(), getSyncing: function(callback), getTransaction: function(), getTransactionCount: function(), getTransactionFromBlock: function(), getTransactionReceipt: function(), getUncle: function(), getWork: function(), iban: function(iban), icapNamereg: function(), isSyncing: function(callback), namereg: function(), resend: function(), sendIBANTransaction: function(), sendRawTransaction: function(), sendTransaction: function(), sign: function(), signTransaction: function(), submitTransaction: function(), submitWork: function() }, at: function(address, callback), getData: function(), new: function() } //实例化合约 &gt; myContract = MyContract.at(multiply.address) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], address: &quot;0xe6c436f2964bd57692a7c3929e5451916a491401&quot;, transactionHash: null, allEvents: function(), multiply: function() } //调用合约 &gt; myContract.multiply.call(5) 35 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-03-02T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"待补充。 很多朋友照着教程部署合约会遇到一些问题，我觉得主要是在获取abi这一步。 var Multiply7 = eth.contract(contract.info.abiDefinition); 所以这里记录一下用browser-solidity编译。 一、初始化私有链 首先需要准备一个创世区块信息用于初始化私有链，其中difficulty为挖矿难度，建议设置低一点方便挖矿测试，保存为init.json。 { &quot;nonce&quot;: &quot;0×0000000000000042&quot;, &quot;mixhash&quot;: &quot;0×0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;difficulty&quot;: &quot;0×20000&quot;, &quot;alloc&quot;: {}, &quot;coinbase&quot;: &quot;0×0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0×00&quot;, &quot;parentHash&quot;: &quot;0×0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;blossom&quot;, &quot;gasLimit&quot;: &quot;0xffffffff&quot; } 进入终端，创建私有链。命令中--datadir后的参数根据你放置init.json的路径自行更改。 geth --datadir &quot;/home/swb/test&quot; init init.json 进入私有链console。--identity和--datadir需要根据你的需要而定。 geth --identity &quot;blossom&quot; --rpc --rpccorsdomain &quot;*&quot; --datadir &quot;/home/swb/test&quot; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --networkid 123456 console 2&gt;&gt; /home/swb/test/geth.log 二、码合约 这一步不多说，具体的合约代码自己编写。以下是Solidity的官方文档：链接 本文以一个简单的加法合约为例介绍部署步骤。 还可以参考wiki中给的教程案例：Contracts and Transactions pragma solidity ^0.4.0; contract test { /// @notice Will multiply `a` by 7. function multiply(uint a) returns(uint d) { return a * 7; } } 三，编译合约 如前文中提到的，想要部署合约需要得到合约代码的ABI和EVM code。很多朋友看教程是在geth控制台里编译合约的，但是有一个问题是： MyContract = eth.contract(contract.info.abiDefinition) 无法获得contract的abi。导致接下来的步骤出错。所以这里推荐使用browser-solidity网页编译。 上图中Bytecode和interface就是我们需要的结果。 四、部署合约 在部署合约前，我们要明确需要以下几项条件： 一个有Ether的账户； 该账户已解锁； 编译合约得到的abi和code。 所以首先需要做以下工作： //创建账户 personal.newAccount(&#39;密码&#39;) //挖矿获取Ether。其中miner.start(4)应该是CPU数，admin.sleepBlock()可以指定挖的区块数 miner.start(4);admin.sleepBlocks(10);miner.stop(); //账户解锁 personal.unlockAccount(eth.coinbase,&#39;密码&#39;,10000) 之后可以进行部署了。 //获取abi信息，即上述编译得到的interface &gt; abi = [{constant:false,inputs:[{name:&#39;a&#39;,type:&#39;uint256&#39;}],name:&#39;multiply&#39;,outputs:[{name:&#39;d&#39;,type:&#39;uint256&#39;}],type:&#39;function&#39;}] [{ constant: false, inputs: [{ name: &quot;a&quot;, type: &quot;uint256&quot; }], name: &quot;multiply&quot;, outputs: [{ name: &quot;d&quot;, type: &quot;uint256&quot; }], type: &quot;function&quot; }] //创建合约。 &gt; multiplyContract = web3.eth.contract(abi) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], eth: { accounts: [&quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;], blockNumber: 10, coinbase: &quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;, compile: { lll: function(), serpent: function(), solidity: function() }, defaultAccount: undefined, defaultBlock: &quot;latest&quot;, gasPrice: 20000000000, hashrate: 0, mining: false, pendingTransactions: [], protocolVersion: &quot;0x3f&quot;, syncing: false, call: function(), contract: function(abi), estimateGas: function(), filter: function(fil, callback), getAccounts: function(callback), getBalance: function(), getBlock: function(), getBlockNumber: function(callback), getBlockTransactionCount: function(), getBlockUncleCount: function(), getCode: function(), getCoinbase: function(callback), getCompilers: function(), getGasPrice: function(callback), getHashrate: function(callback), getMining: function(callback), getPendingTransactions: function(callback), getProtocolVersion: function(callback), getRawTransaction: function(), getRawTransactionFromBlock: function(), getStorageAt: function(), getSyncing: function(callback), getTransaction: function(), getTransactionCount: function(), getTransactionFromBlock: function(), getTransactionReceipt: function(), getUncle: function(), getWork: function(), iban: function(iban), icapNamereg: function(), isSyncing: function(callback), namereg: function(), resend: function(), sendIBANTransaction: function(), sendRawTransaction: function(), sendTransaction: function(), sign: function(), signTransaction: function(), submitTransaction: function(), submitWork: function() }, at: function(address, callback), getData: function(), new: function() } //解锁账户 &gt; personal.unlockAccount(eth.coinbase, &#39;111&#39;, 10000) true //部署合约。data为上述编译得到的Bytecode &gt; multiply = multiplyContract.new({from: eth.coinbase, data: &quot;0x60606040523415600b57fe5b5b60788061001a6000396000f300606060405263ffffffff60e060020a600035041663c6888fa181146020575bfe5b3415602757fe5b60306004356042565b60408051918252519081900360200190f35b600781025b9190505600a165627a7a7230582007a6259ba3d57941abda2e261e9a67958a3eda78b779d9dd8d42518791fddd590029&quot;}) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], address: undefined, transactionHash: &quot;0x2c61f267d9578d312dd0b0455db97ff615bb0c052c2b0f7ca3ea5946d57e210b&quot; } //我们知道部署合约的过程实际也是由创建合约的账户发送的一笔交易（即eth.coinbase账户）。需要挖矿进行确认。 &gt; miner.start(4);admin.sleepBlocks(2);miner.stop(); true 至此合约已经存在于区块链中，可以查看区块信息获取合约的地址和交易hash。 五、与合约交互 //获取合约对象 &gt; MyContract = eth.contract(abi) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], eth: { accounts: [&quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;], blockNumber: 15, coinbase: &quot;0xae5a780f8d162b7687869f9f6d4bdbda5056832d&quot;, compile: { lll: function(), serpent: function(), solidity: function() }, defaultAccount: undefined, defaultBlock: &quot;latest&quot;, gasPrice: 20000000000, hashrate: 0, mining: false, pendingTransactions: [], protocolVersion: &quot;0x3f&quot;, syncing: false, call: function(), contract: function(abi), estimateGas: function(), filter: function(fil, callback), getAccounts: function(callback), getBalance: function(), getBlock: function(), getBlockNumber: function(callback), getBlockTransactionCount: function(), getBlockUncleCount: function(), getCode: function(), getCoinbase: function(callback), getCompilers: function(), getGasPrice: function(callback), getHashrate: function(callback), getMining: function(callback), getPendingTransactions: function(callback), getProtocolVersion: function(callback), getRawTransaction: function(), getRawTransactionFromBlock: function(), getStorageAt: function(), getSyncing: function(callback), getTransaction: function(), getTransactionCount: function(), getTransactionFromBlock: function(), getTransactionReceipt: function(), getUncle: function(), getWork: function(), iban: function(iban), icapNamereg: function(), isSyncing: function(callback), namereg: function(), resend: function(), sendIBANTransaction: function(), sendRawTransaction: function(), sendTransaction: function(), sign: function(), signTransaction: function(), submitTransaction: function(), submitWork: function() }, at: function(address, callback), getData: function(), new: function() } //实例化合约 &gt; myContract = MyContract.at(multiply.address) { abi: [{ constant: false, inputs: [{...}], name: &quot;multiply&quot;, outputs: [{...}], type: &quot;function&quot; }], address: &quot;0xe6c436f2964bd57692a7c3929e5451916a491401&quot;, transactionHash: null, allEvents: function(), multiply: function() } //调用合约 &gt; myContract.multiply.call(5) 35 阅读更多","@type":"BlogPosting","url":"/2017/03/02/9400c821a6223e8e4a3cadd4f48582b4.html","headline":"以太坊私有链环境下智能合约部署流程","dateModified":"2017-03-02T00:00:00+08:00","datePublished":"2017-03-02T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2017/03/02/9400c821a6223e8e4a3cadd4f48582b4.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>以太坊私有链环境下智能合约部署流程</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>待补充。 <br> 很多朋友照着教程部署合约会遇到一些问题，我觉得主要是在获取abi这一步。</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">var Multiply7 = eth<span class="hljs-preprocessor">.contract</span>(contract<span class="hljs-preprocessor">.info</span><span class="hljs-preprocessor">.abiDefinition</span>)<span class="hljs-comment">;</span></code></pre> 
  <p>所以这里记录一下用browser-solidity编译。</p> 
  <h2 id="一初始化私有链">一、初始化私有链</h2> 
  <p>首先需要准备一个创世区块信息用于初始化私有链，其中<code>difficulty</code>为挖矿难度，建议设置低一点方便挖矿测试，保存为init.json。</p> 
  <pre class="prettyprint"><code class=" hljs json">{
    "<span class="hljs-attribute">nonce</span>": <span class="hljs-value"><span class="hljs-string">"0×0000000000000042"</span></span>,
    "<span class="hljs-attribute">mixhash</span>": <span class="hljs-value"><span class="hljs-string">"0×0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
    "<span class="hljs-attribute">difficulty</span>": <span class="hljs-value"><span class="hljs-string">"0×20000"</span></span>,
    "<span class="hljs-attribute">alloc</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">coinbase</span>": <span class="hljs-value"><span class="hljs-string">"0×0000000000000000000000000000000000000000"</span></span>,
    "<span class="hljs-attribute">timestamp</span>": <span class="hljs-value"><span class="hljs-string">"0×00"</span></span>,
    "<span class="hljs-attribute">parentHash</span>": <span class="hljs-value"><span class="hljs-string">"0×0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
    "<span class="hljs-attribute">extraData</span>": <span class="hljs-value"><span class="hljs-string">"blossom"</span></span>,
    "<span class="hljs-attribute">gasLimit</span>": <span class="hljs-value"><span class="hljs-string">"0xffffffff"</span> </span>}</code></pre> 
  <p>进入终端，创建私有链。<strong>命令中<code>--datadir</code>后的参数根据你放置<code>init.json</code>的路径自行更改。</strong></p> 
  <pre class="prettyprint"><code class=" hljs avrasm">geth  --datadir <span class="hljs-string">"/home/swb/test"</span> init init<span class="hljs-preprocessor">.json</span></code></pre> 
  <p>进入私有链console。<code>--identity</code>和<code>--datadir</code>需要根据你的需要而定。</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">identity</span> <span class="hljs-comment">"blossom"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpc</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpccorsdomain</span> <span class="hljs-comment">"*"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-comment">"/home/swb/test"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">port</span> <span class="hljs-comment">30303</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpcapi</span> <span class="hljs-comment">"db</span><span class="hljs-string">,</span><span class="hljs-comment">eth</span><span class="hljs-string">,</span><span class="hljs-comment">net</span><span class="hljs-string">,</span><span class="hljs-comment">web3"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">networkid</span> <span class="hljs-comment">123456</span> <span class="hljs-comment">console</span> <span class="hljs-comment">2</span>&gt;&gt; <span class="hljs-comment">/home/swb/test/geth</span><span class="hljs-string">.</span><span class="hljs-comment">log</span></code></pre> 
  <h2 id="二码合约">二、码合约</h2> 
  <p>这一步不多说，具体的合约代码自己编写。以下是Solidity的官方文档：<a href="https://solidity.readthedocs.io/en/latest/index.html" rel="nofollow">链接</a> <br> 本文以一个简单的加法合约为例介绍部署步骤。 <br> 还可以参考wiki中给的教程案例：<a href="https://github.com/ethereum/go-ethereum/wiki/Contracts-and-Transactions" rel="nofollow">Contracts and Transactions</a></p> 
  <pre class="prettyprint"><code class=" hljs javascript">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.0</span>;
contract test {
   <span class="hljs-comment">/// @notice Will multiply `a` by 7.</span>
   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span><span class="hljs-params">(uint a)</span> <span class="hljs-title">returns</span><span class="hljs-params">(uint d)</span> {</span>
       <span class="hljs-keyword">return</span> a * <span class="hljs-number">7</span>;
   }
}</code></pre> 
  <h2 id="三编译合约">三，编译合约</h2> 
  <p>如前文中提到的，想要部署合约需要得到合约代码的ABI和EVM code。很多朋友看教程是在geth控制台里编译合约的，但是有一个问题是：</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">MyContract = eth<span class="hljs-preprocessor">.contract</span>(contract<span class="hljs-preprocessor">.info</span><span class="hljs-preprocessor">.abiDefinition</span>)</code></pre> 
  <p>无法获得contract的abi。导致接下来的步骤出错。所以这里推荐使用<a href="https://ethereum.github.io/browser-solidity/#version=soljson-v0.4.7+commit.822622cf.js" rel="nofollow">browser-solidity网页编译</a>。 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170302202558865?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQmxvc3NvbXBz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="EVM code和ABI" title=""> <br> 上图中Bytecode和interface就是我们需要的结果。</p> 
  <h2 id="四部署合约">四、部署合约</h2> 
  <p>在部署合约前，我们要明确需要以下几项条件：</p> 
  <ol> 
   <li>一个有Ether的账户；</li> 
   <li>该账户已解锁；</li> 
   <li>编译合约得到的abi和code。</li> 
  </ol> 
  <p>所以首先需要做以下工作：</p> 
  <pre class="prettyprint"><code class=" hljs cs"><span class="hljs-comment">//创建账户</span>
personal.newAccount(<span class="hljs-string">'密码'</span>)
<span class="hljs-comment">//挖矿获取Ether。其中miner.start(4)应该是CPU数，admin.sleepBlock()可以指定挖的区块数</span>
miner.start(<span class="hljs-number">4</span>);admin.sleepBlocks(<span class="hljs-number">10</span>);miner.stop();
<span class="hljs-comment">//账户解锁</span>
personal.unlockAccount(eth.coinbase,<span class="hljs-string">'密码'</span>,<span class="hljs-number">10000</span>)</code></pre> 
  <p>之后可以进行部署了。</p> 
  <pre class="prettyprint"><code class=" hljs lua">//获取abi信息，即上述编译得到的interface
&gt; abi = [{constant:<span class="hljs-keyword">false</span>,inputs:[{name:<span class="hljs-string">'a'</span>,<span class="hljs-built_in">type</span>:<span class="hljs-string">'uint256'</span>}],name:<span class="hljs-string">'multiply'</span>,outputs:[{name:<span class="hljs-string">'d'</span>,<span class="hljs-built_in">type</span>:<span class="hljs-string">'uint256'</span>}],<span class="hljs-built_in">type</span>:<span class="hljs-string">'function'</span>}]

[{
    constant: <span class="hljs-keyword">false</span>,
    inputs: [{
        name: <span class="hljs-string">"a"</span>,
        <span class="hljs-built_in">type</span>: <span class="hljs-string">"uint256"</span>
    }],
    name: <span class="hljs-string">"multiply"</span>,
    outputs: [{
        name: <span class="hljs-string">"d"</span>,
        <span class="hljs-built_in">type</span>: <span class="hljs-string">"uint256"</span>
    }],
    <span class="hljs-built_in">type</span>: <span class="hljs-string">"function"</span>
}]
//创建合约。
&gt; multiplyContract = web3.eth.contract(abi)
{
  abi: [{
      constant: <span class="hljs-keyword">false</span>,
      inputs: [{...}],
      name: <span class="hljs-string">"multiply"</span>,
      outputs: [{...}],
      <span class="hljs-built_in">type</span>: <span class="hljs-string">"function"</span>
  }],
  eth: {
    accounts: [<span class="hljs-string">"0xae5a780f8d162b7687869f9f6d4bdbda5056832d"</span>],
    blockNumber: <span class="hljs-number">10</span>,
    coinbase: <span class="hljs-string">"0xae5a780f8d162b7687869f9f6d4bdbda5056832d"</span>,
    compile: {
      lll: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
      serpent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
      solidity: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    },
    defaultAccount: undefined,
    defaultBlock: <span class="hljs-string">"latest"</span>,
    gasPrice: <span class="hljs-number">20000000000</span>,
    hashrate: <span class="hljs-number">0</span>,
    mining: <span class="hljs-keyword">false</span>,
    pendingTransactions: [],
    protocolVersion: <span class="hljs-string">"0x3f"</span>,
    syncing: <span class="hljs-keyword">false</span>,
    call: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    contract: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(abi)</span></span>,
    estimateGas: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    filter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fil, callback)</span></span>,
    getAccounts: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getBalance: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getBlock: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getBlockNumber: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getBlockTransactionCount: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getBlockUncleCount: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getCode: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getCoinbase: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getCompilers: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getGasPrice: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getHashrate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getMining: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getPendingTransactions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getProtocolVersion: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getRawTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getRawTransactionFromBlock: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getStorageAt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getSyncing: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getTransactionCount: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getTransactionFromBlock: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getTransactionReceipt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getUncle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getWork: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    iban: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(iban)</span></span>,
    icapNamereg: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    isSyncing: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    namereg: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    resend: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sendIBANTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sendRawTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sendTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sign: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    signTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    submitTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    submitWork: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  },
  at: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(address, callback)</span></span>,
  getData: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
  new: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
}
//解锁账户
&gt; personal.unlockAccount(eth.coinbase, <span class="hljs-string">'111'</span>, <span class="hljs-number">10000</span>)
<span class="hljs-keyword">true</span>
//部署合约。data为上述编译得到的Bytecode
&gt; multiply = multiplyContract.new({from: eth.coinbase, data: <span class="hljs-string">"0x60606040523415600b57fe5b5b60788061001a6000396000f300606060405263ffffffff60e060020a600035041663c6888fa181146020575bfe5b3415602757fe5b60306004356042565b60408051918252519081900360200190f35b600781025b9190505600a165627a7a7230582007a6259ba3d57941abda2e261e9a67958a3eda78b779d9dd8d42518791fddd590029"</span>})
{
  abi: [{
      constant: <span class="hljs-keyword">false</span>,
      inputs: [{...}],
      name: <span class="hljs-string">"multiply"</span>,
      outputs: [{...}],
      <span class="hljs-built_in">type</span>: <span class="hljs-string">"function"</span>
  }],
  address: undefined,
  transactionHash: <span class="hljs-string">"0x2c61f267d9578d312dd0b0455db97ff615bb0c052c2b0f7ca3ea5946d57e210b"</span>
}
//我们知道部署合约的过程实际也是由创建合约的账户发送的一笔交易（即eth.coinbase账户）。需要挖矿进行确认。
&gt; miner.start(<span class="hljs-number">4</span>);admin.sleepBlocks(<span class="hljs-number">2</span>);miner.stop();
<span class="hljs-keyword">true</span></code></pre> 
  <p>至此合约已经存在于区块链中，可以查看区块信息获取合约的地址和交易hash。</p> 
  <h2 id="五与合约交互">五、与合约交互</h2> 
  <pre class="prettyprint"><code class=" hljs lua">//获取合约对象
&gt; MyContract = eth.contract(abi)
{
  abi: [{
      constant: <span class="hljs-keyword">false</span>,
      inputs: [{...}],
      name: <span class="hljs-string">"multiply"</span>,
      outputs: [{...}],
      <span class="hljs-built_in">type</span>: <span class="hljs-string">"function"</span>
  }],
  eth: {
    accounts: [<span class="hljs-string">"0xae5a780f8d162b7687869f9f6d4bdbda5056832d"</span>],
    blockNumber: <span class="hljs-number">15</span>,
    coinbase: <span class="hljs-string">"0xae5a780f8d162b7687869f9f6d4bdbda5056832d"</span>,
    compile: {
      lll: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
      serpent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
      solidity: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    },
    defaultAccount: undefined,
    defaultBlock: <span class="hljs-string">"latest"</span>,
    gasPrice: <span class="hljs-number">20000000000</span>,
    hashrate: <span class="hljs-number">0</span>,
    mining: <span class="hljs-keyword">false</span>,
    pendingTransactions: [],
    protocolVersion: <span class="hljs-string">"0x3f"</span>,
    syncing: <span class="hljs-keyword">false</span>,
    call: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    contract: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(abi)</span></span>,
    estimateGas: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    filter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fil, callback)</span></span>,
    getAccounts: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getBalance: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getBlock: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getBlockNumber: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getBlockTransactionCount: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getBlockUncleCount: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getCode: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getCoinbase: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getCompilers: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getGasPrice: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getHashrate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getMining: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getPendingTransactions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getProtocolVersion: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getRawTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getRawTransactionFromBlock: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getStorageAt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getSyncing: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    getTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getTransactionCount: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getTransactionFromBlock: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getTransactionReceipt: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getUncle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    getWork: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    iban: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(iban)</span></span>,
    icapNamereg: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    isSyncing: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span></span>,
    namereg: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    resend: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sendIBANTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sendRawTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sendTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    sign: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    signTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    submitTransaction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
    submitWork: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  },
  at: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(address, callback)</span></span>,
  getData: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
  new: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
}

//实例化合约
&gt; myContract = MyContract.at(multiply.address)
{
  abi: [{
      constant: <span class="hljs-keyword">false</span>,
      inputs: [{...}],
      name: <span class="hljs-string">"multiply"</span>,
      outputs: [{...}],
      <span class="hljs-built_in">type</span>: <span class="hljs-string">"function"</span>
  }],
  address: <span class="hljs-string">"0xe6c436f2964bd57692a7c3929e5451916a491401"</span>,
  transactionHash: null,
  allEvents: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>,
  multiply: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
}

//调用合约
&gt; myContract.multiply.call(<span class="hljs-number">5</span>)
<span class="hljs-number">35</span></code></pre> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Blossomps/article/details/59542586,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Blossomps/article/details/59542586,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
