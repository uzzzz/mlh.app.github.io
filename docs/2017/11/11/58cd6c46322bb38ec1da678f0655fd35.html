<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>从零构建基于以太坊Ethereum钱包Parity联盟链 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="从零构建基于以太坊Ethereum钱包Parity联盟链" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="以下内容，直接实战，开发人员不需要图解释，嘿嘿 先来看看，PoA Chain特点有 有别于PoW（Proof-of-Work）需要解数学难题来产生block，PoA是依靠预设好的Authority nodes，负责产生block。 可依照需求设定Authority node数量。 可指定产生block的时间，例如收到交易的5秒后产生block。 一般的Ethereum node也可以连接到PoA Chain，正常发起transactions，contracts等。 一、Parity钱包下载安装 Parity钱包下载安装https://parity.io。 如官网所示，The fastest and most secure way of interacting with the Ethereum blockchainParity是最快最安全的钱包。 打开官网，我们看到有三种安装方式，第一种，直接下载安装，第二种，Brew安装，第三种，Docker安装。 在我们案例中，我们通过Brew来进行安装。 1、Getting Homebrew /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; 2、Adding Parity to your list of Homebrew ‘kegs’ 打开终端，输入下面的命令，按enter。 brew tap paritytech/paritytech 3、Installing Parity 稳定版 brew install parity --stable 最新版 brew install parity 最新开发版 brew install parity --master 更新最新版本 brew update &amp;&amp; brew upgrade parity and brew reinstall parity 4、查看安装版本 liyuechun:~ yuechunli$ parity --version 二、设置chain spec PoA chain 需要设置一个创世区块。 { &nbsp; &quot;name&quot;: &quot;DemoPoA&quot;, &nbsp; &quot;engine&quot;: { &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;stepDuration&quot;: &quot;5&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;validators&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; }, &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &quot;gasLimitBoundDivisor&quot;: &quot;0x0400&quot;, &nbsp; &nbsp; &quot;maximumExtraDataSize&quot;: &quot;0x20&quot;, &nbsp; &nbsp; &quot;minGasLimit&quot;: &quot;0x1388&quot;, &nbsp; &nbsp; &quot;networkID&quot;: &quot;0x2323&quot; &nbsp; }, &nbsp; &quot;genesis&quot;: { &nbsp; &nbsp; &quot;seal&quot;: { &nbsp; &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;step&quot;: &quot;0x0&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;signature&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;difficulty&quot;: &quot;0x20000&quot;, &nbsp; &nbsp; &quot;gasLimit&quot;: &quot;0x5B8D80&quot; &nbsp; }, &nbsp; &quot;accounts&quot;: { &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000001&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ecrecover&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 3000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000002&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;sha256&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 60, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 12 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000003&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ripemd160&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 600, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 120 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000004&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;identity&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 15, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; } } stepDuration 设定成5秒产生一个区块。 validators 设定Authority的地方，目前先空著，后面创建account之后再回来填入。 将上面的文件保存到桌面的一个文件中，保存为demo-spec.json。 三、设置两个节点 在我们这篇文章中，我们在同一台电脑设置两个节点，跟我们讲解以太坊私网建立 (2) - 同一台电脑／不同电脑运行多个节点时，如果在同一台电脑设置两个节点，需要将rpcport和port设置为不同的值，否则就会发生冲突，POA chain中也是一样，需要将一些参数设置为不同的值。 -d：指定存储资料与账号的目录 --dport：指定Parity的network port，可用来让其他node连接 --jsonrpc-port：这是JSON RPC port，使用web3.js时会需要 ui-port：Parity提供的Web-based UI port 可以用下列指令启动Parity node。 parity --chain demo-spec.json -d parity0 --port 30300&nbsp; --ui-port 8180&nbsp; --jsonrpc-port 8540 --jsonrpc-apis web3,eth,net,personal,parity,parity_set,traces,rpc,parity_accounts 除了打一长串的指令外，Parity也提供更为简洁的config档案设定方式，使用 --config 即可引用配置文件。 node0 使用如下配置文件 node0.toml： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8180 [websockets] port = 8456 node1 使用如下配置文件 node1.toml： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8181 [websockets] port = 8457 四、设置账号(Account) 我们总共需要设置三个账号，两个Authority和一个user账号。 第一步：首先启动node0 : parity --config node0.toml 启动 parity node0 打开网页http://localhost:8180，按照步骤创建一个用户账号。 新增Authority account，使用Restore功能，为了示范一致性，我们使用 node0 当作 pass phrase。 Recover account from recovery phrase 到目前为止我们已经完成node0的账号设置。 Authority account：0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e User account：0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC 第二步：设置node1的账号，启动parity --config node1.toml。步骤相同，连接到 http://localhost:8181 ，pass phrase使用 node1。 启动 node1 parity node1 这样就完成了node1的账号设置。 Authority account:0x00F9B30838ca40c8A53c672840acbDec6fCDb180 第三步：将Authority account 写入 demo-spec.json 文件 &quot;validators&quot;: { &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot;, &nbsp; &nbsp; &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; &nbsp; ] } 再将user account加入accounts，並给一些balance，后续可以使用。 &quot;0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC&quot;: { &nbsp; &quot;balance&quot;: &quot;10000000000000000000000&quot; } 完成后的demo-spec.json如下： { &nbsp; &quot;name&quot;: &quot;DemoPoA&quot;, &nbsp; &quot;engine&quot;: { &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;stepDuration&quot;: &quot;5&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;validators&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; }, &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &quot;gasLimitBoundDivisor&quot;: &quot;0x0400&quot;, &nbsp; &nbsp; &quot;maximumExtraDataSize&quot;: &quot;0x20&quot;, &nbsp; &nbsp; &quot;minGasLimit&quot;: &quot;0x1388&quot;, &nbsp; &nbsp; &quot;networkID&quot;: &quot;0x2323&quot; &nbsp; }, &nbsp; &quot;genesis&quot;: { &nbsp; &nbsp; &quot;seal&quot;: { &nbsp; &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;step&quot;: &quot;0x0&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;signature&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;difficulty&quot;: &quot;0x20000&quot;, &nbsp; &nbsp; &quot;gasLimit&quot;: &quot;0x5B8D80&quot; &nbsp; }, &nbsp; &quot;accounts&quot;: { &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000001&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ecrecover&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 3000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000002&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;sha256&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 60, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 12 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000003&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ripemd160&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 600, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 120 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;10000000000000000000000&quot; &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000004&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;identity&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 15, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; } } 五、启动Authority node 为了启动Authority node来产生区块，我们必须设定负责产生block的signer，分別是 node0 和 node1 account。 1、第一步，创建一个node.pwds文件，写入node0与node1的password，内容如下： node0 node1 2、第二步，在node0.toml文件中加入[account]及[mining]设置，如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8180 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; reseal_on_txs = &quot;none&quot; 3、第三步，在node1.toml文件中加入[account]及[mining]设置，如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8181 [websockets] port = 8457 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot; reseal_on_txs = &quot;none&quot; 4、第四步，Step 4 分別启动两个node parity --config node0.toml parity --config node1.toml 六、连接两个节点 使用Postman透过JSON RPC来测试。 1、第一步，Post下列JSON数据至 http://localhost:8540 以取得 node0 的enode资料 { &nbsp;&quot;jsonrpc&quot;:&quot;2.0&quot;, &nbsp;&quot;method&quot;:&quot;parity_enode&quot;, &nbsp;&quot;params&quot;:[], &nbsp;&quot;id&quot;:0 } 获取到的数据如下： { &nbsp; &nbsp; &quot;jsonrpc&quot;: &quot;2.0&quot;, &nbsp; &nbsp; &quot;result&quot;: &quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;, &nbsp; &nbsp; &quot;id&quot;: 0 } &quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;是node0的标识。下一步中我们将将它加入到node1中以实现两个节点之间的连接。 2、第二步，将 node0 的enode加入 node1 ，Post下列JSONs数据至node1 (http://localhost:8541 ) { &nbsp;&quot;jsonrpc&quot;:&quot;2.0&quot;, &nbsp;&quot;method&quot;:&quot;parity_addReservedPeer&quot;, &nbsp;&quot;params&quot;:[&quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;], &nbsp;&quot;id&quot;:0 } 返回的数据如下，result为true，说明连接成功： { &nbsp; &nbsp; &quot;jsonrpc&quot;: &quot;2.0&quot;, &nbsp; &nbsp; &quot;result&quot;: true, &nbsp; &nbsp; &quot;id&quot;: 0 } 再切换到node1的终端，会看到下面的数据： 1/25 peers&nbsp; &nbsp;13 KiB chain 11 KiB db 0 bytes queue 10 KiB sync&nbsp; RPC:&nbsp; 0 conn,&nbsp; 0 req/s,&nbsp; 24 µs 连接成功。 七、发送交易 在我们这个案例中，我们一个创建了三个账号，一个用户账号，两个POA账号，刚开始的时候我们为用户账号初始化了10000 ETH。如 账号与账号之间可以相互转账。 八、分享给其他节点 在开发时通常会将node跑在server上，让其他人可以通过JSON RPC port连接上去使用，此时只要在config文件里面加入 [interface] 设置即可。 假设server ip为192.168.1.5，将 node0.toml 修改如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] interface = &quot;192.168.1.5&quot; [ui] port = 8180 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; reseal_on_txs = &quot;none&quot; node1.toml 修改如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] interface = &quot;192.168.1.5&quot; [ui] port = 8181 [websockets] port = 8457 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot; reseal_on_txs = &quot;none&quot; 阅读更多" />
<meta property="og:description" content="以下内容，直接实战，开发人员不需要图解释，嘿嘿 先来看看，PoA Chain特点有 有别于PoW（Proof-of-Work）需要解数学难题来产生block，PoA是依靠预设好的Authority nodes，负责产生block。 可依照需求设定Authority node数量。 可指定产生block的时间，例如收到交易的5秒后产生block。 一般的Ethereum node也可以连接到PoA Chain，正常发起transactions，contracts等。 一、Parity钱包下载安装 Parity钱包下载安装https://parity.io。 如官网所示，The fastest and most secure way of interacting with the Ethereum blockchainParity是最快最安全的钱包。 打开官网，我们看到有三种安装方式，第一种，直接下载安装，第二种，Brew安装，第三种，Docker安装。 在我们案例中，我们通过Brew来进行安装。 1、Getting Homebrew /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; 2、Adding Parity to your list of Homebrew ‘kegs’ 打开终端，输入下面的命令，按enter。 brew tap paritytech/paritytech 3、Installing Parity 稳定版 brew install parity --stable 最新版 brew install parity 最新开发版 brew install parity --master 更新最新版本 brew update &amp;&amp; brew upgrade parity and brew reinstall parity 4、查看安装版本 liyuechun:~ yuechunli$ parity --version 二、设置chain spec PoA chain 需要设置一个创世区块。 { &nbsp; &quot;name&quot;: &quot;DemoPoA&quot;, &nbsp; &quot;engine&quot;: { &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;stepDuration&quot;: &quot;5&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;validators&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; }, &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &quot;gasLimitBoundDivisor&quot;: &quot;0x0400&quot;, &nbsp; &nbsp; &quot;maximumExtraDataSize&quot;: &quot;0x20&quot;, &nbsp; &nbsp; &quot;minGasLimit&quot;: &quot;0x1388&quot;, &nbsp; &nbsp; &quot;networkID&quot;: &quot;0x2323&quot; &nbsp; }, &nbsp; &quot;genesis&quot;: { &nbsp; &nbsp; &quot;seal&quot;: { &nbsp; &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;step&quot;: &quot;0x0&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;signature&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;difficulty&quot;: &quot;0x20000&quot;, &nbsp; &nbsp; &quot;gasLimit&quot;: &quot;0x5B8D80&quot; &nbsp; }, &nbsp; &quot;accounts&quot;: { &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000001&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ecrecover&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 3000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000002&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;sha256&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 60, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 12 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000003&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ripemd160&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 600, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 120 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000004&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;identity&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 15, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; } } stepDuration 设定成5秒产生一个区块。 validators 设定Authority的地方，目前先空著，后面创建account之后再回来填入。 将上面的文件保存到桌面的一个文件中，保存为demo-spec.json。 三、设置两个节点 在我们这篇文章中，我们在同一台电脑设置两个节点，跟我们讲解以太坊私网建立 (2) - 同一台电脑／不同电脑运行多个节点时，如果在同一台电脑设置两个节点，需要将rpcport和port设置为不同的值，否则就会发生冲突，POA chain中也是一样，需要将一些参数设置为不同的值。 -d：指定存储资料与账号的目录 --dport：指定Parity的network port，可用来让其他node连接 --jsonrpc-port：这是JSON RPC port，使用web3.js时会需要 ui-port：Parity提供的Web-based UI port 可以用下列指令启动Parity node。 parity --chain demo-spec.json -d parity0 --port 30300&nbsp; --ui-port 8180&nbsp; --jsonrpc-port 8540 --jsonrpc-apis web3,eth,net,personal,parity,parity_set,traces,rpc,parity_accounts 除了打一长串的指令外，Parity也提供更为简洁的config档案设定方式，使用 --config 即可引用配置文件。 node0 使用如下配置文件 node0.toml： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8180 [websockets] port = 8456 node1 使用如下配置文件 node1.toml： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8181 [websockets] port = 8457 四、设置账号(Account) 我们总共需要设置三个账号，两个Authority和一个user账号。 第一步：首先启动node0 : parity --config node0.toml 启动 parity node0 打开网页http://localhost:8180，按照步骤创建一个用户账号。 新增Authority account，使用Restore功能，为了示范一致性，我们使用 node0 当作 pass phrase。 Recover account from recovery phrase 到目前为止我们已经完成node0的账号设置。 Authority account：0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e User account：0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC 第二步：设置node1的账号，启动parity --config node1.toml。步骤相同，连接到 http://localhost:8181 ，pass phrase使用 node1。 启动 node1 parity node1 这样就完成了node1的账号设置。 Authority account:0x00F9B30838ca40c8A53c672840acbDec6fCDb180 第三步：将Authority account 写入 demo-spec.json 文件 &quot;validators&quot;: { &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot;, &nbsp; &nbsp; &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; &nbsp; ] } 再将user account加入accounts，並给一些balance，后续可以使用。 &quot;0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC&quot;: { &nbsp; &quot;balance&quot;: &quot;10000000000000000000000&quot; } 完成后的demo-spec.json如下： { &nbsp; &quot;name&quot;: &quot;DemoPoA&quot;, &nbsp; &quot;engine&quot;: { &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;stepDuration&quot;: &quot;5&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;validators&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; }, &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &quot;gasLimitBoundDivisor&quot;: &quot;0x0400&quot;, &nbsp; &nbsp; &quot;maximumExtraDataSize&quot;: &quot;0x20&quot;, &nbsp; &nbsp; &quot;minGasLimit&quot;: &quot;0x1388&quot;, &nbsp; &nbsp; &quot;networkID&quot;: &quot;0x2323&quot; &nbsp; }, &nbsp; &quot;genesis&quot;: { &nbsp; &nbsp; &quot;seal&quot;: { &nbsp; &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;step&quot;: &quot;0x0&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;signature&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;difficulty&quot;: &quot;0x20000&quot;, &nbsp; &nbsp; &quot;gasLimit&quot;: &quot;0x5B8D80&quot; &nbsp; }, &nbsp; &quot;accounts&quot;: { &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000001&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ecrecover&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 3000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000002&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;sha256&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 60, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 12 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000003&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ripemd160&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 600, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 120 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;10000000000000000000000&quot; &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000004&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;identity&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 15, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; } } 五、启动Authority node 为了启动Authority node来产生区块，我们必须设定负责产生block的signer，分別是 node0 和 node1 account。 1、第一步，创建一个node.pwds文件，写入node0与node1的password，内容如下： node0 node1 2、第二步，在node0.toml文件中加入[account]及[mining]设置，如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8180 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; reseal_on_txs = &quot;none&quot; 3、第三步，在node1.toml文件中加入[account]及[mining]设置，如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8181 [websockets] port = 8457 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot; reseal_on_txs = &quot;none&quot; 4、第四步，Step 4 分別启动两个node parity --config node0.toml parity --config node1.toml 六、连接两个节点 使用Postman透过JSON RPC来测试。 1、第一步，Post下列JSON数据至 http://localhost:8540 以取得 node0 的enode资料 { &nbsp;&quot;jsonrpc&quot;:&quot;2.0&quot;, &nbsp;&quot;method&quot;:&quot;parity_enode&quot;, &nbsp;&quot;params&quot;:[], &nbsp;&quot;id&quot;:0 } 获取到的数据如下： { &nbsp; &nbsp; &quot;jsonrpc&quot;: &quot;2.0&quot;, &nbsp; &nbsp; &quot;result&quot;: &quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;, &nbsp; &nbsp; &quot;id&quot;: 0 } &quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;是node0的标识。下一步中我们将将它加入到node1中以实现两个节点之间的连接。 2、第二步，将 node0 的enode加入 node1 ，Post下列JSONs数据至node1 (http://localhost:8541 ) { &nbsp;&quot;jsonrpc&quot;:&quot;2.0&quot;, &nbsp;&quot;method&quot;:&quot;parity_addReservedPeer&quot;, &nbsp;&quot;params&quot;:[&quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;], &nbsp;&quot;id&quot;:0 } 返回的数据如下，result为true，说明连接成功： { &nbsp; &nbsp; &quot;jsonrpc&quot;: &quot;2.0&quot;, &nbsp; &nbsp; &quot;result&quot;: true, &nbsp; &nbsp; &quot;id&quot;: 0 } 再切换到node1的终端，会看到下面的数据： 1/25 peers&nbsp; &nbsp;13 KiB chain 11 KiB db 0 bytes queue 10 KiB sync&nbsp; RPC:&nbsp; 0 conn,&nbsp; 0 req/s,&nbsp; 24 µs 连接成功。 七、发送交易 在我们这个案例中，我们一个创建了三个账号，一个用户账号，两个POA账号，刚开始的时候我们为用户账号初始化了10000 ETH。如 账号与账号之间可以相互转账。 八、分享给其他节点 在开发时通常会将node跑在server上，让其他人可以通过JSON RPC port连接上去使用，此时只要在config文件里面加入 [interface] 设置即可。 假设server ip为192.168.1.5，将 node0.toml 修改如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] interface = &quot;192.168.1.5&quot; [ui] port = 8180 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; reseal_on_txs = &quot;none&quot; node1.toml 修改如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] interface = &quot;192.168.1.5&quot; [ui] port = 8181 [websockets] port = 8457 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot; reseal_on_txs = &quot;none&quot; 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/11/11/58cd6c46322bb38ec1da678f0655fd35.html" />
<meta property="og:url" content="https://mlh.app/2017/11/11/58cd6c46322bb38ec1da678f0655fd35.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-11-11T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"以下内容，直接实战，开发人员不需要图解释，嘿嘿 先来看看，PoA Chain特点有 有别于PoW（Proof-of-Work）需要解数学难题来产生block，PoA是依靠预设好的Authority nodes，负责产生block。 可依照需求设定Authority node数量。 可指定产生block的时间，例如收到交易的5秒后产生block。 一般的Ethereum node也可以连接到PoA Chain，正常发起transactions，contracts等。 一、Parity钱包下载安装 Parity钱包下载安装https://parity.io。 如官网所示，The fastest and most secure way of interacting with the Ethereum blockchainParity是最快最安全的钱包。 打开官网，我们看到有三种安装方式，第一种，直接下载安装，第二种，Brew安装，第三种，Docker安装。 在我们案例中，我们通过Brew来进行安装。 1、Getting Homebrew /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; 2、Adding Parity to your list of Homebrew ‘kegs’ 打开终端，输入下面的命令，按enter。 brew tap paritytech/paritytech 3、Installing Parity 稳定版 brew install parity --stable 最新版 brew install parity 最新开发版 brew install parity --master 更新最新版本 brew update &amp;&amp; brew upgrade parity and brew reinstall parity 4、查看安装版本 liyuechun:~ yuechunli$ parity --version 二、设置chain spec PoA chain 需要设置一个创世区块。 { &nbsp; &quot;name&quot;: &quot;DemoPoA&quot;, &nbsp; &quot;engine&quot;: { &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;stepDuration&quot;: &quot;5&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;validators&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; }, &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &quot;gasLimitBoundDivisor&quot;: &quot;0x0400&quot;, &nbsp; &nbsp; &quot;maximumExtraDataSize&quot;: &quot;0x20&quot;, &nbsp; &nbsp; &quot;minGasLimit&quot;: &quot;0x1388&quot;, &nbsp; &nbsp; &quot;networkID&quot;: &quot;0x2323&quot; &nbsp; }, &nbsp; &quot;genesis&quot;: { &nbsp; &nbsp; &quot;seal&quot;: { &nbsp; &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;step&quot;: &quot;0x0&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;signature&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;difficulty&quot;: &quot;0x20000&quot;, &nbsp; &nbsp; &quot;gasLimit&quot;: &quot;0x5B8D80&quot; &nbsp; }, &nbsp; &quot;accounts&quot;: { &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000001&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ecrecover&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 3000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000002&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;sha256&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 60, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 12 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000003&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ripemd160&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 600, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 120 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000004&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;identity&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 15, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; } } stepDuration 设定成5秒产生一个区块。 validators 设定Authority的地方，目前先空著，后面创建account之后再回来填入。 将上面的文件保存到桌面的一个文件中，保存为demo-spec.json。 三、设置两个节点 在我们这篇文章中，我们在同一台电脑设置两个节点，跟我们讲解以太坊私网建立 (2) - 同一台电脑／不同电脑运行多个节点时，如果在同一台电脑设置两个节点，需要将rpcport和port设置为不同的值，否则就会发生冲突，POA chain中也是一样，需要将一些参数设置为不同的值。 -d：指定存储资料与账号的目录 --dport：指定Parity的network port，可用来让其他node连接 --jsonrpc-port：这是JSON RPC port，使用web3.js时会需要 ui-port：Parity提供的Web-based UI port 可以用下列指令启动Parity node。 parity --chain demo-spec.json -d parity0 --port 30300&nbsp; --ui-port 8180&nbsp; --jsonrpc-port 8540 --jsonrpc-apis web3,eth,net,personal,parity,parity_set,traces,rpc,parity_accounts 除了打一长串的指令外，Parity也提供更为简洁的config档案设定方式，使用 --config 即可引用配置文件。 node0 使用如下配置文件 node0.toml： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8180 [websockets] port = 8456 node1 使用如下配置文件 node1.toml： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8181 [websockets] port = 8457 四、设置账号(Account) 我们总共需要设置三个账号，两个Authority和一个user账号。 第一步：首先启动node0 : parity --config node0.toml 启动 parity node0 打开网页http://localhost:8180，按照步骤创建一个用户账号。 新增Authority account，使用Restore功能，为了示范一致性，我们使用 node0 当作 pass phrase。 Recover account from recovery phrase 到目前为止我们已经完成node0的账号设置。 Authority account：0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e User account：0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC 第二步：设置node1的账号，启动parity --config node1.toml。步骤相同，连接到 http://localhost:8181 ，pass phrase使用 node1。 启动 node1 parity node1 这样就完成了node1的账号设置。 Authority account:0x00F9B30838ca40c8A53c672840acbDec6fCDb180 第三步：将Authority account 写入 demo-spec.json 文件 &quot;validators&quot;: { &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot;, &nbsp; &nbsp; &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; &nbsp; ] } 再将user account加入accounts，並给一些balance，后续可以使用。 &quot;0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC&quot;: { &nbsp; &quot;balance&quot;: &quot;10000000000000000000000&quot; } 完成后的demo-spec.json如下： { &nbsp; &quot;name&quot;: &quot;DemoPoA&quot;, &nbsp; &quot;engine&quot;: { &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;stepDuration&quot;: &quot;5&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;validators&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;list&quot;: [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; }, &nbsp; &quot;params&quot;: { &nbsp; &nbsp; &quot;gasLimitBoundDivisor&quot;: &quot;0x0400&quot;, &nbsp; &nbsp; &quot;maximumExtraDataSize&quot;: &quot;0x20&quot;, &nbsp; &nbsp; &quot;minGasLimit&quot;: &quot;0x1388&quot;, &nbsp; &nbsp; &quot;networkID&quot;: &quot;0x2323&quot; &nbsp; }, &nbsp; &quot;genesis&quot;: { &nbsp; &nbsp; &quot;seal&quot;: { &nbsp; &nbsp; &nbsp; &quot;authorityRound&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;step&quot;: &quot;0x0&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;signature&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;difficulty&quot;: &quot;0x20000&quot;, &nbsp; &nbsp; &quot;gasLimit&quot;: &quot;0x5B8D80&quot; &nbsp; }, &nbsp; &quot;accounts&quot;: { &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000001&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ecrecover&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 3000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000002&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;sha256&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 60, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 12 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000003&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;ripemd160&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 600, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 120 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;10000000000000000000000&quot; &nbsp; &nbsp; }, &nbsp; &nbsp; &quot;0x0000000000000000000000000000000000000004&quot;: { &nbsp; &nbsp; &nbsp; &quot;balance&quot;: &quot;1&quot;, &nbsp; &nbsp; &nbsp; &quot;builtin&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;identity&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &quot;pricing&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;linear&quot;: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;base&quot;: 15, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;word&quot;: 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; } } 五、启动Authority node 为了启动Authority node来产生区块，我们必须设定负责产生block的signer，分別是 node0 和 node1 account。 1、第一步，创建一个node.pwds文件，写入node0与node1的password，内容如下： node0 node1 2、第二步，在node0.toml文件中加入[account]及[mining]设置，如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8180 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; reseal_on_txs = &quot;none&quot; 3、第三步，在node1.toml文件中加入[account]及[mining]设置，如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] [ui] port = 8181 [websockets] port = 8457 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot; reseal_on_txs = &quot;none&quot; 4、第四步，Step 4 分別启动两个node parity --config node0.toml parity --config node1.toml 六、连接两个节点 使用Postman透过JSON RPC来测试。 1、第一步，Post下列JSON数据至 http://localhost:8540 以取得 node0 的enode资料 { &nbsp;&quot;jsonrpc&quot;:&quot;2.0&quot;, &nbsp;&quot;method&quot;:&quot;parity_enode&quot;, &nbsp;&quot;params&quot;:[], &nbsp;&quot;id&quot;:0 } 获取到的数据如下： { &nbsp; &nbsp; &quot;jsonrpc&quot;: &quot;2.0&quot;, &nbsp; &nbsp; &quot;result&quot;: &quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;, &nbsp; &nbsp; &quot;id&quot;: 0 } &quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;是node0的标识。下一步中我们将将它加入到node1中以实现两个节点之间的连接。 2、第二步，将 node0 的enode加入 node1 ，Post下列JSONs数据至node1 (http://localhost:8541 ) { &nbsp;&quot;jsonrpc&quot;:&quot;2.0&quot;, &nbsp;&quot;method&quot;:&quot;parity_addReservedPeer&quot;, &nbsp;&quot;params&quot;:[&quot;enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300&quot;], &nbsp;&quot;id&quot;:0 } 返回的数据如下，result为true，说明连接成功： { &nbsp; &nbsp; &quot;jsonrpc&quot;: &quot;2.0&quot;, &nbsp; &nbsp; &quot;result&quot;: true, &nbsp; &nbsp; &quot;id&quot;: 0 } 再切换到node1的终端，会看到下面的数据： 1/25 peers&nbsp; &nbsp;13 KiB chain 11 KiB db 0 bytes queue 10 KiB sync&nbsp; RPC:&nbsp; 0 conn,&nbsp; 0 req/s,&nbsp; 24 µs 连接成功。 七、发送交易 在我们这个案例中，我们一个创建了三个账号，一个用户账号，两个POA账号，刚开始的时候我们为用户账号初始化了10000 ETH。如 账号与账号之间可以相互转账。 八、分享给其他节点 在开发时通常会将node跑在server上，让其他人可以通过JSON RPC port连接上去使用，此时只要在config文件里面加入 [interface] 设置即可。 假设server ip为192.168.1.5，将 node0.toml 修改如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity0&quot; [network] port = 30300 [rpc] port = 8540 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] interface = &quot;192.168.1.5&quot; [ui] port = 8180 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&quot; reseal_on_txs = &quot;none&quot; node1.toml 修改如下： [parity] chain = &quot;demo-spec.json&quot; base_path = &quot;parity1&quot; [network] port = 30301 [rpc] port = 8541 apis = [&quot;web3&quot;, &quot;eth&quot;, &quot;net&quot;, &quot;personal&quot;, &quot;parity&quot;, &quot;parity_set&quot;, &quot;traces&quot;, &quot;rpc&quot;, &quot;parity_accounts&quot;] interface = &quot;192.168.1.5&quot; [ui] port = 8181 [websockets] port = 8457 [account] password = [&quot;node.pwds&quot;] [mining] engine_signer = &quot;0x00F9B30838ca40c8A53c672840acbDec6fCDb180&quot; reseal_on_txs = &quot;none&quot; 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/11/11/58cd6c46322bb38ec1da678f0655fd35.html","headline":"从零构建基于以太坊Ethereum钱包Parity联盟链","dateModified":"2017-11-11T00:00:00+08:00","datePublished":"2017-11-11T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/11/11/58cd6c46322bb38ec1da678f0655fd35.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>从零构建基于以太坊Ethereum钱包Parity联盟链</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p>以下内容，直接实战，开发人员不需要图解释，嘿嘿<img alt="大笑" src="http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif"></p> 
  <p><br></p> 先来看看，PoA Chain特点有
  <br> 有别于PoW（Proof-of-Work）需要解数学难题来产生block，PoA是依靠预设好的Authority nodes，负责产生block。
  <br> 可依照需求设定Authority node数量。
  <br> 可指定产生block的时间，例如收到交易的5秒后产生block。
  <br> 一般的Ethereum node也可以连接到PoA Chain，正常发起transactions，contracts等。
  <br>
  <br> 一、Parity钱包下载安装
  <br> Parity钱包下载安装https://parity.io。
  <br>
  <br> 如官网所示，The fastest and most secure way of interacting with the Ethereum blockchainParity是最快最安全的钱包。
  <br>
  <br>
  <br> 打开官网，我们看到有三种安装方式，第一种，直接下载安装，第二种，Brew安装，第三种，Docker安装。
  <br>
  <br>
  <br> 在我们案例中，我们通过Brew来进行安装。
  <br>
  <br>
  <br> 1、Getting Homebrew
  <br>
  <br>
  <br> /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
  <br> 2、Adding Parity to your list of Homebrew ‘kegs’
  <br>
  <br>
  <br> 打开终端，输入下面的命令，按enter。
  <br>
  <br>
  <br> brew tap paritytech/paritytech
  <br> 3、Installing Parity
  <br>
  <br>
  <br> 稳定版
  <br> brew install parity --stable
  <br> 最新版
  <br> brew install parity
  <br> 最新开发版
  <br> brew install parity --master
  <br> 更新最新版本
  <br> brew update &amp;&amp; brew upgrade parity
  <br> and
  <br>
  <br>
  <br> brew reinstall parity
  <br> 4、查看安装版本
  <br>
  <br>
  <br> liyuechun:~ yuechunli$ parity --version
  <br> 二、设置chain spec
  <br> PoA chain 需要设置一个创世区块。
  <br> {
  <br> &nbsp; "name": "DemoPoA",
  <br> &nbsp; "engine": {
  <br> &nbsp; &nbsp; "authorityRound": {
  <br> &nbsp; &nbsp; &nbsp; "params": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "stepDuration": "5",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "validators": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "list": [
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; }
  <br> &nbsp; },
  <br> &nbsp; "params": {
  <br> &nbsp; &nbsp; "gasLimitBoundDivisor": "0x0400",
  <br> &nbsp; &nbsp; "maximumExtraDataSize": "0x20",
  <br> &nbsp; &nbsp; "minGasLimit": "0x1388",
  <br> &nbsp; &nbsp; "networkID": "0x2323"
  <br> &nbsp; },
  <br> &nbsp; "genesis": {
  <br> &nbsp; &nbsp; "seal": {
  <br> &nbsp; &nbsp; &nbsp; "authorityRound": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "step": "0x0",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "signature": "0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "difficulty": "0x20000",
  <br> &nbsp; &nbsp; "gasLimit": "0x5B8D80"
  <br> &nbsp; },
  <br> &nbsp; "accounts": {
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000001": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "ecrecover",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 3000,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 0
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000002": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "sha256",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 60,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 12
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000003": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "ripemd160",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 600,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 120
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000004": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "identity",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 15,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 3
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; }
  <br> &nbsp; }
  <br> }
  <br> stepDuration 设定成5秒产生一个区块。
  <br> validators 设定Authority的地方，目前先空著，后面创建account之后再回来填入。
  <br> 将上面的文件保存到桌面的一个文件中，保存为demo-spec.json。
  <br>
  <br>
  <br> 三、设置两个节点
  <br> 在我们这篇文章中，我们在同一台电脑设置两个节点，跟我们讲解以太坊私网建立 (2) - 同一台电脑／不同电脑运行多个节点时，如果在同一台电脑设置两个节点，需要将rpcport和port设置为不同的值，否则就会发生冲突，POA chain中也是一样，需要将一些参数设置为不同的值。
  <br>
  <br>
  <br> -d：指定存储资料与账号的目录
  <br> --dport：指定Parity的network port，可用来让其他node连接
  <br> --jsonrpc-port：这是JSON RPC port，使用web3.js时会需要
  <br> ui-port：Parity提供的Web-based UI port
  <br> 可以用下列指令启动Parity node。
  <br>
  <br>
  <br> parity --chain demo-spec.json -d parity0 --port 30300&nbsp; --ui-port 8180&nbsp; --jsonrpc-port 8540 --jsonrpc-apis web3,eth,net,personal,parity,parity_set,traces,rpc,parity_accounts
  <br> 除了打一长串的指令外，Parity也提供更为简洁的config档案设定方式，使用 --config 即可引用配置文件。
  <br>
  <br>
  <br> node0 使用如下配置文件 node0.toml：
  <br> [parity]
  <br> chain = "demo-spec.json"
  <br> base_path = "parity0"
  <br> [network]
  <br> port = 30300
  <br> [rpc]
  <br> port = 8540
  <br> apis = ["web3", "eth", "net", "personal", "parity", "parity_set", "traces", "rpc", "parity_accounts"]
  <br> [ui]
  <br> port = 8180
  <br> [websockets]
  <br> port = 8456
  <br> node1 使用如下配置文件 node1.toml：
  <br> [parity]
  <br> chain = "demo-spec.json"
  <br> base_path = "parity1"
  <br> [network]
  <br> port = 30301
  <br> [rpc]
  <br> port = 8541
  <br> apis = ["web3", "eth", "net", "personal", "parity", "parity_set", "traces", "rpc", "parity_accounts"]
  <br> [ui]
  <br> port = 8181
  <br> [websockets]
  <br> port = 8457
  <br> 四、设置账号(Account)
  <br> 我们总共需要设置三个账号，两个Authority和一个user账号。
  <br>
  <br>
  <br> 第一步：首先启动node0 : parity --config node0.toml
  <br>
  <br>
  <br> 启动 parity node0
  <br>
  <br>
  <br> 打开网页http://localhost:8180，按照步骤创建一个用户账号。
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br> 新增Authority account，使用Restore功能，为了示范一致性，我们使用 node0 当作 pass phrase。
  <br> Recover account from recovery phrase
  <br>
  <br>
  <br> 到目前为止我们已经完成node0的账号设置。
  <br>
  <br>
  <br> Authority account：0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e
  <br> User account：0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC
  <br> 第二步：设置node1的账号，启动parity --config node1.toml。步骤相同，连接到 http://localhost:8181 ，pass phrase使用 node1。
  <br>
  <br>
  <br> 启动 node1
  <br>
  <br>
  <br> parity node1
  <br>
  <br>
  <br> 这样就完成了node1的账号设置。
  <br>
  <br>
  <br> Authority account:0x00F9B30838ca40c8A53c672840acbDec6fCDb180
  <br> 第三步：将Authority account 写入 demo-spec.json 文件
  <br>
  <br>
  <br> "validators": {
  <br> &nbsp; "list": [
  <br> &nbsp; &nbsp; "0x00F9B30838ca40c8A53c672840acbDec6fCDb180",
  <br> &nbsp; &nbsp; "0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e"
  <br> &nbsp; ]
  <br> }
  <br> 再将user account加入accounts，並给一些balance，后续可以使用。
  <br>
  <br>
  <br> "0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC": {
  <br> &nbsp; "balance": "10000000000000000000000"
  <br> }
  <br> 完成后的demo-spec.json如下：
  <br>
  <br>
  <br> {
  <br> &nbsp; "name": "DemoPoA",
  <br> &nbsp; "engine": {
  <br> &nbsp; &nbsp; "authorityRound": {
  <br> &nbsp; &nbsp; &nbsp; "params": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "stepDuration": "5",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "validators": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "list": [
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "0x00F9B30838ca40c8A53c672840acbDec6fCDb180",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e"
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; }
  <br> &nbsp; },
  <br> &nbsp; "params": {
  <br> &nbsp; &nbsp; "gasLimitBoundDivisor": "0x0400",
  <br> &nbsp; &nbsp; "maximumExtraDataSize": "0x20",
  <br> &nbsp; &nbsp; "minGasLimit": "0x1388",
  <br> &nbsp; &nbsp; "networkID": "0x2323"
  <br> &nbsp; },
  <br> &nbsp; "genesis": {
  <br> &nbsp; &nbsp; "seal": {
  <br> &nbsp; &nbsp; &nbsp; "authorityRound": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "step": "0x0",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "signature": "0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "difficulty": "0x20000",
  <br> &nbsp; &nbsp; "gasLimit": "0x5B8D80"
  <br> &nbsp; },
  <br> &nbsp; "accounts": {
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000001": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "ecrecover",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 3000,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 0
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000002": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "sha256",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 60,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 12
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000003": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "ripemd160",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 600,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 120
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "0x0064B0999c0142eE99aB0ceC054BAb53fe0a3EcC": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "10000000000000000000000"
  <br> &nbsp; &nbsp; },
  <br> &nbsp; &nbsp; "0x0000000000000000000000000000000000000004": {
  <br> &nbsp; &nbsp; &nbsp; "balance": "1",
  <br> &nbsp; &nbsp; &nbsp; "builtin": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "name": "identity",
  <br> &nbsp; &nbsp; &nbsp; &nbsp; "pricing": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "linear": {
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "base": 15,
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "word": 3
  <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; &nbsp; }
  <br> &nbsp; &nbsp; }
  <br> &nbsp; }
  <br> }
  <br> 五、启动Authority node
  <br> 为了启动Authority node来产生区块，我们必须设定负责产生block的signer，分別是 node0 和 node1 account。
  <br>
  <br>
  <br> 1、第一步，创建一个node.pwds文件，写入node0与node1的password，内容如下：
  <br>
  <br>
  <br> node0
  <br> node1
  <br> 2、第二步，在node0.toml文件中加入[account]及[mining]设置，如下：
  <br>
  <br>
  <br> [parity]
  <br> chain = "demo-spec.json"
  <br> base_path = "parity0"
  <br> [network]
  <br> port = 30300
  <br> [rpc]
  <br> port = 8540
  <br> apis = ["web3", "eth", "net", "personal", "parity", "parity_set", "traces", "rpc", "parity_accounts"]
  <br> [ui]
  <br> port = 8180
  <br> [account]
  <br> password = ["node.pwds"]
  <br> [mining]
  <br> engine_signer = "0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e"
  <br> reseal_on_txs = "none"
  <br> 3、第三步，在node1.toml文件中加入[account]及[mining]设置，如下：
  <br>
  <br>
  <br> [parity]
  <br> chain = "demo-spec.json"
  <br> base_path = "parity1"
  <br> [network]
  <br> port = 30301
  <br> [rpc]
  <br> port = 8541
  <br> apis = ["web3", "eth", "net", "personal", "parity", "parity_set", "traces", "rpc", "parity_accounts"]
  <br> [ui]
  <br> port = 8181
  <br> [websockets]
  <br> port = 8457
  <br> [account]
  <br> password = ["node.pwds"]
  <br> [mining]
  <br> engine_signer = "0x00F9B30838ca40c8A53c672840acbDec6fCDb180"
  <br> reseal_on_txs = "none"
  <br> 4、第四步，Step 4 分別启动两个node
  <br>
  <br>
  <br> parity --config node0.toml
  <br> parity --config node1.toml
  <br> 六、连接两个节点
  <br> 使用Postman透过JSON RPC来测试。
  <br>
  <br>
  <br> 1、第一步，Post下列JSON数据至 http://localhost:8540 以取得 node0 的enode资料
  <br>
  <br>
  <br> {
  <br> &nbsp;"jsonrpc":"2.0",
  <br> &nbsp;"method":"parity_enode",
  <br> &nbsp;"params":[],
  <br> &nbsp;"id":0
  <br> }
  <br>
  <br>
  <br>
  <br>
  <br> 获取到的数据如下：
  <br>
  <br>
  <br> {
  <br> &nbsp; &nbsp; "jsonrpc": "2.0",
  <br> &nbsp; &nbsp; "result": "enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300",
  <br> &nbsp; &nbsp; "id": 0
  <br> }
  <br> "enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300"是node0的标识。下一步中我们将将它加入到node1中以实现两个节点之间的连接。
  <br>
  <br>
  <br> 2、第二步，将 node0 的enode加入 node1 ，Post下列JSONs数据至node1 (http://localhost:8541 )
  <br>
  <br>
  <br> {
  <br> &nbsp;"jsonrpc":"2.0",
  <br> &nbsp;"method":"parity_addReservedPeer",
  <br> &nbsp;"params":["enode://cfb3af513da3a7a8138450f0dc01fa38cb2ac837744dc645038940287f4dce3f416f0e7e17fd10619a263c360d9324fd2dcd8753c4500fcc54cf84e076b39cd6@192.168.10.101:30300"],
  <br> &nbsp;"id":0
  <br> }
  <br>
  <br>
  <br>
  <br>
  <br> 返回的数据如下，result为true，说明连接成功：
  <br>
  <br>
  <br> {
  <br> &nbsp; &nbsp; "jsonrpc": "2.0",
  <br> &nbsp; &nbsp; "result": true,
  <br> &nbsp; &nbsp; "id": 0
  <br> }
  <br> 再切换到node1的终端，会看到下面的数据：
  <br>
  <br>
  <br> 1/25 peers&nbsp; &nbsp;13 KiB chain 11 KiB db 0 bytes queue 10 KiB sync&nbsp; RPC:&nbsp; 0 conn,&nbsp; 0 req/s,&nbsp; 24 µs
  <br>
  <br>
  <br>
  <br>
  <br> 连接成功。
  <br>
  <br>
  <br> 七、发送交易
  <br> 在我们这个案例中，我们一个创建了三个账号，一个用户账号，两个POA账号，刚开始的时候我们为用户账号初始化了10000 ETH。如
  <br>
  <br>
  <br> 账号与账号之间可以相互转账。
  <br>
  <br>
  <br> 八、分享给其他节点
  <br> 在开发时通常会将node跑在server上，让其他人可以通过JSON RPC port连接上去使用，此时只要在config文件里面加入 [interface] 设置即可。
  <br>
  <br>
  <br> 假设server ip为192.168.1.5，将 node0.toml 修改如下：
  <br>
  <br>
  <br> [parity]
  <br> chain = "demo-spec.json"
  <br> base_path = "parity0"
  <br> [network]
  <br> port = 30300
  <br> [rpc]
  <br> port = 8540
  <br> apis = ["web3", "eth", "net", "personal", "parity", "parity_set", "traces", "rpc", "parity_accounts"]
  <br> interface = "192.168.1.5"
  <br> [ui]
  <br> port = 8180
  <br> [account]
  <br> password = ["node.pwds"]
  <br> [mining]
  <br> engine_signer = "0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e"
  <br> reseal_on_txs = "none"
  <br> node1.toml 修改如下：
  <br>
  <br>
  <br> [parity]
  <br> chain = "demo-spec.json"
  <br> base_path = "parity1"
  <br> [network]
  <br> port = 30301
  <br> [rpc]
  <br> port = 8541
  <br> apis = ["web3", "eth", "net", "personal", "parity", "parity_set", "traces", "rpc", "parity_accounts"]
  <br> interface = "192.168.1.5"
  <br> [ui]
  <br> port = 8181
  <br> [websockets]
  <br> port = 8457
  <br> [account]
  <br> password = ["node.pwds"]
  <br> [mining]
  <br> engine_signer = "0x00F9B30838ca40c8A53c672840acbDec6fCDb180"
  <br> reseal_on_txs = "none" 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/welling_22/article/details/78508610,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/welling_22/article/details/78508610,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
