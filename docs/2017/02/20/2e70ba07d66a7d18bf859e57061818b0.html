<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>centos 7下 区块链 Hyperledger 的安装和部署 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="centos 7下 区块链 Hyperledger 的安装和部署" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="一、安装docker 执行代码如下：curl -sSL https://get.daocloud.io/docker | sh 安装完成后,查看安装情况： docker -v 修改docker服务配置, 服务配置的意思是 开启docker远程配置，如下： DOCKER_OPTS=&quot;$DOCKER_OPTS -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --api-cors-header=&#39;*&#39;&quot; 1 1 重启docker服务 sudo service docker restart 1 1 二、安装docker-compose 先安装Python-pip,具体安装步奏如下： 1.首先安装epel扩展源： sudo yum -y install epel-release 1 1 2.然后安装python-pip sudo yum -y install python-pip 1 1 3.安装完成后，清除以下缓存 cache sudo yum clean all 1 1 下面开始安装Docker-compose 1.安装docker-compose: curl -L https://get.daocloud.io/docker/compose/releases/download/1.9.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose 1 1 chmod +x /usr/local/bin/docker-compose 查看安装情况：&nbsp; 配置以下docker镜像加速，目的是下载镜像速度更快: curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://860eaa91.m.daocloud.io 1 1 重启docker服务: sudo service docker restart 2：下载镜像 docker pull yeasy/hyperledger-fabric-base:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-peer:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-orderer:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-ca:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/blockchain-explorer:latest \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-peer:0.8.1 hyperledger/fabric-peer \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-orderer:0.8.1 hyperledger/fabric-orderer \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-ca:0.8.1 hyperledger/fabric-ca \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-baseimage \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-ccenv:x86_64-1.0.0-snapshot-preview 3：设置网络 docker network create fabric_noops docker network create fabric_pbft 4：安装git yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 1 wget https://github.com/git/git/archive/v2 .3 .0 .zip unzip v2.3.0.zip$ cd git-2.3.0 make prefix=/usr/local/git all make prefix=/usr/local/git install vim /etc/profile 然后在文件的最后一行，添加下面的内容，然后保存退出。 export PATH=/usr/local/git/bin:$PATH 生效变量 source /etc/profile 查看版本 5：下载compose模板文件 git clone https://github.com/yeasy/docker-compose-files 进入 hyperledger/1.0 6：开始一个 MVE fabric cluster. docker-compose -f docker-compose.yml up 查看fabric cluster状态 这个地方，第一次执行时，可能他的ip地址会是172网段，所以不能用 需要重启所有容器 docker restart fabric-peer0 fabric-ca fabric-orderer 再次查看 现在网络状态正确了 7：开始测试chaincode hyperledger 1.0没得deploy，改成install和instantiate了 执行 docker exec -it fabric-peer0 bash 进入后 peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 这两步很可能会失败，比如报: Error: Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for test_cc - transaction not found test_cc/testchainid Error: Error endorsing chaincode: rpc error: code = 2 desc = Error installing chaincode code test_cc:1.0(chaincode /var/hyperledger/production/chaincodes/test_cc.1.0 exits) 这两个错误，需要把容器删除，重新创建 docker rm `docker ps -a -q` 反复几次直到提示： root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 2017-02-20 06:07:49.175 UTC [container] WriteGopathSrc -&gt; INFO 001 rootDirectory = /go/src 2017-02-20 06:07:49.176 UTC [container] WriteFolderToTarPackage -&gt; INFO 002 rootDirectory = /go/src Installed remotely response:&lt;status:200 payload:&quot;OK&quot; &gt;&nbsp; 2017-02-20 06:07:51.906 UTC [main] main -&gt; INFO 003 Exiting..... root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 2017-02-20 06:08:10.401 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc 2017-02-20 06:08:10.402 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc 2017-02-20 06:08:10.789 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 003 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;] 2017-02-20 06:08:10.790 UTC [main] main -&gt; INFO 004 Exiting..... root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode invoke -n test_cc -c &#39;{&quot;Args&quot;:[&quot;query&quot;,&quot;a&quot;]}&#39; 2017-02-20 06:08:49.241 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 001 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;] 2017-02-20 06:08:49.242 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 002 Invoke result: version:1 response:&lt;status:200 message:&quot;OK&quot; payload:&quot;100&quot; &gt; payload:&quot;\n #\216\315\261\351;\347\312\266PWVow\254\010-\027s\332\300=\206+\320w\333\3514\301\225p\0224\n(\002\004lccc\001\007test_cc\004\001\001\001\001\000\000\007test_cc\001\001a\004\001\001\001\001\000\000\032\010\010\310\001\032\003100&quot; endorsement:&lt;endorser:&quot;\n\007DEFAULT\022\232\007-----BEGIN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\n-----END -----\n&quot; signature:&quot;0D\002 HV\322\245\324\033\225i;\034\231\216\307\320\344)\374\004\001\276\003\351r\220\222\363\345\260\n\013XX\002 oXU\332\245\213\330\r~GX\261\244\265\265\331y\337\3708\356*\0313pXq\202\310\332\027\314&quot; &gt;&nbsp; 2017-02-20 06:08:49.242 UTC [main] main -&gt; INFO 003 Exiting..... 环境搭建成功 阅读更多" />
<meta property="og:description" content="一、安装docker 执行代码如下：curl -sSL https://get.daocloud.io/docker | sh 安装完成后,查看安装情况： docker -v 修改docker服务配置, 服务配置的意思是 开启docker远程配置，如下： DOCKER_OPTS=&quot;$DOCKER_OPTS -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --api-cors-header=&#39;*&#39;&quot; 1 1 重启docker服务 sudo service docker restart 1 1 二、安装docker-compose 先安装Python-pip,具体安装步奏如下： 1.首先安装epel扩展源： sudo yum -y install epel-release 1 1 2.然后安装python-pip sudo yum -y install python-pip 1 1 3.安装完成后，清除以下缓存 cache sudo yum clean all 1 1 下面开始安装Docker-compose 1.安装docker-compose: curl -L https://get.daocloud.io/docker/compose/releases/download/1.9.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose 1 1 chmod +x /usr/local/bin/docker-compose 查看安装情况：&nbsp; 配置以下docker镜像加速，目的是下载镜像速度更快: curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://860eaa91.m.daocloud.io 1 1 重启docker服务: sudo service docker restart 2：下载镜像 docker pull yeasy/hyperledger-fabric-base:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-peer:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-orderer:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-ca:0.8.1 \ &nbsp; &amp;&amp; docker pull yeasy/blockchain-explorer:latest \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-peer:0.8.1 hyperledger/fabric-peer \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-orderer:0.8.1 hyperledger/fabric-orderer \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-ca:0.8.1 hyperledger/fabric-ca \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-baseimage \ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-ccenv:x86_64-1.0.0-snapshot-preview 3：设置网络 docker network create fabric_noops docker network create fabric_pbft 4：安装git yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 1 wget https://github.com/git/git/archive/v2 .3 .0 .zip unzip v2.3.0.zip$ cd git-2.3.0 make prefix=/usr/local/git all make prefix=/usr/local/git install vim /etc/profile 然后在文件的最后一行，添加下面的内容，然后保存退出。 export PATH=/usr/local/git/bin:$PATH 生效变量 source /etc/profile 查看版本 5：下载compose模板文件 git clone https://github.com/yeasy/docker-compose-files 进入 hyperledger/1.0 6：开始一个 MVE fabric cluster. docker-compose -f docker-compose.yml up 查看fabric cluster状态 这个地方，第一次执行时，可能他的ip地址会是172网段，所以不能用 需要重启所有容器 docker restart fabric-peer0 fabric-ca fabric-orderer 再次查看 现在网络状态正确了 7：开始测试chaincode hyperledger 1.0没得deploy，改成install和instantiate了 执行 docker exec -it fabric-peer0 bash 进入后 peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 这两步很可能会失败，比如报: Error: Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for test_cc - transaction not found test_cc/testchainid Error: Error endorsing chaincode: rpc error: code = 2 desc = Error installing chaincode code test_cc:1.0(chaincode /var/hyperledger/production/chaincodes/test_cc.1.0 exits) 这两个错误，需要把容器删除，重新创建 docker rm `docker ps -a -q` 反复几次直到提示： root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 2017-02-20 06:07:49.175 UTC [container] WriteGopathSrc -&gt; INFO 001 rootDirectory = /go/src 2017-02-20 06:07:49.176 UTC [container] WriteFolderToTarPackage -&gt; INFO 002 rootDirectory = /go/src Installed remotely response:&lt;status:200 payload:&quot;OK&quot; &gt;&nbsp; 2017-02-20 06:07:51.906 UTC [main] main -&gt; INFO 003 Exiting..... root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 2017-02-20 06:08:10.401 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc 2017-02-20 06:08:10.402 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc 2017-02-20 06:08:10.789 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 003 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;] 2017-02-20 06:08:10.790 UTC [main] main -&gt; INFO 004 Exiting..... root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode invoke -n test_cc -c &#39;{&quot;Args&quot;:[&quot;query&quot;,&quot;a&quot;]}&#39; 2017-02-20 06:08:49.241 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 001 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;] 2017-02-20 06:08:49.242 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 002 Invoke result: version:1 response:&lt;status:200 message:&quot;OK&quot; payload:&quot;100&quot; &gt; payload:&quot;\n #\216\315\261\351;\347\312\266PWVow\254\010-\027s\332\300=\206+\320w\333\3514\301\225p\0224\n(\002\004lccc\001\007test_cc\004\001\001\001\001\000\000\007test_cc\001\001a\004\001\001\001\001\000\000\032\010\010\310\001\032\003100&quot; endorsement:&lt;endorser:&quot;\n\007DEFAULT\022\232\007-----BEGIN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\n-----END -----\n&quot; signature:&quot;0D\002 HV\322\245\324\033\225i;\034\231\216\307\320\344)\374\004\001\276\003\351r\220\222\363\345\260\n\013XX\002 oXU\332\245\213\330\r~GX\261\244\265\265\331y\337\3708\356*\0313pXq\202\310\332\027\314&quot; &gt;&nbsp; 2017-02-20 06:08:49.242 UTC [main] main -&gt; INFO 003 Exiting..... 环境搭建成功 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-02-20T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"一、安装docker 执行代码如下：curl -sSL https://get.daocloud.io/docker | sh 安装完成后,查看安装情况： docker -v 修改docker服务配置, 服务配置的意思是 开启docker远程配置，如下： DOCKER_OPTS=&quot;$DOCKER_OPTS -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --api-cors-header=&#39;*&#39;&quot; 1 1 重启docker服务 sudo service docker restart 1 1 二、安装docker-compose 先安装Python-pip,具体安装步奏如下： 1.首先安装epel扩展源： sudo yum -y install epel-release 1 1 2.然后安装python-pip sudo yum -y install python-pip 1 1 3.安装完成后，清除以下缓存 cache sudo yum clean all 1 1 下面开始安装Docker-compose 1.安装docker-compose: curl -L https://get.daocloud.io/docker/compose/releases/download/1.9.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose 1 1 chmod +x /usr/local/bin/docker-compose 查看安装情况：&nbsp; 配置以下docker镜像加速，目的是下载镜像速度更快: curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://860eaa91.m.daocloud.io 1 1 重启docker服务: sudo service docker restart 2：下载镜像 docker pull yeasy/hyperledger-fabric-base:0.8.1 \\ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-peer:0.8.1 \\ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-orderer:0.8.1 \\ &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-ca:0.8.1 \\ &nbsp; &amp;&amp; docker pull yeasy/blockchain-explorer:latest \\ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-peer:0.8.1 hyperledger/fabric-peer \\ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-orderer:0.8.1 hyperledger/fabric-orderer \\ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-ca:0.8.1 hyperledger/fabric-ca \\ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-baseimage \\ &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-ccenv:x86_64-1.0.0-snapshot-preview 3：设置网络 docker network create fabric_noops docker network create fabric_pbft 4：安装git yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 1 wget https://github.com/git/git/archive/v2 .3 .0 .zip unzip v2.3.0.zip$ cd git-2.3.0 make prefix=/usr/local/git all make prefix=/usr/local/git install vim /etc/profile 然后在文件的最后一行，添加下面的内容，然后保存退出。 export PATH=/usr/local/git/bin:$PATH 生效变量 source /etc/profile 查看版本 5：下载compose模板文件 git clone https://github.com/yeasy/docker-compose-files 进入 hyperledger/1.0 6：开始一个 MVE fabric cluster. docker-compose -f docker-compose.yml up 查看fabric cluster状态 这个地方，第一次执行时，可能他的ip地址会是172网段，所以不能用 需要重启所有容器 docker restart fabric-peer0 fabric-ca fabric-orderer 再次查看 现在网络状态正确了 7：开始测试chaincode hyperledger 1.0没得deploy，改成install和instantiate了 执行 docker exec -it fabric-peer0 bash 进入后 peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 这两步很可能会失败，比如报: Error: Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for test_cc - transaction not found test_cc/testchainid Error: Error endorsing chaincode: rpc error: code = 2 desc = Error installing chaincode code test_cc:1.0(chaincode /var/hyperledger/production/chaincodes/test_cc.1.0 exits) 这两个错误，需要把容器删除，重新创建 docker rm `docker ps -a -q` 反复几次直到提示： root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 2017-02-20 06:07:49.175 UTC [container] WriteGopathSrc -&gt; INFO 001 rootDirectory = /go/src 2017-02-20 06:07:49.176 UTC [container] WriteFolderToTarPackage -&gt; INFO 002 rootDirectory = /go/src Installed remotely response:&lt;status:200 payload:&quot;OK&quot; &gt;&nbsp; 2017-02-20 06:07:51.906 UTC [main] main -&gt; INFO 003 Exiting..... root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Args&quot;:[&quot;init&quot;,&quot;a&quot;,&quot;100&quot;,&quot;b&quot;,&quot;200&quot;]}&#39; 2017-02-20 06:08:10.401 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc 2017-02-20 06:08:10.402 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc 2017-02-20 06:08:10.789 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 003 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;] 2017-02-20 06:08:10.790 UTC [main] main -&gt; INFO 004 Exiting..... root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode invoke -n test_cc -c &#39;{&quot;Args&quot;:[&quot;query&quot;,&quot;a&quot;]}&#39; 2017-02-20 06:08:49.241 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 001 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;] 2017-02-20 06:08:49.242 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 002 Invoke result: version:1 response:&lt;status:200 message:&quot;OK&quot; payload:&quot;100&quot; &gt; payload:&quot;\\n #\\216\\315\\261\\351;\\347\\312\\266PWVow\\254\\010-\\027s\\332\\300=\\206+\\320w\\333\\3514\\301\\225p\\0224\\n(\\002\\004lccc\\001\\007test_cc\\004\\001\\001\\001\\001\\000\\000\\007test_cc\\001\\001a\\004\\001\\001\\001\\001\\000\\000\\032\\010\\010\\310\\001\\032\\003100&quot; endorsement:&lt;endorser:&quot;\\n\\007DEFAULT\\022\\232\\007-----BEGIN -----\\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\\n-----END -----\\n&quot; signature:&quot;0D\\002 HV\\322\\245\\324\\033\\225i;\\034\\231\\216\\307\\320\\344)\\374\\004\\001\\276\\003\\351r\\220\\222\\363\\345\\260\\n\\013XX\\002 oXU\\332\\245\\213\\330\\r~GX\\261\\244\\265\\265\\331y\\337\\3708\\356*\\0313pXq\\202\\310\\332\\027\\314&quot; &gt;&nbsp; 2017-02-20 06:08:49.242 UTC [main] main -&gt; INFO 003 Exiting..... 环境搭建成功 阅读更多","@type":"BlogPosting","url":"/2017/02/20/2e70ba07d66a7d18bf859e57061818b0.html","headline":"centos 7下 区块链 Hyperledger 的安装和部署","dateModified":"2017-02-20T00:00:00+08:00","datePublished":"2017-02-20T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2017/02/20/2e70ba07d66a7d18bf859e57061818b0.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>centos 7下 区块链 Hyperledger 的安装和部署</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">一、安装docker</span></p> 
  <p><span class="token lf" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span><span class="token lf" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">执行代码如下：</span><span class="token lf" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">curl -sSL <span class="token url" style="text-decoration:underline;"> https://get.daocloud.io/docker</span> | sh</span></p> 
  <p><span class="token lf" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">安装完成后,查看安装情况：</span></p> 
  <p><span class="token lf" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">docker -v</span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><img src="" alt=""><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span></p> 
  <ul style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;">
   <li>修改docker服务配置,</li>
   <li><span>服务配置的意思是 开启docker远程配置</span>，如下：</li>
  </ul>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">DOCKER_OPTS=<span class="hljs-string" style="color:rgb(0,136,0);">"$DOCKER_OPTS -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --api-cors-header='*'"</span></code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;">
   <li>重启docker服务</li>
  </ul>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">sudo service docker restart</code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <h3 id="二安装docker-compose" style="font-weight:100;color:rgb(85,85,85);font-family:'microsoft yahei';"> <a name="t3" style="color:rgb(12,137,207);"></a>二、安装docker-compose</h3> 
  <blockquote style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;"> 
   <p style="line-height:1.25;"> 先安装<a href="http://lib.csdn.net/base/python" rel="nofollow" class="replace_word" title="Python知识库" style="text-decoration:none;color:rgb(223,52,52);font-weight:bold;">Python</a>-pip,具体安装步奏如下：</p> 
  </blockquote> 
  <ul style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;">
   <li>1.首先安装epel扩展源：</li>
  </ul>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">sudo yum -y install epel-release</code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;">
   <li>2.然后安装python-pip</li>
  </ul>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">sudo yum -y install python-pip</code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;">
   <li>3.安装完成后，清除以下缓存 cache</li>
  </ul>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">sudo yum clean all</code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <blockquote style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;"> 
   <p style="line-height:1.25;"> 下面开始安装<a href="http://lib.csdn.net/base/docker" rel="nofollow" class="replace_word" title="Docker知识库" style="text-decoration:none;color:rgb(223,52,52);font-weight:bold;">Docker</a>-compose</p> 
  </blockquote> 
  <ul style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;">
   <li>1.安装docker-compose:</li>
  </ul>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">curl -L https://get.daocloud.io/docker/compose/releases/download/<span class="hljs-number" style="color:rgb(0,102,102);">1.9</span><span class="hljs-number" style="color:rgb(0,102,102);">.0</span>/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">chmod +x /usr/local/bin/docker-compose</code></pre> 
  <p></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;">查看安装情况：&nbsp;</span><br></span></p> 
  <img src="" alt="">
  <br>
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span></p> 
  <blockquote style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;"> 
   <p style="line-height:1.25;"> 配置以下docker镜像加速，目的是下载镜像速度更快:</p> 
  </blockquote> 
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://<span class="hljs-number" style="color:rgb(0,102,102);">860</span>eaa91.m.daocloud.io</code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
  </ul>
  <blockquote style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:14px;"> 
   <p style="line-height:1.25;"> 重启docker服务:</p> 
  </blockquote> 
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;">sudo service docker restart</code></pre>
  <br>
  <p></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">2：下载镜像</span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">docker pull yeasy/hyperledger-fabric-base:0.8.1 \<br> &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-peer:0.8.1 \<br> &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-orderer:0.8.1 \<br> &nbsp; &amp;&amp; docker pull yeasy/hyperledger-fabric-ca:0.8.1 \<br> &nbsp; &amp;&amp; docker pull yeasy/blockchain-explorer:latest \<br> &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-peer:0.8.1 hyperledger/fabric-peer \<br> &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-orderer:0.8.1 hyperledger/fabric-orderer \<br> &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-ca:0.8.1 hyperledger/fabric-ca \<br> &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-baseimage \<br> &nbsp; &amp;&amp; docker tag yeasy/hyperledger-fabric-base:0.8.1 hyperledger/fabric-ccenv:x86_64-1.0.0-snapshot-preview<br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">3：设置网络</span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">docker network create fabric_noops<br> docker network create fabric_pbft<br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">4：安装git</span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span></p>
  <pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:1.45;color:rgb(51,51,51);background-color:rgba(128,128,128,.0470588);border:1px solid rgba(128,128,128,.0745098);"><code class="language-python hljs has-numbering" style="display:block;background:transparent;color:inherit;font-family:'Source Code Pro', monospace;"> yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker</code></pre>
  <ul class="pre-numbering" style="width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);list-style:none;text-align:right;">
   <li>1</li>
   <li></li>
  </ul>
  <span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span> </span>wget https://github.com/git/git/archive/v2</span>
  <span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;">.3</span>
  <span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;">.0</span>
  <span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;">.zip</span> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>unzip v2</span><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;">.3</span><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;">.0</span><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;">.zip$ cd git-</span><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;">2.3</span><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;">.0</span><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>make prefix=/usr/local/git all</span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>make prefix=/usr/local/git install</span><br></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><br></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>vim /etc/profile</span></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>然后在文件的最后一行，添加下面的内容，然后保存退出。</span></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>export PATH=/usr/local/git/bin:$PATH</span><br></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>生效变量</span></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>source /etc/profile</span><br></span></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span></span>查看版本</span></span></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span class="hljs-number" style="color:rgb(0,102,102);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Source Code Pro', monospace;font-size:14px;"><img src="" alt=""><br></span></span></span></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">5：下载compose模板文件</span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><code class="java plain" style="font-size:14px;background:none !important;border:0px !important;line-height:1.1em !important;overflow:visible !important;vertical-align:baseline !important;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;min-height:auto !important;">git clone https:</code><code class="java comments" style="font-size:14px;background:none !important;border:0px !important;line-height:1.1em !important;overflow:visible !important;vertical-align:baseline !important;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;min-height:auto !important;color:rgb(0,130,0) !important;">//github.com/yeasy/docker-compose-files</code><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">进入 <span style="color:rgb(51,51,51);font-family:'宋体';font-size:14px;background-color:rgb(249,249,249);"> hyperledger/1.0</span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">6：开始一个 MVE fabric cluster.</span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">docker-compose -f docker-compose.yml up<br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">查看<span style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">fabric cluster状态</span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><img src="" alt=""><br></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">这个地方，第一次执行时，可能他的ip地址会是172网段，所以不能用</span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">需要重启所有容器</span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><span style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">docker restart fabric-peer0 fabric-ca fabric-orderer</span></span></p> 
  <p><span style="font-family:'microsoft yahei';color:#5a5a5a;"><span style="font-size:18px;">再次查看</span></span></p> 
  <p><span style="font-family:'microsoft yahei';color:#5a5a5a;"><span style="font-size:18px;"><img src="" alt=""><br></span></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">现在网络状态正确了</span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;">7：开始测试chaincode</span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">hyperledger 1.0没得deploy，改成install和instantiate了</span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">执行</span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">docker exec -it fabric-peer0 bash<br></span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">进入后</span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{"Args":["init","a","100","b","200"]}'<br></span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;"><br></span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{"Args":["init","a","100","b","200"]}'<br></span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">这两步很可能会失败，比如报:</span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">Error: Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for test_cc - transaction not found test_cc/testchainid<br></span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;"><br></span></span></p> 
  <p><span><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;font-size:14px;">Error: Error endorsing chaincode: rpc error: code = 2 desc = Error installing chaincode code test_cc:1.0(chaincode /var/hyperledger/production/chaincodes/test_cc.1.0 exits)<br></span></span></p> 
  <p><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;"><span style="font-size:14px;">这两个错误，需要把容器删除，重新创建</span></span></p> 
  <p><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;"><span style="font-size:14px;"></span></span></p> 
  <pre><code class="language-ruby"><code style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">docker rm `docker ps -a -q`</span></code></code></pre> 反复几次直到提示： 
  <p></p> 
  <p><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;"><span style="font-size:14px;">root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;install -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{"Args":["init","a","100","b","200"]}'<br> 2017-02-20 06:07:49.175 UTC [container] WriteGopathSrc -&gt; INFO 001 rootDirectory = /go/src<br> 2017-02-20 06:07:49.176 UTC [container] WriteFolderToTarPackage -&gt; INFO 002 rootDirectory = /go/src<br> Installed remotely response:&lt;status:200 payload:"OK" &gt;&nbsp;<br> 2017-02-20 06:07:51.906 UTC [main] main -&gt; INFO 003 Exiting.....<br> root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode &nbsp;instantiate -v 1.0 -n test_cc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{"Args":["init","a","100","b","200"]}'<br> 2017-02-20 06:08:10.401 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc<br> 2017-02-20 06:08:10.402 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc<br> 2017-02-20 06:08:10.789 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 003 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;]<br> 2017-02-20 06:08:10.790 UTC [main] main -&gt; INFO 004 Exiting.....<br> root@peer0:/go/src/github.com/hyperledger/fabric# peer chaincode invoke -n test_cc -c '{"Args":["query","a"]}'<br> 2017-02-20 06:08:49.241 UTC [SW_BCCSP] createKeyStoreIfNotExists -&gt; INFO 001 KeyStore path [/tmp] missing [true]: [&lt;clean&gt;]<br> 2017-02-20 06:08:49.242 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 002 Invoke result: version:1 response:&lt;status:200 message:"OK" payload:"100" &gt; payload:"\n #\216\315\261\351;\347\312\266PWVow\254\010-\027s\332\300=\206+\320w\333\3514\301\225p\0224\n(\002\004lccc\001\007test_cc\004\001\001\001\001\000\000\007test_cc\001\001a\004\001\001\001\001\000\000\032\010\010\310\001\032\003100" endorsement:&lt;endorser:"\n\007DEFAULT\022\232\007-----BEGIN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\n-----END -----\n" signature:"0D\002 HV\322\245\324\033\225i;\034\231\216\307\320\344)\374\004\001\276\003\351r\220\222\363\345\260\n\013XX\002 oXU\332\245\213\330\r~GX\261\244\265\265\331y\337\3708\356*\0313pXq\202\310\332\027\314" &gt;&nbsp;<br> 2017-02-20 06:08:49.242 UTC [main] main -&gt; INFO 003 Exiting.....<br></span></span></p> 
  <p><br></p> 
  <p>环境搭建成功</p> 
  <p><span style="font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;"><span style="font-size:14px;"><br></span></span></p> 
  <p><span class="token p"><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span></p> 
  <p><span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span></p> 
  <span class="token lf" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"></span> 
  <div>
   <span class="token p" style="color:rgb(90,90,90);font-family:'microsoft yahei';font-size:18px;"><br></span>
  </div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/yezaihong1982/article/details/56012805,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/yezaihong1982/article/details/56012805,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
