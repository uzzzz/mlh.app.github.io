<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>区块链开发（十二）公有链、联盟链、私有链及网络配置介绍 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="区块链开发（十二）公有链、联盟链、私有链及网络配置介绍" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="以太坊网络 去中心化共识的基础是参与节点的点对点网络，节点维护并保证区块链网络的安全。参见挖矿。 以太坊网络数据统计 EthStats.net是以太坊网络实时数据的仪表板，这个仪表板展示重要信息，诸如现在的区块，散表难度，gas价格和gas花费等。页面上显示的节点只是精选了网络上的实际节点。任何人都可以在EthStats仪表板上添加他们的节点。Github上的Eth-Netstats README描述了如何连接。 EtherNodes.com展示了节点数的当前和历史数据以及以太坊主网络和Morden测试网络上的其他信息。 当前实时网络上客户端实现分配 – EtherChain上的实时数据。 公有链、私有链和联盟链 当今大多数以太坊项目都依靠以太坊作为公有链，公有链可以访问到更多用户，网络节点，货币和市场。然而通常有理由更偏好私有链或联盟链（在一群值得信任的参与者中）。例如，银行领域的很多公司都希望以太坊作为他们私有链的平台。 以下是博客发文《关于公有链和私有链》的摘录，它解释了三种区块链在许可方面的区别： 公有链：世界上所有人都可以阅读和发送交易。如果他们合法都有希望看到自己被包括在内。世界上任何人都能参与到共识形成过程——决定在链条上添加什么区块以及现状是怎样的。作为中心化或准中心化信任的替代品，公有链受加密经济的保护，加密经济是经济激励和加密图形验证的结合，用类似工作量证明或权益证明的机制，遵循的总原则是人们影响共识形成的程度和他们能够影响的经济资源数量成正比。这类区块链通常被认为是“完全去中心化“。 联盟链：共识形成过程由预先选择的一系列的节点所掌控，例如，设想一个有15个金融机构的团体，每个机构都操作一个节点，为了使区块生效，其中的10个必须签署那个区块。阅读区块链的权利可能是公开的，或仅限于参与者，也有混合的路径，比如区块的根散表和应用程序编程接口一起公开，使公共成员可以进行一定量的查询，重获一部分区块链状态的加密图形证明。这类区块链被认为是“部分去中心化”。 私有链：书写许可对一个组织保持中心化。阅读许可可能是公开的或者限制在任意程度。应用很可能包含对单个公司内部的数据库管理，审查等，因此公共的可读性在很多情况下根本不必要，但在另一些情况下人们又想要公共可读性。 私有链/联盟链可能和公有链毫无联系，他们仍然通过投资以太坊软件开发，对以太坊整体生态系统有利。经过一段时间，这会转变成软件改善，知识共享和工作机会。 如何连接 Geth会持续尝试在网络上连接到其他节点，直到有了端点为止。如果你在路由器上有可用的UPnP或者在面向因特网的服务器上运行以太坊，它也会接受其他节点的连接。 Geth通过发现协议找到对等端。在发现协议中，节点互相闲聊发现网络上的其他节点。最开始，geth会使用一系列辅助程序节点，这些辅助程序节点的端点记录在源代码中。 检查连接和ENODE身份 要检查客户端在交互控制台上连接了多少对等端点，net模块有两个属性可以提供信息，告诉你对等端点的数量以及你是否在监听的节点。 &gt; net.listening true &gt; net.peerCount 4 了解更多关于连接对等端点的信息，比如IP地址、端口号和支持协议，用管理员对象的peers()功能。admin.peers()会返回到现在已连接的对等端点列表。 &gt; admin.peers [{ ID: &#39;a4de274d3a159e10c2c9a68c326511236381b84c9ec52e72ad732eb0b2b1a2277938f78593cdbe734e6002bf23114d434a085d260514ab336d4acdc312db671b&#39;, Name: &#39;Geth/v0.9.14/linux/go1.4.2&#39;, Caps: &#39;eth/60&#39;, RemoteAddress: &#39;5.9.150.40:30301&#39;, LocalAddress: &#39;192.168.0.28:39219&#39; }, { ID: &#39;a979fb575495b8d6db44f750317d0f4622bf4c2aa3365d6af7c284339968eef29b69ad0dce72a4d8db5ebb4968de0e3bec910127f134779fbcb0cb6d3331163c&#39;, Name: &#39;Geth/v0.9.15/linux/go1.4.2&#39;, Caps: &#39;eth/60&#39;, RemoteAddress: &#39;52.16.188.185:30303&#39;, LocalAddress: &#39;192.168.0.28:50995&#39; }, { ID: &#39;f6ba1f1d9241d48138136ccf5baa6c2c8b008435a1c2bd009ca52fb8edbbc991eba36376beaee9d45f16d5dcbf2ed0bc23006c505d57ffcf70921bd94aa7a172&#39;, Name: &#39;pyethapp_dd52/v0.9.13/linux2/py2.7.9&#39;, Caps: &#39;eth/60, p2p/3&#39;, RemoteAddress: &#39;144.76.62.101:30303&#39;, LocalAddress: &#39;192.168.0.28:40454&#39; }, { ID: &#39;f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0&#39;, Name: &#39;++eth/Zeppelin/Rascal/v0.9.14/Release/Darwin/clang/int&#39;, Caps: &#39;eth/60, shh/2&#39;, RemoteAddress: &#39;129.16.191.64:30303&#39;, LocalAddress: &#39;192.168.0.28:39705&#39; } ] 更快下载区块链 启动以太坊客户端时，会自动下载以太坊区块链。用于下载以太坊区块链的时间会根据客户端、客户端设置、连接速度和可用的端点数量变化。下面是更快获取以太坊区块链的一些选项。 使用geth 如果你在用geth客户端，你可以做些什么来加速下载以太坊区块的时间。如果你用—fast标志来执行以太坊快速同步，不会保留过去的交易数据。 注意：你不能在执行所有或者部分正常的同步操作之后再使用这个标志，也就是说在用这个指令之前，不能下载以太坊区块链的任何部分。查看这个Ethereum Stack.Exchange answer了解更多。 下面是想要更快同步客户端时使用的一些标志。 –fast 这个标志使通过状态下载而不是下载整个区块数据来实现快速同步成为可能。这样也能大幅减少区块链尺寸。注意：–fast只在从头开始同步区块链，并且是出于安全原因第一次下载区块链时，才会运行。查看Reddit发文了解更多。 –cache=1024 分配到内部缓存的千兆内存（最少 16MB / 数据库）。默认是16MB，所以根据你电脑内存多少，增加到256, 512, 1024 (1GB)或者2048 (2GB)会带来不同。 –jitvm 这个标志可以激活JIT VM。 完整的控制台命令示例： geth --fast --cache=1024 --jitvm console 了解更多关于快速同步和区块链下载次数的讨论，查看这篇Reddit发文。 导出/导入区块链 如果你已经同步了整个以太坊节点，可以从完全同步的节点中导出区块链数据并将其导入新节点。你可以在geth中用geth export filename指令导出所有节点，并用geth import filename将区块链导入节点，来实现这一目的。 静态节点，信任节点和启动节点 Geth支持一个叫静态节点的特征，如果你有特定的端点，你会一直想与静态节点连接。如果断开连接，静态节点会再次连接。你可以配置永久性静态节点，方法是将如下所说的放进/static-nodes.json（这应该是和chaindata以及keystone在同一个文件夹） [ &quot;enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0@33.4.2.1:30303&quot;, &quot;enode://pubkey@ip:port&quot; ] 你也可以在运行期间通过Javascript使用admin.addPeer()加入静态节点。 &gt; admin.addPeer(&quot;enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae 连接的常见问题 有时候可能无法连接，最常见的原因有： 本地时间不正确。要参与到以太坊网络中，需要精确的时钟。检查OS如何同步时钟（例如sudo ntpdate -s time.nist.gov），即便只快了12秒也有可能导致0端点。 有的防火墙配置可能会阻止UDP流通。可以用静态节点功能或者控制台上的admin.addPeer() 来手动配置连接。 不使用发现协议来启动geth，你可以用—nodiscover参数。你只会在运行测试节点或有固定节点的实验测试网络时才想要这样做。 我们总结一下，如何连接其他节点，下面给出简单的方法： 可以通过admin.addPeer()方法连接到其他节点，两个节点要想联通，必须保证网络是相通的，并且要指定相同的networkid。 假设有两个节点：节点一和节点二，networkid都是1108，通过下面的步骤就可以从节点一连接到节点二。 首先要知道节点二的enode信息，在节点二的js console中执行下面的命令查看enode信息： &gt; admin.nodeInfo.enode &quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@[::]:30304&quot; 然后在节点一的js console中执行admin.addPeer()，就可以连接到节点二： &gt; admin.addPeer(&quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@127.0.0.1:30304&quot;) ddPeer()的参数就是节点二的enode信息，注意要把enode中的[::]替换成节点二的IP地址。连接成功后，节点二就会开始同步节点一的区块，同步完成后，任意一个节点开始挖矿，另一个节点会自动同步区块，向任意一个节点发送交易，另一个节点也会收到该笔交易。 通过admin.peers可以查看连接到的其他节点信息，通过net.peerCount可以查看已连接到的节点数量。 除了上面的方法，也可以在启动节点的时候指定–bootnodes选项连接到其他节点。 阅读更多" />
<meta property="og:description" content="以太坊网络 去中心化共识的基础是参与节点的点对点网络，节点维护并保证区块链网络的安全。参见挖矿。 以太坊网络数据统计 EthStats.net是以太坊网络实时数据的仪表板，这个仪表板展示重要信息，诸如现在的区块，散表难度，gas价格和gas花费等。页面上显示的节点只是精选了网络上的实际节点。任何人都可以在EthStats仪表板上添加他们的节点。Github上的Eth-Netstats README描述了如何连接。 EtherNodes.com展示了节点数的当前和历史数据以及以太坊主网络和Morden测试网络上的其他信息。 当前实时网络上客户端实现分配 – EtherChain上的实时数据。 公有链、私有链和联盟链 当今大多数以太坊项目都依靠以太坊作为公有链，公有链可以访问到更多用户，网络节点，货币和市场。然而通常有理由更偏好私有链或联盟链（在一群值得信任的参与者中）。例如，银行领域的很多公司都希望以太坊作为他们私有链的平台。 以下是博客发文《关于公有链和私有链》的摘录，它解释了三种区块链在许可方面的区别： 公有链：世界上所有人都可以阅读和发送交易。如果他们合法都有希望看到自己被包括在内。世界上任何人都能参与到共识形成过程——决定在链条上添加什么区块以及现状是怎样的。作为中心化或准中心化信任的替代品，公有链受加密经济的保护，加密经济是经济激励和加密图形验证的结合，用类似工作量证明或权益证明的机制，遵循的总原则是人们影响共识形成的程度和他们能够影响的经济资源数量成正比。这类区块链通常被认为是“完全去中心化“。 联盟链：共识形成过程由预先选择的一系列的节点所掌控，例如，设想一个有15个金融机构的团体，每个机构都操作一个节点，为了使区块生效，其中的10个必须签署那个区块。阅读区块链的权利可能是公开的，或仅限于参与者，也有混合的路径，比如区块的根散表和应用程序编程接口一起公开，使公共成员可以进行一定量的查询，重获一部分区块链状态的加密图形证明。这类区块链被认为是“部分去中心化”。 私有链：书写许可对一个组织保持中心化。阅读许可可能是公开的或者限制在任意程度。应用很可能包含对单个公司内部的数据库管理，审查等，因此公共的可读性在很多情况下根本不必要，但在另一些情况下人们又想要公共可读性。 私有链/联盟链可能和公有链毫无联系，他们仍然通过投资以太坊软件开发，对以太坊整体生态系统有利。经过一段时间，这会转变成软件改善，知识共享和工作机会。 如何连接 Geth会持续尝试在网络上连接到其他节点，直到有了端点为止。如果你在路由器上有可用的UPnP或者在面向因特网的服务器上运行以太坊，它也会接受其他节点的连接。 Geth通过发现协议找到对等端。在发现协议中，节点互相闲聊发现网络上的其他节点。最开始，geth会使用一系列辅助程序节点，这些辅助程序节点的端点记录在源代码中。 检查连接和ENODE身份 要检查客户端在交互控制台上连接了多少对等端点，net模块有两个属性可以提供信息，告诉你对等端点的数量以及你是否在监听的节点。 &gt; net.listening true &gt; net.peerCount 4 了解更多关于连接对等端点的信息，比如IP地址、端口号和支持协议，用管理员对象的peers()功能。admin.peers()会返回到现在已连接的对等端点列表。 &gt; admin.peers [{ ID: &#39;a4de274d3a159e10c2c9a68c326511236381b84c9ec52e72ad732eb0b2b1a2277938f78593cdbe734e6002bf23114d434a085d260514ab336d4acdc312db671b&#39;, Name: &#39;Geth/v0.9.14/linux/go1.4.2&#39;, Caps: &#39;eth/60&#39;, RemoteAddress: &#39;5.9.150.40:30301&#39;, LocalAddress: &#39;192.168.0.28:39219&#39; }, { ID: &#39;a979fb575495b8d6db44f750317d0f4622bf4c2aa3365d6af7c284339968eef29b69ad0dce72a4d8db5ebb4968de0e3bec910127f134779fbcb0cb6d3331163c&#39;, Name: &#39;Geth/v0.9.15/linux/go1.4.2&#39;, Caps: &#39;eth/60&#39;, RemoteAddress: &#39;52.16.188.185:30303&#39;, LocalAddress: &#39;192.168.0.28:50995&#39; }, { ID: &#39;f6ba1f1d9241d48138136ccf5baa6c2c8b008435a1c2bd009ca52fb8edbbc991eba36376beaee9d45f16d5dcbf2ed0bc23006c505d57ffcf70921bd94aa7a172&#39;, Name: &#39;pyethapp_dd52/v0.9.13/linux2/py2.7.9&#39;, Caps: &#39;eth/60, p2p/3&#39;, RemoteAddress: &#39;144.76.62.101:30303&#39;, LocalAddress: &#39;192.168.0.28:40454&#39; }, { ID: &#39;f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0&#39;, Name: &#39;++eth/Zeppelin/Rascal/v0.9.14/Release/Darwin/clang/int&#39;, Caps: &#39;eth/60, shh/2&#39;, RemoteAddress: &#39;129.16.191.64:30303&#39;, LocalAddress: &#39;192.168.0.28:39705&#39; } ] 更快下载区块链 启动以太坊客户端时，会自动下载以太坊区块链。用于下载以太坊区块链的时间会根据客户端、客户端设置、连接速度和可用的端点数量变化。下面是更快获取以太坊区块链的一些选项。 使用geth 如果你在用geth客户端，你可以做些什么来加速下载以太坊区块的时间。如果你用—fast标志来执行以太坊快速同步，不会保留过去的交易数据。 注意：你不能在执行所有或者部分正常的同步操作之后再使用这个标志，也就是说在用这个指令之前，不能下载以太坊区块链的任何部分。查看这个Ethereum Stack.Exchange answer了解更多。 下面是想要更快同步客户端时使用的一些标志。 –fast 这个标志使通过状态下载而不是下载整个区块数据来实现快速同步成为可能。这样也能大幅减少区块链尺寸。注意：–fast只在从头开始同步区块链，并且是出于安全原因第一次下载区块链时，才会运行。查看Reddit发文了解更多。 –cache=1024 分配到内部缓存的千兆内存（最少 16MB / 数据库）。默认是16MB，所以根据你电脑内存多少，增加到256, 512, 1024 (1GB)或者2048 (2GB)会带来不同。 –jitvm 这个标志可以激活JIT VM。 完整的控制台命令示例： geth --fast --cache=1024 --jitvm console 了解更多关于快速同步和区块链下载次数的讨论，查看这篇Reddit发文。 导出/导入区块链 如果你已经同步了整个以太坊节点，可以从完全同步的节点中导出区块链数据并将其导入新节点。你可以在geth中用geth export filename指令导出所有节点，并用geth import filename将区块链导入节点，来实现这一目的。 静态节点，信任节点和启动节点 Geth支持一个叫静态节点的特征，如果你有特定的端点，你会一直想与静态节点连接。如果断开连接，静态节点会再次连接。你可以配置永久性静态节点，方法是将如下所说的放进/static-nodes.json（这应该是和chaindata以及keystone在同一个文件夹） [ &quot;enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0@33.4.2.1:30303&quot;, &quot;enode://pubkey@ip:port&quot; ] 你也可以在运行期间通过Javascript使用admin.addPeer()加入静态节点。 &gt; admin.addPeer(&quot;enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae 连接的常见问题 有时候可能无法连接，最常见的原因有： 本地时间不正确。要参与到以太坊网络中，需要精确的时钟。检查OS如何同步时钟（例如sudo ntpdate -s time.nist.gov），即便只快了12秒也有可能导致0端点。 有的防火墙配置可能会阻止UDP流通。可以用静态节点功能或者控制台上的admin.addPeer() 来手动配置连接。 不使用发现协议来启动geth，你可以用—nodiscover参数。你只会在运行测试节点或有固定节点的实验测试网络时才想要这样做。 我们总结一下，如何连接其他节点，下面给出简单的方法： 可以通过admin.addPeer()方法连接到其他节点，两个节点要想联通，必须保证网络是相通的，并且要指定相同的networkid。 假设有两个节点：节点一和节点二，networkid都是1108，通过下面的步骤就可以从节点一连接到节点二。 首先要知道节点二的enode信息，在节点二的js console中执行下面的命令查看enode信息： &gt; admin.nodeInfo.enode &quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@[::]:30304&quot; 然后在节点一的js console中执行admin.addPeer()，就可以连接到节点二： &gt; admin.addPeer(&quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@127.0.0.1:30304&quot;) ddPeer()的参数就是节点二的enode信息，注意要把enode中的[::]替换成节点二的IP地址。连接成功后，节点二就会开始同步节点一的区块，同步完成后，任意一个节点开始挖矿，另一个节点会自动同步区块，向任意一个节点发送交易，另一个节点也会收到该笔交易。 通过admin.peers可以查看连接到的其他节点信息，通过net.peerCount可以查看已连接到的节点数量。 除了上面的方法，也可以在启动节点的时候指定–bootnodes选项连接到其他节点。 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/12/14/fff6d5158d6ec22ca105933b8a53e539.html" />
<meta property="og:url" content="https://mlh.app/2017/12/14/fff6d5158d6ec22ca105933b8a53e539.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-12-14T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"以太坊网络 去中心化共识的基础是参与节点的点对点网络，节点维护并保证区块链网络的安全。参见挖矿。 以太坊网络数据统计 EthStats.net是以太坊网络实时数据的仪表板，这个仪表板展示重要信息，诸如现在的区块，散表难度，gas价格和gas花费等。页面上显示的节点只是精选了网络上的实际节点。任何人都可以在EthStats仪表板上添加他们的节点。Github上的Eth-Netstats README描述了如何连接。 EtherNodes.com展示了节点数的当前和历史数据以及以太坊主网络和Morden测试网络上的其他信息。 当前实时网络上客户端实现分配 – EtherChain上的实时数据。 公有链、私有链和联盟链 当今大多数以太坊项目都依靠以太坊作为公有链，公有链可以访问到更多用户，网络节点，货币和市场。然而通常有理由更偏好私有链或联盟链（在一群值得信任的参与者中）。例如，银行领域的很多公司都希望以太坊作为他们私有链的平台。 以下是博客发文《关于公有链和私有链》的摘录，它解释了三种区块链在许可方面的区别： 公有链：世界上所有人都可以阅读和发送交易。如果他们合法都有希望看到自己被包括在内。世界上任何人都能参与到共识形成过程——决定在链条上添加什么区块以及现状是怎样的。作为中心化或准中心化信任的替代品，公有链受加密经济的保护，加密经济是经济激励和加密图形验证的结合，用类似工作量证明或权益证明的机制，遵循的总原则是人们影响共识形成的程度和他们能够影响的经济资源数量成正比。这类区块链通常被认为是“完全去中心化“。 联盟链：共识形成过程由预先选择的一系列的节点所掌控，例如，设想一个有15个金融机构的团体，每个机构都操作一个节点，为了使区块生效，其中的10个必须签署那个区块。阅读区块链的权利可能是公开的，或仅限于参与者，也有混合的路径，比如区块的根散表和应用程序编程接口一起公开，使公共成员可以进行一定量的查询，重获一部分区块链状态的加密图形证明。这类区块链被认为是“部分去中心化”。 私有链：书写许可对一个组织保持中心化。阅读许可可能是公开的或者限制在任意程度。应用很可能包含对单个公司内部的数据库管理，审查等，因此公共的可读性在很多情况下根本不必要，但在另一些情况下人们又想要公共可读性。 私有链/联盟链可能和公有链毫无联系，他们仍然通过投资以太坊软件开发，对以太坊整体生态系统有利。经过一段时间，这会转变成软件改善，知识共享和工作机会。 如何连接 Geth会持续尝试在网络上连接到其他节点，直到有了端点为止。如果你在路由器上有可用的UPnP或者在面向因特网的服务器上运行以太坊，它也会接受其他节点的连接。 Geth通过发现协议找到对等端。在发现协议中，节点互相闲聊发现网络上的其他节点。最开始，geth会使用一系列辅助程序节点，这些辅助程序节点的端点记录在源代码中。 检查连接和ENODE身份 要检查客户端在交互控制台上连接了多少对等端点，net模块有两个属性可以提供信息，告诉你对等端点的数量以及你是否在监听的节点。 &gt; net.listening true &gt; net.peerCount 4 了解更多关于连接对等端点的信息，比如IP地址、端口号和支持协议，用管理员对象的peers()功能。admin.peers()会返回到现在已连接的对等端点列表。 &gt; admin.peers [{ ID: &#39;a4de274d3a159e10c2c9a68c326511236381b84c9ec52e72ad732eb0b2b1a2277938f78593cdbe734e6002bf23114d434a085d260514ab336d4acdc312db671b&#39;, Name: &#39;Geth/v0.9.14/linux/go1.4.2&#39;, Caps: &#39;eth/60&#39;, RemoteAddress: &#39;5.9.150.40:30301&#39;, LocalAddress: &#39;192.168.0.28:39219&#39; }, { ID: &#39;a979fb575495b8d6db44f750317d0f4622bf4c2aa3365d6af7c284339968eef29b69ad0dce72a4d8db5ebb4968de0e3bec910127f134779fbcb0cb6d3331163c&#39;, Name: &#39;Geth/v0.9.15/linux/go1.4.2&#39;, Caps: &#39;eth/60&#39;, RemoteAddress: &#39;52.16.188.185:30303&#39;, LocalAddress: &#39;192.168.0.28:50995&#39; }, { ID: &#39;f6ba1f1d9241d48138136ccf5baa6c2c8b008435a1c2bd009ca52fb8edbbc991eba36376beaee9d45f16d5dcbf2ed0bc23006c505d57ffcf70921bd94aa7a172&#39;, Name: &#39;pyethapp_dd52/v0.9.13/linux2/py2.7.9&#39;, Caps: &#39;eth/60, p2p/3&#39;, RemoteAddress: &#39;144.76.62.101:30303&#39;, LocalAddress: &#39;192.168.0.28:40454&#39; }, { ID: &#39;f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0&#39;, Name: &#39;++eth/Zeppelin/Rascal/v0.9.14/Release/Darwin/clang/int&#39;, Caps: &#39;eth/60, shh/2&#39;, RemoteAddress: &#39;129.16.191.64:30303&#39;, LocalAddress: &#39;192.168.0.28:39705&#39; } ] 更快下载区块链 启动以太坊客户端时，会自动下载以太坊区块链。用于下载以太坊区块链的时间会根据客户端、客户端设置、连接速度和可用的端点数量变化。下面是更快获取以太坊区块链的一些选项。 使用geth 如果你在用geth客户端，你可以做些什么来加速下载以太坊区块的时间。如果你用—fast标志来执行以太坊快速同步，不会保留过去的交易数据。 注意：你不能在执行所有或者部分正常的同步操作之后再使用这个标志，也就是说在用这个指令之前，不能下载以太坊区块链的任何部分。查看这个Ethereum Stack.Exchange answer了解更多。 下面是想要更快同步客户端时使用的一些标志。 –fast 这个标志使通过状态下载而不是下载整个区块数据来实现快速同步成为可能。这样也能大幅减少区块链尺寸。注意：–fast只在从头开始同步区块链，并且是出于安全原因第一次下载区块链时，才会运行。查看Reddit发文了解更多。 –cache=1024 分配到内部缓存的千兆内存（最少 16MB / 数据库）。默认是16MB，所以根据你电脑内存多少，增加到256, 512, 1024 (1GB)或者2048 (2GB)会带来不同。 –jitvm 这个标志可以激活JIT VM。 完整的控制台命令示例： geth --fast --cache=1024 --jitvm console 了解更多关于快速同步和区块链下载次数的讨论，查看这篇Reddit发文。 导出/导入区块链 如果你已经同步了整个以太坊节点，可以从完全同步的节点中导出区块链数据并将其导入新节点。你可以在geth中用geth export filename指令导出所有节点，并用geth import filename将区块链导入节点，来实现这一目的。 静态节点，信任节点和启动节点 Geth支持一个叫静态节点的特征，如果你有特定的端点，你会一直想与静态节点连接。如果断开连接，静态节点会再次连接。你可以配置永久性静态节点，方法是将如下所说的放进/static-nodes.json（这应该是和chaindata以及keystone在同一个文件夹） [ &quot;enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0@33.4.2.1:30303&quot;, &quot;enode://pubkey@ip:port&quot; ] 你也可以在运行期间通过Javascript使用admin.addPeer()加入静态节点。 &gt; admin.addPeer(&quot;enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae 连接的常见问题 有时候可能无法连接，最常见的原因有： 本地时间不正确。要参与到以太坊网络中，需要精确的时钟。检查OS如何同步时钟（例如sudo ntpdate -s time.nist.gov），即便只快了12秒也有可能导致0端点。 有的防火墙配置可能会阻止UDP流通。可以用静态节点功能或者控制台上的admin.addPeer() 来手动配置连接。 不使用发现协议来启动geth，你可以用—nodiscover参数。你只会在运行测试节点或有固定节点的实验测试网络时才想要这样做。 我们总结一下，如何连接其他节点，下面给出简单的方法： 可以通过admin.addPeer()方法连接到其他节点，两个节点要想联通，必须保证网络是相通的，并且要指定相同的networkid。 假设有两个节点：节点一和节点二，networkid都是1108，通过下面的步骤就可以从节点一连接到节点二。 首先要知道节点二的enode信息，在节点二的js console中执行下面的命令查看enode信息： &gt; admin.nodeInfo.enode &quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@[::]:30304&quot; 然后在节点一的js console中执行admin.addPeer()，就可以连接到节点二： &gt; admin.addPeer(&quot;enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@127.0.0.1:30304&quot;) ddPeer()的参数就是节点二的enode信息，注意要把enode中的[::]替换成节点二的IP地址。连接成功后，节点二就会开始同步节点一的区块，同步完成后，任意一个节点开始挖矿，另一个节点会自动同步区块，向任意一个节点发送交易，另一个节点也会收到该笔交易。 通过admin.peers可以查看连接到的其他节点信息，通过net.peerCount可以查看已连接到的节点数量。 除了上面的方法，也可以在启动节点的时候指定–bootnodes选项连接到其他节点。 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/12/14/fff6d5158d6ec22ca105933b8a53e539.html","headline":"区块链开发（十二）公有链、联盟链、私有链及网络配置介绍","dateModified":"2017-12-14T00:00:00+08:00","datePublished":"2017-12-14T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/12/14/fff6d5158d6ec22ca105933b8a53e539.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>区块链开发（十二）公有链、联盟链、私有链及网络配置介绍</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p><strong>以太坊网络</strong> <br> 去中心化共识的基础是参与节点的点对点网络，节点维护并保证区块链网络的安全。参见挖矿。 <br> 以太坊网络数据统计 <br> EthStats.net是以太坊网络实时数据的仪表板，这个仪表板展示重要信息，诸如现在的区块，散表难度，gas价格和gas花费等。页面上显示的节点只是精选了网络上的实际节点。任何人都可以在EthStats仪表板上添加他们的节点。Github上的Eth-Netstats README描述了如何连接。 <br> EtherNodes.com展示了节点数的当前和历史数据以及以太坊主网络和Morden测试网络上的其他信息。 <br> 当前实时网络上客户端实现分配 – EtherChain上的实时数据。 <br> <strong>公有链、私有链和联盟链</strong> <br> 当今大多数以太坊项目都依靠以太坊作为公有链，公有链可以访问到更多用户，网络节点，货币和市场。然而通常有理由更偏好私有链或联盟链（在一群值得信任的参与者中）。例如，银行领域的很多公司都希望以太坊作为他们私有链的平台。 <br> 以下是博客发文《关于公有链和私有链》的摘录，它解释了三种区块链在许可方面的区别：</p> 
  <ul> 
   <li>公有链：世界上所有人都可以阅读和发送交易。如果他们合法都有希望看到自己被包括在内。世界上任何人都能参与到共识形成过程——决定在链条上添加什么区块以及现状是怎样的。作为中心化或准中心化信任的替代品，公有链受加密经济的保护，加密经济是经济激励和加密图形验证的结合，用类似工作量证明或权益证明的机制，遵循的总原则是人们影响共识形成的程度和他们能够影响的经济资源数量成正比。这类区块链通常被认为是“完全去中心化“。</li> 
   <li>联盟链：共识形成过程由预先选择的一系列的节点所掌控，例如，设想一个有15个金融机构的团体，每个机构都操作一个节点，为了使区块生效，其中的10个必须签署那个区块。阅读区块链的权利可能是公开的，或仅限于参与者，也有混合的路径，比如区块的根散表和应用程序编程接口一起公开，使公共成员可以进行一定量的查询，重获一部分区块链状态的加密图形证明。这类区块链被认为是“部分去中心化”。 <br> 私有链：书写许可对一个组织保持中心化。阅读许可可能是公开的或者限制在任意程度。应用很可能包含对单个公司内部的数据库管理，审查等，因此公共的可读性在很多情况下根本不必要，但在另一些情况下人们又想要公共可读性。</li> 
   <li>私有链/联盟链可能和公有链毫无联系，他们仍然通过投资以太坊软件开发，对以太坊整体生态系统有利。经过一段时间，这会转变成软件改善，知识共享和工作机会。 <br> <strong>如何连接</strong> <br> Geth会持续尝试在网络上连接到其他节点，直到有了端点为止。如果你在路由器上有可用的UPnP或者在面向因特网的服务器上运行以太坊，它也会接受其他节点的连接。 <br> Geth通过发现协议找到对等端。在发现协议中，节点互相闲聊发现网络上的其他节点。最开始，geth会使用一系列辅助程序节点，这些辅助程序节点的端点记录在源代码中。 <br> 检查连接和ENODE身份 <br> 要检查客户端在交互控制台上连接了多少对等端点，net模块有两个属性可以提供信息，告诉你对等端点的数量以及你是否在监听的节点。</li> 
  </ul> 
  <pre class="prettyprint"><code class=" hljs markdown"><span class="hljs-blockquote">&gt; net.listening</span>
true
<span class="hljs-blockquote">&gt; net.peerCount</span>
4</code></pre> 
  <p>了解更多关于连接对等端点的信息，比如IP地址、端口号和支持协议，用管理员对象的peers()功能。admin.peers()会返回到现在已连接的对等端点列表。</p> 
  <pre class="prettyprint"><code class=" hljs profile">&gt; <span class="hljs-filename">admin.peers [{ ID</span>: <span class="hljs-string">'a4de274d3a159e10c2c9a68c326511236381b84c9ec52e72ad732eb0b2b1a2277938f78593cdbe734e6002bf23114d434a085d260514ab336d4acdc312db671b'</span>,
Name: <span class="hljs-string">'Geth/v0.9.14/linux/go1.4.2'</span>,
Caps: <span class="hljs-string">'eth/60'</span>,
RemoteAddress: <span class="hljs-string">'5.9.150.40:30301'</span>,
LocalAddress: <span class="hljs-string">'192.168.0.28:39219'</span>
}, {<span class="hljs-built_in"> ID: <span class="hljs-string">'a979fb575495b8d6db44f750317d0f4622bf4c2aa3365d6af7c284339968eef29b69ad0dce72a4d8db5ebb4968de0e3bec910127f134779fbcb0cb6d3331163c'</span>, Name: <span class="hljs-string">'Geth/v0.9.15/linux/go1.4.2'</span>, Caps: <span class="hljs-string">'eth/60'</span>, RemoteAddress: <span class="hljs-string">'52.16.188.185:30303'</span>, LocalAddress: <span class="hljs-string">'192.168.0.28:50995'</span> }, { ID: <span class="hljs-string">'f6ba1f1d9241d48138136ccf5baa6c2c8b008435a1c2bd009ca52fb8edbbc991eba36376beaee9d45f16d5dcbf2ed0bc23006c505d57ffcf70921bd94aa7a172'</span>, Name: <span class="hljs-string">'pyethapp_dd52/v0.9.13/linux2/py2.7.9'</span>, Caps: <span class="hljs-string">'eth/60, p2p/3'</span>, RemoteAddress: <span class="hljs-string">'144.76.62.101:30303'</span>, LocalAddress: <span class="hljs-string">'192.168.0.28:40454'</span> }, { ID: <span class="hljs-string">'f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0'</span>, Name: <span class="hljs-string">'++eth/Zeppelin/Rascal/v0.9.14/Release/Darwin/clang/int'</span>, Caps: <span class="hljs-string">'eth/60, shh/2'</span>, RemoteAddress: <span class="hljs-string">'129.16.191.64:30303'</span>, LocalAddress: <span class="hljs-string">'192.168.0.28:39705'</span> } ]</span></code></pre> 
  <p><strong>更快下载区块链</strong> <br> 启动以太坊客户端时，会自动下载以太坊区块链。用于下载以太坊区块链的时间会根据客户端、客户端设置、连接速度和可用的端点数量变化。下面是更快获取以太坊区块链的一些选项。 <br> 使用geth <br> 如果你在用geth客户端，你可以做些什么来加速下载以太坊区块的时间。如果你用—fast标志来执行以太坊快速同步，不会保留过去的交易数据。 <br> 注意：你不能在执行所有或者部分正常的同步操作之后再使用这个标志，也就是说在用这个指令之前，不能下载以太坊区块链的任何部分。查看这个Ethereum Stack.Exchange answer了解更多。 <br> 下面是想要更快同步客户端时使用的一些标志。 <br> –fast <br> 这个标志使通过状态下载而不是下载整个区块数据来实现快速同步成为可能。这样也能大幅减少区块链尺寸。注意：–fast只在从头开始同步区块链，并且是出于安全原因第一次下载区块链时，才会运行。查看Reddit发文了解更多。 <br> –cache=1024 <br> 分配到内部缓存的千兆内存（最少 16MB / 数据库）。默认是16MB，所以根据你电脑内存多少，增加到256, 512, 1024 (1GB)或者2048 (2GB)会带来不同。 <br> –jitvm <br> 这个标志可以激活JIT VM。 <br> 完整的控制台命令示例：</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">fast</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">cache=1024</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">jitvm</span> <span class="hljs-comment">console</span></code></pre> 
  <p>了解更多关于快速同步和区块链下载次数的讨论，查看这篇Reddit发文。</p> 
  <p><strong>导出/导入区块链</strong> <br> 如果你已经同步了整个以太坊节点，可以从完全同步的节点中导出区块链数据并将其导入新节点。你可以在geth中用geth export filename指令导出所有节点，并用geth import filename将区块链导入节点，来实现这一目的。 <br> <strong>静态节点，信任节点和启动节点</strong> <br> Geth支持一个叫静态节点的特征，如果你有特定的端点，你会一直想与静态节点连接。如果断开连接，静态节点会再次连接。你可以配置永久性静态节点，方法是将如下所说的放进/static-nodes.json（这应该是和chaindata以及keystone在同一个文件夹）</p> 
  <pre class="prettyprint"><code class=" hljs json">[
<span class="hljs-string">"enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae2e826f293c481b5325f89be6d207b003382e18a8ecba66fbaf6416c0@33.4.2.1:30303"</span>,
<span class="hljs-string">"enode://pubkey@ip:port"</span>
]</code></pre> 
  <p>你也可以在运行期间通过Javascript使用admin.addPeer()加入静态节点。</p> 
  <pre class="prettyprint"><code class=" hljs markdown"><span class="hljs-blockquote">&gt; admin.addPeer("enode://f4642fa65af50cfdea8fa7414a5def7bb7991478b768e296f5e4a54e8b995de102e0ceae</span></code></pre> 
  <p>连接的常见问题 <br> 有时候可能无法连接，最常见的原因有：</p> 
  <ul> 
   <li>本地时间不正确。要参与到以太坊网络中，需要精确的时钟。检查OS如何同步时钟（例如sudo ntpdate -s time.nist.gov），即便只快了12秒也有可能导致0端点。</li> 
   <li>有的防火墙配置可能会阻止UDP流通。可以用静态节点功能或者控制台上的admin.addPeer() 来手动配置连接。</li> 
  </ul> 
  <p>不使用发现协议来启动geth，你可以用—nodiscover参数。你只会在运行测试节点或有固定节点的实验测试网络时才想要这样做。 <br> <strong>我们总结一下，如何连接其他节点，下面给出简单的方法：</strong> <br> 可以通过admin.addPeer()方法连接到其他节点，两个节点要想联通，必须保证网络是相通的，并且要指定相同的networkid。 <br> 假设有两个节点：节点一和节点二，networkid都是1108，通过下面的步骤就可以从节点一连接到节点二。 <br> 首先要知道节点二的enode信息，在节点二的js console中执行下面的命令查看enode信息：</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; admin<span class="hljs-preprocessor">.nodeInfo</span><span class="hljs-preprocessor">.enode</span>  
<span class="hljs-string">"enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672@[::]:30304"</span>  
</code></pre> 
  <p>然后在节点一的js console中执行admin.addPeer()，就可以连接到节点二：</p> 
  <pre class="prettyprint"><code class=" hljs perl">&gt; admin.addPeer(<span class="hljs-string">"enode://9e86289ea859ca041f235aed87a091d0cd594b377cbe13e1c5f5a08a8a280e62d4019ac54063ed6a1d0e3c3eaedad0b73c40b99a16a176993f0373ffe92be672<span class="hljs-variable">@127</span>.0.0.1:30304"</span>)  
</code></pre> 
  <p>ddPeer()的参数就是节点二的enode信息，注意要把enode中的[::]替换成节点二的IP地址。连接成功后，节点二就会开始同步节点一的区块，同步完成后，任意一个节点开始挖矿，另一个节点会自动同步区块，向任意一个节点发送交易，另一个节点也会收到该笔交易。 <br> 通过admin.peers可以查看连接到的其他节点信息，通过net.peerCount可以查看已连接到的节点数量。 <br> 除了上面的方法，也可以在启动节点的时候指定–bootnodes选项连接到其他节点。</p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jambeau/article/details/78805166,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jambeau/article/details/78805166,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
