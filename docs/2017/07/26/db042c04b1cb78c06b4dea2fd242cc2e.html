<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>docker下搭建三个节点 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="docker下搭建三个节点" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1 进入一个ubuntu容器后基础的准备 apt-get install python-software-properties apt-get install software-properties-common apt-get install vim 2安装solc add-apt-repository ppa:ethereum/ethereum apt-get update apt-get install solc 3 安装Geth客户端 有多种以太坊客户端，安装Go-ethereum输入以下命令： add-apt-repository -y ppa:ethereum/ethereum apt-get update apt-get install ethereum 4 开始创建节点，创建一个目录， mkdir private-geth cd private-geth vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 初始化初始块，进入geth平台 root@f2b5cdfdc5ed:/private-geth# geth --datadir ./data/00 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2220 --rpcport 3330 console （geth --datadir &quot;./&quot; --nodiscover console 2&gt;&gt;geth.log） 然后查看该节点的信息 { enode: &quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@[::]:2220&quot;, id: &quot;3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:2220&quot;, name: &quot;Geth/haha/v1.6.7-stable-ab5646c5/linux-amd64/go1.8.1&quot;, ports: { discovery: 2220, listener: 2220 }, protocols: { eth: { difficulty: 4357056, genesis: &quot;0x29a42341a89cace1a303a40ca106b875f0ea4113a6e0a39dbbc663e9dfb8fb3f&quot;, head: &quot;0x5163295934480c8b167698157ebe7e378c33f7a6fab0e19412947f65ca455f1a&quot;, network: 12345 } } } 查看ip root@f2b5cdfdc5ed:/# ip addr show 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 273: eth0@if274: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default link/ether 02:42:ac:12:00:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 172.18.0.4/16 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::42:acff:fe12:4/64 scope link valid_lft forever preferred_lft forever 第二个容器 ucsmy@QKTEST21191:~$ docker run -it --name ubuntublock1 -p 80:80 ebcd9d4fca80 docker: Error response from daemon: driver failed programming external connectivity on endpoint ubuntublock1 (da48c27d902362bd4678531c148e58df7c361a6e4fc61416ab8b4d97b435281b): Bind for 0.0.0.0:80 failed: port is already allocated. ``` ``` ucsmy@QKTEST21191:~$ docker run -it --name ubuntublock1 -p 82:82 ebcd9d4fca80 docker: Error response from daemon: Conflict. The name &quot;/ubuntublock1&quot; is already in use by container 8a76dface80ee116e383bbb486f06d4a2184029617f9be016bae95d7b174ed11. You have to remove (or rename) that container to be able to reuse that name.. See &#39;docker run --help&#39;. 但是查看的时候容器还是已经存在了 ucsmy@QKTEST21191:~$ docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 8a76dface80e ebcd9d4fca80 &quot;/bin/bash&quot; About a minute ago Created ubuntublock1 f2b5cdfdc5ed ebcd9d4fca80 &quot;/bin/bash&quot; 22 hours ago Up 22 hours 0.0.0.0:80-&gt;80/tcp ubuntublock 进入容器 docker attach ubuntublock1 开始搭建以太坊环境 root@03fb89fa98ec:/# apt-get install git Reading package lists... Done Building dependency tree Reading state information... Done E: Unable to locate package git 然后需要更新一下包 apt-get update 准备工作 apt-get install python-software-properties apt-get install software-properties-common apt-get install vim 安装geth add-apt-repository -y ppa:ethereum/ethereum apt-get update apt-get install ethereum mkdir private-geth cd private-geth vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 初始化geth并且进入geth geth --datadir ./data/01 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/01 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2221 --rpcport 3331 console admin.addPeer(&quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172.18.0.4:2220&quot;) 节点连接成功以后自动同步区块信息。 第三个容器 :/private-geth# geth --datadir ./data/00 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2222 --rpcport 3332 console admin.addPeer(&quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172.18.0.4:2220&quot;) 阅读更多" />
<meta property="og:description" content="1 进入一个ubuntu容器后基础的准备 apt-get install python-software-properties apt-get install software-properties-common apt-get install vim 2安装solc add-apt-repository ppa:ethereum/ethereum apt-get update apt-get install solc 3 安装Geth客户端 有多种以太坊客户端，安装Go-ethereum输入以下命令： add-apt-repository -y ppa:ethereum/ethereum apt-get update apt-get install ethereum 4 开始创建节点，创建一个目录， mkdir private-geth cd private-geth vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 初始化初始块，进入geth平台 root@f2b5cdfdc5ed:/private-geth# geth --datadir ./data/00 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2220 --rpcport 3330 console （geth --datadir &quot;./&quot; --nodiscover console 2&gt;&gt;geth.log） 然后查看该节点的信息 { enode: &quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@[::]:2220&quot;, id: &quot;3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:2220&quot;, name: &quot;Geth/haha/v1.6.7-stable-ab5646c5/linux-amd64/go1.8.1&quot;, ports: { discovery: 2220, listener: 2220 }, protocols: { eth: { difficulty: 4357056, genesis: &quot;0x29a42341a89cace1a303a40ca106b875f0ea4113a6e0a39dbbc663e9dfb8fb3f&quot;, head: &quot;0x5163295934480c8b167698157ebe7e378c33f7a6fab0e19412947f65ca455f1a&quot;, network: 12345 } } } 查看ip root@f2b5cdfdc5ed:/# ip addr show 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 273: eth0@if274: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default link/ether 02:42:ac:12:00:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 172.18.0.4/16 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::42:acff:fe12:4/64 scope link valid_lft forever preferred_lft forever 第二个容器 ucsmy@QKTEST21191:~$ docker run -it --name ubuntublock1 -p 80:80 ebcd9d4fca80 docker: Error response from daemon: driver failed programming external connectivity on endpoint ubuntublock1 (da48c27d902362bd4678531c148e58df7c361a6e4fc61416ab8b4d97b435281b): Bind for 0.0.0.0:80 failed: port is already allocated. ``` ``` ucsmy@QKTEST21191:~$ docker run -it --name ubuntublock1 -p 82:82 ebcd9d4fca80 docker: Error response from daemon: Conflict. The name &quot;/ubuntublock1&quot; is already in use by container 8a76dface80ee116e383bbb486f06d4a2184029617f9be016bae95d7b174ed11. You have to remove (or rename) that container to be able to reuse that name.. See &#39;docker run --help&#39;. 但是查看的时候容器还是已经存在了 ucsmy@QKTEST21191:~$ docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 8a76dface80e ebcd9d4fca80 &quot;/bin/bash&quot; About a minute ago Created ubuntublock1 f2b5cdfdc5ed ebcd9d4fca80 &quot;/bin/bash&quot; 22 hours ago Up 22 hours 0.0.0.0:80-&gt;80/tcp ubuntublock 进入容器 docker attach ubuntublock1 开始搭建以太坊环境 root@03fb89fa98ec:/# apt-get install git Reading package lists... Done Building dependency tree Reading state information... Done E: Unable to locate package git 然后需要更新一下包 apt-get update 准备工作 apt-get install python-software-properties apt-get install software-properties-common apt-get install vim 安装geth add-apt-repository -y ppa:ethereum/ethereum apt-get update apt-get install ethereum mkdir private-geth cd private-geth vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 初始化geth并且进入geth geth --datadir ./data/01 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/01 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2221 --rpcport 3331 console admin.addPeer(&quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172.18.0.4:2220&quot;) 节点连接成功以后自动同步区块信息。 第三个容器 :/private-geth# geth --datadir ./data/00 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2222 --rpcport 3332 console admin.addPeer(&quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172.18.0.4:2220&quot;) 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/07/26/db042c04b1cb78c06b4dea2fd242cc2e.html" />
<meta property="og:url" content="https://mlh.app/2017/07/26/db042c04b1cb78c06b4dea2fd242cc2e.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-07-26T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1 进入一个ubuntu容器后基础的准备 apt-get install python-software-properties apt-get install software-properties-common apt-get install vim 2安装solc add-apt-repository ppa:ethereum/ethereum apt-get update apt-get install solc 3 安装Geth客户端 有多种以太坊客户端，安装Go-ethereum输入以下命令： add-apt-repository -y ppa:ethereum/ethereum apt-get update apt-get install ethereum 4 开始创建节点，创建一个目录， mkdir private-geth cd private-geth vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 初始化初始块，进入geth平台 root@f2b5cdfdc5ed:/private-geth# geth --datadir ./data/00 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2220 --rpcport 3330 console （geth --datadir &quot;./&quot; --nodiscover console 2&gt;&gt;geth.log） 然后查看该节点的信息 { enode: &quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@[::]:2220&quot;, id: &quot;3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:2220&quot;, name: &quot;Geth/haha/v1.6.7-stable-ab5646c5/linux-amd64/go1.8.1&quot;, ports: { discovery: 2220, listener: 2220 }, protocols: { eth: { difficulty: 4357056, genesis: &quot;0x29a42341a89cace1a303a40ca106b875f0ea4113a6e0a39dbbc663e9dfb8fb3f&quot;, head: &quot;0x5163295934480c8b167698157ebe7e378c33f7a6fab0e19412947f65ca455f1a&quot;, network: 12345 } } } 查看ip root@f2b5cdfdc5ed:/# ip addr show 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 273: eth0@if274: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default link/ether 02:42:ac:12:00:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0 inet 172.18.0.4/16 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::42:acff:fe12:4/64 scope link valid_lft forever preferred_lft forever 第二个容器 ucsmy@QKTEST21191:~$ docker run -it --name ubuntublock1 -p 80:80 ebcd9d4fca80 docker: Error response from daemon: driver failed programming external connectivity on endpoint ubuntublock1 (da48c27d902362bd4678531c148e58df7c361a6e4fc61416ab8b4d97b435281b): Bind for 0.0.0.0:80 failed: port is already allocated. ``` ``` ucsmy@QKTEST21191:~$ docker run -it --name ubuntublock1 -p 82:82 ebcd9d4fca80 docker: Error response from daemon: Conflict. The name &quot;/ubuntublock1&quot; is already in use by container 8a76dface80ee116e383bbb486f06d4a2184029617f9be016bae95d7b174ed11. You have to remove (or rename) that container to be able to reuse that name.. See &#39;docker run --help&#39;. 但是查看的时候容器还是已经存在了 ucsmy@QKTEST21191:~$ docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 8a76dface80e ebcd9d4fca80 &quot;/bin/bash&quot; About a minute ago Created ubuntublock1 f2b5cdfdc5ed ebcd9d4fca80 &quot;/bin/bash&quot; 22 hours ago Up 22 hours 0.0.0.0:80-&gt;80/tcp ubuntublock 进入容器 docker attach ubuntublock1 开始搭建以太坊环境 root@03fb89fa98ec:/# apt-get install git Reading package lists... Done Building dependency tree Reading state information... Done E: Unable to locate package git 然后需要更新一下包 apt-get update 准备工作 apt-get install python-software-properties apt-get install software-properties-common apt-get install vim 安装geth add-apt-repository -y ppa:ethereum/ethereum apt-get update apt-get install ethereum mkdir private-geth cd private-geth vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 初始化geth并且进入geth geth --datadir ./data/01 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/01 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2221 --rpcport 3331 console admin.addPeer(&quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172.18.0.4:2220&quot;) 节点连接成功以后自动同步区块信息。 第三个容器 :/private-geth# geth --datadir ./data/00 init genesis.json geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 2222 --rpcport 3332 console admin.addPeer(&quot;enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172.18.0.4:2220&quot;) 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/07/26/db042c04b1cb78c06b4dea2fd242cc2e.html","headline":"docker下搭建三个节点","dateModified":"2017-07-26T00:00:00+08:00","datePublished":"2017-07-26T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/07/26/db042c04b1cb78c06b4dea2fd242cc2e.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>docker下搭建三个节点</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>1 进入一个ubuntu容器后基础的准备</p> 
  <pre class="prettyprint"><code class=" hljs lasso">apt<span class="hljs-attribute">-get</span> install python<span class="hljs-attribute">-software</span><span class="hljs-attribute">-properties</span>
 apt<span class="hljs-attribute">-get</span> install software<span class="hljs-attribute">-properties</span><span class="hljs-attribute">-common</span>
 apt<span class="hljs-attribute">-get</span>  install  vim </code></pre> 
  <p>2安装solc</p> 
  <pre class="prettyprint"><code class=" hljs lasso"> add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> ppa:ethereum/ethereum
 apt<span class="hljs-attribute">-get</span> update
 apt<span class="hljs-attribute">-get</span> install solc</code></pre> 
  <p>3 安装Geth客户端 <br> 有多种以太坊客户端，安装Go-ethereum输入以下命令：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">
 add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> <span class="hljs-attribute">-y</span> ppa:ethereum/ethereum
 apt<span class="hljs-attribute">-get</span> update
 apt<span class="hljs-attribute">-get</span> install ethereum</code></pre> 
  <p>4 开始创建节点，创建一个目录，</p> 
  <pre class="prettyprint"><code class=" hljs lasso">
mkdir <span class="hljs-keyword">private</span><span class="hljs-attribute">-geth</span>
cd <span class="hljs-keyword">private</span><span class="hljs-attribute">-geth</span>
vim genesis<span class="hljs-built_in">.</span>json

{
    <span class="hljs-string">"config"</span>: {
        <span class="hljs-string">"chainId"</span>: <span class="hljs-number">12345</span>,
        <span class="hljs-string">"homesteadBlock"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"eip155Block"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"eip158Block"</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-string">"coinbase"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"difficulty"</span> : <span class="hljs-string">"0x400"</span>,
    <span class="hljs-string">"extraData"</span> : <span class="hljs-string">"0x123456"</span>,
    <span class="hljs-string">"gasLimit"</span> : <span class="hljs-string">"0xffffffff"</span>,
    <span class="hljs-string">"nonce"</span> : <span class="hljs-string">"0x0000000000000042"</span>,
    <span class="hljs-string">"mixhash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"parentHash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"timestamp"</span> : <span class="hljs-string">"0x00"</span>,
    <span class="hljs-string">"alloc"</span>: { }
}
</code></pre> 
  <p>初始化初始块，进入geth平台</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">root@f2b5cdfdc5ed:/private</span><span class="hljs-literal">-</span><span class="hljs-comment">geth#</span>  <span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-string">.</span><span class="hljs-comment">/data/00</span> <span class="hljs-comment">init</span> <span class="hljs-comment">genesis</span><span class="hljs-string">.</span><span class="hljs-comment">json</span>

<span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">identity</span> <span class="hljs-comment">"haha"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-string">.</span><span class="hljs-comment">/data/00</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">networkid</span> <span class="hljs-comment">12345</span>  <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpcapi</span> <span class="hljs-comment">"db</span><span class="hljs-string">,</span><span class="hljs-comment">eth</span><span class="hljs-string">,</span><span class="hljs-comment">net</span><span class="hljs-string">,</span><span class="hljs-comment">web3"</span>  <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">port</span> <span class="hljs-comment">2220</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpcport</span> <span class="hljs-comment">3330</span> <span class="hljs-comment">console</span>


<span class="hljs-comment">（geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-comment">"</span><span class="hljs-string">.</span><span class="hljs-comment">/"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">nodiscover</span> <span class="hljs-comment">console</span> <span class="hljs-comment">2</span>&gt;&gt;<span class="hljs-comment">geth</span><span class="hljs-string">.</span><span class="hljs-comment">log）</span></code></pre> 
  <p>然后查看该节点的信息</p> 
  <pre class="prettyprint"><code class=" hljs css"><span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">enode</span>:<span class="hljs-value"> <span class="hljs-string">"enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@[::]:2220"</span>, id: <span class="hljs-string">"3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32"</span>, ip: <span class="hljs-string">"::"</span>, listenAddr: <span class="hljs-string">"[::]:2220"</span>, name: <span class="hljs-string">"Geth/haha/v1.6.7-stable-ab5646c5/linux-amd64/go1.8.1"</span>, ports: { discovery: <span class="hljs-number">2220</span>, listener: <span class="hljs-number">2220</span> </span></span></span>},
  <span class="hljs-tag">protocols</span>: <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">eth</span>:<span class="hljs-value"> { difficulty: <span class="hljs-number">4357056</span>, genesis: <span class="hljs-string">"0x29a42341a89cace1a303a40ca106b875f0ea4113a6e0a39dbbc663e9dfb8fb3f"</span>, head: <span class="hljs-string">"0x5163295934480c8b167698157ebe7e378c33f7a6fab0e19412947f65ca455f1a"</span>, network: <span class="hljs-number">12345</span> </span></span></span>}
  }
}</code></pre> 
  <p>查看ip</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">root@f2b5cdfdc5ed:/<span class="hljs-comment"># ip addr show</span>
<span class="hljs-number">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="hljs-number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="hljs-number">1</span>
    link/loopback <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> brd <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>
    inet <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/<span class="hljs-number">8</span> scope host lo
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span>
    inet6 ::<span class="hljs-number">1</span>/<span class="hljs-number">128</span> scope host 
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span>
<span class="hljs-number">273</span>: eth0@if274: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="hljs-number">1500</span> qdisc noqueue state UP group default 
    link/ether <span class="hljs-number">02</span>:<span class="hljs-number">42</span>:ac:<span class="hljs-number">12</span>:<span class="hljs-number">00</span>:<span class="hljs-number">04</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="hljs-number">0</span>
    inet <span class="hljs-number">172.18</span><span class="hljs-number">.0</span><span class="hljs-number">.4</span>/<span class="hljs-number">16</span> scope <span class="hljs-built_in">global</span> eth0
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span>
    inet6 fe80::<span class="hljs-number">42</span>:acff:fe12:<span class="hljs-number">4</span>/<span class="hljs-number">64</span> scope link 
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span>
</code></pre> 
  <p>第二个容器</p> 
  <pre class="prettyprint"><code class=" hljs applescript">ucsmy@QKTEST21191:~$ docker <span class="hljs-command">run</span> -<span class="hljs-keyword">it</span> <span class="hljs-comment">--name ubuntublock1 -p 80:80 ebcd9d4fca80</span>
docker: Error response <span class="hljs-keyword">from</span> daemon: driver failed programming external connectivity <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> endpoint ubuntublock1 (da48c27d902362bd4678531c148e58df7c361a6e4fc61416ab8b4d97b435281b): Bind <span class="hljs-keyword">for</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">80</span> failed: port <span class="hljs-keyword">is</span> already allocated.
 ```
 ```
ucsmy@QKTEST21191:~$ docker <span class="hljs-command">run</span> -<span class="hljs-keyword">it</span> <span class="hljs-comment">--name ubuntublock1 -p 82:82 ebcd9d4fca80</span>
docker: Error response <span class="hljs-keyword">from</span> daemon: Conflict. The <span class="hljs-property">name</span> <span class="hljs-string">"/ubuntublock1"</span> <span class="hljs-keyword">is</span> already <span class="hljs-keyword">in</span> use <span class="hljs-keyword">by</span> container <span class="hljs-number">8</span>a76dface80ee116e383bbb486f06d4a2184029617f9be016bae95d7b174ed11. You have <span class="hljs-keyword">to</span> remove (<span class="hljs-keyword">or</span> rename) <span class="hljs-keyword">that</span> container <span class="hljs-keyword">to</span> be able <span class="hljs-keyword">to</span> reuse <span class="hljs-keyword">that</span> <span class="hljs-property">name</span>..
See 'docker <span class="hljs-command">run</span> <span class="hljs-comment">--help'.</span></code></pre> 
  <pre class="prettyprint"><code class=" hljs ruby">但是查看的时候容器还是已经存在了
ucsmy<span class="hljs-variable">@QKTEST21191</span><span class="hljs-symbol">:~</span><span class="hljs-variable">$ </span>docker ps -a
<span class="hljs-constant">CONTAINER</span> <span class="hljs-constant">ID</span>        <span class="hljs-constant">IMAGE</span>                                                                                                                                      <span class="hljs-constant">COMMAND</span>                  <span class="hljs-constant">CREATED</span>              <span class="hljs-constant">STATUS</span>              <span class="hljs-constant">PORTS</span>                                                                    <span class="hljs-constant">NAMES</span>
<span class="hljs-number">8</span>a76dface80e        ebcd9d4fca8<span class="hljs-number">0</span>                                                                                                                               <span class="hljs-string">"/bin/bash"</span>              <span class="hljs-constant">About</span> a minute ago   <span class="hljs-constant">Created</span>                                                                                      ubuntublock1
f2b5cdfdc5ed        ebcd9d4fca8<span class="hljs-number">0</span>                                                                                                                               <span class="hljs-string">"/bin/bash"</span>              <span class="hljs-number">22</span> hours ago         <span class="hljs-constant">Up</span> <span class="hljs-number">22</span> hours         <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><span class="hljs-symbol">:</span><span class="hljs-number">80</span>-&gt;<span class="hljs-number">80</span>/tcp                                                       ubuntublock
</code></pre> 
  <p>进入容器</p> 
  <pre class="prettyprint"><code class=" hljs r">docker <span class="hljs-keyword">attach</span> ubuntublock1</code></pre> 
  <p>开始搭建以太坊环境</p> 
  <pre class="prettyprint"><code class=" hljs ruby">root<span class="hljs-variable">@03fb89fa98ec</span><span class="hljs-symbol">:/</span><span class="hljs-comment"># apt-get install git</span>
<span class="hljs-constant">Reading</span> package lists... <span class="hljs-constant">Done</span>
<span class="hljs-constant">Building</span> dependency tree       
<span class="hljs-constant">Reading</span> state information... <span class="hljs-constant">Done</span>
<span class="hljs-constant">E</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Unable</span> to locate package git</code></pre> 
  <p>然后需要更新一下包</p> 
  <pre class="prettyprint"><code class=" hljs cs">apt-<span class="hljs-keyword">get</span> update  </code></pre> 
  <p>准备工作</p> 
  <pre class="prettyprint"><code class=" hljs lasso">apt<span class="hljs-attribute">-get</span> install python<span class="hljs-attribute">-software</span><span class="hljs-attribute">-properties</span>
 apt<span class="hljs-attribute">-get</span> install software<span class="hljs-attribute">-properties</span><span class="hljs-attribute">-common</span>
 apt<span class="hljs-attribute">-get</span>  install  vim </code></pre> 
  <p>安装geth</p> 
  <pre class="prettyprint"><code class=" hljs lasso"> add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> <span class="hljs-attribute">-y</span> ppa:ethereum/ethereum
 apt<span class="hljs-attribute">-get</span> update
 apt<span class="hljs-attribute">-get</span> install ethereum</code></pre> 
  <pre class="prettyprint"><code class=" hljs lasso">mkdir <span class="hljs-keyword">private</span><span class="hljs-attribute">-geth</span>
cd <span class="hljs-keyword">private</span><span class="hljs-attribute">-geth</span>
vim genesis<span class="hljs-built_in">.</span>json

{
    <span class="hljs-string">"config"</span>: {
        <span class="hljs-string">"chainId"</span>: <span class="hljs-number">12345</span>,
        <span class="hljs-string">"homesteadBlock"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"eip155Block"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"eip158Block"</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-string">"coinbase"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"difficulty"</span> : <span class="hljs-string">"0x400"</span>,
    <span class="hljs-string">"extraData"</span> : <span class="hljs-string">"0x123456"</span>,
    <span class="hljs-string">"gasLimit"</span> : <span class="hljs-string">"0xffffffff"</span>,
    <span class="hljs-string">"nonce"</span> : <span class="hljs-string">"0x0000000000000042"</span>,
    <span class="hljs-string">"mixhash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"parentHash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"timestamp"</span> : <span class="hljs-string">"0x00"</span>,
    <span class="hljs-string">"alloc"</span>: { }
}
</code></pre> 
  <p>初始化geth并且进入geth </p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-string">.</span><span class="hljs-comment">/data/01</span> <span class="hljs-comment">init</span> <span class="hljs-comment">genesis</span><span class="hljs-string">.</span><span class="hljs-comment">json</span>

<span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">identity</span> <span class="hljs-comment">"haha"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-string">.</span><span class="hljs-comment">/data/01</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">networkid</span> <span class="hljs-comment">12345</span>  <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpcapi</span> <span class="hljs-comment">"db</span><span class="hljs-string">,</span><span class="hljs-comment">eth</span><span class="hljs-string">,</span><span class="hljs-comment">net</span><span class="hljs-string">,</span><span class="hljs-comment">web3"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">port</span> <span class="hljs-comment">2221</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpcport</span> <span class="hljs-comment">3331</span> <span class="hljs-comment">console</span>

<span class="hljs-comment">admin</span><span class="hljs-string">.</span><span class="hljs-comment">addPeer("enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172</span><span class="hljs-string">.</span><span class="hljs-comment">18</span><span class="hljs-string">.</span><span class="hljs-comment">0</span><span class="hljs-string">.</span><span class="hljs-comment">4:2220")</span></code></pre> 
  <p>节点连接成功以后自动同步区块信息。</p> 
  <p>第三个容器</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-symbol">:/private-geth</span><span class="hljs-comment"># geth --datadir ./data/00 init genesis.json </span>

geth --identity <span class="hljs-string">"haha"</span> --datadir ./data/<span class="hljs-number">00</span> --networkid <span class="hljs-number">12345</span>  --rpcapi <span class="hljs-string">"db,eth,net,web3"</span> --port <span class="hljs-number">2222</span> --rpcport <span class="hljs-number">3332</span> console


admin.addPeer(<span class="hljs-string">"enode://3452dd408cd4f1fb160725388579f28f2b0552ed63d5291a1e2615f60329355c296f00f6c61ddd671c429017b3e5ec6eb31304d5552aec817faa506507dcdc32@172.18.0.4:2220"</span>)</code></pre> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/76146013,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/76146013,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
