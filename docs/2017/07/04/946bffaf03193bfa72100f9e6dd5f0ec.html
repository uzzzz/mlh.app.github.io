<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>安装geth客户端并转账 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="安装geth客户端并转账" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="准备工作 安装git 输入以下命令安装Git： sudo apt-get install git 安装solc 输入以下命令安装solc： sudo npm install -g solc root@i-colbyo7v:/home/ubuntu# npm install -g solc /usr/local/node-v8.1.2-linux-x64/bin/solcjs -&gt; /usr/local/node-v8.1.2-linux-x64/lib/node_modules/solc/solcjs + solc@0.4.13 added 65 packages in 59.744s 我们就会发现在终端中输入solc命令返回一个出错信息。这是因为solc只是一个程序集，如果我们想要在终端中使用solc程序编译智能合约，则需要安装solc-cli，这是solc的命令行界面。 输入以下命令安装solc-cli: sudo npm install -g solc-cli root@i-colbyo7v:/home/ubuntu# npm install -g solc-cli /usr/local/node-v8.1.2-linux-x64/bin/solc -&gt; /usr/local/node-v8.1.2-linux-x64/lib/node_modules/solc-cli/dist/index.js npm WARN solc-cli@0.3.0 requires a peer of solc@^0.3.5 but none was installed. + solc-cli@0.3.0 added 20 packages in 18.604s 输入以下命令可以一并安装solc和solc-cli7（推荐使用此命令安装）： sudo npm install -g solc solc-cli --save-dev 如果输入solcjs --help命令，有以下输出，则表明solc和solc-cli安装成功： zcc@ubuntu:~$ solcjs --help Usage: solcjs [options] [input_file...] Options: --version Show version number [boolean] --optimize Enable bytecode optimizer. [boolean] --bin Binary of the contracts in hex. [boolean] --abi ABI of the contracts. [boolean] --interface Solidity Interface of the contracts. [boolean] --output-dir, -o Output directory for the contracts. [string] --help Show help [boolean] 到了这里，如果想以后的智能合约编译工作不使用geth控制台来完成，那么solc编译器就算安装完了。但是，如果我们需要在geth控制台使用solc编译器，那么我们仍然需要安装solc二进制包。输入以下命令安装solc二进制包8： sudo add-apt-repository ppa:ethereum/ethereum sudo apt-get update sudo apt-get install solc 安装Geth客户端 有多种以太坊客户端，安装Go-ethereum输入以下命令13： sudo apt-get install software-properties-common sudo add-apt-repository -y ppa:ethereum/ethereum sudo apt-get update sudo apt-get install ethereum ubuntu@i-5tthrr8u:~$ geth --help NAME: geth - the go-ethereum command line interface Copyright 2013-2017 The go-ethereum Authors USAGE: geth [options] command [command options] [arguments...] VERSION: 1.6.6-stable-10a45cb5 COMMANDS: init Bootstrap and initialize a new genesis block import Import a blockchain file export Export blockchain into file removedb Remove blockchain and state databases dump Dump a specific block from storage monitor Monitor and visualize node metrics account Manage accounts wallet Manage Ethereum presale wallets console Start an interactive JavaScript environment attach Start an interactive JavaScript environment (connect to node) js Execute the specified JavaScript files makedag Generate ethash DAG (for testing) version Print version numbers bug opens a window to report a bug on the geth repo license Display license information dumpconfig Show configuration values help, h Shows a list of commands or help for one command 下面开始建立私有以太坊网络: mkdir private-geth cd private-geth 建立创世纪区块文件,是一个json格式的文件: vim genesis.json 在创世纪区块的json文件中填入以下内容, 并保存. { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } mixhash：与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。. nonce: nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty: 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc: 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase: 矿工的账号，随便填 timestamp: 设置创世块的时间戳 parentHash: 上一个区块的hash值，因为是创世块，所以这个值是0 extraData: 附加信息，随便填，可以填你的个性信息，必须为十六进制的偶位字符串 gasLimit: 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 进入geth平台 root@i-5tthrr8u:/home/ubuntu/private-geth# geth --datadir ./data/00 init genesis.json WARN [07-02|17:02:11] No etherbase set and no accounts found as default INFO [07-02|17:02:11] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/chaindata cache=16 handles=16 INFO [07-02|17:02:11] Writing custom genesis block INFO [07-02|17:02:11] Successfully wrote genesis state database=chaindata hash=a0e580鈥5e82e INFO [07-02|17:02:11] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/lightchaindata cache=16 handles=16 INFO [07-02|17:02:11] Writing custom genesis block INFO [07-02|17:02:11] Successfully wrote genesis state database=lightchaindata hash=a0e580鈥5e82e root@i-5tthrr8u:/home/ubuntu/private-geth# geth --datadir ./data/00 --networkid 15 console WARN [07-02|17:02:37] No etherbase set and no accounts found as default INFO [07-02|17:02:37] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [07-02|17:02:37] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/chaindata cache=128 handles=1024 WARN [07-02|17:02:37] Upgrading chain database to use sequential keys INFO [07-02|17:02:37] Initialised chain configuration config=&quot;{ChainID: 15 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [07-02|17:02:37] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data/00/geth/ethash count=3 INFO [07-02|17:02:37] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [07-02|17:02:37] Upgrading db log bloom bins INFO [07-02|17:02:37] Bloom-bin upgrade completed elapsed=185.399碌s INFO [07-02|17:02:37] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=15 INFO [07-02|17:02:37] Database conversion successful INFO [07-02|17:02:37] Loaded most recent local header number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Loaded most recent local full block number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Loaded most recent local fast block number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Starting P2P networking INFO [07-02|17:02:39] UDP listener up self=enode://96f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:30303 INFO [07-02|17:02:39] RLPx listener up self=enode://96f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:30303 INFO [07-02|17:02:39] IPC endpoint opened: /home/ubuntu/private-geth/data/00/geth.ipc **Welcome to the Geth JavaScript console!** instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 61910 --rpcport 8200 console 各参数说明如下： identity ：区块链的标示，随便填写，用于标示目前网络的名字 init ：指定创世块文件的位置，并创建初始块 datadir ：设置当前区块链网络数据存放的位置 port：网络监听端口,默认是8080 rpc：启动rpc通信，可以进行智能合约的部署和调试。它在geth中通常被默认激活。 rpcapi： 设置允许连接的rpc的客户端，一般为db,eth,net,web3 networkid： 设置当前区块链的网络ID，用于区分不同的网络，是一个数字 console：启动命令行模式，可以在Geth中执行命令 此外，还可以使用如下参数： nodiscover : 使用这个命令可以确保你的节点不会被非手动添加你的人发现。否则，你的节点可能被陌生人的区块链无意添加，如果他和你有相同的初始文件和网络ID。 maxpeers : 如果你不希望其他人连接到你的测试链，可以使用maxpeers 0。反之，如果你确切知道希望多少人连接到你的节点，你也可以通过调整数字来实现。 rpcapi : 这个命令可以决定允许什么API通过RPC进入。在默认情况下，geth可以在RPC激活web3界面。请注意在RPC/IPC界面提供API，会使每个可以进入这个界面（例如dapp’s）的人都有权限访问这个API。注意你激活的是哪个API。Geth会默认激活IPC界面上所有的API，以及RPC界面上的db,eth,net和web3 API。 rpccorsdomain : 这个可以指示什么URL能连接到你的节点来执行RPC定制端任务。务必谨慎，输入一个特定的URL而不是wildcard ( * )，后者会使所有的URL都能连接到你的RPC实例。 创建新账户 &gt; personal.newAccount() Passphrase: Repeat passphrase: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot; &gt; INFO [07-02|17:02:57] New wallet appeared url=keystore:///home/ubuntu/private鈥[32mstatus=Locked 开始挖矿，他会先自动更新一下 &gt; miner.start() INFO [07-02|17:03:22] Updated mining threads threads=0 INFO [07-02|17:03:22] Transaction pool price threshold updated price=18000000000 null &gt; INFO [07-02|17:03:22] Starting mining operation INFO [07-02|17:03:22] Commit new mining work number=1 txs=0 uncles=0 elapsed=190.145碌s INFO [07-02|17:03:27] Generating DAG in progress epoch=0 percentage=0 elapsed=3.072s INFO [07-02|17:03:29] Generating DAG in progress epoch=0 percentage=1 elapsed=5.604s INFO [07-02|17:03:32] Generating DAG in progress epoch=0 percentage=2 elapsed=8.263s INFO [07-02|17:03:34] Generating DAG in progress epoch=0 percentage=3 elapsed=10.788s INFO [07-02|17:03:37] Generating DAG in progress epoch=0 percentage=4 elapsed=13.659s INFO [07-02|17:03:40] Generating DAG in progress ep 解锁 &gt; personal.unlockAccount(eth.accounts[0]) Unlock account 0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699 Passphrase: true 发送交易，记住第一个账户的密码是123，第二个账户是123 &gt;eth.sendTransaction({from: &quot;0x8260b02ac49855f9c00ff4275dc5291300517e30&quot;, to: &quot;0xf7f54ba52d6226c1f3d4417cc0d700616474681d&quot;, gas:31000, &#39;gasPrice&#39;: web3.toWei(300, &#39;gwei&#39;), &quot;value&quot;: &quot;1&quot;}) INFO [07-02|17:12:56] Submitted transaction fullhash=0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6 recipient=0xb4e2e2514eae3684157bf34a0cee2c07c431cf92 &quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot; 矿池里面有未打包的交易 &gt; txpool.status { pending: 1, queued: 0 } 查看区块，它里面有打包的交易 &gt; eth.getBlock(7) { difficulty: 239008, extraData: &quot;0xd783010606846765746887676f312e382e31856c696e7578&quot;, gasLimit: 4265693055, gasUsed: 21000, hash: &quot;0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa&quot;, logsBloom: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;, miner: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot;, mixHash: &quot;0x85df2a283fde403380b168f6dd985ea5a308c651c772fe2cf9e2a1276a59c03f&quot;, nonce: &quot;0x6ba641d5bc943a3c&quot;, number: 7, parentHash: &quot;0x391702b4c862252af99f58b09001c8dae8de209678f2d57247fe1610ee5132d5&quot;, receiptsRoot: &quot;0xc570ba38565fc473b816fb9a3a1c4736b2b4155dea47ca35ee932c45d5922886&quot;, sha3Uncles: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;, size: 641, stateRoot: &quot;0xc488d58864a62b6711f19824cbb94af4ca1582da2909e235e3f269c4ca34d275&quot;, timestamp: 1498987154, totalDifficulty: 1984304, transactions: [&quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;], transactionsRoot: &quot;0x3cecf9cf166ff0cdadedfc145f6d1e45b108d15a07dd85650eb38236e4662c23&quot;, uncles: [] } 查看交易 &gt; eth.getTransaction(&quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;) { blockHash: &quot;0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa&quot;, blockNumber: 7, from: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot;, gas: 31000, gasPrice: 300000000000, hash: &quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;, input: &quot;0x&quot;, nonce: 0, r: &quot;0x5e30add8d6726e4b5f542d5e77b78f7d111abda861c432b09304dc6422f27663&quot;, s: &quot;0x10ef4e85481a9d507c8c07f4a8990f6b02abedab1c23dd838679f739b2b97ed4&quot;, to: &quot;0xb4e2e2514eae3684157bf34a0cee2c07c431cf92&quot;, transactionIndex: 0, v: &quot;0x41&quot;, value: 1 } 现在查看未打包的交易为0 &gt; txpool.status { pending: 0, queued: 0 } let source = “pragma solidity ^0.4.0;contract Calc{ /区块链存储/ uint count; /执行会写入数据，所以需要transaction的方式执行。/ function add(uint a, uint b) returns(uint){ count++; return a + b; } /执行不会写入数据，所以允许call的方式执行。/ function getCount() returns (uint){ return count; }}”; 阅读更多" />
<meta property="og:description" content="准备工作 安装git 输入以下命令安装Git： sudo apt-get install git 安装solc 输入以下命令安装solc： sudo npm install -g solc root@i-colbyo7v:/home/ubuntu# npm install -g solc /usr/local/node-v8.1.2-linux-x64/bin/solcjs -&gt; /usr/local/node-v8.1.2-linux-x64/lib/node_modules/solc/solcjs + solc@0.4.13 added 65 packages in 59.744s 我们就会发现在终端中输入solc命令返回一个出错信息。这是因为solc只是一个程序集，如果我们想要在终端中使用solc程序编译智能合约，则需要安装solc-cli，这是solc的命令行界面。 输入以下命令安装solc-cli: sudo npm install -g solc-cli root@i-colbyo7v:/home/ubuntu# npm install -g solc-cli /usr/local/node-v8.1.2-linux-x64/bin/solc -&gt; /usr/local/node-v8.1.2-linux-x64/lib/node_modules/solc-cli/dist/index.js npm WARN solc-cli@0.3.0 requires a peer of solc@^0.3.5 but none was installed. + solc-cli@0.3.0 added 20 packages in 18.604s 输入以下命令可以一并安装solc和solc-cli7（推荐使用此命令安装）： sudo npm install -g solc solc-cli --save-dev 如果输入solcjs --help命令，有以下输出，则表明solc和solc-cli安装成功： zcc@ubuntu:~$ solcjs --help Usage: solcjs [options] [input_file...] Options: --version Show version number [boolean] --optimize Enable bytecode optimizer. [boolean] --bin Binary of the contracts in hex. [boolean] --abi ABI of the contracts. [boolean] --interface Solidity Interface of the contracts. [boolean] --output-dir, -o Output directory for the contracts. [string] --help Show help [boolean] 到了这里，如果想以后的智能合约编译工作不使用geth控制台来完成，那么solc编译器就算安装完了。但是，如果我们需要在geth控制台使用solc编译器，那么我们仍然需要安装solc二进制包。输入以下命令安装solc二进制包8： sudo add-apt-repository ppa:ethereum/ethereum sudo apt-get update sudo apt-get install solc 安装Geth客户端 有多种以太坊客户端，安装Go-ethereum输入以下命令13： sudo apt-get install software-properties-common sudo add-apt-repository -y ppa:ethereum/ethereum sudo apt-get update sudo apt-get install ethereum ubuntu@i-5tthrr8u:~$ geth --help NAME: geth - the go-ethereum command line interface Copyright 2013-2017 The go-ethereum Authors USAGE: geth [options] command [command options] [arguments...] VERSION: 1.6.6-stable-10a45cb5 COMMANDS: init Bootstrap and initialize a new genesis block import Import a blockchain file export Export blockchain into file removedb Remove blockchain and state databases dump Dump a specific block from storage monitor Monitor and visualize node metrics account Manage accounts wallet Manage Ethereum presale wallets console Start an interactive JavaScript environment attach Start an interactive JavaScript environment (connect to node) js Execute the specified JavaScript files makedag Generate ethash DAG (for testing) version Print version numbers bug opens a window to report a bug on the geth repo license Display license information dumpconfig Show configuration values help, h Shows a list of commands or help for one command 下面开始建立私有以太坊网络: mkdir private-geth cd private-geth 建立创世纪区块文件,是一个json格式的文件: vim genesis.json 在创世纪区块的json文件中填入以下内容, 并保存. { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } mixhash：与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。. nonce: nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty: 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc: 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase: 矿工的账号，随便填 timestamp: 设置创世块的时间戳 parentHash: 上一个区块的hash值，因为是创世块，所以这个值是0 extraData: 附加信息，随便填，可以填你的个性信息，必须为十六进制的偶位字符串 gasLimit: 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 进入geth平台 root@i-5tthrr8u:/home/ubuntu/private-geth# geth --datadir ./data/00 init genesis.json WARN [07-02|17:02:11] No etherbase set and no accounts found as default INFO [07-02|17:02:11] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/chaindata cache=16 handles=16 INFO [07-02|17:02:11] Writing custom genesis block INFO [07-02|17:02:11] Successfully wrote genesis state database=chaindata hash=a0e580鈥5e82e INFO [07-02|17:02:11] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/lightchaindata cache=16 handles=16 INFO [07-02|17:02:11] Writing custom genesis block INFO [07-02|17:02:11] Successfully wrote genesis state database=lightchaindata hash=a0e580鈥5e82e root@i-5tthrr8u:/home/ubuntu/private-geth# geth --datadir ./data/00 --networkid 15 console WARN [07-02|17:02:37] No etherbase set and no accounts found as default INFO [07-02|17:02:37] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [07-02|17:02:37] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/chaindata cache=128 handles=1024 WARN [07-02|17:02:37] Upgrading chain database to use sequential keys INFO [07-02|17:02:37] Initialised chain configuration config=&quot;{ChainID: 15 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [07-02|17:02:37] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data/00/geth/ethash count=3 INFO [07-02|17:02:37] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [07-02|17:02:37] Upgrading db log bloom bins INFO [07-02|17:02:37] Bloom-bin upgrade completed elapsed=185.399碌s INFO [07-02|17:02:37] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=15 INFO [07-02|17:02:37] Database conversion successful INFO [07-02|17:02:37] Loaded most recent local header number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Loaded most recent local full block number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Loaded most recent local fast block number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Starting P2P networking INFO [07-02|17:02:39] UDP listener up self=enode://96f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:30303 INFO [07-02|17:02:39] RLPx listener up self=enode://96f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:30303 INFO [07-02|17:02:39] IPC endpoint opened: /home/ubuntu/private-geth/data/00/geth.ipc **Welcome to the Geth JavaScript console!** instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 61910 --rpcport 8200 console 各参数说明如下： identity ：区块链的标示，随便填写，用于标示目前网络的名字 init ：指定创世块文件的位置，并创建初始块 datadir ：设置当前区块链网络数据存放的位置 port：网络监听端口,默认是8080 rpc：启动rpc通信，可以进行智能合约的部署和调试。它在geth中通常被默认激活。 rpcapi： 设置允许连接的rpc的客户端，一般为db,eth,net,web3 networkid： 设置当前区块链的网络ID，用于区分不同的网络，是一个数字 console：启动命令行模式，可以在Geth中执行命令 此外，还可以使用如下参数： nodiscover : 使用这个命令可以确保你的节点不会被非手动添加你的人发现。否则，你的节点可能被陌生人的区块链无意添加，如果他和你有相同的初始文件和网络ID。 maxpeers : 如果你不希望其他人连接到你的测试链，可以使用maxpeers 0。反之，如果你确切知道希望多少人连接到你的节点，你也可以通过调整数字来实现。 rpcapi : 这个命令可以决定允许什么API通过RPC进入。在默认情况下，geth可以在RPC激活web3界面。请注意在RPC/IPC界面提供API，会使每个可以进入这个界面（例如dapp’s）的人都有权限访问这个API。注意你激活的是哪个API。Geth会默认激活IPC界面上所有的API，以及RPC界面上的db,eth,net和web3 API。 rpccorsdomain : 这个可以指示什么URL能连接到你的节点来执行RPC定制端任务。务必谨慎，输入一个特定的URL而不是wildcard ( * )，后者会使所有的URL都能连接到你的RPC实例。 创建新账户 &gt; personal.newAccount() Passphrase: Repeat passphrase: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot; &gt; INFO [07-02|17:02:57] New wallet appeared url=keystore:///home/ubuntu/private鈥[32mstatus=Locked 开始挖矿，他会先自动更新一下 &gt; miner.start() INFO [07-02|17:03:22] Updated mining threads threads=0 INFO [07-02|17:03:22] Transaction pool price threshold updated price=18000000000 null &gt; INFO [07-02|17:03:22] Starting mining operation INFO [07-02|17:03:22] Commit new mining work number=1 txs=0 uncles=0 elapsed=190.145碌s INFO [07-02|17:03:27] Generating DAG in progress epoch=0 percentage=0 elapsed=3.072s INFO [07-02|17:03:29] Generating DAG in progress epoch=0 percentage=1 elapsed=5.604s INFO [07-02|17:03:32] Generating DAG in progress epoch=0 percentage=2 elapsed=8.263s INFO [07-02|17:03:34] Generating DAG in progress epoch=0 percentage=3 elapsed=10.788s INFO [07-02|17:03:37] Generating DAG in progress epoch=0 percentage=4 elapsed=13.659s INFO [07-02|17:03:40] Generating DAG in progress ep 解锁 &gt; personal.unlockAccount(eth.accounts[0]) Unlock account 0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699 Passphrase: true 发送交易，记住第一个账户的密码是123，第二个账户是123 &gt;eth.sendTransaction({from: &quot;0x8260b02ac49855f9c00ff4275dc5291300517e30&quot;, to: &quot;0xf7f54ba52d6226c1f3d4417cc0d700616474681d&quot;, gas:31000, &#39;gasPrice&#39;: web3.toWei(300, &#39;gwei&#39;), &quot;value&quot;: &quot;1&quot;}) INFO [07-02|17:12:56] Submitted transaction fullhash=0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6 recipient=0xb4e2e2514eae3684157bf34a0cee2c07c431cf92 &quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot; 矿池里面有未打包的交易 &gt; txpool.status { pending: 1, queued: 0 } 查看区块，它里面有打包的交易 &gt; eth.getBlock(7) { difficulty: 239008, extraData: &quot;0xd783010606846765746887676f312e382e31856c696e7578&quot;, gasLimit: 4265693055, gasUsed: 21000, hash: &quot;0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa&quot;, logsBloom: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;, miner: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot;, mixHash: &quot;0x85df2a283fde403380b168f6dd985ea5a308c651c772fe2cf9e2a1276a59c03f&quot;, nonce: &quot;0x6ba641d5bc943a3c&quot;, number: 7, parentHash: &quot;0x391702b4c862252af99f58b09001c8dae8de209678f2d57247fe1610ee5132d5&quot;, receiptsRoot: &quot;0xc570ba38565fc473b816fb9a3a1c4736b2b4155dea47ca35ee932c45d5922886&quot;, sha3Uncles: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;, size: 641, stateRoot: &quot;0xc488d58864a62b6711f19824cbb94af4ca1582da2909e235e3f269c4ca34d275&quot;, timestamp: 1498987154, totalDifficulty: 1984304, transactions: [&quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;], transactionsRoot: &quot;0x3cecf9cf166ff0cdadedfc145f6d1e45b108d15a07dd85650eb38236e4662c23&quot;, uncles: [] } 查看交易 &gt; eth.getTransaction(&quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;) { blockHash: &quot;0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa&quot;, blockNumber: 7, from: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot;, gas: 31000, gasPrice: 300000000000, hash: &quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;, input: &quot;0x&quot;, nonce: 0, r: &quot;0x5e30add8d6726e4b5f542d5e77b78f7d111abda861c432b09304dc6422f27663&quot;, s: &quot;0x10ef4e85481a9d507c8c07f4a8990f6b02abedab1c23dd838679f739b2b97ed4&quot;, to: &quot;0xb4e2e2514eae3684157bf34a0cee2c07c431cf92&quot;, transactionIndex: 0, v: &quot;0x41&quot;, value: 1 } 现在查看未打包的交易为0 &gt; txpool.status { pending: 0, queued: 0 } let source = “pragma solidity ^0.4.0;contract Calc{ /区块链存储/ uint count; /执行会写入数据，所以需要transaction的方式执行。/ function add(uint a, uint b) returns(uint){ count++; return a + b; } /执行不会写入数据，所以允许call的方式执行。/ function getCount() returns (uint){ return count; }}”; 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/07/04/946bffaf03193bfa72100f9e6dd5f0ec.html" />
<meta property="og:url" content="https://mlh.app/2017/07/04/946bffaf03193bfa72100f9e6dd5f0ec.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-07-04T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"准备工作 安装git 输入以下命令安装Git： sudo apt-get install git 安装solc 输入以下命令安装solc： sudo npm install -g solc root@i-colbyo7v:/home/ubuntu# npm install -g solc /usr/local/node-v8.1.2-linux-x64/bin/solcjs -&gt; /usr/local/node-v8.1.2-linux-x64/lib/node_modules/solc/solcjs + solc@0.4.13 added 65 packages in 59.744s 我们就会发现在终端中输入solc命令返回一个出错信息。这是因为solc只是一个程序集，如果我们想要在终端中使用solc程序编译智能合约，则需要安装solc-cli，这是solc的命令行界面。 输入以下命令安装solc-cli: sudo npm install -g solc-cli root@i-colbyo7v:/home/ubuntu# npm install -g solc-cli /usr/local/node-v8.1.2-linux-x64/bin/solc -&gt; /usr/local/node-v8.1.2-linux-x64/lib/node_modules/solc-cli/dist/index.js npm WARN solc-cli@0.3.0 requires a peer of solc@^0.3.5 but none was installed. + solc-cli@0.3.0 added 20 packages in 18.604s 输入以下命令可以一并安装solc和solc-cli7（推荐使用此命令安装）： sudo npm install -g solc solc-cli --save-dev 如果输入solcjs --help命令，有以下输出，则表明solc和solc-cli安装成功： zcc@ubuntu:~$ solcjs --help Usage: solcjs [options] [input_file...] Options: --version Show version number [boolean] --optimize Enable bytecode optimizer. [boolean] --bin Binary of the contracts in hex. [boolean] --abi ABI of the contracts. [boolean] --interface Solidity Interface of the contracts. [boolean] --output-dir, -o Output directory for the contracts. [string] --help Show help [boolean] 到了这里，如果想以后的智能合约编译工作不使用geth控制台来完成，那么solc编译器就算安装完了。但是，如果我们需要在geth控制台使用solc编译器，那么我们仍然需要安装solc二进制包。输入以下命令安装solc二进制包8： sudo add-apt-repository ppa:ethereum/ethereum sudo apt-get update sudo apt-get install solc 安装Geth客户端 有多种以太坊客户端，安装Go-ethereum输入以下命令13： sudo apt-get install software-properties-common sudo add-apt-repository -y ppa:ethereum/ethereum sudo apt-get update sudo apt-get install ethereum ubuntu@i-5tthrr8u:~$ geth --help NAME: geth - the go-ethereum command line interface Copyright 2013-2017 The go-ethereum Authors USAGE: geth [options] command [command options] [arguments...] VERSION: 1.6.6-stable-10a45cb5 COMMANDS: init Bootstrap and initialize a new genesis block import Import a blockchain file export Export blockchain into file removedb Remove blockchain and state databases dump Dump a specific block from storage monitor Monitor and visualize node metrics account Manage accounts wallet Manage Ethereum presale wallets console Start an interactive JavaScript environment attach Start an interactive JavaScript environment (connect to node) js Execute the specified JavaScript files makedag Generate ethash DAG (for testing) version Print version numbers bug opens a window to report a bug on the geth repo license Display license information dumpconfig Show configuration values help, h Shows a list of commands or help for one command 下面开始建立私有以太坊网络: mkdir private-geth cd private-geth 建立创世纪区块文件,是一个json格式的文件: vim genesis.json 在创世纪区块的json文件中填入以下内容, 并保存. { &quot;config&quot;: { &quot;chainId&quot;: 12345, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x400&quot;, &quot;extraData&quot; : &quot;0x123456&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } mixhash：与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。. nonce: nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty: 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc: 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase: 矿工的账号，随便填 timestamp: 设置创世块的时间戳 parentHash: 上一个区块的hash值，因为是创世块，所以这个值是0 extraData: 附加信息，随便填，可以填你的个性信息，必须为十六进制的偶位字符串 gasLimit: 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 进入geth平台 root@i-5tthrr8u:/home/ubuntu/private-geth# geth --datadir ./data/00 init genesis.json WARN [07-02|17:02:11] No etherbase set and no accounts found as default INFO [07-02|17:02:11] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/chaindata cache=16 handles=16 INFO [07-02|17:02:11] Writing custom genesis block INFO [07-02|17:02:11] Successfully wrote genesis state database=chaindata hash=a0e580鈥5e82e INFO [07-02|17:02:11] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/lightchaindata cache=16 handles=16 INFO [07-02|17:02:11] Writing custom genesis block INFO [07-02|17:02:11] Successfully wrote genesis state database=lightchaindata hash=a0e580鈥5e82e root@i-5tthrr8u:/home/ubuntu/private-geth# geth --datadir ./data/00 --networkid 15 console WARN [07-02|17:02:37] No etherbase set and no accounts found as default INFO [07-02|17:02:37] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [07-02|17:02:37] Allocated cache and file handles database=/home/ubuntu/private-geth/data/00/geth/chaindata cache=128 handles=1024 WARN [07-02|17:02:37] Upgrading chain database to use sequential keys INFO [07-02|17:02:37] Initialised chain configuration config=&quot;{ChainID: 15 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [07-02|17:02:37] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data/00/geth/ethash count=3 INFO [07-02|17:02:37] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [07-02|17:02:37] Upgrading db log bloom bins INFO [07-02|17:02:37] Bloom-bin upgrade completed elapsed=185.399碌s INFO [07-02|17:02:37] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=15 INFO [07-02|17:02:37] Database conversion successful INFO [07-02|17:02:37] Loaded most recent local header number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Loaded most recent local full block number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Loaded most recent local fast block number=0 hash=a0e580鈥5e82e td=262144 INFO [07-02|17:02:37] Starting P2P networking INFO [07-02|17:02:39] UDP listener up self=enode://96f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:30303 INFO [07-02|17:02:39] RLPx listener up self=enode://96f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:30303 INFO [07-02|17:02:39] IPC endpoint opened: /home/ubuntu/private-geth/data/00/geth.ipc **Welcome to the Geth JavaScript console!** instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 geth --identity &quot;haha&quot; --datadir ./data/00 --networkid 12345 --rpcapi &quot;db,eth,net,web3&quot; --port 61910 --rpcport 8200 console 各参数说明如下： identity ：区块链的标示，随便填写，用于标示目前网络的名字 init ：指定创世块文件的位置，并创建初始块 datadir ：设置当前区块链网络数据存放的位置 port：网络监听端口,默认是8080 rpc：启动rpc通信，可以进行智能合约的部署和调试。它在geth中通常被默认激活。 rpcapi： 设置允许连接的rpc的客户端，一般为db,eth,net,web3 networkid： 设置当前区块链的网络ID，用于区分不同的网络，是一个数字 console：启动命令行模式，可以在Geth中执行命令 此外，还可以使用如下参数： nodiscover : 使用这个命令可以确保你的节点不会被非手动添加你的人发现。否则，你的节点可能被陌生人的区块链无意添加，如果他和你有相同的初始文件和网络ID。 maxpeers : 如果你不希望其他人连接到你的测试链，可以使用maxpeers 0。反之，如果你确切知道希望多少人连接到你的节点，你也可以通过调整数字来实现。 rpcapi : 这个命令可以决定允许什么API通过RPC进入。在默认情况下，geth可以在RPC激活web3界面。请注意在RPC/IPC界面提供API，会使每个可以进入这个界面（例如dapp’s）的人都有权限访问这个API。注意你激活的是哪个API。Geth会默认激活IPC界面上所有的API，以及RPC界面上的db,eth,net和web3 API。 rpccorsdomain : 这个可以指示什么URL能连接到你的节点来执行RPC定制端任务。务必谨慎，输入一个特定的URL而不是wildcard ( * )，后者会使所有的URL都能连接到你的RPC实例。 创建新账户 &gt; personal.newAccount() Passphrase: Repeat passphrase: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot; &gt; INFO [07-02|17:02:57] New wallet appeared url=keystore:///home/ubuntu/private鈥\u001b[32mstatus=Locked 开始挖矿，他会先自动更新一下 &gt; miner.start() INFO [07-02|17:03:22] Updated mining threads threads=0 INFO [07-02|17:03:22] Transaction pool price threshold updated price=18000000000 null &gt; INFO [07-02|17:03:22] Starting mining operation INFO [07-02|17:03:22] Commit new mining work number=1 txs=0 uncles=0 elapsed=190.145碌s INFO [07-02|17:03:27] Generating DAG in progress epoch=0 percentage=0 elapsed=3.072s INFO [07-02|17:03:29] Generating DAG in progress epoch=0 percentage=1 elapsed=5.604s INFO [07-02|17:03:32] Generating DAG in progress epoch=0 percentage=2 elapsed=8.263s INFO [07-02|17:03:34] Generating DAG in progress epoch=0 percentage=3 elapsed=10.788s INFO [07-02|17:03:37] Generating DAG in progress epoch=0 percentage=4 elapsed=13.659s INFO [07-02|17:03:40] Generating DAG in progress ep 解锁 &gt; personal.unlockAccount(eth.accounts[0]) Unlock account 0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699 Passphrase: true 发送交易，记住第一个账户的密码是123，第二个账户是123 &gt;eth.sendTransaction({from: &quot;0x8260b02ac49855f9c00ff4275dc5291300517e30&quot;, to: &quot;0xf7f54ba52d6226c1f3d4417cc0d700616474681d&quot;, gas:31000, &#39;gasPrice&#39;: web3.toWei(300, &#39;gwei&#39;), &quot;value&quot;: &quot;1&quot;}) INFO [07-02|17:12:56] Submitted transaction fullhash=0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6 recipient=0xb4e2e2514eae3684157bf34a0cee2c07c431cf92 &quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot; 矿池里面有未打包的交易 &gt; txpool.status { pending: 1, queued: 0 } 查看区块，它里面有打包的交易 &gt; eth.getBlock(7) { difficulty: 239008, extraData: &quot;0xd783010606846765746887676f312e382e31856c696e7578&quot;, gasLimit: 4265693055, gasUsed: 21000, hash: &quot;0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa&quot;, logsBloom: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;, miner: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot;, mixHash: &quot;0x85df2a283fde403380b168f6dd985ea5a308c651c772fe2cf9e2a1276a59c03f&quot;, nonce: &quot;0x6ba641d5bc943a3c&quot;, number: 7, parentHash: &quot;0x391702b4c862252af99f58b09001c8dae8de209678f2d57247fe1610ee5132d5&quot;, receiptsRoot: &quot;0xc570ba38565fc473b816fb9a3a1c4736b2b4155dea47ca35ee932c45d5922886&quot;, sha3Uncles: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;, size: 641, stateRoot: &quot;0xc488d58864a62b6711f19824cbb94af4ca1582da2909e235e3f269c4ca34d275&quot;, timestamp: 1498987154, totalDifficulty: 1984304, transactions: [&quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;], transactionsRoot: &quot;0x3cecf9cf166ff0cdadedfc145f6d1e45b108d15a07dd85650eb38236e4662c23&quot;, uncles: [] } 查看交易 &gt; eth.getTransaction(&quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;) { blockHash: &quot;0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa&quot;, blockNumber: 7, from: &quot;0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699&quot;, gas: 31000, gasPrice: 300000000000, hash: &quot;0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6&quot;, input: &quot;0x&quot;, nonce: 0, r: &quot;0x5e30add8d6726e4b5f542d5e77b78f7d111abda861c432b09304dc6422f27663&quot;, s: &quot;0x10ef4e85481a9d507c8c07f4a8990f6b02abedab1c23dd838679f739b2b97ed4&quot;, to: &quot;0xb4e2e2514eae3684157bf34a0cee2c07c431cf92&quot;, transactionIndex: 0, v: &quot;0x41&quot;, value: 1 } 现在查看未打包的交易为0 &gt; txpool.status { pending: 0, queued: 0 } let source = “pragma solidity ^0.4.0;contract Calc{ /区块链存储/ uint count; /执行会写入数据，所以需要transaction的方式执行。/ function add(uint a, uint b) returns(uint){ count++; return a + b; } /执行不会写入数据，所以允许call的方式执行。/ function getCount() returns (uint){ return count; }}”; 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/07/04/946bffaf03193bfa72100f9e6dd5f0ec.html","headline":"安装geth客户端并转账","dateModified":"2017-07-04T00:00:00+08:00","datePublished":"2017-07-04T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/07/04/946bffaf03193bfa72100f9e6dd5f0ec.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>安装geth客户端并转账</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p>准备工作</p> 
  <pre class="prettyprint"><code class=" hljs bash">安装git

输入以下命令安装Git：

<span class="hljs-built_in">sudo</span> apt-get install git
</code></pre> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">
安装solc

输入以下命令安装solc：

sudo npm install -g solc


root@i-colbyo7v:/home/ubuntu<span class="hljs-comment"># npm install -g solc</span>
/usr/<span class="hljs-built_in">local</span>/node-v8<span class="hljs-number">.1</span><span class="hljs-number">.2</span>-linux-x64/bin/solcjs -&gt; /usr/<span class="hljs-built_in">local</span>/node-v8<span class="hljs-number">.1</span><span class="hljs-number">.2</span>-linux-x64/lib/node_modules/solc/solcjs
+ solc@<span class="hljs-number">0.4</span><span class="hljs-number">.13</span>
added <span class="hljs-number">65</span> packages <span class="hljs-operator">in</span> <span class="hljs-number">59.744</span>s

我们就会发现在终端中输入solc命令返回一个出错信息。这是因为solc只是一个程序集，如果我们想要在终端中使用solc程序编译智能合约，则需要安装solc-cli，这是solc的命令行界面。

输入以下命令安装solc-cli:

sudo npm install -g solc-cli

root@i-colbyo7v:/home/ubuntu<span class="hljs-comment"># npm install -g solc-cli</span>
/usr/<span class="hljs-built_in">local</span>/node-v8<span class="hljs-number">.1</span><span class="hljs-number">.2</span>-linux-x64/bin/solc -&gt; /usr/<span class="hljs-built_in">local</span>/node-v8<span class="hljs-number">.1</span><span class="hljs-number">.2</span>-linux-x64/lib/node_modules/solc-cli/dist/index.js
npm WARN solc-cli@<span class="hljs-number">0.3</span><span class="hljs-number">.0</span> requires <span class="hljs-operator">a</span> peer <span class="hljs-operator">of</span> solc@^<span class="hljs-number">0.3</span><span class="hljs-number">.5</span> but <span class="hljs-constant">none</span> was installed.

+ solc-cli@<span class="hljs-number">0.3</span><span class="hljs-number">.0</span>
added <span class="hljs-number">20</span> packages <span class="hljs-operator">in</span> <span class="hljs-number">18.604</span>s

输入以下命令可以一并安装solc和solc-cli7（推荐使用此命令安装）：
sudo npm install -g solc solc-cli <span class="hljs-comment">--save-dev</span>

如果输入solcjs <span class="hljs-comment">--help命令，有以下输出，则表明solc和solc-cli安装成功：</span>

zcc@ubuntu:~$ solcjs <span class="hljs-comment">--help</span>
Usage: solcjs [options] [input_file...]

Options:
  <span class="hljs-comment">--version Show version number [boolean]</span>
  <span class="hljs-comment">--optimize Enable bytecode optimizer. [boolean]</span>
  <span class="hljs-comment">--bin Binary of the contracts in hex. [boolean]</span>
  <span class="hljs-comment">--abi ABI of the contracts. [boolean]</span>
  <span class="hljs-comment">--interface Solidity Interface of the contracts. [boolean]</span>
  <span class="hljs-comment">--output-dir, -o Output directory for the contracts. [string]</span>
  <span class="hljs-comment">--help Show help [boolean]</span>

到了这里，如果想以后的智能合约编译工作不使用geth控制台来完成，那么solc编译器就算安装完了。但是，如果我们需要在geth控制台使用solc编译器，那么我们仍然需要安装solc二进制包。输入以下命令安装solc二进制包<span class="hljs-number">8</span>：

sudo <span class="hljs-built_in">add</span>-apt-repository ppa:ethereum/ethereum
sudo apt-<span class="hljs-built_in">get</span> update
sudo apt-<span class="hljs-built_in">get</span> install solc

安装Geth客户端

有多种以太坊客户端，安装Go-ethereum输入以下命令<span class="hljs-number">13</span>：

sudo apt-<span class="hljs-built_in">get</span> install software-properties-common
sudo <span class="hljs-built_in">add</span>-apt-repository -y ppa:ethereum/ethereum
sudo apt-<span class="hljs-built_in">get</span> update
sudo apt-<span class="hljs-built_in">get</span> install ethereum

ubuntu@i-<span class="hljs-number">5</span>tthrr8u:~$ geth  <span class="hljs-comment">--help</span>
NAME:
   geth - <span class="hljs-operator">the</span> go-ethereum <span class="hljs-command"><span class="hljs-keyword">command</span> <span class="hljs-title">line</span> <span class="hljs-title">interface</span></span>

   Copyright <span class="hljs-number">2013</span>-<span class="hljs-number">2017</span> The go-ethereum Authors

USAGE:
   geth [options] <span class="hljs-command"><span class="hljs-keyword">command</span> [<span class="hljs-title">command</span> <span class="hljs-title">options</span>] [<span class="hljs-title">arguments</span>...]</span>

VERSION:
   <span class="hljs-number">1.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5

COMMANDS:
   init        Bootstrap <span class="hljs-operator">and</span> initialize <span class="hljs-operator">a</span> <span class="hljs-built_in">new</span> genesis block
   import      Import <span class="hljs-operator">a</span> blockchain <span class="hljs-built_in">file</span>
   export      Export blockchain <span class="hljs-keyword">into</span> <span class="hljs-built_in">file</span>
   removedb    Remove blockchain <span class="hljs-operator">and</span> state databases
   dump        Dump <span class="hljs-operator">a</span> specific block <span class="hljs-built_in">from</span> storage
   monitor     Monitor <span class="hljs-operator">and</span> visualize node metrics
   account     Manage accounts
   wallet      Manage Ethereum presale wallets
   console     Start <span class="hljs-operator">an</span> interactive JavaScript environment
   attach      Start <span class="hljs-operator">an</span> interactive JavaScript environment (connect <span class="hljs-built_in">to</span> node)
   js          Execute <span class="hljs-operator">the</span> specified JavaScript <span class="hljs-built_in">files</span>
   makedag     Generate ethash DAG (<span class="hljs-keyword">for</span> testing)
   <span class="hljs-built_in">version</span>     Print <span class="hljs-built_in">version</span> numbers
   bug         opens <span class="hljs-operator">a</span> window <span class="hljs-built_in">to</span> report <span class="hljs-operator">a</span> bug <span class="hljs-command"><span class="hljs-keyword">on</span> <span class="hljs-title">the</span> <span class="hljs-title">geth</span> <span class="hljs-title">repo</span></span>
   license     Display license information
   dumpconfig  Show configuration values
   help, h     Shows <span class="hljs-operator">a</span> list <span class="hljs-operator">of</span> commands <span class="hljs-operator">or</span> help <span class="hljs-keyword">for</span> <span class="hljs-constant">one</span> <span class="hljs-command"><span class="hljs-keyword">command</span></span>

</code></pre> 
  <p>下面开始建立私有以太坊网络:</p> 
  <p>mkdir private-geth <br> cd private-geth <br> 建立创世纪区块文件,是一个json格式的文件:</p> 
  <p>vim genesis.json <br> 在创世纪区块的json文件中填入以下内容, 并保存.</p> 
  <pre class="prettyprint"><code class=" hljs http">

<span class="http"> <span class="avrasm">{ <span class="hljs-string">"config"</span>: { <span class="hljs-string">"chainId"</span>: <span class="hljs-number">12345</span>, <span class="hljs-string">"homesteadBlock"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"eip155Block"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"eip158Block"</span>: <span class="hljs-number">0</span> }, <span class="hljs-string">"coinbase"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000"</span>, <span class="hljs-string">"difficulty"</span> : <span class="hljs-string">"0x400"</span>, <span class="hljs-string">"extraData"</span> : <span class="hljs-string">"0x123456"</span>, <span class="hljs-string">"gasLimit"</span> : <span class="hljs-string">"0xffffffff"</span>, <span class="hljs-string">"nonce"</span> : <span class="hljs-string">"0x0000000000000042"</span>, <span class="hljs-string">"mixhash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>, <span class="hljs-string">"parentHash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>, <span class="hljs-string">"timestamp"</span> : <span class="hljs-string">"0x00"</span>, <span class="hljs-string">"alloc"</span>: { } } mixhash：与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, <span class="hljs-number">4.3</span><span class="hljs-number">.4</span>. Block Header Validity, (<span class="hljs-number">44</span>)章节所描述的条件。. <span class="hljs-label">nonce:</span> nonce就是一个<span class="hljs-number">64</span>位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, <span class="hljs-number">4.3</span><span class="hljs-number">.4</span>. Block Header Validity, (<span class="hljs-number">44</span>)章节所描述的条件。 <span class="hljs-label">difficulty:</span> 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 <span class="hljs-label">alloc:</span> 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 <span class="hljs-label">coinbase:</span> 矿工的账号，随便填 <span class="hljs-label">timestamp:</span> 设置创世块的时间戳 <span class="hljs-label">parentHash:</span> 上一个区块的hash值，因为是创世块，所以这个值是<span class="hljs-number">0</span> <span class="hljs-label">extraData:</span> 附加信息，随便填，可以填你的个性信息，必须为十六进制的偶位字符串 <span class="hljs-label">gasLimit:</span> 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。</span></span></code></pre> 
  <p>进入geth平台</p> 
  <pre class="prettyprint"><code class=" hljs sql">root@i-5tthrr8u:/home/ubuntu/private-geth# geth <span class="hljs-comment">--datadir ./data/00 init genesis.json</span>
WARN [07-02|17:02:11] No etherbase <span class="hljs-operator"><span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">no</span> accounts <span class="hljs-keyword">found</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">11</span>] Allocated cache <span class="hljs-keyword">and</span> file handles <span class="hljs-keyword">database</span>=/home/ubuntu/private-geth/data/<span class="hljs-number">00</span>/geth/chaindata cache=<span class="hljs-number">16</span> handles=<span class="hljs-number">16</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">11</span>] Writing custom genesis block INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">11</span>] Successfully wrote genesis state <span class="hljs-keyword">database</span>=chaindata hash=a0e580鈥<span class="hljs-number">5e82</span>e INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">11</span>] Allocated cache <span class="hljs-keyword">and</span> file handles <span class="hljs-keyword">database</span>=/home/ubuntu/private-geth/data/<span class="hljs-number">00</span>/geth/lightchaindata cache=<span class="hljs-number">16</span> handles=<span class="hljs-number">16</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">11</span>] Writing custom genesis block INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">11</span>] Successfully wrote genesis state <span class="hljs-keyword">database</span>=lightchaindata hash=a0e580鈥<span class="hljs-number">5e82</span>e root@i-<span class="hljs-number">5</span>tthrr8u:/home/ubuntu/private-geth# geth --datadir ./data/<span class="hljs-number">00</span> --networkid <span class="hljs-number">15</span> console WARN [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] <span class="hljs-keyword">No</span> etherbase <span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">no</span> accounts <span class="hljs-keyword">found</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Starting peer-<span class="hljs-keyword">to</span>-peer node instance=Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Allocated cache <span class="hljs-keyword">and</span> file handles <span class="hljs-keyword">database</span>=/home/ubuntu/private-geth/data/<span class="hljs-number">00</span>/geth/chaindata cache=<span class="hljs-number">128</span> handles=<span class="hljs-number">1024</span> WARN [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Upgrading chain <span class="hljs-keyword">database</span> <span class="hljs-keyword">to</span> use sequential keys INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Initialised chain configuration config=<span class="hljs-string">"{ChainID: 15 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}"</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash caches dir=/home/ubuntu/private-geth/data/<span class="hljs-number">00</span>/geth/ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">3</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash DAGs dir=/root/.ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">2</span> WARN [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Upgrading db log bloom bins INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Bloom-bin upgrade completed elapsed=<span class="hljs-number">185.399</span>碌s INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Initialising Ethereum protocol versions=<span class="hljs-string">"[63 62]"</span> network=<span class="hljs-number">15</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] <span class="hljs-keyword">Database</span> conversion successful INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Loaded most recent <span class="hljs-keyword">local</span> header <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=a0e580鈥<span class="hljs-number">5e82</span>e td=<span class="hljs-number">262144</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Loaded most recent <span class="hljs-keyword">local</span> <span class="hljs-keyword">full</span> block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=a0e580鈥<span class="hljs-number">5e82</span>e td=<span class="hljs-number">262144</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Loaded most recent <span class="hljs-keyword">local</span> fast block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=a0e580鈥<span class="hljs-number">5e82</span>e td=<span class="hljs-number">262144</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">37</span>] Starting P2P networking INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">39</span>] UDP listener up self=enode://<span class="hljs-number">96</span>f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:<span class="hljs-number">30303</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">39</span>] RLPx listener up self=enode://<span class="hljs-number">96</span>f7a95a8c5e7a1f911142d87ce53ae882568be0435016e4803a6d410a9ecc7a69322cee8efbe8499ec7c737c377793182cab8869a076389c6b47626df00450b@[::]:<span class="hljs-number">30303</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">39</span>] IPC endpoint opened: /home/ubuntu/private-geth/data/<span class="hljs-number">00</span>/geth.ipc **Welcome <span class="hljs-keyword">to</span> the Geth JavaScript console!** instance: Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> modules: admin:<span class="hljs-number">1.0</span> debug:<span class="hljs-number">1.0</span> eth:<span class="hljs-number">1.0</span> miner:<span class="hljs-number">1.0</span> net:<span class="hljs-number">1.0</span> personal:<span class="hljs-number">1.0</span> rpc:<span class="hljs-number">1.0</span> txpool:<span class="hljs-number">1.0</span> web3:<span class="hljs-number">1.0</span> geth --<span class="hljs-keyword">identity</span> <span class="hljs-string">"haha"</span> --datadir ./data/<span class="hljs-number">00</span> --networkid <span class="hljs-number">12345</span> --rpcapi <span class="hljs-string">"db,eth,net,web3"</span> --port <span class="hljs-number">61910</span> --rpcport <span class="hljs-number">8200</span> console 各参数说明如下： <span class="hljs-keyword">identity</span> ：区块链的标示，随便填写，用于标示目前网络的名字 init ：指定创世块文件的位置，并创建初始块 datadir ：设置当前区块链网络数据存放的位置 port：网络监听端口,默认是<span class="hljs-number">8080</span> rpc：启动rpc通信，可以进行智能合约的部署和调试。它在geth中通常被默认激活。 rpcapi： 设置允许连接的rpc的客户端，一般为db,eth,net,web3 networkid： 设置当前区块链的网络ID，用于区分不同的网络，是一个数字 console：启动命令行模式，可以在Geth中执行命令 此外，还可以使用如下参数： nodiscover : 使用这个命令可以确保你的节点不会被非手动添加你的人发现。否则，你的节点可能被陌生人的区块链无意添加，如果他和你有相同的初始文件和网络ID。 maxpeers : 如果你不希望其他人连接到你的测试链，可以使用maxpeers <span class="hljs-number">0</span>。反之，如果你确切知道希望多少人连接到你的节点，你也可以通过调整数字来实现。 rpcapi : 这个命令可以决定允许什么API通过RPC进入。在默认情况下，geth可以在RPC激活web3界面。请注意在RPC/IPC界面提供API，会使每个可以进入这个界面（例如dapp’s）的人都有权限访问这个API。注意你激活的是哪个API。Geth会默认激活IPC界面上所有的API，以及RPC界面上的db,eth,net和web3 API。 rpccorsdomain : 这个可以指示什么URL能连接到你的节点来执行RPC定制端任务。务必谨慎，输入一个特定的URL而不是wildcard ( * )，后者会使所有的URL都能连接到你的RPC实例。 创建新账户 &gt; personal.newAccount() Passphrase: Repeat passphrase: <span class="hljs-string">"0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699"</span> &gt; INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">02</span>:<span class="hljs-number">57</span>] New wallet appeared url=keystore:///home/ubuntu/private鈥[<span class="hljs-number">32</span>mstatus=Locked 开始挖矿，他会先自动更新一下 &gt; miner.<span class="hljs-keyword">start</span>() INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">22</span>] Updated mining threads threads=<span class="hljs-number">0</span> INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">22</span>] <span class="hljs-keyword">Transaction</span> pool price threshold updated price=<span class="hljs-number">18000000000</span> <span class="hljs-keyword">null</span> &gt; INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">22</span>] Starting mining operation INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">22</span>] <span class="hljs-keyword">Commit</span> new mining <span class="hljs-keyword">work</span> <span class="hljs-keyword">number</span>=<span class="hljs-number">1</span> txs=<span class="hljs-number">0</span> uncles=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">190.145</span>碌s INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">27</span>] Generating DAG <span class="hljs-keyword">in</span> progress epoch=<span class="hljs-number">0</span> percentage=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">3.072</span>s INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">29</span>] Generating DAG <span class="hljs-keyword">in</span> progress epoch=<span class="hljs-number">0</span> percentage=<span class="hljs-number">1</span> elapsed=<span class="hljs-number">5.604</span>s INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">32</span>] Generating DAG <span class="hljs-keyword">in</span> progress epoch=<span class="hljs-number">0</span> percentage=<span class="hljs-number">2</span> elapsed=<span class="hljs-number">8.263</span>s INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">34</span>] Generating DAG <span class="hljs-keyword">in</span> progress epoch=<span class="hljs-number">0</span> percentage=<span class="hljs-number">3</span> elapsed=<span class="hljs-number">10.788</span>s INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">37</span>] Generating DAG <span class="hljs-keyword">in</span> progress epoch=<span class="hljs-number">0</span> percentage=<span class="hljs-number">4</span> elapsed=<span class="hljs-number">13.659</span>s INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">03</span>:<span class="hljs-number">40</span>] Generating DAG <span class="hljs-keyword">in</span> progress ep 解锁 &gt; personal.unlockAccount(eth.accounts[<span class="hljs-number">0</span>]) Unlock account <span class="hljs-number">0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699</span> Passphrase: <span class="hljs-keyword">true</span> 发送交易，记住第一个账户的密码是<span class="hljs-number">123</span>，第二个账户是<span class="hljs-number">123</span> &gt;eth.sendTransaction({<span class="hljs-keyword">from</span>: <span class="hljs-string">"0x8260b02ac49855f9c00ff4275dc5291300517e30"</span>, <span class="hljs-keyword">to</span>: <span class="hljs-string">"0xf7f54ba52d6226c1f3d4417cc0d700616474681d"</span>, gas:<span class="hljs-number">31000</span>, <span class="hljs-string">'gasPrice'</span>: web3.toWei(<span class="hljs-number">300</span>, <span class="hljs-string">'gwei'</span>), <span class="hljs-string">"value"</span>: <span class="hljs-string">"1"</span>}) INFO [<span class="hljs-number">07</span>-<span class="hljs-number">02</span>|<span class="hljs-number">17</span>:<span class="hljs-number">12</span>:<span class="hljs-number">56</span>] Submitted <span class="hljs-keyword">transaction</span> fullhash=<span class="hljs-number">0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6</span> recipient=<span class="hljs-number">0xb4e2e2514eae3684157bf34a0cee2c07c431cf92</span> <span class="hljs-string">"0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6"</span> 矿池里面有未打包的交易 &gt; txpool.status { pending: <span class="hljs-number">1</span>, queued: <span class="hljs-number">0</span> } 查看区块，它里面有打包的交易 &gt; eth.getBlock(<span class="hljs-number">7</span>) { difficulty: <span class="hljs-number">239008</span>, extraData: <span class="hljs-string">"0xd783010606846765746887676f312e382e31856c696e7578"</span>, gasLimit: <span class="hljs-number">4265693055</span>, gasUsed: <span class="hljs-number">21000</span>, hash: <span class="hljs-string">"0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa"</span>, logsBloom: <span class="hljs-string">"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"</span>, miner: <span class="hljs-string">"0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699"</span>, mixHash: <span class="hljs-string">"0x85df2a283fde403380b168f6dd985ea5a308c651c772fe2cf9e2a1276a59c03f"</span>, nonce: <span class="hljs-string">"0x6ba641d5bc943a3c"</span>, <span class="hljs-keyword">number</span>: <span class="hljs-number">7</span>, parentHash: <span class="hljs-string">"0x391702b4c862252af99f58b09001c8dae8de209678f2d57247fe1610ee5132d5"</span>, receiptsRoot: <span class="hljs-string">"0xc570ba38565fc473b816fb9a3a1c4736b2b4155dea47ca35ee932c45d5922886"</span>, sha3Uncles: <span class="hljs-string">"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"</span>, <span class="hljs-keyword">size</span>: <span class="hljs-number">641</span>, stateRoot: <span class="hljs-string">"0xc488d58864a62b6711f19824cbb94af4ca1582da2909e235e3f269c4ca34d275"</span>, <span class="hljs-keyword">timestamp</span>: <span class="hljs-number">1498987154</span>, totalDifficulty: <span class="hljs-number">1984304</span>, transactions: [<span class="hljs-string">"0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6"</span>], transactionsRoot: <span class="hljs-string">"0x3cecf9cf166ff0cdadedfc145f6d1e45b108d15a07dd85650eb38236e4662c23"</span>, uncles: [] } 查看交易 &gt; eth.getTransaction(<span class="hljs-string">"0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6"</span>) { blockHash: <span class="hljs-string">"0x14be6ad6bc92187b106bbb6b9b867f9b422895186052483623ea972b22849eaa"</span>, blockNumber: <span class="hljs-number">7</span>, <span class="hljs-keyword">from</span>: <span class="hljs-string">"0x28b769b3b9109afd1e9e50a9312c5a3bfae8a699"</span>, gas: <span class="hljs-number">31000</span>, gasPrice: <span class="hljs-number">300000000000</span>, hash: <span class="hljs-string">"0x7ce0faae69bc502936dbd0b27de5e1eae4b9cb40f9812f0571b6e970bce933a6"</span>, <span class="hljs-keyword">input</span>: <span class="hljs-string">"0x"</span>, nonce: <span class="hljs-number">0</span>, r: <span class="hljs-string">"0x5e30add8d6726e4b5f542d5e77b78f7d111abda861c432b09304dc6422f27663"</span>, s: <span class="hljs-string">"0x10ef4e85481a9d507c8c07f4a8990f6b02abedab1c23dd838679f739b2b97ed4"</span>, <span class="hljs-keyword">to</span>: <span class="hljs-string">"0xb4e2e2514eae3684157bf34a0cee2c07c431cf92"</span>, transactionIndex: <span class="hljs-number">0</span>, v: <span class="hljs-string">"0x41"</span>, <span class="hljs-keyword">value</span>: <span class="hljs-number">1</span> } 现在查看未打包的交易为<span class="hljs-number">0</span> &gt; txpool.status { pending: <span class="hljs-number">0</span>, queued: <span class="hljs-number">0</span> }</span></code></pre> 
  <p>let source = “pragma solidity ^0.4.0;contract Calc{ /<em>区块链存储</em>/ uint count; /<em>执行会写入数据，所以需要<code>transaction</code>的方式执行。</em>/ function add(uint a, uint b) returns(uint){ count++; return a + b; } /<em>执行不会写入数据，所以允许<code>call</code>的方式执行。</em>/ function getCount() returns (uint){ return count; }}”;</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-778f64ae39.css" rel="stylesheet"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/74327876,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/74327876,&quot;}">阅读更多</a> 
</div> 
<script>
						(function(){
							function setArticleH(btnReadmore,posi){
								var winH = $(window).height();
								var articleBox = $("div.article_content");
								var artH = articleBox.height();
								if(artH > winH*posi){
									articleBox.css({
										'height':winH*posi+'px',
										'overflow':'hidden'
									})
									btnReadmore.click(function(){
										articleBox.removeAttr("style");
										$(this).parent().remove();
									})
								}else{
									btnReadmore.parent().remove();
								}
							}
							var btnReadmore = $("#btn-readmore");
							if(btnReadmore.length>0){
								if(currentUserName){
									setArticleH(btnReadmore,3);
								}else{
									setArticleH(btnReadmore,1.2);
								}
							}
						})()
					</script>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
