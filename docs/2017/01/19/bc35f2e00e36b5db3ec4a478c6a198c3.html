<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Hyperledger fablic 0.6 在centos7环境下的安装与部署 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Hyperledger fablic 0.6 在centos7环境下的安装与部署" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hyperledger Fabric超级账本 项目约定共同遵守的 基本原则 为：重视模块化设计，包括交易、合同、一致性、身份、存储等技术场景；代码可读性，保障新功能和模块都可以很容易添加和扩展；演化路线，随着需求的深入和更多的应用场景，不断增加和演化新的项目。 目录 Hyperledger Fabric超级账本 目录 一安装docker 二安装docker-compose 三下载镜像 四安装git 五使用PBFT模式 六开始部署chaincode 七权限管理 八超级账本资源管理页面 一、安装docker 执行代码如下： curl -sSL https://get.daocloud.io/docker | sh 安装完成后,查看安装情况： docker -v 二、安装docker-compose 先安装python-pip,具体安装步奏如下： 1.首先安装epel扩展源： sudo yum -y install epel-release 2.然后安装python-pip sudo yum -y install python-pip 3.安装完成后，清除以下缓存 cache sudo yum clean all 下面开始安装docker-compose 1.安装docker-compose: curl -L https://get.daocloud.io/docker/compose/releases/download/1.9.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose 2.查看安装情况： 配置以下docker镜像加速，目的是下载镜像速度更快: curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://860eaa91.m.daocloud.io 重启docker服务: sudo service docker restart 三、下载镜像 docker pull hyperledger/fabric-peer:x86_64-0.6.1-preview \ &amp;&amp; docker pull hyperledger/fabric-membersrvc:x86_64-0.6.1-preview \ &amp;&amp; docker pull yeasy/blockchain-explorer:latest \ &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-0.6.1-preview hyperledger/fabric-peer \ &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-0.6.1-preview hyperledger/fabric-baseimage \ &amp;&amp; docker tag hyperledger/fabric-membersrvc:x86_64-0.6.1-preview hyperledger/fabric-membersrvc 下载完成后，查看下载镜像 四、安装git 1.安装依赖包: sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 2.下载git源码并解压安装: $ wget https://github.com/git/git/archive/v2.3.0.zip $ unzip v2.3.0.zip $ cd git-2.3.0 3.编译安装: make prefix=/usr/local/git all sudo make prefix=/usr/local/git install 4.修改环境变量: sudo vim /etc/profile 然后在文件的最后一行，添加下面的内容，然后保存退出。 export PATH=/usr/local/git/bin:$PATH 5.使用source命令立即保存: source /etc/profile 6.查看版本 git version 五、使用PBFT模式 PBFT 是经典的分布式一致性算法，也是 hyperledger 目前最推荐的算法，该算法至少需要 4 个节点。 1.首先，下载 Compose 模板文件。 git clone https://github.com/yeasy/docker-compose-files 2.查看下载情况： 3.进入 hyperledger/0.6/pbft 目录，查看包括若干模板文件 以下节点可以快速启动的详细情况： 4-peers.yml: 启动 4 个 PBFT peer 节点。 4-peers-with-membersrvc.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点，并启用 CA 功能。 4-peers-with-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 Blockchain-explorer，可以通过 Web 界面监控集群状态。 4-peers-with-membersrvc-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能。 4.快速启动一个 4 个 PBFT 节点+1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能的集群: docker-compose -f 4-peers-with-membersrvc-explorer.yml up 六、开始部署chaincode 集群启动后，进入一个 VP 节点。以 pbft 模式为例，节点名称为 pbft_vp0_1 docker exec -it pbft_vp0_1 bash 部署example02 peer chaincode deploy -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 记录到环境变量 CC_ID 中。 CC_ID=&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; 查询 chaincode peer chaincode query -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 调用 chaincode peer chaincode invoke -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 再次查询a的值 peer chaincode query -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 到此已经完成超级账本的 转账的实例，每转一次，都会记录一个块。 七、权限管理 当启用了权限管理后，首先需要登录，例如以内置账户 jim 账户登录。 登录 vp0，并执行登录命令。 docker exec -it pbft_vp0_1 bash 用内置jim账户登录 peer network login jim 内置密码为： 6avZQLwcUe9b 登录情况如下图: 登录成功后，以下为具体操作。 首先部署交易资产 peer chaincode deploy -u jim -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 说明：部署时给a,b各初始值100 200 部署之后会产生一个name 值为： name:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; 把name值 赋给变量 CC_ID CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539 查询下赋值结果： echo ${CC_ID} 重要说明：部署成功后，会创建docker容器，创建docker容器会有延迟，所以有时查询不出来，等创建好了，在查询就可以啦。 可以看到创建了很多容器，如下图： 下面咱们来执行查询操作试试，查下a的值： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 查下b的值： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;b&quot;]}&#39; 下面咱们来执行下 转账操作： 如：a向b转账10元 peer chaincode invoke -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 转账成功后，咱们来执行下查询 a和b的值是多少： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;b&quot;]}&#39; peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 权限管理能正确 转账查询。 下面使用REST方式咱们来执行下查询： CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539 用这个CC_ID来做查询 POST HOST:7050/chaincode Request： { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 查询a的值为： Request： { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;b&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 查询b的值为： 这时，a是145，b是155 下面再执行以下 a向b转账35 { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;35&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 如图： 下面执行 查询 a,和 b的值，请求参数 如上，直接上图啦。 a的值为 120 b的值为180 下面查询以下区块信息： GET HOST:7050/chain/blocks/2 Response： { &quot;transactions&quot;: [ { &quot;type&quot;: 2, &quot;chaincodeID&quot;: &quot;EoABNzhjYTMyZmMxMjlmMDExMjllMDEwYzM3YTc4ZDU2ODhiODEyNjY1NWI5NDU2MTNkMjFiMmM2MGJjYjNlMTFkYTFjZGViYTljMjM1NjNjMzhmYTQ3MTc3YWYwZGU2ZTNkOTRmNjc4MWQzMDlhMzBlN2QxOTBhNjU1NWU3YWU0ZWY=&quot;, &quot;payload&quot;: &quot;Cp0BCAESgwESgAE3OGNhMzJmYzEyOWYwMTEyOWUwMTBjMzdhNzhkNTY4OGI4MTI2NjU1Yjk0NTYxM2QyMWIyYzYwYmNiM2UxMWRhMWNkZWJhOWMyMzU2M2MzOGZhNDcxNzdhZjBkZTZlM2Q5NGY2NzgxZDMwOWEzMGU3ZDE5MGE2NTU1ZTdhZTRlZhoTCgZpbnZva2UKAWEKAWIKAzEwMA==&quot;, &quot;txid&quot;: &quot;8616608f-9762-44cc-bc09-ef93b88eb770&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1484792805, &quot;nanos&quot;: 467224609 }, &quot;nonce&quot;: &quot;QTKtub7Nu/JJFXV5LhjcDYsxIViB27YF&quot;, &quot;cert&quot;: &quot;MIICQTCCAeegAwIBAgIQW9A+u+4IT7CRRcHJPxU1ZjAKBggqhkjOPQQDAzAxMQswCQYDVQQGEwJVUzEUMBIGA1UEChMLSHlwZXJsZWRnZXIxDDAKBgNVBAMTA3RjYTAeFw0xNzAxMTkwMjI0MjBaFw0xNzA0MTkwMjI0MjBaMEUxCzAJBgNVBAYTAlVTMRQwEgYDVQQKEwtIeXBlcmxlZGdlcjEgMB4GA1UEAxMXVHJhbnNhY3Rpb24gQ2VydGlmaWNhdGUwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQylvGqiwlIwjfef1J0o+2lBPEs0PQc90mooN/iQeJesX3Gw7hvX51NQ0R9Azhs3HzqwDT6/0oUJ5881BGCGufjo4HMMIHJMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwTQYGKgMEBQYHAQH/BEArLNyVnxK3ZTvPvUStqnu90Soz7fkorQD0znFSKd32vwi8nVzKPLKuziDfULFQskeHV7UAVL28xjKPXjpa4tOUMDoGBioDBAUGCAQwdCe6zf7KXUkQavqTErscZyXjnx3YI1QbmuNIiYXptTkzhPCI+tKPa5nMxwlBbqbNMAoGCCqGSM49BAMDA0gAMEUCIQC/tJPRxcPq4l4F3hWoLT6OWO5f1A9HG1aPyurduM4oowIgbTibDjL98J7Dt7fw3TBCMVBSDska9FwlddqdSE/3bWA=&quot;, &quot;signature&quot;: &quot;MEUCIQCTxcHIu3kL5AuTOS11tnV4wp35pDtdQ7QCfXMr9txPBAIgH64AARCnRinLNN7V69ha75sdVqOKn/OPKYDWHxofsFM=&quot; } ], &quot;stateHash&quot;: &quot;zHYqtOW0tZ9g1jbfaWgXB9udEETDocwet6HcsonKEJ9ncYZaCjLNAJS4Fao9W6AQR6FOkZR7FR7bvmocjtF00w==&quot;, &quot;previousBlockHash&quot;: &quot;Q3b82oFuJu0God7J4QGllDlAA4iW7cwu2yg6/oNnNQCAwYJXs/4WFgKXo75FGfdmvmeDputIQMdjc4vmrvkw8w==&quot;, &quot;consensusMetadata&quot;: &quot;CAI=&quot;, &quot;nonHashData&quot;: { &quot;localLedgerCommitTimestamp&quot;: { &quot;seconds&quot;: 1484794929, &quot;nanos&quot;: 31349065 }, &quot;chaincodeEvents&quot;: [ {} ] } } 如图： 到这里 REST请求完成。以上是权限管理的具体操作。 八、超级账本资源管理页面 下面我们来看下节点的端口，如下图： 这时我们在谷歌浏览器里就可以访问啦， HOST:9090 访问正常页面为： 查询的具体的信息，如下图： 查看交易详情，如下图： 到此，整个Hyperledger Fabric超级账本环境已经部署完成。 阅读更多" />
<meta property="og:description" content="Hyperledger Fabric超级账本 项目约定共同遵守的 基本原则 为：重视模块化设计，包括交易、合同、一致性、身份、存储等技术场景；代码可读性，保障新功能和模块都可以很容易添加和扩展；演化路线，随着需求的深入和更多的应用场景，不断增加和演化新的项目。 目录 Hyperledger Fabric超级账本 目录 一安装docker 二安装docker-compose 三下载镜像 四安装git 五使用PBFT模式 六开始部署chaincode 七权限管理 八超级账本资源管理页面 一、安装docker 执行代码如下： curl -sSL https://get.daocloud.io/docker | sh 安装完成后,查看安装情况： docker -v 二、安装docker-compose 先安装python-pip,具体安装步奏如下： 1.首先安装epel扩展源： sudo yum -y install epel-release 2.然后安装python-pip sudo yum -y install python-pip 3.安装完成后，清除以下缓存 cache sudo yum clean all 下面开始安装docker-compose 1.安装docker-compose: curl -L https://get.daocloud.io/docker/compose/releases/download/1.9.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose 2.查看安装情况： 配置以下docker镜像加速，目的是下载镜像速度更快: curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://860eaa91.m.daocloud.io 重启docker服务: sudo service docker restart 三、下载镜像 docker pull hyperledger/fabric-peer:x86_64-0.6.1-preview \ &amp;&amp; docker pull hyperledger/fabric-membersrvc:x86_64-0.6.1-preview \ &amp;&amp; docker pull yeasy/blockchain-explorer:latest \ &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-0.6.1-preview hyperledger/fabric-peer \ &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-0.6.1-preview hyperledger/fabric-baseimage \ &amp;&amp; docker tag hyperledger/fabric-membersrvc:x86_64-0.6.1-preview hyperledger/fabric-membersrvc 下载完成后，查看下载镜像 四、安装git 1.安装依赖包: sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 2.下载git源码并解压安装: $ wget https://github.com/git/git/archive/v2.3.0.zip $ unzip v2.3.0.zip $ cd git-2.3.0 3.编译安装: make prefix=/usr/local/git all sudo make prefix=/usr/local/git install 4.修改环境变量: sudo vim /etc/profile 然后在文件的最后一行，添加下面的内容，然后保存退出。 export PATH=/usr/local/git/bin:$PATH 5.使用source命令立即保存: source /etc/profile 6.查看版本 git version 五、使用PBFT模式 PBFT 是经典的分布式一致性算法，也是 hyperledger 目前最推荐的算法，该算法至少需要 4 个节点。 1.首先，下载 Compose 模板文件。 git clone https://github.com/yeasy/docker-compose-files 2.查看下载情况： 3.进入 hyperledger/0.6/pbft 目录，查看包括若干模板文件 以下节点可以快速启动的详细情况： 4-peers.yml: 启动 4 个 PBFT peer 节点。 4-peers-with-membersrvc.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点，并启用 CA 功能。 4-peers-with-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 Blockchain-explorer，可以通过 Web 界面监控集群状态。 4-peers-with-membersrvc-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能。 4.快速启动一个 4 个 PBFT 节点+1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能的集群: docker-compose -f 4-peers-with-membersrvc-explorer.yml up 六、开始部署chaincode 集群启动后，进入一个 VP 节点。以 pbft 模式为例，节点名称为 pbft_vp0_1 docker exec -it pbft_vp0_1 bash 部署example02 peer chaincode deploy -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 记录到环境变量 CC_ID 中。 CC_ID=&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; 查询 chaincode peer chaincode query -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 调用 chaincode peer chaincode invoke -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 再次查询a的值 peer chaincode query -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 到此已经完成超级账本的 转账的实例，每转一次，都会记录一个块。 七、权限管理 当启用了权限管理后，首先需要登录，例如以内置账户 jim 账户登录。 登录 vp0，并执行登录命令。 docker exec -it pbft_vp0_1 bash 用内置jim账户登录 peer network login jim 内置密码为： 6avZQLwcUe9b 登录情况如下图: 登录成功后，以下为具体操作。 首先部署交易资产 peer chaincode deploy -u jim -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 说明：部署时给a,b各初始值100 200 部署之后会产生一个name 值为： name:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; 把name值 赋给变量 CC_ID CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539 查询下赋值结果： echo ${CC_ID} 重要说明：部署成功后，会创建docker容器，创建docker容器会有延迟，所以有时查询不出来，等创建好了，在查询就可以啦。 可以看到创建了很多容器，如下图： 下面咱们来执行查询操作试试，查下a的值： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 查下b的值： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;b&quot;]}&#39; 下面咱们来执行下 转账操作： 如：a向b转账10元 peer chaincode invoke -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 转账成功后，咱们来执行下查询 a和b的值是多少： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;b&quot;]}&#39; peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 权限管理能正确 转账查询。 下面使用REST方式咱们来执行下查询： CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539 用这个CC_ID来做查询 POST HOST:7050/chaincode Request： { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 查询a的值为： Request： { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;b&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 查询b的值为： 这时，a是145，b是155 下面再执行以下 a向b转账35 { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;35&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 如图： 下面执行 查询 a,和 b的值，请求参数 如上，直接上图啦。 a的值为 120 b的值为180 下面查询以下区块信息： GET HOST:7050/chain/blocks/2 Response： { &quot;transactions&quot;: [ { &quot;type&quot;: 2, &quot;chaincodeID&quot;: &quot;EoABNzhjYTMyZmMxMjlmMDExMjllMDEwYzM3YTc4ZDU2ODhiODEyNjY1NWI5NDU2MTNkMjFiMmM2MGJjYjNlMTFkYTFjZGViYTljMjM1NjNjMzhmYTQ3MTc3YWYwZGU2ZTNkOTRmNjc4MWQzMDlhMzBlN2QxOTBhNjU1NWU3YWU0ZWY=&quot;, &quot;payload&quot;: &quot;Cp0BCAESgwESgAE3OGNhMzJmYzEyOWYwMTEyOWUwMTBjMzdhNzhkNTY4OGI4MTI2NjU1Yjk0NTYxM2QyMWIyYzYwYmNiM2UxMWRhMWNkZWJhOWMyMzU2M2MzOGZhNDcxNzdhZjBkZTZlM2Q5NGY2NzgxZDMwOWEzMGU3ZDE5MGE2NTU1ZTdhZTRlZhoTCgZpbnZva2UKAWEKAWIKAzEwMA==&quot;, &quot;txid&quot;: &quot;8616608f-9762-44cc-bc09-ef93b88eb770&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1484792805, &quot;nanos&quot;: 467224609 }, &quot;nonce&quot;: &quot;QTKtub7Nu/JJFXV5LhjcDYsxIViB27YF&quot;, &quot;cert&quot;: &quot;MIICQTCCAeegAwIBAgIQW9A+u+4IT7CRRcHJPxU1ZjAKBggqhkjOPQQDAzAxMQswCQYDVQQGEwJVUzEUMBIGA1UEChMLSHlwZXJsZWRnZXIxDDAKBgNVBAMTA3RjYTAeFw0xNzAxMTkwMjI0MjBaFw0xNzA0MTkwMjI0MjBaMEUxCzAJBgNVBAYTAlVTMRQwEgYDVQQKEwtIeXBlcmxlZGdlcjEgMB4GA1UEAxMXVHJhbnNhY3Rpb24gQ2VydGlmaWNhdGUwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQylvGqiwlIwjfef1J0o+2lBPEs0PQc90mooN/iQeJesX3Gw7hvX51NQ0R9Azhs3HzqwDT6/0oUJ5881BGCGufjo4HMMIHJMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwTQYGKgMEBQYHAQH/BEArLNyVnxK3ZTvPvUStqnu90Soz7fkorQD0znFSKd32vwi8nVzKPLKuziDfULFQskeHV7UAVL28xjKPXjpa4tOUMDoGBioDBAUGCAQwdCe6zf7KXUkQavqTErscZyXjnx3YI1QbmuNIiYXptTkzhPCI+tKPa5nMxwlBbqbNMAoGCCqGSM49BAMDA0gAMEUCIQC/tJPRxcPq4l4F3hWoLT6OWO5f1A9HG1aPyurduM4oowIgbTibDjL98J7Dt7fw3TBCMVBSDska9FwlddqdSE/3bWA=&quot;, &quot;signature&quot;: &quot;MEUCIQCTxcHIu3kL5AuTOS11tnV4wp35pDtdQ7QCfXMr9txPBAIgH64AARCnRinLNN7V69ha75sdVqOKn/OPKYDWHxofsFM=&quot; } ], &quot;stateHash&quot;: &quot;zHYqtOW0tZ9g1jbfaWgXB9udEETDocwet6HcsonKEJ9ncYZaCjLNAJS4Fao9W6AQR6FOkZR7FR7bvmocjtF00w==&quot;, &quot;previousBlockHash&quot;: &quot;Q3b82oFuJu0God7J4QGllDlAA4iW7cwu2yg6/oNnNQCAwYJXs/4WFgKXo75FGfdmvmeDputIQMdjc4vmrvkw8w==&quot;, &quot;consensusMetadata&quot;: &quot;CAI=&quot;, &quot;nonHashData&quot;: { &quot;localLedgerCommitTimestamp&quot;: { &quot;seconds&quot;: 1484794929, &quot;nanos&quot;: 31349065 }, &quot;chaincodeEvents&quot;: [ {} ] } } 如图： 到这里 REST请求完成。以上是权限管理的具体操作。 八、超级账本资源管理页面 下面我们来看下节点的端口，如下图： 这时我们在谷歌浏览器里就可以访问啦， HOST:9090 访问正常页面为： 查询的具体的信息，如下图： 查看交易详情，如下图： 到此，整个Hyperledger Fabric超级账本环境已经部署完成。 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/01/19/bc35f2e00e36b5db3ec4a478c6a198c3.html" />
<meta property="og:url" content="https://mlh.app/2017/01/19/bc35f2e00e36b5db3ec4a478c6a198c3.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-01-19T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"Hyperledger Fabric超级账本 项目约定共同遵守的 基本原则 为：重视模块化设计，包括交易、合同、一致性、身份、存储等技术场景；代码可读性，保障新功能和模块都可以很容易添加和扩展；演化路线，随着需求的深入和更多的应用场景，不断增加和演化新的项目。 目录 Hyperledger Fabric超级账本 目录 一安装docker 二安装docker-compose 三下载镜像 四安装git 五使用PBFT模式 六开始部署chaincode 七权限管理 八超级账本资源管理页面 一、安装docker 执行代码如下： curl -sSL https://get.daocloud.io/docker | sh 安装完成后,查看安装情况： docker -v 二、安装docker-compose 先安装python-pip,具体安装步奏如下： 1.首先安装epel扩展源： sudo yum -y install epel-release 2.然后安装python-pip sudo yum -y install python-pip 3.安装完成后，清除以下缓存 cache sudo yum clean all 下面开始安装docker-compose 1.安装docker-compose: curl -L https://get.daocloud.io/docker/compose/releases/download/1.9.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose 2.查看安装情况： 配置以下docker镜像加速，目的是下载镜像速度更快: curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://860eaa91.m.daocloud.io 重启docker服务: sudo service docker restart 三、下载镜像 docker pull hyperledger/fabric-peer:x86_64-0.6.1-preview \\ &amp;&amp; docker pull hyperledger/fabric-membersrvc:x86_64-0.6.1-preview \\ &amp;&amp; docker pull yeasy/blockchain-explorer:latest \\ &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-0.6.1-preview hyperledger/fabric-peer \\ &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-0.6.1-preview hyperledger/fabric-baseimage \\ &amp;&amp; docker tag hyperledger/fabric-membersrvc:x86_64-0.6.1-preview hyperledger/fabric-membersrvc 下载完成后，查看下载镜像 四、安装git 1.安装依赖包: sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker 2.下载git源码并解压安装: $ wget https://github.com/git/git/archive/v2.3.0.zip $ unzip v2.3.0.zip $ cd git-2.3.0 3.编译安装: make prefix=/usr/local/git all sudo make prefix=/usr/local/git install 4.修改环境变量: sudo vim /etc/profile 然后在文件的最后一行，添加下面的内容，然后保存退出。 export PATH=/usr/local/git/bin:$PATH 5.使用source命令立即保存: source /etc/profile 6.查看版本 git version 五、使用PBFT模式 PBFT 是经典的分布式一致性算法，也是 hyperledger 目前最推荐的算法，该算法至少需要 4 个节点。 1.首先，下载 Compose 模板文件。 git clone https://github.com/yeasy/docker-compose-files 2.查看下载情况： 3.进入 hyperledger/0.6/pbft 目录，查看包括若干模板文件 以下节点可以快速启动的详细情况： 4-peers.yml: 启动 4 个 PBFT peer 节点。 4-peers-with-membersrvc.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点，并启用 CA 功能。 4-peers-with-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 Blockchain-explorer，可以通过 Web 界面监控集群状态。 4-peers-with-membersrvc-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能。 4.快速启动一个 4 个 PBFT 节点+1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能的集群: docker-compose -f 4-peers-with-membersrvc-explorer.yml up 六、开始部署chaincode 集群启动后，进入一个 VP 节点。以 pbft 模式为例，节点名称为 pbft_vp0_1 docker exec -it pbft_vp0_1 bash 部署example02 peer chaincode deploy -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 记录到环境变量 CC_ID 中。 CC_ID=&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; 查询 chaincode peer chaincode query -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 调用 chaincode peer chaincode invoke -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 再次查询a的值 peer chaincode query -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 到此已经完成超级账本的 转账的实例，每转一次，都会记录一个块。 七、权限管理 当启用了权限管理后，首先需要登录，例如以内置账户 jim 账户登录。 登录 vp0，并执行登录命令。 docker exec -it pbft_vp0_1 bash 用内置jim账户登录 peer network login jim 内置密码为： 6avZQLwcUe9b 登录情况如下图: 登录成功后，以下为具体操作。 首先部署交易资产 peer chaincode deploy -u jim -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 说明：部署时给a,b各初始值100 200 部署之后会产生一个name 值为： name:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; 把name值 赋给变量 CC_ID CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539 查询下赋值结果： echo ${CC_ID} 重要说明：部署成功后，会创建docker容器，创建docker容器会有延迟，所以有时查询不出来，等创建好了，在查询就可以啦。 可以看到创建了很多容器，如下图： 下面咱们来执行查询操作试试，查下a的值： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 查下b的值： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;b&quot;]}&#39; 下面咱们来执行下 转账操作： 如：a向b转账10元 peer chaincode invoke -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 转账成功后，咱们来执行下查询 a和b的值是多少： peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;b&quot;]}&#39; peer chaincode query -u jim -n ${CC_ID} -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 权限管理能正确 转账查询。 下面使用REST方式咱们来执行下查询： CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539 用这个CC_ID来做查询 POST HOST:7050/chaincode Request： { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 查询a的值为： Request： { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;b&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 查询b的值为： 这时，a是145，b是155 下面再执行以下 a向b转账35 { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: 1, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;35&quot;] }, &quot;secureContext&quot;: &quot;jim&quot; }, &quot;id&quot;: 3 } 如图： 下面执行 查询 a,和 b的值，请求参数 如上，直接上图啦。 a的值为 120 b的值为180 下面查询以下区块信息： GET HOST:7050/chain/blocks/2 Response： { &quot;transactions&quot;: [ { &quot;type&quot;: 2, &quot;chaincodeID&quot;: &quot;EoABNzhjYTMyZmMxMjlmMDExMjllMDEwYzM3YTc4ZDU2ODhiODEyNjY1NWI5NDU2MTNkMjFiMmM2MGJjYjNlMTFkYTFjZGViYTljMjM1NjNjMzhmYTQ3MTc3YWYwZGU2ZTNkOTRmNjc4MWQzMDlhMzBlN2QxOTBhNjU1NWU3YWU0ZWY=&quot;, &quot;payload&quot;: &quot;Cp0BCAESgwESgAE3OGNhMzJmYzEyOWYwMTEyOWUwMTBjMzdhNzhkNTY4OGI4MTI2NjU1Yjk0NTYxM2QyMWIyYzYwYmNiM2UxMWRhMWNkZWJhOWMyMzU2M2MzOGZhNDcxNzdhZjBkZTZlM2Q5NGY2NzgxZDMwOWEzMGU3ZDE5MGE2NTU1ZTdhZTRlZhoTCgZpbnZva2UKAWEKAWIKAzEwMA==&quot;, &quot;txid&quot;: &quot;8616608f-9762-44cc-bc09-ef93b88eb770&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1484792805, &quot;nanos&quot;: 467224609 }, &quot;nonce&quot;: &quot;QTKtub7Nu/JJFXV5LhjcDYsxIViB27YF&quot;, &quot;cert&quot;: &quot;MIICQTCCAeegAwIBAgIQW9A+u+4IT7CRRcHJPxU1ZjAKBggqhkjOPQQDAzAxMQswCQYDVQQGEwJVUzEUMBIGA1UEChMLSHlwZXJsZWRnZXIxDDAKBgNVBAMTA3RjYTAeFw0xNzAxMTkwMjI0MjBaFw0xNzA0MTkwMjI0MjBaMEUxCzAJBgNVBAYTAlVTMRQwEgYDVQQKEwtIeXBlcmxlZGdlcjEgMB4GA1UEAxMXVHJhbnNhY3Rpb24gQ2VydGlmaWNhdGUwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQylvGqiwlIwjfef1J0o+2lBPEs0PQc90mooN/iQeJesX3Gw7hvX51NQ0R9Azhs3HzqwDT6/0oUJ5881BGCGufjo4HMMIHJMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwTQYGKgMEBQYHAQH/BEArLNyVnxK3ZTvPvUStqnu90Soz7fkorQD0znFSKd32vwi8nVzKPLKuziDfULFQskeHV7UAVL28xjKPXjpa4tOUMDoGBioDBAUGCAQwdCe6zf7KXUkQavqTErscZyXjnx3YI1QbmuNIiYXptTkzhPCI+tKPa5nMxwlBbqbNMAoGCCqGSM49BAMDA0gAMEUCIQC/tJPRxcPq4l4F3hWoLT6OWO5f1A9HG1aPyurduM4oowIgbTibDjL98J7Dt7fw3TBCMVBSDska9FwlddqdSE/3bWA=&quot;, &quot;signature&quot;: &quot;MEUCIQCTxcHIu3kL5AuTOS11tnV4wp35pDtdQ7QCfXMr9txPBAIgH64AARCnRinLNN7V69ha75sdVqOKn/OPKYDWHxofsFM=&quot; } ], &quot;stateHash&quot;: &quot;zHYqtOW0tZ9g1jbfaWgXB9udEETDocwet6HcsonKEJ9ncYZaCjLNAJS4Fao9W6AQR6FOkZR7FR7bvmocjtF00w==&quot;, &quot;previousBlockHash&quot;: &quot;Q3b82oFuJu0God7J4QGllDlAA4iW7cwu2yg6/oNnNQCAwYJXs/4WFgKXo75FGfdmvmeDputIQMdjc4vmrvkw8w==&quot;, &quot;consensusMetadata&quot;: &quot;CAI=&quot;, &quot;nonHashData&quot;: { &quot;localLedgerCommitTimestamp&quot;: { &quot;seconds&quot;: 1484794929, &quot;nanos&quot;: 31349065 }, &quot;chaincodeEvents&quot;: [ {} ] } } 如图： 到这里 REST请求完成。以上是权限管理的具体操作。 八、超级账本资源管理页面 下面我们来看下节点的端口，如下图： 这时我们在谷歌浏览器里就可以访问啦， HOST:9090 访问正常页面为： 查询的具体的信息，如下图： 查看交易详情，如下图： 到此，整个Hyperledger Fabric超级账本环境已经部署完成。 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/01/19/bc35f2e00e36b5db3ec4a478c6a198c3.html","headline":"Hyperledger fablic 0.6 在centos7环境下的安装与部署","dateModified":"2017-01-19T00:00:00+08:00","datePublished":"2017-01-19T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/01/19/bc35f2e00e36b5db3ec4a478c6a198c3.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>Hyperledger fablic 0.6 在centos7环境下的安装与部署</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <h1 id="hyperledger-fabric超级账本">Hyperledger Fabric超级账本</h1> 
  <blockquote> 
   <p>项目约定共同遵守的 基本原则 为：重视模块化设计，包括交易、合同、一致性、身份、存储等技术场景；代码可读性，保障新功能和模块都可以很容易添加和扩展；演化路线，随着需求的深入和更多的应用场景，不断增加和演化新的项目。</p> 
  </blockquote> 
  <hr> 
  <h3 id="目录">目录</h3> 
  <p></p>
  <div class="toc">
   <div class="toc"> 
    <ul> 
     <li><a href="#hyperledger-fabric超级账本" rel="nofollow">Hyperledger Fabric超级账本</a>
      <ul> 
       <li>
        <ul> 
         <li><a href="#目录" rel="nofollow">目录</a></li> 
         <li><a href="#一安装docker" rel="nofollow">一安装docker</a></li> 
         <li><a href="#二安装docker-compose" rel="nofollow">二安装docker-compose</a></li> 
         <li><a href="#三下载镜像" rel="nofollow">三下载镜像</a></li> 
         <li><a href="#四安装git" rel="nofollow">四安装git</a></li> 
         <li><a href="#五使用pbft模式" rel="nofollow">五使用PBFT模式</a></li> 
         <li><a href="#六开始部署chaincode" rel="nofollow">六开始部署chaincode</a></li> 
         <li><a href="#七权限管理" rel="nofollow">七权限管理</a></li> 
         <li><a href="#八超级账本资源管理页面" rel="nofollow">八超级账本资源管理页面</a></li> 
        </ul> </li> 
      </ul> </li> 
    </ul> 
   </div> 
  </div> 
  <p></p> 
  <hr> 
  <h3 id="一安装docker">一、安装docker</h3> 
  <ul> 
   <li>执行代码如下：</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">curl -sSL https://get.daocloud.io/docker | sh</code></pre> 
  <ul> 
   <li>安装完成后,查看安装情况：</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">docker -v</code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117152113657?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <h3 id="二安装docker-compose">二、安装docker-compose</h3> 
  <blockquote> 
   <p>先安装python-pip,具体安装步奏如下：</p> 
  </blockquote> 
  <ul> 
   <li>1.首先安装epel扩展源：</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">sudo yum -y install epel-release</code></pre> 
  <ul> 
   <li>2.然后安装python-pip</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">sudo yum -y install python-pip</code></pre> 
  <ul> 
   <li>3.安装完成后，清除以下缓存 cache</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">sudo yum clean all</code></pre> 
  <blockquote> 
   <p>下面开始安装docker-compose</p> 
  </blockquote> 
  <ul> 
   <li>1.安装docker-compose:</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">curl -L https://get.daocloud.io/docker/compose/releases/download/<span class="hljs-number">1.9</span><span class="hljs-number">.0</span>/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</code></pre> 
  <pre class="prettyprint"><code class="language-python hljs ">chmod +x /usr/local/bin/docker-compose</code></pre> 
  <ul> 
   <li>2.查看安装情况：</li> 
  </ul> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117153210358?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>配置以下docker镜像加速，目的是下载镜像速度更快:</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://<span class="hljs-number">860</span>eaa91.m.daocloud.io</code></pre> 
  <blockquote> 
   <p>重启docker服务:</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">sudo service docker restart</code></pre> 
  <h3 id="三下载镜像">三、下载镜像</h3> 
  <pre class="prettyprint"><code class="language-python hljs "> docker pull hyperledger/fabric-peer:x86_64-<span class="hljs-number">0.6</span><span class="hljs-number">.1</span>-preview \
  &amp;&amp; docker pull hyperledger/fabric-membersrvc:x86_64-<span class="hljs-number">0.6</span><span class="hljs-number">.1</span>-preview \
  &amp;&amp; docker pull yeasy/blockchain-explorer:latest \
  &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-<span class="hljs-number">0.6</span><span class="hljs-number">.1</span>-preview hyperledger/fabric-peer \
  &amp;&amp; docker tag hyperledger/fabric-peer:x86_64-<span class="hljs-number">0.6</span><span class="hljs-number">.1</span>-preview hyperledger/fabric-baseimage \
  &amp;&amp; docker tag hyperledger/fabric-membersrvc:x86_64-<span class="hljs-number">0.6</span><span class="hljs-number">.1</span>-preview hyperledger/fabric-membersrvc</code></pre> 
  <ul> 
   <li>下载完成后，查看下载镜像</li> 
  </ul> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117153525271?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <h3 id="四安装git">四、安装git</h3> 
  <blockquote> 
   <p>1.安装依赖包:</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker</code></pre> 
  <blockquote> 
   <p>2.下载git源码并解压安装:</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">$ wget https://github.com/git/git/archive/v2<span class="hljs-number">.3</span><span class="hljs-number">.0</span>.zip
$ unzip v2<span class="hljs-number">.3</span><span class="hljs-number">.0</span>.zip
$ cd git-<span class="hljs-number">2.3</span><span class="hljs-number">.0</span></code></pre> 
  <blockquote> 
   <p>3.编译安装:</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">make prefix=/usr/local/git all
sudo make prefix=/usr/local/git install</code></pre> 
  <blockquote> 
   <p>4.修改环境变量:</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">sudo vim /etc/profile
然后在文件的最后一行，添加下面的内容，然后保存退出。
export PATH=/usr/local/git/bin:$PATH</code></pre> 
  <blockquote> 
   <p>5.使用source命令立即保存:</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">source /etc/profile</code></pre> 
  <blockquote> 
   <p>6.查看版本</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">git version </code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117154151566?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <h3 id="五使用pbft模式">五、使用PBFT模式</h3> 
  <blockquote> 
   <p>PBFT 是经典的分布式一致性算法，也是 hyperledger 目前最推荐的算法，该算法至少需要 4 个节点。</p> 
  </blockquote> 
  <ul> 
   <li>1.首先，下载 Compose 模板文件。</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">git clone https://github.com/yeasy/docker-compose-files</code></pre> 
  <ul> 
   <li>2.查看下载情况：</li> 
  </ul> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117154503896?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <ul> 
   <li>3.进入 hyperledger/0.6/pbft 目录，查看包括若干模板文件</li> 
  </ul> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117154706427?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>以下节点可以快速启动的详细情况： <br> 4-peers.yml: 启动 4 个 PBFT peer 节点。 <br> 4-peers-with-membersrvc.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点，并启用 CA 功能。 <br> 4-peers-with-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 Blockchain-explorer，可以通过 Web 界面监控集群状态。 <br> 4-peers-with-membersrvc-explorer.yml: 启动 4 个 PBFT peer 节点 + 1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能。</p> 
  </blockquote> 
  <ul> 
   <li>4.快速启动一个 4 个 PBFT 节点+1 个 CA 节点 + 1 个 Blockchain-explorer，并启用 CA 功能的集群:</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">docker-compose -f <span class="hljs-number">4</span>-peers-<span class="hljs-keyword">with</span>-membersrvc-explorer.yml up</code></pre> 
  <h3 id="六开始部署chaincode">六、开始部署chaincode</h3> 
  <ul> 
   <li>集群启动后，进入一个 VP 节点。以 pbft 模式为例，节点名称为 pbft_vp0_1</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">docker <span class="hljs-keyword">exec</span> -it pbft_vp0_1 bash</code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117155001288?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <ul> 
   <li>部署example02</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs "> peer chaincode deploy -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c <span class="hljs-string">'{"Function":"init", "Args": ["a","100", "b", "200"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117155220591?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <ul> 
   <li>记录到环境变量 CC_ID 中。</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">CC_ID=<span class="hljs-string">"ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539"</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117155233759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <ul> 
   <li>查询 chaincode</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode query -n ${CC_ID} -c <span class="hljs-string">'{"Function": "query", "Args": ["a"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117155547651?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <ul> 
   <li>调用 chaincode</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode invoke -n ${CC_ID} -c <span class="hljs-string">'{"Function": "invoke", "Args": ["a", "b", "10"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117155614542?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <ul> 
   <li>再次查询a的值</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode query -n ${CC_ID} -c <span class="hljs-string">'{"Function": "query", "Args": ["a"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170117155635456?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""> <br> 到此已经完成超级账本的 转账的实例，每转一次，都会记录一个块。</p> 
  <h3 id="七权限管理">七、权限管理</h3> 
  <blockquote> 
   <p>当启用了权限管理后，首先需要登录，例如以内置账户 jim 账户登录。 <br> 登录 vp0，并执行登录命令。</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">docker <span class="hljs-keyword">exec</span> -it pbft_vp0_1 bash</code></pre> 
  <p>用内置jim账户登录</p> 
  <pre class="prettyprint"><code class="language-python hljs ">peer network login jim</code></pre> 
  <p>内置密码为：</p> 
  <pre class="prettyprint"><code class="language-python hljs "><span class="hljs-number">6</span>avZQLwcUe9b</code></pre> 
  <blockquote> 
   <p>登录情况如下图:</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119150515705?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>登录成功后，以下为具体操作。</p> 
  </blockquote> 
  <ul> 
   <li>首先部署交易资产</li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode deploy -u jim -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c <span class="hljs-string">'{"Function":"init", "Args": ["a","100", "b", "200"]}'</span></code></pre> 
  <blockquote> 
   <p>说明：部署时给a,b各初始值100 200</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119151147927?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>部署之后会产生一个name 值为：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">name:<span class="hljs-string">"ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539"</span> </code></pre> 
  <blockquote> 
   <p>把name值 赋给变量 CC_ID</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539</code></pre> 
  <blockquote> 
   <p>查询下赋值结果：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">echo ${CC_ID}</code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119151613883?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>重要说明：部署成功后，会创建docker容器，创建docker容器会有延迟，所以有时查询不出来，等创建好了，在查询就可以啦。 <br> 可以看到创建了很多容器，如下图：</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119155521871?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" title=""></p> 
  <blockquote> 
   <p>下面咱们来执行查询操作试试，查下a的值：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode query -u jim -n ${CC_ID} -c <span class="hljs-string">'{"Function": "query", "Args": ["a"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119151931759?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>查下b的值：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode query -u jim -n ${CC_ID} -c <span class="hljs-string">'{"Function": "query", "Args": ["b"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119152042805?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>下面咱们来执行下 转账操作： <br> 如：a向b转账10元</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode invoke -u jim -n ${CC_ID} -c <span class="hljs-string">'{"Function": "invoke", "Args": ["a", "b", "10"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119152301542?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>转账成功后，咱们来执行下查询 a和b的值是多少：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode query -u jim -n ${CC_ID} -c <span class="hljs-string">'{"Function": "query", "Args": ["b"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119152759278?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <pre class="prettyprint"><code class="language-python hljs ">peer chaincode query -u jim -n ${CC_ID} -c <span class="hljs-string">'{"Function": "query", "Args": ["a"]}'</span></code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119152858956?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>权限管理能正确 转账查询。</p> 
  </blockquote> 
  <p><strong>下面使用REST方式咱们来执行下查询：</strong></p> 
  <pre class="prettyprint"><code class="language-python hljs ">CC_ID=ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539</code></pre> 
  <blockquote> 
   <p>用这个CC_ID来做查询</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">POST  HOST:<span class="hljs-number">7050</span>/chaincode</code></pre> 
  <blockquote> 
   <p>Request：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"query"</span>,
  <span class="hljs-string">"params"</span>: {
      <span class="hljs-string">"type"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-string">"chaincodeID"</span>:{
          <span class="hljs-string">"name"</span>:<span class="hljs-string">"ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539"</span>
      },
      <span class="hljs-string">"ctorMsg"</span>: {
         <span class="hljs-string">"function"</span>:<span class="hljs-string">"query"</span>,
         <span class="hljs-string">"args"</span>:[<span class="hljs-string">"a"</span>]
      },
    <span class="hljs-string">"secureContext"</span>: <span class="hljs-string">"jim"</span>
  },
  <span class="hljs-string">"id"</span>: <span class="hljs-number">3</span>
}</code></pre> 
  <blockquote> 
   <p>查询a的值为：</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119154134847?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>Request：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"query"</span>,
  <span class="hljs-string">"params"</span>: {
      <span class="hljs-string">"type"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-string">"chaincodeID"</span>:{
          <span class="hljs-string">"name"</span>:<span class="hljs-string">"ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539"</span>
      },
      <span class="hljs-string">"ctorMsg"</span>: {
         <span class="hljs-string">"function"</span>:<span class="hljs-string">"query"</span>,
         <span class="hljs-string">"args"</span>:[<span class="hljs-string">"b"</span>]
      },
    <span class="hljs-string">"secureContext"</span>: <span class="hljs-string">"jim"</span>
  },
  <span class="hljs-string">"id"</span>: <span class="hljs-number">3</span>
}</code></pre> 
  <blockquote> 
   <p>查询b的值为：</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119154301679?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>这时，<strong>a是145，b是155</strong></p> 
  </blockquote> 
  <ul> 
   <li>下面再执行以下 <strong>a向b转账35</strong></li> 
  </ul> 
  <pre class="prettyprint"><code class="language-python hljs ">{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"invoke"</span>,
  <span class="hljs-string">"params"</span>: {
      <span class="hljs-string">"type"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-string">"chaincodeID"</span>:{
          <span class="hljs-string">"name"</span>:<span class="hljs-string">"ee5b24a1f17c356dd5f6e37307922e39ddba12e5d2e203ed93401d7d05eb0dd194fb9070549c5dc31eb63f4e654dbd5a1d86cbb30c48e3ab1812590cd0f78539"</span>
      },
      <span class="hljs-string">"ctorMsg"</span>: {
         <span class="hljs-string">"function"</span>:<span class="hljs-string">"invoke"</span>,
         <span class="hljs-string">"args"</span>:[<span class="hljs-string">"a"</span>,<span class="hljs-string">"b"</span>,<span class="hljs-string">"35"</span>]
      },
    <span class="hljs-string">"secureContext"</span>: <span class="hljs-string">"jim"</span>
  },
  <span class="hljs-string">"id"</span>: <span class="hljs-number">3</span>
}</code></pre> 
  <blockquote> 
   <p>如图：</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119154628715?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>下面执行 查询 a,和 b的值，请求参数 如上，直接上图啦。 <br> a的值为 <strong>120</strong></p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119154829758?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>b的值为<strong>180</strong></p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119154912758?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>下面查询以下区块信息：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">GET  HOST:<span class="hljs-number">7050</span>/chain/blocks/<span class="hljs-number">2</span></code></pre> 
  <blockquote> 
   <p>Response：</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">{
  <span class="hljs-string">"transactions"</span>: [
    {
      <span class="hljs-string">"type"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-string">"chaincodeID"</span>: <span class="hljs-string">"EoABNzhjYTMyZmMxMjlmMDExMjllMDEwYzM3YTc4ZDU2ODhiODEyNjY1NWI5NDU2MTNkMjFiMmM2MGJjYjNlMTFkYTFjZGViYTljMjM1NjNjMzhmYTQ3MTc3YWYwZGU2ZTNkOTRmNjc4MWQzMDlhMzBlN2QxOTBhNjU1NWU3YWU0ZWY="</span>,
      <span class="hljs-string">"payload"</span>: <span class="hljs-string">"Cp0BCAESgwESgAE3OGNhMzJmYzEyOWYwMTEyOWUwMTBjMzdhNzhkNTY4OGI4MTI2NjU1Yjk0NTYxM2QyMWIyYzYwYmNiM2UxMWRhMWNkZWJhOWMyMzU2M2MzOGZhNDcxNzdhZjBkZTZlM2Q5NGY2NzgxZDMwOWEzMGU3ZDE5MGE2NTU1ZTdhZTRlZhoTCgZpbnZva2UKAWEKAWIKAzEwMA=="</span>,
      <span class="hljs-string">"txid"</span>: <span class="hljs-string">"8616608f-9762-44cc-bc09-ef93b88eb770"</span>,
      <span class="hljs-string">"timestamp"</span>: {
        <span class="hljs-string">"seconds"</span>: <span class="hljs-number">1484792805</span>,
        <span class="hljs-string">"nanos"</span>: <span class="hljs-number">467224609</span>
      },
      <span class="hljs-string">"nonce"</span>: <span class="hljs-string">"QTKtub7Nu/JJFXV5LhjcDYsxIViB27YF"</span>,
      <span class="hljs-string">"cert"</span>: <span class="hljs-string">"MIICQTCCAeegAwIBAgIQW9A+u+4IT7CRRcHJPxU1ZjAKBggqhkjOPQQDAzAxMQswCQYDVQQGEwJVUzEUMBIGA1UEChMLSHlwZXJsZWRnZXIxDDAKBgNVBAMTA3RjYTAeFw0xNzAxMTkwMjI0MjBaFw0xNzA0MTkwMjI0MjBaMEUxCzAJBgNVBAYTAlVTMRQwEgYDVQQKEwtIeXBlcmxlZGdlcjEgMB4GA1UEAxMXVHJhbnNhY3Rpb24gQ2VydGlmaWNhdGUwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQylvGqiwlIwjfef1J0o+2lBPEs0PQc90mooN/iQeJesX3Gw7hvX51NQ0R9Azhs3HzqwDT6/0oUJ5881BGCGufjo4HMMIHJMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwTQYGKgMEBQYHAQH/BEArLNyVnxK3ZTvPvUStqnu90Soz7fkorQD0znFSKd32vwi8nVzKPLKuziDfULFQskeHV7UAVL28xjKPXjpa4tOUMDoGBioDBAUGCAQwdCe6zf7KXUkQavqTErscZyXjnx3YI1QbmuNIiYXptTkzhPCI+tKPa5nMxwlBbqbNMAoGCCqGSM49BAMDA0gAMEUCIQC/tJPRxcPq4l4F3hWoLT6OWO5f1A9HG1aPyurduM4oowIgbTibDjL98J7Dt7fw3TBCMVBSDska9FwlddqdSE/3bWA="</span>,
      <span class="hljs-string">"signature"</span>: <span class="hljs-string">"MEUCIQCTxcHIu3kL5AuTOS11tnV4wp35pDtdQ7QCfXMr9txPBAIgH64AARCnRinLNN7V69ha75sdVqOKn/OPKYDWHxofsFM="</span>
    }
  ],
  <span class="hljs-string">"stateHash"</span>: <span class="hljs-string">"zHYqtOW0tZ9g1jbfaWgXB9udEETDocwet6HcsonKEJ9ncYZaCjLNAJS4Fao9W6AQR6FOkZR7FR7bvmocjtF00w=="</span>,
  <span class="hljs-string">"previousBlockHash"</span>: <span class="hljs-string">"Q3b82oFuJu0God7J4QGllDlAA4iW7cwu2yg6/oNnNQCAwYJXs/4WFgKXo75FGfdmvmeDputIQMdjc4vmrvkw8w=="</span>,
  <span class="hljs-string">"consensusMetadata"</span>: <span class="hljs-string">"CAI="</span>,
  <span class="hljs-string">"nonHashData"</span>: {
    <span class="hljs-string">"localLedgerCommitTimestamp"</span>: {
      <span class="hljs-string">"seconds"</span>: <span class="hljs-number">1484794929</span>,
      <span class="hljs-string">"nanos"</span>: <span class="hljs-number">31349065</span>
    },
    <span class="hljs-string">"chaincodeEvents"</span>: [
      {}
    ]
  }
}</code></pre> 
  <blockquote> 
   <p>如图：</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119155134598?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p><strong>到这里 REST请求完成。以上是权限管理的具体操作。</strong></p> 
  </blockquote> 
  <h3 id="八超级账本资源管理页面">八、超级账本资源管理页面</h3> 
  <blockquote> 
   <p>下面我们来看下节点的端口，如下图：</p> 
  </blockquote> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119155802997?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p>这时我们在谷歌浏览器里就可以访问啦，</p> 
  </blockquote> 
  <pre class="prettyprint"><code class="language-python hljs ">HOST:<span class="hljs-number">9090</span></code></pre> 
  <p><strong>访问正常页面为：</strong></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170124103149512?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p><strong>查询的具体的信息，如下图：</strong></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119160746797?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p><strong>查看交易详情，如下图：</strong></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170119160802901?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemhhb2xpYW5nMTEzMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <blockquote> 
   <p><strong>到此，整个Hyperledger Fabric超级账本环境已经部署完成。</strong></p> 
  </blockquote> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zhaoliang1131/article/details/54617274,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zhaoliang1131/article/details/54617274,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
