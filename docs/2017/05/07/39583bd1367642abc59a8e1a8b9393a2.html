<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>支付宝支付-刷卡支付(条码支付)详解-酷玩时刻-by javen(凡事皆有终结,耐心是赢得成功的一种手段 微信公众号:javenlife) | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="支付宝支付-刷卡支付(条码支付)详解-酷玩时刻-by javen(凡事皆有终结,耐心是赢得成功的一种手段 微信公众号:javenlife)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="版权声明：本文为博主原创文章，欢迎转载,转载标明出处(http://blog.csdn.net/zyw_java)。微信公众号:javenlife https://blog.csdn.net/zyw_java/article/details/71372789 此项目已开源欢迎Start、PR、发起Issues一起讨论交流共同进步 https://github.com/Javen205/IJPay http://git.oschina.net/javen205/IJPay 在官方的产品是叫做当面付 1、什么是当面付呢？ 简单的讲就是条码支付(刷卡支付)、扫码支付、声波支付。 【官方是这样解释的】 商户可通过以下任一方式在线下完成交易收款都是当面付： 1、商家通过扫描线下买家支付宝钱包中的条码、二维码等方式将买家的交易资金直接打入卖家支付宝账户，资金实时到账； 2、线下买家通过使用支付宝钱包扫描商家的二维码等方式完成支付，提升商家收银效率，资金实时到账； 3、线下买家使用支付宝钱包中的当面付功能，通过声波支付的方式向商家完成付款，资金实时到账。 2、申请条件 申请前必须拥有企业或个人支付宝账号，且通过支付宝实名认证审核； 营业执照主体需与签约主体一致，如不一致者需提供有效授权函；授权函要求：公司类型必须盖公章、个体工商户需两选一： a. 法人身份证原件+法人签字 b. 法人身份证原件+个体工商户盖章； 部分行业暂未开放签约，如保险、黄金期货、借贷（P2P）、POS等支付业务等； 3、产品费率 单笔费率 0.6% 4、签约认证流程 如果你只是想了解支付流程可以不进行签约，我们可以使用沙箱环境进行测试。 5、聊聊条码支付(刷卡支付） 官方文档 当面付详细的产品介绍在这里 条码支付是支付宝给到线下传统行业的一种收款方式。商家使用扫码枪等条码识别设备扫描用户支付宝钱包上的条码/二维码，完成收款。用户仅需出示付款码，所有收款操作由商家端完成。 使用步骤： 1、用户登录支付宝钱包，点击首页“付款”，进入付款码界面； 2、收银员在商家收银系统操作生成订单，用户确认支付金额； 3、用户出示钱包的“付款码”，收银员用扫码设备来扫描用户手机上的条码/二维码后，商家收银系统提交支付； 4、付款成功后商家收银系统会拿到支付成功或者失败的结果。 6、如何接入条码支付(刷卡支付）呢？ 官方接入介绍资料 当面付快速接入 前三步任何支付方式对接必不可少,这些按照文档操作应该没有问题。如遇到问题欢迎留言 今天的主角要登场了&gt;&gt;&gt;&gt;&gt;&gt;条码支付 这里主要涉及到三个接口 交易支付接口alipay.trade.pay 交易查询接口alipay.trade.query 交易撤销接口alipay.trade.cancel 这里我们使用官方提供的服务端SDK(开放平台服务端SDK)来快速接入 7、选择正确的接入环境 ��上面提到过如果是测试或者不上线应用可以不用签约直接使用沙箱环境 正式环境支付网关:https://openapi.alipay.com/gateway.do 沙盒环境支付网关:https://openapi.alipaydev.com/gateway.do 8、使用SDK封装接口 添加支付宝相关的配置文件 alipay.properties ############################ # 支付宝相关的配置 ############################ appId=xxx //测试号的APPID privateKey=xxx //测试号的私钥 建议使用RSA2 alipayPulicKey=xxx //支付宝公钥 serverUrl=https://openapi.alipaydev.com/gateway.do //支付网关 notify_domain = xxx //通知域名 8.1 在SDK调用前需要进行初始化 private static final Prop prop = PropKit.use(&quot;alipay.properties&quot;); public static AlipayClient alipayClient; public static String charset = &quot;UTF-8&quot;; public static String privateKey = prop.get(&quot;privateKey&quot;); public static String alipayPulicKey = prop.get(&quot;alipayPulicKey&quot;); public static String serverUrl = prop.get(&quot;serverUrl&quot;); public static String appId = prop.get(&quot;appId&quot;); public static String format = &quot;json&quot;; public static String signType = &quot;RSA2&quot;; public static String notify_domain = prop.get(&quot;notify_domain&quot;); static { alipayClient = new DefaultAlipayClient(serverUrl, appId, privateKey, format, charset, alipayPulicKey, signType); } 8.2 封装交易支付接口alipay.trade.pay /** * 条形码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 * @throws AlipayApiException */ public static String tradePay(AlipayTradePayModel model) throws AlipayApiException { AlipayTradePayResponse response = tradePayToResponse(model); return response.getBody(); } public static AlipayTradePayResponse tradePayToResponse(AlipayTradePayModel model) throws AlipayApiException{ AlipayTradePayRequest request = new AlipayTradePayRequest(); request.setBizModel(model);// 填充业务参数 return alipayClient.execute(request); // 通过alipayClient调用API，获得对应的response类 } 8.3 交易查询接口alipay.trade.query /** * 交易查询接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.8H2JzG&amp;docType=4&amp;apiId=757 * @param bizContent * @return * @throws AlipayApiException */ public static boolean isTradeQuery(AlipayTradeQueryModel model) throws AlipayApiException{ AlipayTradeQueryResponse response = tradeQuery(model); if(response.isSuccess()){ return true; } return false; } public static AlipayTradeQueryResponse tradeQuery(AlipayTradeQueryModel model) throws AlipayApiException{ AlipayTradeQueryRequest request = new AlipayTradeQueryRequest(); request.setBizModel(model); return alipayClient.execute(request); } 8.4 交易撤销接口alipay.trade.cancel /** * 交易撤销接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.XInh6e&amp;docType=4&amp;apiId=866 * @param bizContent * @return * @throws AlipayApiException */ public static boolean isTradeCancel(AlipayTradeCancelModel model) throws AlipayApiException{ AlipayTradeCancelResponse response = tradeCancel(model); if(response.isSuccess()){ return true; } return false; } public static AlipayTradeCancelResponse tradeCancel(AlipayTradeCancelModel model) throws AlipayApiException{ AlipayTradeCancelRequest request = new AlipayTradeCancelRequest(); request.setBizModel(model); AlipayTradeCancelResponse response = alipayClient.execute(request); return response; } 9、使用沙盒环境测试 下载沙箱模式下的app【沙箱钱包】 9.1 交易支付接口alipay.trade.pay测试 /** * 条码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 */ public void tradePay() { String authCode = getPara(&quot;auth_code&quot;); String subject = &quot;Javen 支付宝条形码支付测试&quot;; String totalAmount = &quot;100&quot;; AlipayTradePayModel model = new AlipayTradePayModel(); model.setAuthCode(authCode); model.setSubject(subject); model.setTotalAmount(totalAmount); model.setOutTradeNo(StringUtils.getOutTradeNo()); model.setScene(&quot;bar_code&quot;); try { String resultStr = AliPayApi.tradePay(model); renderText(resultStr); } catch (Exception e) { e.printStackTrace(); } } 打开沙箱钱包&gt;付款&gt;输入条形码测试 返回的结果 { &quot;alipay_trade_pay_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;buyer_logon_id&quot;: &quot;abp***@sandbox.com&quot;, &quot;buyer_pay_amount&quot;: &quot;100.00&quot;, &quot;buyer_user_id&quot;: &quot;2088102169474200&quot;, &quot;fund_bill_list&quot;: [ { &quot;amount&quot;: &quot;100.00&quot;, &quot;fund_channel&quot;: &quot;ALIPAYACCOUNT&quot; } ], &quot;gmt_payment&quot;: &quot;2017-05-07 20:28:35&quot;, &quot;invoice_amount&quot;: &quot;100.00&quot;, &quot;open_id&quot;: &quot;20881035070193409461376162014620&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;point_amount&quot;: &quot;0.00&quot;, &quot;receipt_amount&quot;: &quot;100.00&quot;, &quot;total_amount&quot;: &quot;100.00&quot;, &quot;trade_no&quot;: &quot;2017050721001004200200238428&quot; }, &quot;sign&quot;: &quot;FZVBkb4tuqjM/3OZnAJJ8YFkGSmpcMIum+WdhCNURy+jSs5mZT2RZLlDuzVNHYoZQpItpVscDR86n87wFni/lhaNK0UvCkjQmSeBrmzuntFDrD8rh/KX3U3kpsQEmSzbI/E1VNYM3zL/lVPCnjkc9etVky8w690yHVqsRTBpjXDYUw91zdlm7iXjrRAv1vNWEhfaAgBh3toz8Asra03vFPMXaaGp4ARTI3AkjatH4zPO0JmDu3fMd+jk759FYW1qGf89LpLD/6ng+VNhu4rr3FC4RpLtYed9lKSrehlujGHSkhnWJcr0JZ6doYYF4aJuH7Eflyt+FCg/1JFzd0Mygw==&quot; } 9.2 交易查询接口alipay.trade.query测试 public void tradeQuery(){ try { AlipayTradeQueryModel model = new AlipayTradeQueryModel(); model.setOutTradeNo(&quot;050720283214941&quot;); model.setTradeNo(&quot;2017050721001004200200238428&quot;); boolean isSuccess = AliPayApi.isTradeQuery(model); renderJson(isSuccess); } catch (AlipayApiException e) { e.printStackTrace(); } } 或者 public void tradeQueryByStr(){ String out_trade_no = getPara(&quot;out_trade_no&quot;); AlipayTradeQueryModel model = new AlipayTradeQueryModel(); model.setOutTradeNo(out_trade_no); try { String resultStr = AliPayApi.tradeQuery(model).getBody(); renderText(resultStr);; } catch (AlipayApiException e) { e.printStackTrace(); } } 返回的结果 { &quot;alipay_trade_query_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;buyer_logon_id&quot;: &quot;abp***@sandbox.com&quot;, &quot;buyer_pay_amount&quot;: &quot;100.00&quot;, &quot;buyer_user_id&quot;: &quot;2088102169474200&quot;, &quot;fund_bill_list&quot;: [ { &quot;amount&quot;: &quot;100.00&quot;, &quot;fund_channel&quot;: &quot;ALIPAYACCOUNT&quot; } ], &quot;invoice_amount&quot;: &quot;100.00&quot;, &quot;open_id&quot;: &quot;20881035070193409461376162014620&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;point_amount&quot;: &quot;0.00&quot;, &quot;receipt_amount&quot;: &quot;100.00&quot;, &quot;send_pay_date&quot;: &quot;2017-05-07 20:28:34&quot;, &quot;total_amount&quot;: &quot;100.00&quot;, &quot;trade_no&quot;: &quot;2017050721001004200200238428&quot;, &quot;trade_status&quot;: &quot;TRADE_SUCCESS&quot; }, &quot;sign&quot;: &quot;DE6qYfU0Nziv3Dxpaj0gUROcqMNmREwYUw/t9qlnLiuM1JkKEdNJtbyJZ8OCoOIkgXEOSs7+mOrGgyxmOQqccwwhkDDsYXhPnc0cy4M7L4sNl5S3nUaveBaZjk3SMMGif43UaYtVI6SF4kq74uyoH15tCWDJ0N3nYct2epgc7r6kprAFqQxszgYp4tfKLw0qPCKnUyo7+WRbrc6UWQVuK+xDlVcvivW5cXjAf/HFyb8o+ddj6g+QQ4jUN2WTc2QGpbtfum6G7oPHT99cjAURVRw2NmU5WfUXNazzSvisa2oYsl8EH7+XHvsAMyIUZw0Ix8ymuAXdMkrUPFY4PfzjIg==&quot; } 9.3 交易撤销接口alipay.trade.cancel测试 public void tradeCancelByStr(){ try { AlipayTradeCancelModel model = new AlipayTradeCancelModel(); model.setOutTradeNo(&quot;050720283214941&quot;); model.setTradeNo(&quot;2017050721001004200200238428&quot;); AlipayTradeCancelResponse response = AliPayApi.tradeCancel(model); renderJson(response.getBody()); } catch (AlipayApiException e) { e.printStackTrace(); } } { &quot;alipay_trade_cancel_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;retry_flag&quot;: &quot;N&quot; }, &quot;sign&quot;: &quot;QFwTwACi/x/qZu7YCapToWKpYDatg7Y06KAxij01PHSQrq0+l9eeFGdNIRpD2rSmkCVN75RQManw4PvIEurN5uW6YSZlZQ0Rj2EeH0eVyNWqNRWmVGeSaLQ+hpAt3vG/cy5vXJ1Zl7yr/VbtRiuSYrbzPhgkG1UNYf9JIb4Nj2iSpo8Ct6Bbhiq848w7ZEN6itBmd04N3O4HkBoueuXtgUmKoaTegDfrtNtQ7dRAkCRnoa43QbHYysqwOO751JjI6HOeviZUrTspegUFbqhSXInaZ4LMqeiPWXeXc7dRmtOlPOSRY5wYzYYNCmEe89HdyLFSzd447QS2b5Ky3wAY3w==&quot; } 阅读更多" />
<meta property="og:description" content="版权声明：本文为博主原创文章，欢迎转载,转载标明出处(http://blog.csdn.net/zyw_java)。微信公众号:javenlife https://blog.csdn.net/zyw_java/article/details/71372789 此项目已开源欢迎Start、PR、发起Issues一起讨论交流共同进步 https://github.com/Javen205/IJPay http://git.oschina.net/javen205/IJPay 在官方的产品是叫做当面付 1、什么是当面付呢？ 简单的讲就是条码支付(刷卡支付)、扫码支付、声波支付。 【官方是这样解释的】 商户可通过以下任一方式在线下完成交易收款都是当面付： 1、商家通过扫描线下买家支付宝钱包中的条码、二维码等方式将买家的交易资金直接打入卖家支付宝账户，资金实时到账； 2、线下买家通过使用支付宝钱包扫描商家的二维码等方式完成支付，提升商家收银效率，资金实时到账； 3、线下买家使用支付宝钱包中的当面付功能，通过声波支付的方式向商家完成付款，资金实时到账。 2、申请条件 申请前必须拥有企业或个人支付宝账号，且通过支付宝实名认证审核； 营业执照主体需与签约主体一致，如不一致者需提供有效授权函；授权函要求：公司类型必须盖公章、个体工商户需两选一： a. 法人身份证原件+法人签字 b. 法人身份证原件+个体工商户盖章； 部分行业暂未开放签约，如保险、黄金期货、借贷（P2P）、POS等支付业务等； 3、产品费率 单笔费率 0.6% 4、签约认证流程 如果你只是想了解支付流程可以不进行签约，我们可以使用沙箱环境进行测试。 5、聊聊条码支付(刷卡支付） 官方文档 当面付详细的产品介绍在这里 条码支付是支付宝给到线下传统行业的一种收款方式。商家使用扫码枪等条码识别设备扫描用户支付宝钱包上的条码/二维码，完成收款。用户仅需出示付款码，所有收款操作由商家端完成。 使用步骤： 1、用户登录支付宝钱包，点击首页“付款”，进入付款码界面； 2、收银员在商家收银系统操作生成订单，用户确认支付金额； 3、用户出示钱包的“付款码”，收银员用扫码设备来扫描用户手机上的条码/二维码后，商家收银系统提交支付； 4、付款成功后商家收银系统会拿到支付成功或者失败的结果。 6、如何接入条码支付(刷卡支付）呢？ 官方接入介绍资料 当面付快速接入 前三步任何支付方式对接必不可少,这些按照文档操作应该没有问题。如遇到问题欢迎留言 今天的主角要登场了&gt;&gt;&gt;&gt;&gt;&gt;条码支付 这里主要涉及到三个接口 交易支付接口alipay.trade.pay 交易查询接口alipay.trade.query 交易撤销接口alipay.trade.cancel 这里我们使用官方提供的服务端SDK(开放平台服务端SDK)来快速接入 7、选择正确的接入环境 ��上面提到过如果是测试或者不上线应用可以不用签约直接使用沙箱环境 正式环境支付网关:https://openapi.alipay.com/gateway.do 沙盒环境支付网关:https://openapi.alipaydev.com/gateway.do 8、使用SDK封装接口 添加支付宝相关的配置文件 alipay.properties ############################ # 支付宝相关的配置 ############################ appId=xxx //测试号的APPID privateKey=xxx //测试号的私钥 建议使用RSA2 alipayPulicKey=xxx //支付宝公钥 serverUrl=https://openapi.alipaydev.com/gateway.do //支付网关 notify_domain = xxx //通知域名 8.1 在SDK调用前需要进行初始化 private static final Prop prop = PropKit.use(&quot;alipay.properties&quot;); public static AlipayClient alipayClient; public static String charset = &quot;UTF-8&quot;; public static String privateKey = prop.get(&quot;privateKey&quot;); public static String alipayPulicKey = prop.get(&quot;alipayPulicKey&quot;); public static String serverUrl = prop.get(&quot;serverUrl&quot;); public static String appId = prop.get(&quot;appId&quot;); public static String format = &quot;json&quot;; public static String signType = &quot;RSA2&quot;; public static String notify_domain = prop.get(&quot;notify_domain&quot;); static { alipayClient = new DefaultAlipayClient(serverUrl, appId, privateKey, format, charset, alipayPulicKey, signType); } 8.2 封装交易支付接口alipay.trade.pay /** * 条形码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 * @throws AlipayApiException */ public static String tradePay(AlipayTradePayModel model) throws AlipayApiException { AlipayTradePayResponse response = tradePayToResponse(model); return response.getBody(); } public static AlipayTradePayResponse tradePayToResponse(AlipayTradePayModel model) throws AlipayApiException{ AlipayTradePayRequest request = new AlipayTradePayRequest(); request.setBizModel(model);// 填充业务参数 return alipayClient.execute(request); // 通过alipayClient调用API，获得对应的response类 } 8.3 交易查询接口alipay.trade.query /** * 交易查询接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.8H2JzG&amp;docType=4&amp;apiId=757 * @param bizContent * @return * @throws AlipayApiException */ public static boolean isTradeQuery(AlipayTradeQueryModel model) throws AlipayApiException{ AlipayTradeQueryResponse response = tradeQuery(model); if(response.isSuccess()){ return true; } return false; } public static AlipayTradeQueryResponse tradeQuery(AlipayTradeQueryModel model) throws AlipayApiException{ AlipayTradeQueryRequest request = new AlipayTradeQueryRequest(); request.setBizModel(model); return alipayClient.execute(request); } 8.4 交易撤销接口alipay.trade.cancel /** * 交易撤销接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.XInh6e&amp;docType=4&amp;apiId=866 * @param bizContent * @return * @throws AlipayApiException */ public static boolean isTradeCancel(AlipayTradeCancelModel model) throws AlipayApiException{ AlipayTradeCancelResponse response = tradeCancel(model); if(response.isSuccess()){ return true; } return false; } public static AlipayTradeCancelResponse tradeCancel(AlipayTradeCancelModel model) throws AlipayApiException{ AlipayTradeCancelRequest request = new AlipayTradeCancelRequest(); request.setBizModel(model); AlipayTradeCancelResponse response = alipayClient.execute(request); return response; } 9、使用沙盒环境测试 下载沙箱模式下的app【沙箱钱包】 9.1 交易支付接口alipay.trade.pay测试 /** * 条码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 */ public void tradePay() { String authCode = getPara(&quot;auth_code&quot;); String subject = &quot;Javen 支付宝条形码支付测试&quot;; String totalAmount = &quot;100&quot;; AlipayTradePayModel model = new AlipayTradePayModel(); model.setAuthCode(authCode); model.setSubject(subject); model.setTotalAmount(totalAmount); model.setOutTradeNo(StringUtils.getOutTradeNo()); model.setScene(&quot;bar_code&quot;); try { String resultStr = AliPayApi.tradePay(model); renderText(resultStr); } catch (Exception e) { e.printStackTrace(); } } 打开沙箱钱包&gt;付款&gt;输入条形码测试 返回的结果 { &quot;alipay_trade_pay_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;buyer_logon_id&quot;: &quot;abp***@sandbox.com&quot;, &quot;buyer_pay_amount&quot;: &quot;100.00&quot;, &quot;buyer_user_id&quot;: &quot;2088102169474200&quot;, &quot;fund_bill_list&quot;: [ { &quot;amount&quot;: &quot;100.00&quot;, &quot;fund_channel&quot;: &quot;ALIPAYACCOUNT&quot; } ], &quot;gmt_payment&quot;: &quot;2017-05-07 20:28:35&quot;, &quot;invoice_amount&quot;: &quot;100.00&quot;, &quot;open_id&quot;: &quot;20881035070193409461376162014620&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;point_amount&quot;: &quot;0.00&quot;, &quot;receipt_amount&quot;: &quot;100.00&quot;, &quot;total_amount&quot;: &quot;100.00&quot;, &quot;trade_no&quot;: &quot;2017050721001004200200238428&quot; }, &quot;sign&quot;: &quot;FZVBkb4tuqjM/3OZnAJJ8YFkGSmpcMIum+WdhCNURy+jSs5mZT2RZLlDuzVNHYoZQpItpVscDR86n87wFni/lhaNK0UvCkjQmSeBrmzuntFDrD8rh/KX3U3kpsQEmSzbI/E1VNYM3zL/lVPCnjkc9etVky8w690yHVqsRTBpjXDYUw91zdlm7iXjrRAv1vNWEhfaAgBh3toz8Asra03vFPMXaaGp4ARTI3AkjatH4zPO0JmDu3fMd+jk759FYW1qGf89LpLD/6ng+VNhu4rr3FC4RpLtYed9lKSrehlujGHSkhnWJcr0JZ6doYYF4aJuH7Eflyt+FCg/1JFzd0Mygw==&quot; } 9.2 交易查询接口alipay.trade.query测试 public void tradeQuery(){ try { AlipayTradeQueryModel model = new AlipayTradeQueryModel(); model.setOutTradeNo(&quot;050720283214941&quot;); model.setTradeNo(&quot;2017050721001004200200238428&quot;); boolean isSuccess = AliPayApi.isTradeQuery(model); renderJson(isSuccess); } catch (AlipayApiException e) { e.printStackTrace(); } } 或者 public void tradeQueryByStr(){ String out_trade_no = getPara(&quot;out_trade_no&quot;); AlipayTradeQueryModel model = new AlipayTradeQueryModel(); model.setOutTradeNo(out_trade_no); try { String resultStr = AliPayApi.tradeQuery(model).getBody(); renderText(resultStr);; } catch (AlipayApiException e) { e.printStackTrace(); } } 返回的结果 { &quot;alipay_trade_query_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;buyer_logon_id&quot;: &quot;abp***@sandbox.com&quot;, &quot;buyer_pay_amount&quot;: &quot;100.00&quot;, &quot;buyer_user_id&quot;: &quot;2088102169474200&quot;, &quot;fund_bill_list&quot;: [ { &quot;amount&quot;: &quot;100.00&quot;, &quot;fund_channel&quot;: &quot;ALIPAYACCOUNT&quot; } ], &quot;invoice_amount&quot;: &quot;100.00&quot;, &quot;open_id&quot;: &quot;20881035070193409461376162014620&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;point_amount&quot;: &quot;0.00&quot;, &quot;receipt_amount&quot;: &quot;100.00&quot;, &quot;send_pay_date&quot;: &quot;2017-05-07 20:28:34&quot;, &quot;total_amount&quot;: &quot;100.00&quot;, &quot;trade_no&quot;: &quot;2017050721001004200200238428&quot;, &quot;trade_status&quot;: &quot;TRADE_SUCCESS&quot; }, &quot;sign&quot;: &quot;DE6qYfU0Nziv3Dxpaj0gUROcqMNmREwYUw/t9qlnLiuM1JkKEdNJtbyJZ8OCoOIkgXEOSs7+mOrGgyxmOQqccwwhkDDsYXhPnc0cy4M7L4sNl5S3nUaveBaZjk3SMMGif43UaYtVI6SF4kq74uyoH15tCWDJ0N3nYct2epgc7r6kprAFqQxszgYp4tfKLw0qPCKnUyo7+WRbrc6UWQVuK+xDlVcvivW5cXjAf/HFyb8o+ddj6g+QQ4jUN2WTc2QGpbtfum6G7oPHT99cjAURVRw2NmU5WfUXNazzSvisa2oYsl8EH7+XHvsAMyIUZw0Ix8ymuAXdMkrUPFY4PfzjIg==&quot; } 9.3 交易撤销接口alipay.trade.cancel测试 public void tradeCancelByStr(){ try { AlipayTradeCancelModel model = new AlipayTradeCancelModel(); model.setOutTradeNo(&quot;050720283214941&quot;); model.setTradeNo(&quot;2017050721001004200200238428&quot;); AlipayTradeCancelResponse response = AliPayApi.tradeCancel(model); renderJson(response.getBody()); } catch (AlipayApiException e) { e.printStackTrace(); } } { &quot;alipay_trade_cancel_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;retry_flag&quot;: &quot;N&quot; }, &quot;sign&quot;: &quot;QFwTwACi/x/qZu7YCapToWKpYDatg7Y06KAxij01PHSQrq0+l9eeFGdNIRpD2rSmkCVN75RQManw4PvIEurN5uW6YSZlZQ0Rj2EeH0eVyNWqNRWmVGeSaLQ+hpAt3vG/cy5vXJ1Zl7yr/VbtRiuSYrbzPhgkG1UNYf9JIb4Nj2iSpo8Ct6Bbhiq848w7ZEN6itBmd04N3O4HkBoueuXtgUmKoaTegDfrtNtQ7dRAkCRnoa43QbHYysqwOO751JjI6HOeviZUrTspegUFbqhSXInaZ4LMqeiPWXeXc7dRmtOlPOSRY5wYzYYNCmEe89HdyLFSzd447QS2b5Ky3wAY3w==&quot; } 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-05-07T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"版权声明：本文为博主原创文章，欢迎转载,转载标明出处(http://blog.csdn.net/zyw_java)。微信公众号:javenlife https://blog.csdn.net/zyw_java/article/details/71372789 此项目已开源欢迎Start、PR、发起Issues一起讨论交流共同进步 https://github.com/Javen205/IJPay http://git.oschina.net/javen205/IJPay 在官方的产品是叫做当面付 1、什么是当面付呢？ 简单的讲就是条码支付(刷卡支付)、扫码支付、声波支付。 【官方是这样解释的】 商户可通过以下任一方式在线下完成交易收款都是当面付： 1、商家通过扫描线下买家支付宝钱包中的条码、二维码等方式将买家的交易资金直接打入卖家支付宝账户，资金实时到账； 2、线下买家通过使用支付宝钱包扫描商家的二维码等方式完成支付，提升商家收银效率，资金实时到账； 3、线下买家使用支付宝钱包中的当面付功能，通过声波支付的方式向商家完成付款，资金实时到账。 2、申请条件 申请前必须拥有企业或个人支付宝账号，且通过支付宝实名认证审核； 营业执照主体需与签约主体一致，如不一致者需提供有效授权函；授权函要求：公司类型必须盖公章、个体工商户需两选一： a. 法人身份证原件+法人签字 b. 法人身份证原件+个体工商户盖章； 部分行业暂未开放签约，如保险、黄金期货、借贷（P2P）、POS等支付业务等； 3、产品费率 单笔费率 0.6% 4、签约认证流程 如果你只是想了解支付流程可以不进行签约，我们可以使用沙箱环境进行测试。 5、聊聊条码支付(刷卡支付） 官方文档 当面付详细的产品介绍在这里 条码支付是支付宝给到线下传统行业的一种收款方式。商家使用扫码枪等条码识别设备扫描用户支付宝钱包上的条码/二维码，完成收款。用户仅需出示付款码，所有收款操作由商家端完成。 使用步骤： 1、用户登录支付宝钱包，点击首页“付款”，进入付款码界面； 2、收银员在商家收银系统操作生成订单，用户确认支付金额； 3、用户出示钱包的“付款码”，收银员用扫码设备来扫描用户手机上的条码/二维码后，商家收银系统提交支付； 4、付款成功后商家收银系统会拿到支付成功或者失败的结果。 6、如何接入条码支付(刷卡支付）呢？ 官方接入介绍资料 当面付快速接入 前三步任何支付方式对接必不可少,这些按照文档操作应该没有问题。如遇到问题欢迎留言 今天的主角要登场了&gt;&gt;&gt;&gt;&gt;&gt;条码支付 这里主要涉及到三个接口 交易支付接口alipay.trade.pay 交易查询接口alipay.trade.query 交易撤销接口alipay.trade.cancel 这里我们使用官方提供的服务端SDK(开放平台服务端SDK)来快速接入 7、选择正确的接入环境 ��上面提到过如果是测试或者不上线应用可以不用签约直接使用沙箱环境 正式环境支付网关:https://openapi.alipay.com/gateway.do 沙盒环境支付网关:https://openapi.alipaydev.com/gateway.do 8、使用SDK封装接口 添加支付宝相关的配置文件 alipay.properties ############################ # 支付宝相关的配置 ############################ appId=xxx //测试号的APPID privateKey=xxx //测试号的私钥 建议使用RSA2 alipayPulicKey=xxx //支付宝公钥 serverUrl=https://openapi.alipaydev.com/gateway.do //支付网关 notify_domain = xxx //通知域名 8.1 在SDK调用前需要进行初始化 private static final Prop prop = PropKit.use(&quot;alipay.properties&quot;); public static AlipayClient alipayClient; public static String charset = &quot;UTF-8&quot;; public static String privateKey = prop.get(&quot;privateKey&quot;); public static String alipayPulicKey = prop.get(&quot;alipayPulicKey&quot;); public static String serverUrl = prop.get(&quot;serverUrl&quot;); public static String appId = prop.get(&quot;appId&quot;); public static String format = &quot;json&quot;; public static String signType = &quot;RSA2&quot;; public static String notify_domain = prop.get(&quot;notify_domain&quot;); static { alipayClient = new DefaultAlipayClient(serverUrl, appId, privateKey, format, charset, alipayPulicKey, signType); } 8.2 封装交易支付接口alipay.trade.pay /** * 条形码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 * @throws AlipayApiException */ public static String tradePay(AlipayTradePayModel model) throws AlipayApiException { AlipayTradePayResponse response = tradePayToResponse(model); return response.getBody(); } public static AlipayTradePayResponse tradePayToResponse(AlipayTradePayModel model) throws AlipayApiException{ AlipayTradePayRequest request = new AlipayTradePayRequest(); request.setBizModel(model);// 填充业务参数 return alipayClient.execute(request); // 通过alipayClient调用API，获得对应的response类 } 8.3 交易查询接口alipay.trade.query /** * 交易查询接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.8H2JzG&amp;docType=4&amp;apiId=757 * @param bizContent * @return * @throws AlipayApiException */ public static boolean isTradeQuery(AlipayTradeQueryModel model) throws AlipayApiException{ AlipayTradeQueryResponse response = tradeQuery(model); if(response.isSuccess()){ return true; } return false; } public static AlipayTradeQueryResponse tradeQuery(AlipayTradeQueryModel model) throws AlipayApiException{ AlipayTradeQueryRequest request = new AlipayTradeQueryRequest(); request.setBizModel(model); return alipayClient.execute(request); } 8.4 交易撤销接口alipay.trade.cancel /** * 交易撤销接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.XInh6e&amp;docType=4&amp;apiId=866 * @param bizContent * @return * @throws AlipayApiException */ public static boolean isTradeCancel(AlipayTradeCancelModel model) throws AlipayApiException{ AlipayTradeCancelResponse response = tradeCancel(model); if(response.isSuccess()){ return true; } return false; } public static AlipayTradeCancelResponse tradeCancel(AlipayTradeCancelModel model) throws AlipayApiException{ AlipayTradeCancelRequest request = new AlipayTradeCancelRequest(); request.setBizModel(model); AlipayTradeCancelResponse response = alipayClient.execute(request); return response; } 9、使用沙盒环境测试 下载沙箱模式下的app【沙箱钱包】 9.1 交易支付接口alipay.trade.pay测试 /** * 条码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 */ public void tradePay() { String authCode = getPara(&quot;auth_code&quot;); String subject = &quot;Javen 支付宝条形码支付测试&quot;; String totalAmount = &quot;100&quot;; AlipayTradePayModel model = new AlipayTradePayModel(); model.setAuthCode(authCode); model.setSubject(subject); model.setTotalAmount(totalAmount); model.setOutTradeNo(StringUtils.getOutTradeNo()); model.setScene(&quot;bar_code&quot;); try { String resultStr = AliPayApi.tradePay(model); renderText(resultStr); } catch (Exception e) { e.printStackTrace(); } } 打开沙箱钱包&gt;付款&gt;输入条形码测试 返回的结果 { &quot;alipay_trade_pay_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;buyer_logon_id&quot;: &quot;abp***@sandbox.com&quot;, &quot;buyer_pay_amount&quot;: &quot;100.00&quot;, &quot;buyer_user_id&quot;: &quot;2088102169474200&quot;, &quot;fund_bill_list&quot;: [ { &quot;amount&quot;: &quot;100.00&quot;, &quot;fund_channel&quot;: &quot;ALIPAYACCOUNT&quot; } ], &quot;gmt_payment&quot;: &quot;2017-05-07 20:28:35&quot;, &quot;invoice_amount&quot;: &quot;100.00&quot;, &quot;open_id&quot;: &quot;20881035070193409461376162014620&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;point_amount&quot;: &quot;0.00&quot;, &quot;receipt_amount&quot;: &quot;100.00&quot;, &quot;total_amount&quot;: &quot;100.00&quot;, &quot;trade_no&quot;: &quot;2017050721001004200200238428&quot; }, &quot;sign&quot;: &quot;FZVBkb4tuqjM/3OZnAJJ8YFkGSmpcMIum+WdhCNURy+jSs5mZT2RZLlDuzVNHYoZQpItpVscDR86n87wFni/lhaNK0UvCkjQmSeBrmzuntFDrD8rh/KX3U3kpsQEmSzbI/E1VNYM3zL/lVPCnjkc9etVky8w690yHVqsRTBpjXDYUw91zdlm7iXjrRAv1vNWEhfaAgBh3toz8Asra03vFPMXaaGp4ARTI3AkjatH4zPO0JmDu3fMd+jk759FYW1qGf89LpLD/6ng+VNhu4rr3FC4RpLtYed9lKSrehlujGHSkhnWJcr0JZ6doYYF4aJuH7Eflyt+FCg/1JFzd0Mygw==&quot; } 9.2 交易查询接口alipay.trade.query测试 public void tradeQuery(){ try { AlipayTradeQueryModel model = new AlipayTradeQueryModel(); model.setOutTradeNo(&quot;050720283214941&quot;); model.setTradeNo(&quot;2017050721001004200200238428&quot;); boolean isSuccess = AliPayApi.isTradeQuery(model); renderJson(isSuccess); } catch (AlipayApiException e) { e.printStackTrace(); } } 或者 public void tradeQueryByStr(){ String out_trade_no = getPara(&quot;out_trade_no&quot;); AlipayTradeQueryModel model = new AlipayTradeQueryModel(); model.setOutTradeNo(out_trade_no); try { String resultStr = AliPayApi.tradeQuery(model).getBody(); renderText(resultStr);; } catch (AlipayApiException e) { e.printStackTrace(); } } 返回的结果 { &quot;alipay_trade_query_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;buyer_logon_id&quot;: &quot;abp***@sandbox.com&quot;, &quot;buyer_pay_amount&quot;: &quot;100.00&quot;, &quot;buyer_user_id&quot;: &quot;2088102169474200&quot;, &quot;fund_bill_list&quot;: [ { &quot;amount&quot;: &quot;100.00&quot;, &quot;fund_channel&quot;: &quot;ALIPAYACCOUNT&quot; } ], &quot;invoice_amount&quot;: &quot;100.00&quot;, &quot;open_id&quot;: &quot;20881035070193409461376162014620&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;point_amount&quot;: &quot;0.00&quot;, &quot;receipt_amount&quot;: &quot;100.00&quot;, &quot;send_pay_date&quot;: &quot;2017-05-07 20:28:34&quot;, &quot;total_amount&quot;: &quot;100.00&quot;, &quot;trade_no&quot;: &quot;2017050721001004200200238428&quot;, &quot;trade_status&quot;: &quot;TRADE_SUCCESS&quot; }, &quot;sign&quot;: &quot;DE6qYfU0Nziv3Dxpaj0gUROcqMNmREwYUw/t9qlnLiuM1JkKEdNJtbyJZ8OCoOIkgXEOSs7+mOrGgyxmOQqccwwhkDDsYXhPnc0cy4M7L4sNl5S3nUaveBaZjk3SMMGif43UaYtVI6SF4kq74uyoH15tCWDJ0N3nYct2epgc7r6kprAFqQxszgYp4tfKLw0qPCKnUyo7+WRbrc6UWQVuK+xDlVcvivW5cXjAf/HFyb8o+ddj6g+QQ4jUN2WTc2QGpbtfum6G7oPHT99cjAURVRw2NmU5WfUXNazzSvisa2oYsl8EH7+XHvsAMyIUZw0Ix8ymuAXdMkrUPFY4PfzjIg==&quot; } 9.3 交易撤销接口alipay.trade.cancel测试 public void tradeCancelByStr(){ try { AlipayTradeCancelModel model = new AlipayTradeCancelModel(); model.setOutTradeNo(&quot;050720283214941&quot;); model.setTradeNo(&quot;2017050721001004200200238428&quot;); AlipayTradeCancelResponse response = AliPayApi.tradeCancel(model); renderJson(response.getBody()); } catch (AlipayApiException e) { e.printStackTrace(); } } { &quot;alipay_trade_cancel_response&quot;: { &quot;code&quot;: &quot;10000&quot;, &quot;msg&quot;: &quot;Success&quot;, &quot;out_trade_no&quot;: &quot;050720283214941&quot;, &quot;retry_flag&quot;: &quot;N&quot; }, &quot;sign&quot;: &quot;QFwTwACi/x/qZu7YCapToWKpYDatg7Y06KAxij01PHSQrq0+l9eeFGdNIRpD2rSmkCVN75RQManw4PvIEurN5uW6YSZlZQ0Rj2EeH0eVyNWqNRWmVGeSaLQ+hpAt3vG/cy5vXJ1Zl7yr/VbtRiuSYrbzPhgkG1UNYf9JIb4Nj2iSpo8Ct6Bbhiq848w7ZEN6itBmd04N3O4HkBoueuXtgUmKoaTegDfrtNtQ7dRAkCRnoa43QbHYysqwOO751JjI6HOeviZUrTspegUFbqhSXInaZ4LMqeiPWXeXc7dRmtOlPOSRY5wYzYYNCmEe89HdyLFSzd447QS2b5Ky3wAY3w==&quot; } 阅读更多","@type":"BlogPosting","url":"/2017/05/07/39583bd1367642abc59a8e1a8b9393a2.html","headline":"支付宝支付-刷卡支付(条码支付)详解-酷玩时刻-by javen(凡事皆有终结,耐心是赢得成功的一种手段 微信公众号:javenlife)","dateModified":"2017-05-07T00:00:00+08:00","datePublished":"2017-05-07T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2017/05/07/39583bd1367642abc59a8e1a8b9393a2.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>支付宝支付-刷卡支付(条码支付)详解-酷玩时刻-by javen(凡事皆有终结,耐心是赢得成功的一种手段 微信公众号:javenlife)</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="article-copyright">
   版权声明：本文为博主原创文章，欢迎转载,转载标明出处(http://blog.csdn.net/zyw_java)。微信公众号:javenlife https://blog.csdn.net/zyw_java/article/details/71372789 
 </div> 
 <div class="markdown_views prism-tomorrow-night-eighties"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p>此项目已开源欢迎Start、PR、发起Issues一起讨论交流共同进步 <br> <a href="https://github.com/Javen205/IJPay" rel="nofollow" target="_blank">https://github.com/Javen205/IJPay</a> <br> <a href="http://git.oschina.net/javen205/IJPay" rel="nofollow" target="_blank">http://git.oschina.net/javen205/IJPay</a></p> 
  <p>在官方的产品是叫做<strong>当面付</strong></p> 
  <h4 id="1什么是当面付呢">1、什么是当面付呢？</h4> 
  <p>简单的讲就是条码支付(刷卡支付)、扫码支付、声波支付。</p> 
  <blockquote> 
   <p>【<a href="https://b.alipay.com/signing/productDetail.htm?productId=I1011000290000001003" rel="nofollow" target="_blank">官方是这样解释的</a>】 <br> 商户可通过以下任一方式在线下完成交易收款都是<strong>当面付</strong>： <br> 1、商家通过扫描线下买家支付宝钱包中的条码、二维码等方式将买家的交易资金直接打入卖家支付宝账户，资金实时到账； <br> 2、线下买家通过使用支付宝钱包扫描商家的二维码等方式完成支付，提升商家收银效率，资金实时到账； <br> 3、线下买家使用支付宝钱包中的当面付功能，通过声波支付的方式向商家完成付款，资金实时到账。</p> 
  </blockquote> 
  <h4 id="2申请条件">2、申请条件</h4> 
  <blockquote> 
   <ol> 
    <li>申请前必须拥有企业或个人支付宝账号，且通过支付宝实名认证审核；</li> 
    <li>营业执照主体需与签约主体一致，如不一致者需提供有效授权函；授权函要求：公司类型必须盖公章、个体工商户需两选一： <br> a. 法人身份证原件+法人签字 <br> b. 法人身份证原件+个体工商户盖章；</li> 
    <li>部分行业暂未开放签约，如保险、黄金期货、借贷（P2P）、POS等支付业务等；</li> 
   </ol> 
  </blockquote> 
  <h4 id="3产品费率">3、产品费率</h4> 
  <blockquote> 
   <p>单笔费率 0.6%</p> 
  </blockquote> 
  <h4 id="4签约认证流程">4、签约认证流程</h4> 
  <blockquote> 
   <p>如果你只是想了解支付流程可以不进行签约，我们可以使用沙箱环境进行测试。</p> 
  </blockquote> 
  <p><img src="http://upload-images.jianshu.io/upload_images/1342351-ab9ebe2d7ae681b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="签约认证流程" title=""></p> 
  <p><img src="http://upload-images.jianshu.io/upload_images/1342351-70802f7357a8b7d7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开发平台-研发服务-沙箱环境" title=""></p> 
  <h4 id="5聊聊条码支付刷卡支付">5、聊聊条码支付(刷卡支付）</h4> 
  <p>官方文档 <a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.2Sats9&amp;treeId=193&amp;articleId=105072&amp;docType=1#s0" rel="nofollow" target="_blank">当面付详细的产品介绍在这里</a></p> 
  <blockquote> 
   <p>条码支付是支付宝给到线下传统行业的一种收款方式。商家使用扫码枪等条码识别设备扫描用户支付宝钱包上的条码/二维码，完成收款。用户仅需出示付款码，所有收款操作由商家端完成。</p> 
  </blockquote> 
  <p><img src="http://upload-images.jianshu.io/upload_images/1342351-5ba6ba96a33e44df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="业务流程" title=""></p> 
  <p>使用步骤：</p> 
  <p>1、用户登录支付宝钱包，点击首页“付款”，进入付款码界面； <br> 2、收银员在商家收银系统操作生成订单，用户确认支付金额； <br> 3、用户出示钱包的“付款码”，收银员用扫码设备来扫描用户手机上的条码/二维码后，商家收银系统提交支付； <br> 4、付款成功后商家收银系统会拿到支付成功或者失败的结果。</p> 
  <p><img src="http://upload-images.jianshu.io/upload_images/1342351-876afa78ca6f92e1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="使用步骤" title=""></p> 
  <h4 id="6如何接入条码支付刷卡支付呢">6、如何接入条码支付(刷卡支付）呢？</h4> 
  <p>官方接入介绍资料 <a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.oTdbz2&amp;treeId=193&amp;articleId=105170&amp;docType=1" rel="nofollow" target="_blank">当面付快速接入</a></p> 
  <blockquote> 
   <p>前三步任何支付方式对接必不可少,这些按照文档操作应该没有问题。<strong>如遇到问题欢迎留言</strong></p> 
  </blockquote> 
  <p><img src="http://upload-images.jianshu.io/upload_images/1342351-f59d5825f8fa9548.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="前三步任何支付方式对接必不可少" title=""></p> 
  <p><strong>今天的主角要登场了&gt;&gt;&gt;&gt;&gt;&gt;条码支付</strong> </p> 
  <p><img src="http://upload-images.jianshu.io/upload_images/1342351-b2dea792e08f9811.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="调用时序图" title=""></p> 
  <p>这里主要涉及到三个接口</p> 
  <ul> 
   <li><p><a href="https://doc.open.alipay.com/doc2/apiDetail.htm?spm=a219a.7629065.0.0.1hBqdQ&amp;apiId=850&amp;docType=4" rel="nofollow" target="_blank">交易支付接口alipay.trade.pay</a></p></li> 
   <li><p><a href="https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.0WO2PA&amp;docType=4&amp;apiId=757" rel="nofollow" target="_blank">交易查询接口alipay.trade.query</a></p></li> 
   <li><p><a href="https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.cEcNxQ&amp;docType=4&amp;apiId=1058" rel="nofollow" target="_blank">交易撤销接口alipay.trade.cancel</a></p></li> 
  </ul> 
  <p><strong>这里我们使用官方提供的服务端SDK(<a href="https://doc.open.alipay.com/doc2/detail?treeId=54&amp;articleId=103419&amp;docType=1" rel="nofollow" target="_blank">开放平台服务端SDK</a>)来快速接入</strong></p> 
  <h4 id="7选择正确的接入环境">7、选择正确的接入环境</h4> 
  <p>��上面提到过如果是测试或者不上线应用可以不用签约直接使用沙箱环境</p> 
  <p>正式环境支付网关:<code>https://openapi.alipay.com/gateway.do</code> <br> 沙盒环境支付网关:<code>https://openapi.alipaydev.com/gateway.do <br> </code></p> 
  <h4 id="8使用sdk封装接口">8、使用SDK封装接口</h4> 
  <p>添加支付宝相关的配置文件 <strong>alipay.properties</strong></p> 
  <pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor">############################</span>
<span class="hljs-preprocessor"># 支付宝相关的配置</span>
<span class="hljs-preprocessor">############################</span>

appId=xxx <span class="hljs-comment">//测试号的APPID</span>
privateKey=xxx <span class="hljs-comment">//测试号的私钥 建议使用RSA2</span>
alipayPulicKey=xxx <span class="hljs-comment">//支付宝公钥</span>
serverUrl=https:<span class="hljs-comment">//openapi.alipaydev.com/gateway.do //支付网关</span>
notify_domain = xxx <span class="hljs-comment">//通知域名</span></code></pre> 
  <h5 id="81-在sdk调用前需要进行初始化">8.1 在SDK调用前需要进行初始化</h5> 
  <pre class="prettyprint"><code class=" hljs cs">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final Prop prop = PropKit.use(<span class="hljs-string">"alipay.properties"</span>);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AlipayClient alipayClient;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String charset = <span class="hljs-string">"UTF-8"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String privateKey = prop.<span class="hljs-keyword">get</span>(<span class="hljs-string">"privateKey"</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String alipayPulicKey = prop.<span class="hljs-keyword">get</span>(<span class="hljs-string">"alipayPulicKey"</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String serverUrl = prop.<span class="hljs-keyword">get</span>(<span class="hljs-string">"serverUrl"</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String appId = prop.<span class="hljs-keyword">get</span>(<span class="hljs-string">"appId"</span>);
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String format = <span class="hljs-string">"json"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String signType = <span class="hljs-string">"RSA2"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String notify_domain = prop.<span class="hljs-keyword">get</span>(<span class="hljs-string">"notify_domain"</span>);

    <span class="hljs-keyword">static</span> {
        alipayClient = <span class="hljs-keyword">new</span> DefaultAlipayClient(serverUrl, appId, privateKey, format, charset, alipayPulicKey, signType);
    }</code></pre> 
  <h5 id="82-封装交易支付接口alipaytradepay">8.2 封装交易支付接口alipay.trade.pay</h5> 
  <pre class="prettyprint"><code class=" hljs java"><span class="hljs-javadoc">/** * 条形码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 *<span class="hljs-javadoctag"> @throws</span> AlipayApiException */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">tradePay</span>(AlipayTradePayModel model) <span class="hljs-keyword">throws</span> AlipayApiException {
        AlipayTradePayResponse response = tradePayToResponse(model);
        <span class="hljs-keyword">return</span> response.getBody();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AlipayTradePayResponse <span class="hljs-title">tradePayToResponse</span>(AlipayTradePayModel model) <span class="hljs-keyword">throws</span> AlipayApiException{
        AlipayTradePayRequest request = <span class="hljs-keyword">new</span> AlipayTradePayRequest();
        request.setBizModel(model);<span class="hljs-comment">// 填充业务参数</span>
        <span class="hljs-keyword">return</span> alipayClient.execute(request); <span class="hljs-comment">// 通过alipayClient调用API，获得对应的response类</span>
    }</code></pre> 
  <h5 id="83-交易查询接口alipaytradequery">8.3 交易查询接口alipay.trade.query</h5> 
  <pre class="prettyprint"><code class=" hljs java"><span class="hljs-javadoc">/** * 交易查询接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.8H2JzG&amp;docType=4&amp;apiId=757 *<span class="hljs-javadoctag"> @param</span> bizContent *<span class="hljs-javadoctag"> @return</span> *<span class="hljs-javadoctag"> @throws</span> AlipayApiException */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isTradeQuery</span>(AlipayTradeQueryModel model) <span class="hljs-keyword">throws</span> AlipayApiException{
        AlipayTradeQueryResponse response = tradeQuery(model);
        <span class="hljs-keyword">if</span>(response.isSuccess()){
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AlipayTradeQueryResponse  <span class="hljs-title">tradeQuery</span>(AlipayTradeQueryModel model) <span class="hljs-keyword">throws</span> AlipayApiException{
        AlipayTradeQueryRequest request = <span class="hljs-keyword">new</span> AlipayTradeQueryRequest();
        request.setBizModel(model);
        <span class="hljs-keyword">return</span> alipayClient.execute(request);
    }</code></pre> 
  <h5 id="84-交易撤销接口alipaytradecancel">8.4 交易撤销接口alipay.trade.cancel</h5> 
  <pre class="prettyprint"><code class=" hljs java"><span class="hljs-javadoc">/** * 交易撤销接口 * https://doc.open.alipay.com/docs/api.htm?spm=a219a.7395905.0.0.XInh6e&amp;docType=4&amp;apiId=866 *<span class="hljs-javadoctag"> @param</span> bizContent *<span class="hljs-javadoctag"> @return</span> *<span class="hljs-javadoctag"> @throws</span> AlipayApiException */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isTradeCancel</span>(AlipayTradeCancelModel model) <span class="hljs-keyword">throws</span> AlipayApiException{
        AlipayTradeCancelResponse response = tradeCancel(model);
        <span class="hljs-keyword">if</span>(response.isSuccess()){
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AlipayTradeCancelResponse <span class="hljs-title">tradeCancel</span>(AlipayTradeCancelModel model) <span class="hljs-keyword">throws</span> AlipayApiException{
        AlipayTradeCancelRequest request = <span class="hljs-keyword">new</span> AlipayTradeCancelRequest();
        request.setBizModel(model);
        AlipayTradeCancelResponse response = alipayClient.execute(request);
        <span class="hljs-keyword">return</span> response;
    }</code></pre> 
  <h4 id="9使用沙盒环境测试">9、使用沙盒环境测试</h4> 
  <p>下载沙箱模式下的app【<strong>沙箱钱包</strong>】</p> 
  <h5 id="91-交易支付接口alipaytradepay测试">9.1 交易支付接口alipay.trade.pay测试</h5> 
  <pre class="prettyprint"><code class=" hljs java">
<span class="hljs-javadoc">/** * 条码支付 * https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.Yhpibd&amp;treeId=194&amp;articleId=105170&amp;docType=1#s4 */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tradePay</span>() {
        String authCode = getPara(<span class="hljs-string">"auth_code"</span>);
        String subject = <span class="hljs-string">"Javen 支付宝条形码支付测试"</span>;
        String totalAmount = <span class="hljs-string">"100"</span>;

        AlipayTradePayModel model = <span class="hljs-keyword">new</span> AlipayTradePayModel();
        model.setAuthCode(authCode);
        model.setSubject(subject);
        model.setTotalAmount(totalAmount);
        model.setOutTradeNo(StringUtils.getOutTradeNo());
        model.setScene(<span class="hljs-string">"bar_code"</span>);

        <span class="hljs-keyword">try</span> {
            String resultStr = AliPayApi.tradePay(model);
            renderText(resultStr);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }</code></pre> 
  <blockquote> 
   <p>打开沙箱钱包&gt;付款&gt;输入条形码测试</p> 
  </blockquote> 
  <p>返回的结果</p> 
  <pre class="prettyprint"><code class=" hljs json">{
  "<span class="hljs-attribute">alipay_trade_pay_response</span>": <span class="hljs-value">{ "<span class="hljs-attribute">code</span>": <span class="hljs-value"><span class="hljs-string">"10000"</span></span>, "<span class="hljs-attribute">msg</span>": <span class="hljs-value"><span class="hljs-string">"Success"</span></span>, "<span class="hljs-attribute">buyer_logon_id</span>": <span class="hljs-value"><span class="hljs-string">"abp***@sandbox.com"</span></span>, "<span class="hljs-attribute">buyer_pay_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">buyer_user_id</span>": <span class="hljs-value"><span class="hljs-string">"2088102169474200"</span></span>, "<span class="hljs-attribute">fund_bill_list</span>": <span class="hljs-value">[ { "<span class="hljs-attribute">amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">fund_channel</span>": <span class="hljs-value"><span class="hljs-string">"ALIPAYACCOUNT"</span> </span>} ]</span>, "<span class="hljs-attribute">gmt_payment</span>": <span class="hljs-value"><span class="hljs-string">"2017-05-07 20:28:35"</span></span>, "<span class="hljs-attribute">invoice_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">open_id</span>": <span class="hljs-value"><span class="hljs-string">"20881035070193409461376162014620"</span></span>, "<span class="hljs-attribute">out_trade_no</span>": <span class="hljs-value"><span class="hljs-string">"050720283214941"</span></span>, "<span class="hljs-attribute">point_amount</span>": <span class="hljs-value"><span class="hljs-string">"0.00"</span></span>, "<span class="hljs-attribute">receipt_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">total_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">trade_no</span>": <span class="hljs-value"><span class="hljs-string">"2017050721001004200200238428"</span> </span>}</span>,
  "<span class="hljs-attribute">sign</span>": <span class="hljs-value"><span class="hljs-string">"FZVBkb4tuqjM/3OZnAJJ8YFkGSmpcMIum+WdhCNURy+jSs5mZT2RZLlDuzVNHYoZQpItpVscDR86n87wFni/lhaNK0UvCkjQmSeBrmzuntFDrD8rh/KX3U3kpsQEmSzbI/E1VNYM3zL/lVPCnjkc9etVky8w690yHVqsRTBpjXDYUw91zdlm7iXjrRAv1vNWEhfaAgBh3toz8Asra03vFPMXaaGp4ARTI3AkjatH4zPO0JmDu3fMd+jk759FYW1qGf89LpLD/6ng+VNhu4rr3FC4RpLtYed9lKSrehlujGHSkhnWJcr0JZ6doYYF4aJuH7Eflyt+FCg/1JFzd0Mygw=="</span> </span>}</code></pre> 
  <h5 id="92-交易查询接口alipaytradequery测试">9.2 交易查询接口alipay.trade.query测试</h5> 
  <pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tradeQuery</span>(){
        <span class="hljs-keyword">try</span> {
            AlipayTradeQueryModel model = <span class="hljs-keyword">new</span> AlipayTradeQueryModel();
            model.setOutTradeNo(<span class="hljs-string">"050720283214941"</span>);
            model.setTradeNo(<span class="hljs-string">"2017050721001004200200238428"</span>);

            <span class="hljs-keyword">boolean</span> isSuccess = AliPayApi.isTradeQuery(model);
            renderJson(isSuccess);
        } <span class="hljs-keyword">catch</span> (AlipayApiException e) {
            e.printStackTrace();
        }
    }</code></pre> 
  <p>或者</p> 
  <pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tradeQueryByStr</span>(){
        String out_trade_no = getPara(<span class="hljs-string">"out_trade_no"</span>);

        AlipayTradeQueryModel model = <span class="hljs-keyword">new</span> AlipayTradeQueryModel();
        model.setOutTradeNo(out_trade_no);

        <span class="hljs-keyword">try</span> {
            String resultStr = AliPayApi.tradeQuery(model).getBody();
            renderText(resultStr);;
        } <span class="hljs-keyword">catch</span> (AlipayApiException e) {
            e.printStackTrace();
        }
    }</code></pre> 
  <p>返回的结果</p> 
  <pre class="prettyprint"><code class=" hljs json">{
  "<span class="hljs-attribute">alipay_trade_query_response</span>": <span class="hljs-value">{ "<span class="hljs-attribute">code</span>": <span class="hljs-value"><span class="hljs-string">"10000"</span></span>, "<span class="hljs-attribute">msg</span>": <span class="hljs-value"><span class="hljs-string">"Success"</span></span>, "<span class="hljs-attribute">buyer_logon_id</span>": <span class="hljs-value"><span class="hljs-string">"abp***@sandbox.com"</span></span>, "<span class="hljs-attribute">buyer_pay_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">buyer_user_id</span>": <span class="hljs-value"><span class="hljs-string">"2088102169474200"</span></span>, "<span class="hljs-attribute">fund_bill_list</span>": <span class="hljs-value">[ { "<span class="hljs-attribute">amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">fund_channel</span>": <span class="hljs-value"><span class="hljs-string">"ALIPAYACCOUNT"</span> </span>} ]</span>, "<span class="hljs-attribute">invoice_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">open_id</span>": <span class="hljs-value"><span class="hljs-string">"20881035070193409461376162014620"</span></span>, "<span class="hljs-attribute">out_trade_no</span>": <span class="hljs-value"><span class="hljs-string">"050720283214941"</span></span>, "<span class="hljs-attribute">point_amount</span>": <span class="hljs-value"><span class="hljs-string">"0.00"</span></span>, "<span class="hljs-attribute">receipt_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">send_pay_date</span>": <span class="hljs-value"><span class="hljs-string">"2017-05-07 20:28:34"</span></span>, "<span class="hljs-attribute">total_amount</span>": <span class="hljs-value"><span class="hljs-string">"100.00"</span></span>, "<span class="hljs-attribute">trade_no</span>": <span class="hljs-value"><span class="hljs-string">"2017050721001004200200238428"</span></span>, "<span class="hljs-attribute">trade_status</span>": <span class="hljs-value"><span class="hljs-string">"TRADE_SUCCESS"</span> </span>}</span>,
  "<span class="hljs-attribute">sign</span>": <span class="hljs-value"><span class="hljs-string">"DE6qYfU0Nziv3Dxpaj0gUROcqMNmREwYUw/t9qlnLiuM1JkKEdNJtbyJZ8OCoOIkgXEOSs7+mOrGgyxmOQqccwwhkDDsYXhPnc0cy4M7L4sNl5S3nUaveBaZjk3SMMGif43UaYtVI6SF4kq74uyoH15tCWDJ0N3nYct2epgc7r6kprAFqQxszgYp4tfKLw0qPCKnUyo7+WRbrc6UWQVuK+xDlVcvivW5cXjAf/HFyb8o+ddj6g+QQ4jUN2WTc2QGpbtfum6G7oPHT99cjAURVRw2NmU5WfUXNazzSvisa2oYsl8EH7+XHvsAMyIUZw0Ix8ymuAXdMkrUPFY4PfzjIg=="</span> </span>}</code></pre> 
  <h5 id="93-交易撤销接口alipaytradecancel测试">9.3 交易撤销接口alipay.trade.cancel测试</h5> 
  <pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tradeCancelByStr</span>(){
        <span class="hljs-keyword">try</span> {
            AlipayTradeCancelModel model = <span class="hljs-keyword">new</span> AlipayTradeCancelModel();
            model.setOutTradeNo(<span class="hljs-string">"050720283214941"</span>);
            model.setTradeNo(<span class="hljs-string">"2017050721001004200200238428"</span>);

            AlipayTradeCancelResponse response = AliPayApi.tradeCancel(model);
            renderJson(response.getBody());
        } <span class="hljs-keyword">catch</span> (AlipayApiException e) {
            e.printStackTrace();
        }
    }</code></pre> 
  <pre class="prettyprint"><code class=" hljs json">{
  "<span class="hljs-attribute">alipay_trade_cancel_response</span>": <span class="hljs-value">{ "<span class="hljs-attribute">code</span>": <span class="hljs-value"><span class="hljs-string">"10000"</span></span>, "<span class="hljs-attribute">msg</span>": <span class="hljs-value"><span class="hljs-string">"Success"</span></span>, "<span class="hljs-attribute">out_trade_no</span>": <span class="hljs-value"><span class="hljs-string">"050720283214941"</span></span>, "<span class="hljs-attribute">retry_flag</span>": <span class="hljs-value"><span class="hljs-string">"N"</span> </span>}</span>,
  "<span class="hljs-attribute">sign</span>": <span class="hljs-value"><span class="hljs-string">"QFwTwACi/x/qZu7YCapToWKpYDatg7Y06KAxij01PHSQrq0+l9eeFGdNIRpD2rSmkCVN75RQManw4PvIEurN5uW6YSZlZQ0Rj2EeH0eVyNWqNRWmVGeSaLQ+hpAt3vG/cy5vXJ1Zl7yr/VbtRiuSYrbzPhgkG1UNYf9JIb4Nj2iSpo8Ct6Bbhiq848w7ZEN6itBmd04N3O4HkBoueuXtgUmKoaTegDfrtNtQ7dRAkCRnoa43QbHYysqwOO751JjI6HOeviZUrTspegUFbqhSXInaZ4LMqeiPWXeXc7dRmtOlPOSRY5wYzYYNCmEe89HdyLFSzd447QS2b5Ky3wAY3w=="</span> </span>}</code></pre> 
  <p><img src="http://upload-images.jianshu.io/upload_images/1342351-ed201f19df6fa2fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试结果图" title=""></p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7f770a53f2.css" rel="stylesheet"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zyw_java/article/details/71372789,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zyw_java/article/details/71372789,&quot;}">阅读更多</a> 
</div> 
<script>
						(function(){
							function setArticleH(btnReadmore,posi){
								var winH = $(window).height();
								var articleBox = $("div.article_content");
								var artH = articleBox.height();
								if(artH > winH*posi){
									articleBox.css({
										'height':winH*posi+'px',
										'overflow':'hidden'
									})
									btnReadmore.click(function(){
										articleBox.removeAttr("style");
										$(this).parent().remove();
									})
								}else{
									btnReadmore.parent().remove();
								}
							}
							var btnReadmore = $("#btn-readmore");
							if(btnReadmore.length>0){
								if(currentUserName){
									setArticleH(btnReadmore,3);
								}else{
									setArticleH(btnReadmore,1.2);
								}
							}
						})()
					</script>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
