<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>在以太坊私有网络中建立节点集群,并发生交易 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="在以太坊私有网络中建立节点集群,并发生交易" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="为了在本地网络运行多个以太坊节点的实例,必须确保一下几点: 1. 每个实例都有独立的数据目录(–datadir) 2. 每个实例运行都有独立的端口.(eth和rpc两者都是)(–port 和 –rpcprot) 3. 在集群的情况下, 实例之间都必须要知道彼此. 4. 唯一的ipc通信端点,或者禁用ipc. 启动第一个节点(指定端口,并禁用ipc),运行命令和结果如下: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data0 --networkid 31459 --ipcdisable --port 619 --rpcport 8200 console INFO [06-28|14:52:52] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|14:52:52] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/chaindata cache=128 handles=1024 INFO [06-28|14:52:52] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|14:52:52] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data0/geth/ethash count=3 INFO [06-28|14:52:52] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 INFO [06-28|14:52:52] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|14:52:52] Loaded most recent local header number=546 hash=a511c3鈥40ac8 td=79201418 INFO [06-28|14:52:52] Loaded most recent local full block number=546 hash=a511c3鈥40ac8 td=79201418 INFO [06-28|14:52:52] Loaded most recent local fast block number=546 hash=a511c3鈥40ac8 td=79201418 WARN [06-28|14:52:52] Blockchain not empty, fast sync disabled INFO [06-28|14:52:52] Starting P2P networking INFO [06-28|14:52:54] UDP listener up self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619 INFO [06-28|14:52:54] RLPx listener up self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 coinbase: 0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3 at block: 546 (Wed, 28 Jun 2017 14:08:50 CST) datadir: /home/ubuntu/private-geth/data0 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 上面的命令以命令行的(console)的方式启动了节点, 所以我们可以通过继续输入下面的命令获取节点实例的enode url: &gt; admin.nodeInfo.enode &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot; 获取本机IP地址 ubuntu@i-ct5y7t0o:~$ ip addr 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 52:54:0f:63:73:66 brd ff:ff:ff:ff:ff:ff inet 192.168.0.3/24 brd 192.168.0.255 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::5054:fff:fe63:7366/64 scope link valid_lft forever preferred_lft forever 再打开一个终端,初始化第二个节点: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data1 init ./genesis.json WARN [06-28|14:55:45] No etherbase set and no accounts found as default INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=chaindata hash=e492a5鈥0420d INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/lightchaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=lightchaindata hash=e492a5鈥0420d 启动节点, 加上console 表示启动后,启用命令行: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data1 --networkid 31459 --ipcdisable --port 6191 --rpcport 8101 --bootnodes &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619&quot; console WARN [06-28|15:01:27] No etherbase set and no accounts found as default INFO [06-28|15:01:27] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|15:01:27] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=128 handles=1024 WARN [06-28|15:01:27] Upgrading chain database to use sequential keys INFO [06-28|15:01:27] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|15:01:27] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash count=3 INFO [06-28|15:01:27] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-28|15:01:27] Upgrading db log bloom bins INFO [06-28|15:01:27] Bloom-bin upgrade completed elapsed=198.75碌s INFO [06-28|15:01:27] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|15:01:27] Database conversion successful INFO [06-28|15:01:27] Loaded most recent local header number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local full block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local fast block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Starting P2P networking INFO [06-28|15:01:29] UDP listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 INFO [06-28|15:01:29] RLPx listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 然后他会自动同步区块链的数据 上面的命令中,–bootndoes 是设置当前节点启动后,直接通过设置–bootndoes 的值来链接第一个节点, –bootnoedes 的值可以通过在第一个节的命令行中,输入:admin.nodeInfo.enode命令打印出来. 也可以不设置 –bootnodes, 直接启动,启动后进入命令行, 通过命令admin.addPeer(enodeUrlOfFirst Instance)把它作为一个peer添加进来. 为了确认链接成功,第二个节点输入: &gt; admin.nodeInfo { enode: &quot;enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191&quot;, id: &quot;769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:6191&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, ports: { discovery: 6191, listener: 6191 }, protocols: { eth: { difficulty: 79750339, genesis: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, head: &quot;0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf&quot;, network: 31459 } } } 第一个节点输入: &gt; admin.nodeInfo.enode &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot; &gt; admin.nodeInfo { enode: &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot;, id: &quot;fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:619&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, ports: { discovery: 619, listener: 619 }, protocols: { eth: { difficulty: 79750339, genesis: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, head: &quot;0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf&quot;, network: 31459 } } } &gt; net.peerCount 1 &gt; admin.peers [{ caps: [&quot;eth/63&quot;], id: &quot;769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, network: { localAddress: &quot;192.168.0.3:619&quot;, remoteAddress: &quot;192.168.0.3:38620&quot; }, protocols: { eth: { difficulty: 1024, head: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, version: 63 } } }] 从得到的结果可以看出,第一个节点有1个peer链接, 链接的node id为: “769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09” 这个id,正好就是第二个节点的id. 按照这样的方式继续扩展,可以非常容易就可以建立本地节点集群.这些工作都可以写成脚本代码来完成, 里面还可以包含创建账户,挖矿等.. 请参考:https://github.com/ethersphere/eth-utils下的gethcluster.sh脚本,以及README中的使用方法和示例. 链接成功后,使用我们在上一篇文章中挖矿的账户,向第二个节点发送 “ether”(以太币的货币单位,还有一种叫”Wei”). 首先查看第二个节点的Wei数量和整个网络的区块号,还有接收货币的账号id: personal.newAccount() Passphrase: Repeat passphrase: &quot;0xd600f5622024bb8f53ca3f0506cf1a13c811e17b&quot; &gt; INFO [06-28|15:07:38] New wallet appeared url=keystore:///home/ubuntu/private鈥[32mstatus=Locked &gt; &gt; eth.getBalance(eth.accounts[0]) 0 在第一个节点命令行中,执行下面的操作: personal.unlockAccount(eth.accounts[0]) Unlock account 0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3 Passphrase: true &gt; ^C &gt; eth.sendTransaction({from: &quot;0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3&quot;, to: &quot;0xd600f5622024bb8f53ca3f0506cf1a13c811e17b&quot;, value: web3.toWei(1, &quot;ether&quot;)}) &gt; miner.start() 再在第二个节点的命令行输入: eth.getBalance(eth.accounts[0])就可以查看转账成功 再打开一个终端,初始化第三个节点: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data2 init ./genesis.json WARN [06-28|14:55:45] No etherbase set and no accounts found as default INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=chaindata hash=e492a5鈥0420d INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/lightchaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=lightchaindata hash=e492a5鈥0420d 启动节点, 加上console 表示启动后,启用命令行: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data2 --networkid 31459 --ipcdisable --port 6192 --rpcport 8100 --bootnodes &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619&quot; console WARN [06-28|15:01:27] No etherbase set and no accounts found as default INFO [06-28|15:01:27] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|15:01:27] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=128 handles=1024 WARN [06-28|15:01:27] Upgrading chain database to use sequential keys INFO [06-28|15:01:27] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|15:01:27] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash count=3 INFO [06-28|15:01:27] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-28|15:01:27] Upgrading db log bloom bins INFO [06-28|15:01:27] Bloom-bin upgrade completed elapsed=198.75碌s INFO [06-28|15:01:27] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|15:01:27] Database conversion successful INFO [06-28|15:01:27] Loaded most recent local header number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local full block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local fast block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Starting P2P networking INFO [06-28|15:01:29] UDP listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 INFO [06-28|15:01:29] RLPx listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 然后他会自动同步区块链的数据 这样这条链就有三个节点了 阅读更多" />
<meta property="og:description" content="为了在本地网络运行多个以太坊节点的实例,必须确保一下几点: 1. 每个实例都有独立的数据目录(–datadir) 2. 每个实例运行都有独立的端口.(eth和rpc两者都是)(–port 和 –rpcprot) 3. 在集群的情况下, 实例之间都必须要知道彼此. 4. 唯一的ipc通信端点,或者禁用ipc. 启动第一个节点(指定端口,并禁用ipc),运行命令和结果如下: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data0 --networkid 31459 --ipcdisable --port 619 --rpcport 8200 console INFO [06-28|14:52:52] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|14:52:52] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/chaindata cache=128 handles=1024 INFO [06-28|14:52:52] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|14:52:52] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data0/geth/ethash count=3 INFO [06-28|14:52:52] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 INFO [06-28|14:52:52] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|14:52:52] Loaded most recent local header number=546 hash=a511c3鈥40ac8 td=79201418 INFO [06-28|14:52:52] Loaded most recent local full block number=546 hash=a511c3鈥40ac8 td=79201418 INFO [06-28|14:52:52] Loaded most recent local fast block number=546 hash=a511c3鈥40ac8 td=79201418 WARN [06-28|14:52:52] Blockchain not empty, fast sync disabled INFO [06-28|14:52:52] Starting P2P networking INFO [06-28|14:52:54] UDP listener up self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619 INFO [06-28|14:52:54] RLPx listener up self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 coinbase: 0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3 at block: 546 (Wed, 28 Jun 2017 14:08:50 CST) datadir: /home/ubuntu/private-geth/data0 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 上面的命令以命令行的(console)的方式启动了节点, 所以我们可以通过继续输入下面的命令获取节点实例的enode url: &gt; admin.nodeInfo.enode &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot; 获取本机IP地址 ubuntu@i-ct5y7t0o:~$ ip addr 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 52:54:0f:63:73:66 brd ff:ff:ff:ff:ff:ff inet 192.168.0.3/24 brd 192.168.0.255 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::5054:fff:fe63:7366/64 scope link valid_lft forever preferred_lft forever 再打开一个终端,初始化第二个节点: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data1 init ./genesis.json WARN [06-28|14:55:45] No etherbase set and no accounts found as default INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=chaindata hash=e492a5鈥0420d INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/lightchaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=lightchaindata hash=e492a5鈥0420d 启动节点, 加上console 表示启动后,启用命令行: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data1 --networkid 31459 --ipcdisable --port 6191 --rpcport 8101 --bootnodes &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619&quot; console WARN [06-28|15:01:27] No etherbase set and no accounts found as default INFO [06-28|15:01:27] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|15:01:27] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=128 handles=1024 WARN [06-28|15:01:27] Upgrading chain database to use sequential keys INFO [06-28|15:01:27] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|15:01:27] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash count=3 INFO [06-28|15:01:27] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-28|15:01:27] Upgrading db log bloom bins INFO [06-28|15:01:27] Bloom-bin upgrade completed elapsed=198.75碌s INFO [06-28|15:01:27] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|15:01:27] Database conversion successful INFO [06-28|15:01:27] Loaded most recent local header number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local full block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local fast block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Starting P2P networking INFO [06-28|15:01:29] UDP listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 INFO [06-28|15:01:29] RLPx listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 然后他会自动同步区块链的数据 上面的命令中,–bootndoes 是设置当前节点启动后,直接通过设置–bootndoes 的值来链接第一个节点, –bootnoedes 的值可以通过在第一个节的命令行中,输入:admin.nodeInfo.enode命令打印出来. 也可以不设置 –bootnodes, 直接启动,启动后进入命令行, 通过命令admin.addPeer(enodeUrlOfFirst Instance)把它作为一个peer添加进来. 为了确认链接成功,第二个节点输入: &gt; admin.nodeInfo { enode: &quot;enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191&quot;, id: &quot;769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:6191&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, ports: { discovery: 6191, listener: 6191 }, protocols: { eth: { difficulty: 79750339, genesis: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, head: &quot;0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf&quot;, network: 31459 } } } 第一个节点输入: &gt; admin.nodeInfo.enode &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot; &gt; admin.nodeInfo { enode: &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot;, id: &quot;fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:619&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, ports: { discovery: 619, listener: 619 }, protocols: { eth: { difficulty: 79750339, genesis: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, head: &quot;0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf&quot;, network: 31459 } } } &gt; net.peerCount 1 &gt; admin.peers [{ caps: [&quot;eth/63&quot;], id: &quot;769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, network: { localAddress: &quot;192.168.0.3:619&quot;, remoteAddress: &quot;192.168.0.3:38620&quot; }, protocols: { eth: { difficulty: 1024, head: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, version: 63 } } }] 从得到的结果可以看出,第一个节点有1个peer链接, 链接的node id为: “769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09” 这个id,正好就是第二个节点的id. 按照这样的方式继续扩展,可以非常容易就可以建立本地节点集群.这些工作都可以写成脚本代码来完成, 里面还可以包含创建账户,挖矿等.. 请参考:https://github.com/ethersphere/eth-utils下的gethcluster.sh脚本,以及README中的使用方法和示例. 链接成功后,使用我们在上一篇文章中挖矿的账户,向第二个节点发送 “ether”(以太币的货币单位,还有一种叫”Wei”). 首先查看第二个节点的Wei数量和整个网络的区块号,还有接收货币的账号id: personal.newAccount() Passphrase: Repeat passphrase: &quot;0xd600f5622024bb8f53ca3f0506cf1a13c811e17b&quot; &gt; INFO [06-28|15:07:38] New wallet appeared url=keystore:///home/ubuntu/private鈥[32mstatus=Locked &gt; &gt; eth.getBalance(eth.accounts[0]) 0 在第一个节点命令行中,执行下面的操作: personal.unlockAccount(eth.accounts[0]) Unlock account 0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3 Passphrase: true &gt; ^C &gt; eth.sendTransaction({from: &quot;0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3&quot;, to: &quot;0xd600f5622024bb8f53ca3f0506cf1a13c811e17b&quot;, value: web3.toWei(1, &quot;ether&quot;)}) &gt; miner.start() 再在第二个节点的命令行输入: eth.getBalance(eth.accounts[0])就可以查看转账成功 再打开一个终端,初始化第三个节点: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data2 init ./genesis.json WARN [06-28|14:55:45] No etherbase set and no accounts found as default INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=chaindata hash=e492a5鈥0420d INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/lightchaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=lightchaindata hash=e492a5鈥0420d 启动节点, 加上console 表示启动后,启用命令行: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data2 --networkid 31459 --ipcdisable --port 6192 --rpcport 8100 --bootnodes &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619&quot; console WARN [06-28|15:01:27] No etherbase set and no accounts found as default INFO [06-28|15:01:27] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|15:01:27] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=128 handles=1024 WARN [06-28|15:01:27] Upgrading chain database to use sequential keys INFO [06-28|15:01:27] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|15:01:27] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash count=3 INFO [06-28|15:01:27] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-28|15:01:27] Upgrading db log bloom bins INFO [06-28|15:01:27] Bloom-bin upgrade completed elapsed=198.75碌s INFO [06-28|15:01:27] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|15:01:27] Database conversion successful INFO [06-28|15:01:27] Loaded most recent local header number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local full block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local fast block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Starting P2P networking INFO [06-28|15:01:29] UDP listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 INFO [06-28|15:01:29] RLPx listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 然后他会自动同步区块链的数据 这样这条链就有三个节点了 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/06/28/c642ef3ed32be68ffcb09c33db0edc0a.html" />
<meta property="og:url" content="https://mlh.app/2017/06/28/c642ef3ed32be68ffcb09c33db0edc0a.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-28T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"为了在本地网络运行多个以太坊节点的实例,必须确保一下几点: 1. 每个实例都有独立的数据目录(–datadir) 2. 每个实例运行都有独立的端口.(eth和rpc两者都是)(–port 和 –rpcprot) 3. 在集群的情况下, 实例之间都必须要知道彼此. 4. 唯一的ipc通信端点,或者禁用ipc. 启动第一个节点(指定端口,并禁用ipc),运行命令和结果如下: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data0 --networkid 31459 --ipcdisable --port 619 --rpcport 8200 console INFO [06-28|14:52:52] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|14:52:52] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/chaindata cache=128 handles=1024 INFO [06-28|14:52:52] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|14:52:52] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data0/geth/ethash count=3 INFO [06-28|14:52:52] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 INFO [06-28|14:52:52] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|14:52:52] Loaded most recent local header number=546 hash=a511c3鈥40ac8 td=79201418 INFO [06-28|14:52:52] Loaded most recent local full block number=546 hash=a511c3鈥40ac8 td=79201418 INFO [06-28|14:52:52] Loaded most recent local fast block number=546 hash=a511c3鈥40ac8 td=79201418 WARN [06-28|14:52:52] Blockchain not empty, fast sync disabled INFO [06-28|14:52:52] Starting P2P networking INFO [06-28|14:52:54] UDP listener up self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619 INFO [06-28|14:52:54] RLPx listener up self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 coinbase: 0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3 at block: 546 (Wed, 28 Jun 2017 14:08:50 CST) datadir: /home/ubuntu/private-geth/data0 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 上面的命令以命令行的(console)的方式启动了节点, 所以我们可以通过继续输入下面的命令获取节点实例的enode url: &gt; admin.nodeInfo.enode &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot; 获取本机IP地址 ubuntu@i-ct5y7t0o:~$ ip addr 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 52:54:0f:63:73:66 brd ff:ff:ff:ff:ff:ff inet 192.168.0.3/24 brd 192.168.0.255 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::5054:fff:fe63:7366/64 scope link valid_lft forever preferred_lft forever 再打开一个终端,初始化第二个节点: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data1 init ./genesis.json WARN [06-28|14:55:45] No etherbase set and no accounts found as default INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=chaindata hash=e492a5鈥0420d INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/lightchaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=lightchaindata hash=e492a5鈥0420d 启动节点, 加上console 表示启动后,启用命令行: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data1 --networkid 31459 --ipcdisable --port 6191 --rpcport 8101 --bootnodes &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619&quot; console WARN [06-28|15:01:27] No etherbase set and no accounts found as default INFO [06-28|15:01:27] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|15:01:27] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=128 handles=1024 WARN [06-28|15:01:27] Upgrading chain database to use sequential keys INFO [06-28|15:01:27] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|15:01:27] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash count=3 INFO [06-28|15:01:27] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-28|15:01:27] Upgrading db log bloom bins INFO [06-28|15:01:27] Bloom-bin upgrade completed elapsed=198.75碌s INFO [06-28|15:01:27] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|15:01:27] Database conversion successful INFO [06-28|15:01:27] Loaded most recent local header number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local full block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local fast block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Starting P2P networking INFO [06-28|15:01:29] UDP listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 INFO [06-28|15:01:29] RLPx listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 然后他会自动同步区块链的数据 上面的命令中,–bootndoes 是设置当前节点启动后,直接通过设置–bootndoes 的值来链接第一个节点, –bootnoedes 的值可以通过在第一个节的命令行中,输入:admin.nodeInfo.enode命令打印出来. 也可以不设置 –bootnodes, 直接启动,启动后进入命令行, 通过命令admin.addPeer(enodeUrlOfFirst Instance)把它作为一个peer添加进来. 为了确认链接成功,第二个节点输入: &gt; admin.nodeInfo { enode: &quot;enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191&quot;, id: &quot;769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:6191&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, ports: { discovery: 6191, listener: 6191 }, protocols: { eth: { difficulty: 79750339, genesis: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, head: &quot;0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf&quot;, network: 31459 } } } 第一个节点输入: &gt; admin.nodeInfo.enode &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot; &gt; admin.nodeInfo { enode: &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619&quot;, id: &quot;fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:619&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, ports: { discovery: 619, listener: 619 }, protocols: { eth: { difficulty: 79750339, genesis: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, head: &quot;0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf&quot;, network: 31459 } } } &gt; net.peerCount 1 &gt; admin.peers [{ caps: [&quot;eth/63&quot;], id: &quot;769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09&quot;, name: &quot;Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1&quot;, network: { localAddress: &quot;192.168.0.3:619&quot;, remoteAddress: &quot;192.168.0.3:38620&quot; }, protocols: { eth: { difficulty: 1024, head: &quot;0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d&quot;, version: 63 } } }] 从得到的结果可以看出,第一个节点有1个peer链接, 链接的node id为: “769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09” 这个id,正好就是第二个节点的id. 按照这样的方式继续扩展,可以非常容易就可以建立本地节点集群.这些工作都可以写成脚本代码来完成, 里面还可以包含创建账户,挖矿等.. 请参考:https://github.com/ethersphere/eth-utils下的gethcluster.sh脚本,以及README中的使用方法和示例. 链接成功后,使用我们在上一篇文章中挖矿的账户,向第二个节点发送 “ether”(以太币的货币单位,还有一种叫”Wei”). 首先查看第二个节点的Wei数量和整个网络的区块号,还有接收货币的账号id: personal.newAccount() Passphrase: Repeat passphrase: &quot;0xd600f5622024bb8f53ca3f0506cf1a13c811e17b&quot; &gt; INFO [06-28|15:07:38] New wallet appeared url=keystore:///home/ubuntu/private鈥\u001b[32mstatus=Locked &gt; &gt; eth.getBalance(eth.accounts[0]) 0 在第一个节点命令行中,执行下面的操作: personal.unlockAccount(eth.accounts[0]) Unlock account 0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3 Passphrase: true &gt; ^C &gt; eth.sendTransaction({from: &quot;0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3&quot;, to: &quot;0xd600f5622024bb8f53ca3f0506cf1a13c811e17b&quot;, value: web3.toWei(1, &quot;ether&quot;)}) &gt; miner.start() 再在第二个节点的命令行输入: eth.getBalance(eth.accounts[0])就可以查看转账成功 再打开一个终端,初始化第三个节点: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data2 init ./genesis.json WARN [06-28|14:55:45] No etherbase set and no accounts found as default INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=chaindata hash=e492a5鈥0420d INFO [06-28|14:55:45] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/lightchaindata cache=16 handles=16 INFO [06-28|14:55:45] Writing custom genesis block INFO [06-28|14:55:45] Successfully wrote genesis state database=lightchaindata hash=e492a5鈥0420d 启动节点, 加上console 表示启动后,启用命令行: root@i-ct5y7t0o:/home/ubuntu/private-geth# geth --datadir ./data2 --networkid 31459 --ipcdisable --port 6192 --rpcport 8100 --bootnodes &quot;enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619&quot; console WARN [06-28|15:01:27] No etherbase set and no accounts found as default INFO [06-28|15:01:27] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-28|15:01:27] Allocated cache and file handles database=/home/ubuntu/private-geth/data1/geth/chaindata cache=128 handles=1024 WARN [06-28|15:01:27] Upgrading chain database to use sequential keys INFO [06-28|15:01:27] Initialised chain configuration config=&quot;{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}&quot; INFO [06-28|15:01:27] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash count=3 INFO [06-28|15:01:27] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-28|15:01:27] Upgrading db log bloom bins INFO [06-28|15:01:27] Bloom-bin upgrade completed elapsed=198.75碌s INFO [06-28|15:01:27] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=31459 INFO [06-28|15:01:27] Database conversion successful INFO [06-28|15:01:27] Loaded most recent local header number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local full block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Loaded most recent local fast block number=0 hash=e492a5鈥0420d td=1024 INFO [06-28|15:01:27] Starting P2P networking INFO [06-28|15:01:29] UDP listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 INFO [06-28|15:01:29] RLPx listener up self=enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191 Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 然后他会自动同步区块链的数据 这样这条链就有三个节点了 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/06/28/c642ef3ed32be68ffcb09c33db0edc0a.html","headline":"在以太坊私有网络中建立节点集群,并发生交易","dateModified":"2017-06-28T00:00:00+08:00","datePublished":"2017-06-28T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/06/28/c642ef3ed32be68ffcb09c33db0edc0a.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>在以太坊私有网络中建立节点集群,并发生交易</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>为了在本地网络运行多个以太坊节点的实例,必须确保一下几点: <br> 1. 每个实例都有独立的数据目录(–datadir) <br> 2. 每个实例运行都有独立的端口.(eth和rpc两者都是)(–port 和 –rpcprot) <br> 3. 在集群的情况下, 实例之间都必须要知道彼此. <br> 4. 唯一的ipc通信端点,或者禁用ipc. <br> 启动第一个节点(指定端口,并禁用ipc),运行命令和结果如下:</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">root@i-ct5y7t0o:/home/ubuntu/<span class="hljs-keyword">private</span>-geth<span class="hljs-comment"># geth --datadir ./data0 --networkid 31459 --ipcdisable --port 619 --rpcport 8200 console</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Starting peer-<span class="hljs-built_in">to</span>-peer node               instance=Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Allocated cache <span class="hljs-operator">and</span> <span class="hljs-built_in">file</span> handles         database=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data0/geth/chaindata cache=<span class="hljs-number">128</span> handles=<span class="hljs-number">1024</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Initialised chain configuration          config=<span class="hljs-string">"{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}"</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash caches   dir=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data0/geth/ethash count=<span class="hljs-number">3</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash DAGs     dir=/root/.ethash                               count=<span class="hljs-number">2</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Initialising Ethereum protocol           versions=<span class="hljs-string">"[63 62]"</span> network=<span class="hljs-number">31459</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Loaded most recent <span class="hljs-built_in">local</span> header          <span class="hljs-built_in">number</span>=<span class="hljs-number">546</span> hash=a511c3鈥<span class="hljs-number">40</span>ac8 td=<span class="hljs-number">79201418</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Loaded most recent <span class="hljs-built_in">local</span> full block      <span class="hljs-built_in">number</span>=<span class="hljs-number">546</span> hash=a511c3鈥<span class="hljs-number">40</span>ac8 td=<span class="hljs-number">79201418</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Loaded most recent <span class="hljs-built_in">local</span> fast block      <span class="hljs-built_in">number</span>=<span class="hljs-number">546</span> hash=a511c3鈥<span class="hljs-number">40</span>ac8 td=<span class="hljs-number">79201418</span>
WARN [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Blockchain <span class="hljs-operator">not</span> <span class="hljs-constant">empty</span>, fast sync disabled 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">52</span>] Starting P2P networking 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">54</span>] UDP listener up                          self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:<span class="hljs-number">619</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">52</span>:<span class="hljs-number">54</span>] RLPx listener up                         self=enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:<span class="hljs-number">619</span>
Welcome <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> Geth JavaScript console!

instance: Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span>
coinbase: <span class="hljs-number">0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3</span>
<span class="hljs-keyword">at</span> block: <span class="hljs-number">546</span> (Wed, <span class="hljs-number">28</span> Jun <span class="hljs-number">2017</span> <span class="hljs-number">14</span>:<span class="hljs-number">08</span>:<span class="hljs-number">50</span> CST)
 datadir: /home/ubuntu/<span class="hljs-keyword">private</span>-geth/data0
 modules: admin:<span class="hljs-number">1.0</span> debug:<span class="hljs-number">1.0</span> eth:<span class="hljs-number">1.0</span> miner:<span class="hljs-number">1.0</span> net:<span class="hljs-number">1.0</span> personal:<span class="hljs-number">1.0</span> rpc:<span class="hljs-number">1.0</span> txpool:<span class="hljs-number">1.0</span> web3:<span class="hljs-number">1.0</span></code></pre> 
  <p>上面的命令以命令行的(console)的方式启动了节点, 所以我们可以通过继续输入下面的命令获取节点实例的enode url:</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; admin<span class="hljs-preprocessor">.nodeInfo</span><span class="hljs-preprocessor">.enode</span>
<span class="hljs-string">"enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619"</span></code></pre> 
  <p>获取本机IP地址</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">ubuntu@i-ct5y7t0o:~$ ip addr
<span class="hljs-number">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="hljs-number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="hljs-number">1</span>
    link/loopback <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> brd <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>
    inet <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/<span class="hljs-number">8</span> scope host lo
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span>
    inet6 ::<span class="hljs-number">1</span>/<span class="hljs-number">128</span> scope host 
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span>
<span class="hljs-number">2</span>: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="hljs-number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="hljs-number">1000</span>
    link/ether <span class="hljs-number">52</span>:<span class="hljs-number">54</span>:<span class="hljs-number">0</span>f:<span class="hljs-number">63</span>:<span class="hljs-number">73</span>:<span class="hljs-number">66</span> brd ff:ff:ff:ff:ff:ff
    inet <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.3</span>/<span class="hljs-number">24</span> brd <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.255</span> scope <span class="hljs-built_in">global</span> eth0
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span>
    inet6 fe80::<span class="hljs-number">5054</span>:fff:fe63:<span class="hljs-number">7366</span>/<span class="hljs-number">64</span> scope link 
       valid_lft <span class="hljs-keyword">forever</span> preferred_lft <span class="hljs-keyword">forever</span></code></pre> 
  <p>再打开一个终端,初始化第二个节点:</p> 
  <pre class="prettyprint"><code class=" hljs vbnet">root@i-ct5y7t0o:/home/ubuntu/<span class="hljs-keyword">private</span>-geth<span class="hljs-preprocessor"># geth --datadir ./data1 init ./genesis.json</span>
WARN [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] No etherbase <span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> no accounts found <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data1/geth/chaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Writing <span class="hljs-keyword">custom</span> genesis block 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Successfully wrote genesis state         database=chaindata                                      hash=e492a5鈥<span class="hljs-number">0420</span>d
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data1/geth/lightchaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Writing <span class="hljs-keyword">custom</span> genesis block 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Successfully wrote genesis state         database=lightchaindata                                      hash=e492a5鈥<span class="hljs-number">0420</span>d</code></pre> 
  <p>启动节点, 加上console 表示启动后,启用命令行:</p> 
  <pre class="prettyprint"><code class=" hljs sql">root@i-ct5y7t0o:/home/ubuntu/private-geth# geth <span class="hljs-comment">--datadir ./data1 --networkid 31459 --ipcdisable --port 6191 --rpcport 8101 --bootnodes "enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619" console</span>
WARN [06-28|15:01:27] No etherbase <span class="hljs-operator"><span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">no</span> accounts <span class="hljs-keyword">found</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Starting peer-<span class="hljs-keyword">to</span>-peer node instance=Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Allocated cache <span class="hljs-keyword">and</span> file handles <span class="hljs-keyword">database</span>=/home/ubuntu/private-geth/data1/geth/chaindata cache=<span class="hljs-number">128</span> handles=<span class="hljs-number">1024</span> WARN [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Upgrading chain <span class="hljs-keyword">database</span> <span class="hljs-keyword">to</span> use sequential keys INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Initialised chain configuration config=<span class="hljs-string">"{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}"</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">3</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash DAGs dir=/root/.ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">2</span> WARN [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Upgrading db log bloom bins INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Bloom-bin upgrade completed elapsed=<span class="hljs-number">198.75</span>碌s INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Initialising Ethereum protocol versions=<span class="hljs-string">"[63 62]"</span> network=<span class="hljs-number">31459</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] <span class="hljs-keyword">Database</span> conversion successful INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Loaded most recent <span class="hljs-keyword">local</span> header <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=e492a5鈥<span class="hljs-number">0420</span>d td=<span class="hljs-number">1024</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Loaded most recent <span class="hljs-keyword">local</span> <span class="hljs-keyword">full</span> block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=e492a5鈥<span class="hljs-number">0420</span>d td=<span class="hljs-number">1024</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Loaded most recent <span class="hljs-keyword">local</span> fast block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=e492a5鈥<span class="hljs-number">0420</span>d td=<span class="hljs-number">1024</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Starting P2P networking INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">29</span>] UDP listener up self=enode://<span class="hljs-number">769</span>c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:<span class="hljs-number">6191</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">29</span>] RLPx listener up self=enode://<span class="hljs-number">769</span>c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:<span class="hljs-number">6191</span> Welcome <span class="hljs-keyword">to</span> the Geth JavaScript console! instance: Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> modules: admin:<span class="hljs-number">1.0</span> debug:<span class="hljs-number">1.0</span> eth:<span class="hljs-number">1.0</span> miner:<span class="hljs-number">1.0</span> net:<span class="hljs-number">1.0</span> personal:<span class="hljs-number">1.0</span> rpc:<span class="hljs-number">1.0</span> txpool:<span class="hljs-number">1.0</span> web3:<span class="hljs-number">1.0</span> 然后他会自动同步区块链的数据</span></code></pre> 
  <p>上面的命令中,–bootndoes 是设置当前节点启动后,直接通过设置–bootndoes 的值来链接第一个节点, –bootnoedes 的值可以通过在第一个节的命令行中,输入:admin.nodeInfo.enode命令打印出来. <br> 也可以不设置 –bootnodes, 直接启动,启动后进入命令行, 通过命令admin.addPeer(enodeUrlOfFirst Instance)把它作为一个peer添加进来. <br> 为了确认链接成功,第二个节点输入:</p> 
  <pre class="prettyprint"><code class=" hljs css">&gt; <span class="hljs-tag">admin</span><span class="hljs-class">.nodeInfo</span>
<span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">enode</span>:<span class="hljs-value"> <span class="hljs-string">"enode://769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:6191"</span>, id: <span class="hljs-string">"769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09"</span>, ip: <span class="hljs-string">"::"</span>, listenAddr: <span class="hljs-string">"[::]:6191"</span>, name: <span class="hljs-string">"Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1"</span>, ports: { discovery: <span class="hljs-number">6191</span>, listener: <span class="hljs-number">6191</span> </span></span></span>},
  <span class="hljs-tag">protocols</span>: <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">eth</span>:<span class="hljs-value"> { difficulty: <span class="hljs-number">79750339</span>, genesis: <span class="hljs-string">"0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d"</span>, head: <span class="hljs-string">"0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf"</span>, network: <span class="hljs-number">31459</span> </span></span></span>}
  }
}</code></pre> 
  <p>第一个节点输入:</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; admin<span class="hljs-preprocessor">.nodeInfo</span><span class="hljs-preprocessor">.enode</span>
<span class="hljs-string">"enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619"</span>
&gt; admin<span class="hljs-preprocessor">.nodeInfo</span>
{
  enode: <span class="hljs-string">"enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@[::]:619"</span>,
  id: <span class="hljs-string">"fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7"</span>,
  ip: <span class="hljs-string">"::"</span>,
  listenAddr: <span class="hljs-string">"[::]:619"</span>,
  name: <span class="hljs-string">"Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1"</span>,
  ports: {
    discovery: <span class="hljs-number">619</span>,
    listener: <span class="hljs-number">619</span>
  },
  protocols: {
    eth: {
      difficulty: <span class="hljs-number">79750339</span>,
      genesis: <span class="hljs-string">"0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d"</span>,
      head: <span class="hljs-string">"0xdeeb2bc33146dccc9b5a3f02c56735d4fa4cb562fb92b3966053ede8880db8bf"</span>,
      network: <span class="hljs-number">31459</span>
    }
  }
}
&gt; net<span class="hljs-preprocessor">.peerCount</span>
<span class="hljs-number">1</span>
&gt; admin<span class="hljs-preprocessor">.peers</span>
[{
    caps: [<span class="hljs-string">"eth/63"</span>],
    id: <span class="hljs-string">"769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09"</span>,
    name: <span class="hljs-string">"Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1"</span>,
    network: {
      localAddress: <span class="hljs-string">"192.168.0.3:619"</span>,
      remoteAddress: <span class="hljs-string">"192.168.0.3:38620"</span>
    },
    protocols: {
      eth: {
        difficulty: <span class="hljs-number">1024</span>,
        head: <span class="hljs-string">"0xe492a51ac029fd78d9c27dd1ff018b233231d15aa795d90aab1bd7d1ebc0420d"</span>,
        version: <span class="hljs-number">63</span>
      }
    }
}]</code></pre> 
  <p>从得到的结果可以看出,第一个节点有1个peer链接, 链接的node id为: <br> “769c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09” <br> 这个id,正好就是第二个节点的id. <br> 按照这样的方式继续扩展,可以非常容易就可以建立本地节点集群.这些工作都可以写成脚本代码来完成, 里面还可以包含创建账户,挖矿等.. <br> 请参考:<a href="https://github.com/ethersphere/eth-utils" rel="nofollow" target="_blank">https://github.com/ethersphere/eth-utils</a>下的gethcluster.sh脚本,以及README中的使用方法和示例. </p> 
  <p>链接成功后,使用我们在上一篇文章中挖矿的账户,向第二个节点发送 “ether”(以太币的货币单位,还有一种叫”Wei”). <br> 首先查看第二个节点的Wei数量和整个网络的区块号,还有接收货币的账号id:</p> 
  <pre class="prettyprint"><code class=" hljs avrasm"> personal<span class="hljs-preprocessor">.newAccount</span>()
<span class="hljs-label">Passphrase:</span> 
Repeat passphrase: 
<span class="hljs-string">"0xd600f5622024bb8f53ca3f0506cf1a13c811e17b"</span>
&gt; INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">07</span>:<span class="hljs-number">38</span>] New wallet appeared                      url=keystore:///home/ubuntu/private鈥[<span class="hljs-number">32</span>mstatus=Locked

&gt; 
&gt; eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])
<span class="hljs-number">0</span></code></pre> 
  <p>在第一个节点命令行中,执行下面的操作:</p> 
  <pre class="prettyprint"><code class=" hljs avrasm"> personal<span class="hljs-preprocessor">.unlockAccount</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])
Unlock account <span class="hljs-number">0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3</span>
<span class="hljs-label">Passphrase:</span> 
true
&gt; ^C
&gt; eth<span class="hljs-preprocessor">.sendTransaction</span>({from: <span class="hljs-string">"0x66c62f1afa08eae5343bd2b3129e0ae9aa141fc3"</span>, to: <span class="hljs-string">"0xd600f5622024bb8f53ca3f0506cf1a13c811e17b"</span>, value: web3<span class="hljs-preprocessor">.toWei</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"ether"</span>)})
&gt; miner<span class="hljs-preprocessor">.start</span>()</code></pre> 
  <p>再在第二个节点的命令行输入:</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])就可以查看转账成功</code></pre> 
  <p>再打开一个终端,初始化第三个节点:</p> 
  <pre class="prettyprint"><code class=" hljs vbnet">root@i-ct5y7t0o:/home/ubuntu/<span class="hljs-keyword">private</span>-geth<span class="hljs-preprocessor"># geth --datadir ./data2 init ./genesis.json</span>
WARN [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] No etherbase <span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> no accounts found <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data1/geth/chaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Writing <span class="hljs-keyword">custom</span> genesis block 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Successfully wrote genesis state         database=chaindata                                      hash=e492a5鈥<span class="hljs-number">0420</span>d
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data1/geth/lightchaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Writing <span class="hljs-keyword">custom</span> genesis block 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">14</span>:<span class="hljs-number">55</span>:<span class="hljs-number">45</span>] Successfully wrote genesis state         database=lightchaindata                                      hash=e492a5鈥<span class="hljs-number">0420</span>d</code></pre> 
  <p>启动节点, 加上console 表示启动后,启用命令行:</p> 
  <pre class="prettyprint"><code class=" hljs sql">root@i-ct5y7t0o:/home/ubuntu/private-geth# geth <span class="hljs-comment">--datadir ./data2 --networkid 31459 --ipcdisable --port 6192 --rpcport 8100 --bootnodes "enode://fc96d5fb078c82f33092c4944b31b3a8b9201ddec88b880ae245a131e1107b33f3d7833f5f6992d7c9ffdb557fbdd9ad2ab5b2ead2492f0bdb5690a0392c50f7@192.168.0.3:619" console</span>
WARN [06-28|15:01:27] No etherbase <span class="hljs-operator"><span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">no</span> accounts <span class="hljs-keyword">found</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Starting peer-<span class="hljs-keyword">to</span>-peer node instance=Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Allocated cache <span class="hljs-keyword">and</span> file handles <span class="hljs-keyword">database</span>=/home/ubuntu/private-geth/data1/geth/chaindata cache=<span class="hljs-number">128</span> handles=<span class="hljs-number">1024</span> WARN [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Upgrading chain <span class="hljs-keyword">database</span> <span class="hljs-keyword">to</span> use sequential keys INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Initialised chain configuration config=<span class="hljs-string">"{ChainID: 666 Homestead: 0 DAO: &lt;nil&gt; DAOSupport: false EIP150: &lt;nil&gt; EIP155: 0 EIP158: 0 Metropolis: &lt;nil&gt; Engine: unknown}"</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash caches dir=/home/ubuntu/private-geth/data1/geth/ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">3</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash DAGs dir=/root/.ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">2</span> WARN [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Upgrading db log bloom bins INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Bloom-bin upgrade completed elapsed=<span class="hljs-number">198.75</span>碌s INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Initialising Ethereum protocol versions=<span class="hljs-string">"[63 62]"</span> network=<span class="hljs-number">31459</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] <span class="hljs-keyword">Database</span> conversion successful INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Loaded most recent <span class="hljs-keyword">local</span> header <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=e492a5鈥<span class="hljs-number">0420</span>d td=<span class="hljs-number">1024</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Loaded most recent <span class="hljs-keyword">local</span> <span class="hljs-keyword">full</span> block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=e492a5鈥<span class="hljs-number">0420</span>d td=<span class="hljs-number">1024</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Loaded most recent <span class="hljs-keyword">local</span> fast block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=e492a5鈥<span class="hljs-number">0420</span>d td=<span class="hljs-number">1024</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">27</span>] Starting P2P networking INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">29</span>] UDP listener up self=enode://<span class="hljs-number">769</span>c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:<span class="hljs-number">6191</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">28</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">29</span>] RLPx listener up self=enode://<span class="hljs-number">769</span>c6de9b913f40edac8a037bbc697242097c4fa8f1574240bd2aeb930c049fd0d85310b9ba04bf6027c9d1a36a13789210140c9f2e38525deff87e28c8f5a09@[::]:<span class="hljs-number">6191</span> Welcome <span class="hljs-keyword">to</span> the Geth JavaScript console! instance: Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> modules: admin:<span class="hljs-number">1.0</span> debug:<span class="hljs-number">1.0</span> eth:<span class="hljs-number">1.0</span> miner:<span class="hljs-number">1.0</span> net:<span class="hljs-number">1.0</span> personal:<span class="hljs-number">1.0</span> rpc:<span class="hljs-number">1.0</span> txpool:<span class="hljs-number">1.0</span> web3:<span class="hljs-number">1.0</span> 然后他会自动同步区块链的数据</span></code></pre> 
  <p>这样这条链就有三个节点了</p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/73848762,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/73848762,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
