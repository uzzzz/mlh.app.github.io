<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>安装geth 搭建以太坊私链 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="安装geth 搭建以太坊私链" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1 Ubuntu用户可以选择在线安装geth的方式，在终端中依次执行以下命令即可： $ sudo add-apt-repository -y ppa:ethereum/ethereum $ sudo apt-get update $ sudo apt-get install ethereum 安装完成后就用geth help验证是否安装成功 ubuntu@i-umw7lzvn:~$ geth help NAME: geth - the go-ethereum command line interface Copyright 2013-2017 The go-ethereum Authors USAGE: geth [options] command [command options] [arguments...] VERSION: **1.6.6-stable-10a45cb5** COMMANDS: init Bootstrap and initialize a new genesis block import Import a blockchain file ``` 2 下面开始建立私有以太坊网络:以太坊节点之间能够互相链接需要满足1)相同的协议版本2)相同的networkid,所以搭建私有网络最方便的方法就是通过geth命令中的–networkid选项,设置一个与主网不同的networkid(主网的networkid为1),这也是官方推荐的 ubuntu@i-umw7lzvn:~$ mkdir private-geth ubuntu@i-umw7lzvn:~$ cd private-geth/ 世纪区块文件,是一个json格式的文件: vim genesis.json 以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，创世区块信息写在一个json格式的配置文件中。首先将下面的内容保存到一个json文件中，例如genesis.json(涉及到权限问题所以进入root权限) root@i-nhmyceuh:/home/ubuntu/private-geth# vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 15, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x40000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 准备好创世区块配置文件后，需要初始化区块链，将上面的创世区块信息写入到区块链中。首先要新建一个目录用来存放区块链数据，假设新建的数据目录为~/private-geth/app/chain，genesis.json保存在~/private-geth中，此时目录结构应该是这样的： private-geth ├── app └── genesis.json 接下来进入private-geth中，执行初始化命令： root@i-nhmyceuh:/home/ubuntu/private-geth# geth --datadir data0 init genesis.json WARN [06-26|10:54:33] No etherbase set and no accounts found as default INFO [06-26|10:54:33] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/chaindata cache=16 handles=16 INFO [06-26|10:54:33] Writing custom genesis block INFO [06-26|10:54:33] Successfully wrote genesis state database=chaindata hash=a0e580鈥5e82e INFO [06-26|10:54:33] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/lightchaindata cache=16 handles=16 INFO [06-26|10:54:33] Writing custom genesis block INFO [06-26|10:54:33] **Successfully** wrote genesis state database=lightchaindata hash=a0e580鈥5e82e 初始化成功后，会在数据目录app/cahin中生成geth和keystore两个文件夹，此时目录结构如下： root@i-nhmyceuh:/home/ubuntu/private-geth# cd data0/ root@i-nhmyceuh:/home/ubuntu/private-geth/data0# ll total 16 drwx------ 4 root root 4096 Jun 26 10:54 ./ drwxr-xr-x 3 root root 4096 Jun 26 10:54 ../ drwxr-xr-x 4 root root 4096 Jun 26 10:54 geth/ drwx------ 2 root root 4096 Jun 26 10:54 keystore/ 其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。 启动节点, 加上console 表示启动后,启用命令行: root@i-nhmyceuh:/home/ubuntu/private-geth/data0# geth --datadir ./data0 --networkid 11 console WARN [06-26|10:56:58] No etherbase set and no accounts found as default INFO [06-26|10:56:58] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-26|10:56:58] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/data0/geth/chaindata cache=128 handles=1024 INFO [06-26|10:56:58] Writing default main-net genesis block INFO [06-26|10:56:59] Initialised chain configuration config=&quot;{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Metropolis: 9223372036854775807 Engine: ethash}&quot; INFO [06-26|10:56:59] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data0/data0/geth/ethash count=3 INFO [06-26|10:56:59] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-26|10:56:59] Upgrading db log bloom bins INFO [06-26|10:56:59] Bloom-bin upgrade completed elapsed=71.646碌s INFO [06-26|10:56:59] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=11 INFO [06-26|10:56:59] Loaded most recent local header number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Loaded most recent local full block number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Loaded most recent local fast block number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Starting P2P networking INFO [06-26|10:57:01] UDP listener up self=enode://51ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:30303 INFO [06-26|10:57:01] RLPx listener up self=enode://51ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:30303 INFO [06-26|10:57:01] IPC endpoint opened: /home/ubuntu/private-geth/data0/data0/geth.ipc Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 ``` ``` 查看账户 &gt; eth.accounts [] 创建账户密码为123 &gt; personal.newAccount(&quot;123&quot;) &quot;0x04db853fe43494022f7f961091c1764709aa5f87&quot; &gt; INFO [06-26|10:57:57] New wallet appeared url=keystore:///home/ubuntu/private鈥[32mstatus=Locked 开始挖矿 &gt; miner.start() INFO [06-26|10:14:06] Updated mining threads threads=0 INFO [06-26|10:14:06] Transaction pool price threshold updated price=18000000000 INFO [06-26|10:14:06] Starting mining operation null &gt; INFO [06-26|10:14:06] Commit new mining work number=1 txs=0 uncles=0 elapsed=444.165碌s INFO [06-26|10:14:10] Generating DAG in progress 阅读更多" />
<meta property="og:description" content="1 Ubuntu用户可以选择在线安装geth的方式，在终端中依次执行以下命令即可： $ sudo add-apt-repository -y ppa:ethereum/ethereum $ sudo apt-get update $ sudo apt-get install ethereum 安装完成后就用geth help验证是否安装成功 ubuntu@i-umw7lzvn:~$ geth help NAME: geth - the go-ethereum command line interface Copyright 2013-2017 The go-ethereum Authors USAGE: geth [options] command [command options] [arguments...] VERSION: **1.6.6-stable-10a45cb5** COMMANDS: init Bootstrap and initialize a new genesis block import Import a blockchain file ``` 2 下面开始建立私有以太坊网络:以太坊节点之间能够互相链接需要满足1)相同的协议版本2)相同的networkid,所以搭建私有网络最方便的方法就是通过geth命令中的–networkid选项,设置一个与主网不同的networkid(主网的networkid为1),这也是官方推荐的 ubuntu@i-umw7lzvn:~$ mkdir private-geth ubuntu@i-umw7lzvn:~$ cd private-geth/ 世纪区块文件,是一个json格式的文件: vim genesis.json 以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，创世区块信息写在一个json格式的配置文件中。首先将下面的内容保存到一个json文件中，例如genesis.json(涉及到权限问题所以进入root权限) root@i-nhmyceuh:/home/ubuntu/private-geth# vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 15, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x40000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 准备好创世区块配置文件后，需要初始化区块链，将上面的创世区块信息写入到区块链中。首先要新建一个目录用来存放区块链数据，假设新建的数据目录为~/private-geth/app/chain，genesis.json保存在~/private-geth中，此时目录结构应该是这样的： private-geth ├── app └── genesis.json 接下来进入private-geth中，执行初始化命令： root@i-nhmyceuh:/home/ubuntu/private-geth# geth --datadir data0 init genesis.json WARN [06-26|10:54:33] No etherbase set and no accounts found as default INFO [06-26|10:54:33] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/chaindata cache=16 handles=16 INFO [06-26|10:54:33] Writing custom genesis block INFO [06-26|10:54:33] Successfully wrote genesis state database=chaindata hash=a0e580鈥5e82e INFO [06-26|10:54:33] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/lightchaindata cache=16 handles=16 INFO [06-26|10:54:33] Writing custom genesis block INFO [06-26|10:54:33] **Successfully** wrote genesis state database=lightchaindata hash=a0e580鈥5e82e 初始化成功后，会在数据目录app/cahin中生成geth和keystore两个文件夹，此时目录结构如下： root@i-nhmyceuh:/home/ubuntu/private-geth# cd data0/ root@i-nhmyceuh:/home/ubuntu/private-geth/data0# ll total 16 drwx------ 4 root root 4096 Jun 26 10:54 ./ drwxr-xr-x 3 root root 4096 Jun 26 10:54 ../ drwxr-xr-x 4 root root 4096 Jun 26 10:54 geth/ drwx------ 2 root root 4096 Jun 26 10:54 keystore/ 其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。 启动节点, 加上console 表示启动后,启用命令行: root@i-nhmyceuh:/home/ubuntu/private-geth/data0# geth --datadir ./data0 --networkid 11 console WARN [06-26|10:56:58] No etherbase set and no accounts found as default INFO [06-26|10:56:58] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-26|10:56:58] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/data0/geth/chaindata cache=128 handles=1024 INFO [06-26|10:56:58] Writing default main-net genesis block INFO [06-26|10:56:59] Initialised chain configuration config=&quot;{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Metropolis: 9223372036854775807 Engine: ethash}&quot; INFO [06-26|10:56:59] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data0/data0/geth/ethash count=3 INFO [06-26|10:56:59] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-26|10:56:59] Upgrading db log bloom bins INFO [06-26|10:56:59] Bloom-bin upgrade completed elapsed=71.646碌s INFO [06-26|10:56:59] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=11 INFO [06-26|10:56:59] Loaded most recent local header number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Loaded most recent local full block number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Loaded most recent local fast block number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Starting P2P networking INFO [06-26|10:57:01] UDP listener up self=enode://51ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:30303 INFO [06-26|10:57:01] RLPx listener up self=enode://51ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:30303 INFO [06-26|10:57:01] IPC endpoint opened: /home/ubuntu/private-geth/data0/data0/geth.ipc Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 ``` ``` 查看账户 &gt; eth.accounts [] 创建账户密码为123 &gt; personal.newAccount(&quot;123&quot;) &quot;0x04db853fe43494022f7f961091c1764709aa5f87&quot; &gt; INFO [06-26|10:57:57] New wallet appeared url=keystore:///home/ubuntu/private鈥[32mstatus=Locked 开始挖矿 &gt; miner.start() INFO [06-26|10:14:06] Updated mining threads threads=0 INFO [06-26|10:14:06] Transaction pool price threshold updated price=18000000000 INFO [06-26|10:14:06] Starting mining operation null &gt; INFO [06-26|10:14:06] Commit new mining work number=1 txs=0 uncles=0 elapsed=444.165碌s INFO [06-26|10:14:10] Generating DAG in progress 阅读更多" />
<link rel="canonical" href="https://mlh.app/2017/06/26/1be1bedeab2cc31ce767a93b9869a677.html" />
<meta property="og:url" content="https://mlh.app/2017/06/26/1be1bedeab2cc31ce767a93b9869a677.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-26T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1 Ubuntu用户可以选择在线安装geth的方式，在终端中依次执行以下命令即可： $ sudo add-apt-repository -y ppa:ethereum/ethereum $ sudo apt-get update $ sudo apt-get install ethereum 安装完成后就用geth help验证是否安装成功 ubuntu@i-umw7lzvn:~$ geth help NAME: geth - the go-ethereum command line interface Copyright 2013-2017 The go-ethereum Authors USAGE: geth [options] command [command options] [arguments...] VERSION: **1.6.6-stable-10a45cb5** COMMANDS: init Bootstrap and initialize a new genesis block import Import a blockchain file ``` 2 下面开始建立私有以太坊网络:以太坊节点之间能够互相链接需要满足1)相同的协议版本2)相同的networkid,所以搭建私有网络最方便的方法就是通过geth命令中的–networkid选项,设置一个与主网不同的networkid(主网的networkid为1),这也是官方推荐的 ubuntu@i-umw7lzvn:~$ mkdir private-geth ubuntu@i-umw7lzvn:~$ cd private-geth/ 世纪区块文件,是一个json格式的文件: vim genesis.json 以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，创世区块信息写在一个json格式的配置文件中。首先将下面的内容保存到一个json文件中，例如genesis.json(涉及到权限问题所以进入root权限) root@i-nhmyceuh:/home/ubuntu/private-geth# vim genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 15, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x40000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0xffffffff&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot;: { } } 准备好创世区块配置文件后，需要初始化区块链，将上面的创世区块信息写入到区块链中。首先要新建一个目录用来存放区块链数据，假设新建的数据目录为~/private-geth/app/chain，genesis.json保存在~/private-geth中，此时目录结构应该是这样的： private-geth ├── app └── genesis.json 接下来进入private-geth中，执行初始化命令： root@i-nhmyceuh:/home/ubuntu/private-geth# geth --datadir data0 init genesis.json WARN [06-26|10:54:33] No etherbase set and no accounts found as default INFO [06-26|10:54:33] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/chaindata cache=16 handles=16 INFO [06-26|10:54:33] Writing custom genesis block INFO [06-26|10:54:33] Successfully wrote genesis state database=chaindata hash=a0e580鈥5e82e INFO [06-26|10:54:33] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/geth/lightchaindata cache=16 handles=16 INFO [06-26|10:54:33] Writing custom genesis block INFO [06-26|10:54:33] **Successfully** wrote genesis state database=lightchaindata hash=a0e580鈥5e82e 初始化成功后，会在数据目录app/cahin中生成geth和keystore两个文件夹，此时目录结构如下： root@i-nhmyceuh:/home/ubuntu/private-geth# cd data0/ root@i-nhmyceuh:/home/ubuntu/private-geth/data0# ll total 16 drwx------ 4 root root 4096 Jun 26 10:54 ./ drwxr-xr-x 3 root root 4096 Jun 26 10:54 ../ drwxr-xr-x 4 root root 4096 Jun 26 10:54 geth/ drwx------ 2 root root 4096 Jun 26 10:54 keystore/ 其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。 启动节点, 加上console 表示启动后,启用命令行: root@i-nhmyceuh:/home/ubuntu/private-geth/data0# geth --datadir ./data0 --networkid 11 console WARN [06-26|10:56:58] No etherbase set and no accounts found as default INFO [06-26|10:56:58] Starting peer-to-peer node instance=Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 INFO [06-26|10:56:58] Allocated cache and file handles database=/home/ubuntu/private-geth/data0/data0/geth/chaindata cache=128 handles=1024 INFO [06-26|10:56:58] Writing default main-net genesis block INFO [06-26|10:56:59] Initialised chain configuration config=&quot;{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Metropolis: 9223372036854775807 Engine: ethash}&quot; INFO [06-26|10:56:59] Disk storage enabled for ethash caches dir=/home/ubuntu/private-geth/data0/data0/geth/ethash count=3 INFO [06-26|10:56:59] Disk storage enabled for ethash DAGs dir=/root/.ethash count=2 WARN [06-26|10:56:59] Upgrading db log bloom bins INFO [06-26|10:56:59] Bloom-bin upgrade completed elapsed=71.646碌s INFO [06-26|10:56:59] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=11 INFO [06-26|10:56:59] Loaded most recent local header number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Loaded most recent local full block number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Loaded most recent local fast block number=0 hash=d4e567鈥b8fa3 td=17179869184 INFO [06-26|10:56:59] Starting P2P networking INFO [06-26|10:57:01] UDP listener up self=enode://51ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:30303 INFO [06-26|10:57:01] RLPx listener up self=enode://51ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:30303 INFO [06-26|10:57:01] IPC endpoint opened: /home/ubuntu/private-geth/data0/data0/geth.ipc Welcome to the Geth JavaScript console! instance: Geth/v1.6.6-stable-10a45cb5/linux-amd64/go1.8.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 ``` ``` 查看账户 &gt; eth.accounts [] 创建账户密码为123 &gt; personal.newAccount(&quot;123&quot;) &quot;0x04db853fe43494022f7f961091c1764709aa5f87&quot; &gt; INFO [06-26|10:57:57] New wallet appeared url=keystore:///home/ubuntu/private鈥\u001b[32mstatus=Locked 开始挖矿 &gt; miner.start() INFO [06-26|10:14:06] Updated mining threads threads=0 INFO [06-26|10:14:06] Transaction pool price threshold updated price=18000000000 INFO [06-26|10:14:06] Starting mining operation null &gt; INFO [06-26|10:14:06] Commit new mining work number=1 txs=0 uncles=0 elapsed=444.165碌s INFO [06-26|10:14:10] Generating DAG in progress 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2017/06/26/1be1bedeab2cc31ce767a93b9869a677.html","headline":"安装geth 搭建以太坊私链","dateModified":"2017-06-26T00:00:00+08:00","datePublished":"2017-06-26T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2017/06/26/1be1bedeab2cc31ce767a93b9869a677.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>安装geth 搭建以太坊私链</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p>1 Ubuntu用户可以选择在线安装<strong>geth</strong>的方式，在终端中依次执行以下命令即可：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">$ sudo add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> <span class="hljs-attribute">-y</span> ppa:ethereum/ethereum
$ sudo apt<span class="hljs-attribute">-get</span> update
$ sudo apt<span class="hljs-attribute">-get</span> install ethereum</code></pre> 
  <p>安装完成后就用geth help验证是否安装成功</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">ubuntu@i-umw7lzvn:~$ geth help
NAME:
   geth - <span class="hljs-operator">the</span> go-ethereum <span class="hljs-command"><span class="hljs-keyword">command</span> <span class="hljs-title">line</span> <span class="hljs-title">interface</span></span>

   Copyright <span class="hljs-number">2013</span>-<span class="hljs-number">2017</span> The go-ethereum Authors

USAGE:
   geth [options] <span class="hljs-command"><span class="hljs-keyword">command</span> [<span class="hljs-title">command</span> <span class="hljs-title">options</span>] [<span class="hljs-title">arguments</span>...]</span>

VERSION:
   **<span class="hljs-number">1.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5**

COMMANDS:
   init        Bootstrap <span class="hljs-operator">and</span> initialize <span class="hljs-operator">a</span> <span class="hljs-built_in">new</span> genesis block
   import      Import <span class="hljs-operator">a</span> blockchain <span class="hljs-built_in">file</span>
   ```</code></pre> 
  <p>2 下面开始建立<strong>私有以太坊网络</strong>:以太坊节点之间能够互相链接需要满足1)相同的协议版本2)相同的networkid,所以搭建私有网络最方便的方法就是通过geth命令中的–networkid选项,设置一个与主网不同的networkid(主网的networkid为1),这也是官方推荐的</p> 
  <pre class="prettyprint"><code class=" hljs lasso">ubuntu@i<span class="hljs-attribute">-umw7lzvn</span>:~$ mkdir <span class="hljs-keyword">private</span><span class="hljs-attribute">-geth</span>
ubuntu@i<span class="hljs-attribute">-umw7lzvn</span>:~$ cd <span class="hljs-keyword">private</span><span class="hljs-attribute">-geth</span><span class="hljs-subst">/</span></code></pre> 
  <p>世纪区块文件,是一个json格式的文件: <br> <code>vim genesis.json</code> <br> 以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，创世区块信息写在一个json格式的配置文件中。首先将下面的内容保存到一个json文件中，例如genesis.json(涉及到权限问题所以进入root权限)</p> 
  <pre class="prettyprint"><code class=" hljs java">root<span class="hljs-annotation">@i</span>-nhmyceuh:/home/ubuntu/<span class="hljs-keyword">private</span>-geth# vim genesis.json

{
  <span class="hljs-string">"config"</span>: {
        <span class="hljs-string">"chainId"</span>: <span class="hljs-number">15</span>,
        <span class="hljs-string">"homesteadBlock"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"eip155Block"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"eip158Block"</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-string">"coinbase"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"difficulty"</span> : <span class="hljs-string">"0x40000"</span>,
    <span class="hljs-string">"extraData"</span> : <span class="hljs-string">""</span>,
    <span class="hljs-string">"gasLimit"</span> : <span class="hljs-string">"0xffffffff"</span>,
    <span class="hljs-string">"nonce"</span> : <span class="hljs-string">"0x0000000000000042"</span>,
    <span class="hljs-string">"mixhash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"parentHash"</span> : <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"timestamp"</span> : <span class="hljs-string">"0x00"</span>,
    <span class="hljs-string">"alloc"</span>: { }
}</code></pre> 
  <p>准备好创世区块配置文件后，需要初始化区块链，将上面的创世区块信息写入到区块链中。首先要新建一个目录用来存放区块链数据，假设新建的数据目录为~/private-geth/app/chain，genesis.json保存在~/private-geth中，此时目录结构应该是这样的：</p> 
  <pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-keyword">private</span><span class="hljs-attribute">-geth</span>
├── app
└── genesis<span class="hljs-built_in">.</span>json</code></pre> 
  <p>接下来进入private-geth中，执行初始化命令：</p> 
  <pre class="prettyprint"><code class=" hljs vbnet">root@i-nhmyceuh:/home/ubuntu/<span class="hljs-keyword">private</span>-geth<span class="hljs-preprocessor"># geth --datadir data0 init genesis.json</span>
WARN [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">54</span>:<span class="hljs-number">33</span>] No etherbase <span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> no accounts found <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">54</span>:<span class="hljs-number">33</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data0/geth/chaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">54</span>:<span class="hljs-number">33</span>] Writing <span class="hljs-keyword">custom</span> genesis block 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">54</span>:<span class="hljs-number">33</span>] Successfully wrote genesis state         database=chaindata                                      hash=a0e580鈥<span class="hljs-number">5e82</span>e
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">54</span>:<span class="hljs-number">33</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data0/geth/lightchaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">54</span>:<span class="hljs-number">33</span>] Writing <span class="hljs-keyword">custom</span> genesis block 
INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">54</span>:<span class="hljs-number">33</span>] **Successfully** wrote genesis state         database=lightchaindata                                      hash=a0e580鈥<span class="hljs-number">5e82</span>e</code></pre> 
  <p>初始化成功后，会在数据目录app/cahin中生成geth和keystore两个文件夹，此时目录结构如下：</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">root@i-nhmyceuh:/home/ubuntu/<span class="hljs-keyword">private</span>-geth<span class="hljs-comment"># cd data0/</span>
root@i-nhmyceuh:/home/ubuntu/<span class="hljs-keyword">private</span>-geth/data0<span class="hljs-comment"># ll</span>
total <span class="hljs-number">16</span>
drwx<span class="hljs-comment">------ 4 root root 4096 Jun 26 10:54 ./</span>
drwxr-xr-x <span class="hljs-number">3</span> root root <span class="hljs-number">4096</span> Jun <span class="hljs-number">26</span> <span class="hljs-number">10</span>:<span class="hljs-number">54</span> ../
drwxr-xr-x <span class="hljs-number">4</span> root root <span class="hljs-number">4096</span> Jun <span class="hljs-number">26</span> <span class="hljs-number">10</span>:<span class="hljs-number">54</span> geth/
drwx<span class="hljs-comment">------ 2 root root 4096 Jun 26 10:54 keystore/</span></code></pre> 
  <p>其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。 <br> 启动节点, 加上console 表示启动后,启用命令行:</p> 
  <pre class="prettyprint"><code class=" hljs sql">root@i-nhmyceuh:/home/ubuntu/private-geth/data0# geth <span class="hljs-comment">--datadir ./data0 --networkid 11 console</span>
WARN [06-26|10:56:58] No etherbase <span class="hljs-operator"><span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">no</span> accounts <span class="hljs-keyword">found</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">58</span>] Starting peer-<span class="hljs-keyword">to</span>-peer node instance=Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">58</span>] Allocated cache <span class="hljs-keyword">and</span> file handles <span class="hljs-keyword">database</span>=/home/ubuntu/private-geth/data0/data0/geth/chaindata cache=<span class="hljs-number">128</span> handles=<span class="hljs-number">1024</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">58</span>] Writing <span class="hljs-keyword">default</span> main-net genesis block INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Initialised chain configuration config=<span class="hljs-string">"{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Metropolis: 9223372036854775807 Engine: ethash}"</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash caches dir=/home/ubuntu/private-geth/data0/data0/geth/ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">3</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Disk storage enabled <span class="hljs-keyword">for</span> ethash DAGs dir=/root/.ethash <span class="hljs-aggregate">count</span>=<span class="hljs-number">2</span> WARN [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Upgrading db log bloom bins INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Bloom-bin upgrade completed elapsed=<span class="hljs-number">71.646</span>碌s INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Initialising Ethereum protocol versions=<span class="hljs-string">"[63 62]"</span> network=<span class="hljs-number">11</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Loaded most recent <span class="hljs-keyword">local</span> header <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=d4e567鈥b8fa3 td=<span class="hljs-number">17179869184</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Loaded most recent <span class="hljs-keyword">local</span> <span class="hljs-keyword">full</span> block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=d4e567鈥b8fa3 td=<span class="hljs-number">17179869184</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Loaded most recent <span class="hljs-keyword">local</span> fast block <span class="hljs-keyword">number</span>=<span class="hljs-number">0</span> hash=d4e567鈥b8fa3 td=<span class="hljs-number">17179869184</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">56</span>:<span class="hljs-number">59</span>] Starting P2P networking INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">57</span>:<span class="hljs-number">01</span>] UDP listener up self=enode://<span class="hljs-number">51</span>ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:<span class="hljs-number">30303</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">57</span>:<span class="hljs-number">01</span>] RLPx listener up self=enode://<span class="hljs-number">51</span>ebb32b131ac52c9caca88396a3d0f77f89bd4cfceb9f59bca6615557d5f7b6333cdfad20ec2d1bb26feb211e0abf8ba11a1a1e9c3f4d2987aca4be7e855020@[::]:<span class="hljs-number">30303</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">57</span>:<span class="hljs-number">01</span>] IPC endpoint opened: /home/ubuntu/private-geth/data0/data0/geth.ipc Welcome <span class="hljs-keyword">to</span> the Geth JavaScript console! instance: Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.6</span>-stable-<span class="hljs-number">10</span>a45cb5/linux-amd64/go1<span class="hljs-number">.8</span><span class="hljs-number">.1</span> modules: admin:<span class="hljs-number">1.0</span> debug:<span class="hljs-number">1.0</span> eth:<span class="hljs-number">1.0</span> miner:<span class="hljs-number">1.0</span> net:<span class="hljs-number">1.0</span> personal:<span class="hljs-number">1.0</span> rpc:<span class="hljs-number">1.0</span> txpool:<span class="hljs-number">1.0</span> web3:<span class="hljs-number">1.0</span> <span class="hljs-string">``</span><span class="hljs-string">` `</span><span class="hljs-string">``</span> 查看账户 &gt; eth.accounts [] 创建账户密码为<span class="hljs-number">123</span> &gt; personal.newAccount(<span class="hljs-string">"123"</span>) <span class="hljs-string">"0x04db853fe43494022f7f961091c1764709aa5f87"</span> &gt; INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">57</span>:<span class="hljs-number">57</span>] New wallet appeared url=keystore:///home/ubuntu/private鈥[<span class="hljs-number">32</span>mstatus=Locked 开始挖矿 &gt; miner.<span class="hljs-keyword">start</span>() INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">06</span>] Updated mining threads threads=<span class="hljs-number">0</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">06</span>] <span class="hljs-keyword">Transaction</span> pool price threshold updated price=<span class="hljs-number">18000000000</span> INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">06</span>] Starting mining operation <span class="hljs-keyword">null</span> &gt; INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">06</span>] <span class="hljs-keyword">Commit</span> new mining <span class="hljs-keyword">work</span> <span class="hljs-keyword">number</span>=<span class="hljs-number">1</span> txs=<span class="hljs-number">0</span> uncles=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">444.165</span>碌s INFO [<span class="hljs-number">06</span>-<span class="hljs-number">26</span>|<span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">10</span>] Generating DAG <span class="hljs-keyword">in</span> progress </span></code></pre> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7f770a53f2.css" rel="stylesheet"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/73733850,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DDFFR/article/details/73733850,&quot;}">阅读更多</a> 
</div> 
<script>
						(function(){
							function setArticleH(btnReadmore,posi){
								var winH = $(window).height();
								var articleBox = $("div.article_content");
								var artH = articleBox.height();
								if(artH > winH*posi){
									articleBox.css({
										'height':winH*posi+'px',
										'overflow':'hidden'
									})
									btnReadmore.click(function(){
										articleBox.removeAttr("style");
										$(this).parent().remove();
									})
								}else{
									btnReadmore.parent().remove();
								}
							}
							var btnReadmore = $("#btn-readmore");
							if(btnReadmore.length>0){
								if(currentUserName){
									setArticleH(btnReadmore,3);
								}else{
									setArticleH(btnReadmore,1.2);
								}
							}
						})()
					</script>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
