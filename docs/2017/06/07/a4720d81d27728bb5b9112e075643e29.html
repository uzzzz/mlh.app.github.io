<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>【区块链学习】以Windows为例，通过以太坊钱包部署和运行智能合约 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="【区块链学习】以Windows为例，通过以太坊钱包部署和运行智能合约" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Slow_Wakler/article/details/72492248 安装环境（以我个人的配置环境说明） 安装Ethereum-Wallet (1)国内镜像下载地址 (2)在F盘新建文件夹Eth，专门放置以太坊开发环境 (3)把下载的Ethereum-Wallet-win64-0-8-10.zip压缩包解压到F:\Eth 目录下 (4)这样就ok了 安装geth (1)国内镜像下载 (2)安装geth,我安装在F:\Eth 目录下 (3)这样就ok了 私有链搭建 环境搭建 (1)在F:\Eth 目录下创建创世块文件genesis.json，文件内容如下： { &quot;nonce&quot;: &quot;0x0000000000000042&quot;, &quot;difficulty&quot;: &quot;0x40000&quot;, &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa&quot;, &quot;gasLimit&quot;: &quot;0xffffffff&quot;, &quot;alloc&quot;: { &quot;3282791d6fd713f1e94f4bfd565eaa78b3a0599d&quot;: { &quot;balance&quot;: &quot;1337000000000000000000&quot; }, &quot;17961d633bcf20a7b029a7d94b7df4da2ec5427f&quot;: { &quot;balance&quot;: &quot;229427000000000000000&quot; } }, &quot;config&quot;: { &quot;chainId&quot;: 15, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 } } (2)打开cmd,进入F:\Eth 目录下，创世块文件初始化：geth -datadir &quot;%cd%\chain&quot; init genesis.json (3)打开geth控制台：geth -datadir &quot;%cd%\chain&quot; console (4)创建新账户，密码为zqxgdufe：personal.newAccount(&#39;zqxgdufe&#39;) ，用来启动私有链的挖矿 (5) 输入exit，退出控制台 (6)启动私有链节点：geth -targetgaslimit 4294967295 -rpc -rpcaddr &quot;172.25.240.22&quot; -rpcport &quot;8101&quot; -port &quot;30301&quot; -rpcapi &quot;eth,web3,personal&quot; -networkid 2016 -identity 2016 -nodiscover -maxpeers 5 -datadir &quot;%cd%\chain&quot; -unlock 0 -rpccorsdomain &quot;*&quot; -mine console 。 注释： targetgaslimit –每个块的gas上限，这里可以暂时理解为容量 rpc –启动rpc通信，可以进行智能合约的部署和调试 rpcaddr –rpc接口的地址 rpcport –rpc接口的端口号 port –网络监听端口，用于节点之间通信 rpcapi –设置rpc的范围，暂时开启eth,web3,personal足够 networkid –设置当前区块链的网络ID，是一个数字，可以随便写 identity –区块链的标示，随便填写，用于标示目前网络的名字 nodiscover 禁止被网络中其它节点发现，需要手动添加该节点到网络 maxpeers 最大节点数量 datadir –设置当前区块链网络数据存放的位置 unlock –解锁某用户（此处用用户坐标来控制，解锁后的用户调用接口发起交易时，不要需要提供密码） rpccorsdomain 限制rpc访问源的ip，代表不限制 mine 允许挖矿 console –启动命令行模式，可以在Geth中执行命令*。172.25.240.22要改为自己的IP 输入密码：zqxgdufe 耐心等一会时间！！！自动显示挖矿，挖矿一会时间 (7)进入F:\Eth\win-unpacked ，运行Ethereum Wallet.exe ，若果出现版本更新窗口，不用理它，关掉就行 进入主页面 (8)暂时停止挖矿：miner.stop()不要在意输出的刷屏，只管输入完成后回车即可，如果输入正确，回车后会输出“true”。(其实这里建议启动一个CPU挖矿：miner.start(1) ,以后交易需要矿工确认，在这里挖了坑…) (8)创建新账户，点击ADD ACCOUNT 输入密码：zqxgdufe，再次确认密码 发起交易 (1)刚才我们创建了一个新账号，但是新账号ACCOUNT2的钱包没有以太币 (2)点击ACCOUNT2,进入ACCOUNT2 的账户页面，复制ACCOUNT2 的地址，下面我们发起交易要用到这个地址。复制出现下面的弹出框，不用理它，点击COPY ANYWAY。 (3)点击SEND,开始发起交易 (4)点击FROM下方输入栏，选择交易的发起人，我们选Main account ，因为当前只有他的账户下有以太币(钱包里有825.00ETHER)。TO下方的输入栏我们输入刚才复制的ACCOUNT2的地址。AMOUNT处输入本次要交易的以太币数量，以10个为例。输入10。其他的地方不用管，我们把滚动条拖到最下方，左下方有个SEND按钮，点击一下。 滑动到下方,点击SEND 输入账户密码(zqxgdufe)，确认交易 回到主页面，滑动到下方，可以看到我们刚才的交易： 这里的交易还没得到确认，所以ACCOUNT2 的账户仍然为0，确认需要在挖矿中进行 (5)如果之前还没启动挖矿，要使用一个CPU启动挖矿：miner.start(1)，如果觉得等得很久还没挖矿痕迹，启动所有CPU挖矿，即miner.start(), 消息确认后再关闭，重新启动一个CPU挖矿，即miner.start(1) ，不管怎样，我们从这一步以后一直启动挖矿，因为后面智能合约的调用需要得到矿工确认。 交易得到确认 查看ACCOUNT2 的账户 部署智能合约 (1)回到主页面，点击CONTRACTS (2)点击DEPLOY NEW CONTRACT,部署合约 选择智能合约发起账户，这里选择Main account, 合约以太币数量填0 复制solidity语言编写的智能合约代码，选择需要部署的智能合约 智能合约代码： contract MyToken{ /*在合约中使用public关键字定义所有能被别的合约访问的变量*/ string public name; string public symbol; uint8 public decimals; /*建立一个数组存储账户的余额*/ mapping (address =&gt; uint256) public balanceOf; /*建立一个公共的事件用于用户通知*/ event Transfer(address indexed from, address indexed to, uint256 value); /*初始化合约,当合约内的函数名和合约名相同时(MyToken),则该函数是合约的构造函数*/ function MyToken(uint256 _supply, string _name, string _symbol, uint8 _decimals){ /*默认将股份分为10000份,即股权的最小单位是0.01%*/ if (_supply == 0) _supply = 1000000; /*可自定义股权数量和最小单位*/ balanceOf[msg.sender] = _supply; /*定义股权名称*/ name = _name; /*设定股权所使用的单位符号,例如%*/ symbol = _symbol; /*设定小数位数*/ decimals = _decimals; } /*创建股权转移函数*/ function transfer(address _to, uint256 _value) { /*检验是否有足够的股权*/ if (balanceOf[msg.sender] &lt; _value) throw; if (balanceOf[_to] + _value &lt; balanceOf[_to]) throw; /*更新股权转让信息*/ balanceOf[msg.sender] -= _value; balanceOf[_to] += _value; /*通知用户股权转让成功*/ Transfer(msg.sender, _to, _value); } } 点击DEPLOY 输入账户密码确认，然后部署 当智能合约得到区块确认，说明智能合约被保存到区块中，部署智能合约成功 调用智能合约 (1)回到主页面，点击CONTRACTS (2)点击进入智能合约 点击进入刚才部署的智能合约 智能合约页面的函数以及函数参数，以及执行 (3)输入密码确认，然后发送交易 (4)结果，Main account的股权占比变为90%，ACCOUNT2的股权占比变为10% 参考 区块链开发（二）部署并运行第一个以太坊智能合约 以太坊 链私有链环境搭建（windows） 阅读更多" />
<meta property="og:description" content="版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Slow_Wakler/article/details/72492248 安装环境（以我个人的配置环境说明） 安装Ethereum-Wallet (1)国内镜像下载地址 (2)在F盘新建文件夹Eth，专门放置以太坊开发环境 (3)把下载的Ethereum-Wallet-win64-0-8-10.zip压缩包解压到F:\Eth 目录下 (4)这样就ok了 安装geth (1)国内镜像下载 (2)安装geth,我安装在F:\Eth 目录下 (3)这样就ok了 私有链搭建 环境搭建 (1)在F:\Eth 目录下创建创世块文件genesis.json，文件内容如下： { &quot;nonce&quot;: &quot;0x0000000000000042&quot;, &quot;difficulty&quot;: &quot;0x40000&quot;, &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa&quot;, &quot;gasLimit&quot;: &quot;0xffffffff&quot;, &quot;alloc&quot;: { &quot;3282791d6fd713f1e94f4bfd565eaa78b3a0599d&quot;: { &quot;balance&quot;: &quot;1337000000000000000000&quot; }, &quot;17961d633bcf20a7b029a7d94b7df4da2ec5427f&quot;: { &quot;balance&quot;: &quot;229427000000000000000&quot; } }, &quot;config&quot;: { &quot;chainId&quot;: 15, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 } } (2)打开cmd,进入F:\Eth 目录下，创世块文件初始化：geth -datadir &quot;%cd%\chain&quot; init genesis.json (3)打开geth控制台：geth -datadir &quot;%cd%\chain&quot; console (4)创建新账户，密码为zqxgdufe：personal.newAccount(&#39;zqxgdufe&#39;) ，用来启动私有链的挖矿 (5) 输入exit，退出控制台 (6)启动私有链节点：geth -targetgaslimit 4294967295 -rpc -rpcaddr &quot;172.25.240.22&quot; -rpcport &quot;8101&quot; -port &quot;30301&quot; -rpcapi &quot;eth,web3,personal&quot; -networkid 2016 -identity 2016 -nodiscover -maxpeers 5 -datadir &quot;%cd%\chain&quot; -unlock 0 -rpccorsdomain &quot;*&quot; -mine console 。 注释： targetgaslimit –每个块的gas上限，这里可以暂时理解为容量 rpc –启动rpc通信，可以进行智能合约的部署和调试 rpcaddr –rpc接口的地址 rpcport –rpc接口的端口号 port –网络监听端口，用于节点之间通信 rpcapi –设置rpc的范围，暂时开启eth,web3,personal足够 networkid –设置当前区块链的网络ID，是一个数字，可以随便写 identity –区块链的标示，随便填写，用于标示目前网络的名字 nodiscover 禁止被网络中其它节点发现，需要手动添加该节点到网络 maxpeers 最大节点数量 datadir –设置当前区块链网络数据存放的位置 unlock –解锁某用户（此处用用户坐标来控制，解锁后的用户调用接口发起交易时，不要需要提供密码） rpccorsdomain 限制rpc访问源的ip，代表不限制 mine 允许挖矿 console –启动命令行模式，可以在Geth中执行命令*。172.25.240.22要改为自己的IP 输入密码：zqxgdufe 耐心等一会时间！！！自动显示挖矿，挖矿一会时间 (7)进入F:\Eth\win-unpacked ，运行Ethereum Wallet.exe ，若果出现版本更新窗口，不用理它，关掉就行 进入主页面 (8)暂时停止挖矿：miner.stop()不要在意输出的刷屏，只管输入完成后回车即可，如果输入正确，回车后会输出“true”。(其实这里建议启动一个CPU挖矿：miner.start(1) ,以后交易需要矿工确认，在这里挖了坑…) (8)创建新账户，点击ADD ACCOUNT 输入密码：zqxgdufe，再次确认密码 发起交易 (1)刚才我们创建了一个新账号，但是新账号ACCOUNT2的钱包没有以太币 (2)点击ACCOUNT2,进入ACCOUNT2 的账户页面，复制ACCOUNT2 的地址，下面我们发起交易要用到这个地址。复制出现下面的弹出框，不用理它，点击COPY ANYWAY。 (3)点击SEND,开始发起交易 (4)点击FROM下方输入栏，选择交易的发起人，我们选Main account ，因为当前只有他的账户下有以太币(钱包里有825.00ETHER)。TO下方的输入栏我们输入刚才复制的ACCOUNT2的地址。AMOUNT处输入本次要交易的以太币数量，以10个为例。输入10。其他的地方不用管，我们把滚动条拖到最下方，左下方有个SEND按钮，点击一下。 滑动到下方,点击SEND 输入账户密码(zqxgdufe)，确认交易 回到主页面，滑动到下方，可以看到我们刚才的交易： 这里的交易还没得到确认，所以ACCOUNT2 的账户仍然为0，确认需要在挖矿中进行 (5)如果之前还没启动挖矿，要使用一个CPU启动挖矿：miner.start(1)，如果觉得等得很久还没挖矿痕迹，启动所有CPU挖矿，即miner.start(), 消息确认后再关闭，重新启动一个CPU挖矿，即miner.start(1) ，不管怎样，我们从这一步以后一直启动挖矿，因为后面智能合约的调用需要得到矿工确认。 交易得到确认 查看ACCOUNT2 的账户 部署智能合约 (1)回到主页面，点击CONTRACTS (2)点击DEPLOY NEW CONTRACT,部署合约 选择智能合约发起账户，这里选择Main account, 合约以太币数量填0 复制solidity语言编写的智能合约代码，选择需要部署的智能合约 智能合约代码： contract MyToken{ /*在合约中使用public关键字定义所有能被别的合约访问的变量*/ string public name; string public symbol; uint8 public decimals; /*建立一个数组存储账户的余额*/ mapping (address =&gt; uint256) public balanceOf; /*建立一个公共的事件用于用户通知*/ event Transfer(address indexed from, address indexed to, uint256 value); /*初始化合约,当合约内的函数名和合约名相同时(MyToken),则该函数是合约的构造函数*/ function MyToken(uint256 _supply, string _name, string _symbol, uint8 _decimals){ /*默认将股份分为10000份,即股权的最小单位是0.01%*/ if (_supply == 0) _supply = 1000000; /*可自定义股权数量和最小单位*/ balanceOf[msg.sender] = _supply; /*定义股权名称*/ name = _name; /*设定股权所使用的单位符号,例如%*/ symbol = _symbol; /*设定小数位数*/ decimals = _decimals; } /*创建股权转移函数*/ function transfer(address _to, uint256 _value) { /*检验是否有足够的股权*/ if (balanceOf[msg.sender] &lt; _value) throw; if (balanceOf[_to] + _value &lt; balanceOf[_to]) throw; /*更新股权转让信息*/ balanceOf[msg.sender] -= _value; balanceOf[_to] += _value; /*通知用户股权转让成功*/ Transfer(msg.sender, _to, _value); } } 点击DEPLOY 输入账户密码确认，然后部署 当智能合约得到区块确认，说明智能合约被保存到区块中，部署智能合约成功 调用智能合约 (1)回到主页面，点击CONTRACTS (2)点击进入智能合约 点击进入刚才部署的智能合约 智能合约页面的函数以及函数参数，以及执行 (3)输入密码确认，然后发送交易 (4)结果，Main account的股权占比变为90%，ACCOUNT2的股权占比变为10% 参考 区块链开发（二）部署并运行第一个以太坊智能合约 以太坊 链私有链环境搭建（windows） 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-07T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Slow_Wakler/article/details/72492248 安装环境（以我个人的配置环境说明） 安装Ethereum-Wallet (1)国内镜像下载地址 (2)在F盘新建文件夹Eth，专门放置以太坊开发环境 (3)把下载的Ethereum-Wallet-win64-0-8-10.zip压缩包解压到F:\\Eth 目录下 (4)这样就ok了 安装geth (1)国内镜像下载 (2)安装geth,我安装在F:\\Eth 目录下 (3)这样就ok了 私有链搭建 环境搭建 (1)在F:\\Eth 目录下创建创世块文件genesis.json，文件内容如下： { &quot;nonce&quot;: &quot;0x0000000000000042&quot;, &quot;difficulty&quot;: &quot;0x40000&quot;, &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa&quot;, &quot;gasLimit&quot;: &quot;0xffffffff&quot;, &quot;alloc&quot;: { &quot;3282791d6fd713f1e94f4bfd565eaa78b3a0599d&quot;: { &quot;balance&quot;: &quot;1337000000000000000000&quot; }, &quot;17961d633bcf20a7b029a7d94b7df4da2ec5427f&quot;: { &quot;balance&quot;: &quot;229427000000000000000&quot; } }, &quot;config&quot;: { &quot;chainId&quot;: 15, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 } } (2)打开cmd,进入F:\\Eth 目录下，创世块文件初始化：geth -datadir &quot;%cd%\\chain&quot; init genesis.json (3)打开geth控制台：geth -datadir &quot;%cd%\\chain&quot; console (4)创建新账户，密码为zqxgdufe：personal.newAccount(&#39;zqxgdufe&#39;) ，用来启动私有链的挖矿 (5) 输入exit，退出控制台 (6)启动私有链节点：geth -targetgaslimit 4294967295 -rpc -rpcaddr &quot;172.25.240.22&quot; -rpcport &quot;8101&quot; -port &quot;30301&quot; -rpcapi &quot;eth,web3,personal&quot; -networkid 2016 -identity 2016 -nodiscover -maxpeers 5 -datadir &quot;%cd%\\chain&quot; -unlock 0 -rpccorsdomain &quot;*&quot; -mine console 。 注释： targetgaslimit –每个块的gas上限，这里可以暂时理解为容量 rpc –启动rpc通信，可以进行智能合约的部署和调试 rpcaddr –rpc接口的地址 rpcport –rpc接口的端口号 port –网络监听端口，用于节点之间通信 rpcapi –设置rpc的范围，暂时开启eth,web3,personal足够 networkid –设置当前区块链的网络ID，是一个数字，可以随便写 identity –区块链的标示，随便填写，用于标示目前网络的名字 nodiscover 禁止被网络中其它节点发现，需要手动添加该节点到网络 maxpeers 最大节点数量 datadir –设置当前区块链网络数据存放的位置 unlock –解锁某用户（此处用用户坐标来控制，解锁后的用户调用接口发起交易时，不要需要提供密码） rpccorsdomain 限制rpc访问源的ip，代表不限制 mine 允许挖矿 console –启动命令行模式，可以在Geth中执行命令*。172.25.240.22要改为自己的IP 输入密码：zqxgdufe 耐心等一会时间！！！自动显示挖矿，挖矿一会时间 (7)进入F:\\Eth\\win-unpacked ，运行Ethereum Wallet.exe ，若果出现版本更新窗口，不用理它，关掉就行 进入主页面 (8)暂时停止挖矿：miner.stop()不要在意输出的刷屏，只管输入完成后回车即可，如果输入正确，回车后会输出“true”。(其实这里建议启动一个CPU挖矿：miner.start(1) ,以后交易需要矿工确认，在这里挖了坑…) (8)创建新账户，点击ADD ACCOUNT 输入密码：zqxgdufe，再次确认密码 发起交易 (1)刚才我们创建了一个新账号，但是新账号ACCOUNT2的钱包没有以太币 (2)点击ACCOUNT2,进入ACCOUNT2 的账户页面，复制ACCOUNT2 的地址，下面我们发起交易要用到这个地址。复制出现下面的弹出框，不用理它，点击COPY ANYWAY。 (3)点击SEND,开始发起交易 (4)点击FROM下方输入栏，选择交易的发起人，我们选Main account ，因为当前只有他的账户下有以太币(钱包里有825.00ETHER)。TO下方的输入栏我们输入刚才复制的ACCOUNT2的地址。AMOUNT处输入本次要交易的以太币数量，以10个为例。输入10。其他的地方不用管，我们把滚动条拖到最下方，左下方有个SEND按钮，点击一下。 滑动到下方,点击SEND 输入账户密码(zqxgdufe)，确认交易 回到主页面，滑动到下方，可以看到我们刚才的交易： 这里的交易还没得到确认，所以ACCOUNT2 的账户仍然为0，确认需要在挖矿中进行 (5)如果之前还没启动挖矿，要使用一个CPU启动挖矿：miner.start(1)，如果觉得等得很久还没挖矿痕迹，启动所有CPU挖矿，即miner.start(), 消息确认后再关闭，重新启动一个CPU挖矿，即miner.start(1) ，不管怎样，我们从这一步以后一直启动挖矿，因为后面智能合约的调用需要得到矿工确认。 交易得到确认 查看ACCOUNT2 的账户 部署智能合约 (1)回到主页面，点击CONTRACTS (2)点击DEPLOY NEW CONTRACT,部署合约 选择智能合约发起账户，这里选择Main account, 合约以太币数量填0 复制solidity语言编写的智能合约代码，选择需要部署的智能合约 智能合约代码： contract MyToken{ /*在合约中使用public关键字定义所有能被别的合约访问的变量*/ string public name; string public symbol; uint8 public decimals; /*建立一个数组存储账户的余额*/ mapping (address =&gt; uint256) public balanceOf; /*建立一个公共的事件用于用户通知*/ event Transfer(address indexed from, address indexed to, uint256 value); /*初始化合约,当合约内的函数名和合约名相同时(MyToken),则该函数是合约的构造函数*/ function MyToken(uint256 _supply, string _name, string _symbol, uint8 _decimals){ /*默认将股份分为10000份,即股权的最小单位是0.01%*/ if (_supply == 0) _supply = 1000000; /*可自定义股权数量和最小单位*/ balanceOf[msg.sender] = _supply; /*定义股权名称*/ name = _name; /*设定股权所使用的单位符号,例如%*/ symbol = _symbol; /*设定小数位数*/ decimals = _decimals; } /*创建股权转移函数*/ function transfer(address _to, uint256 _value) { /*检验是否有足够的股权*/ if (balanceOf[msg.sender] &lt; _value) throw; if (balanceOf[_to] + _value &lt; balanceOf[_to]) throw; /*更新股权转让信息*/ balanceOf[msg.sender] -= _value; balanceOf[_to] += _value; /*通知用户股权转让成功*/ Transfer(msg.sender, _to, _value); } } 点击DEPLOY 输入账户密码确认，然后部署 当智能合约得到区块确认，说明智能合约被保存到区块中，部署智能合约成功 调用智能合约 (1)回到主页面，点击CONTRACTS (2)点击进入智能合约 点击进入刚才部署的智能合约 智能合约页面的函数以及函数参数，以及执行 (3)输入密码确认，然后发送交易 (4)结果，Main account的股权占比变为90%，ACCOUNT2的股权占比变为10% 参考 区块链开发（二）部署并运行第一个以太坊智能合约 以太坊 链私有链环境搭建（windows） 阅读更多","@type":"BlogPosting","url":"/2017/06/07/a4720d81d27728bb5b9112e075643e29.html","headline":"【区块链学习】以Windows为例，通过以太坊钱包部署和运行智能合约","dateModified":"2017-06-07T00:00:00+08:00","datePublished":"2017-06-07T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2017/06/07/a4720d81d27728bb5b9112e075643e29.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>【区块链学习】以Windows为例，通过以太坊钱包部署和运行智能合约</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="article-copyright">
   版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Slow_Wakler/article/details/72492248 
 </div> 
 <div class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <h2 id="安装环境以我个人的配置环境说明">安装环境（以我个人的配置环境说明）</h2> 
  <h3 id="安装ethereum-wallet">安装Ethereum-Wallet</h3> 
  <p>(1)<a href="http://ethfans.org/wikis/Ethereum-Wallet-Mirror" rel="nofollow" target="_blank">国内镜像下载地址</a> <br> (2)在F盘新建文件夹<code>Eth</code>，专门放置以太坊开发环境 <br> (3)把下载的<code>Ethereum-Wallet-win64-0-8-10.zip</code>压缩包解压到<code>F:\Eth</code> 目录下 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606220541945?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""> <br> (4)这样就ok了</p> 
  <hr> 
  <h3 id="安装geth">安装geth</h3> 
  <p>(1)<a href="http://ethfans.org/wikis/Ethereum-Geth-Mirror" rel="nofollow" target="_blank">国内镜像下载</a> <br> (2)安装geth,我安装在<code>F:\Eth</code> 目录下 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606220835107?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""> <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606220910885?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""> <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606220954104?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""> <br> (3)这样就ok了</p> 
  <hr> 
  <h2 id="私有链搭建">私有链搭建</h2> 
  <h3 id="环境搭建">环境搭建</h3> 
  <p>(1)在<code>F:\Eth</code> 目录下创建创世块文件<code>genesis.json</code>，文件内容如下：</p> 
  <pre class="prettyprint"><code class=" hljs json">{
  "<span class="hljs-attribute">nonce</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000042"</span></span>,
  "<span class="hljs-attribute">difficulty</span>": <span class="hljs-value"><span class="hljs-string">"0x40000"</span></span>,
  "<span class="hljs-attribute">mixhash</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
  "<span class="hljs-attribute">coinbase</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000"</span></span>,
  "<span class="hljs-attribute">timestamp</span>": <span class="hljs-value"><span class="hljs-string">"0x00"</span></span>,
  "<span class="hljs-attribute">parentHash</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
  "<span class="hljs-attribute">extraData</span>": <span class="hljs-value"><span class="hljs-string">"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"</span></span>,
  "<span class="hljs-attribute">gasLimit</span>": <span class="hljs-value"><span class="hljs-string">"0xffffffff"</span></span>,
  "<span class="hljs-attribute">alloc</span>": <span class="hljs-value">{ "<span class="hljs-attribute">3282791d6fd713f1e94f4bfd565eaa78b3a0599d</span>": <span class="hljs-value">{ "<span class="hljs-attribute">balance</span>": <span class="hljs-value"><span class="hljs-string">"1337000000000000000000"</span> </span>}</span>, "<span class="hljs-attribute">17961d633bcf20a7b029a7d94b7df4da2ec5427f</span>": <span class="hljs-value">{ "<span class="hljs-attribute">balance</span>": <span class="hljs-value"><span class="hljs-string">"229427000000000000000"</span> </span>} </span>}</span>,
  "<span class="hljs-attribute">config</span>": <span class="hljs-value">{ "<span class="hljs-attribute">chainId</span>": <span class="hljs-value"><span class="hljs-number">15</span></span>, "<span class="hljs-attribute">homesteadBlock</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>, "<span class="hljs-attribute">eip155Block</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>, "<span class="hljs-attribute">eip158Block</span>": <span class="hljs-value"><span class="hljs-number">0</span> </span>} </span>}</code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606223845960?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""> <br> (2)打开cmd,进入<code>F:\Eth</code> 目录下，创世块文件初始化：<code>geth -datadir "%cd%\chain" init genesis.json</code></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606224249448?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(3)打开geth控制台：<code>geth -datadir "%cd%\chain" console</code></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606224443355?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(4)创建新账户，密码为zqxgdufe：<code>personal.newAccount('zqxgdufe')</code> ，用来启动私有链的挖矿</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606224711247?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(5) 输入exit，退出控制台</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606225258463?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(6)启动私有链节点：<code>geth -targetgaslimit 4294967295 -rpc -rpcaddr "172.25.240.22" -rpcport "8101" -port "30301" -rpcapi "eth,web3,personal" -networkid 2016 -identity 2016 -nodiscover -maxpeers 5 -datadir "%cd%\chain" -unlock 0 -rpccorsdomain "*" -mine console</code> 。 <br> 注释：</p> 
  <pre class="prettyprint"><code class=" hljs vhdl"> targetgaslimit –每个块的gas上限，这里可以暂时理解为容量 rpc –启动rpc通信，可以进行智能合约的部署和调试 rpcaddr –rpc接口的地址 rpcport –rpc接口的端口号 <span class="hljs-keyword">port</span> –网络监听端口，用于节点之间通信 rpcapi –设置rpc的范围，暂时开启eth,web3,personal足够 networkid –设置当前区块链的网络ID，是一个数字，可以随便写 identity –区块链的标示，随便填写，用于标示目前网络的名字 nodiscover 禁止被网络中其它节点发现，需要手动添加该节点到网络 maxpeers 最大节点数量 datadir –设置当前区块链网络数据存放的位置 unlock –解锁某用户（此处用用户坐标来控制，解锁后的用户调用接口发起交易时，不要需要提供密码） rpccorsdomain 限制rpc访问源的ip，代表不限制 mine 允许挖矿 console –启动命令行模式，可以在Geth中执行命令*。<span class="hljs-number">172.25</span><span class="hljs-number">.240</span><span class="hljs-number">.22</span>要改为自己的IP
</code></pre> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606225412361?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>输入密码：zqxgdufe <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606225506752?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>耐心等一会时间！！！自动显示挖矿，挖矿一会时间</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606230303555?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(7)进入<code>F:\Eth\win-unpacked</code> ，运行<code>Ethereum Wallet.exe</code> ，若果出现版本更新窗口，不用理它，关掉就行</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606230602133?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606231123854?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>进入主页面</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606231844577?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(8)暂时停止挖矿：<code>miner.stop()</code>不要在意输出的刷屏，只管输入完成后回车即可，如果输入正确，回车后会输出“true”。(其实这里建议启动一个CPU挖矿：<code>miner.start(1)</code> ,以后交易需要矿工确认，在这里挖了坑…)</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606233728836?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(8)创建新账户，点击<code>ADD ACCOUNT</code> </p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232024109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>输入密码：zqxgdufe，再次确认密码</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232121312?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232257126?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232306157?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <hr> 
  <h3 id="发起交易">发起交易</h3> 
  <p>(1)刚才我们创建了一个新账号，但是新账号<code>ACCOUNT2</code>的钱包没有以太币</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232511867?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(2)点击<code>ACCOUNT2</code>,进入<code>ACCOUNT2</code> 的账户页面，复制<code>ACCOUNT2</code> 的地址，下面我们发起交易要用到这个地址。复制出现下面的弹出框，不用理它，点击<code>COPY ANYWAY</code>。</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232600002?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232636337?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(3)点击<code>SEND</code>,开始发起交易</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606232825059?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(4)点击<code>FROM</code>下方输入栏，选择交易的发起人，我们选<code>Main account</code> ，因为当前只有他的账户下有以太币(钱包里有825.00ETHER)。<code>TO</code>下方的输入栏我们输入刚才复制的<code>ACCOUNT2</code>的地址。<code>AMOUNT</code>处输入本次要交易的以太币数量，以10个为例。输入10。其他的地方不用管，我们把滚动条拖到最下方，左下方有个<code>SEND</code>按钮，点击一下。</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606233157423?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>滑动到下方,点击<code>SEND</code></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606233241112?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>输入账户密码(zqxgdufe)，确认交易</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606233344663?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>回到主页面，滑动到下方，可以看到我们刚才的交易：</p> 
  <p>这里的交易还没得到确认，所以<code>ACCOUNT2</code> 的账户仍然为0，确认需要在挖矿中进行 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606234113827?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(5)如果之前还没启动挖矿，要使用一个CPU启动挖矿：<code>miner.start(1)</code>，如果觉得等得很久还没挖矿痕迹，启动所有CPU挖矿，即<code>miner.start()</code>, 消息确认后再关闭，重新启动一个CPU挖矿，即<code>miner.start(1)</code> ，不管怎样，我们从这一步以后一直启动挖矿，因为后面智能合约的调用需要得到矿工确认。</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606234344964?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>交易得到确认 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606235438220?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>查看<code>ACCOUNT2</code> 的账户 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170606235543205?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <hr> 
  <h2 id="部署智能合约">部署智能合约</h2> 
  <p>(1)回到主页面，点击<code>CONTRACTS</code></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607000515186?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(2)点击<code>DEPLOY NEW CONTRACT</code>,部署合约</p> 
  <p>选择智能合约发起账户，这里选择Main account, 合约以太币数量填0</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607003423787?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>复制solidity语言编写的智能合约代码，选择需要部署的智能合约</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607013027582?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>智能合约代码：</p> 
  <pre class="prettyprint"><code class=" hljs cs">contract MyToken{
    <span class="hljs-comment">/*在合约中使用public关键字定义所有能被别的合约访问的变量*/</span>
    <span class="hljs-keyword">string</span> <span class="hljs-keyword">public</span> name;
    <span class="hljs-keyword">string</span> <span class="hljs-keyword">public</span> symbol;
    uint8 <span class="hljs-keyword">public</span> decimals;

    <span class="hljs-comment">/*建立一个数组存储账户的余额*/</span>
    mapping (address =&gt; uint256) <span class="hljs-keyword">public</span> balanceOf;

    <span class="hljs-comment">/*建立一个公共的事件用于用户通知*/</span>
    <span class="hljs-keyword">event</span> Transfer(address indexed <span class="hljs-keyword">from</span>, address indexed to, uint256 <span class="hljs-keyword">value</span>);

    <span class="hljs-comment">/*初始化合约,当合约内的函数名和合约名相同时(MyToken),则该函数是合约的构造函数*/</span>
    function MyToken(uint256 _supply, <span class="hljs-keyword">string</span> _name, <span class="hljs-keyword">string</span> _symbol, uint8 _decimals){
        <span class="hljs-comment">/*默认将股份分为10000份,即股权的最小单位是0.01%*/</span>
        <span class="hljs-keyword">if</span> (_supply == <span class="hljs-number">0</span>) _supply = <span class="hljs-number">1000000</span>;

        <span class="hljs-comment">/*可自定义股权数量和最小单位*/</span>
        balanceOf[msg.sender] = _supply;

        <span class="hljs-comment">/*定义股权名称*/</span>
        name = _name;

        <span class="hljs-comment">/*设定股权所使用的单位符号,例如%*/</span>
        symbol = _symbol;

        <span class="hljs-comment">/*设定小数位数*/</span>
        decimals = _decimals;
    }

    <span class="hljs-comment">/*创建股权转移函数*/</span>
    function transfer(address _to, uint256 _value) {
        <span class="hljs-comment">/*检验是否有足够的股权*/</span>
        <span class="hljs-keyword">if</span> (balanceOf[msg.sender] &lt; _value) <span class="hljs-keyword">throw</span>;
        <span class="hljs-keyword">if</span> (balanceOf[_to] + _value &lt; balanceOf[_to]) <span class="hljs-keyword">throw</span>;

        <span class="hljs-comment">/*更新股权转让信息*/</span>
        balanceOf[msg.sender] -= _value;
        balanceOf[_to] += _value;

        <span class="hljs-comment">/*通知用户股权转让成功*/</span>
        Transfer(msg.sender, _to, _value);
    }
}</code></pre> 
  <p>点击<code>DEPLOY</code> <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607004109728?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>输入账户密码确认，然后部署 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607004408754?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>当智能合约得到区块确认，说明智能合约被保存到区块中，部署智能合约成功 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607004538153?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <hr> 
  <h2 id="调用智能合约">调用智能合约</h2> 
  <p>(1)回到主页面，点击<code>CONTRACTS</code></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607005822518?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(2)点击进入智能合约</p> 
  <p>点击进入刚才部署的智能合约 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607010055340?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>智能合约页面的函数以及函数参数，以及执行 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607013613178?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(3)输入密码确认，然后发送交易 <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607013815991?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p>(4)结果，Main account的股权占比变为90%，ACCOUNT2的股权占比变为10% <br> <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607014200071?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20170607014643918?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU2xvd19XYWtsZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""></p> 
  <hr> 
  <h2 id="参考">参考</h2> 
  <p><a href="http://blog.csdn.net/sportshark/article/details/52249607" rel="nofollow">区块链开发（二）部署并运行第一个以太坊智能合约</a> <br> <a href="http://blog.csdn.net/ziyuzhiye/article/details/54291744" rel="nofollow">以太坊 链私有链环境搭建（windows）</a></p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-8cccb36679.css" rel="stylesheet"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Slow_Wakler/article/details/72492248,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Slow_Wakler/article/details/72492248,&quot;}">阅读更多</a> 
</div> 
<script>
						(function(){
							function setArticleH(btnReadmore,posi){
								var winH = $(window).height();
								var articleBox = $("div.article_content");
								var artH = articleBox.height();
								if(artH > winH*posi){
									articleBox.css({
										'height':winH*posi+'px',
										'overflow':'hidden'
									})
									btnReadmore.click(function(){
										articleBox.removeAttr("style");
										$(this).parent().remove();
									})
								}else{
									btnReadmore.parent().remove();
								}
							}
							var btnReadmore = $("#btn-readmore");
							if(btnReadmore.length>0){
								if(currentUserName){
									setArticleH(btnReadmore,3);
								}else{
									setArticleH(btnReadmore,1.2);
								}
							}
						})()
					</script>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
