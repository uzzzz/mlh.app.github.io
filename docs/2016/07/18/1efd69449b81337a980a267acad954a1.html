<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>ISO8583报文协议详解 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="ISO8583报文协议详解" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ISO8583包（简称8583包）是一个国际标准的包格式，最多由128个字段域组成，每个域都有统一的规定，并有定长与变长之分。 &nbsp;&nbsp;&nbsp;&nbsp;8583包前面一段为位图，用来确定包的字段域组成情况。 &nbsp;&nbsp;&nbsp;&nbsp;其中位图是8583包的灵魂，它是打包解包确定字段域的关键，&nbsp;而了解每个字段域的属性则是填写数据的基础。 1、位图描述如下：&nbsp; 位图位置：1 &nbsp;格式：定长 &nbsp;类型：B16（二进制16位，16*8=128bit） &nbsp;描述： &nbsp;&nbsp;&nbsp;&nbsp;如将位图的第一位设为&#39;1&#39;，表示使用扩展位图（128个域），否则表示只使用基本位图（64个域）。 &nbsp;&nbsp;&nbsp;&nbsp;如使用某数据域，应在位图中将相应的位设位&#39;1&#39;，如使用41域，需将位图的41位设为&#39;1&#39;。 &nbsp;选用条件：如使用65到128域，需设位图域第一位为&#39;1&#39; 2、每个域的定义如下： typedef struct ISO8583 &nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int bit_flag; /*域数据类型0 -- string, 1 -- int, 2 -- binary*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data_name; /*域名*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length; /*数据域长度*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length_in_byte;/*实际长度（如果是变长）*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int variable_flag; /*是否变长标志0：否&nbsp;2：2位变长, 3：3位变长*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int datatyp; /*0 -- string, 1 -- int, 2 -- binary*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data; /*存放具体值*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int attribute; /*保留*/ &nbsp;} ISO8583; ISO8583 Tbl8583[128] = { /* FLD 1 */ {0,&quot;BIT MAP,EXTENDED &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 2 */ {0,&quot;PRIMARY ACCOUNT NUMBER &quot;, 22, 0, 2, 0, NULL,0}, /* FLD 3 */ {0,&quot;PROCESSING CODE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 4 */ {0,&quot;AMOUNT, TRANSACTION &quot;, 12, 0, 0, 1, NULL,0}, /* FLD 5 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 6 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 7 */ {0,&quot;TRANSACTION DATE AND TIME &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 8 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 9 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 10 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 11 */ {0,&quot;SYSTEM TRACE AUDIT NUMBER &quot;, 6, 0, 0, 1, NULL,0}, /* FLD 12 */ {0,&quot;TIME, LOCAL TRANSACTION &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 13 */ {0,&quot;DATE, LOCAL TRANSACTION &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 14 */ {0,&quot;DATE, EXPIRATION &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 15 */ {0,&quot;DATE, SETTLEMENT &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 16 */ {0,&quot;NO USE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 17 */ {0,&quot;DATE, CAPTURE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 18 */ {0,&quot;MERCHANT&#39;S TYPE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 19 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 20 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 21 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 22 */ {0,&quot;POINT OF SERVICE ENTRY MODE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 23 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 24 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 25 */ {0,&quot;POINT OF SERVICE CONDITION CODE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 26 */ {0,&quot;NO USE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 27 */ {0,&quot;NO USE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 28 */ {0,&quot;field27 &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 29 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 30 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 31 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 32 */ {0,&quot;ACQUIRER INSTITUTION ID. CODE &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 33 */ {0,&quot;FORWARDING INSTITUTION ID. CODE &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 34 */ {0,&quot;NO USE &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 35 */ {0,&quot;TRACK 2 DATA &quot;, 37, 0, 2, 0, NULL,0}, /* FLD 36 */ {0,&quot;TRACK 3 DATA &quot;,104, 0, 3, 0, NULL,0}, /* FLD 37 */ {0,&quot;RETRIEVAL REFERENCE NUMBER &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 38 */ {0,&quot;AUTH. IDENTIFICATION RESPONSE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 39 */ {0,&quot;RESPONSE CODE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 40 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 41 */ {0,&quot;CARD ACCEPTOR TERMINAL ID. &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 42 */ {0,&quot;CARD ACCEPTOR IDENTIFICATION CODE &quot;, 15, 0, 0, 0, NULL,0}, /* FLD 43 */ {0,&quot;CARD ACCEPTOR NAME LOCATION &quot;, 40, 0, 0, 0, NULL,0}, /* FLD 44 */ {0,&quot;ADDITIONAL RESPONSE DATA &quot;, 25, 0, 2, 0, NULL,0}, /* FLD 45 */ {0,&quot;NO USE &quot;, 76, 0, 2, 0, NULL,0}, /* FLD 46 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 47 */ {0,&quot;field47 &quot;,999, 0, 3, 0, NULL,0}, /* FLD 48 */ {0,&quot;ADDITIONAL DATA --- PRIVATE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 49 */ {0,&quot;CURRENCY CODE,TRANSACTION &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 50 */ {0,&quot;CURRENCY CODE,SETTLEMENT &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 51 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 52 */ {0,&quot;PERSONAL IDENTIFICATION NUMBER DATA &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 53 */ {0,&quot;SECURITY RELATED CONTROL INformATION&quot;, 16, 0, 0, 0, NULL,0}, /* FLD 54 */ {0,&quot;ADDITIONAL AMOUNTS &quot;,120, 0, 3, 0, NULL,0}, /* FLD 55 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 56 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 57 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 58 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 59 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 60 */ {0,&quot;NO USE &quot;, 5, 0, 3, 0, NULL,0}, /* FLD 61 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 62 */ {0,&quot;NO USE &quot;, 11, 0, 3, 0, NULL,0}, /* FLD 63 */ {0,&quot;NO USE &quot;, 11, 0, 3, 0, NULL,0}, /* FLD 64 */ {0,&quot;MESSAGE AUTHENTICATION CODE FIELD &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 65 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 66 */ {0,&quot;NO USE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 67 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 68 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 69 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 70 */ {0,&quot;SYSTEM MANAGEMENT INformATION CODE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 71 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 72 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 73 */ {0,&quot;NO USE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 74 */ {0,&quot;NUMBER OF CREDITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 75 */ {0,&quot;REVERSAL NUMBER OF CREDITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 76 */ {0,&quot;NUMBER OF DEBITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 77 */ {0,&quot;REVERSAL NUMBER OF DEBITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 78 */ {0,&quot;NUMBER OF TRANSFER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 79 */ {0,&quot;REVERSAL NUMBER OF TRANSFER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 80 */ {0,&quot;NUMBER OF INQUIRS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 81 */ {0,&quot;AUTHORIZATION NUMBER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 82 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 83 */ {0,&quot;CREDITS,TRANSCATION FEEAMOUNT &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 84 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 85 */ {0,&quot;DEBITS,TRANSCATION FEEAMOUNT &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 86 */ {0,&quot;AMOUNT OF CREDITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 87 */ {0,&quot;REVERSAL AMOUNT OF CREDITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 88 */ {0,&quot;AMOUNT OF DEBITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 89 */ {0,&quot;REVERSAL AMOUNT OF DEBITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 90 */ {0,&quot;ORIGINAL DATA ELEMENTS &quot;, 42, 0, 0, 0, NULL,0}, /* FLD 91 */ {0,&quot;FILE UPDATE CODE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 92 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 93 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 94 */ {0,&quot;SERVICE INDICATOR &quot;, 7, 0, 0, 0, NULL,0}, /* FLD 95 */ {0,&quot;REPLACEMENT AMOUNTS &quot;, 42, 0, 0, 0, NULL,0}, /* FLD 96 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 97 */ {0,&quot;AMOUNT OF NET SETTLEMENT &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 98 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 99 */ {0,&quot;SETTLEMENT INSTITUTION ID &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 100 */ {0,&quot;RECVEING INSTITUTION ID &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 101 */ {0,&quot;FILENAME &quot;, 17, 0, 2, 0, NULL,0}, /* FLD 102 */ {0,&quot;ACCOUNT IDENTIFICATION1 &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 103 */ {0,&quot;ACCOUNT IDENTIFICATION2 &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 104 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 105 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 106 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 107 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 108 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 109 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 110 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 111 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 112 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 113 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 114 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 115 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 116 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 117 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 118 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 119 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 120 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 121 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 122 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 123 */ {0,&quot;NEW PIN DATA &quot;, 8, 0, 3, 2, NULL,0}, /* FLD 124 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 125 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 126 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 127 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 128 */ {0,&quot;MESSAGE AUTHENTICATION CODE FIELD &quot;, 8, 0, 0, 2, NULL,0}, }; ３、变长，定长域说明 如第二域：域名为主帐号， 数据类型为string 长度为22（是长长度不得超过此数） 是个２位变长域 由于是２位变长，在打包时需在数据域前加上数据的实际长度，如为１９位，则表示为： １９＋数据值（即前两位为长度） 如第三域：域名为处理码， 数据类型为string 长度为６ 是个定长域 必须填满６位。 附A:ISO8583各域段的说明 1，信息类型（message type）定义 位图位置：－ &nbsp;格式：定长 &nbsp;类型：N4 &nbsp;描述： &nbsp;数据包的第一部分，定义数据包的类型。 &nbsp;数据类型由数据包的发起者设定，应遵循以下要求： &nbsp;数据包开始部分必须是信息类型； &nbsp;对不支持的信息类型能给出拒绝应答。 &nbsp;0100授权交易 &nbsp;0110授权交易答复 &nbsp;0200金融交易 &nbsp;0210金融交易答复 &nbsp;0240查询交易 &nbsp;0250查询交易答复 &nbsp;0400冲正交易 &nbsp;0410冲正交易答复 &nbsp;0800管理交易 &nbsp;0810管理交易答复 &nbsp;2，位图(Bit Map) -&nbsp;基本位图和扩展位图 位图位置：1 &nbsp;格式：定长 &nbsp;类型：B16 &nbsp;描述： &nbsp;如将位图的第一位设为&#39;1&#39;，表示使用扩展位图，否则表示只使用基本位图。 &nbsp;如使用某数据域，应在位图中将相应的位设位&#39;1&#39;，如使用41域，需将位图的41位设为&#39;1&#39;。 &nbsp;选用条件：如使用65到128域，需设位图域为&#39;1&#39; &nbsp;3、Bit02主帐号(Primary Account Number) 位图位置：02 &nbsp;格式：变长,LLVAR &nbsp;类型：N..22 &nbsp;描述： &nbsp;唯一的确认一个用户交易的基本帐号。 &nbsp;由于银行电子服务系统涉及多个应用系统，而帐号长度最多为22位，故将原标准的19长度改为22位。 &nbsp; 4、Bit03&nbsp;处理代码&nbsp;（Processing Code） 位图位置：03 &nbsp;格式：定长 &nbsp;类型：N6 &nbsp;描述：用于描述交易对客户帐户造成何种影响的代码。 &nbsp;处理代码和信息码一起可唯一定义一种交易的类型。 &nbsp;处理代码由以下三部分组成： &nbsp;位置描述 &nbsp;1－2交易动作码 &nbsp;3－4付出帐户类型，用于借记类，如查询、代收费、转场交易。 &nbsp;5－6收入帐户类型，用于代收费、转帐等。 &nbsp;其中： &nbsp;ff :&nbsp;付出帐户 &nbsp;tt：&nbsp;收入帐户 &nbsp;*&nbsp;视主机而定 &nbsp;5，Bit04&nbsp;交易金额&nbsp;（Amount, Transaction） 位图位置：04 &nbsp;格式：定长 &nbsp;类型：N12 &nbsp;描述：帐户人要求交易的交易金额，不含任何处理和交易费用。 &nbsp;金额的表示和货币代码有关，应能表示相应货币的最小单位。参ISO4217有关货币代码定义。 &nbsp;如“000000000100”用于表示美元，表示1.00元；如用于表示意大利货币，则表示100里拉。 &nbsp;对于查询等交易，应设交易金额为“000000000000”。 &nbsp;6，Bit06交易日期和时间（Transmission Date and Time） 位图位置：07 &nbsp;格式：定长，MMDDhhmmss &nbsp;类型：N10 &nbsp;描述：本地交易日期和时间 &nbsp;7，Bit11系统跟踪号（Systems Trace Audit Number) 位图位置：11 &nbsp;格式：定长 &nbsp;类型：N6 &nbsp;描述：终端交易的跟踪号码。 &nbsp;交易发起终端填写，和“交易日期、时间”、信息类型等合在一起可唯一定义某一个终端的唯一一笔交易。即是说，在同一天，对一终端，同一类交易的系统跟踪号应保证不同。系统跟踪号在交易过程中不能修改。使用此域来匹配请求和通知类交易的返回。 &nbsp;应用系统使用此域来检查收到的授权、金融、自动冲正、结算、管理和网管等类交易的应答包是否是其请求包的应答。 &nbsp;系统跟踪号不用于匹配自动冲正交易，也不用于在预授权消费时匹配前面的预授权交易。参90域。 &nbsp;对于银行电子服务系统，其系统跟踪号是交易流水号。 &nbsp;8，Bit12本地交易时间（Time ,Local Transaction） 位图位置：12 &nbsp;格式：定长，hhmmss &nbsp;类型：N6 &nbsp;描述：交易在终端上发生的时间。 &nbsp;本地交易时间在交易处理过程中不能改变。在自动冲正，存贮转发时，本地交易时间不能改变。 &nbsp;9，Bit13本地交易日期(Date ,Local Transaction) 位图位置：13 &nbsp;格式：定长,MMDD &nbsp;类型：N4 &nbsp;描述：交易在终端上发生的时间。 &nbsp;本地交易时间不能改变，在自动冲正、存储转发交易时，本地交易时间也不能改变。 &nbsp;10，Bit14有效期(Date ,Expiration) &nbsp;位图位置：14 &nbsp;格式：定长,YYMM &nbsp;类型：N4 &nbsp;描述：卡的有效期，年年月月 &nbsp;由于卡类写磁格式不同，收单行可能提不出卡的有效期，授权机构从卡的二磁道中提取卡的有效期。如卡无二磁道，收单行应要求手工录入卡的有效期。 &nbsp;选用条件：100、200、400等交易如没有2、3磁道时，一定要有此域。 &nbsp;11，Bit15结算日期(Date ,Settlement) 位图位置：15 &nbsp;格式：定长，MMDD &nbsp;类型：N4 &nbsp;描述： &nbsp;银行电子服务系统和主机结算的时间，格式月月日日。 &nbsp;结帐日期前发生的交易参加当天结算。 &nbsp;在结算时，结帐日期也用于计算处理、交易费用。 &nbsp;12，Bit17获取日期(Date ,Capture) 位图位置：17 &nbsp;格式：定长，MMDD &nbsp;类型：N4 &nbsp;描述：从主机获取交易的记帐日期。通常用于主机和商户清算。 &nbsp;13，Bit18商户类型（Merchant&#39;s Type） 位图位置：18 &nbsp;格式：定长 &nbsp;类型：N4 &nbsp;描述：定义商户产品和服务类型的代码 &nbsp;商户类型用于金融、授权交易，用于指定服务点的类型。它主要有以下用途： &nbsp;决定预授权交易得到确认的最长时间； &nbsp;控制合法限额； &nbsp;为交易授权处理，控制网络操作规则； &nbsp;欺诈检测； &nbsp;用于商户分类报表； &nbsp;交易费用处理。 根据ISO8583标准，应使用相应的国家标准。 &nbsp;商户类型代码表如下： &nbsp;商户类型代码行业类型说明 &nbsp;4215邮递服务 &nbsp;4511民航 &nbsp;4722旅游 &nbsp;4782过桥费 &nbsp;4789其他运输服务 &nbsp;4614电信服务 &nbsp;5542加油站 &nbsp;5812餐馆 &nbsp;5999购物 &nbsp;6010金融机构－人工现金支付 &nbsp;6011金融机构－自动现金支付 &nbsp;6012金融机构－各类服务 &nbsp;7011酒店、旅馆 &nbsp;7299各类个人服务：洗衣、美容、 &nbsp;7399各类商业服务：停车场、租车、广告、其他服务 &nbsp;7699各类维修服务：维修、洗车、拖车 &nbsp;7996娱乐：电影、剧院、体育、游戏 &nbsp;8099医疗服务 &nbsp;8111法律服务 &nbsp;8999各类专业服务：会计、教育、装修、工程 &nbsp;选用条件：服务点终端发起的交易一定要有此域。 &nbsp;14，Bit22服务点输入方式(Point-of-Service Entry Mode) 位图位置：22 &nbsp;格式：定长 &nbsp;类型：N3 &nbsp;描述：在服务终端上定义PIN和PAN的输入方式。 &nbsp;服务点输入方式包含以下两个方面组合而成： &nbsp;位置描述 &nbsp;1－2在服务终端上PAN有效期输入方式 &nbsp;3－3在服务终端上PIN的输入方式 &nbsp;PAN的输入方式编码如下： &nbsp;PAN输入方式描述 &nbsp;00不知 &nbsp;01手工 &nbsp;02读磁卡 &nbsp;03条码扫描仪（BAR） &nbsp;04光学符号阅读器（OCR） &nbsp;05集成电路卡（IC卡） &nbsp;PIN的输入方式编码如下： &nbsp;PIN输入方式描述 &nbsp;0不知 &nbsp;1终端能接收PIN &nbsp;2终端不能接收PIN &nbsp;选用条件：服务点终端发起的交易一定要有此域。 &nbsp;15，Bit25服务点类型代码(Point-of-Service Condition Code) &nbsp;位图位置：25 &nbsp;格式：定长 &nbsp;类型：N2 &nbsp;描述：定义交易发生的服务点类型 &nbsp;用法说明：下面是CYBERBANK支持的服务点条件代码。 &nbsp;服务点条件代码服务点终端类型 &nbsp;2自动柜员机（ATM） &nbsp;10银行终端（10） &nbsp;14POS &nbsp;20电话银行 &nbsp;16，Bit32收单机构标识码(Acquirer institution Identification) 位图位置：32 &nbsp;格式：LLVAR &nbsp;类型：N..11 &nbsp;描述：在金融交易中此域表示交易发生的银行机构的标识码 &nbsp;应答数据包必须和请求数据包此域相同。 &nbsp;17,Bit3向前机构标识码(Forwarding Institution Identification Code) 位图位置：33 &nbsp;格式：LLVAR &nbsp;类型：N..11 &nbsp;描述：在金融交易中此域表示帐户所在的银行机构的标识码 &nbsp;在网管交易800/810中，本域含有交易发起机构的代码。 &nbsp;应答数据包必须和请求数据包此域相同。 &nbsp;18，Bit35二磁道数据(Track 2 Data) 位图位置：35 &nbsp;格式：LLVAR &nbsp;类型：Z..37 &nbsp;描述：写在卡二磁道的数据。数据组成遵循ISO7811－1985标准，数据中包含域分隔符，但不包含卡启始、结束符、LRC等。 &nbsp;收卡行应检测卡的二磁道是否符合国际标准。 &nbsp;为支持国际交换收单行应将二磁道中的分隔符换为“＝”。除此外不能对二磁道数据进行任何修改，如修改PAN的校验字、有效期、服务码等。 &nbsp;19，Bit36三磁道数据(Track 3 Data) 位图位置：36 &nbsp;格式：LLLVAR &nbsp;类型：Z...104 &nbsp;描述：写在卡三磁道的数据。数据应组成遵循ISO4909标准，数据中包含域分隔符，但不包含卡启始、结束符、LRC等。 &nbsp;注意：长度说明为3位数字长。 &nbsp;20，Bit37检索索引号(Retrieval Reference Number) 位图位置：37 &nbsp;格式：定长 &nbsp;类型：AN12 &nbsp;描述：检索索引号用来在任何时间标识一个金融、授权、自动冲正交易。 &nbsp;检索索引号不要求打印在持卡人的帐单上。它的主要目的是在收单行和授权行之间定义一个数据项用于跟踪和检索交易。授权机构可以将检索索引号打印在客户的对帐单上。 &nbsp;检索索引号由收单行分配。 &nbsp;选用条件：可包含在收单机构的交易请求中。如在交易请求中有，则应答数据中一定应原样返回。 &nbsp;21，Bit38授权码(Authorization Identification) 位图位置：38 &nbsp;格式：定长 &nbsp;类型：AN6 &nbsp;描述：交易授权机构返回的返回代码。 &nbsp;授权码用于在服务点终端上信用卡授权； &nbsp;授权机构按网络操作规定，可选使用本域。 &nbsp;22，Bit39返回码(Response Code) 位图位置：39 &nbsp;格式：定长 &nbsp;类型：AN2 &nbsp;描述：对一交易定义其处理结果的编码。 &nbsp;返回码用于说明授权机构对金融（授权）交易的处理状态；也用来指明自动冲正交易的冲正原因；还用来指出目标主机已接收到文件修改、结算、管理、网管等交易请求。 &nbsp;返回码应尽可能准确，应尽可能描述清楚所遇到的问题和状态。网络交换主机、收单行主机有可能会按不同的返回码收取不同的交易处理费用，并执行不同的处理过程。 &nbsp; 23，Bit41收卡单位终端标识码(Card Acceptor Terminal Identification) 位图位置：41 格式：定长 类型：ANS8 描述：定义在收单单位中定义一个服务终端的标识码，在同一商户中服务终端标识码应唯一。 24，Bit42收卡商户定义码(Card Acceptor Identification Code) 位图位置：42 格式：定长 类型：ANS15 描述：在本地和网络中定义交易单位（商户）的编码。 25，Bit43收卡商户位置(Card Acceptor Location) 位图位置：43 格式：定长 类型：ANS40 描述：在本地和网络中定义收卡单位（商户）的国家、省。城市等。 选用条件：如对外卡网络，一定要包含此域。 26，Bit44附加返回数据(Additional ResponseData) 位图位置：44 格式：LLVAR 类型：ANS..25 描述：在金融（授权）交易中授权机构返回的其他信息。 27，Bit48附加数据-私用(Additional Data-Private) 位图位置：48 格式：LLLVAR 类型：ANS...999 描述：银行电子服务系统使用此域作以下用途： 存放批量查询的返回数据 其格式与输出格式表对应 28，Bit49交易货币代码(Currency Code,Transaction) 位图位置：49 格式：定长 类型：AN3 描述：按ISO4217定义的交易货币代码，用来表示“交易金额”（field04）所用的货币种类。 交易货币代码是指在收单单位进行交易所用的交易种类。 29，Bit50结算货币代码(Currency Code,Settlement) 位图位置：50 格式：定长 类型：AN3 描述：按ISO4217定义的结算货币代码，用来表示结算金额、结算处理费、结算交易费等所用的货币种类。 结算货币代码是指在进行结算和清算过程中所用的货币种类。 30，Bit52用户密码(PIN)数据(PIN Data) 位图位置：52 格式：定长 类型：B16 描述：用户在服务终端上交易用于识别用户合法性的一些数字。 PIN在分行主机用分行主机密钥按ANSIX9.8标准加密，形成密文块。 选用条件：如果在终端上输入了密码，就需要此域。 31，Bit53密码相关控制信息(Security Related Control) 位图位置：53 格式：定长 类型：AN16 描述：本域提供有关密码块的附加信息，用于指出用于PIN计算的PIN key，用于MAC计算的MAC key。 本域格式如下表所示： 0－1格式代码2N“20” 2－3PIN加密算法2N“01”：DES 4－5密文块格式2N“01”:ANSI 6PIN密钥索引1N‘1’或‘2’ 7MAC密钥索引1N‘1’或‘2’ 8－11MAC检查数据4B 12－15填充4N 在BOC信用卡网络中PIN和MAC各使用两个密钥---&#39;1&#39;号和&#39;2&#39;密钥，交易中计算PIN和MAC时只能各用某一个KEY，同时需将所用的KEY索引号填写此域。 选用条件：如果有PIN域或MAC域，一定需有此域。 32，Bit54附加金额(Additional Amounts) 位图位置：54 格式：LLLVAR 类型：ANS...120 描述：此域由授权行主机将客户的余额返回给收单终端，以显示或打印在客户回单上。 在此域中最多可有6个余额返回，每个余额返回格式如下： 位置描述 0－1处理码3－4或5－6位定义的帐号类型 2－3金额类型：01－帐户金额 02－可用金额 03－拥有金额 04－应付金额 40－可用取款限额 56－可用转帐限额 4－6金额的货币代码 7‘D’－借记金额，’C’－贷记金额 8－19余额数目 六个余额中必须返回可用余额，在ATM、POS上显示可用余额 33，Bit64信息确认码(MAC) 位图位置：64 格式：定长 类型：B16 描述：数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改。 MAC的计算参ANSIX.99,(最后八字节未满八位者左补零，右补零？) 为提高效率，在发送者和接收者之间，只有以下一些重要的域参加MAC的计算。数据包中如果存在以下数据域，它们将参加MAC的计算。 位图域名 &nbsp;2基本帐号 &nbsp;3处理代码 &nbsp;4交易金额 &nbsp;11系统跟踪号 &nbsp;12本地交易时间 &nbsp;13本地交易日期 &nbsp;32收单机构代码 &nbsp;38授权码 &nbsp;39返回码 &nbsp;41收单终端代码 &nbsp;49交易货币代码 &nbsp;95替换金额 选用条件：只使用了1－64域的数据包使用此域。 34，Bit70管理信息码(System Management Indormation Code) 位图位置：70 格式：定长 类型：N3 描述： 用于定义和维护银行电子服务系统内部通讯网络状态和应用工作状态。 网络管理信息代码用于管理清算日期&quot;cutoff&quot;，通讯&quot;sign on/sign off&quot;，&quot;key exchange&quot;等。 支持以下一些网络管理信息码 NMIC网络管理信息码动作 001签到(Sign on) &nbsp;002签退(Sign off) &nbsp;101交换密钥(Key exchange) &nbsp;201结帐日期切换(Cutoff) &nbsp;202结帐日期切换完成 &nbsp;301测试(Echo test) 35，Bit74贷记交易笔数(Transaction Number) 位图位置：74 格式：定长 类型：N10 描述：贷记金融交易总的成功交易次数 CYBERBANK软件在收到如下一个处理代码时会增加贷记交易次数。 交易码交易服务 00贷记，购物与服务 01贷记，取现 02贷记，调整(客户调整) 36，Bit75贷记自动冲正交易笔数(Credits,Reversal Number) 位图位置：75 格式：定长 类型：N10 描述：贷记收单行自动冲正、“ChargeBack&quot;等交易总的交易次数 CYBERBANK软件在收到如下一个处理代码时会增加贷记自动冲正交易笔数 交易码交易服务 20贷记，退货 21贷记，存款 22贷记，调整（客户修改） 37，Bit76借记交易笔数(Debits,Number) 位图位置：76 格式：定长 类型：N10 描述：借记金融交易总的成功交易次数 CYBERBANK软件在收到如下一个处理代码时会增加借记交易次数。 交易码交易服务 00借记，购物与服务 01借记，取现 02借记，调整(客户调整) 38，Bit77借记自动冲正交易笔数(Debits,Reversal Number) 位图位置：77 格式：定长 类型：N10 描述：借记收单行自动冲正、“ChargeBack&quot;等交易总的交易次数 CYBERBANK软件在收到如下一个处理代码时会增加借记重发交易次数，并在清算表报中反映。 交易码交易服务 20借记(!!!)，退货 21借记，存款 22借记，调整（客户修改） 39，Bit78转帐交易笔数(Transfers,Number) 位图位置：78 格式：定长 类型：N10 描述：转帐的交易总次数。 系统在收到如下一个处理代码的金融交易时会增加转帐交易的次数。 交易码交易服务 40客户相关帐户间转帐 40，Bit79转帐自动冲正交易笔数(Transfers,Reversal Number) 位图位置：79 格式：定长 类型：N10 描述：转帐的自动冲正交易总次数。 系统在收到如下一个处理代码的自动冲正交易时会增加转帐自动冲正交易的次数。 交易码交易服务 40客户相关帐户间转帐 41，Bit80查询交易笔数(Inquiries,Number) 位图位置：80 格式：定长 类型：N10 描述：成功的查询交易次数。 系统软件在收到如下一个处理代码时会增加查询交易次数。 交易码交易服务 30查询可用金额 42，Bit81授权交易笔数(Authorization,Number) 位图位置：81 格式：定长 类型：N10 描述：成功的授权交易总额 在收到一个授权交易时系统将授权交易笔数加一。 43，Bit83贷记交易费金额(Credits,Transaction FeeAmount) 位图位置：83 格式：定长 类型：N12 描述：净交易费用，如交易金额为正。 44，Bit85借记交易费金额(Debits,Transaction FeeAmount) 位图位置：85 格式：定长 类型：N12 描述：净交易费用，如交易金额为负。 45，Bit86贷记交易金额(Credits,Amount) 位图位置：86 格式：定长 类型：N16 描述：贷记金融交易总的交易金额，不含任何费用。 系统在收到如下一个处理代码时会增加贷记交易金额，并在清算表报中反映。 交易码交易服务 20贷记，退货 21贷记，存款 22贷记，调整（客户修改） 46，Bit87贷记自动冲正金额(Credits,Reversal Amount) 位图位置：87 格式：定长 类型：N16 描述：信用卡自动冲正交易的总金额，不含任何费用。 47，Bit88借记交易金额(Debits,Amount) 位图位置：88 格式：定长 类型：N16 描述：借记金融交易总的交易金额，不含任何费用。 系统在收到如下一个处理代码时会增加借记交易金额，并在清算表报中反映。 交易码交易服务 00借记，购物与服务 01借记，取现 02借记，调整(客户调整) 48，Bit89借记自动冲正交易金额(Debits,Reversal Amount) 位图位置：89 格式：定长 类型：N16 描述：借记自动冲正交易的总金额，不含任何费用。 49，Bit90原交易的数据元素(Original Data Elements) 位图位置：90 格式：定长 类型：N42 描述：存放原交易的一些数据，用于修改或自动冲正。 数据由以下五部分组成： 位置描述 1－4信息类型码 设为原交易的信息类型代码 5－10系统跟踪号 原交易系统跟踪号 11－20交易日期和时间 原交易的交易日期和时间 21－31原收单机构 原交易的收单机构 不足11位的机构代码，左补‘0’ 32－42原向前机构 原交易的收单机构 不足11位的机构代码，左补‘0’ 50，Bit91文件修改编码(File Update Code) 位图位置：91 格式：定长 类型：AN1 描述：用此域指示某文件怎样维护。 CYBERBANK支持以下一些修改代码： 1增加记录 2改变记录 3删除记录 5查询 7增加文件 选用条件： 51，Bit94服务指示码(Service Indicator) 位图位置：94 格式：定长 类型：AN7 描述：指示文件修改服务。 选用条件： 52，Bit95代替金额(Replacement Amounts) 位图位置：95 格式：定长 类型：N42!!! 描述：客户修改或部分取消已完成的交易，最后实际发生的交易金额， 交易的原交易金额存放在90域。 本域由以下4部分组成 Sub-ElementAmountAttribute 交易实际金额N12 结算实际金额N12 实际交易费用X＋N8 实际结算费用X＋N8 53，Bit97净结算金额(Net Settlement Amount) 位图位置：97 格式：定长 类型：X+N16 描述：此域为净结帐金额。 502交易中用于发送当天的净结算金额 例：“C0000000020000000”，表示贷方（&#39;＋&#39;？）200000.00元。 “D0000000020000000”，表示借方（&#39;－&#39;？）200000.00元。 54，Bit99结算机构码(Settlement Institution Identification) 位图位置：99 格式：LLVAR 类型：N..11 描述：此域存放接收清算信息的机构代码。 返回数据包此域必须和请求数据包一致。 55，Bit100接收机构码（Receiving Institution Identification) 位图位置：100 格式：LLVAR 类型：N..11 描述：金融交易此域存放授权机构代码。 网管类交易，800/820交易，此域存放请求的目的机构代码。 返回数据包此域必须和请求数据包一致。 56，Bit101文件名(FileName) 位图位置：101 格式：LLVAR 类型：ANS..17 描述：发送机构设置的文件名。 57，Bit102帐号1(Account Identification1) 位图位置：102 格式：LLVAR 类型：ANS..28 描述：一个特定的客户帐号。帐号1用来描述受借记、转出、支付等交易影响的帐户。 选用条件：转帐时使用。 58，Bit103帐号2(Account Identiication2) 位图位置：103 格式：LLVAR 类型：ANS..28 描述：交易的补充信息，如：第二货币号、利率代码、起止日期等。 定义如下表 0000000000000000000000000000000000000000000000000 位置长度描述 00－2122帐户 22－276发卡机构号 如果此域存在，将按此机构代码作为路由信息。 选用条件：机构间转帐时使用。 60，Bit123新密码数据(New PIN Data) 位图位置：123 格式：LLLVAR 类型：B...16 描述：修改密码交易时存放新密码。 格式参考52域 选用条件：修改密码交易时必须有此域。 61，Bit128信息确认码(MAC) 位图位置：128 格式：定长 类型：B16 描述：数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改。 MAC的计算参ANSIX.99 为提高效率，在发送者和接收者之间，只有以下一些重要的域参加MAC的计算。数据包中如果存在以下数据域，它们将参加MAC的计算。 位图域名 &nbsp;2基本帐号 &nbsp;3处理代码 &nbsp;4交易金额 &nbsp;11系统跟踪号 &nbsp;12本地交易时间 &nbsp;13本地交易日期 &nbsp;32收单机构代码 &nbsp;38授权码 &nbsp;39返回码 &nbsp;41收单终端代码 &nbsp;49交易货币代码 &nbsp;95替换金额 选用条件：使用65－128数据域的数据包需使用此域。 阅读更多" />
<meta property="og:description" content="ISO8583包（简称8583包）是一个国际标准的包格式，最多由128个字段域组成，每个域都有统一的规定，并有定长与变长之分。 &nbsp;&nbsp;&nbsp;&nbsp;8583包前面一段为位图，用来确定包的字段域组成情况。 &nbsp;&nbsp;&nbsp;&nbsp;其中位图是8583包的灵魂，它是打包解包确定字段域的关键，&nbsp;而了解每个字段域的属性则是填写数据的基础。 1、位图描述如下：&nbsp; 位图位置：1 &nbsp;格式：定长 &nbsp;类型：B16（二进制16位，16*8=128bit） &nbsp;描述： &nbsp;&nbsp;&nbsp;&nbsp;如将位图的第一位设为&#39;1&#39;，表示使用扩展位图（128个域），否则表示只使用基本位图（64个域）。 &nbsp;&nbsp;&nbsp;&nbsp;如使用某数据域，应在位图中将相应的位设位&#39;1&#39;，如使用41域，需将位图的41位设为&#39;1&#39;。 &nbsp;选用条件：如使用65到128域，需设位图域第一位为&#39;1&#39; 2、每个域的定义如下： typedef struct ISO8583 &nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int bit_flag; /*域数据类型0 -- string, 1 -- int, 2 -- binary*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data_name; /*域名*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length; /*数据域长度*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length_in_byte;/*实际长度（如果是变长）*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int variable_flag; /*是否变长标志0：否&nbsp;2：2位变长, 3：3位变长*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int datatyp; /*0 -- string, 1 -- int, 2 -- binary*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data; /*存放具体值*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int attribute; /*保留*/ &nbsp;} ISO8583; ISO8583 Tbl8583[128] = { /* FLD 1 */ {0,&quot;BIT MAP,EXTENDED &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 2 */ {0,&quot;PRIMARY ACCOUNT NUMBER &quot;, 22, 0, 2, 0, NULL,0}, /* FLD 3 */ {0,&quot;PROCESSING CODE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 4 */ {0,&quot;AMOUNT, TRANSACTION &quot;, 12, 0, 0, 1, NULL,0}, /* FLD 5 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 6 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 7 */ {0,&quot;TRANSACTION DATE AND TIME &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 8 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 9 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 10 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 11 */ {0,&quot;SYSTEM TRACE AUDIT NUMBER &quot;, 6, 0, 0, 1, NULL,0}, /* FLD 12 */ {0,&quot;TIME, LOCAL TRANSACTION &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 13 */ {0,&quot;DATE, LOCAL TRANSACTION &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 14 */ {0,&quot;DATE, EXPIRATION &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 15 */ {0,&quot;DATE, SETTLEMENT &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 16 */ {0,&quot;NO USE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 17 */ {0,&quot;DATE, CAPTURE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 18 */ {0,&quot;MERCHANT&#39;S TYPE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 19 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 20 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 21 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 22 */ {0,&quot;POINT OF SERVICE ENTRY MODE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 23 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 24 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 25 */ {0,&quot;POINT OF SERVICE CONDITION CODE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 26 */ {0,&quot;NO USE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 27 */ {0,&quot;NO USE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 28 */ {0,&quot;field27 &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 29 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 30 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 31 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 32 */ {0,&quot;ACQUIRER INSTITUTION ID. CODE &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 33 */ {0,&quot;FORWARDING INSTITUTION ID. CODE &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 34 */ {0,&quot;NO USE &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 35 */ {0,&quot;TRACK 2 DATA &quot;, 37, 0, 2, 0, NULL,0}, /* FLD 36 */ {0,&quot;TRACK 3 DATA &quot;,104, 0, 3, 0, NULL,0}, /* FLD 37 */ {0,&quot;RETRIEVAL REFERENCE NUMBER &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 38 */ {0,&quot;AUTH. IDENTIFICATION RESPONSE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 39 */ {0,&quot;RESPONSE CODE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 40 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 41 */ {0,&quot;CARD ACCEPTOR TERMINAL ID. &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 42 */ {0,&quot;CARD ACCEPTOR IDENTIFICATION CODE &quot;, 15, 0, 0, 0, NULL,0}, /* FLD 43 */ {0,&quot;CARD ACCEPTOR NAME LOCATION &quot;, 40, 0, 0, 0, NULL,0}, /* FLD 44 */ {0,&quot;ADDITIONAL RESPONSE DATA &quot;, 25, 0, 2, 0, NULL,0}, /* FLD 45 */ {0,&quot;NO USE &quot;, 76, 0, 2, 0, NULL,0}, /* FLD 46 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 47 */ {0,&quot;field47 &quot;,999, 0, 3, 0, NULL,0}, /* FLD 48 */ {0,&quot;ADDITIONAL DATA --- PRIVATE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 49 */ {0,&quot;CURRENCY CODE,TRANSACTION &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 50 */ {0,&quot;CURRENCY CODE,SETTLEMENT &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 51 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 52 */ {0,&quot;PERSONAL IDENTIFICATION NUMBER DATA &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 53 */ {0,&quot;SECURITY RELATED CONTROL INformATION&quot;, 16, 0, 0, 0, NULL,0}, /* FLD 54 */ {0,&quot;ADDITIONAL AMOUNTS &quot;,120, 0, 3, 0, NULL,0}, /* FLD 55 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 56 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 57 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 58 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 59 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 60 */ {0,&quot;NO USE &quot;, 5, 0, 3, 0, NULL,0}, /* FLD 61 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 62 */ {0,&quot;NO USE &quot;, 11, 0, 3, 0, NULL,0}, /* FLD 63 */ {0,&quot;NO USE &quot;, 11, 0, 3, 0, NULL,0}, /* FLD 64 */ {0,&quot;MESSAGE AUTHENTICATION CODE FIELD &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 65 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 66 */ {0,&quot;NO USE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 67 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 68 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 69 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 70 */ {0,&quot;SYSTEM MANAGEMENT INformATION CODE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 71 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 72 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 73 */ {0,&quot;NO USE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 74 */ {0,&quot;NUMBER OF CREDITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 75 */ {0,&quot;REVERSAL NUMBER OF CREDITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 76 */ {0,&quot;NUMBER OF DEBITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 77 */ {0,&quot;REVERSAL NUMBER OF DEBITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 78 */ {0,&quot;NUMBER OF TRANSFER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 79 */ {0,&quot;REVERSAL NUMBER OF TRANSFER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 80 */ {0,&quot;NUMBER OF INQUIRS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 81 */ {0,&quot;AUTHORIZATION NUMBER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 82 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 83 */ {0,&quot;CREDITS,TRANSCATION FEEAMOUNT &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 84 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 85 */ {0,&quot;DEBITS,TRANSCATION FEEAMOUNT &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 86 */ {0,&quot;AMOUNT OF CREDITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 87 */ {0,&quot;REVERSAL AMOUNT OF CREDITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 88 */ {0,&quot;AMOUNT OF DEBITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 89 */ {0,&quot;REVERSAL AMOUNT OF DEBITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 90 */ {0,&quot;ORIGINAL DATA ELEMENTS &quot;, 42, 0, 0, 0, NULL,0}, /* FLD 91 */ {0,&quot;FILE UPDATE CODE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 92 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 93 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 94 */ {0,&quot;SERVICE INDICATOR &quot;, 7, 0, 0, 0, NULL,0}, /* FLD 95 */ {0,&quot;REPLACEMENT AMOUNTS &quot;, 42, 0, 0, 0, NULL,0}, /* FLD 96 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 97 */ {0,&quot;AMOUNT OF NET SETTLEMENT &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 98 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 99 */ {0,&quot;SETTLEMENT INSTITUTION ID &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 100 */ {0,&quot;RECVEING INSTITUTION ID &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 101 */ {0,&quot;FILENAME &quot;, 17, 0, 2, 0, NULL,0}, /* FLD 102 */ {0,&quot;ACCOUNT IDENTIFICATION1 &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 103 */ {0,&quot;ACCOUNT IDENTIFICATION2 &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 104 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 105 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 106 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 107 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 108 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 109 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 110 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 111 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 112 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 113 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 114 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 115 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 116 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 117 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 118 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 119 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 120 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 121 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 122 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 123 */ {0,&quot;NEW PIN DATA &quot;, 8, 0, 3, 2, NULL,0}, /* FLD 124 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 125 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 126 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 127 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 128 */ {0,&quot;MESSAGE AUTHENTICATION CODE FIELD &quot;, 8, 0, 0, 2, NULL,0}, }; ３、变长，定长域说明 如第二域：域名为主帐号， 数据类型为string 长度为22（是长长度不得超过此数） 是个２位变长域 由于是２位变长，在打包时需在数据域前加上数据的实际长度，如为１９位，则表示为： １９＋数据值（即前两位为长度） 如第三域：域名为处理码， 数据类型为string 长度为６ 是个定长域 必须填满６位。 附A:ISO8583各域段的说明 1，信息类型（message type）定义 位图位置：－ &nbsp;格式：定长 &nbsp;类型：N4 &nbsp;描述： &nbsp;数据包的第一部分，定义数据包的类型。 &nbsp;数据类型由数据包的发起者设定，应遵循以下要求： &nbsp;数据包开始部分必须是信息类型； &nbsp;对不支持的信息类型能给出拒绝应答。 &nbsp;0100授权交易 &nbsp;0110授权交易答复 &nbsp;0200金融交易 &nbsp;0210金融交易答复 &nbsp;0240查询交易 &nbsp;0250查询交易答复 &nbsp;0400冲正交易 &nbsp;0410冲正交易答复 &nbsp;0800管理交易 &nbsp;0810管理交易答复 &nbsp;2，位图(Bit Map) -&nbsp;基本位图和扩展位图 位图位置：1 &nbsp;格式：定长 &nbsp;类型：B16 &nbsp;描述： &nbsp;如将位图的第一位设为&#39;1&#39;，表示使用扩展位图，否则表示只使用基本位图。 &nbsp;如使用某数据域，应在位图中将相应的位设位&#39;1&#39;，如使用41域，需将位图的41位设为&#39;1&#39;。 &nbsp;选用条件：如使用65到128域，需设位图域为&#39;1&#39; &nbsp;3、Bit02主帐号(Primary Account Number) 位图位置：02 &nbsp;格式：变长,LLVAR &nbsp;类型：N..22 &nbsp;描述： &nbsp;唯一的确认一个用户交易的基本帐号。 &nbsp;由于银行电子服务系统涉及多个应用系统，而帐号长度最多为22位，故将原标准的19长度改为22位。 &nbsp; 4、Bit03&nbsp;处理代码&nbsp;（Processing Code） 位图位置：03 &nbsp;格式：定长 &nbsp;类型：N6 &nbsp;描述：用于描述交易对客户帐户造成何种影响的代码。 &nbsp;处理代码和信息码一起可唯一定义一种交易的类型。 &nbsp;处理代码由以下三部分组成： &nbsp;位置描述 &nbsp;1－2交易动作码 &nbsp;3－4付出帐户类型，用于借记类，如查询、代收费、转场交易。 &nbsp;5－6收入帐户类型，用于代收费、转帐等。 &nbsp;其中： &nbsp;ff :&nbsp;付出帐户 &nbsp;tt：&nbsp;收入帐户 &nbsp;*&nbsp;视主机而定 &nbsp;5，Bit04&nbsp;交易金额&nbsp;（Amount, Transaction） 位图位置：04 &nbsp;格式：定长 &nbsp;类型：N12 &nbsp;描述：帐户人要求交易的交易金额，不含任何处理和交易费用。 &nbsp;金额的表示和货币代码有关，应能表示相应货币的最小单位。参ISO4217有关货币代码定义。 &nbsp;如“000000000100”用于表示美元，表示1.00元；如用于表示意大利货币，则表示100里拉。 &nbsp;对于查询等交易，应设交易金额为“000000000000”。 &nbsp;6，Bit06交易日期和时间（Transmission Date and Time） 位图位置：07 &nbsp;格式：定长，MMDDhhmmss &nbsp;类型：N10 &nbsp;描述：本地交易日期和时间 &nbsp;7，Bit11系统跟踪号（Systems Trace Audit Number) 位图位置：11 &nbsp;格式：定长 &nbsp;类型：N6 &nbsp;描述：终端交易的跟踪号码。 &nbsp;交易发起终端填写，和“交易日期、时间”、信息类型等合在一起可唯一定义某一个终端的唯一一笔交易。即是说，在同一天，对一终端，同一类交易的系统跟踪号应保证不同。系统跟踪号在交易过程中不能修改。使用此域来匹配请求和通知类交易的返回。 &nbsp;应用系统使用此域来检查收到的授权、金融、自动冲正、结算、管理和网管等类交易的应答包是否是其请求包的应答。 &nbsp;系统跟踪号不用于匹配自动冲正交易，也不用于在预授权消费时匹配前面的预授权交易。参90域。 &nbsp;对于银行电子服务系统，其系统跟踪号是交易流水号。 &nbsp;8，Bit12本地交易时间（Time ,Local Transaction） 位图位置：12 &nbsp;格式：定长，hhmmss &nbsp;类型：N6 &nbsp;描述：交易在终端上发生的时间。 &nbsp;本地交易时间在交易处理过程中不能改变。在自动冲正，存贮转发时，本地交易时间不能改变。 &nbsp;9，Bit13本地交易日期(Date ,Local Transaction) 位图位置：13 &nbsp;格式：定长,MMDD &nbsp;类型：N4 &nbsp;描述：交易在终端上发生的时间。 &nbsp;本地交易时间不能改变，在自动冲正、存储转发交易时，本地交易时间也不能改变。 &nbsp;10，Bit14有效期(Date ,Expiration) &nbsp;位图位置：14 &nbsp;格式：定长,YYMM &nbsp;类型：N4 &nbsp;描述：卡的有效期，年年月月 &nbsp;由于卡类写磁格式不同，收单行可能提不出卡的有效期，授权机构从卡的二磁道中提取卡的有效期。如卡无二磁道，收单行应要求手工录入卡的有效期。 &nbsp;选用条件：100、200、400等交易如没有2、3磁道时，一定要有此域。 &nbsp;11，Bit15结算日期(Date ,Settlement) 位图位置：15 &nbsp;格式：定长，MMDD &nbsp;类型：N4 &nbsp;描述： &nbsp;银行电子服务系统和主机结算的时间，格式月月日日。 &nbsp;结帐日期前发生的交易参加当天结算。 &nbsp;在结算时，结帐日期也用于计算处理、交易费用。 &nbsp;12，Bit17获取日期(Date ,Capture) 位图位置：17 &nbsp;格式：定长，MMDD &nbsp;类型：N4 &nbsp;描述：从主机获取交易的记帐日期。通常用于主机和商户清算。 &nbsp;13，Bit18商户类型（Merchant&#39;s Type） 位图位置：18 &nbsp;格式：定长 &nbsp;类型：N4 &nbsp;描述：定义商户产品和服务类型的代码 &nbsp;商户类型用于金融、授权交易，用于指定服务点的类型。它主要有以下用途： &nbsp;决定预授权交易得到确认的最长时间； &nbsp;控制合法限额； &nbsp;为交易授权处理，控制网络操作规则； &nbsp;欺诈检测； &nbsp;用于商户分类报表； &nbsp;交易费用处理。 根据ISO8583标准，应使用相应的国家标准。 &nbsp;商户类型代码表如下： &nbsp;商户类型代码行业类型说明 &nbsp;4215邮递服务 &nbsp;4511民航 &nbsp;4722旅游 &nbsp;4782过桥费 &nbsp;4789其他运输服务 &nbsp;4614电信服务 &nbsp;5542加油站 &nbsp;5812餐馆 &nbsp;5999购物 &nbsp;6010金融机构－人工现金支付 &nbsp;6011金融机构－自动现金支付 &nbsp;6012金融机构－各类服务 &nbsp;7011酒店、旅馆 &nbsp;7299各类个人服务：洗衣、美容、 &nbsp;7399各类商业服务：停车场、租车、广告、其他服务 &nbsp;7699各类维修服务：维修、洗车、拖车 &nbsp;7996娱乐：电影、剧院、体育、游戏 &nbsp;8099医疗服务 &nbsp;8111法律服务 &nbsp;8999各类专业服务：会计、教育、装修、工程 &nbsp;选用条件：服务点终端发起的交易一定要有此域。 &nbsp;14，Bit22服务点输入方式(Point-of-Service Entry Mode) 位图位置：22 &nbsp;格式：定长 &nbsp;类型：N3 &nbsp;描述：在服务终端上定义PIN和PAN的输入方式。 &nbsp;服务点输入方式包含以下两个方面组合而成： &nbsp;位置描述 &nbsp;1－2在服务终端上PAN有效期输入方式 &nbsp;3－3在服务终端上PIN的输入方式 &nbsp;PAN的输入方式编码如下： &nbsp;PAN输入方式描述 &nbsp;00不知 &nbsp;01手工 &nbsp;02读磁卡 &nbsp;03条码扫描仪（BAR） &nbsp;04光学符号阅读器（OCR） &nbsp;05集成电路卡（IC卡） &nbsp;PIN的输入方式编码如下： &nbsp;PIN输入方式描述 &nbsp;0不知 &nbsp;1终端能接收PIN &nbsp;2终端不能接收PIN &nbsp;选用条件：服务点终端发起的交易一定要有此域。 &nbsp;15，Bit25服务点类型代码(Point-of-Service Condition Code) &nbsp;位图位置：25 &nbsp;格式：定长 &nbsp;类型：N2 &nbsp;描述：定义交易发生的服务点类型 &nbsp;用法说明：下面是CYBERBANK支持的服务点条件代码。 &nbsp;服务点条件代码服务点终端类型 &nbsp;2自动柜员机（ATM） &nbsp;10银行终端（10） &nbsp;14POS &nbsp;20电话银行 &nbsp;16，Bit32收单机构标识码(Acquirer institution Identification) 位图位置：32 &nbsp;格式：LLVAR &nbsp;类型：N..11 &nbsp;描述：在金融交易中此域表示交易发生的银行机构的标识码 &nbsp;应答数据包必须和请求数据包此域相同。 &nbsp;17,Bit3向前机构标识码(Forwarding Institution Identification Code) 位图位置：33 &nbsp;格式：LLVAR &nbsp;类型：N..11 &nbsp;描述：在金融交易中此域表示帐户所在的银行机构的标识码 &nbsp;在网管交易800/810中，本域含有交易发起机构的代码。 &nbsp;应答数据包必须和请求数据包此域相同。 &nbsp;18，Bit35二磁道数据(Track 2 Data) 位图位置：35 &nbsp;格式：LLVAR &nbsp;类型：Z..37 &nbsp;描述：写在卡二磁道的数据。数据组成遵循ISO7811－1985标准，数据中包含域分隔符，但不包含卡启始、结束符、LRC等。 &nbsp;收卡行应检测卡的二磁道是否符合国际标准。 &nbsp;为支持国际交换收单行应将二磁道中的分隔符换为“＝”。除此外不能对二磁道数据进行任何修改，如修改PAN的校验字、有效期、服务码等。 &nbsp;19，Bit36三磁道数据(Track 3 Data) 位图位置：36 &nbsp;格式：LLLVAR &nbsp;类型：Z...104 &nbsp;描述：写在卡三磁道的数据。数据应组成遵循ISO4909标准，数据中包含域分隔符，但不包含卡启始、结束符、LRC等。 &nbsp;注意：长度说明为3位数字长。 &nbsp;20，Bit37检索索引号(Retrieval Reference Number) 位图位置：37 &nbsp;格式：定长 &nbsp;类型：AN12 &nbsp;描述：检索索引号用来在任何时间标识一个金融、授权、自动冲正交易。 &nbsp;检索索引号不要求打印在持卡人的帐单上。它的主要目的是在收单行和授权行之间定义一个数据项用于跟踪和检索交易。授权机构可以将检索索引号打印在客户的对帐单上。 &nbsp;检索索引号由收单行分配。 &nbsp;选用条件：可包含在收单机构的交易请求中。如在交易请求中有，则应答数据中一定应原样返回。 &nbsp;21，Bit38授权码(Authorization Identification) 位图位置：38 &nbsp;格式：定长 &nbsp;类型：AN6 &nbsp;描述：交易授权机构返回的返回代码。 &nbsp;授权码用于在服务点终端上信用卡授权； &nbsp;授权机构按网络操作规定，可选使用本域。 &nbsp;22，Bit39返回码(Response Code) 位图位置：39 &nbsp;格式：定长 &nbsp;类型：AN2 &nbsp;描述：对一交易定义其处理结果的编码。 &nbsp;返回码用于说明授权机构对金融（授权）交易的处理状态；也用来指明自动冲正交易的冲正原因；还用来指出目标主机已接收到文件修改、结算、管理、网管等交易请求。 &nbsp;返回码应尽可能准确，应尽可能描述清楚所遇到的问题和状态。网络交换主机、收单行主机有可能会按不同的返回码收取不同的交易处理费用，并执行不同的处理过程。 &nbsp; 23，Bit41收卡单位终端标识码(Card Acceptor Terminal Identification) 位图位置：41 格式：定长 类型：ANS8 描述：定义在收单单位中定义一个服务终端的标识码，在同一商户中服务终端标识码应唯一。 24，Bit42收卡商户定义码(Card Acceptor Identification Code) 位图位置：42 格式：定长 类型：ANS15 描述：在本地和网络中定义交易单位（商户）的编码。 25，Bit43收卡商户位置(Card Acceptor Location) 位图位置：43 格式：定长 类型：ANS40 描述：在本地和网络中定义收卡单位（商户）的国家、省。城市等。 选用条件：如对外卡网络，一定要包含此域。 26，Bit44附加返回数据(Additional ResponseData) 位图位置：44 格式：LLVAR 类型：ANS..25 描述：在金融（授权）交易中授权机构返回的其他信息。 27，Bit48附加数据-私用(Additional Data-Private) 位图位置：48 格式：LLLVAR 类型：ANS...999 描述：银行电子服务系统使用此域作以下用途： 存放批量查询的返回数据 其格式与输出格式表对应 28，Bit49交易货币代码(Currency Code,Transaction) 位图位置：49 格式：定长 类型：AN3 描述：按ISO4217定义的交易货币代码，用来表示“交易金额”（field04）所用的货币种类。 交易货币代码是指在收单单位进行交易所用的交易种类。 29，Bit50结算货币代码(Currency Code,Settlement) 位图位置：50 格式：定长 类型：AN3 描述：按ISO4217定义的结算货币代码，用来表示结算金额、结算处理费、结算交易费等所用的货币种类。 结算货币代码是指在进行结算和清算过程中所用的货币种类。 30，Bit52用户密码(PIN)数据(PIN Data) 位图位置：52 格式：定长 类型：B16 描述：用户在服务终端上交易用于识别用户合法性的一些数字。 PIN在分行主机用分行主机密钥按ANSIX9.8标准加密，形成密文块。 选用条件：如果在终端上输入了密码，就需要此域。 31，Bit53密码相关控制信息(Security Related Control) 位图位置：53 格式：定长 类型：AN16 描述：本域提供有关密码块的附加信息，用于指出用于PIN计算的PIN key，用于MAC计算的MAC key。 本域格式如下表所示： 0－1格式代码2N“20” 2－3PIN加密算法2N“01”：DES 4－5密文块格式2N“01”:ANSI 6PIN密钥索引1N‘1’或‘2’ 7MAC密钥索引1N‘1’或‘2’ 8－11MAC检查数据4B 12－15填充4N 在BOC信用卡网络中PIN和MAC各使用两个密钥---&#39;1&#39;号和&#39;2&#39;密钥，交易中计算PIN和MAC时只能各用某一个KEY，同时需将所用的KEY索引号填写此域。 选用条件：如果有PIN域或MAC域，一定需有此域。 32，Bit54附加金额(Additional Amounts) 位图位置：54 格式：LLLVAR 类型：ANS...120 描述：此域由授权行主机将客户的余额返回给收单终端，以显示或打印在客户回单上。 在此域中最多可有6个余额返回，每个余额返回格式如下： 位置描述 0－1处理码3－4或5－6位定义的帐号类型 2－3金额类型：01－帐户金额 02－可用金额 03－拥有金额 04－应付金额 40－可用取款限额 56－可用转帐限额 4－6金额的货币代码 7‘D’－借记金额，’C’－贷记金额 8－19余额数目 六个余额中必须返回可用余额，在ATM、POS上显示可用余额 33，Bit64信息确认码(MAC) 位图位置：64 格式：定长 类型：B16 描述：数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改。 MAC的计算参ANSIX.99,(最后八字节未满八位者左补零，右补零？) 为提高效率，在发送者和接收者之间，只有以下一些重要的域参加MAC的计算。数据包中如果存在以下数据域，它们将参加MAC的计算。 位图域名 &nbsp;2基本帐号 &nbsp;3处理代码 &nbsp;4交易金额 &nbsp;11系统跟踪号 &nbsp;12本地交易时间 &nbsp;13本地交易日期 &nbsp;32收单机构代码 &nbsp;38授权码 &nbsp;39返回码 &nbsp;41收单终端代码 &nbsp;49交易货币代码 &nbsp;95替换金额 选用条件：只使用了1－64域的数据包使用此域。 34，Bit70管理信息码(System Management Indormation Code) 位图位置：70 格式：定长 类型：N3 描述： 用于定义和维护银行电子服务系统内部通讯网络状态和应用工作状态。 网络管理信息代码用于管理清算日期&quot;cutoff&quot;，通讯&quot;sign on/sign off&quot;，&quot;key exchange&quot;等。 支持以下一些网络管理信息码 NMIC网络管理信息码动作 001签到(Sign on) &nbsp;002签退(Sign off) &nbsp;101交换密钥(Key exchange) &nbsp;201结帐日期切换(Cutoff) &nbsp;202结帐日期切换完成 &nbsp;301测试(Echo test) 35，Bit74贷记交易笔数(Transaction Number) 位图位置：74 格式：定长 类型：N10 描述：贷记金融交易总的成功交易次数 CYBERBANK软件在收到如下一个处理代码时会增加贷记交易次数。 交易码交易服务 00贷记，购物与服务 01贷记，取现 02贷记，调整(客户调整) 36，Bit75贷记自动冲正交易笔数(Credits,Reversal Number) 位图位置：75 格式：定长 类型：N10 描述：贷记收单行自动冲正、“ChargeBack&quot;等交易总的交易次数 CYBERBANK软件在收到如下一个处理代码时会增加贷记自动冲正交易笔数 交易码交易服务 20贷记，退货 21贷记，存款 22贷记，调整（客户修改） 37，Bit76借记交易笔数(Debits,Number) 位图位置：76 格式：定长 类型：N10 描述：借记金融交易总的成功交易次数 CYBERBANK软件在收到如下一个处理代码时会增加借记交易次数。 交易码交易服务 00借记，购物与服务 01借记，取现 02借记，调整(客户调整) 38，Bit77借记自动冲正交易笔数(Debits,Reversal Number) 位图位置：77 格式：定长 类型：N10 描述：借记收单行自动冲正、“ChargeBack&quot;等交易总的交易次数 CYBERBANK软件在收到如下一个处理代码时会增加借记重发交易次数，并在清算表报中反映。 交易码交易服务 20借记(!!!)，退货 21借记，存款 22借记，调整（客户修改） 39，Bit78转帐交易笔数(Transfers,Number) 位图位置：78 格式：定长 类型：N10 描述：转帐的交易总次数。 系统在收到如下一个处理代码的金融交易时会增加转帐交易的次数。 交易码交易服务 40客户相关帐户间转帐 40，Bit79转帐自动冲正交易笔数(Transfers,Reversal Number) 位图位置：79 格式：定长 类型：N10 描述：转帐的自动冲正交易总次数。 系统在收到如下一个处理代码的自动冲正交易时会增加转帐自动冲正交易的次数。 交易码交易服务 40客户相关帐户间转帐 41，Bit80查询交易笔数(Inquiries,Number) 位图位置：80 格式：定长 类型：N10 描述：成功的查询交易次数。 系统软件在收到如下一个处理代码时会增加查询交易次数。 交易码交易服务 30查询可用金额 42，Bit81授权交易笔数(Authorization,Number) 位图位置：81 格式：定长 类型：N10 描述：成功的授权交易总额 在收到一个授权交易时系统将授权交易笔数加一。 43，Bit83贷记交易费金额(Credits,Transaction FeeAmount) 位图位置：83 格式：定长 类型：N12 描述：净交易费用，如交易金额为正。 44，Bit85借记交易费金额(Debits,Transaction FeeAmount) 位图位置：85 格式：定长 类型：N12 描述：净交易费用，如交易金额为负。 45，Bit86贷记交易金额(Credits,Amount) 位图位置：86 格式：定长 类型：N16 描述：贷记金融交易总的交易金额，不含任何费用。 系统在收到如下一个处理代码时会增加贷记交易金额，并在清算表报中反映。 交易码交易服务 20贷记，退货 21贷记，存款 22贷记，调整（客户修改） 46，Bit87贷记自动冲正金额(Credits,Reversal Amount) 位图位置：87 格式：定长 类型：N16 描述：信用卡自动冲正交易的总金额，不含任何费用。 47，Bit88借记交易金额(Debits,Amount) 位图位置：88 格式：定长 类型：N16 描述：借记金融交易总的交易金额，不含任何费用。 系统在收到如下一个处理代码时会增加借记交易金额，并在清算表报中反映。 交易码交易服务 00借记，购物与服务 01借记，取现 02借记，调整(客户调整) 48，Bit89借记自动冲正交易金额(Debits,Reversal Amount) 位图位置：89 格式：定长 类型：N16 描述：借记自动冲正交易的总金额，不含任何费用。 49，Bit90原交易的数据元素(Original Data Elements) 位图位置：90 格式：定长 类型：N42 描述：存放原交易的一些数据，用于修改或自动冲正。 数据由以下五部分组成： 位置描述 1－4信息类型码 设为原交易的信息类型代码 5－10系统跟踪号 原交易系统跟踪号 11－20交易日期和时间 原交易的交易日期和时间 21－31原收单机构 原交易的收单机构 不足11位的机构代码，左补‘0’ 32－42原向前机构 原交易的收单机构 不足11位的机构代码，左补‘0’ 50，Bit91文件修改编码(File Update Code) 位图位置：91 格式：定长 类型：AN1 描述：用此域指示某文件怎样维护。 CYBERBANK支持以下一些修改代码： 1增加记录 2改变记录 3删除记录 5查询 7增加文件 选用条件： 51，Bit94服务指示码(Service Indicator) 位图位置：94 格式：定长 类型：AN7 描述：指示文件修改服务。 选用条件： 52，Bit95代替金额(Replacement Amounts) 位图位置：95 格式：定长 类型：N42!!! 描述：客户修改或部分取消已完成的交易，最后实际发生的交易金额， 交易的原交易金额存放在90域。 本域由以下4部分组成 Sub-ElementAmountAttribute 交易实际金额N12 结算实际金额N12 实际交易费用X＋N8 实际结算费用X＋N8 53，Bit97净结算金额(Net Settlement Amount) 位图位置：97 格式：定长 类型：X+N16 描述：此域为净结帐金额。 502交易中用于发送当天的净结算金额 例：“C0000000020000000”，表示贷方（&#39;＋&#39;？）200000.00元。 “D0000000020000000”，表示借方（&#39;－&#39;？）200000.00元。 54，Bit99结算机构码(Settlement Institution Identification) 位图位置：99 格式：LLVAR 类型：N..11 描述：此域存放接收清算信息的机构代码。 返回数据包此域必须和请求数据包一致。 55，Bit100接收机构码（Receiving Institution Identification) 位图位置：100 格式：LLVAR 类型：N..11 描述：金融交易此域存放授权机构代码。 网管类交易，800/820交易，此域存放请求的目的机构代码。 返回数据包此域必须和请求数据包一致。 56，Bit101文件名(FileName) 位图位置：101 格式：LLVAR 类型：ANS..17 描述：发送机构设置的文件名。 57，Bit102帐号1(Account Identification1) 位图位置：102 格式：LLVAR 类型：ANS..28 描述：一个特定的客户帐号。帐号1用来描述受借记、转出、支付等交易影响的帐户。 选用条件：转帐时使用。 58，Bit103帐号2(Account Identiication2) 位图位置：103 格式：LLVAR 类型：ANS..28 描述：交易的补充信息，如：第二货币号、利率代码、起止日期等。 定义如下表 0000000000000000000000000000000000000000000000000 位置长度描述 00－2122帐户 22－276发卡机构号 如果此域存在，将按此机构代码作为路由信息。 选用条件：机构间转帐时使用。 60，Bit123新密码数据(New PIN Data) 位图位置：123 格式：LLLVAR 类型：B...16 描述：修改密码交易时存放新密码。 格式参考52域 选用条件：修改密码交易时必须有此域。 61，Bit128信息确认码(MAC) 位图位置：128 格式：定长 类型：B16 描述：数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改。 MAC的计算参ANSIX.99 为提高效率，在发送者和接收者之间，只有以下一些重要的域参加MAC的计算。数据包中如果存在以下数据域，它们将参加MAC的计算。 位图域名 &nbsp;2基本帐号 &nbsp;3处理代码 &nbsp;4交易金额 &nbsp;11系统跟踪号 &nbsp;12本地交易时间 &nbsp;13本地交易日期 &nbsp;32收单机构代码 &nbsp;38授权码 &nbsp;39返回码 &nbsp;41收单终端代码 &nbsp;49交易货币代码 &nbsp;95替换金额 选用条件：使用65－128数据域的数据包需使用此域。 阅读更多" />
<link rel="canonical" href="https://mlh.app/2016/07/18/1efd69449b81337a980a267acad954a1.html" />
<meta property="og:url" content="https://mlh.app/2016/07/18/1efd69449b81337a980a267acad954a1.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-07-18T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"ISO8583包（简称8583包）是一个国际标准的包格式，最多由128个字段域组成，每个域都有统一的规定，并有定长与变长之分。 &nbsp;&nbsp;&nbsp;&nbsp;8583包前面一段为位图，用来确定包的字段域组成情况。 &nbsp;&nbsp;&nbsp;&nbsp;其中位图是8583包的灵魂，它是打包解包确定字段域的关键，&nbsp;而了解每个字段域的属性则是填写数据的基础。 1、位图描述如下：&nbsp; 位图位置：1 &nbsp;格式：定长 &nbsp;类型：B16（二进制16位，16*8=128bit） &nbsp;描述： &nbsp;&nbsp;&nbsp;&nbsp;如将位图的第一位设为&#39;1&#39;，表示使用扩展位图（128个域），否则表示只使用基本位图（64个域）。 &nbsp;&nbsp;&nbsp;&nbsp;如使用某数据域，应在位图中将相应的位设位&#39;1&#39;，如使用41域，需将位图的41位设为&#39;1&#39;。 &nbsp;选用条件：如使用65到128域，需设位图域第一位为&#39;1&#39; 2、每个域的定义如下： typedef struct ISO8583 &nbsp;{ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int bit_flag; /*域数据类型0 -- string, 1 -- int, 2 -- binary*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data_name; /*域名*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length; /*数据域长度*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length_in_byte;/*实际长度（如果是变长）*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int variable_flag; /*是否变长标志0：否&nbsp;2：2位变长, 3：3位变长*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int datatyp; /*0 -- string, 1 -- int, 2 -- binary*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data; /*存放具体值*/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int attribute; /*保留*/ &nbsp;} ISO8583; ISO8583 Tbl8583[128] = { /* FLD 1 */ {0,&quot;BIT MAP,EXTENDED &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 2 */ {0,&quot;PRIMARY ACCOUNT NUMBER &quot;, 22, 0, 2, 0, NULL,0}, /* FLD 3 */ {0,&quot;PROCESSING CODE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 4 */ {0,&quot;AMOUNT, TRANSACTION &quot;, 12, 0, 0, 1, NULL,0}, /* FLD 5 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 6 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 7 */ {0,&quot;TRANSACTION DATE AND TIME &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 8 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 9 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 10 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 11 */ {0,&quot;SYSTEM TRACE AUDIT NUMBER &quot;, 6, 0, 0, 1, NULL,0}, /* FLD 12 */ {0,&quot;TIME, LOCAL TRANSACTION &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 13 */ {0,&quot;DATE, LOCAL TRANSACTION &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 14 */ {0,&quot;DATE, EXPIRATION &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 15 */ {0,&quot;DATE, SETTLEMENT &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 16 */ {0,&quot;NO USE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 17 */ {0,&quot;DATE, CAPTURE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 18 */ {0,&quot;MERCHANT&#39;S TYPE &quot;, 4, 0, 0, 0, NULL,0}, /* FLD 19 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 20 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 21 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 22 */ {0,&quot;POINT OF SERVICE ENTRY MODE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 23 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 24 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 25 */ {0,&quot;POINT OF SERVICE CONDITION CODE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 26 */ {0,&quot;NO USE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 27 */ {0,&quot;NO USE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 28 */ {0,&quot;field27 &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 29 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 30 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 31 */ {0,&quot;NO USE &quot;, 8, 0, 1, 0, NULL,0}, /* FLD 32 */ {0,&quot;ACQUIRER INSTITUTION ID. CODE &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 33 */ {0,&quot;FORWARDING INSTITUTION ID. CODE &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 34 */ {0,&quot;NO USE &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 35 */ {0,&quot;TRACK 2 DATA &quot;, 37, 0, 2, 0, NULL,0}, /* FLD 36 */ {0,&quot;TRACK 3 DATA &quot;,104, 0, 3, 0, NULL,0}, /* FLD 37 */ {0,&quot;RETRIEVAL REFERENCE NUMBER &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 38 */ {0,&quot;AUTH. IDENTIFICATION RESPONSE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 39 */ {0,&quot;RESPONSE CODE &quot;, 2, 0, 0, 0, NULL,0}, /* FLD 40 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 41 */ {0,&quot;CARD ACCEPTOR TERMINAL ID. &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 42 */ {0,&quot;CARD ACCEPTOR IDENTIFICATION CODE &quot;, 15, 0, 0, 0, NULL,0}, /* FLD 43 */ {0,&quot;CARD ACCEPTOR NAME LOCATION &quot;, 40, 0, 0, 0, NULL,0}, /* FLD 44 */ {0,&quot;ADDITIONAL RESPONSE DATA &quot;, 25, 0, 2, 0, NULL,0}, /* FLD 45 */ {0,&quot;NO USE &quot;, 76, 0, 2, 0, NULL,0}, /* FLD 46 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 47 */ {0,&quot;field47 &quot;,999, 0, 3, 0, NULL,0}, /* FLD 48 */ {0,&quot;ADDITIONAL DATA --- PRIVATE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 49 */ {0,&quot;CURRENCY CODE,TRANSACTION &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 50 */ {0,&quot;CURRENCY CODE,SETTLEMENT &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 51 */ {0,&quot;NO USE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 52 */ {0,&quot;PERSONAL IDENTIFICATION NUMBER DATA &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 53 */ {0,&quot;SECURITY RELATED CONTROL INformATION&quot;, 16, 0, 0, 0, NULL,0}, /* FLD 54 */ {0,&quot;ADDITIONAL AMOUNTS &quot;,120, 0, 3, 0, NULL,0}, /* FLD 55 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 56 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 57 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 58 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 59 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 60 */ {0,&quot;NO USE &quot;, 5, 0, 3, 0, NULL,0}, /* FLD 61 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 62 */ {0,&quot;NO USE &quot;, 11, 0, 3, 0, NULL,0}, /* FLD 63 */ {0,&quot;NO USE &quot;, 11, 0, 3, 0, NULL,0}, /* FLD 64 */ {0,&quot;MESSAGE AUTHENTICATION CODE FIELD &quot;, 8, 0, 0, 2, NULL,0}, /* FLD 65 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 66 */ {0,&quot;NO USE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 67 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 68 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 69 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 70 */ {0,&quot;SYSTEM MANAGEMENT INformATION CODE &quot;, 3, 0, 0, 0, NULL,0}, /* FLD 71 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 72 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 73 */ {0,&quot;NO USE &quot;, 6, 0, 0, 0, NULL,0}, /* FLD 74 */ {0,&quot;NUMBER OF CREDITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 75 */ {0,&quot;REVERSAL NUMBER OF CREDITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 76 */ {0,&quot;NUMBER OF DEBITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 77 */ {0,&quot;REVERSAL NUMBER OF DEBITS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 78 */ {0,&quot;NUMBER OF TRANSFER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 79 */ {0,&quot;REVERSAL NUMBER OF TRANSFER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 80 */ {0,&quot;NUMBER OF INQUIRS &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 81 */ {0,&quot;AUTHORIZATION NUMBER &quot;, 10, 0, 0, 0, NULL,0}, /* FLD 82 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 83 */ {0,&quot;CREDITS,TRANSCATION FEEAMOUNT &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 84 */ {0,&quot;NO USE &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 85 */ {0,&quot;DEBITS,TRANSCATION FEEAMOUNT &quot;, 12, 0, 0, 0, NULL,0}, /* FLD 86 */ {0,&quot;AMOUNT OF CREDITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 87 */ {0,&quot;REVERSAL AMOUNT OF CREDITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 88 */ {0,&quot;AMOUNT OF DEBITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 89 */ {0,&quot;REVERSAL AMOUNT OF DEBITS &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 90 */ {0,&quot;ORIGINAL DATA ELEMENTS &quot;, 42, 0, 0, 0, NULL,0}, /* FLD 91 */ {0,&quot;FILE UPDATE CODE &quot;, 1, 0, 0, 0, NULL,0}, /* FLD 92 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 93 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 94 */ {0,&quot;SERVICE INDICATOR &quot;, 7, 0, 0, 0, NULL,0}, /* FLD 95 */ {0,&quot;REPLACEMENT AMOUNTS &quot;, 42, 0, 0, 0, NULL,0}, /* FLD 96 */ {0,&quot;NO USE &quot;, 8, 0, 0, 0, NULL,0}, /* FLD 97 */ {0,&quot;AMOUNT OF NET SETTLEMENT &quot;, 16, 0, 0, 0, NULL,0}, /* FLD 98 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 99 */ {0,&quot;SETTLEMENT INSTITUTION ID &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 100 */ {0,&quot;RECVEING INSTITUTION ID &quot;, 11, 0, 2, 0, NULL,0}, /* FLD 101 */ {0,&quot;FILENAME &quot;, 17, 0, 2, 0, NULL,0}, /* FLD 102 */ {0,&quot;ACCOUNT IDENTIFICATION1 &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 103 */ {0,&quot;ACCOUNT IDENTIFICATION2 &quot;, 28, 0, 2, 0, NULL,0}, /* FLD 104 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 105 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 106 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 107 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 108 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 109 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 110 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 111 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 112 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 113 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 114 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 115 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 116 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 117 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 118 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 119 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 120 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 121 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 122 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 123 */ {0,&quot;NEW PIN DATA &quot;, 8, 0, 3, 2, NULL,0}, /* FLD 124 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 125 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 126 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 127 */ {0,&quot;NO USE &quot;,999, 0, 3, 0, NULL,0}, /* FLD 128 */ {0,&quot;MESSAGE AUTHENTICATION CODE FIELD &quot;, 8, 0, 0, 2, NULL,0}, }; ３、变长，定长域说明 如第二域：域名为主帐号， 数据类型为string 长度为22（是长长度不得超过此数） 是个２位变长域 由于是２位变长，在打包时需在数据域前加上数据的实际长度，如为１９位，则表示为： １９＋数据值（即前两位为长度） 如第三域：域名为处理码， 数据类型为string 长度为６ 是个定长域 必须填满６位。 附A:ISO8583各域段的说明 1，信息类型（message type）定义 位图位置：－ &nbsp;格式：定长 &nbsp;类型：N4 &nbsp;描述： &nbsp;数据包的第一部分，定义数据包的类型。 &nbsp;数据类型由数据包的发起者设定，应遵循以下要求： &nbsp;数据包开始部分必须是信息类型； &nbsp;对不支持的信息类型能给出拒绝应答。 &nbsp;0100授权交易 &nbsp;0110授权交易答复 &nbsp;0200金融交易 &nbsp;0210金融交易答复 &nbsp;0240查询交易 &nbsp;0250查询交易答复 &nbsp;0400冲正交易 &nbsp;0410冲正交易答复 &nbsp;0800管理交易 &nbsp;0810管理交易答复 &nbsp;2，位图(Bit Map) -&nbsp;基本位图和扩展位图 位图位置：1 &nbsp;格式：定长 &nbsp;类型：B16 &nbsp;描述： &nbsp;如将位图的第一位设为&#39;1&#39;，表示使用扩展位图，否则表示只使用基本位图。 &nbsp;如使用某数据域，应在位图中将相应的位设位&#39;1&#39;，如使用41域，需将位图的41位设为&#39;1&#39;。 &nbsp;选用条件：如使用65到128域，需设位图域为&#39;1&#39; &nbsp;3、Bit02主帐号(Primary Account Number) 位图位置：02 &nbsp;格式：变长,LLVAR &nbsp;类型：N..22 &nbsp;描述： &nbsp;唯一的确认一个用户交易的基本帐号。 &nbsp;由于银行电子服务系统涉及多个应用系统，而帐号长度最多为22位，故将原标准的19长度改为22位。 &nbsp; 4、Bit03&nbsp;处理代码&nbsp;（Processing Code） 位图位置：03 &nbsp;格式：定长 &nbsp;类型：N6 &nbsp;描述：用于描述交易对客户帐户造成何种影响的代码。 &nbsp;处理代码和信息码一起可唯一定义一种交易的类型。 &nbsp;处理代码由以下三部分组成： &nbsp;位置描述 &nbsp;1－2交易动作码 &nbsp;3－4付出帐户类型，用于借记类，如查询、代收费、转场交易。 &nbsp;5－6收入帐户类型，用于代收费、转帐等。 &nbsp;其中： &nbsp;ff :&nbsp;付出帐户 &nbsp;tt：&nbsp;收入帐户 &nbsp;*&nbsp;视主机而定 &nbsp;5，Bit04&nbsp;交易金额&nbsp;（Amount, Transaction） 位图位置：04 &nbsp;格式：定长 &nbsp;类型：N12 &nbsp;描述：帐户人要求交易的交易金额，不含任何处理和交易费用。 &nbsp;金额的表示和货币代码有关，应能表示相应货币的最小单位。参ISO4217有关货币代码定义。 &nbsp;如“000000000100”用于表示美元，表示1.00元；如用于表示意大利货币，则表示100里拉。 &nbsp;对于查询等交易，应设交易金额为“000000000000”。 &nbsp;6，Bit06交易日期和时间（Transmission Date and Time） 位图位置：07 &nbsp;格式：定长，MMDDhhmmss &nbsp;类型：N10 &nbsp;描述：本地交易日期和时间 &nbsp;7，Bit11系统跟踪号（Systems Trace Audit Number) 位图位置：11 &nbsp;格式：定长 &nbsp;类型：N6 &nbsp;描述：终端交易的跟踪号码。 &nbsp;交易发起终端填写，和“交易日期、时间”、信息类型等合在一起可唯一定义某一个终端的唯一一笔交易。即是说，在同一天，对一终端，同一类交易的系统跟踪号应保证不同。系统跟踪号在交易过程中不能修改。使用此域来匹配请求和通知类交易的返回。 &nbsp;应用系统使用此域来检查收到的授权、金融、自动冲正、结算、管理和网管等类交易的应答包是否是其请求包的应答。 &nbsp;系统跟踪号不用于匹配自动冲正交易，也不用于在预授权消费时匹配前面的预授权交易。参90域。 &nbsp;对于银行电子服务系统，其系统跟踪号是交易流水号。 &nbsp;8，Bit12本地交易时间（Time ,Local Transaction） 位图位置：12 &nbsp;格式：定长，hhmmss &nbsp;类型：N6 &nbsp;描述：交易在终端上发生的时间。 &nbsp;本地交易时间在交易处理过程中不能改变。在自动冲正，存贮转发时，本地交易时间不能改变。 &nbsp;9，Bit13本地交易日期(Date ,Local Transaction) 位图位置：13 &nbsp;格式：定长,MMDD &nbsp;类型：N4 &nbsp;描述：交易在终端上发生的时间。 &nbsp;本地交易时间不能改变，在自动冲正、存储转发交易时，本地交易时间也不能改变。 &nbsp;10，Bit14有效期(Date ,Expiration) &nbsp;位图位置：14 &nbsp;格式：定长,YYMM &nbsp;类型：N4 &nbsp;描述：卡的有效期，年年月月 &nbsp;由于卡类写磁格式不同，收单行可能提不出卡的有效期，授权机构从卡的二磁道中提取卡的有效期。如卡无二磁道，收单行应要求手工录入卡的有效期。 &nbsp;选用条件：100、200、400等交易如没有2、3磁道时，一定要有此域。 &nbsp;11，Bit15结算日期(Date ,Settlement) 位图位置：15 &nbsp;格式：定长，MMDD &nbsp;类型：N4 &nbsp;描述： &nbsp;银行电子服务系统和主机结算的时间，格式月月日日。 &nbsp;结帐日期前发生的交易参加当天结算。 &nbsp;在结算时，结帐日期也用于计算处理、交易费用。 &nbsp;12，Bit17获取日期(Date ,Capture) 位图位置：17 &nbsp;格式：定长，MMDD &nbsp;类型：N4 &nbsp;描述：从主机获取交易的记帐日期。通常用于主机和商户清算。 &nbsp;13，Bit18商户类型（Merchant&#39;s Type） 位图位置：18 &nbsp;格式：定长 &nbsp;类型：N4 &nbsp;描述：定义商户产品和服务类型的代码 &nbsp;商户类型用于金融、授权交易，用于指定服务点的类型。它主要有以下用途： &nbsp;决定预授权交易得到确认的最长时间； &nbsp;控制合法限额； &nbsp;为交易授权处理，控制网络操作规则； &nbsp;欺诈检测； &nbsp;用于商户分类报表； &nbsp;交易费用处理。 根据ISO8583标准，应使用相应的国家标准。 &nbsp;商户类型代码表如下： &nbsp;商户类型代码行业类型说明 &nbsp;4215邮递服务 &nbsp;4511民航 &nbsp;4722旅游 &nbsp;4782过桥费 &nbsp;4789其他运输服务 &nbsp;4614电信服务 &nbsp;5542加油站 &nbsp;5812餐馆 &nbsp;5999购物 &nbsp;6010金融机构－人工现金支付 &nbsp;6011金融机构－自动现金支付 &nbsp;6012金融机构－各类服务 &nbsp;7011酒店、旅馆 &nbsp;7299各类个人服务：洗衣、美容、 &nbsp;7399各类商业服务：停车场、租车、广告、其他服务 &nbsp;7699各类维修服务：维修、洗车、拖车 &nbsp;7996娱乐：电影、剧院、体育、游戏 &nbsp;8099医疗服务 &nbsp;8111法律服务 &nbsp;8999各类专业服务：会计、教育、装修、工程 &nbsp;选用条件：服务点终端发起的交易一定要有此域。 &nbsp;14，Bit22服务点输入方式(Point-of-Service Entry Mode) 位图位置：22 &nbsp;格式：定长 &nbsp;类型：N3 &nbsp;描述：在服务终端上定义PIN和PAN的输入方式。 &nbsp;服务点输入方式包含以下两个方面组合而成： &nbsp;位置描述 &nbsp;1－2在服务终端上PAN有效期输入方式 &nbsp;3－3在服务终端上PIN的输入方式 &nbsp;PAN的输入方式编码如下： &nbsp;PAN输入方式描述 &nbsp;00不知 &nbsp;01手工 &nbsp;02读磁卡 &nbsp;03条码扫描仪（BAR） &nbsp;04光学符号阅读器（OCR） &nbsp;05集成电路卡（IC卡） &nbsp;PIN的输入方式编码如下： &nbsp;PIN输入方式描述 &nbsp;0不知 &nbsp;1终端能接收PIN &nbsp;2终端不能接收PIN &nbsp;选用条件：服务点终端发起的交易一定要有此域。 &nbsp;15，Bit25服务点类型代码(Point-of-Service Condition Code) &nbsp;位图位置：25 &nbsp;格式：定长 &nbsp;类型：N2 &nbsp;描述：定义交易发生的服务点类型 &nbsp;用法说明：下面是CYBERBANK支持的服务点条件代码。 &nbsp;服务点条件代码服务点终端类型 &nbsp;2自动柜员机（ATM） &nbsp;10银行终端（10） &nbsp;14POS &nbsp;20电话银行 &nbsp;16，Bit32收单机构标识码(Acquirer institution Identification) 位图位置：32 &nbsp;格式：LLVAR &nbsp;类型：N..11 &nbsp;描述：在金融交易中此域表示交易发生的银行机构的标识码 &nbsp;应答数据包必须和请求数据包此域相同。 &nbsp;17,Bit3向前机构标识码(Forwarding Institution Identification Code) 位图位置：33 &nbsp;格式：LLVAR &nbsp;类型：N..11 &nbsp;描述：在金融交易中此域表示帐户所在的银行机构的标识码 &nbsp;在网管交易800/810中，本域含有交易发起机构的代码。 &nbsp;应答数据包必须和请求数据包此域相同。 &nbsp;18，Bit35二磁道数据(Track 2 Data) 位图位置：35 &nbsp;格式：LLVAR &nbsp;类型：Z..37 &nbsp;描述：写在卡二磁道的数据。数据组成遵循ISO7811－1985标准，数据中包含域分隔符，但不包含卡启始、结束符、LRC等。 &nbsp;收卡行应检测卡的二磁道是否符合国际标准。 &nbsp;为支持国际交换收单行应将二磁道中的分隔符换为“＝”。除此外不能对二磁道数据进行任何修改，如修改PAN的校验字、有效期、服务码等。 &nbsp;19，Bit36三磁道数据(Track 3 Data) 位图位置：36 &nbsp;格式：LLLVAR &nbsp;类型：Z...104 &nbsp;描述：写在卡三磁道的数据。数据应组成遵循ISO4909标准，数据中包含域分隔符，但不包含卡启始、结束符、LRC等。 &nbsp;注意：长度说明为3位数字长。 &nbsp;20，Bit37检索索引号(Retrieval Reference Number) 位图位置：37 &nbsp;格式：定长 &nbsp;类型：AN12 &nbsp;描述：检索索引号用来在任何时间标识一个金融、授权、自动冲正交易。 &nbsp;检索索引号不要求打印在持卡人的帐单上。它的主要目的是在收单行和授权行之间定义一个数据项用于跟踪和检索交易。授权机构可以将检索索引号打印在客户的对帐单上。 &nbsp;检索索引号由收单行分配。 &nbsp;选用条件：可包含在收单机构的交易请求中。如在交易请求中有，则应答数据中一定应原样返回。 &nbsp;21，Bit38授权码(Authorization Identification) 位图位置：38 &nbsp;格式：定长 &nbsp;类型：AN6 &nbsp;描述：交易授权机构返回的返回代码。 &nbsp;授权码用于在服务点终端上信用卡授权； &nbsp;授权机构按网络操作规定，可选使用本域。 &nbsp;22，Bit39返回码(Response Code) 位图位置：39 &nbsp;格式：定长 &nbsp;类型：AN2 &nbsp;描述：对一交易定义其处理结果的编码。 &nbsp;返回码用于说明授权机构对金融（授权）交易的处理状态；也用来指明自动冲正交易的冲正原因；还用来指出目标主机已接收到文件修改、结算、管理、网管等交易请求。 &nbsp;返回码应尽可能准确，应尽可能描述清楚所遇到的问题和状态。网络交换主机、收单行主机有可能会按不同的返回码收取不同的交易处理费用，并执行不同的处理过程。 &nbsp; 23，Bit41收卡单位终端标识码(Card Acceptor Terminal Identification) 位图位置：41 格式：定长 类型：ANS8 描述：定义在收单单位中定义一个服务终端的标识码，在同一商户中服务终端标识码应唯一。 24，Bit42收卡商户定义码(Card Acceptor Identification Code) 位图位置：42 格式：定长 类型：ANS15 描述：在本地和网络中定义交易单位（商户）的编码。 25，Bit43收卡商户位置(Card Acceptor Location) 位图位置：43 格式：定长 类型：ANS40 描述：在本地和网络中定义收卡单位（商户）的国家、省。城市等。 选用条件：如对外卡网络，一定要包含此域。 26，Bit44附加返回数据(Additional ResponseData) 位图位置：44 格式：LLVAR 类型：ANS..25 描述：在金融（授权）交易中授权机构返回的其他信息。 27，Bit48附加数据-私用(Additional Data-Private) 位图位置：48 格式：LLLVAR 类型：ANS...999 描述：银行电子服务系统使用此域作以下用途： 存放批量查询的返回数据 其格式与输出格式表对应 28，Bit49交易货币代码(Currency Code,Transaction) 位图位置：49 格式：定长 类型：AN3 描述：按ISO4217定义的交易货币代码，用来表示“交易金额”（field04）所用的货币种类。 交易货币代码是指在收单单位进行交易所用的交易种类。 29，Bit50结算货币代码(Currency Code,Settlement) 位图位置：50 格式：定长 类型：AN3 描述：按ISO4217定义的结算货币代码，用来表示结算金额、结算处理费、结算交易费等所用的货币种类。 结算货币代码是指在进行结算和清算过程中所用的货币种类。 30，Bit52用户密码(PIN)数据(PIN Data) 位图位置：52 格式：定长 类型：B16 描述：用户在服务终端上交易用于识别用户合法性的一些数字。 PIN在分行主机用分行主机密钥按ANSIX9.8标准加密，形成密文块。 选用条件：如果在终端上输入了密码，就需要此域。 31，Bit53密码相关控制信息(Security Related Control) 位图位置：53 格式：定长 类型：AN16 描述：本域提供有关密码块的附加信息，用于指出用于PIN计算的PIN key，用于MAC计算的MAC key。 本域格式如下表所示： 0－1格式代码2N“20” 2－3PIN加密算法2N“01”：DES 4－5密文块格式2N“01”:ANSI 6PIN密钥索引1N‘1’或‘2’ 7MAC密钥索引1N‘1’或‘2’ 8－11MAC检查数据4B 12－15填充4N 在BOC信用卡网络中PIN和MAC各使用两个密钥---&#39;1&#39;号和&#39;2&#39;密钥，交易中计算PIN和MAC时只能各用某一个KEY，同时需将所用的KEY索引号填写此域。 选用条件：如果有PIN域或MAC域，一定需有此域。 32，Bit54附加金额(Additional Amounts) 位图位置：54 格式：LLLVAR 类型：ANS...120 描述：此域由授权行主机将客户的余额返回给收单终端，以显示或打印在客户回单上。 在此域中最多可有6个余额返回，每个余额返回格式如下： 位置描述 0－1处理码3－4或5－6位定义的帐号类型 2－3金额类型：01－帐户金额 02－可用金额 03－拥有金额 04－应付金额 40－可用取款限额 56－可用转帐限额 4－6金额的货币代码 7‘D’－借记金额，’C’－贷记金额 8－19余额数目 六个余额中必须返回可用余额，在ATM、POS上显示可用余额 33，Bit64信息确认码(MAC) 位图位置：64 格式：定长 类型：B16 描述：数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改。 MAC的计算参ANSIX.99,(最后八字节未满八位者左补零，右补零？) 为提高效率，在发送者和接收者之间，只有以下一些重要的域参加MAC的计算。数据包中如果存在以下数据域，它们将参加MAC的计算。 位图域名 &nbsp;2基本帐号 &nbsp;3处理代码 &nbsp;4交易金额 &nbsp;11系统跟踪号 &nbsp;12本地交易时间 &nbsp;13本地交易日期 &nbsp;32收单机构代码 &nbsp;38授权码 &nbsp;39返回码 &nbsp;41收单终端代码 &nbsp;49交易货币代码 &nbsp;95替换金额 选用条件：只使用了1－64域的数据包使用此域。 34，Bit70管理信息码(System Management Indormation Code) 位图位置：70 格式：定长 类型：N3 描述： 用于定义和维护银行电子服务系统内部通讯网络状态和应用工作状态。 网络管理信息代码用于管理清算日期&quot;cutoff&quot;，通讯&quot;sign on/sign off&quot;，&quot;key exchange&quot;等。 支持以下一些网络管理信息码 NMIC网络管理信息码动作 001签到(Sign on) &nbsp;002签退(Sign off) &nbsp;101交换密钥(Key exchange) &nbsp;201结帐日期切换(Cutoff) &nbsp;202结帐日期切换完成 &nbsp;301测试(Echo test) 35，Bit74贷记交易笔数(Transaction Number) 位图位置：74 格式：定长 类型：N10 描述：贷记金融交易总的成功交易次数 CYBERBANK软件在收到如下一个处理代码时会增加贷记交易次数。 交易码交易服务 00贷记，购物与服务 01贷记，取现 02贷记，调整(客户调整) 36，Bit75贷记自动冲正交易笔数(Credits,Reversal Number) 位图位置：75 格式：定长 类型：N10 描述：贷记收单行自动冲正、“ChargeBack&quot;等交易总的交易次数 CYBERBANK软件在收到如下一个处理代码时会增加贷记自动冲正交易笔数 交易码交易服务 20贷记，退货 21贷记，存款 22贷记，调整（客户修改） 37，Bit76借记交易笔数(Debits,Number) 位图位置：76 格式：定长 类型：N10 描述：借记金融交易总的成功交易次数 CYBERBANK软件在收到如下一个处理代码时会增加借记交易次数。 交易码交易服务 00借记，购物与服务 01借记，取现 02借记，调整(客户调整) 38，Bit77借记自动冲正交易笔数(Debits,Reversal Number) 位图位置：77 格式：定长 类型：N10 描述：借记收单行自动冲正、“ChargeBack&quot;等交易总的交易次数 CYBERBANK软件在收到如下一个处理代码时会增加借记重发交易次数，并在清算表报中反映。 交易码交易服务 20借记(!!!)，退货 21借记，存款 22借记，调整（客户修改） 39，Bit78转帐交易笔数(Transfers,Number) 位图位置：78 格式：定长 类型：N10 描述：转帐的交易总次数。 系统在收到如下一个处理代码的金融交易时会增加转帐交易的次数。 交易码交易服务 40客户相关帐户间转帐 40，Bit79转帐自动冲正交易笔数(Transfers,Reversal Number) 位图位置：79 格式：定长 类型：N10 描述：转帐的自动冲正交易总次数。 系统在收到如下一个处理代码的自动冲正交易时会增加转帐自动冲正交易的次数。 交易码交易服务 40客户相关帐户间转帐 41，Bit80查询交易笔数(Inquiries,Number) 位图位置：80 格式：定长 类型：N10 描述：成功的查询交易次数。 系统软件在收到如下一个处理代码时会增加查询交易次数。 交易码交易服务 30查询可用金额 42，Bit81授权交易笔数(Authorization,Number) 位图位置：81 格式：定长 类型：N10 描述：成功的授权交易总额 在收到一个授权交易时系统将授权交易笔数加一。 43，Bit83贷记交易费金额(Credits,Transaction FeeAmount) 位图位置：83 格式：定长 类型：N12 描述：净交易费用，如交易金额为正。 44，Bit85借记交易费金额(Debits,Transaction FeeAmount) 位图位置：85 格式：定长 类型：N12 描述：净交易费用，如交易金额为负。 45，Bit86贷记交易金额(Credits,Amount) 位图位置：86 格式：定长 类型：N16 描述：贷记金融交易总的交易金额，不含任何费用。 系统在收到如下一个处理代码时会增加贷记交易金额，并在清算表报中反映。 交易码交易服务 20贷记，退货 21贷记，存款 22贷记，调整（客户修改） 46，Bit87贷记自动冲正金额(Credits,Reversal Amount) 位图位置：87 格式：定长 类型：N16 描述：信用卡自动冲正交易的总金额，不含任何费用。 47，Bit88借记交易金额(Debits,Amount) 位图位置：88 格式：定长 类型：N16 描述：借记金融交易总的交易金额，不含任何费用。 系统在收到如下一个处理代码时会增加借记交易金额，并在清算表报中反映。 交易码交易服务 00借记，购物与服务 01借记，取现 02借记，调整(客户调整) 48，Bit89借记自动冲正交易金额(Debits,Reversal Amount) 位图位置：89 格式：定长 类型：N16 描述：借记自动冲正交易的总金额，不含任何费用。 49，Bit90原交易的数据元素(Original Data Elements) 位图位置：90 格式：定长 类型：N42 描述：存放原交易的一些数据，用于修改或自动冲正。 数据由以下五部分组成： 位置描述 1－4信息类型码 设为原交易的信息类型代码 5－10系统跟踪号 原交易系统跟踪号 11－20交易日期和时间 原交易的交易日期和时间 21－31原收单机构 原交易的收单机构 不足11位的机构代码，左补‘0’ 32－42原向前机构 原交易的收单机构 不足11位的机构代码，左补‘0’ 50，Bit91文件修改编码(File Update Code) 位图位置：91 格式：定长 类型：AN1 描述：用此域指示某文件怎样维护。 CYBERBANK支持以下一些修改代码： 1增加记录 2改变记录 3删除记录 5查询 7增加文件 选用条件： 51，Bit94服务指示码(Service Indicator) 位图位置：94 格式：定长 类型：AN7 描述：指示文件修改服务。 选用条件： 52，Bit95代替金额(Replacement Amounts) 位图位置：95 格式：定长 类型：N42!!! 描述：客户修改或部分取消已完成的交易，最后实际发生的交易金额， 交易的原交易金额存放在90域。 本域由以下4部分组成 Sub-ElementAmountAttribute 交易实际金额N12 结算实际金额N12 实际交易费用X＋N8 实际结算费用X＋N8 53，Bit97净结算金额(Net Settlement Amount) 位图位置：97 格式：定长 类型：X+N16 描述：此域为净结帐金额。 502交易中用于发送当天的净结算金额 例：“C0000000020000000”，表示贷方（&#39;＋&#39;？）200000.00元。 “D0000000020000000”，表示借方（&#39;－&#39;？）200000.00元。 54，Bit99结算机构码(Settlement Institution Identification) 位图位置：99 格式：LLVAR 类型：N..11 描述：此域存放接收清算信息的机构代码。 返回数据包此域必须和请求数据包一致。 55，Bit100接收机构码（Receiving Institution Identification) 位图位置：100 格式：LLVAR 类型：N..11 描述：金融交易此域存放授权机构代码。 网管类交易，800/820交易，此域存放请求的目的机构代码。 返回数据包此域必须和请求数据包一致。 56，Bit101文件名(FileName) 位图位置：101 格式：LLVAR 类型：ANS..17 描述：发送机构设置的文件名。 57，Bit102帐号1(Account Identification1) 位图位置：102 格式：LLVAR 类型：ANS..28 描述：一个特定的客户帐号。帐号1用来描述受借记、转出、支付等交易影响的帐户。 选用条件：转帐时使用。 58，Bit103帐号2(Account Identiication2) 位图位置：103 格式：LLVAR 类型：ANS..28 描述：交易的补充信息，如：第二货币号、利率代码、起止日期等。 定义如下表 0000000000000000000000000000000000000000000000000 位置长度描述 00－2122帐户 22－276发卡机构号 如果此域存在，将按此机构代码作为路由信息。 选用条件：机构间转帐时使用。 60，Bit123新密码数据(New PIN Data) 位图位置：123 格式：LLLVAR 类型：B...16 描述：修改密码交易时存放新密码。 格式参考52域 选用条件：修改密码交易时必须有此域。 61，Bit128信息确认码(MAC) 位图位置：128 格式：定长 类型：B16 描述：数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改。 MAC的计算参ANSIX.99 为提高效率，在发送者和接收者之间，只有以下一些重要的域参加MAC的计算。数据包中如果存在以下数据域，它们将参加MAC的计算。 位图域名 &nbsp;2基本帐号 &nbsp;3处理代码 &nbsp;4交易金额 &nbsp;11系统跟踪号 &nbsp;12本地交易时间 &nbsp;13本地交易日期 &nbsp;32收单机构代码 &nbsp;38授权码 &nbsp;39返回码 &nbsp;41收单终端代码 &nbsp;49交易货币代码 &nbsp;95替换金额 选用条件：使用65－128数据域的数据包需使用此域。 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2016/07/18/1efd69449b81337a980a267acad954a1.html","headline":"ISO8583报文协议详解","dateModified":"2016-07-18T00:00:00+08:00","datePublished":"2016-07-18T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2016/07/18/1efd69449b81337a980a267acad954a1.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>ISO8583报文协议详解</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p style="line-height:28px; margin:0cm 0cm 12pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246); text-indent:21pt; word-break:break-all"> <span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">ISO8583</span></span><span style="font-family:宋体; font-size:12pt">包（简称</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">8583</span></span><span style="font-family:宋体; font-size:12pt">包）是一个国际标准的包格式，最多由</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">128</span></span><span style="font-family:宋体; font-size:12pt">个字段域组成，每个域都有统一的规定，并有定长与变长之分。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;8583</span></span><span style="font-family:宋体; font-size:12pt">包前面一段为位图，用来确定包的字段域组成情况。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">其中位图是</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">8583</span></span><span style="font-family:宋体; font-size:12pt">包的灵魂，它是打包解包确定字段域的关键，</span><span style="font-size:12pt"><span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">而了解每个字段域的属性则是填写数据的基础。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <strong><span style="font-family:Times New Roman">1</span></strong></span><strong><span style="font-family:宋体; font-size:12pt">、位图描述如下：</span></strong><span style="font-family:Times New Roman">&nbsp;</span><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">1<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">B16</span></span><span style="font-family:宋体; font-size:12pt">（二进制</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">16</span></span><span style="font-family:宋体; font-size:12pt">位，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">16*8=128bit</span></span><span style="font-family:宋体; font-size:12pt">）</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">如将位图的第一位设为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">'1'</span></span><span style="font-family:宋体; font-size:12pt">，表示使用扩展位图（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">128</span></span><span style="font-family:宋体; font-size:12pt">个域），否则表示只使用基本位图（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">64</span></span><span style="font-family:宋体; font-size:12pt">个域）。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">如使用某数据域，应在位图中将相应的位设位</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">'1'</span></span><span style="font-family:宋体; font-size:12pt">，如使用</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">41</span></span><span style="font-family:宋体; font-size:12pt">域，需将位图的</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">41</span></span><span style="font-family:宋体; font-size:12pt">位设为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">'1'</span></span><span style="font-family:宋体; font-size:12pt">。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">选用条件：如使用</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">65</span></span><span style="font-family:宋体; font-size:12pt">到</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">128</span></span><span style="font-family:宋体; font-size:12pt">域，需设位图域第一位为</span><span style="font-family:Times New Roman"><span lang="EN-US" style="font-size:12pt">'1'</span><span lang="EN-US"></span></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <strong><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">2</span></span><span style="font-family:宋体; font-size:12pt">、每个域的定义如下：</span></strong><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">typedef struct ISO8583<br> &nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int bit_flag; /*</span></span><span style="font-family:宋体; font-size:12pt">域数据类型</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">0 -- string, 1 -- int, 2 -- binary*/<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data_name; /*</span></span><span style="font-family:宋体; font-size:12pt">域名</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">*/<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length; /*</span></span><span style="font-family:宋体; font-size:12pt">数据域长度</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">*/<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int length_in_byte;/*</span></span><span style="font-family:宋体; font-size:12pt">实际长度（如果是变长）</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">*/<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int variable_flag; /*</span></span><span style="font-family:宋体; font-size:12pt">是否变长标志</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">0</span></span><span style="font-family:宋体; font-size:12pt">：否</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">&nbsp;2</span></span><span style="font-family:宋体; font-size:12pt">：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">2</span></span><span style="font-family:宋体; font-size:12pt">位变长</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">, 3</span></span><span style="font-family:宋体; font-size:12pt">：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">3</span></span><span style="font-family:宋体; font-size:12pt">位变长</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">*/<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int datatyp; /*0 -- string, 1 -- int, 2 -- binary*/<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char *data; /*</span></span><span style="font-family:宋体; font-size:12pt">存放具体值</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">*/<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int attribute; /*</span></span><span style="font-family:宋体; font-size:12pt">保留</span><span style="font-family:Times New Roman"><span lang="EN-US" style="font-size:12pt">*/<br> &nbsp;} ISO8583;</span><span lang="EN-US"></span></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <span lang="EN-US"><br> <span style="font-family:Times New Roman">ISO8583 Tbl8583[128] =<br> {<br> /* FLD 1 */ {0,"BIT MAP,EXTENDED ", 8, 0, 0, 2, NULL,0},<br> /* FLD 2 */ {0,"PRIMARY ACCOUNT NUMBER ", 22, 0, 2, 0, NULL,0},<br> /* FLD 3 */ {0,"PROCESSING CODE ", 6, 0, 0, 0, NULL,0},<br> /* FLD 4 */ {0,"AMOUNT, TRANSACTION ", 12, 0, 0, 1, NULL,0},<br> /* FLD 5 */ {0,"NO USE ", 12, 0, 0, 0, NULL,0},<br> /* FLD 6 */ {0,"NO USE ", 12, 0, 0, 0, NULL,0},<br> /* FLD 7 */ {0,"TRANSACTION DATE AND TIME ", 10, 0, 0, 0, NULL,0},<br> /* FLD 8 */ {0,"NO USE ", 8, 0, 0, 0, NULL,0},<br> /* FLD 9 */ {0,"NO USE ", 8, 0, 0, 0, NULL,0},<br> /* FLD 10 */ {0,"NO USE ", 8, 0, 0, 0, NULL,0},<br> /* FLD 11 */ {0,"SYSTEM TRACE AUDIT NUMBER ", 6, 0, 0, 1, NULL,0},<br> /* FLD 12 */ {0,"TIME, LOCAL TRANSACTION ", 6, 0, 0, 0, NULL,0},<br> /* FLD 13 */ {0,"DATE, LOCAL TRANSACTION ", 4, 0, 0, 0, NULL,0},<br> /* FLD 14 */ {0,"DATE, EXPIRATION ", 4, 0, 0, 0, NULL,0},<br> /* FLD 15 */ {0,"DATE, SETTLEMENT ", 4, 0, 0, 0, NULL,0},<br> /* FLD 16 */ {0,"NO USE ", 4, 0, 0, 0, NULL,0},<br> /* FLD 17 */ {0,"DATE, CAPTURE ", 4, 0, 0, 0, NULL,0},<br> /* FLD 18 */ {0,"MERCHANT'S TYPE ", 4, 0, 0, 0, NULL,0},<br> /* FLD 19 */ {0,"NO USE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 20 */ {0,"NO USE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 21 */ {0,"NO USE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 22 */ {0,"POINT OF SERVICE ENTRY MODE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 23 */ {0,"NO USE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 24 */ {0,"NO USE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 25 */ {0,"POINT OF SERVICE CONDITION CODE ", 2, 0, 0, 0, NULL,0},<br> /* FLD 26 */ {0,"NO USE ", 2, 0, 0, 0, NULL,0},<br> /* FLD 27 */ {0,"NO USE ", 1, 0, 0, 0, NULL,0},<br> /* FLD 28 */ {0,"field27 ", 6, 0, 0, 0, NULL,0},<br> /* FLD 29 */ {0,"NO USE ", 8, 0, 1, 0, NULL,0},<br> /* FLD 30 */ {0,"NO USE ", 8, 0, 1, 0, NULL,0},<br> /* FLD 31 */ {0,"NO USE ", 8, 0, 1, 0, NULL,0},<br> /* FLD 32 */ {0,"ACQUIRER INSTITUTION ID. CODE ", 11, 0, 2, 0, NULL,0},<br> /* FLD 33 */ {0,"FORWARDING INSTITUTION ID. CODE ", 11, 0, 2, 0, NULL,0},<br> /* FLD 34 */ {0,"NO USE ", 28, 0, 2, 0, NULL,0},<br> /* FLD 35 */ {0,"TRACK 2 DATA ", 37, 0, 2, 0, NULL,0},<br> /* FLD 36 */ {0,"TRACK 3 DATA ",104, 0, 3, 0, NULL,0},<br> /* FLD 37 */ {0,"RETRIEVAL REFERENCE NUMBER ", 12, 0, 0, 0, NULL,0},<br> /* FLD 38 */ {0,"AUTH. IDENTIFICATION RESPONSE ", 6, 0, 0, 0, NULL,0},<br> /* FLD 39 */ {0,"RESPONSE CODE ", 2, 0, 0, 0, NULL,0},<br> /* FLD 40 */ {0,"NO USE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 41 */ {0,"CARD ACCEPTOR TERMINAL ID. ", 8, 0, 0, 0, NULL,0},<br> /* FLD 42 */ {0,"CARD ACCEPTOR IDENTIFICATION CODE ", 15, 0, 0, 0, NULL,0},<br> /* FLD 43 */ {0,"CARD ACCEPTOR NAME LOCATION ", 40, 0, 0, 0, NULL,0},<br> /* FLD 44 */ {0,"ADDITIONAL RESPONSE DATA ", 25, 0, 2, 0, NULL,0},<br> /* FLD 45 */ {0,"NO USE ", 76, 0, 2, 0, NULL,0},<br> /* FLD 46 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 47 */ {0,"field47 ",999, 0, 3, 0, NULL,0},<br> /* FLD 48 */ {0,"ADDITIONAL DATA --- PRIVATE ",999, 0, 3, 0, NULL,0},<br> /* FLD 49 */ {0,"CURRENCY CODE,TRANSACTION ", 3, 0, 0, 0, NULL,0},<br> /* FLD 50 */ {0,"CURRENCY CODE,SETTLEMENT ", 3, 0, 0, 0, NULL,0},<br> /* FLD 51 */ {0,"NO USE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 52 */ {0,"PERSONAL IDENTIFICATION NUMBER DATA ", 8, 0, 0, 2, NULL,0},<br> /* FLD 53 */ {0,"SECURITY RELATED CONTROL INformATION", 16, 0, 0, 0, NULL,0},<br> /* FLD 54 */ {0,"ADDITIONAL AMOUNTS ",120, 0, 3, 0, NULL,0},<br> /* FLD 55 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 56 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 57 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 58 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 59 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 60 */ {0,"NO USE ", 5, 0, 3, 0, NULL,0},<br> /* FLD 61 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 62 */ {0,"NO USE ", 11, 0, 3, 0, NULL,0},<br> /* FLD 63 */ {0,"NO USE ", 11, 0, 3, 0, NULL,0},<br> /* FLD 64 */ {0,"MESSAGE AUTHENTICATION CODE FIELD ", 8, 0, 0, 2, NULL,0},<br> /* FLD 65 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 66 */ {0,"NO USE ", 1, 0, 0, 0, NULL,0},<br> /* FLD 67 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 68 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 69 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 70 */ {0,"SYSTEM MANAGEMENT INformATION CODE ", 3, 0, 0, 0, NULL,0},<br> /* FLD 71 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 72 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 73 */ {0,"NO USE ", 6, 0, 0, 0, NULL,0},<br> /* FLD 74 */ {0,"NUMBER OF CREDITS ", 10, 0, 0, 0, NULL,0},<br> /* FLD 75 */ {0,"REVERSAL NUMBER OF CREDITS ", 10, 0, 0, 0, NULL,0},<br> /* FLD 76 */ {0,"NUMBER OF DEBITS ", 10, 0, 0, 0, NULL,0},<br> /* FLD 77 */ {0,"REVERSAL NUMBER OF DEBITS ", 10, 0, 0, 0, NULL,0},<br> /* FLD 78 */ {0,"NUMBER OF TRANSFER ", 10, 0, 0, 0, NULL,0},<br> /* FLD 79 */ {0,"REVERSAL NUMBER OF TRANSFER ", 10, 0, 0, 0, NULL,0},<br> /* FLD 80 */ {0,"NUMBER OF INQUIRS ", 10, 0, 0, 0, NULL,0},<br> /* FLD 81 */ {0,"AUTHORIZATION NUMBER ", 10, 0, 0, 0, NULL,0},<br> /* FLD 82 */ {0,"NO USE ", 12, 0, 0, 0, NULL,0},<br> /* FLD 83 */ {0,"CREDITS,TRANSCATION FEEAMOUNT ", 12, 0, 0, 0, NULL,0},<br> /* FLD 84 */ {0,"NO USE ", 12, 0, 0, 0, NULL,0},<br> /* FLD 85 */ {0,"DEBITS,TRANSCATION FEEAMOUNT ", 12, 0, 0, 0, NULL,0},<br> /* FLD 86 */ {0,"AMOUNT OF CREDITS ", 16, 0, 0, 0, NULL,0},<br> /* FLD 87 */ {0,"REVERSAL AMOUNT OF CREDITS ", 16, 0, 0, 0, NULL,0},<br> /* FLD 88 */ {0,"AMOUNT OF DEBITS ", 16, 0, 0, 0, NULL,0},<br> /* FLD 89 */ {0,"REVERSAL AMOUNT OF DEBITS ", 16, 0, 0, 0, NULL,0},<br> /* FLD 90 */ {0,"ORIGINAL DATA ELEMENTS ", 42, 0, 0, 0, NULL,0},<br> /* FLD 91 */ {0,"FILE UPDATE CODE ", 1, 0, 0, 0, NULL,0},<br> /* FLD 92 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 93 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 94 */ {0,"SERVICE INDICATOR ", 7, 0, 0, 0, NULL,0},<br> /* FLD 95 */ {0,"REPLACEMENT AMOUNTS ", 42, 0, 0, 0, NULL,0},<br> /* FLD 96 */ {0,"NO USE ", 8, 0, 0, 0, NULL,0},<br> /* FLD 97 */ {0,"AMOUNT OF NET SETTLEMENT ", 16, 0, 0, 0, NULL,0},<br> /* FLD 98 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 99 */ {0,"SETTLEMENT INSTITUTION ID ", 11, 0, 2, 0, NULL,0},<br> /* FLD 100 */ {0,"RECVEING INSTITUTION ID ", 11, 0, 2, 0, NULL,0},<br> /* FLD 101 */ {0,"FILENAME ", 17, 0, 2, 0, NULL,0},<br> /* FLD 102 */ {0,"ACCOUNT IDENTIFICATION1 ", 28, 0, 2, 0, NULL,0},<br> /* FLD 103 */ {0,"ACCOUNT IDENTIFICATION2 ", 28, 0, 2, 0, NULL,0},<br> /* FLD 104 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 105 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 106 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 107 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 108 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 109 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 110 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 111 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 112 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 113 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 114 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 115 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 116 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 117 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 118 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 119 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 120 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 121 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 122 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 123 */ {0,"NEW PIN DATA ", 8, 0, 3, 2, NULL,0},<br> /* FLD 124 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 125 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 126 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 127 */ {0,"NO USE ",999, 0, 3, 0, NULL,0},<br> /* FLD 128 */ {0,"MESSAGE AUTHENTICATION CODE FIELD ", 8, 0, 0, 2, NULL,0},<br> };</span></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <strong><span style="font-family:宋体">３、变长，定长域说明</span><span lang="EN-US"><br> </span></strong><span style="font-family:宋体">如第二域：域名为主帐号，</span><span lang="EN-US"><br> </span><span style="font-family:宋体">数据类型为</span><span lang="EN-US"><span style="font-family:Times New Roman">string<br> </span></span><span style="font-family:宋体">长度为</span><span lang="EN-US"><span style="font-family:Times New Roman">22</span></span><span style="font-family:宋体">（是长长度不得超过此数）</span><span lang="EN-US"><br> </span><span style="font-family:宋体">是个２位变长域</span><span lang="EN-US"><br> </span><span style="font-family:宋体">由于是２位变长，在打包时需在数据域前加上数据的实际长度，如为１９位，则表示为：</span><span lang="EN-US"><br> </span><span style="font-family:宋体">１９＋数据值（即前两位为长度）</span><span lang="EN-US"><br> <br> </span><span style="font-family:宋体">如第三域：域名为处理码，</span><span lang="EN-US"><br> </span><span style="font-family:宋体">数据类型为</span><span lang="EN-US"><span style="font-family:Times New Roman">string<br> </span></span><span style="font-family:宋体">长度为６</span><span lang="EN-US"><br> </span><span style="font-family:宋体">是个定长域</span><span lang="EN-US"><br> </span><span style="font-family:宋体">必须填满６位。</span><span lang="EN-US"></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <strong><span style="line-height:36px; font-family:宋体; font-size:16pt">附</span><span lang="EN-US" style="line-height:36px; font-size:16pt"><span style="font-family:Times New Roman">A:ISO8583</span></span><span style="line-height:36px; font-family:宋体; font-size:16pt">各域段的说明</span></strong><span lang="EN-US" style="font-size:12pt"><br> <strong><span style="font-family:Times New Roman">1</span></strong></span><strong><span style="font-family:宋体; font-size:12pt">，信息类型（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">message type</span></span><span style="font-family:宋体; font-size:12pt">）定义</span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：－</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N4<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">数据包的第一部分，定义数据包的类型。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">数据类型由数据包的发起者设定，应遵循以下要求：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">数据包开始部分必须是信息类型；</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">对不支持的信息类型能给出拒绝应答。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0100</span></span><span style="font-family:宋体; font-size:12pt">授权交易</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0110</span></span><span style="font-family:宋体; font-size:12pt">授权交易答复</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0200</span></span><span style="font-family:宋体; font-size:12pt">金融交易</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0210</span></span><span style="font-family:宋体; font-size:12pt">金融交易答复</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0240</span></span><span style="font-family:宋体; font-size:12pt">查询交易</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0250</span></span><span style="font-family:宋体; font-size:12pt">查询交易答复</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0400</span></span><span style="font-family:宋体; font-size:12pt">冲正交易</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0410</span></span><span style="font-family:宋体; font-size:12pt">冲正交易答复</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0800</span></span><span style="font-family:宋体; font-size:12pt">管理交易</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0810</span></span><span style="font-family:宋体; font-size:12pt">管理交易答复</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>2</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，位图</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Bit Map) -&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">基本位图和扩展位图</span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">1<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">B16<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">如将位图的第一位设为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">'1'</span></span><span style="font-family:宋体; font-size:12pt">，表示使用扩展位图，否则表示只使用基本位图。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">如使用某数据域，应在位图中将相应的位设位</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">'1'</span></span><span style="font-family:宋体; font-size:12pt">，如使用</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">41</span></span><span style="font-family:宋体; font-size:12pt">域，需将位图的</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">41</span></span><span style="font-family:宋体; font-size:12pt">位设为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">'1'</span></span><span style="font-family:宋体; font-size:12pt">。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">选用条件：如使用</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">65</span></span><span style="font-family:宋体; font-size:12pt">到</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">128</span></span><span style="font-family:宋体; font-size:12pt">域，需设位图域为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">'1'<br> <br> &nbsp;<strong>3</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">、</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit02</span></span><span style="font-family:宋体; font-size:12pt">主帐号</span></strong><span style="font-family:Times New Roman"><strong><span lang="EN-US" style="font-size:12pt">(Primary Account Number)</span></strong><span lang="EN-US"></span></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">02<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：变长</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">,LLVAR<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N..22<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">唯一的确认一个用户交易的基本帐号。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">由于银行电子服务系统涉及多个应用系统，而帐号长度最多为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">22</span></span><span style="font-family:宋体; font-size:12pt">位，故将原标准的</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">19</span></span><span style="font-family:宋体; font-size:12pt">长度改为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">22</span></span><span style="font-family:宋体; font-size:12pt">位。</span><span lang="EN-US" style="font-size:12pt"></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt 21pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">&nbsp;</span></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt 11pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <strong><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">4</span></span><span style="font-family:宋体; font-size:12pt">、</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit03&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">处理代码</span><span style="font-size:12pt"><span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Processing Code</span></span><span style="font-family:宋体; font-size:12pt">）</span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">03<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N6<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：用于描述交易对客户帐户造成何种影响的代码。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">处理代码和信息码一起可唯一定义一种交易的类型。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">处理代码由以下三部分组成：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">位置描述</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;1</span></span><span style="font-family:宋体; font-size:12pt">－</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">2</span></span><span style="font-family:宋体; font-size:12pt">交易动作码</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;3</span></span><span style="font-family:宋体; font-size:12pt">－</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">4</span></span><span style="font-family:宋体; font-size:12pt">付出帐户类型，用于借记类，如查询、代收费、转场交易。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;5</span></span><span style="font-family:宋体; font-size:12pt">－</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">6</span></span><span style="font-family:宋体; font-size:12pt">收入帐户类型，用于代收费、转帐等。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">其中：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;ff :&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">付出帐户</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;tt</span></span><span style="font-family:宋体; font-size:12pt">：</span><span style="font-size:12pt"><span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">收入帐户</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;*&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">视主机而定</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>5</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit04&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">交易金额</span><span style="font-size:12pt"><span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Amount, Transaction</span></span><span style="font-family:宋体; font-size:12pt">）</span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">04<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N12<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：帐户人要求交易的交易金额，不含任何处理和交易费用。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">金额的表示和货币代码有关，应能表示相应货币的最小单位。参</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">ISO4217</span></span><span style="font-family:宋体; font-size:12pt">有关货币代码定义。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">如</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">“000000000100”</span></span><span style="font-family:宋体; font-size:12pt">用于表示美元，表示</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">1.00</span></span><span style="font-family:宋体; font-size:12pt">元；如用于表示意大利货币，则表示</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">100</span></span><span style="font-family:宋体; font-size:12pt">里拉。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">对于查询等交易，应设交易金额为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">“000000000000”</span></span><span style="font-family:宋体; font-size:12pt">。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>6</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit06</span></span><span style="font-family:宋体; font-size:12pt">交易日期和时间（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Transmission Date and Time</span></span><span style="font-family:宋体; font-size:12pt">）</span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">07<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">MMDDhhmmss<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N10<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：本地交易日期和时间</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>7</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit11</span></span><span style="font-family:宋体; font-size:12pt">系统跟踪号（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Systems Trace Audit Number)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">11<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N6<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：终端交易的跟踪号码。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">交易发起终端填写，和</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">“</span></span><span style="font-family:宋体; font-size:12pt">交易日期、时间</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">”</span></span><span style="font-family:宋体; font-size:12pt">、信息类型等合在一起可唯一定义某一个终端的唯一一笔交易。即是说，在同一天，对一终端，同一类交易的系统跟踪号应保证不同。系统跟踪号在交易过程中不能修改。使用此域来匹配请求和通知类交易的返回。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">应用系统使用此域来检查收到的授权、金融、自动冲正、结算、管理和网管等类交易的应答包是否是其请求包的应答。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">系统跟踪号不用于匹配自动冲正交易，也不用于在预授权消费时匹配前面的预授权交易。参</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">90</span></span><span style="font-family:宋体; font-size:12pt">域。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">对于银行电子服务系统，其系统跟踪号是交易流水号。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>8</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit12</span></span><span style="font-family:宋体; font-size:12pt">本地交易时间（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Time ,Local Transaction</span></span><span style="font-family:宋体; font-size:12pt">）</span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">12<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">hhmmss<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N6<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：交易在终端上发生的时间。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">本地交易时间在交易处理过程中不能改变。在自动冲正，存贮转发时，本地交易时间不能改变。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>9</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit13</span></span><span style="font-family:宋体; font-size:12pt">本地交易日期</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Date ,Local Transaction)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">13<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">,MMDD<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N4<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：交易在终端上发生的时间。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">本地交易时间不能改变，在自动冲正、存储转发交易时，本地交易时间也不能改变。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>10</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit14</span></span><span style="font-family:宋体; font-size:12pt">有效期</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Date ,Expiration)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">14<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">,YYMM<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N4<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：卡的有效期，年年月月</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">由于卡类写磁格式不同，收单行可能提不出卡的有效期，授权机构从卡的二磁道中提取卡的有效期。如卡无二磁道，收单行应要求手工录入卡的有效期。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">选用条件：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">100</span></span><span style="font-family:宋体; font-size:12pt">、</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">200</span></span><span style="font-family:宋体; font-size:12pt">、</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">400</span></span><span style="font-family:宋体; font-size:12pt">等交易如没有</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">2</span></span><span style="font-family:宋体; font-size:12pt">、</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">3</span></span><span style="font-family:宋体; font-size:12pt">磁道时，一定要有此域。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong><u>11</u></strong></span></span><strong><u><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit15</span></span><span style="font-family:宋体; font-size:12pt">结算日期</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Date ,Settlement)</span></span></u></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">15<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">MMDD<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N4<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">银行电子服务系统和主机结算的时间，格式月月日日。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">结帐日期前发生的交易参加当天结算。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">在结算时，结帐日期也用于计算处理、交易费用。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong><u>12</u></strong></span></span><strong><u><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit17</span></span><span style="font-family:宋体; font-size:12pt">获取日期</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Date ,Capture)</span></span></u></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">17<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">MMDD<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N4<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：从主机获取交易的记帐日期。通常用于主机和商户清算。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>13</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit18</span></span><span style="font-family:宋体; font-size:12pt">商户类型（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Merchant's Type</span></span><span style="font-family:宋体; font-size:12pt">）</span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">18<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N4<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：定义商户产品和服务类型的代码</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">商户类型用于金融、授权交易，用于指定服务点的类型。它主要有以下用途：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">决定预授权交易得到确认的最长时间；</span><span lang="EN-US" style="color:blue; font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">控制合法限额；</span><span lang="EN-US" style="color:blue; font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">为交易授权处理，控制网络操作规则；</span><span lang="EN-US" style="color:blue; font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">欺诈检测；</span><span lang="EN-US" style="color:blue; font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">用于商户分类报表；</span><span lang="EN-US" style="color:blue; font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">交易费用处理。</span><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">根据</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">ISO8583</span></span><span style="font-family:宋体; font-size:12pt">标准，应使用相应的国家标准。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">商户类型代码表如下：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">商户类型代码行业类型说明</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;4215</span></span><span style="font-family:宋体; font-size:12pt">邮递服务</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;4511</span></span><span style="font-family:宋体; font-size:12pt">民航</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;4722</span></span><span style="font-family:宋体; font-size:12pt">旅游</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;4782</span></span><span style="font-family:宋体; font-size:12pt">过桥费</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;4789</span></span><span style="font-family:宋体; font-size:12pt">其他运输服务</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;4614</span></span><span style="font-family:宋体; font-size:12pt">电信服务</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;5542</span></span><span style="font-family:宋体; font-size:12pt">加油站</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;5812</span></span><span style="font-family:宋体; font-size:12pt">餐馆</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;5999</span></span><span style="font-family:宋体; font-size:12pt">购物</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;6010</span></span><span style="font-family:宋体; font-size:12pt">金融机构－人工现金支付</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;6011</span></span><span style="font-family:宋体; font-size:12pt">金融机构－自动现金支付</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;6012</span></span><span style="font-family:宋体; font-size:12pt">金融机构－各类服务</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;7011</span></span><span style="font-family:宋体; font-size:12pt">酒店、旅馆</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;7299</span></span><span style="font-family:宋体; font-size:12pt">各类个人服务：洗衣、美容、</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;7399</span></span><span style="font-family:宋体; font-size:12pt">各类商业服务：停车场、租车、广告、其他服务</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;7699</span></span><span style="font-family:宋体; font-size:12pt">各类维修服务：维修、洗车、拖车</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;7996</span></span><span style="font-family:宋体; font-size:12pt">娱乐：电影、剧院、体育、游戏</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;8099</span></span><span style="font-family:宋体; font-size:12pt">医疗服务</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;8111</span></span><span style="font-family:宋体; font-size:12pt">法律服务</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;8999</span></span><span style="font-family:宋体; font-size:12pt">各类专业服务：会计、教育、装修、工程</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">选用条件：服务点终端发起的交易一定要有此域。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>14</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit22</span></span><span style="font-family:宋体; font-size:12pt">服务点输入方式</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Point-of-Service Entry Mode)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">22<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N3<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：在服务终端上定义</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">PIN</span></span><span style="font-family:宋体; font-size:12pt">和</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">PAN</span></span><span style="font-family:宋体; font-size:12pt">的输入方式。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">服务点输入方式包含以下两个方面组合而成：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">位置描述</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;1</span></span><span style="font-family:宋体; font-size:12pt">－</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">2</span></span><span style="font-family:宋体; font-size:12pt">在服务终端上</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">PAN</span></span><span style="font-family:宋体; font-size:12pt">有效期输入方式</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;3</span></span><span style="font-family:宋体; font-size:12pt">－</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">3</span></span><span style="font-family:宋体; font-size:12pt">在服务终端上</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">PIN</span></span><span style="font-family:宋体; font-size:12pt">的输入方式</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;<span style="color:blue">PAN</span></span></span><span style="font-family:宋体; color:blue; font-size:12pt">的输入方式编码如下：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;PAN</span></span><span style="font-family:宋体; font-size:12pt">输入方式描述</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;00</span></span><span style="font-family:宋体; font-size:12pt">不知</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;01</span></span><span style="font-family:宋体; font-size:12pt">手工</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;02</span></span><span style="font-family:宋体; font-size:12pt">读磁卡</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;03</span></span><span style="font-family:宋体; font-size:12pt">条码扫描仪（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">BAR</span></span><span style="font-family:宋体; font-size:12pt">）</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;04</span></span><span style="font-family:宋体; font-size:12pt">光学符号阅读器（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">OCR</span></span><span style="font-family:宋体; font-size:12pt">）</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;05</span></span><span style="font-family:宋体; font-size:12pt">集成电路卡（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">IC</span></span><span style="font-family:宋体; font-size:12pt">卡）</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<span style="color:blue">PIN</span></span></span><span style="font-family:宋体; color:blue; font-size:12pt">的输入方式编码如下</span><span style="font-family:宋体; font-size:12pt">：</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;PIN</span></span><span style="font-family:宋体; font-size:12pt">输入方式描述</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;0</span></span><span style="font-family:宋体; font-size:12pt">不知</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;1</span></span><span style="font-family:宋体; font-size:12pt">终端能接收</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">PIN<br> &nbsp;2</span></span><span style="font-family:宋体; font-size:12pt">终端不能接收</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">PIN<br> <br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">选用条件：服务点终端发起的交易一定要有此域。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>15</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit25</span></span><span style="font-family:宋体; font-size:12pt">服务点类型代码</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Point-of-Service Condition Code)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">25<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N2<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：定义交易发生的服务点类型</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">用法说明：下面是</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">CYBERBANK</span></span><span style="font-family:宋体; font-size:12pt">支持的服务点条件代码。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">服务点条件代码服务点终端类型</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;2</span></span><span style="font-family:宋体; font-size:12pt">自动柜员机（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">ATM</span></span><span style="font-family:宋体; font-size:12pt">）</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;10</span></span><span style="font-family:宋体; font-size:12pt">银行终端（</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">10</span></span><span style="font-family:宋体; font-size:12pt">）</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;14POS<br> &nbsp;20</span></span><span style="font-family:宋体; font-size:12pt">电话银行</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong><u>16</u></strong></span></span><strong><u><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit32</span></span><span style="font-family:宋体; font-size:12pt">收单机构标识码</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Acquirer institution Identification)</span></span></u></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">32<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">LLVAR<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N..11<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：在金融交易中此域表示交易发生的银行机构的标识码</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">应答数据包必须和请求数据包此域相同。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <br> <span style="font-family:Times New Roman">&nbsp;<strong><u>17,Bit3</u></strong></span></span><strong><u><span style="font-family:宋体; font-size:12pt">向前机构标识码</span></u><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Forwarding Institution Identification Code)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">33<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">LLVAR<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">N..11<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：在金融交易中此域表示帐户所在的银行机构的标识码</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">在网管交易</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">800/810</span></span><span style="font-family:宋体; font-size:12pt">中，本域含有交易发起机构的代码。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">应答数据包必须和请求数据包此域相同。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>18</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit35</span></span><span style="font-family:宋体; font-size:12pt">二磁道数据</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Track 2 Data)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">35<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">LLVAR<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Z..37<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：写在卡二磁道的数据。数据组成遵循</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">ISO7811</span></span><span style="font-family:宋体; font-size:12pt">－</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">1985</span></span><span style="font-family:宋体; font-size:12pt">标准，数据中包含域分隔符，但不包含卡启始、结束符、</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">LRC</span></span><span style="font-family:宋体; font-size:12pt">等。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">收卡行应检测卡的二磁道是否符合国际标准。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">为支持国际交换收单行应将二磁道中的分隔符换为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">“</span></span><span style="font-family:宋体; font-size:12pt">＝</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">”</span></span><span style="font-family:宋体; font-size:12pt">。除此外不能对二磁道数据进行任何修改，如修改</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">PAN</span></span><span style="font-family:宋体; font-size:12pt">的校验字、有效期、服务码等。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>19</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit36</span></span><span style="font-family:宋体; font-size:12pt">三磁道数据</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Track 3 Data)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">36<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">LLLVAR<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Z...104<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：写在卡三磁道的数据。数据应组成遵循</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">ISO4909</span></span><span style="font-family:宋体; font-size:12pt">标准，数据中包含域分隔符，但不包含卡启始、结束符、</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">LRC</span></span><span style="font-family:宋体; font-size:12pt">等。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">注意：长度说明为</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">3</span></span><span style="font-family:宋体; font-size:12pt">位数字长。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>20</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit37</span></span><span style="font-family:宋体; font-size:12pt">检索索引号</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Retrieval Reference Number)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">37<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">AN12<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：<span style="color:blue">检索索引号用来在任何时间标识一个金融、授权、自动冲正交易。</span></span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">检索索引号不要求打印在持卡人的帐单上。它的主要目的是在收单行和授权行之间定义一个数据项用于跟踪和检索交易。授权机构可以将检索索引号打印在客户的对帐单上。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">检索索引号由收单行分配。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">选用条件：可包含在收单机构的交易请求中。如在交易请求中有，则应答数据中一定应原样返回。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>21</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit38</span></span><span style="font-family:宋体; font-size:12pt">授权码</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Authorization Identification)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">38<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">AN6<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：<span style="color:blue">交易授权机构返回的返回代码</span>。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">授权码用于在服务点终端上信用卡授权；</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">授权机构按网络操作规定，可选使用本域。</span><span lang="EN-US" style="font-size:12pt"><br> <br> <span style="font-family:Times New Roman">&nbsp;<strong>22</strong></span></span><strong><span style="font-family:宋体; font-size:12pt">，</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">Bit39</span></span><span style="font-family:宋体; font-size:12pt">返回码</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">(Response Code)</span></span></strong><span lang="EN-US" style="font-size:12pt"><br> </span><span style="font-family:宋体; font-size:12pt">位图位置：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">39<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">格式：定长</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">类型：</span><span lang="EN-US" style="font-size:12pt"><span style="font-family:Times New Roman">AN2<br> &nbsp;</span></span><span style="font-family:宋体; font-size:12pt">描述：对一交易定义其处理结果的编码。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; color:blue; font-size:12pt">返回码用于说明授权机构对金融（授权）交易的处理状态；也用来指明自动冲正交易的冲正原因；还用来指出目标主机已接收到文件修改、结算、管理、网管等交易请求</span><span style="font-family:宋体; font-size:12pt">。</span><span lang="EN-US" style="font-size:12pt"><br> <span style="font-family:Times New Roman">&nbsp;</span></span><span style="font-family:宋体; font-size:12pt">返回码应尽可能准确，应尽可能描述清楚所遇到的问题和状态。网络交换主机、收单行主机有可能会按不同的返回码收取不同的交易处理费用，并执行不同的处理过程。</span><span lang="EN-US"></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <strong><span lang="EN-US"><span style="font-family:Times New Roman">&nbsp;</span></span></strong></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <strong><span lang="EN-US"><span style="font-family:Times New Roman">23</span></span><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit41</span></span><span style="font-family:宋体">收卡单位终端标识码</span><span lang="EN-US"><span style="font-family:Times New Roman">(Card Acceptor Terminal Identification)<br> </span></span></strong><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">41<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS8<br> </span></span><span style="font-family:宋体">描述：定义在收单单位中定义一个服务终端的标识码，在同一商户中服务终端标识码应唯一。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">24</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit42</span></span><span style="font-family:宋体">收卡商户定义码</span><span lang="EN-US"><span style="font-family:Times New Roman">(Card Acceptor Identification Code)<br> </span></span></strong><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">42<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS15<br> </span></span><span style="font-family:宋体">描述：在本地和网络中定义交易单位（商户）的编码。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">25</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit43</span></span><span style="font-family:宋体">收卡商户位置</span><span lang="EN-US"><span style="font-family:Times New Roman">(Card Acceptor Location)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">43<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS40<br> </span></span><span style="font-family:宋体">描述：在本地和网络中定义收卡单位（商户）的国家、省。城市等。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">选用条件：如对外卡网络，一定要包含此域。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">26</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit44</span></span><span style="font-family:宋体">附加返回数据</span><span lang="EN-US"><span style="font-family:Times New Roman">(Additional ResponseData)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">44<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS..25<br> </span></span><span style="font-family:宋体">描述：在金融（授权）交易中授权机构返回的其他信息。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">27</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit48</span></span><span style="font-family:宋体">附加数据</span><span lang="EN-US"><span style="font-family:Times New Roman">-</span></span><span style="font-family:宋体">私用</span><span lang="EN-US"><span style="font-family:Times New Roman">(Additional Data-Private)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">48<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS...999<br> </span></span><span style="font-family:宋体">描述：银行电子服务系统使用此域作以下用途：</span><span lang="EN-US"><br> </span><span style="font-family:宋体">存放批量查询的返回数据</span><span lang="EN-US"><br> </span><span style="font-family:宋体">其格式与输出格式表对应</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">28</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit49</span></span><span style="font-family:宋体">交易货币代码</span><span lang="EN-US"><span style="font-family:Times New Roman">(Currency Code,Transaction)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">49<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">AN3<br> </span></span><span style="font-family:宋体">描述：按</span><span lang="EN-US"><span style="font-family:Times New Roman">ISO4217</span></span><span style="font-family:宋体">定义的交易货币代码，用来表示</span><span lang="EN-US"><span style="font-family:Times New Roman">“</span></span><span style="font-family:宋体">交易金额</span><span lang="EN-US"><span style="font-family:Times New Roman">”</span></span><span style="font-family:宋体">（</span><span lang="EN-US"><span style="font-family:Times New Roman">field04</span></span><span style="font-family:宋体">）所用的货币种类。</span><span lang="EN-US"><br> </span><span style="font-family:宋体; color:blue">交易货币代码是指在收单单位进行交易所用的交易种类</span><span style="font-family:宋体">。</span><span lang="EN-US"><br> <br> <span style="color:blue"><span style="font-family:Times New Roman">29</span></span></span><span style="font-family:宋体; color:blue">，</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">Bit50</span></span><span style="font-family:宋体; color:blue">结算货币代码</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(Currency Code,Settlement)</span></span><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">50<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">AN3<br> </span></span><span style="font-family:宋体">描述：按</span><span lang="EN-US"><span style="font-family:Times New Roman">ISO4217</span></span><span style="font-family:宋体">定义的结算货币代码，用来表示结算金额、结算处理费、结算交易费等所用的货币种类。</span><span lang="EN-US"><br> </span><span style="font-family:宋体; color:blue">结算货币代码是指在进行结算和清算过程中所用的货币种类</span><span style="font-family:宋体">。</span><span lang="EN-US"><br> <br> <span style="color:blue"><span style="font-family:Times New Roman">30</span></span></span><span style="font-family:宋体; color:blue">，</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">Bit52</span></span><span style="font-family:宋体; color:blue">用户密码</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(PIN)</span></span><span style="font-family:宋体; color:blue">数据</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(PIN Data)</span></span><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">52<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">B16<br> </span></span><span style="font-family:宋体">描述：用户在服务终端上交易用于识别用户合法性的一些数字。</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">PIN</span></span><span style="font-family:宋体">在分行主机用分行主机密钥按</span><span lang="EN-US"><span style="font-family:Times New Roman">ANSIX9.8</span></span><span style="font-family:宋体">标准加密，形成密文块。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">选用条件：如果在终端上输入了密码，就需要此域。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">31</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit53</span></span><span style="font-family:宋体">密码相关控制信息</span><span lang="EN-US"><span style="font-family:Times New Roman">(Security Related Control)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">53<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">AN16<br> </span></span><span style="font-family:宋体">描述：本域提供有关密码块的附加信息，用于指出用于</span><span lang="EN-US"><span style="font-family:Times New Roman">PIN</span></span><span style="font-family:宋体">计算的</span><span lang="EN-US"><span style="font-family:Times New Roman">PIN key</span></span><span style="font-family:宋体">，用于</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">计算的</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC key</span></span><span style="font-family:宋体">。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">本域格式如下表所示：</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">0</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">1</span></span><span style="font-family:宋体">格式代码</span><span lang="EN-US"><span style="font-family:Times New Roman">2N“20”<br> 2</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">3PIN</span></span><span style="font-family:宋体">加密算法</span><span lang="EN-US"><span style="font-family:Times New Roman">2N“01”</span></span><span style="font-family:宋体">：</span><span lang="EN-US"><span style="font-family:Times New Roman">DES<br> 4</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">5</span></span><span style="font-family:宋体">密文块格式</span><span lang="EN-US"><span style="font-family:Times New Roman">2N“01”:ANSI<br> 6PIN</span></span><span style="font-family:宋体">密钥索引</span><span lang="EN-US"><span style="font-family:Times New Roman">1N‘1’</span></span><span style="font-family:宋体">或</span><span lang="EN-US"><span style="font-family:Times New Roman">‘2’<br> 7MAC</span></span><span style="font-family:宋体">密钥索引</span><span lang="EN-US"><span style="font-family:Times New Roman">1N‘1’</span></span><span style="font-family:宋体">或</span><span lang="EN-US"><span style="font-family:Times New Roman">‘2’<br> 8</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">11MAC</span></span><span style="font-family:宋体">检查数据</span><span lang="EN-US"><span style="font-family:Times New Roman">4B<br> 12</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">15</span></span><span style="font-family:宋体">填充</span><span lang="EN-US"><span style="font-family:Times New Roman">4N<br> <br> </span></span><span style="font-family:宋体">在</span><span lang="EN-US"><span style="font-family:Times New Roman">BOC</span></span><span style="font-family:宋体">信用卡网络中</span><span lang="EN-US"><span style="font-family:Times New Roman">PIN</span></span><span style="font-family:宋体">和</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">各使用两个密钥</span><span lang="EN-US"><span style="font-family:Times New Roman">---'1'</span></span><span style="font-family:宋体">号和</span><span lang="EN-US"><span style="font-family:Times New Roman">'2'</span></span><span style="font-family:宋体">密钥，交易中计算</span><span lang="EN-US"><span style="font-family:Times New Roman">PIN</span></span><span style="font-family:宋体">和</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">时只能各用某一个</span><span lang="EN-US"><span style="font-family:Times New Roman">KEY</span></span><span style="font-family:宋体">，同时需将所用的</span><span lang="EN-US"><span style="font-family:Times New Roman">KEY</span></span><span style="font-family:宋体">索引号填写此域。</span><span lang="EN-US"><br> </span><span style="font-family:宋体; color:blue">选用条件：如果有</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">PIN</span></span><span style="font-family:宋体; color:blue">域或</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体; color:blue">域，一定需有此域。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">32</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit54</span></span><span style="font-family:宋体">附加金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Additional Amounts)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">54<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS...120<br> </span></span><span style="font-family:宋体">描述：此域由授权行主机将<span style="color:blue">客户的余额</span>返回给收单终端，以显示或打印在客户回单上。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">在此域中最多可有</span><span lang="EN-US"><span style="font-family:Times New Roman">6</span></span><span style="font-family:宋体">个余额返回，每个余额返回格式如下：</span><span lang="EN-US"><br> </span><span style="font-family:宋体">位置描述</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">0</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">1</span></span><span style="font-family:宋体">处理码</span><span lang="EN-US"><span style="font-family:Times New Roman">3</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">4</span></span><span style="font-family:宋体">或</span><span lang="EN-US"><span style="font-family:Times New Roman">5</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">6</span></span><span style="font-family:宋体">位定义的帐号类型</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">2</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">3</span></span><span style="font-family:宋体">金额类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">01</span></span><span style="font-family:宋体">－帐户金额</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">02</span></span><span style="font-family:宋体">－可用金额</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">03</span></span><span style="font-family:宋体">－拥有金额</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">04</span></span><span style="font-family:宋体">－应付金额</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">40</span></span><span style="font-family:宋体">－可用取款限额</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">56</span></span><span style="font-family:宋体">－可用转帐限额</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">4</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">6</span></span><span style="font-family:宋体">金额的货币代码</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">7‘D’</span></span><span style="font-family:宋体">－借记金额，</span><span lang="EN-US"><span style="font-family:Times New Roman">’C’</span></span><span style="font-family:宋体">－贷记金额</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">8</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">19</span></span><span style="font-family:宋体">余额数目</span><span lang="EN-US"><br> <br> </span><span style="font-family:宋体; color:blue">六个余额中必须返回可用余额，在</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">ATM</span></span><span style="font-family:宋体; color:blue">、</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">POS</span></span><span style="font-family:宋体; color:blue">上显示可用余额</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">33</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit64</span></span><span style="font-family:宋体">信息确认码</span><span lang="EN-US"><span style="font-family:Times New Roman">(MAC)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">64<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">B16<br> </span></span><span style="font-family:宋体">描述：<span style="color:blue">数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改</span>。</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">的计算参</span><span lang="EN-US"><span style="font-family:Times New Roman">ANSIX.99,(</span></span><span style="font-family:宋体">最后八字节未满八位者左补零，右补零？</span><span lang="EN-US"><span style="font-family:Times New Roman">)<br> </span></span><span style="font-family:宋体">为提高效率，在发送者和接收者之间，只有以下一些重要的域参加</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">的计算。数据包中如果存在以下数据域，它们将参加</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">的计算。</span><span lang="EN-US"><br> <br> </span><span style="font-family:宋体; color:blue">位图域名</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;2</span></span><span style="font-family:宋体; color:blue">基本帐号</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;3</span></span><span style="font-family:宋体; color:blue">处理代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;4</span></span><span style="font-family:宋体; color:blue">交易金额</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;11</span></span><span style="font-family:宋体; color:blue">系统跟踪号</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;12</span></span><span style="font-family:宋体; color:blue">本地交易时间</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;13</span></span><span style="font-family:宋体; color:blue">本地交易日期</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;32</span></span><span style="font-family:宋体; color:blue">收单机构代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;38</span></span><span style="font-family:宋体; color:blue">授权码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;39</span></span><span style="font-family:宋体; color:blue">返回码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;41</span></span><span style="font-family:宋体; color:blue">收单终端代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;49</span></span><span style="font-family:宋体; color:blue">交易货币代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;95</span></span><span style="font-family:宋体; color:blue">替换金额</span><span lang="EN-US"><br> </span><span style="font-family:宋体">选用条件：只使用了</span><span lang="EN-US"><span style="font-family:Times New Roman">1</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">64</span></span><span style="font-family:宋体">域的数据包使用此域。</span><span lang="EN-US"><br> <br> <br> <strong><span style="font-family:Times New Roman">34</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit70</span></span><span style="font-family:宋体">管理信息码</span><span lang="EN-US"><span style="font-family:Times New Roman">(System Management Indormation Code)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">70<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N3<br> </span></span><span style="font-family:宋体">描述：</span><span lang="EN-US"><br> <br> </span><span style="font-family:宋体">用于定义和维护银行电子服务系统内部通讯网络状态和应用工作状态。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">网络管理信息代码用于管理清算日期</span><span lang="EN-US"><span style="font-family:Times New Roman">"cutoff"</span></span><span style="font-family:宋体">，通讯</span><span lang="EN-US"><span style="font-family:Times New Roman">"sign on/sign off"</span></span><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">"key exchange"</span></span><span style="font-family:宋体">等。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">支持以下一些网络管理信息码</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">NMIC</span></span><span style="font-family:宋体">网络管理信息码动作</span><span lang="EN-US"><br> <span style="color:blue"><span style="font-family:Times New Roman">001</span></span></span><span style="font-family:宋体; color:blue">签到</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(Sign on)<br> &nbsp;002</span></span><span style="font-family:宋体; color:blue">签退</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(Sign off)<br> &nbsp;101</span></span><span style="font-family:宋体; color:blue">交换密钥</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(Key exchange)<br> &nbsp;201</span></span><span style="font-family:宋体; color:blue">结帐日期切换</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(Cutoff)<br> &nbsp;202</span></span><span style="font-family:宋体; color:blue">结帐日期切换完成</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;301</span></span><span style="font-family:宋体; color:blue">测试</span><span lang="EN-US" style="color:blue"><span style="font-family:Times New Roman">(Echo test)</span></span><span lang="EN-US"><br> <strong><br> <span style="font-family:Times New Roman">35</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit74</span></span><span style="font-family:宋体">贷记交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Transaction Number)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">74<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：贷记金融交易总的成功交易次数</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">CYBERBANK</span></span><span style="font-family:宋体">软件在收到如下一个处理代码时会增加贷记交易次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">00</span></span><span style="font-family:宋体">贷记，购物与服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">01</span></span><span style="font-family:宋体">贷记，取现</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">02</span></span><span style="font-family:宋体">贷记，调整</span><span lang="EN-US"><span style="font-family:Times New Roman">(</span></span><span style="font-family:宋体">客户调整</span><span lang="EN-US"><span style="font-family:Times New Roman">)<br> <br> <strong><u>36</u></strong></span></span><strong><u><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit75</span></span><span style="font-family:宋体">贷记自动冲正交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Credits,Reversal Number)</span></span></u></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">75<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：贷记收单行自动冲正、</span><span lang="EN-US"><span style="font-family:Times New Roman">“ChargeBack"</span></span><span style="font-family:宋体">等交易总的交易次数</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">CYBERBANK</span></span><span style="font-family:宋体">软件在收到如下一个处理代码时会增加贷记自动冲正交易笔数</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">20</span></span><span style="font-family:宋体">贷记，退货</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">21</span></span><span style="font-family:宋体">贷记，存款</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">22</span></span><span style="font-family:宋体">贷记，调整（客户修改）</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">37</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit76</span></span><span style="font-family:宋体">借记交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Debits,Number)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">76<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：借记金融交易总的成功交易次数</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">CYBERBANK</span></span><span style="font-family:宋体">软件在收到如下一个处理代码时会增加借记交易次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">00</span></span><span style="font-family:宋体">借记，购物与服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">01</span></span><span style="font-family:宋体">借记，取现</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">02</span></span><span style="font-family:宋体">借记，调整</span><span lang="EN-US"><span style="font-family:Times New Roman">(</span></span><span style="font-family:宋体">客户调整</span><span lang="EN-US"><span style="font-family:Times New Roman">)<br> <br> <strong>38</strong></span></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit77</span></span><span style="font-family:宋体">借记自动冲正交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Debits,Reversal Number)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">77<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：借记收单行自动冲正、</span><span lang="EN-US"><span style="font-family:Times New Roman">“ChargeBack"</span></span><span style="font-family:宋体">等交易总的交易次数</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">CYBERBANK</span></span><span style="font-family:宋体">软件在收到如下一个处理代码时会增加借记重发交易次数，并在清算表报中反映。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">20</span></span><span style="font-family:宋体">借记</span><span lang="EN-US"><span style="font-family:Times New Roman">(!!!)</span></span><span style="font-family:宋体">，退货</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">21</span></span><span style="font-family:宋体">借记，存款</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">22</span></span><span style="font-family:宋体">借记，调整（客户修改）</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">39</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit78</span></span><span style="font-family:宋体">转帐交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Transfers,Number)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">78<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：转帐的交易总次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">系统在收到如下一个处理代码的金融交易时会增加转帐交易的次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">40</span></span><span style="font-family:宋体">客户相关帐户间转帐</span><span lang="EN-US"><br> <br> <br> <strong><span style="font-family:Times New Roman">40</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit79</span></span><span style="font-family:宋体">转帐自动冲正交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Transfers,Reversal Number)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">79<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：转帐的自动冲正交易总次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">系统在收到如下一个处理代码的自动冲正交易时会增加转帐自动冲正交易的次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">40</span></span><span style="font-family:宋体">客户相关帐户间转帐</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">41</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit80</span></span><span style="font-family:宋体">查询交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Inquiries,Number)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">80<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：成功的查询交易次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">系统软件在收到如下一个处理代码时会增加查询交易次数。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">30</span></span><span style="font-family:宋体">查询可用金额</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">42</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit81</span></span><span style="font-family:宋体">授权交易笔数</span><span lang="EN-US"><span style="font-family:Times New Roman">(Authorization,Number)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">81<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N10<br> </span></span><span style="font-family:宋体">描述：成功的授权交易总额</span><span lang="EN-US"><br> </span><span style="font-family:宋体">在收到一个授权交易时系统将授权交易笔数加一。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">43</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit83</span></span><span style="font-family:宋体">贷记交易费金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Credits,Transaction FeeAmount)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">83<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N12<br> </span></span><span style="font-family:宋体">描述：净交易费用，如交易金额为正。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">44</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit85</span></span><span style="font-family:宋体">借记交易费金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Debits,Transaction FeeAmount)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">85<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N12<br> </span></span><span style="font-family:宋体">描述：净交易费用，如交易金额为负。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">45</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit86</span></span><span style="font-family:宋体">贷记交易金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Credits,Amount)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">86<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N16<br> </span></span><span style="font-family:宋体">描述：贷记金融交易总的交易金额，不含任何费用。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">系统在收到如下一个处理代码时会增加贷记交易金额，并在清算表报中反映。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">20</span></span><span style="font-family:宋体">贷记，退货</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">21</span></span><span style="font-family:宋体">贷记，存款</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">22</span></span><span style="font-family:宋体">贷记，调整（客户修改）</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">46</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit87</span></span><span style="font-family:宋体">贷记自动冲正金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Credits,Reversal Amount)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">87<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N16<br> </span></span><span style="font-family:宋体">描述：信用卡自动冲正交易的总金额，不含任何费用。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">47</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit88</span></span><span style="font-family:宋体">借记交易金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Debits,Amount)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">88<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N16<br> </span></span><span style="font-family:宋体">描述：借记金融交易总的交易金额，不含任何费用。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">系统在收到如下一个处理代码时会增加借记交易金额，并在清算表报中反映。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易码交易服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">00</span></span><span style="font-family:宋体">借记，购物与服务</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">01</span></span><span style="font-family:宋体">借记，取现</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">02</span></span><span style="font-family:宋体">借记，调整</span><span lang="EN-US"><span style="font-family:Times New Roman">(</span></span><span style="font-family:宋体">客户调整</span><span lang="EN-US"><span style="font-family:Times New Roman">)<br> <br> <strong>48</strong></span></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit89</span></span><span style="font-family:宋体">借记自动冲正交易金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Debits,Reversal Amount)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">89<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N16<br> </span></span><span style="font-family:宋体">描述：借记自动冲正交易的总金额，不含任何费用。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">49</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit90</span></span><span style="font-family:宋体">原交易的数据元素</span><span lang="EN-US"><span style="font-family:Times New Roman">(Original Data Elements)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">90<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N42<br> </span></span><span style="font-family:宋体">描述：存放原交易的一些数据，用于修改或自动冲正。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">数据由以下五部分组成：</span><span lang="EN-US"><br> </span><span style="font-family:宋体">位置描述</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">1</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">4</span></span><span style="font-family:宋体">信息类型码</span><span lang="EN-US"><br> </span><span style="font-family:宋体">设为原交易的信息类型代码</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">5</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">10</span></span><span style="font-family:宋体">系统跟踪号</span><span lang="EN-US"><br> </span><span style="font-family:宋体">原交易系统跟踪号</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">11</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">20</span></span><span style="font-family:宋体">交易日期和时间</span><span lang="EN-US"><br> </span><span style="font-family:宋体">原交易的交易日期和时间</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">21</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">31</span></span><span style="font-family:宋体">原收单机构</span><span lang="EN-US"><br> </span><span style="font-family:宋体">原交易的收单机构</span><span lang="EN-US"><br> </span><span style="font-family:宋体">不足</span><span lang="EN-US"><span style="font-family:Times New Roman">11</span></span><span style="font-family:宋体">位的机构代码，左补</span><span lang="EN-US"><span style="font-family:Times New Roman">‘0’<br> 32</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">42</span></span><span style="font-family:宋体">原向前机构</span><span lang="EN-US"><br> </span><span style="font-family:宋体">原交易的收单机构</span><span lang="EN-US"><br> </span><span style="font-family:宋体">不足</span><span lang="EN-US"><span style="font-family:Times New Roman">11</span></span><span style="font-family:宋体">位的机构代码，左补</span><span lang="EN-US"><span style="font-family:Times New Roman">‘0’<br> <br> <strong>50</strong></span></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit91</span></span><span style="font-family:宋体">文件修改编码</span><span lang="EN-US"><span style="font-family:Times New Roman">(File Update Code)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">91<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">AN1<br> </span></span><span style="font-family:宋体">描述：<span style="color:blue">用此域指示某文件怎样维护。</span></span><span lang="EN-US"><br> <span style="font-family:Times New Roman">CYBERBANK</span></span><span style="font-family:宋体">支持以下一些修改代码：</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">1</span></span><span style="font-family:宋体">增加记录</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">2</span></span><span style="font-family:宋体">改变记录</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">3</span></span><span style="font-family:宋体">删除记录</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">5</span></span><span style="font-family:宋体">查询</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">7</span></span><span style="font-family:宋体">增加文件</span><span lang="EN-US"><br> <br> </span><span style="font-family:宋体">选用条件：</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">51</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit94</span></span><span style="font-family:宋体">服务指示码</span><span lang="EN-US"><span style="font-family:Times New Roman">(Service Indicator)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">94<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">AN7<br> </span></span><span style="font-family:宋体">描述：指示文件修改服务。</span><span lang="EN-US"><br> <br> </span><span style="font-family:宋体">选用条件：</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">52</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit95</span></span><span style="font-family:宋体">代替金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Replacement Amounts)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">95<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N42!!!<br> </span></span><span style="font-family:宋体">描述<span style="color:blue">：客户修改或部分取消已完成的交易，最后实际发生的交易金额</span>，</span><span lang="EN-US"><br> </span><span style="font-family:宋体">交易的原交易金额存放在</span><span lang="EN-US"><span style="font-family:Times New Roman">90</span></span><span style="font-family:宋体">域。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">本域由以下</span><span lang="EN-US"><span style="font-family:Times New Roman">4</span></span><span style="font-family:宋体">部分组成</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">Sub-ElementAmountAttribute<br> </span></span><span style="font-family:宋体">交易实际金额</span><span lang="EN-US"><span style="font-family:Times New Roman">N12<br> </span></span><span style="font-family:宋体">结算实际金额</span><span lang="EN-US"><span style="font-family:Times New Roman">N12<br> </span></span><span style="font-family:宋体">实际交易费用</span><span lang="EN-US"><span style="font-family:Times New Roman">X</span></span><span style="font-family:宋体">＋</span><span lang="EN-US"><span style="font-family:Times New Roman">N8<br> </span></span><span style="font-family:宋体">实际结算费用</span><span lang="EN-US"><span style="font-family:Times New Roman">X</span></span><span style="font-family:宋体">＋</span><span lang="EN-US"><span style="font-family:Times New Roman">N8<br> <br> <strong>53</strong></span></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit97</span></span><span style="font-family:宋体">净结算金额</span><span lang="EN-US"><span style="font-family:Times New Roman">(Net Settlement Amount)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">97<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">X+N16<br> </span></span><span style="font-family:宋体">描述：此域为净结帐金额。</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">502</span></span><span style="font-family:宋体">交易中用于发送当天的净结算金额</span><span lang="EN-US"><br> </span><span style="font-family:宋体">例：</span><span lang="EN-US"><span style="font-family:Times New Roman">“C0000000020000000”</span></span><span style="font-family:宋体">，表示贷方（</span><span lang="EN-US"><span style="font-family:Times New Roman">'</span></span><span style="font-family:宋体">＋</span><span lang="EN-US"><span style="font-family:Times New Roman">'</span></span><span style="font-family:宋体">？）</span><span lang="EN-US"><span style="font-family:Times New Roman">200000.00</span></span><span style="font-family:宋体">元。</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">“D0000000020000000”</span></span><span style="font-family:宋体">，表示借方（</span><span lang="EN-US"><span style="font-family:Times New Roman">'</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">'</span></span><span style="font-family:宋体">？）</span><span lang="EN-US"><span style="font-family:Times New Roman">200000.00</span></span><span style="font-family:宋体">元。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">54</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit99</span></span><span style="font-family:宋体">结算机构码</span><span lang="EN-US"><span style="font-family:Times New Roman">(Settlement Institution Identification)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">99<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N..11<br> </span></span><span style="font-family:宋体">描述：此域存放接收清算信息的机构代码。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">返回数据包此域必须和请求数据包一致。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">55</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit100</span></span><span style="font-family:宋体">接收机构码（</span><span lang="EN-US"><span style="font-family:Times New Roman">Receiving Institution Identification)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">100<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">N..11<br> </span></span><span style="font-family:宋体">描述：<span style="color:blue">金融交易此域存放授权机构代码</span>。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">网管类交易，</span><span lang="EN-US"><span style="font-family:Times New Roman">800/820</span></span><span style="font-family:宋体">交易，此域存放请求的目的机构代码。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">返回数据包此域必须和请求数据包一致。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">56</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit101</span></span><span style="font-family:宋体">文件名</span><span lang="EN-US"><span style="font-family:Times New Roman">(FileName)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">101<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS..17<br> </span></span><span style="font-family:宋体">描述：发送机构设置的文件名。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">57</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit102</span></span><span style="font-family:宋体">帐号</span><span lang="EN-US"><span style="font-family:Times New Roman">1(Account Identification1)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">102<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS..28<br> </span></span><span style="font-family:宋体">描述：一个特定的客户帐号。帐号</span><span lang="EN-US"><span style="font-family:Times New Roman">1</span></span><span style="font-family:宋体">用来描述受借记、转出、支付等交易影响的帐户。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">选用条件：<span style="color:blue">转帐时使用</span>。</span><span lang="EN-US"><br> <br> <span style="font-family:Times New Roman">58</span></span><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit103</span></span><span style="font-family:宋体">帐号</span><span lang="EN-US"><span style="font-family:Times New Roman">2(Account Identiication2)<br> </span></span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">103<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">ANS..28<br> </span></span><span style="font-family:宋体">描述：交易的补充信息，如：第二货币号、利率代码、起止日期等。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">定义如下表</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">0000000000000000000000000000000000000000000000000<br> </span></span><span style="font-family:宋体">位置长度描述</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">00</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">2122</span></span><span style="font-family:宋体">帐户</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">22</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">276</span></span><span style="font-family:宋体">发卡机构号</span><span lang="EN-US"><br> <br> </span><span style="font-family:宋体">如果此域存在，将按此机构代码作为路由信息。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">选用条件：机构间转帐时使用。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">60</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit123</span></span><span style="font-family:宋体">新密码数据</span><span lang="EN-US"><span style="font-family:Times New Roman">(New PIN Data)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">123<br> </span></span><span style="font-family:宋体">格式：</span><span lang="EN-US"><span style="font-family:Times New Roman">LLLVAR<br> </span></span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">B...16<br> </span></span><span style="font-family:宋体">描述：<span style="color:blue">修改密码交易时存放新密码</span>。</span><span lang="EN-US"><br> </span><span style="font-family:宋体">格式参考</span><span lang="EN-US"><span style="font-family:Times New Roman">52</span></span><span style="font-family:宋体">域</span><span lang="EN-US"><br> </span><span style="font-family:宋体">选用条件：修改密码交易时必须有此域。</span><span lang="EN-US"><br> <br> <strong><span style="font-family:Times New Roman">61</span></strong></span><strong><span style="font-family:宋体">，</span><span lang="EN-US"><span style="font-family:Times New Roman">Bit128</span></span><span style="font-family:宋体">信息确认码</span><span lang="EN-US"><span style="font-family:Times New Roman">(MAC)</span></span></strong><span lang="EN-US"><br> </span><span style="font-family:宋体">位图位置：</span><span lang="EN-US"><span style="font-family:Times New Roman">128<br> </span></span><span style="font-family:宋体">格式：定长</span><span lang="EN-US"><br> </span><span style="font-family:宋体">类型：</span><span lang="EN-US"><span style="font-family:Times New Roman">B16<br> </span></span><span style="font-family:宋体">描述：数据包的最后一个域，用于验证信息来源的合法性，以及数据包中数据是否未被篡改。</span><span lang="EN-US"><br> <span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">的计算参</span><span lang="EN-US"><span style="font-family:Times New Roman">ANSIX.99<br> </span></span><span style="font-family:宋体">为提高效率，在发送者和接收者之间，只有以下一些重要的域参加</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">的计算。数据包中如果存在以下数据域，它们将参加</span><span lang="EN-US"><span style="font-family:Times New Roman">MAC</span></span><span style="font-family:宋体">的计算。</span><span lang="EN-US"><br> <span style="color:blue"><br> </span></span><span style="font-family:宋体; color:blue">位图域名</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;2</span></span><span style="font-family:宋体; color:blue">基本帐号</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;3</span></span><span style="font-family:宋体; color:blue">处理代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;4</span></span><span style="font-family:宋体; color:blue">交易金额</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;11</span></span><span style="font-family:宋体; color:blue">系统跟踪号</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;12</span></span><span style="font-family:宋体; color:blue">本地交易时间</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;13</span></span><span style="font-family:宋体; color:blue">本地交易日期</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;32</span></span><span style="font-family:宋体; color:blue">收单机构代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;38</span></span><span style="font-family:宋体; color:blue">授权码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;39</span></span><span style="font-family:宋体; color:blue">返回码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;41</span></span><span style="font-family:宋体; color:blue">收单终端代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;49</span></span><span style="font-family:宋体; color:blue">交易货币代码</span><span lang="EN-US" style="color:blue"><br> <span style="font-family:Times New Roman">&nbsp;95</span></span><span style="font-family:宋体; color:blue">替换金额</span><span lang="EN-US" style="color:blue"></span></p> 
  <p style="line-height:28px; margin:0cm 0cm 0pt; padding-top:0px; padding-bottom:0px; color:rgb(76,76,76); font-family:'Hiragino Sans GB W3','Hiragino Sans GB',Arial,Helvetica,simsun,u5b8bu4f53; font-size:16px; background-color:rgb(246,246,246)"> <span lang="EN-US" style="color:blue"><br> </span><span style="font-family:宋体">选用条件：使用</span><span lang="EN-US"><span style="font-family:Times New Roman">65</span></span><span style="font-family:宋体">－</span><span lang="EN-US"><span style="font-family:Times New Roman">128</span></span><span style="font-family:宋体">数据域的数据包需使用此域。</span></p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/A123638/article/details/51940907,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/A123638/article/details/51940907,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
