<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>BlockChain技术系列(六)- 应用编程接口 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="BlockChain技术系列(六)- 应用编程接口" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="fabric的主要接口是REST API。 REST API允许应用注册用户，查询区块链，并发布交易。 CLI为了开发，同样提供有效API的子集。CLI允许开发人员能够快速测试链码或查询交易状态。 应用程序通过REST API与非验证的 peer 节点，这将需要某种形式的认证，以确保实体有适当的权限进行交互。该应用程序是负责实现合适的身份验证机制和 peer 节点随后将使用客户身份对发出消息签名。 fabric API 设计涵盖的类别如下，虽然当前版本的其中一些实现不完整。[REST API（＃62-REST的API）节将说明API当前支持。 身份 - 注册来获得或吊销一张证书 Address - 交易的源或目的 Transaction - 总账上的执行单元 Chaincode - 总账上运行的程序 Blockchain - 总账的内容 Network - 区块链 peer 网络的信息 Storage - 文件或文档的外部存储 Event Stream - 区块链上订阅/发布事件 6.1 REST Service REST服务可以（通过配置）在验证和非验证 peer 被启用，但是建议在生产环境中只启用非验证 peer 的REST服务。 func StartOpenchainRESTServer(server *oc.ServerOpenchain, devops *oc.Devops) 这个函数读取core.yamlpeer处理的配置文件中的rest.address。rest.address键定义了 peer 的HTTP REST服务默认监听的地址和端口。 假定REST服务接收来已经认证的终端用户的应用请求。 6.2 REST API 您可以通过您所选择的任何工具与REST API的工作。例如，curl命令行实用程序或一个基于浏览器的客户端，如Firefox的REST客户端或Chrome Postman。同样，可以通过[Swagger]（http://swagger.io/）直接触发REST请求。为了获得REST&nbsp;API Swagger描述，点击[这里]（https://github.com/hyperledger/fabric/blob/master/core/rest/rest_api.json）。目前可用的API总结于以下部分。 6.2.1 REST Endpoints Block GET /chain/blocks/{block-id} Blockchain GET /chain Chaincode POST /chaincode Network GET /network/peers Registrar POST /registrar GET /registrar/{enrollmentID} DELETE /registrar/{enrollmentID} GET /registrar/{enrollmentID}/ecert GET /registrar/{enrollmentID}/tcert Transactions GET /transactions/{UUID} 6.2.1.1 块API GET /chain/blocks/{block-id} 使用块API来从区块链中检索各个块的内容。返回的块信息结构是在3.2.1.1节中定义 块检索请求: GET host:port/chain/blocks/173 块检索响应: { &quot;transactions&quot;: [ { &quot;type&quot;: 3, &quot;chaincodeID&quot;: &quot;EgRteWNj&quot;, &quot;payload&quot;: &quot;Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=&quot;, &quot;uuid&quot;: &quot;f5978e82-6d8c-47d1-adec-f18b794f570e&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 206716775 }, &quot;cert&quot;: &quot;MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=&quot;, &quot;signature&quot;: &quot;MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg==&quot; } ], &quot;stateHash&quot;: &quot;7ftCvPeHIpsvSavxUoZM0u7o67MPU81ImOJIO7ZdMoH2mjnAaAAafYy9MIH3HjrWM1/Zla/Q6LsLzIjuYdYdlQ==&quot;, &quot;previousBlockHash&quot;: &quot;lT0InRg4Cvk4cKykWpCRKWDZ9YNYMzuHdUzsaeTeAcH3HdfriLEcTuxrFJ76W4jrWVvTBdI1etxuIV9AO6UF4Q==&quot;, &quot;nonHashData&quot;: { &quot;localLedgerCommitTimestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 250834782 } } } 6.2.1.2 区块链API GET /chain 使用链API来检索区块链的当前状态。返回区块链信息消息被定义如下。 message BlockchainInfo { uint64 height = 1; bytes currentBlockHash = 2; bytes previousBlockHash = 3; } height&nbsp;- 区块链中块的数量，包括创始区块 currentBlockHash&nbsp;- 当前或最后区块的哈希 previousBlockHash&nbsp;- 前一区块的哈希 区块链检索请求: GET host:port/chain 区块链检索响应: { &quot;height&quot;: 174, &quot;currentBlockHash&quot;: &quot;lIfbDax2NZMU3rG3cDR11OGicPLp1yebIkia33Zte9AnfqvffK6tsHRyKwsw0hZFZkCGIa9wHVkOGyFTcFxM5w==&quot;, &quot;previousBlockHash&quot;: &quot;Vlz6Dv5OSy0OZpJvijrU1cmY2cNS5Ar3xX5DxAi/seaHHRPdssrljDeppDLzGx6ZVyayt8Ru6jO+E68IwMrXLQ==&quot; } 6.2.1.3 链码API POST /chaincode 使用链码API来部署，调用和查询链码 部署请求需要客户端提供path参数，执行文件系统中链码的目录。部署请求的响应要么是包含成功的链码部署确认消息要么是包含失败的原因的错误。 它还含有所生成的链码的name域在消息中，这是在随后的调用和查询交易中使用的已部署链码的唯一标识。 要部署链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义。 部署请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;deploy&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;path&quot;:&quot;github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;init&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;1000&quot;, &quot;b&quot;, &quot;2000&quot;] } }, &quot;id&quot;: &quot;1&quot; } 部署响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;id&quot;: 1 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的部署请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;deploy&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;path&quot;:&quot;github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;init&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;1000&quot;, &quot;b&quot;, &quot;2000&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;1&quot; } 该调用请求要求客户端提供一个name参数，这是之前从部署交易响应得到的。调用请求的响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。 要调用链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义 调用请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;b&quot;, &quot;100&quot;] } }, &quot;id&quot;: &quot;3&quot; } 调用响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;5a4540e5-902b-422d-a6ab-e70ab36a2e6d&quot; }, &quot;id&quot;: 3 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的调用请求: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;b&quot;, &quot;100&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;3&quot; } 查询请求需要在客户端提供一个name参数，这是之前在部署交易响应中得到了。查询请求的响应取决于链码的实现。响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。在成功执行的情况下，响应将包含链码请求的状态变量的值 要查询链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义。 查询请求: POST host:port/chaincode/ { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] } }, &quot;id&quot;: &quot;5&quot; } 查询响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;-400&quot; }, &quot;id&quot;: 5 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的查询请求: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;5&quot; } 6.2.1.4 网络API 使用网络API来获取组成区块链 fabric 的 peer 节点的网络信息 /network/peers 端点返回的目标 peer 节点的所有现有的网络连接的列表。该列表包括验证和非验证 peer。peer 的列表被返回类型PeersMessage是包含PeerEndpoint的数组，在第[3.1.1]（#311-discovery-messages发现的消息）定义。 message PeersMessage { repeated PeerEndpoint peers = 1; } 网络请求: GET host:port/network/peers 网络响应: { &quot;peers&quot;: [ { &quot;ID&quot;: { &quot;name&quot;: &quot;vp1&quot; }, &quot;address&quot;: &quot;172.17.0.4:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;rUA+vX2jVCXev6JsXDNgNBMX03IV9mHRPWo6h6SI0KLMypBJLd+JoGGlqFgi+eq/&quot; }, { &quot;ID&quot;: { &quot;name&quot;: &quot;vp3&quot; }, &quot;address&quot;: &quot;172.17.0.5:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;OBduaZJ72gmM+B9wp3aErQlofE0ulQfXfTHh377ruJjOpsUn0MyvsJELUTHpAbHI&quot; }, { &quot;ID&quot;: { &quot;name&quot;: &quot;vp2&quot; }, &quot;address&quot;: &quot;172.17.0.6:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;GhtP0Y+o/XVmRNXGF6pcm9KLNTfCZp+XahTBqVRmaIumJZnBpom4ACayVbg4Q/Eb&quot; } ] } 6.2.1.5 注册API (成员服务) POST /registrar GET /registrar/{enrollmentID} DELETE /registrar/{enrollmentID} GET /registrar/{enrollmentID}/ecert GET /registrar/{enrollmentID}/tcert 使用注册API来管理的证书颁发机构（CA）的最终用户注册。这些API端点用于注册与CA用户，确定指定用户是否已注册，并从本地存储中删除任何目标用户的登录令牌，防止他们执行任何进一步的交易。注册API也用于从系统中检索用户注册和交易证书。 /registrar端点使用与CA注册用户所需的秘密payload定义如下。注册请求的响应可以是一个成功的注册的确认或包含失败的原因的错误。 message Secret { string enrollId = 1; string enrollSecret = 2; } enrollId&nbsp;- 在证书颁发机构的注册ID enrollSecret&nbsp;- 在证书颁发机构的密码 注册请求: POST host:port/registrar { &quot;enrollId&quot;: &quot;lukas&quot;, &quot;enrollSecret&quot;: &quot;NPKYL39uKbkj&quot; } 注册响应: { &quot;OK&quot;: &quot;Login successful for user &#39;lukas&#39;.&quot; } GET /registrar/{enrollmentID}端点用于确认一个给定的用户是否与CA注册如果是，确认将被反悔。否则，将导致授权错误。 注册验证请求: GET host:port/registrar/jim 注册验证返回: { &quot;OK&quot;: &quot;User jim is already logged in.&quot; } 注册验证请求: GET host:port/registrar/alex 注册验证返回: { &quot;Error&quot;: &quot;User alex must log in.&quot; } DELETE /registrar/{enrollmentID}&nbsp;端点用于删除一个目标用户的登录令牌。如果登录令牌成功删除，确认将被反悔。否则，将导致授权错误。此端点不需要payload。 删除注册请求: DELETE host:port/registrar/lukas 删除注册返回: { &quot;OK&quot;: &quot;Deleted login token and directory for user lukas.&quot; } GET /registrar/{enrollmentID}/ecert&nbsp;端点用于检索从本地存储给定用户的登记证书。如果目标用户已与CA注册，响应将包括注册证书的URL-encoded版本。如果目标用户尚未注册，将返回一个错误。如果客户希望使用检索后返回的注册证书，请记住，它必须是URL-decoded。 注册证书检索请求: GET host:port/registrar/jim/ecert 注册证书检索响应: { &quot;OK&quot;: &quot;-----BEGIN+CERTIFICATE-----%0AMIIBzTCCAVSgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwNPQkMwHhcNMTYwMTIxMDYzNjEwWhcNMTYwNDIw%0AMDYzNjEwWjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNP%0AQkMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAARSLgjGD0omuJKYrJF5ClyYb3sGEGTU%0AH1mombSAOJ6GAOKEULt4L919sbSSChs0AEvTX7UDf4KNaKTrKrqo4khCoboMg1VS%0AXVTTPrJ%2BOxSJTXFZCohVgbhWh6ZZX2tfb7%2BjUDBOMA4GA1UdDwEB%2FwQEAwIHgDAM%0ABgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwDgYG%0AUQMEBQYHAQH%2FBAE0MAoGCCqGSM49BAMDA2cAMGQCMGz2RR0NsJOhxbo0CeVts2C5%0A%2BsAkKQ7v1Llbg78A1pyC5uBmoBvSnv5Dd0w2yOmj7QIwY%2Bn5pkLiwisxWurkHfiD%0AxizmN6vWQ8uhTd3PTdJiEEckjHKiq9pwD%2FGMt%2BWjP7zF%0A-----END+CERTIFICATE-----%0A&quot; } /registrar/{enrollmentID}/tcert端点检索已与证书机关登记给定用户的交易证书。如果用户已注册，确认消息将包含URL-encoded交易证书的列表被返回。否则，将会导致一个错误。交易证书的所需数量由可选的&#39;count&#39;查询参数指定。返回交易证书的默认数量为1;500是可以与单个请求中检索证书的最大数量。如果客户端希望使用取回后的交易证书，请记住，他们必须是URL-decoded。 交易证书检索请求: GET host:port/registrar/jim/tcert 交易证书检索响应: { &quot;OK&quot;: [ &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQfwJORRED9RAsmSl%2FEowq1STBb%0A%2FoFteymZ96RUr%2BsKmF9PNrrUNvFZFhvukxZZjqhEcGiQqFyRf%2FBnVN%2BbtRzMo38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwSRWQFmErr0SmQO9AFP4GJYzQ%0APQMmcsCjKiJf%2Bw1df%2FLnXunCsCUlf%2FalIUaeSrT7MAoGCCqGSM49BAMDA0gAMEUC%0AIQC%2FnE71FBJd0hwNTLXWmlCJff4Yi0J%2BnDi%2BYnujp%2Fn9nQIgYWg0m0QFzddyJ0%2FF%0AKzIZEJlKgZTt8ZTlGg3BBrgl7qY%3D%0A-----END+CERTIFICATE-----%0A&quot; ] } 交易证书检索请求: GET host:port/registrar/jim/tcert?count=5 交易证书检索响应: { &quot;OK&quot;: [ &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot; ] } 6.2.1.6 交易API GET /transactions/{UUID} 使用交易API来从区块链中检索匹配UUID的单个交易。返回的交易消息在3.1.2.1小节定义 交易检索请求: GET host:port/transactions/f5978e82-6d8c-47d1-adec-f18b794f570e 交易检索响应: { &quot;type&quot;: 3, &quot;chaincodeID&quot;: &quot;EgRteWNj&quot;, &quot;payload&quot;: &quot;Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=&quot;, &quot;uuid&quot;: &quot;f5978e82-6d8c-47d1-adec-f18b794f570e&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 206716775 }, &quot;cert&quot;: &quot;MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=&quot;, &quot;signature&quot;: &quot;MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg==&quot; } 6.3 CLI CLI包括可用的API的一个子集，使开发人员能够快速测试和调试链码或查询交易状态。CLI由Golang实现和可在多个操作系统上操作。当前可用的CLI命令归纳在下面的部分： 6.3.1 CLI命令 To see what CLI commands are currently available in the implementation, execute the following: 要查看当前可用的CLI命令，执行如下命令 cd $GOPATH/src/github.com/hyperledger/fabic/peer ./peer 你可以获得和下面类似的响应： Usage: peer [command] Available Commands: peer Run the peer. status Status of the peer. stop Stop the peer. login Login user on CLI. vm VM functionality on the fabric. chaincode chaincode specific commands. help Help about any command Flags: -h, --help[=false]: help Use &quot;peer [command] --help&quot; for more information about a command. Some of the available command line arguments for the&nbsp;peer&nbsp;command are listed below: -c&nbsp;- 构造函数: 用来为部署触发初始化链码状态的函数 -l&nbsp;- 语言: 指定链码的实现语言，目前只支持Golang -n&nbsp;- 名字: 部署交易返回的链码的标识。在后续的调用和查询交易中必须使用 -p&nbsp;- 路径: 链码在本地文件系统中的标识。在部署交易时必须提供。 -u&nbsp;- 用户名: 调用交易的登入的用户的注册ID 上述所有命令并非完全在当前版本中实现。如下所述全面支持的命令是有助于链码的开发和调试的。 所有 peer 节点的设置都被列在core.yaml这个peer处理的配置文件中，可能通过命令行的环境变量而被修改。如，设置peer.id或&nbsp;peer.ddressAutoDetect，只需要传递CORE_PEER_ID=vp1和CORE_PEER_ADDRESSAUTODETECT=true给命令行。 6.3.1.1 peer peerCLI命令在开发和生产环境中都会执行 peer 处理。开发模式会在本地运行单个 peer 节点和本地的链码部署。这使得在链码开修改和调试代码，不需要启动一个完整的网络。在开发模式启动 peer 的一个例子： ./peer peer --peer-chaincodedev 在生产环境中启动peer进程，像下面一样修改上面的命令： ./peer peer 6.3.1.2 登录 登录的CLI命令会登入一个已经在CA注册的用户。要通过CLI登录，发出以下命令，其中username是注册用户的注册ID。 ./peer login &lt;username&gt; 下面的例子演示了用户jim登录过程。 ./peer login jim 该命令会提示输入密码，密码必须为此用户使用证书颁发机构注册登记的密码相匹配。如果输入的密码不正确的密码匹配，将导致一个错误。 22:21:31.246 [main] login -&gt; INFO 001 CLI client login... 22:21:31.247 [main] login -&gt; INFO 002 Local data store for client loginToken: /var/hyperledger/production/client/ Enter password for user &#39;jim&#39;: ************ 22:21:40.183 [main] login -&gt; INFO 003 Logging in user &#39;jim&#39; on CLI interface... 22:21:40.623 [main] login -&gt; INFO 004 Storing login token for user &#39;jim&#39;. 22:21:40.624 [main] login -&gt; INFO 005 Login successful for user &#39;jim&#39;. 您也可以与-p参数来提供用户的密码。下面是一个例子。 ./peer login jim -p 123456 6.3.1.3 链码部署 deployCLI命令为链码和接下来的部署包到验证 peer 创建 docker 镜像。如下面的例子。 ./peer chaincode deploy -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode deploy -u jim -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 6.3.1.4 链码调用 invokeCLI命令执行目标来代码中的指定函数。如下： ./peer chaincode invoke -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode invoke -u jim -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 6.3.1.5 链码查询 queryCLI命令在目标链码上触发指定的查询。返回的响应取决于链码实现。下面是一个例子。 ./peer chaincode query -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode query -u jim -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a 阅读更多" />
<meta property="og:description" content="fabric的主要接口是REST API。 REST API允许应用注册用户，查询区块链，并发布交易。 CLI为了开发，同样提供有效API的子集。CLI允许开发人员能够快速测试链码或查询交易状态。 应用程序通过REST API与非验证的 peer 节点，这将需要某种形式的认证，以确保实体有适当的权限进行交互。该应用程序是负责实现合适的身份验证机制和 peer 节点随后将使用客户身份对发出消息签名。 fabric API 设计涵盖的类别如下，虽然当前版本的其中一些实现不完整。[REST API（＃62-REST的API）节将说明API当前支持。 身份 - 注册来获得或吊销一张证书 Address - 交易的源或目的 Transaction - 总账上的执行单元 Chaincode - 总账上运行的程序 Blockchain - 总账的内容 Network - 区块链 peer 网络的信息 Storage - 文件或文档的外部存储 Event Stream - 区块链上订阅/发布事件 6.1 REST Service REST服务可以（通过配置）在验证和非验证 peer 被启用，但是建议在生产环境中只启用非验证 peer 的REST服务。 func StartOpenchainRESTServer(server *oc.ServerOpenchain, devops *oc.Devops) 这个函数读取core.yamlpeer处理的配置文件中的rest.address。rest.address键定义了 peer 的HTTP REST服务默认监听的地址和端口。 假定REST服务接收来已经认证的终端用户的应用请求。 6.2 REST API 您可以通过您所选择的任何工具与REST API的工作。例如，curl命令行实用程序或一个基于浏览器的客户端，如Firefox的REST客户端或Chrome Postman。同样，可以通过[Swagger]（http://swagger.io/）直接触发REST请求。为了获得REST&nbsp;API Swagger描述，点击[这里]（https://github.com/hyperledger/fabric/blob/master/core/rest/rest_api.json）。目前可用的API总结于以下部分。 6.2.1 REST Endpoints Block GET /chain/blocks/{block-id} Blockchain GET /chain Chaincode POST /chaincode Network GET /network/peers Registrar POST /registrar GET /registrar/{enrollmentID} DELETE /registrar/{enrollmentID} GET /registrar/{enrollmentID}/ecert GET /registrar/{enrollmentID}/tcert Transactions GET /transactions/{UUID} 6.2.1.1 块API GET /chain/blocks/{block-id} 使用块API来从区块链中检索各个块的内容。返回的块信息结构是在3.2.1.1节中定义 块检索请求: GET host:port/chain/blocks/173 块检索响应: { &quot;transactions&quot;: [ { &quot;type&quot;: 3, &quot;chaincodeID&quot;: &quot;EgRteWNj&quot;, &quot;payload&quot;: &quot;Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=&quot;, &quot;uuid&quot;: &quot;f5978e82-6d8c-47d1-adec-f18b794f570e&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 206716775 }, &quot;cert&quot;: &quot;MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=&quot;, &quot;signature&quot;: &quot;MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg==&quot; } ], &quot;stateHash&quot;: &quot;7ftCvPeHIpsvSavxUoZM0u7o67MPU81ImOJIO7ZdMoH2mjnAaAAafYy9MIH3HjrWM1/Zla/Q6LsLzIjuYdYdlQ==&quot;, &quot;previousBlockHash&quot;: &quot;lT0InRg4Cvk4cKykWpCRKWDZ9YNYMzuHdUzsaeTeAcH3HdfriLEcTuxrFJ76W4jrWVvTBdI1etxuIV9AO6UF4Q==&quot;, &quot;nonHashData&quot;: { &quot;localLedgerCommitTimestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 250834782 } } } 6.2.1.2 区块链API GET /chain 使用链API来检索区块链的当前状态。返回区块链信息消息被定义如下。 message BlockchainInfo { uint64 height = 1; bytes currentBlockHash = 2; bytes previousBlockHash = 3; } height&nbsp;- 区块链中块的数量，包括创始区块 currentBlockHash&nbsp;- 当前或最后区块的哈希 previousBlockHash&nbsp;- 前一区块的哈希 区块链检索请求: GET host:port/chain 区块链检索响应: { &quot;height&quot;: 174, &quot;currentBlockHash&quot;: &quot;lIfbDax2NZMU3rG3cDR11OGicPLp1yebIkia33Zte9AnfqvffK6tsHRyKwsw0hZFZkCGIa9wHVkOGyFTcFxM5w==&quot;, &quot;previousBlockHash&quot;: &quot;Vlz6Dv5OSy0OZpJvijrU1cmY2cNS5Ar3xX5DxAi/seaHHRPdssrljDeppDLzGx6ZVyayt8Ru6jO+E68IwMrXLQ==&quot; } 6.2.1.3 链码API POST /chaincode 使用链码API来部署，调用和查询链码 部署请求需要客户端提供path参数，执行文件系统中链码的目录。部署请求的响应要么是包含成功的链码部署确认消息要么是包含失败的原因的错误。 它还含有所生成的链码的name域在消息中，这是在随后的调用和查询交易中使用的已部署链码的唯一标识。 要部署链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义。 部署请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;deploy&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;path&quot;:&quot;github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;init&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;1000&quot;, &quot;b&quot;, &quot;2000&quot;] } }, &quot;id&quot;: &quot;1&quot; } 部署响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;id&quot;: 1 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的部署请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;deploy&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;path&quot;:&quot;github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;init&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;1000&quot;, &quot;b&quot;, &quot;2000&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;1&quot; } 该调用请求要求客户端提供一个name参数，这是之前从部署交易响应得到的。调用请求的响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。 要调用链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义 调用请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;b&quot;, &quot;100&quot;] } }, &quot;id&quot;: &quot;3&quot; } 调用响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;5a4540e5-902b-422d-a6ab-e70ab36a2e6d&quot; }, &quot;id&quot;: 3 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的调用请求: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;b&quot;, &quot;100&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;3&quot; } 查询请求需要在客户端提供一个name参数，这是之前在部署交易响应中得到了。查询请求的响应取决于链码的实现。响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。在成功执行的情况下，响应将包含链码请求的状态变量的值 要查询链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义。 查询请求: POST host:port/chaincode/ { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] } }, &quot;id&quot;: &quot;5&quot; } 查询响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;-400&quot; }, &quot;id&quot;: 5 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的查询请求: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;5&quot; } 6.2.1.4 网络API 使用网络API来获取组成区块链 fabric 的 peer 节点的网络信息 /network/peers 端点返回的目标 peer 节点的所有现有的网络连接的列表。该列表包括验证和非验证 peer。peer 的列表被返回类型PeersMessage是包含PeerEndpoint的数组，在第[3.1.1]（#311-discovery-messages发现的消息）定义。 message PeersMessage { repeated PeerEndpoint peers = 1; } 网络请求: GET host:port/network/peers 网络响应: { &quot;peers&quot;: [ { &quot;ID&quot;: { &quot;name&quot;: &quot;vp1&quot; }, &quot;address&quot;: &quot;172.17.0.4:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;rUA+vX2jVCXev6JsXDNgNBMX03IV9mHRPWo6h6SI0KLMypBJLd+JoGGlqFgi+eq/&quot; }, { &quot;ID&quot;: { &quot;name&quot;: &quot;vp3&quot; }, &quot;address&quot;: &quot;172.17.0.5:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;OBduaZJ72gmM+B9wp3aErQlofE0ulQfXfTHh377ruJjOpsUn0MyvsJELUTHpAbHI&quot; }, { &quot;ID&quot;: { &quot;name&quot;: &quot;vp2&quot; }, &quot;address&quot;: &quot;172.17.0.6:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;GhtP0Y+o/XVmRNXGF6pcm9KLNTfCZp+XahTBqVRmaIumJZnBpom4ACayVbg4Q/Eb&quot; } ] } 6.2.1.5 注册API (成员服务) POST /registrar GET /registrar/{enrollmentID} DELETE /registrar/{enrollmentID} GET /registrar/{enrollmentID}/ecert GET /registrar/{enrollmentID}/tcert 使用注册API来管理的证书颁发机构（CA）的最终用户注册。这些API端点用于注册与CA用户，确定指定用户是否已注册，并从本地存储中删除任何目标用户的登录令牌，防止他们执行任何进一步的交易。注册API也用于从系统中检索用户注册和交易证书。 /registrar端点使用与CA注册用户所需的秘密payload定义如下。注册请求的响应可以是一个成功的注册的确认或包含失败的原因的错误。 message Secret { string enrollId = 1; string enrollSecret = 2; } enrollId&nbsp;- 在证书颁发机构的注册ID enrollSecret&nbsp;- 在证书颁发机构的密码 注册请求: POST host:port/registrar { &quot;enrollId&quot;: &quot;lukas&quot;, &quot;enrollSecret&quot;: &quot;NPKYL39uKbkj&quot; } 注册响应: { &quot;OK&quot;: &quot;Login successful for user &#39;lukas&#39;.&quot; } GET /registrar/{enrollmentID}端点用于确认一个给定的用户是否与CA注册如果是，确认将被反悔。否则，将导致授权错误。 注册验证请求: GET host:port/registrar/jim 注册验证返回: { &quot;OK&quot;: &quot;User jim is already logged in.&quot; } 注册验证请求: GET host:port/registrar/alex 注册验证返回: { &quot;Error&quot;: &quot;User alex must log in.&quot; } DELETE /registrar/{enrollmentID}&nbsp;端点用于删除一个目标用户的登录令牌。如果登录令牌成功删除，确认将被反悔。否则，将导致授权错误。此端点不需要payload。 删除注册请求: DELETE host:port/registrar/lukas 删除注册返回: { &quot;OK&quot;: &quot;Deleted login token and directory for user lukas.&quot; } GET /registrar/{enrollmentID}/ecert&nbsp;端点用于检索从本地存储给定用户的登记证书。如果目标用户已与CA注册，响应将包括注册证书的URL-encoded版本。如果目标用户尚未注册，将返回一个错误。如果客户希望使用检索后返回的注册证书，请记住，它必须是URL-decoded。 注册证书检索请求: GET host:port/registrar/jim/ecert 注册证书检索响应: { &quot;OK&quot;: &quot;-----BEGIN+CERTIFICATE-----%0AMIIBzTCCAVSgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwNPQkMwHhcNMTYwMTIxMDYzNjEwWhcNMTYwNDIw%0AMDYzNjEwWjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNP%0AQkMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAARSLgjGD0omuJKYrJF5ClyYb3sGEGTU%0AH1mombSAOJ6GAOKEULt4L919sbSSChs0AEvTX7UDf4KNaKTrKrqo4khCoboMg1VS%0AXVTTPrJ%2BOxSJTXFZCohVgbhWh6ZZX2tfb7%2BjUDBOMA4GA1UdDwEB%2FwQEAwIHgDAM%0ABgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwDgYG%0AUQMEBQYHAQH%2FBAE0MAoGCCqGSM49BAMDA2cAMGQCMGz2RR0NsJOhxbo0CeVts2C5%0A%2BsAkKQ7v1Llbg78A1pyC5uBmoBvSnv5Dd0w2yOmj7QIwY%2Bn5pkLiwisxWurkHfiD%0AxizmN6vWQ8uhTd3PTdJiEEckjHKiq9pwD%2FGMt%2BWjP7zF%0A-----END+CERTIFICATE-----%0A&quot; } /registrar/{enrollmentID}/tcert端点检索已与证书机关登记给定用户的交易证书。如果用户已注册，确认消息将包含URL-encoded交易证书的列表被返回。否则，将会导致一个错误。交易证书的所需数量由可选的&#39;count&#39;查询参数指定。返回交易证书的默认数量为1;500是可以与单个请求中检索证书的最大数量。如果客户端希望使用取回后的交易证书，请记住，他们必须是URL-decoded。 交易证书检索请求: GET host:port/registrar/jim/tcert 交易证书检索响应: { &quot;OK&quot;: [ &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQfwJORRED9RAsmSl%2FEowq1STBb%0A%2FoFteymZ96RUr%2BsKmF9PNrrUNvFZFhvukxZZjqhEcGiQqFyRf%2FBnVN%2BbtRzMo38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwSRWQFmErr0SmQO9AFP4GJYzQ%0APQMmcsCjKiJf%2Bw1df%2FLnXunCsCUlf%2FalIUaeSrT7MAoGCCqGSM49BAMDA0gAMEUC%0AIQC%2FnE71FBJd0hwNTLXWmlCJff4Yi0J%2BnDi%2BYnujp%2Fn9nQIgYWg0m0QFzddyJ0%2FF%0AKzIZEJlKgZTt8ZTlGg3BBrgl7qY%3D%0A-----END+CERTIFICATE-----%0A&quot; ] } 交易证书检索请求: GET host:port/registrar/jim/tcert?count=5 交易证书检索响应: { &quot;OK&quot;: [ &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot; ] } 6.2.1.6 交易API GET /transactions/{UUID} 使用交易API来从区块链中检索匹配UUID的单个交易。返回的交易消息在3.1.2.1小节定义 交易检索请求: GET host:port/transactions/f5978e82-6d8c-47d1-adec-f18b794f570e 交易检索响应: { &quot;type&quot;: 3, &quot;chaincodeID&quot;: &quot;EgRteWNj&quot;, &quot;payload&quot;: &quot;Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=&quot;, &quot;uuid&quot;: &quot;f5978e82-6d8c-47d1-adec-f18b794f570e&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 206716775 }, &quot;cert&quot;: &quot;MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=&quot;, &quot;signature&quot;: &quot;MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg==&quot; } 6.3 CLI CLI包括可用的API的一个子集，使开发人员能够快速测试和调试链码或查询交易状态。CLI由Golang实现和可在多个操作系统上操作。当前可用的CLI命令归纳在下面的部分： 6.3.1 CLI命令 To see what CLI commands are currently available in the implementation, execute the following: 要查看当前可用的CLI命令，执行如下命令 cd $GOPATH/src/github.com/hyperledger/fabic/peer ./peer 你可以获得和下面类似的响应： Usage: peer [command] Available Commands: peer Run the peer. status Status of the peer. stop Stop the peer. login Login user on CLI. vm VM functionality on the fabric. chaincode chaincode specific commands. help Help about any command Flags: -h, --help[=false]: help Use &quot;peer [command] --help&quot; for more information about a command. Some of the available command line arguments for the&nbsp;peer&nbsp;command are listed below: -c&nbsp;- 构造函数: 用来为部署触发初始化链码状态的函数 -l&nbsp;- 语言: 指定链码的实现语言，目前只支持Golang -n&nbsp;- 名字: 部署交易返回的链码的标识。在后续的调用和查询交易中必须使用 -p&nbsp;- 路径: 链码在本地文件系统中的标识。在部署交易时必须提供。 -u&nbsp;- 用户名: 调用交易的登入的用户的注册ID 上述所有命令并非完全在当前版本中实现。如下所述全面支持的命令是有助于链码的开发和调试的。 所有 peer 节点的设置都被列在core.yaml这个peer处理的配置文件中，可能通过命令行的环境变量而被修改。如，设置peer.id或&nbsp;peer.ddressAutoDetect，只需要传递CORE_PEER_ID=vp1和CORE_PEER_ADDRESSAUTODETECT=true给命令行。 6.3.1.1 peer peerCLI命令在开发和生产环境中都会执行 peer 处理。开发模式会在本地运行单个 peer 节点和本地的链码部署。这使得在链码开修改和调试代码，不需要启动一个完整的网络。在开发模式启动 peer 的一个例子： ./peer peer --peer-chaincodedev 在生产环境中启动peer进程，像下面一样修改上面的命令： ./peer peer 6.3.1.2 登录 登录的CLI命令会登入一个已经在CA注册的用户。要通过CLI登录，发出以下命令，其中username是注册用户的注册ID。 ./peer login &lt;username&gt; 下面的例子演示了用户jim登录过程。 ./peer login jim 该命令会提示输入密码，密码必须为此用户使用证书颁发机构注册登记的密码相匹配。如果输入的密码不正确的密码匹配，将导致一个错误。 22:21:31.246 [main] login -&gt; INFO 001 CLI client login... 22:21:31.247 [main] login -&gt; INFO 002 Local data store for client loginToken: /var/hyperledger/production/client/ Enter password for user &#39;jim&#39;: ************ 22:21:40.183 [main] login -&gt; INFO 003 Logging in user &#39;jim&#39; on CLI interface... 22:21:40.623 [main] login -&gt; INFO 004 Storing login token for user &#39;jim&#39;. 22:21:40.624 [main] login -&gt; INFO 005 Login successful for user &#39;jim&#39;. 您也可以与-p参数来提供用户的密码。下面是一个例子。 ./peer login jim -p 123456 6.3.1.3 链码部署 deployCLI命令为链码和接下来的部署包到验证 peer 创建 docker 镜像。如下面的例子。 ./peer chaincode deploy -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode deploy -u jim -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 6.3.1.4 链码调用 invokeCLI命令执行目标来代码中的指定函数。如下： ./peer chaincode invoke -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode invoke -u jim -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 6.3.1.5 链码查询 queryCLI命令在目标链码上触发指定的查询。返回的响应取决于链码实现。下面是一个例子。 ./peer chaincode query -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode query -u jim -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a 阅读更多" />
<link rel="canonical" href="https://mlh.app/2016/08/24/2e4ddb55118f885804a46540e9c04f61.html" />
<meta property="og:url" content="https://mlh.app/2016/08/24/2e4ddb55118f885804a46540e9c04f61.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-08-24T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"fabric的主要接口是REST API。 REST API允许应用注册用户，查询区块链，并发布交易。 CLI为了开发，同样提供有效API的子集。CLI允许开发人员能够快速测试链码或查询交易状态。 应用程序通过REST API与非验证的 peer 节点，这将需要某种形式的认证，以确保实体有适当的权限进行交互。该应用程序是负责实现合适的身份验证机制和 peer 节点随后将使用客户身份对发出消息签名。 fabric API 设计涵盖的类别如下，虽然当前版本的其中一些实现不完整。[REST API（＃62-REST的API）节将说明API当前支持。 身份 - 注册来获得或吊销一张证书 Address - 交易的源或目的 Transaction - 总账上的执行单元 Chaincode - 总账上运行的程序 Blockchain - 总账的内容 Network - 区块链 peer 网络的信息 Storage - 文件或文档的外部存储 Event Stream - 区块链上订阅/发布事件 6.1 REST Service REST服务可以（通过配置）在验证和非验证 peer 被启用，但是建议在生产环境中只启用非验证 peer 的REST服务。 func StartOpenchainRESTServer(server *oc.ServerOpenchain, devops *oc.Devops) 这个函数读取core.yamlpeer处理的配置文件中的rest.address。rest.address键定义了 peer 的HTTP REST服务默认监听的地址和端口。 假定REST服务接收来已经认证的终端用户的应用请求。 6.2 REST API 您可以通过您所选择的任何工具与REST API的工作。例如，curl命令行实用程序或一个基于浏览器的客户端，如Firefox的REST客户端或Chrome Postman。同样，可以通过[Swagger]（http://swagger.io/）直接触发REST请求。为了获得REST&nbsp;API Swagger描述，点击[这里]（https://github.com/hyperledger/fabric/blob/master/core/rest/rest_api.json）。目前可用的API总结于以下部分。 6.2.1 REST Endpoints Block GET /chain/blocks/{block-id} Blockchain GET /chain Chaincode POST /chaincode Network GET /network/peers Registrar POST /registrar GET /registrar/{enrollmentID} DELETE /registrar/{enrollmentID} GET /registrar/{enrollmentID}/ecert GET /registrar/{enrollmentID}/tcert Transactions GET /transactions/{UUID} 6.2.1.1 块API GET /chain/blocks/{block-id} 使用块API来从区块链中检索各个块的内容。返回的块信息结构是在3.2.1.1节中定义 块检索请求: GET host:port/chain/blocks/173 块检索响应: { &quot;transactions&quot;: [ { &quot;type&quot;: 3, &quot;chaincodeID&quot;: &quot;EgRteWNj&quot;, &quot;payload&quot;: &quot;Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=&quot;, &quot;uuid&quot;: &quot;f5978e82-6d8c-47d1-adec-f18b794f570e&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 206716775 }, &quot;cert&quot;: &quot;MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=&quot;, &quot;signature&quot;: &quot;MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg==&quot; } ], &quot;stateHash&quot;: &quot;7ftCvPeHIpsvSavxUoZM0u7o67MPU81ImOJIO7ZdMoH2mjnAaAAafYy9MIH3HjrWM1/Zla/Q6LsLzIjuYdYdlQ==&quot;, &quot;previousBlockHash&quot;: &quot;lT0InRg4Cvk4cKykWpCRKWDZ9YNYMzuHdUzsaeTeAcH3HdfriLEcTuxrFJ76W4jrWVvTBdI1etxuIV9AO6UF4Q==&quot;, &quot;nonHashData&quot;: { &quot;localLedgerCommitTimestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 250834782 } } } 6.2.1.2 区块链API GET /chain 使用链API来检索区块链的当前状态。返回区块链信息消息被定义如下。 message BlockchainInfo { uint64 height = 1; bytes currentBlockHash = 2; bytes previousBlockHash = 3; } height&nbsp;- 区块链中块的数量，包括创始区块 currentBlockHash&nbsp;- 当前或最后区块的哈希 previousBlockHash&nbsp;- 前一区块的哈希 区块链检索请求: GET host:port/chain 区块链检索响应: { &quot;height&quot;: 174, &quot;currentBlockHash&quot;: &quot;lIfbDax2NZMU3rG3cDR11OGicPLp1yebIkia33Zte9AnfqvffK6tsHRyKwsw0hZFZkCGIa9wHVkOGyFTcFxM5w==&quot;, &quot;previousBlockHash&quot;: &quot;Vlz6Dv5OSy0OZpJvijrU1cmY2cNS5Ar3xX5DxAi/seaHHRPdssrljDeppDLzGx6ZVyayt8Ru6jO+E68IwMrXLQ==&quot; } 6.2.1.3 链码API POST /chaincode 使用链码API来部署，调用和查询链码 部署请求需要客户端提供path参数，执行文件系统中链码的目录。部署请求的响应要么是包含成功的链码部署确认消息要么是包含失败的原因的错误。 它还含有所生成的链码的name域在消息中，这是在随后的调用和查询交易中使用的已部署链码的唯一标识。 要部署链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义。 部署请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;deploy&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;path&quot;:&quot;github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;init&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;1000&quot;, &quot;b&quot;, &quot;2000&quot;] } }, &quot;id&quot;: &quot;1&quot; } 部署响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;id&quot;: 1 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的部署请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;deploy&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;path&quot;:&quot;github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;init&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;1000&quot;, &quot;b&quot;, &quot;2000&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;1&quot; } 该调用请求要求客户端提供一个name参数，这是之前从部署交易响应得到的。调用请求的响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。 要调用链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义 调用请求: POST host:port/chaincode { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;b&quot;, &quot;100&quot;] } }, &quot;id&quot;: &quot;3&quot; } 调用响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;5a4540e5-902b-422d-a6ab-e70ab36a2e6d&quot; }, &quot;id&quot;: 3 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的调用请求: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;invoke&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;invoke&quot;, &quot;args&quot;:[&quot;a&quot;, &quot;b&quot;, &quot;100&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;3&quot; } 查询请求需要在客户端提供一个name参数，这是之前在部署交易响应中得到了。查询请求的响应取决于链码的实现。响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。在成功执行的情况下，响应将包含链码请求的状态变量的值 要查询链码，需要提供ChaincodeSpec的payload，在3.1.2.2节中定义。 查询请求: POST host:port/chaincode/ { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] } }, &quot;id&quot;: &quot;5&quot; } 查询响应: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: { &quot;status&quot;: &quot;OK&quot;, &quot;message&quot;: &quot;-400&quot; }, &quot;id&quot;: 5 } 当启用安全时，修改所需的payload包括传递的登录用户注册ID的secureContext元素如下： 启用安全的查询请求: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;query&quot;, &quot;params&quot;: { &quot;type&quot;: &quot;GOLANG&quot;, &quot;chaincodeID&quot;:{ &quot;name&quot;:&quot;52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586&quot; }, &quot;ctorMsg&quot;: { &quot;function&quot;:&quot;query&quot;, &quot;args&quot;:[&quot;a&quot;] }, &quot;secureContext&quot;: &quot;lukas&quot; }, &quot;id&quot;: &quot;5&quot; } 6.2.1.4 网络API 使用网络API来获取组成区块链 fabric 的 peer 节点的网络信息 /network/peers 端点返回的目标 peer 节点的所有现有的网络连接的列表。该列表包括验证和非验证 peer。peer 的列表被返回类型PeersMessage是包含PeerEndpoint的数组，在第[3.1.1]（#311-discovery-messages发现的消息）定义。 message PeersMessage { repeated PeerEndpoint peers = 1; } 网络请求: GET host:port/network/peers 网络响应: { &quot;peers&quot;: [ { &quot;ID&quot;: { &quot;name&quot;: &quot;vp1&quot; }, &quot;address&quot;: &quot;172.17.0.4:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;rUA+vX2jVCXev6JsXDNgNBMX03IV9mHRPWo6h6SI0KLMypBJLd+JoGGlqFgi+eq/&quot; }, { &quot;ID&quot;: { &quot;name&quot;: &quot;vp3&quot; }, &quot;address&quot;: &quot;172.17.0.5:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;OBduaZJ72gmM+B9wp3aErQlofE0ulQfXfTHh377ruJjOpsUn0MyvsJELUTHpAbHI&quot; }, { &quot;ID&quot;: { &quot;name&quot;: &quot;vp2&quot; }, &quot;address&quot;: &quot;172.17.0.6:30303&quot;, &quot;type&quot;: 1, &quot;pkiID&quot;: &quot;GhtP0Y+o/XVmRNXGF6pcm9KLNTfCZp+XahTBqVRmaIumJZnBpom4ACayVbg4Q/Eb&quot; } ] } 6.2.1.5 注册API (成员服务) POST /registrar GET /registrar/{enrollmentID} DELETE /registrar/{enrollmentID} GET /registrar/{enrollmentID}/ecert GET /registrar/{enrollmentID}/tcert 使用注册API来管理的证书颁发机构（CA）的最终用户注册。这些API端点用于注册与CA用户，确定指定用户是否已注册，并从本地存储中删除任何目标用户的登录令牌，防止他们执行任何进一步的交易。注册API也用于从系统中检索用户注册和交易证书。 /registrar端点使用与CA注册用户所需的秘密payload定义如下。注册请求的响应可以是一个成功的注册的确认或包含失败的原因的错误。 message Secret { string enrollId = 1; string enrollSecret = 2; } enrollId&nbsp;- 在证书颁发机构的注册ID enrollSecret&nbsp;- 在证书颁发机构的密码 注册请求: POST host:port/registrar { &quot;enrollId&quot;: &quot;lukas&quot;, &quot;enrollSecret&quot;: &quot;NPKYL39uKbkj&quot; } 注册响应: { &quot;OK&quot;: &quot;Login successful for user &#39;lukas&#39;.&quot; } GET /registrar/{enrollmentID}端点用于确认一个给定的用户是否与CA注册如果是，确认将被反悔。否则，将导致授权错误。 注册验证请求: GET host:port/registrar/jim 注册验证返回: { &quot;OK&quot;: &quot;User jim is already logged in.&quot; } 注册验证请求: GET host:port/registrar/alex 注册验证返回: { &quot;Error&quot;: &quot;User alex must log in.&quot; } DELETE /registrar/{enrollmentID}&nbsp;端点用于删除一个目标用户的登录令牌。如果登录令牌成功删除，确认将被反悔。否则，将导致授权错误。此端点不需要payload。 删除注册请求: DELETE host:port/registrar/lukas 删除注册返回: { &quot;OK&quot;: &quot;Deleted login token and directory for user lukas.&quot; } GET /registrar/{enrollmentID}/ecert&nbsp;端点用于检索从本地存储给定用户的登记证书。如果目标用户已与CA注册，响应将包括注册证书的URL-encoded版本。如果目标用户尚未注册，将返回一个错误。如果客户希望使用检索后返回的注册证书，请记住，它必须是URL-decoded。 注册证书检索请求: GET host:port/registrar/jim/ecert 注册证书检索响应: { &quot;OK&quot;: &quot;-----BEGIN+CERTIFICATE-----%0AMIIBzTCCAVSgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwNPQkMwHhcNMTYwMTIxMDYzNjEwWhcNMTYwNDIw%0AMDYzNjEwWjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNP%0AQkMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAARSLgjGD0omuJKYrJF5ClyYb3sGEGTU%0AH1mombSAOJ6GAOKEULt4L919sbSSChs0AEvTX7UDf4KNaKTrKrqo4khCoboMg1VS%0AXVTTPrJ%2BOxSJTXFZCohVgbhWh6ZZX2tfb7%2BjUDBOMA4GA1UdDwEB%2FwQEAwIHgDAM%0ABgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwDgYG%0AUQMEBQYHAQH%2FBAE0MAoGCCqGSM49BAMDA2cAMGQCMGz2RR0NsJOhxbo0CeVts2C5%0A%2BsAkKQ7v1Llbg78A1pyC5uBmoBvSnv5Dd0w2yOmj7QIwY%2Bn5pkLiwisxWurkHfiD%0AxizmN6vWQ8uhTd3PTdJiEEckjHKiq9pwD%2FGMt%2BWjP7zF%0A-----END+CERTIFICATE-----%0A&quot; } /registrar/{enrollmentID}/tcert端点检索已与证书机关登记给定用户的交易证书。如果用户已注册，确认消息将包含URL-encoded交易证书的列表被返回。否则，将会导致一个错误。交易证书的所需数量由可选的&#39;count&#39;查询参数指定。返回交易证书的默认数量为1;500是可以与单个请求中检索证书的最大数量。如果客户端希望使用取回后的交易证书，请记住，他们必须是URL-decoded。 交易证书检索请求: GET host:port/registrar/jim/tcert 交易证书检索响应: { &quot;OK&quot;: [ &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQfwJORRED9RAsmSl%2FEowq1STBb%0A%2FoFteymZ96RUr%2BsKmF9PNrrUNvFZFhvukxZZjqhEcGiQqFyRf%2FBnVN%2BbtRzMo38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwSRWQFmErr0SmQO9AFP4GJYzQ%0APQMmcsCjKiJf%2Bw1df%2FLnXunCsCUlf%2FalIUaeSrT7MAoGCCqGSM49BAMDA0gAMEUC%0AIQC%2FnE71FBJd0hwNTLXWmlCJff4Yi0J%2BnDi%2BYnujp%2Fn9nQIgYWg0m0QFzddyJ0%2FF%0AKzIZEJlKgZTt8ZTlGg3BBrgl7qY%3D%0A-----END+CERTIFICATE-----%0A&quot; ] } 交易证书检索请求: GET host:port/registrar/jim/tcert?count=5 交易证书检索响应: { &quot;OK&quot;: [ &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot;, &quot;-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A&quot; ] } 6.2.1.6 交易API GET /transactions/{UUID} 使用交易API来从区块链中检索匹配UUID的单个交易。返回的交易消息在3.1.2.1小节定义 交易检索请求: GET host:port/transactions/f5978e82-6d8c-47d1-adec-f18b794f570e 交易检索响应: { &quot;type&quot;: 3, &quot;chaincodeID&quot;: &quot;EgRteWNj&quot;, &quot;payload&quot;: &quot;Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=&quot;, &quot;uuid&quot;: &quot;f5978e82-6d8c-47d1-adec-f18b794f570e&quot;, &quot;timestamp&quot;: { &quot;seconds&quot;: 1453758316, &quot;nanos&quot;: 206716775 }, &quot;cert&quot;: &quot;MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=&quot;, &quot;signature&quot;: &quot;MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg==&quot; } 6.3 CLI CLI包括可用的API的一个子集，使开发人员能够快速测试和调试链码或查询交易状态。CLI由Golang实现和可在多个操作系统上操作。当前可用的CLI命令归纳在下面的部分： 6.3.1 CLI命令 To see what CLI commands are currently available in the implementation, execute the following: 要查看当前可用的CLI命令，执行如下命令 cd $GOPATH/src/github.com/hyperledger/fabic/peer ./peer 你可以获得和下面类似的响应： Usage: peer [command] Available Commands: peer Run the peer. status Status of the peer. stop Stop the peer. login Login user on CLI. vm VM functionality on the fabric. chaincode chaincode specific commands. help Help about any command Flags: -h, --help[=false]: help Use &quot;peer [command] --help&quot; for more information about a command. Some of the available command line arguments for the&nbsp;peer&nbsp;command are listed below: -c&nbsp;- 构造函数: 用来为部署触发初始化链码状态的函数 -l&nbsp;- 语言: 指定链码的实现语言，目前只支持Golang -n&nbsp;- 名字: 部署交易返回的链码的标识。在后续的调用和查询交易中必须使用 -p&nbsp;- 路径: 链码在本地文件系统中的标识。在部署交易时必须提供。 -u&nbsp;- 用户名: 调用交易的登入的用户的注册ID 上述所有命令并非完全在当前版本中实现。如下所述全面支持的命令是有助于链码的开发和调试的。 所有 peer 节点的设置都被列在core.yaml这个peer处理的配置文件中，可能通过命令行的环境变量而被修改。如，设置peer.id或&nbsp;peer.ddressAutoDetect，只需要传递CORE_PEER_ID=vp1和CORE_PEER_ADDRESSAUTODETECT=true给命令行。 6.3.1.1 peer peerCLI命令在开发和生产环境中都会执行 peer 处理。开发模式会在本地运行单个 peer 节点和本地的链码部署。这使得在链码开修改和调试代码，不需要启动一个完整的网络。在开发模式启动 peer 的一个例子： ./peer peer --peer-chaincodedev 在生产环境中启动peer进程，像下面一样修改上面的命令： ./peer peer 6.3.1.2 登录 登录的CLI命令会登入一个已经在CA注册的用户。要通过CLI登录，发出以下命令，其中username是注册用户的注册ID。 ./peer login &lt;username&gt; 下面的例子演示了用户jim登录过程。 ./peer login jim 该命令会提示输入密码，密码必须为此用户使用证书颁发机构注册登记的密码相匹配。如果输入的密码不正确的密码匹配，将导致一个错误。 22:21:31.246 [main] login -&gt; INFO 001 CLI client login... 22:21:31.247 [main] login -&gt; INFO 002 Local data store for client loginToken: /var/hyperledger/production/client/ Enter password for user &#39;jim&#39;: ************ 22:21:40.183 [main] login -&gt; INFO 003 Logging in user &#39;jim&#39; on CLI interface... 22:21:40.623 [main] login -&gt; INFO 004 Storing login token for user &#39;jim&#39;. 22:21:40.624 [main] login -&gt; INFO 005 Login successful for user &#39;jim&#39;. 您也可以与-p参数来提供用户的密码。下面是一个例子。 ./peer login jim -p 123456 6.3.1.3 链码部署 deployCLI命令为链码和接下来的部署包到验证 peer 创建 docker 镜像。如下面的例子。 ./peer chaincode deploy -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode deploy -u jim -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c &#39;{&quot;Function&quot;:&quot;init&quot;, &quot;Args&quot;: [&quot;a&quot;,&quot;100&quot;, &quot;b&quot;, &quot;200&quot;]}&#39; 6.3.1.4 链码调用 invokeCLI命令执行目标来代码中的指定函数。如下： ./peer chaincode invoke -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode invoke -u jim -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;invoke&quot;, &quot;Args&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;10&quot;]}&#39; 6.3.1.5 链码查询 queryCLI命令在目标链码上触发指定的查询。返回的响应取决于链码实现。下面是一个例子。 ./peer chaincode query -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a&quot;]}&#39; 启用安全性时，命令必须修改来通过-u参数传递用户登录的注册ID。下面是一个例子 ./peer chaincode query -u jim -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c &#39;{&quot;Function&quot;: &quot;query&quot;, &quot;Args&quot;: [&quot;a 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2016/08/24/2e4ddb55118f885804a46540e9c04f61.html","headline":"BlockChain技术系列(六)- 应用编程接口","dateModified":"2016-08-24T00:00:00+08:00","datePublished":"2016-08-24T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2016/08/24/2e4ddb55118f885804a46540e9c04f61.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>BlockChain技术系列(六)- 应用编程接口</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> fabric的主要接口是REST API。 REST API允许应用注册用户，查询区块链，并发布交易。 CLI为了开发，同样提供有效API的子集。CLI允许开发人员能够快速测试链码或查询交易状态。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 应用程序通过REST API与非验证的 peer 节点，这将需要某种形式的认证，以确保实体有适当的权限进行交互。该应用程序是负责实现合适的身份验证机制和 peer 节点随后将使用客户身份对发出消息签名。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/images/refarch-api.png" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;"><img src="https://github.com/hyperledger/fabric/raw/49538bbc631459ddbf35e61562542600460d745e/docs/images/refarch-api.png" alt="Reference architecture" style="border-style:none;"></a></p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> </p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> fabric API 设计涵盖的类别如下，虽然当前版本的其中一些实现不完整。[REST API（＃62-REST的API）节将说明API当前支持。</p> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li>身份 - 注册来获得或吊销一张证书</li>
   <li>Address - 交易的源或目的</li>
   <li>Transaction - 总账上的执行单元</li>
   <li>Chaincode - 总账上运行的程序</li>
   <li>Blockchain - 总账的内容</li>
   <li>Network - 区块链 peer 网络的信息</li>
   <li>Storage - 文件或文档的外部存储</li>
   <li>Event Stream - 区块链上订阅/发布事件</li>
  </ul>
  <h2 style="line-height:1.25;border-bottom:1px solid rgb(238,238,238);color:rgb(51,51,51);"> <a id="user-content-61-rest-service" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#61-rest-service" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.1 REST Service</h2> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> REST服务可以（通过配置）在验证和非验证 peer 被启用，但是建议在生产环境中只启用非验证 peer 的REST服务。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">func StartOpenchainRESTServer(server *oc.ServerOpenchain, devops *oc.Devops)
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 这个函数读取<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">core.yaml</code><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">peer</code>处理的配置文件中的<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">rest.address</code>。<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">rest.address</code>键定义了 peer 的HTTP REST服务默认监听的地址和端口。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 假定REST服务接收来已经认证的终端用户的应用请求。</p> 
  <h2 style="line-height:1.25;border-bottom:1px solid rgb(238,238,238);color:rgb(51,51,51);"> <a id="user-content-62-rest-api" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#62-rest-api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2 REST API</h2> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 您可以通过您所选择的任何工具与REST API的工作。例如，curl命令行实用程序或一个基于浏览器的客户端，如Firefox的REST客户端或Chrome Postman。同样，可以通过[Swagger]（<a href="http://swagger.io/%EF%BC%89%E7%9B%B4%E6%8E%A5%E8%A7%A6%E5%8F%91REST%E8%AF%B7%E6%B1%82%E3%80%82%E4%B8%BA%E4%BA%86%E8%8E%B7%E5%BE%97REST" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">http://swagger.io/）直接触发REST请求。为了获得REST</a>&nbsp;API Swagger描述，点击[这里]（<a href="https://github.com/hyperledger/fabric/blob/master/core/rest/rest_api.json%EF%BC%89%E3%80%82%E7%9B%AE%E5%89%8D%E5%8F%AF%E7%94%A8%E7%9A%84API%E6%80%BB%E7%BB%93%E4%BA%8E%E4%BB%A5%E4%B8%8B%E9%83%A8%E5%88%86%E3%80%82" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">https://github.com/hyperledger/fabric/blob/master/core/rest/rest_api.json）。目前可用的API总结于以下部分。</a></p> 
  <h3 style="font-size:1.25em;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-621-rest-endpoints" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#621-rest-endpoints" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2.1 REST Endpoints</h3> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li><a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6211-block-api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">Block</a> 
    <ul>
     <li>GET /chain/blocks/{block-id}</li>
    </ul></li>
   <li><a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6212-blockchain-api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">Blockchain</a> 
    <ul>
     <li>GET /chain</li>
    </ul></li>
   <li><a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6213-chaincode-api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">Chaincode</a> 
    <ul>
     <li>POST /chaincode</li>
    </ul></li>
   <li><a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6214-network-api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">Network</a> 
    <ul>
     <li>GET /network/peers</li>
    </ul></li>
   <li><a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6215-registrar-api-member-services" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">Registrar</a> 
    <ul>
     <li>POST /registrar</li>
     <li>GET /registrar/{enrollmentID}</li>
     <li>DELETE /registrar/{enrollmentID}</li>
     <li>GET /registrar/{enrollmentID}/ecert</li>
     <li>GET /registrar/{enrollmentID}/tcert</li>
    </ul></li>
   <li><a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6216-transactions-api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">Transactions</a> 
    <ul>
     <li>GET /transactions/{UUID}</li>
    </ul></li>
  </ul>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6211-块api" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6211-%E5%9D%97api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2.1.1 块API</h4> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li><span style="font-weight:600;">GET /chain/blocks/{block-id}</span></li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 使用块API来从区块链中检索各个块的内容。返回的块信息结构是在<a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#3211-block" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">3.2.1.1</a>节中定义</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 块检索请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/chain/blocks/173
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 块检索响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "transactions": [
        {
            "type": 3,
            "chaincodeID": "EgRteWNj",
            "payload": "Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=",
            "uuid": "f5978e82-6d8c-47d1-adec-f18b794f570e",
            "timestamp": {
                "seconds": 1453758316,
                "nanos": 206716775
            },
            "cert": "MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=",
            "signature": "MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg=="
        }
    ],
    "stateHash": "7ftCvPeHIpsvSavxUoZM0u7o67MPU81ImOJIO7ZdMoH2mjnAaAAafYy9MIH3HjrWM1/Zla/Q6LsLzIjuYdYdlQ==",
    "previousBlockHash": "lT0InRg4Cvk4cKykWpCRKWDZ9YNYMzuHdUzsaeTeAcH3HdfriLEcTuxrFJ76W4jrWVvTBdI1etxuIV9AO6UF4Q==",
    "nonHashData": {
        "localLedgerCommitTimestamp": {
            "seconds": 1453758316,
            "nanos": 250834782
        }
    }
}
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6212-区块链api" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6212-%E5%8C%BA%E5%9D%97%E9%93%BEapi" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2.1.2 区块链API</h4> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li><span style="font-weight:600;">GET /chain</span></li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 使用链API来检索区块链的当前状态。返回区块链信息消息被定义如下。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">message BlockchainInfo {
    uint64 height = 1;
    bytes currentBlockHash = 2;
    bytes previousBlockHash = 3;
}
</code></pre> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">height</code>&nbsp;- 区块链中块的数量，包括创始区块</p> </li>
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">currentBlockHash</code>&nbsp;- 当前或最后区块的哈希</p> </li>
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">previousBlockHash</code>&nbsp;- 前一区块的哈希</p> </li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 区块链检索请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/chain
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 区块链检索响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "height": 174,
    "currentBlockHash": "lIfbDax2NZMU3rG3cDR11OGicPLp1yebIkia33Zte9AnfqvffK6tsHRyKwsw0hZFZkCGIa9wHVkOGyFTcFxM5w==",
    "previousBlockHash": "Vlz6Dv5OSy0OZpJvijrU1cmY2cNS5Ar3xX5DxAi/seaHHRPdssrljDeppDLzGx6ZVyayt8Ru6jO+E68IwMrXLQ=="
}
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6213-链码api" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6213-%E9%93%BE%E7%A0%81api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2.1.3 链码API</h4> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li><span style="font-weight:600;">POST /chaincode</span></li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 使用链码API来部署，调用和查询链码 部署请求需要客户端提供<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">path</code>参数，执行文件系统中链码的目录。部署请求的响应要么是包含成功的链码部署确认消息要么是包含失败的原因的错误。 它还含有所生成的链码的<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">name</code>域在消息中，这是在随后的调用和查询交易中使用的已部署链码的唯一标识。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 要部署链码，需要提供ChaincodeSpec的payload，在<a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#3122-transaction-specification" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">3.1.2.2</a>节中定义。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 部署请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">POST host:port/chaincode

{
  "jsonrpc": "2.0",
  "method": "deploy",
  "params": {
    "type": "GOLANG",
    "chaincodeID":{
        "path":"github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02"
    },
    "ctorMsg": {
        "function":"init",
        "args":["a", "1000", "b", "2000"]
    }
  },
  "id": "1"  
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 部署响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "jsonrpc": "2.0",
    "result": {
        "status": "OK",
        "message": "52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586"
    },
    "id": 1
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 当启用安全时，修改所需的payload包括传递的登录用户注册ID的<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">secureContext</code>元素如下：</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 启用安全的部署请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">POST host:port/chaincode

{
  "jsonrpc": "2.0",
  "method": "deploy",
  "params": {
    "type": "GOLANG",
    "chaincodeID":{
        "path":"github.com/hyperledger/fabic/examples/chaincode/go/chaincode_example02"
    },
    "ctorMsg": {
        "function":"init",
        "args":["a", "1000", "b", "2000"]
    },
    "secureContext": "lukas"
  },
  "id": "1"  
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 该调用请求要求客户端提供一个<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">name</code>参数，这是之前从部署交易响应得到的。调用请求的响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 要调用链码，需要提供ChaincodeSpec的payload，在<a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#3122-transaction-specification" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">3.1.2.2</a>节中定义</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 调用请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">POST host:port/chaincode

{
  "jsonrpc": "2.0",
  "method": "invoke",
  "params": {
    "type": "GOLANG",
    "chaincodeID":{
      "name":"52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586"
    },
    "ctorMsg": {
        "function":"invoke",
        "args":["a", "b", "100"]
    }
  },
  "id": "3"  
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 调用响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "jsonrpc": "2.0",
    "result": {
        "status": "OK",
        "message": "5a4540e5-902b-422d-a6ab-e70ab36a2e6d"
    },
    "id": 3
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 当启用安全时，修改所需的payload包括传递的登录用户注册ID的<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">secureContext</code>元素如下：</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 启用安全的调用请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
  "jsonrpc": "2.0",
  "method": "invoke",
  "params": {
    "type": "GOLANG",
    "chaincodeID":{
      "name":"52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586"
    },
    "ctorMsg": {
        "function":"invoke",
        "args":["a", "b", "100"]
    },
    "secureContext": "lukas"
  },
  "id": "3"  
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 查询请求需要在客户端提供一个<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">name</code>参数，这是之前在部署交易响应中得到了。查询请求的响应取决于链码的实现。响应要么是包含成功执行的确认消息，要么是包含失败的原因的错误。在成功执行的情况下，响应将包含链码请求的状态变量的值</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 要查询链码，需要提供ChaincodeSpec的payload，在<a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#3122-transaction-specification" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">3.1.2.2</a>节中定义。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 查询请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">POST host:port/chaincode/

{
  "jsonrpc": "2.0",
  "method": "query",
  "params": {
    "type": "GOLANG",
    "chaincodeID":{
      "name":"52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586"
    },
    "ctorMsg": {
        "function":"query",
        "args":["a"]
    }
  },
  "id": "5"  
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 查询响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "jsonrpc": "2.0",
    "result": {
        "status": "OK",
        "message": "-400"
    },
    "id": 5
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 当启用安全时，修改所需的payload包括传递的登录用户注册ID的<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">secureContext</code>元素如下：</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 启用安全的查询请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
  "jsonrpc": "2.0",
  "method": "query",
  "params": {
    "type": "GOLANG",
    "chaincodeID":{
      "name":"52b0d803fc395b5e34d8d4a7cd69fb6aa00099b8fabed83504ac1c5d61a425aca5b3ad3bf96643ea4fdaac132c417c37b00f88fa800de7ece387d008a76d3586"
    },
    "ctorMsg": {
        "function":"query",
        "args":["a"]
    },
    "secureContext": "lukas"
  },
  "id": "5"  
}
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6214-网络api" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6214-%E7%BD%91%E7%BB%9Capi" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2.1.4 网络API</h4> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 使用网络API来获取组成区块链 fabric 的 peer 节点的网络信息</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> /network/peers 端点返回的目标 peer 节点的所有现有的网络连接的列表。该列表包括验证和非验证 peer。peer 的列表被返回类型<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">PeersMessage</code>是包含<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">PeerEndpoint</code>的数组，在第[3.1.1]（#311-discovery-messages发现的消息）定义。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">message PeersMessage {
    repeated PeerEndpoint peers = 1;
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 网络请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/network/peers
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 网络响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "peers": [
        {
            "ID": {
                "name": "vp1"
            },
            "address": "172.17.0.4:30303",
            "type": 1,
            "pkiID": "rUA+vX2jVCXev6JsXDNgNBMX03IV9mHRPWo6h6SI0KLMypBJLd+JoGGlqFgi+eq/"
        },
        {
            "ID": {
                "name": "vp3"
            },
            "address": "172.17.0.5:30303",
            "type": 1,
            "pkiID": "OBduaZJ72gmM+B9wp3aErQlofE0ulQfXfTHh377ruJjOpsUn0MyvsJELUTHpAbHI"
        },
        {
            "ID": {
                "name": "vp2"
            },
            "address": "172.17.0.6:30303",
            "type": 1,
            "pkiID": "GhtP0Y+o/XVmRNXGF6pcm9KLNTfCZp+XahTBqVRmaIumJZnBpom4ACayVbg4Q/Eb"
        }
    ]
}
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6215-注册api-成员服务" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6215-%E6%B3%A8%E5%86%8Capi-%E6%88%90%E5%91%98%E6%9C%8D%E5%8A%A1" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2.1.5 注册API (成员服务)</h4> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li><span style="font-weight:600;">POST /registrar</span></li>
   <li><span style="font-weight:600;">GET /registrar/{enrollmentID}</span></li>
   <li><span style="font-weight:600;">DELETE /registrar/{enrollmentID}</span></li>
   <li><span style="font-weight:600;">GET /registrar/{enrollmentID}/ecert</span></li>
   <li><span style="font-weight:600;">GET /registrar/{enrollmentID}/tcert</span></li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 使用注册API来管理的证书颁发机构（CA）的最终用户注册。这些API端点用于注册与CA用户，确定指定用户是否已注册，并从本地存储中删除任何目标用户的登录令牌，防止他们执行任何进一步的交易。注册API也用于从系统中检索用户注册和交易证书。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">/registrar</code>端点使用与CA注册用户所需的秘密payload定义如下。注册请求的响应可以是一个成功的注册的确认或包含失败的原因的错误。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">message Secret {
    string enrollId = 1;
    string enrollSecret = 2;
}
</code></pre> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">enrollId</code>&nbsp;- 在证书颁发机构的注册ID</li>
   <li><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">enrollSecret</code>&nbsp;- 在证书颁发机构的密码</li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">POST host:port/registrar

{
  "enrollId": "lukas",
  "enrollSecret": "NPKYL39uKbkj"
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "OK": "Login successful for user 'lukas'."
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">GET /registrar/{enrollmentID}</code>端点用于确认一个给定的用户是否与CA注册如果是，确认将被反悔。否则，将导致授权错误。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册验证请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/registrar/jim
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册验证返回:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "OK": "User jim is already logged in."
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册验证请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/registrar/alex
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册验证返回:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "Error": "User alex must log in."
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">DELETE /registrar/{enrollmentID}</code>&nbsp;端点用于删除一个目标用户的登录令牌。如果登录令牌成功删除，确认将被反悔。否则，将导致授权错误。此端点不需要payload。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 删除注册请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">DELETE host:port/registrar/lukas
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 删除注册返回:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "OK": "Deleted login token and directory for user lukas."
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">GET /registrar/{enrollmentID}/ecert</code>&nbsp;端点用于检索从本地存储给定用户的登记证书。如果目标用户已与CA注册，响应将包括注册证书的URL-encoded版本。如果目标用户尚未注册，将返回一个错误。如果客户希望使用检索后返回的注册证书，请记住，它必须是URL-decoded。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册证书检索请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/registrar/jim/ecert
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 注册证书检索响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "OK": "-----BEGIN+CERTIFICATE-----%0AMIIBzTCCAVSgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwNPQkMwHhcNMTYwMTIxMDYzNjEwWhcNMTYwNDIw%0AMDYzNjEwWjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNP%0AQkMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAARSLgjGD0omuJKYrJF5ClyYb3sGEGTU%0AH1mombSAOJ6GAOKEULt4L919sbSSChs0AEvTX7UDf4KNaKTrKrqo4khCoboMg1VS%0AXVTTPrJ%2BOxSJTXFZCohVgbhWh6ZZX2tfb7%2BjUDBOMA4GA1UdDwEB%2FwQEAwIHgDAM%0ABgNVHRMBAf8EAjAAMA0GA1UdDgQGBAQBAgMEMA8GA1UdIwQIMAaABAECAwQwDgYG%0AUQMEBQYHAQH%2FBAE0MAoGCCqGSM49BAMDA2cAMGQCMGz2RR0NsJOhxbo0CeVts2C5%0A%2BsAkKQ7v1Llbg78A1pyC5uBmoBvSnv5Dd0w2yOmj7QIwY%2Bn5pkLiwisxWurkHfiD%0AxizmN6vWQ8uhTd3PTdJiEEckjHKiq9pwD%2FGMt%2BWjP7zF%0A-----END+CERTIFICATE-----%0A"
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">/registrar/{enrollmentID}/tcert</code>端点检索已与证书机关登记给定用户的交易证书。如果用户已注册，确认消息将包含URL-encoded交易证书的列表被返回。否则，将会导致一个错误。交易证书的所需数量由可选的'count'查询参数指定。返回交易证书的默认数量为1;500是可以与单个请求中检索证书的最大数量。如果客户端希望使用取回后的交易证书，请记住，他们必须是URL-decoded。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 交易证书检索请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/registrar/jim/tcert
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 交易证书检索响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "OK": [
        "-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAQfwJORRED9RAsmSl%2FEowq1STBb%0A%2FoFteymZ96RUr%2BsKmF9PNrrUNvFZFhvukxZZjqhEcGiQqFyRf%2FBnVN%2BbtRzMo38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwSRWQFmErr0SmQO9AFP4GJYzQ%0APQMmcsCjKiJf%2Bw1df%2FLnXunCsCUlf%2FalIUaeSrT7MAoGCCqGSM49BAMDA0gAMEUC%0AIQC%2FnE71FBJd0hwNTLXWmlCJff4Yi0J%2BnDi%2BYnujp%2Fn9nQIgYWg0m0QFzddyJ0%2FF%0AKzIZEJlKgZTt8ZTlGg3BBrgl7qY%3D%0A-----END+CERTIFICATE-----%0A"
    ]
}
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 交易证书检索请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/registrar/jim/tcert?count=5
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 交易证书检索响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "OK": [
        "-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A",
        "-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A",
        "-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A",
        "-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A",
        "-----BEGIN+CERTIFICATE-----%0AMIIBwDCCAWagAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoG%0AA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMzExMjEwMTI2WhcNMTYwNjA5%0AMjEwMTI2WjApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwNq%0AaW0wWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAARwJxVezgDcTAgj2LtTKVm65qft%0AhRTYnIOQhhOx%2B%2B2NRu5r3Kn%2FXTf1php3NXOFY8ZQbY%2FQbFAwn%2FB0O68wlHiro38w%0AfTAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH%2FBAIwADANBgNVHQ4EBgQEAQIDBDAP%0ABgNVHSMECDAGgAQBAgMEMD0GBioDBAUGBwEB%2FwQwRVPMSKVcHsk4aGHxBWc8PGKj%0AqtTVTtuXnN45BynIx6lP6urpqkSuILgB1YOdRNefMAoGCCqGSM49BAMDA0gAMEUC%0AIAIjESYDp%2FXePKANGpsY3Tu%2F4A2IfeczbC3uB%2BpziltWAiEA6Stp%2FX4DmbJGgZe8%0APMNBgRKeoU6UbgTmed0ZEALLZP8%3D%0A-----END+CERTIFICATE-----%0A"
    ]
}
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6216-交易api" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6216-%E4%BA%A4%E6%98%93api" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.2.1.6 交易API</h4> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li><span style="font-weight:600;">GET /transactions/{UUID}</span></li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 使用交易API来从区块链中检索匹配UUID的单个交易。返回的交易消息在<a href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#3121-transaction-data-structure" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;background-color:transparent;">3.1.2.1</a>小节定义</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 交易检索请求:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">GET host:port/transactions/f5978e82-6d8c-47d1-adec-f18b794f570e
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 交易检索响应:</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">{
    "type": 3,
    "chaincodeID": "EgRteWNj",
    "payload": "Ch4IARIGEgRteWNjGhIKBmludm9rZRIBYRIBYhICMTA=",
    "uuid": "f5978e82-6d8c-47d1-adec-f18b794f570e",
    "timestamp": {
        "seconds": 1453758316,
        "nanos": 206716775
    },
    "cert": "MIIB/zCCAYWgAwIBAgIBATAKBggqhkjOPQQDAzApMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQwwCgYDVQQDEwN0Y2EwHhcNMTYwMTI1MjE0MTE3WhcNMTYwNDI0MjE0MTE3WjArMQswCQYDVQQGEwJVUzEMMAoGA1UEChMDSUJNMQ4wDAYDVQQDEwVsdWthczB2MBAGByqGSM49AgEGBSuBBAAiA2IABC/BBkt8izf6Ew8UDd62EdWFikJhyCPY5VO9Wxq9JVzt3D6nubx2jO5JdfWt49q8V1Aythia50MZEDpmKhtM6z7LHOU1RxuxdjcYDOvkNJo6pX144U4N1J8/D3A+97qZpKN/MH0wDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwDQYDVR0OBAYEBAECAwQwDwYDVR0jBAgwBoAEAQIDBDA9BgYqAwQFBgcBAf8EMABNbPHZ0e/2EToi0H8mkouuUDwurgBYuUB+vZfeMewBre3wXG0irzMtfwHlfECRDDAKBggqhkjOPQQDAwNoADBlAjAoote5zYFv91lHzpbEwTfJL/+r+CG7oMVFUFuoSlvBSCObK2bDIbNkW4VQ+ZC9GTsCMQC5GCgy2oZdHw/x7XYzG2BiqmRkLRTiCS7vYCVJXLivU65P984HopxW0cEqeFM9co0=",
    "signature": "MGUCMCIJaCT3YRsjXt4TzwfmD9hg9pxYnV13kWgf7e1hAW5Nar//05kFtpVlq83X+YtcmAIxAK0IQlCgS6nqQzZEGCLd9r7cg1AkQOT/RgoWB8zcaVjh3bCmgYHsoPAPgMsi3TJktg=="
}
</code></pre> 
  <h2 style="line-height:1.25;border-bottom:1px solid rgb(238,238,238);color:rgb(51,51,51);"> <a id="user-content-63-cli" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#63-cli" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.3 CLI</h2> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> CLI包括可用的API的一个子集，使开发人员能够快速测试和调试链码或查询交易状态。CLI由Golang实现和可在多个操作系统上操作。当前可用的CLI命令归纳在下面的部分：</p> 
  <h3 style="font-size:1.25em;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-631-cli命令" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#631-cli%E5%91%BD%E4%BB%A4" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.3.1 CLI命令</h3> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> To see what CLI commands are currently available in the implementation, execute the following:</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 要查看当前可用的CLI命令，执行如下命令</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">cd $GOPATH/src/github.com/hyperledger/fabic/peer
./peer
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 你可以获得和下面类似的响应：</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">    Usage:
      peer [command]

    Available Commands:
      peer        Run the peer.
      status      Status of the peer.
      stop        Stop the peer.
      login       Login user on CLI.
      vm          VM functionality on the fabric.
      chaincode   chaincode specific commands.
      help        Help about any command

    Flags:
      -h, --help[=false]: help


    Use "peer [command] --help" for more information about a command.
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> Some of the available command line arguments for the&nbsp;<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">peer</code>&nbsp;command are listed below:</p> 
  <ul style="color:rgb(51,51,51);font-size:16px;line-height:24px;">
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-c</code>&nbsp;- 构造函数: 用来为部署触发初始化链码状态的函数</p> </li>
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-l</code>&nbsp;- 语言: 指定链码的实现语言，目前只支持Golang</p> </li>
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-n</code>&nbsp;- 名字: 部署交易返回的链码的标识。在后续的调用和查询交易中必须使用</p> </li>
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-p</code>&nbsp;- 路径: 链码在本地文件系统中的标识。在部署交易时必须提供。</p> </li>
   <li> <p><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-u</code>&nbsp;- 用户名: 调用交易的登入的用户的注册ID</p> </li>
  </ul>
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 上述所有命令并非完全在当前版本中实现。如下所述全面支持的命令是有助于链码的开发和调试的。</p> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 所有 peer 节点的设置都被列在<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">core.yaml</code>这个<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">peer</code>处理的配置文件中，可能通过命令行的环境变量而被修改。如，设置<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">peer.id</code>或&nbsp;<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">peer.ddressAutoDetect</code>，只需要传递<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">CORE_PEER_ID=vp1</code>和<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">CORE_PEER_ADDRESSAUTODETECT=true</code>给命令行。</p> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6311-peer" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6311-peer" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.3.1.1 peer</h4> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">peer</code>CLI命令在开发和生产环境中都会执行 peer 处理。开发模式会在本地运行单个 peer 节点和本地的链码部署。这使得在链码开修改和调试代码，不需要启动一个完整的网络。在开发模式启动 peer 的一个例子：</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer peer --peer-chaincodedev
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 在生产环境中启动peer进程，像下面一样修改上面的命令：</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer peer
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6312-登录" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6312-%E7%99%BB%E5%BD%95" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.3.1.2 登录</h4> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 登录的CLI命令会登入一个已经在CA注册的用户。要通过CLI登录，发出以下命令，其中<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">username</code>是注册用户的注册ID。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer login &lt;username&gt;
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 下面的例子演示了用户<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">jim</code>登录过程。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer login jim
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 该命令会提示输入密码，密码必须为此用户使用证书颁发机构注册登记的密码相匹配。如果输入的密码不正确的密码匹配，将导致一个错误。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">22:21:31.246 [main] login -&gt; INFO 001 CLI client login...
22:21:31.247 [main] login -&gt; INFO 002 Local data store for client loginToken: /var/hyperledger/production/client/
Enter password for user 'jim': ************
22:21:40.183 [main] login -&gt; INFO 003 Logging in user 'jim' on CLI interface...
22:21:40.623 [main] login -&gt; INFO 004 Storing login token for user 'jim'.
22:21:40.624 [main] login -&gt; INFO 005 Login successful for user 'jim'.
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 您也可以与<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-p</code>参数来提供用户的密码。下面是一个例子。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer login jim -p 123456
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6313-链码部署" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6313-%E9%93%BE%E7%A0%81%E9%83%A8%E7%BD%B2" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.3.1.3 链码部署</h4> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">deploy</code>CLI命令为链码和接下来的部署包到验证 peer 创建 docker 镜像。如下面的例子。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer chaincode deploy -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c '{"Function":"init", "Args": ["a","100", "b", "200"]}'
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 启用安全性时，命令必须修改来通过<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-u</code>参数传递用户登录的注册ID。下面是一个例子</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer chaincode deploy -u jim -p github.com/hyperledger/fabric/example/chaincode/go/chaincode_example02 -c '{"Function":"init", "Args": ["a","100", "b", "200"]}'
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6314-链码调用" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6314-%E9%93%BE%E7%A0%81%E8%B0%83%E7%94%A8" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.3.1.4 链码调用</h4> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">invoke</code>CLI命令执行目标来代码中的指定函数。如下：</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer chaincode invoke -n &lt;name_value_returned_from_deploy_command&gt; -c '{"Function": "invoke", "Args": ["a", "b", "10"]}'
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 启用安全性时，命令必须修改来通过<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-u</code>参数传递用户登录的注册ID。下面是一个例子</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer chaincode invoke -u jim -n &lt;name_value_returned_from_deploy_command&gt; -c '{"Function": "invoke", "Args": ["a", "b", "10"]}'
</code></pre> 
  <h4 style="font-size:16px;line-height:1.25;color:rgb(51,51,51);"> <a id="user-content-6315-链码查询" class="anchor" href="https://github.com/hyperledger/fabric/blob/49538bbc631459ddbf35e61562542600460d745e/docs/protocol-spec_zh.md#6315-%E9%93%BE%E7%A0%81%E6%9F%A5%E8%AF%A2" rel="nofollow" style="color:rgb(64,120,192);text-decoration:none;margin-left:-20px;line-height:1;background-color:transparent;"></a>6.3.1.5 链码查询</h4> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> <code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">query</code>CLI命令在目标链码上触发指定的查询。返回的响应取决于链码实现。下面是一个例子。</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer chaincode query -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c '{"Function": "query", "Args": ["a"]}'
</code></pre> 
  <p style="color:rgb(51,51,51);font-size:16px;line-height:24px;"> 启用安全性时，命令必须修改来通过<code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;">-u</code>参数传递用户登录的注册ID。下面是一个例子</p> 
  <pre style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;overflow:auto;color:rgb(51,51,51);background-color:rgb(247,247,247);"><code style="font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;border:0px;display:inline;overflow:visible;line-height:inherit;background:transparent;">./peer chaincode query -u jim -l golang -n &lt;name_value_returned_from_deploy_command&gt; -c '{"Function": "query", "Args": ["a</code></pre> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jason_wang1989/article/details/52300142,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jason_wang1989/article/details/52300142,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
