<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Mastering Bitcoin（掌握比特币）读书笔记 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Mastering Bitcoin（掌握比特币）读书笔记" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Mastering Bitcoin 目录 1 介绍 2 比特币如何工作 3 比特币Client 4 密钥、地址、钱包 5 事务（交易） 6 比特币网络 7 块链 8 挖矿与Consensus 9 其他链、币与应用 10 安全 11 A Transaction Script Language Operators, Constants, and Symbols 12 B BIP 13 C pycoin, ku, and tx 14 D Available Commands with sx Tools 介绍 比特币如何工作 miner（矿工）约每10分钟产生一个block，confirm所有事务（？），同时获得25BTC奖励 比特币Client $ bitcoin-cli getaddressesbyaccount &quot;&quot; ... after confirmation, the txid is immutable and authoritative $ bitcoin-cli decoderawtransaction ... //vin/vout？ asm字段是什么意思？ block的height：genesis块为0 scriptSig：转账事务的签名（by signrawtransaction） 自己给自己转账？ sendrawtransaction：向比特币网络提交事务，返回一个txid（这个id又是谁生成的？） 其他的Clients、Libs and Toolkits libbitcoin与sx工具 pycoin btcd（Go语言实现，不包含wallet，后者由btcwallet/btcgui提供） 密钥、地址、钱包 密钥：256位，~= 10^77（对比：可见宇宙包含10^80原子） dumpprivkey：Base58 checksum-encoded WIF 公钥：K = k * G，ECC，G：generator point ECC：secp256k1标准？（这里居然解释了一下ECC，晕） 比特币地址：“1”开始 公钥 --&gt; SHA256 --&gt; RIPEMD160 --&gt; Base58Check? Base58：Base64，without 0,O,l,I,+,/ Base58Check：checksum = SHA256(SHA256(prefix+data))，取前4个字节 关于不同类型地址的‘前缀’： bitcoin：1 Pay-to-Script Hash：3 Bitcoin Testnet：m/n Private Key WIF：5/K/L BIP38加密的私钥：6P BIP32扩展的公钥：xpub 压缩的公钥 如果知道x，则可以通过y^2 mod p = (x^3 +7) mod p解出y 没有压缩的前缀是04，压缩的02或03（y有正负2个取值，在模p有限域上有奇偶2个取值） 靠，还不是所有的客户端都支持？这说明当初的设计也太粗糙了点 Ironically，WIF-压缩的私钥比无压缩的版本多一个字节，这是因为它添加了01后缀 钱包：私钥的容器 第一版 Type-0 非确定式（私钥是随机生成的，——因此理论上可能有冲突？） 缺点：必须经常备份？ 确定式（seeded） 我怎么感觉这种更容易被追踪？因为假如seed可以被定位的话 Mnemonic Code Words：代表一随机数种子，#see BIP0039 只是个草稿建议，不是规范 层次式的确定式钱包（BIP0032/0044） 可以映射到一个组织机构？？？ root seed --&gt; HMAC-SHA512 --&gt; master private key（m） and master chain code 导出Private child key（CKD） 我个人觉得HD钱包其实并不安全，它的安全性建立在别人不知道parent key以及一路哈希计算的不可逆上 Extended keys：可导出children key 从Public parent key直接导出public child key，不需要私钥（？扩展的public key包含了chain code） 风险： 一个泄漏的child private key可以导出全部其他的child private keys 一个泄漏的child private key再加上parent chain code可以导出parent private key ==&gt; Hardend CKD 使用parent private key导出child chain code，而不是从parent public key（利用一路hash的不可逆性） 缺点？ 最佳实践：第1级children都通过加固的CKD导出？ HD path表示（略） Advanced Keys and Addresses Pay-to-Script Hash（P2SH）与Multi-Sig地址（BIP0016） A P2SH地址从一个transaction script创建，定义了谁可以spend a transaction output（有主的钱包？） 注意，向P2SH地址支付需要多方参与！ 多签名地址与P2SH：M-of-N Vanity地址（包含了人类可读的信息） 由于SHA256，找到这么个地址并不容易（取决于子模式的长度） Paper Wallets：印在纸上的私钥？ BIP0038增强 一旦收到支付后，只能一次性用光，或者转移到另一个新的Paper Wallet（这让我想到了现在的礼品卡了） 事务（交易） 由funds的拥有者签名 不需要认证发送者的身份（直接转发即可，直到被miner放到blockchain中） 数据结构 版本？ input、ouput locktime？ UTXO（没有balance的概念，有点类似于数据库里的‘物化视图’的概念） 不是实物，不可切割；input等于output；“change” Transactions consume UTXO by unlocking it with the signature of the current owner， and create UTXO by locking it to the bitcoin address of the new owner. coinbase事务：block中的第一个transaction，由挖矿竞争胜利的矿工创建，支付给他自己 Transaction outputs（UTXO）： An amount of bitcoin, denominated in satoshis（1/100000000 BTC） A locking script, 指定谁才能接受这个UTXO ... requests.get(&#39;https://blockchain.info/unspent?active=%s&#39;&nbsp;% address) Transaction Inputs In simple terms, transaction inputs are pointers to UTXO. unlocking script：通常是拥有者对其比特币地址的签名 事务费用 Transaction fees are calculated based on the size of the transaction in kilobytes, not the value of the transaction in bitcoin. 隐含的 事务链结与孤儿事务 orphan transaction pool：临时存放引用了parent，但parent还未知的child事务 Transaction Scripts 类似与Forth？ DUP CHECKSIG OP_CHECKMULTISIG ... locking：scriptPubKey；unlock：scriptSig 原来是顺序执行的，有安全漏洞,... 现在，executed separately with the stack transferred between the two executions the Script： Turing Incompleteness：无循环，复杂的flow control（只有条件分支） 无状态的（？） 5种标准事务： pay-to-public-key-hash (P2PKH), public-key, multi-signature (limited to 15 keys), pay-to-script-hash (P2SH), p132 2 &lt;Mohammed&#39;s Public Key&gt; &lt;Partner1 Public Key&gt; &lt;Partner2 Public Key&gt; &lt;Partner3 Public Key&gt; &lt;Attorney Public Key&gt; 5 OP_CHECKMULTISIG With P2SH payments, the complex locking script is replaced with its digital fingerprint, a cryptographic hash. ==&gt; redeem script（为了节省blockchain的存储！） 即使redeem script有可能是invalid，P2SH本身仍然会被接受（？？？） 备注：Script Hash有点类似于我设想的‘兴趣路由’ data output (OP_RETURN)：用于证明某样东西在指定日期起已经存在？滥用？？ 这个增加了其他存储blockchain的client的负担。。。（不过，可以用于私有链？） 更糟糕的是，使用20byte的虚假目标地址来存储信息，导致unspent UTXO，溢出节点的临时内存池... OP_RETURN：创建了一个provably unspendable的output，这增加了块链的大小，但不会bloat内存池（compromise？版本0.9+） 40bytes：32 byte的SHA256，加上一个DOCPROOF前缀？ 比特币网络 Stratum网关代理？ 网络发现 TCP 8333端口？ BestHeight：节点当前的块链高度 seed nodes 消息：inventory, getblocks，getdata SPV节点（瘦客户端） SPV nodes download only the block headers and do not download the transactions included in each block. 需要用到时再向peer请求？ The SPV node establishes the existence of a transaction in a block by requesting a merkle path proof and by validating the proof of work in the chain of blocks. 检查事务所在的block是否被6个以上的新block所引用，且其中事务unspent？ 注意这里的事务一般是SPV节点钱包中已知的比特币地址 ==&gt; 隐私风险！#see &#39;Bloom Filters&#39; 可以证明存在，但是不能verify它的unspent状态 ==&gt; double-spending attack 随机连接到多个其他nodes？期望其中至少有一个honest节点 ==&gt; SPV nodes also are vulnerable to network partitioning attacks or Sybil attacks getheaders消息 Bloom Filters（这让我想起了密码学里的零知识证明） offer an efficient way to express a search pattern（搜索模式） while protecting privacy. filterload消息 交互式的filteradd Transaction Pools Alert Messages 块链 linked-back list “previous block hash”（块链概念的精髓所在） metadata in LevelDB Although a block has just one parent, it can temporarily have multiple children. (Fork) when different blocks are discovered almost simultaneously by different miners 80个字节的Block Header The second set of metadata, namely the difficulty, timestamp, and nonce,（挖矿竞争） Merkle树根 Block Identifiers: Block Header Hash（2次SHA256） and Block Height 例如，第一个块头部的hash：000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f The Genesis Block Linking Blocks in the Blockchain 检查新block的previousblockhash域 Merkle Trees double-SHA256 技术细节：如果奇数个事务，最后一个重复！ ？证明某个transaction在指定block中（仅有根hash怎么做？by retrieving a small merkle path？） 与SPV peer的merkleblock消息（包含了tranaction所在的block头部，以及merkle path）——哦，需要‘计算’来验证！ 挖矿与Consensus miner：构造一个candidate block（候选块） 事务优先级：age，fees（size） 高优先级：&gt;57600000 初始的50KB事务空间，regardless of fee？（注意，矿工本身挖到矿有25BTC奖励） 注意：这里的blockchain确认过程与数据库的WAL日志有点类似之处 generation/coinbase事务：不消耗UTXO，creates bitcoin from nothing out value = 25BTC + 块内所有事务的手续费 reward计算：初始50BTC，每210000块减半，当前是25BTC，但2016年某个时候就会变成12.5BTC input：32B Transaction Hash=0（不代表UTXO引用）, 4B Output Index=-1, 2~100B Coinbase Data（可被miner随意使用）, 4B Sequence Number=-1 BIP0034，version-2 blocks MUST contain the height index as a script &quot;push&quot; 以#277316为例，03（push）-443b04（小端编码的height index）-03858402062（extra nonce）-2f503253482f（‘/P2SH/’，#BIP0016） BIP0017：‘p2sh/CHV’ 构造块头部 4B Version 32B Prev Block Hash 32B Merkle Root 4B Timestamp 4B Diffiulty Target（mantissa指数编码？） 以#277316为例，0x1903a30c，19是指数，3a30c是系数 target = coefficient * 2 ^ (8 * (exponent-3))，大约相当于前缀60bit=0 4B Nonce（用于Proof-of-Work算法的计数器） 头部构造完之后，可以开始‘挖矿’：寻找一个Nonce值（最多尝试2^32次），使得头部Hash&lt;difficulty target（？） Proof-of-Work算法 先解释了一下SHA256的特性... 降低target（这意味着要求SHA256输出结果有更多的前缀0），则难度增加 备注：所谓的比特币挖矿专用ASIC其实就是SHA256的硬件实现？ ... 幸运的是，整个网络的处理能力是100 petahashes per second（PH/sec） Difficulty retargeting 网络必须保证每10分钟产生一个block，不多也不少？ 自动地，每2016个块： 度量最近的2016个块的产生时间，与20160分钟比较，比率用来调整Difficulty 啊，太神奇啦 Validating a New Block CheckBlock（对比之前针对Transaction的CheckInputs） main chain：具有最高的累积困难度，在大多数情况下也是拥有最多块的链 branch chain可以临时保留，如果它将来的累积困难度超过了main chain orphan block 最终的network-wide consensus ？Mining nodes “vote” with their power by choosing which chain to extend（感觉这里可能是个漏洞？因为涉及到分布式系统的一致性选举...） Blockchain Forks Forks are almost always resolved within one block. （理论上可能）一个Fork扩展到2个blocks，——然而发生的可能性很小！ Extra Nonce 遍历所有Nonce都没有找到？增加Timestamp！==&gt;使用Coinbase事务的额外空间 Mining Pools：这在技术上意味着需要拆分Nonce的遍历空间？ set an easier target？ Managed Pools P2Pool：share chain（一个困难度小于比特币的块链）？ 51% attack问题 Consensus Attacks 只能影响最近的块，导致针对future blocks创建的DoS破坏 A 51% attack允许double-spend in the new chain... To prevent，大笔支付必须等待至少6个确认 对于特定事务的DoS攻击（只需忽略这些事务即可） 其他链、币与应用 Meta Coins：implemented on top of bitcoin Colored Coins：同时也作为其他资产（股份？）的标记 Mastercoin：？ “exodus”address (1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P) Counterparty：都使用OP_RETURN来编码metadata？ Alt Coins：从比特币源代码基础上定制修改的 IXCoin：降低了难度，并把奖励提高到96BTC？ Tenebrix：另一个PoW算法scrypt，内存密集，用于抵抗GPU/ASIC挖矿？Litecoin的基础 Litecoin：更快的块生成时间：10m -&gt; 2.5m touted as “silver to bitcoin&#39;s gold” 囧：Creating an alt coin is easy, which is why there are now more than 500 of them Evaluating an Alt Coin Monetary Parameter Alternatives: Litecoin, Dogecoin, Freicoin Litecoin Consensus algorithm: Scrypt proof of work Dogecoin：Litecoin的修改版 块生成时间：60s？靠 Freicoin：demurrage currency；鼓励消费，不鼓励守财奴？通货膨胀？？ Consensus Innovation: Peercoin, Myriad, Blackcoin, Vericoin, NXT Proof of stake is a system by which existing owners of a currency can “stake” currency as interest-bearing collateral. （存钱能收利息？？？囧） Peercoin Myriad：同时使用5个不同的PoW：SHA256d, Scrypt, Qubit, Skein, or Myriad-Groestl（疯了，有这个必要吗） 抵御ASIC挖矿？？？ Blackcoin：introducing “multipools” VeriCoin：可变利率？？？ NXT：单独的实现，非比特币fork，2.0 cryptocurrency？ Dual-Purpose Mining Innovation: Primecoin, Curecoin, Gridcoin 比特币的PoW被批评为‘wasteful’？？ Primecoin PoW：computing Cunningham and bi-twin prime chains？ Curecoin PoW：protein-folding research through the Folding@Home project Gridcoin：Proof-of-work with BOINC grid computing subsidy Anonymity-Focused Alt Coins: Zerocash/Zerocoin：理论研究，not released yet CryptoNote has a built-in periodic reset mechanism that makes it unusable as a currency itself ？ Bytecoin（BCN） Monero Darkcoin 使用11轮不同的hash函数：blake, bmw, groestl, jh, keccak, skein, luffa, cubehash, shavite, simd, echo Noncurrency Alt Chains Namecoin 名字空间：d/用于.bit域名，id/用于PGP，u/ Namecoin registrations need to be updated every 36,000 blocks，更新没有费用？ Bitmessage：a server-less encrypted email system Ethereum a Turing-complete contract processing and execution platform based on a blockchain ledger ‘图灵完全’的合同契约，什么鬼 完全独立的设计/实现？ contract：运行在每一个node上，acting as decentralized autonomous software agents Namecoin可用Ethereum来实现？ 安全 decentralization 用户安全最佳实践 ？Holding bitcoin on a computer serves to focus the user&#39;s mind on the need for improved computer security. Physical Bitcoin Storage Hardware Wallets：bitcoin key的加密存储太复杂，而最终又丢失了master key，.... 蠢货 Diversifying Risk Multi-sig and Governance Survivability A Transaction Script Language Operators, Constants, and Symbols B BIP C pycoin, ku, and tx D Available Commands with sx Tools 阅读更多" />
<meta property="og:description" content="Mastering Bitcoin 目录 1 介绍 2 比特币如何工作 3 比特币Client 4 密钥、地址、钱包 5 事务（交易） 6 比特币网络 7 块链 8 挖矿与Consensus 9 其他链、币与应用 10 安全 11 A Transaction Script Language Operators, Constants, and Symbols 12 B BIP 13 C pycoin, ku, and tx 14 D Available Commands with sx Tools 介绍 比特币如何工作 miner（矿工）约每10分钟产生一个block，confirm所有事务（？），同时获得25BTC奖励 比特币Client $ bitcoin-cli getaddressesbyaccount &quot;&quot; ... after confirmation, the txid is immutable and authoritative $ bitcoin-cli decoderawtransaction ... //vin/vout？ asm字段是什么意思？ block的height：genesis块为0 scriptSig：转账事务的签名（by signrawtransaction） 自己给自己转账？ sendrawtransaction：向比特币网络提交事务，返回一个txid（这个id又是谁生成的？） 其他的Clients、Libs and Toolkits libbitcoin与sx工具 pycoin btcd（Go语言实现，不包含wallet，后者由btcwallet/btcgui提供） 密钥、地址、钱包 密钥：256位，~= 10^77（对比：可见宇宙包含10^80原子） dumpprivkey：Base58 checksum-encoded WIF 公钥：K = k * G，ECC，G：generator point ECC：secp256k1标准？（这里居然解释了一下ECC，晕） 比特币地址：“1”开始 公钥 --&gt; SHA256 --&gt; RIPEMD160 --&gt; Base58Check? Base58：Base64，without 0,O,l,I,+,/ Base58Check：checksum = SHA256(SHA256(prefix+data))，取前4个字节 关于不同类型地址的‘前缀’： bitcoin：1 Pay-to-Script Hash：3 Bitcoin Testnet：m/n Private Key WIF：5/K/L BIP38加密的私钥：6P BIP32扩展的公钥：xpub 压缩的公钥 如果知道x，则可以通过y^2 mod p = (x^3 +7) mod p解出y 没有压缩的前缀是04，压缩的02或03（y有正负2个取值，在模p有限域上有奇偶2个取值） 靠，还不是所有的客户端都支持？这说明当初的设计也太粗糙了点 Ironically，WIF-压缩的私钥比无压缩的版本多一个字节，这是因为它添加了01后缀 钱包：私钥的容器 第一版 Type-0 非确定式（私钥是随机生成的，——因此理论上可能有冲突？） 缺点：必须经常备份？ 确定式（seeded） 我怎么感觉这种更容易被追踪？因为假如seed可以被定位的话 Mnemonic Code Words：代表一随机数种子，#see BIP0039 只是个草稿建议，不是规范 层次式的确定式钱包（BIP0032/0044） 可以映射到一个组织机构？？？ root seed --&gt; HMAC-SHA512 --&gt; master private key（m） and master chain code 导出Private child key（CKD） 我个人觉得HD钱包其实并不安全，它的安全性建立在别人不知道parent key以及一路哈希计算的不可逆上 Extended keys：可导出children key 从Public parent key直接导出public child key，不需要私钥（？扩展的public key包含了chain code） 风险： 一个泄漏的child private key可以导出全部其他的child private keys 一个泄漏的child private key再加上parent chain code可以导出parent private key ==&gt; Hardend CKD 使用parent private key导出child chain code，而不是从parent public key（利用一路hash的不可逆性） 缺点？ 最佳实践：第1级children都通过加固的CKD导出？ HD path表示（略） Advanced Keys and Addresses Pay-to-Script Hash（P2SH）与Multi-Sig地址（BIP0016） A P2SH地址从一个transaction script创建，定义了谁可以spend a transaction output（有主的钱包？） 注意，向P2SH地址支付需要多方参与！ 多签名地址与P2SH：M-of-N Vanity地址（包含了人类可读的信息） 由于SHA256，找到这么个地址并不容易（取决于子模式的长度） Paper Wallets：印在纸上的私钥？ BIP0038增强 一旦收到支付后，只能一次性用光，或者转移到另一个新的Paper Wallet（这让我想到了现在的礼品卡了） 事务（交易） 由funds的拥有者签名 不需要认证发送者的身份（直接转发即可，直到被miner放到blockchain中） 数据结构 版本？ input、ouput locktime？ UTXO（没有balance的概念，有点类似于数据库里的‘物化视图’的概念） 不是实物，不可切割；input等于output；“change” Transactions consume UTXO by unlocking it with the signature of the current owner， and create UTXO by locking it to the bitcoin address of the new owner. coinbase事务：block中的第一个transaction，由挖矿竞争胜利的矿工创建，支付给他自己 Transaction outputs（UTXO）： An amount of bitcoin, denominated in satoshis（1/100000000 BTC） A locking script, 指定谁才能接受这个UTXO ... requests.get(&#39;https://blockchain.info/unspent?active=%s&#39;&nbsp;% address) Transaction Inputs In simple terms, transaction inputs are pointers to UTXO. unlocking script：通常是拥有者对其比特币地址的签名 事务费用 Transaction fees are calculated based on the size of the transaction in kilobytes, not the value of the transaction in bitcoin. 隐含的 事务链结与孤儿事务 orphan transaction pool：临时存放引用了parent，但parent还未知的child事务 Transaction Scripts 类似与Forth？ DUP CHECKSIG OP_CHECKMULTISIG ... locking：scriptPubKey；unlock：scriptSig 原来是顺序执行的，有安全漏洞,... 现在，executed separately with the stack transferred between the two executions the Script： Turing Incompleteness：无循环，复杂的flow control（只有条件分支） 无状态的（？） 5种标准事务： pay-to-public-key-hash (P2PKH), public-key, multi-signature (limited to 15 keys), pay-to-script-hash (P2SH), p132 2 &lt;Mohammed&#39;s Public Key&gt; &lt;Partner1 Public Key&gt; &lt;Partner2 Public Key&gt; &lt;Partner3 Public Key&gt; &lt;Attorney Public Key&gt; 5 OP_CHECKMULTISIG With P2SH payments, the complex locking script is replaced with its digital fingerprint, a cryptographic hash. ==&gt; redeem script（为了节省blockchain的存储！） 即使redeem script有可能是invalid，P2SH本身仍然会被接受（？？？） 备注：Script Hash有点类似于我设想的‘兴趣路由’ data output (OP_RETURN)：用于证明某样东西在指定日期起已经存在？滥用？？ 这个增加了其他存储blockchain的client的负担。。。（不过，可以用于私有链？） 更糟糕的是，使用20byte的虚假目标地址来存储信息，导致unspent UTXO，溢出节点的临时内存池... OP_RETURN：创建了一个provably unspendable的output，这增加了块链的大小，但不会bloat内存池（compromise？版本0.9+） 40bytes：32 byte的SHA256，加上一个DOCPROOF前缀？ 比特币网络 Stratum网关代理？ 网络发现 TCP 8333端口？ BestHeight：节点当前的块链高度 seed nodes 消息：inventory, getblocks，getdata SPV节点（瘦客户端） SPV nodes download only the block headers and do not download the transactions included in each block. 需要用到时再向peer请求？ The SPV node establishes the existence of a transaction in a block by requesting a merkle path proof and by validating the proof of work in the chain of blocks. 检查事务所在的block是否被6个以上的新block所引用，且其中事务unspent？ 注意这里的事务一般是SPV节点钱包中已知的比特币地址 ==&gt; 隐私风险！#see &#39;Bloom Filters&#39; 可以证明存在，但是不能verify它的unspent状态 ==&gt; double-spending attack 随机连接到多个其他nodes？期望其中至少有一个honest节点 ==&gt; SPV nodes also are vulnerable to network partitioning attacks or Sybil attacks getheaders消息 Bloom Filters（这让我想起了密码学里的零知识证明） offer an efficient way to express a search pattern（搜索模式） while protecting privacy. filterload消息 交互式的filteradd Transaction Pools Alert Messages 块链 linked-back list “previous block hash”（块链概念的精髓所在） metadata in LevelDB Although a block has just one parent, it can temporarily have multiple children. (Fork) when different blocks are discovered almost simultaneously by different miners 80个字节的Block Header The second set of metadata, namely the difficulty, timestamp, and nonce,（挖矿竞争） Merkle树根 Block Identifiers: Block Header Hash（2次SHA256） and Block Height 例如，第一个块头部的hash：000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f The Genesis Block Linking Blocks in the Blockchain 检查新block的previousblockhash域 Merkle Trees double-SHA256 技术细节：如果奇数个事务，最后一个重复！ ？证明某个transaction在指定block中（仅有根hash怎么做？by retrieving a small merkle path？） 与SPV peer的merkleblock消息（包含了tranaction所在的block头部，以及merkle path）——哦，需要‘计算’来验证！ 挖矿与Consensus miner：构造一个candidate block（候选块） 事务优先级：age，fees（size） 高优先级：&gt;57600000 初始的50KB事务空间，regardless of fee？（注意，矿工本身挖到矿有25BTC奖励） 注意：这里的blockchain确认过程与数据库的WAL日志有点类似之处 generation/coinbase事务：不消耗UTXO，creates bitcoin from nothing out value = 25BTC + 块内所有事务的手续费 reward计算：初始50BTC，每210000块减半，当前是25BTC，但2016年某个时候就会变成12.5BTC input：32B Transaction Hash=0（不代表UTXO引用）, 4B Output Index=-1, 2~100B Coinbase Data（可被miner随意使用）, 4B Sequence Number=-1 BIP0034，version-2 blocks MUST contain the height index as a script &quot;push&quot; 以#277316为例，03（push）-443b04（小端编码的height index）-03858402062（extra nonce）-2f503253482f（‘/P2SH/’，#BIP0016） BIP0017：‘p2sh/CHV’ 构造块头部 4B Version 32B Prev Block Hash 32B Merkle Root 4B Timestamp 4B Diffiulty Target（mantissa指数编码？） 以#277316为例，0x1903a30c，19是指数，3a30c是系数 target = coefficient * 2 ^ (8 * (exponent-3))，大约相当于前缀60bit=0 4B Nonce（用于Proof-of-Work算法的计数器） 头部构造完之后，可以开始‘挖矿’：寻找一个Nonce值（最多尝试2^32次），使得头部Hash&lt;difficulty target（？） Proof-of-Work算法 先解释了一下SHA256的特性... 降低target（这意味着要求SHA256输出结果有更多的前缀0），则难度增加 备注：所谓的比特币挖矿专用ASIC其实就是SHA256的硬件实现？ ... 幸运的是，整个网络的处理能力是100 petahashes per second（PH/sec） Difficulty retargeting 网络必须保证每10分钟产生一个block，不多也不少？ 自动地，每2016个块： 度量最近的2016个块的产生时间，与20160分钟比较，比率用来调整Difficulty 啊，太神奇啦 Validating a New Block CheckBlock（对比之前针对Transaction的CheckInputs） main chain：具有最高的累积困难度，在大多数情况下也是拥有最多块的链 branch chain可以临时保留，如果它将来的累积困难度超过了main chain orphan block 最终的network-wide consensus ？Mining nodes “vote” with their power by choosing which chain to extend（感觉这里可能是个漏洞？因为涉及到分布式系统的一致性选举...） Blockchain Forks Forks are almost always resolved within one block. （理论上可能）一个Fork扩展到2个blocks，——然而发生的可能性很小！ Extra Nonce 遍历所有Nonce都没有找到？增加Timestamp！==&gt;使用Coinbase事务的额外空间 Mining Pools：这在技术上意味着需要拆分Nonce的遍历空间？ set an easier target？ Managed Pools P2Pool：share chain（一个困难度小于比特币的块链）？ 51% attack问题 Consensus Attacks 只能影响最近的块，导致针对future blocks创建的DoS破坏 A 51% attack允许double-spend in the new chain... To prevent，大笔支付必须等待至少6个确认 对于特定事务的DoS攻击（只需忽略这些事务即可） 其他链、币与应用 Meta Coins：implemented on top of bitcoin Colored Coins：同时也作为其他资产（股份？）的标记 Mastercoin：？ “exodus”address (1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P) Counterparty：都使用OP_RETURN来编码metadata？ Alt Coins：从比特币源代码基础上定制修改的 IXCoin：降低了难度，并把奖励提高到96BTC？ Tenebrix：另一个PoW算法scrypt，内存密集，用于抵抗GPU/ASIC挖矿？Litecoin的基础 Litecoin：更快的块生成时间：10m -&gt; 2.5m touted as “silver to bitcoin&#39;s gold” 囧：Creating an alt coin is easy, which is why there are now more than 500 of them Evaluating an Alt Coin Monetary Parameter Alternatives: Litecoin, Dogecoin, Freicoin Litecoin Consensus algorithm: Scrypt proof of work Dogecoin：Litecoin的修改版 块生成时间：60s？靠 Freicoin：demurrage currency；鼓励消费，不鼓励守财奴？通货膨胀？？ Consensus Innovation: Peercoin, Myriad, Blackcoin, Vericoin, NXT Proof of stake is a system by which existing owners of a currency can “stake” currency as interest-bearing collateral. （存钱能收利息？？？囧） Peercoin Myriad：同时使用5个不同的PoW：SHA256d, Scrypt, Qubit, Skein, or Myriad-Groestl（疯了，有这个必要吗） 抵御ASIC挖矿？？？ Blackcoin：introducing “multipools” VeriCoin：可变利率？？？ NXT：单独的实现，非比特币fork，2.0 cryptocurrency？ Dual-Purpose Mining Innovation: Primecoin, Curecoin, Gridcoin 比特币的PoW被批评为‘wasteful’？？ Primecoin PoW：computing Cunningham and bi-twin prime chains？ Curecoin PoW：protein-folding research through the Folding@Home project Gridcoin：Proof-of-work with BOINC grid computing subsidy Anonymity-Focused Alt Coins: Zerocash/Zerocoin：理论研究，not released yet CryptoNote has a built-in periodic reset mechanism that makes it unusable as a currency itself ？ Bytecoin（BCN） Monero Darkcoin 使用11轮不同的hash函数：blake, bmw, groestl, jh, keccak, skein, luffa, cubehash, shavite, simd, echo Noncurrency Alt Chains Namecoin 名字空间：d/用于.bit域名，id/用于PGP，u/ Namecoin registrations need to be updated every 36,000 blocks，更新没有费用？ Bitmessage：a server-less encrypted email system Ethereum a Turing-complete contract processing and execution platform based on a blockchain ledger ‘图灵完全’的合同契约，什么鬼 完全独立的设计/实现？ contract：运行在每一个node上，acting as decentralized autonomous software agents Namecoin可用Ethereum来实现？ 安全 decentralization 用户安全最佳实践 ？Holding bitcoin on a computer serves to focus the user&#39;s mind on the need for improved computer security. Physical Bitcoin Storage Hardware Wallets：bitcoin key的加密存储太复杂，而最终又丢失了master key，.... 蠢货 Diversifying Risk Multi-sig and Governance Survivability A Transaction Script Language Operators, Constants, and Symbols B BIP C pycoin, ku, and tx D Available Commands with sx Tools 阅读更多" />
<link rel="canonical" href="https://mlh.app/2016/04/06/82df6d0d749318008f0a85feac308584.html" />
<meta property="og:url" content="https://mlh.app/2016/04/06/82df6d0d749318008f0a85feac308584.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-04-06T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"Mastering Bitcoin 目录 1 介绍 2 比特币如何工作 3 比特币Client 4 密钥、地址、钱包 5 事务（交易） 6 比特币网络 7 块链 8 挖矿与Consensus 9 其他链、币与应用 10 安全 11 A Transaction Script Language Operators, Constants, and Symbols 12 B BIP 13 C pycoin, ku, and tx 14 D Available Commands with sx Tools 介绍 比特币如何工作 miner（矿工）约每10分钟产生一个block，confirm所有事务（？），同时获得25BTC奖励 比特币Client $ bitcoin-cli getaddressesbyaccount &quot;&quot; ... after confirmation, the txid is immutable and authoritative $ bitcoin-cli decoderawtransaction ... //vin/vout？ asm字段是什么意思？ block的height：genesis块为0 scriptSig：转账事务的签名（by signrawtransaction） 自己给自己转账？ sendrawtransaction：向比特币网络提交事务，返回一个txid（这个id又是谁生成的？） 其他的Clients、Libs and Toolkits libbitcoin与sx工具 pycoin btcd（Go语言实现，不包含wallet，后者由btcwallet/btcgui提供） 密钥、地址、钱包 密钥：256位，~= 10^77（对比：可见宇宙包含10^80原子） dumpprivkey：Base58 checksum-encoded WIF 公钥：K = k * G，ECC，G：generator point ECC：secp256k1标准？（这里居然解释了一下ECC，晕） 比特币地址：“1”开始 公钥 --&gt; SHA256 --&gt; RIPEMD160 --&gt; Base58Check? Base58：Base64，without 0,O,l,I,+,/ Base58Check：checksum = SHA256(SHA256(prefix+data))，取前4个字节 关于不同类型地址的‘前缀’： bitcoin：1 Pay-to-Script Hash：3 Bitcoin Testnet：m/n Private Key WIF：5/K/L BIP38加密的私钥：6P BIP32扩展的公钥：xpub 压缩的公钥 如果知道x，则可以通过y^2 mod p = (x^3 +7) mod p解出y 没有压缩的前缀是04，压缩的02或03（y有正负2个取值，在模p有限域上有奇偶2个取值） 靠，还不是所有的客户端都支持？这说明当初的设计也太粗糙了点 Ironically，WIF-压缩的私钥比无压缩的版本多一个字节，这是因为它添加了01后缀 钱包：私钥的容器 第一版 Type-0 非确定式（私钥是随机生成的，——因此理论上可能有冲突？） 缺点：必须经常备份？ 确定式（seeded） 我怎么感觉这种更容易被追踪？因为假如seed可以被定位的话 Mnemonic Code Words：代表一随机数种子，#see BIP0039 只是个草稿建议，不是规范 层次式的确定式钱包（BIP0032/0044） 可以映射到一个组织机构？？？ root seed --&gt; HMAC-SHA512 --&gt; master private key（m） and master chain code 导出Private child key（CKD） 我个人觉得HD钱包其实并不安全，它的安全性建立在别人不知道parent key以及一路哈希计算的不可逆上 Extended keys：可导出children key 从Public parent key直接导出public child key，不需要私钥（？扩展的public key包含了chain code） 风险： 一个泄漏的child private key可以导出全部其他的child private keys 一个泄漏的child private key再加上parent chain code可以导出parent private key ==&gt; Hardend CKD 使用parent private key导出child chain code，而不是从parent public key（利用一路hash的不可逆性） 缺点？ 最佳实践：第1级children都通过加固的CKD导出？ HD path表示（略） Advanced Keys and Addresses Pay-to-Script Hash（P2SH）与Multi-Sig地址（BIP0016） A P2SH地址从一个transaction script创建，定义了谁可以spend a transaction output（有主的钱包？） 注意，向P2SH地址支付需要多方参与！ 多签名地址与P2SH：M-of-N Vanity地址（包含了人类可读的信息） 由于SHA256，找到这么个地址并不容易（取决于子模式的长度） Paper Wallets：印在纸上的私钥？ BIP0038增强 一旦收到支付后，只能一次性用光，或者转移到另一个新的Paper Wallet（这让我想到了现在的礼品卡了） 事务（交易） 由funds的拥有者签名 不需要认证发送者的身份（直接转发即可，直到被miner放到blockchain中） 数据结构 版本？ input、ouput locktime？ UTXO（没有balance的概念，有点类似于数据库里的‘物化视图’的概念） 不是实物，不可切割；input等于output；“change” Transactions consume UTXO by unlocking it with the signature of the current owner， and create UTXO by locking it to the bitcoin address of the new owner. coinbase事务：block中的第一个transaction，由挖矿竞争胜利的矿工创建，支付给他自己 Transaction outputs（UTXO）： An amount of bitcoin, denominated in satoshis（1/100000000 BTC） A locking script, 指定谁才能接受这个UTXO ... requests.get(&#39;https://blockchain.info/unspent?active=%s&#39;&nbsp;% address) Transaction Inputs In simple terms, transaction inputs are pointers to UTXO. unlocking script：通常是拥有者对其比特币地址的签名 事务费用 Transaction fees are calculated based on the size of the transaction in kilobytes, not the value of the transaction in bitcoin. 隐含的 事务链结与孤儿事务 orphan transaction pool：临时存放引用了parent，但parent还未知的child事务 Transaction Scripts 类似与Forth？ DUP CHECKSIG OP_CHECKMULTISIG ... locking：scriptPubKey；unlock：scriptSig 原来是顺序执行的，有安全漏洞,... 现在，executed separately with the stack transferred between the two executions the Script： Turing Incompleteness：无循环，复杂的flow control（只有条件分支） 无状态的（？） 5种标准事务： pay-to-public-key-hash (P2PKH), public-key, multi-signature (limited to 15 keys), pay-to-script-hash (P2SH), p132 2 &lt;Mohammed&#39;s Public Key&gt; &lt;Partner1 Public Key&gt; &lt;Partner2 Public Key&gt; &lt;Partner3 Public Key&gt; &lt;Attorney Public Key&gt; 5 OP_CHECKMULTISIG With P2SH payments, the complex locking script is replaced with its digital fingerprint, a cryptographic hash. ==&gt; redeem script（为了节省blockchain的存储！） 即使redeem script有可能是invalid，P2SH本身仍然会被接受（？？？） 备注：Script Hash有点类似于我设想的‘兴趣路由’ data output (OP_RETURN)：用于证明某样东西在指定日期起已经存在？滥用？？ 这个增加了其他存储blockchain的client的负担。。。（不过，可以用于私有链？） 更糟糕的是，使用20byte的虚假目标地址来存储信息，导致unspent UTXO，溢出节点的临时内存池... OP_RETURN：创建了一个provably unspendable的output，这增加了块链的大小，但不会bloat内存池（compromise？版本0.9+） 40bytes：32 byte的SHA256，加上一个DOCPROOF前缀？ 比特币网络 Stratum网关代理？ 网络发现 TCP 8333端口？ BestHeight：节点当前的块链高度 seed nodes 消息：inventory, getblocks，getdata SPV节点（瘦客户端） SPV nodes download only the block headers and do not download the transactions included in each block. 需要用到时再向peer请求？ The SPV node establishes the existence of a transaction in a block by requesting a merkle path proof and by validating the proof of work in the chain of blocks. 检查事务所在的block是否被6个以上的新block所引用，且其中事务unspent？ 注意这里的事务一般是SPV节点钱包中已知的比特币地址 ==&gt; 隐私风险！#see &#39;Bloom Filters&#39; 可以证明存在，但是不能verify它的unspent状态 ==&gt; double-spending attack 随机连接到多个其他nodes？期望其中至少有一个honest节点 ==&gt; SPV nodes also are vulnerable to network partitioning attacks or Sybil attacks getheaders消息 Bloom Filters（这让我想起了密码学里的零知识证明） offer an efficient way to express a search pattern（搜索模式） while protecting privacy. filterload消息 交互式的filteradd Transaction Pools Alert Messages 块链 linked-back list “previous block hash”（块链概念的精髓所在） metadata in LevelDB Although a block has just one parent, it can temporarily have multiple children. (Fork) when different blocks are discovered almost simultaneously by different miners 80个字节的Block Header The second set of metadata, namely the difficulty, timestamp, and nonce,（挖矿竞争） Merkle树根 Block Identifiers: Block Header Hash（2次SHA256） and Block Height 例如，第一个块头部的hash：000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f The Genesis Block Linking Blocks in the Blockchain 检查新block的previousblockhash域 Merkle Trees double-SHA256 技术细节：如果奇数个事务，最后一个重复！ ？证明某个transaction在指定block中（仅有根hash怎么做？by retrieving a small merkle path？） 与SPV peer的merkleblock消息（包含了tranaction所在的block头部，以及merkle path）——哦，需要‘计算’来验证！ 挖矿与Consensus miner：构造一个candidate block（候选块） 事务优先级：age，fees（size） 高优先级：&gt;57600000 初始的50KB事务空间，regardless of fee？（注意，矿工本身挖到矿有25BTC奖励） 注意：这里的blockchain确认过程与数据库的WAL日志有点类似之处 generation/coinbase事务：不消耗UTXO，creates bitcoin from nothing out value = 25BTC + 块内所有事务的手续费 reward计算：初始50BTC，每210000块减半，当前是25BTC，但2016年某个时候就会变成12.5BTC input：32B Transaction Hash=0（不代表UTXO引用）, 4B Output Index=-1, 2~100B Coinbase Data（可被miner随意使用）, 4B Sequence Number=-1 BIP0034，version-2 blocks MUST contain the height index as a script &quot;push&quot; 以#277316为例，03（push）-443b04（小端编码的height index）-03858402062（extra nonce）-2f503253482f（‘/P2SH/’，#BIP0016） BIP0017：‘p2sh/CHV’ 构造块头部 4B Version 32B Prev Block Hash 32B Merkle Root 4B Timestamp 4B Diffiulty Target（mantissa指数编码？） 以#277316为例，0x1903a30c，19是指数，3a30c是系数 target = coefficient * 2 ^ (8 * (exponent-3))，大约相当于前缀60bit=0 4B Nonce（用于Proof-of-Work算法的计数器） 头部构造完之后，可以开始‘挖矿’：寻找一个Nonce值（最多尝试2^32次），使得头部Hash&lt;difficulty target（？） Proof-of-Work算法 先解释了一下SHA256的特性... 降低target（这意味着要求SHA256输出结果有更多的前缀0），则难度增加 备注：所谓的比特币挖矿专用ASIC其实就是SHA256的硬件实现？ ... 幸运的是，整个网络的处理能力是100 petahashes per second（PH/sec） Difficulty retargeting 网络必须保证每10分钟产生一个block，不多也不少？ 自动地，每2016个块： 度量最近的2016个块的产生时间，与20160分钟比较，比率用来调整Difficulty 啊，太神奇啦 Validating a New Block CheckBlock（对比之前针对Transaction的CheckInputs） main chain：具有最高的累积困难度，在大多数情况下也是拥有最多块的链 branch chain可以临时保留，如果它将来的累积困难度超过了main chain orphan block 最终的network-wide consensus ？Mining nodes “vote” with their power by choosing which chain to extend（感觉这里可能是个漏洞？因为涉及到分布式系统的一致性选举...） Blockchain Forks Forks are almost always resolved within one block. （理论上可能）一个Fork扩展到2个blocks，——然而发生的可能性很小！ Extra Nonce 遍历所有Nonce都没有找到？增加Timestamp！==&gt;使用Coinbase事务的额外空间 Mining Pools：这在技术上意味着需要拆分Nonce的遍历空间？ set an easier target？ Managed Pools P2Pool：share chain（一个困难度小于比特币的块链）？ 51% attack问题 Consensus Attacks 只能影响最近的块，导致针对future blocks创建的DoS破坏 A 51% attack允许double-spend in the new chain... To prevent，大笔支付必须等待至少6个确认 对于特定事务的DoS攻击（只需忽略这些事务即可） 其他链、币与应用 Meta Coins：implemented on top of bitcoin Colored Coins：同时也作为其他资产（股份？）的标记 Mastercoin：？ “exodus”address (1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P) Counterparty：都使用OP_RETURN来编码metadata？ Alt Coins：从比特币源代码基础上定制修改的 IXCoin：降低了难度，并把奖励提高到96BTC？ Tenebrix：另一个PoW算法scrypt，内存密集，用于抵抗GPU/ASIC挖矿？Litecoin的基础 Litecoin：更快的块生成时间：10m -&gt; 2.5m touted as “silver to bitcoin&#39;s gold” 囧：Creating an alt coin is easy, which is why there are now more than 500 of them Evaluating an Alt Coin Monetary Parameter Alternatives: Litecoin, Dogecoin, Freicoin Litecoin Consensus algorithm: Scrypt proof of work Dogecoin：Litecoin的修改版 块生成时间：60s？靠 Freicoin：demurrage currency；鼓励消费，不鼓励守财奴？通货膨胀？？ Consensus Innovation: Peercoin, Myriad, Blackcoin, Vericoin, NXT Proof of stake is a system by which existing owners of a currency can “stake” currency as interest-bearing collateral. （存钱能收利息？？？囧） Peercoin Myriad：同时使用5个不同的PoW：SHA256d, Scrypt, Qubit, Skein, or Myriad-Groestl（疯了，有这个必要吗） 抵御ASIC挖矿？？？ Blackcoin：introducing “multipools” VeriCoin：可变利率？？？ NXT：单独的实现，非比特币fork，2.0 cryptocurrency？ Dual-Purpose Mining Innovation: Primecoin, Curecoin, Gridcoin 比特币的PoW被批评为‘wasteful’？？ Primecoin PoW：computing Cunningham and bi-twin prime chains？ Curecoin PoW：protein-folding research through the Folding@Home project Gridcoin：Proof-of-work with BOINC grid computing subsidy Anonymity-Focused Alt Coins: Zerocash/Zerocoin：理论研究，not released yet CryptoNote has a built-in periodic reset mechanism that makes it unusable as a currency itself ？ Bytecoin（BCN） Monero Darkcoin 使用11轮不同的hash函数：blake, bmw, groestl, jh, keccak, skein, luffa, cubehash, shavite, simd, echo Noncurrency Alt Chains Namecoin 名字空间：d/用于.bit域名，id/用于PGP，u/ Namecoin registrations need to be updated every 36,000 blocks，更新没有费用？ Bitmessage：a server-less encrypted email system Ethereum a Turing-complete contract processing and execution platform based on a blockchain ledger ‘图灵完全’的合同契约，什么鬼 完全独立的设计/实现？ contract：运行在每一个node上，acting as decentralized autonomous software agents Namecoin可用Ethereum来实现？ 安全 decentralization 用户安全最佳实践 ？Holding bitcoin on a computer serves to focus the user&#39;s mind on the need for improved computer security. Physical Bitcoin Storage Hardware Wallets：bitcoin key的加密存储太复杂，而最终又丢失了master key，.... 蠢货 Diversifying Risk Multi-sig and Governance Survivability A Transaction Script Language Operators, Constants, and Symbols B BIP C pycoin, ku, and tx D Available Commands with sx Tools 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2016/04/06/82df6d0d749318008f0a85feac308584.html","headline":"Mastering Bitcoin（掌握比特币）读书笔记","dateModified":"2016-04-06T00:00:00+08:00","datePublished":"2016-04-06T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2016/04/06/82df6d0d749318008f0a85feac308584.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>Mastering Bitcoin（掌握比特币）读书笔记</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h1 id="firstHeading" class="firstHeading" lang="zh-cn" xml:lang="zh-cn">Mastering Bitcoin</h1> 
  <div id="bodyContent" class="mw-body-content"> 
   <div id="contentSub"></div> 
  </div> 
  <div id="mw-content-text" dir="ltr" class="mw-content-ltr" lang="zh-cn" xml:lang="zh-cn"> 
   <div id="toc" class="toc"> 
    <div id="toctitle"> 
     <h2>目录</h2> 
    </div> 
   </div> 
  </div> 
  <div class="toc"> 
   <ul>
    <li class="toclevel-1 tocsection-1"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E4.BB.8B.E7.BB.8D" rel="nofollow"><span class="tocnumber">1</span> <span class="toctext">介绍</span></a></li>
    <li class="toclevel-1 tocsection-2"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E6.AF.94.E7.89.B9.E5.B8.81.E5.A6.82.E4.BD.95.E5.B7.A5.E4.BD.9C" rel="nofollow"><span class="tocnumber">2</span> <span class="toctext">比特币如何工作</span></a></li>
    <li class="toclevel-1 tocsection-3"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E6.AF.94.E7.89.B9.E5.B8.81Client" rel="nofollow"><span class="tocnumber">3</span> <span class="toctext">比特币Client</span></a></li>
    <li class="toclevel-1 tocsection-4"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E5.AF.86.E9.92.A5.E3.80.81.E5.9C.B0.E5.9D.80.E3.80.81.E9.92.B1.E5.8C.85" rel="nofollow"><span class="tocnumber">4</span> <span class="toctext">密钥、地址、钱包</span></a></li>
    <li class="toclevel-1 tocsection-5"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E4.BA.8B.E5.8A.A1.EF.BC.88.E4.BA.A4.E6.98.93.EF.BC.89" rel="nofollow"><span class="tocnumber">5</span> <span class="toctext">事务（交易）</span></a></li>
    <li class="toclevel-1 tocsection-6"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E6.AF.94.E7.89.B9.E5.B8.81.E7.BD.91.E7.BB.9C" rel="nofollow"><span class="tocnumber">6</span> <span class="toctext">比特币网络</span></a></li>
    <li class="toclevel-1 tocsection-7"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E5.9D.97.E9.93.BE" rel="nofollow"><span class="tocnumber">7</span> <span class="toctext">块链</span></a></li>
    <li class="toclevel-1 tocsection-8"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E6.8C.96.E7.9F.BF.E4.B8.8EConsensus" rel="nofollow"><span class="tocnumber">8</span> <span class="toctext">挖矿与Consensus</span></a></li>
    <li class="toclevel-1 tocsection-9"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E5.85.B6.E4.BB.96.E9.93.BE.E3.80.81.E5.B8.81.E4.B8.8E.E5.BA.94.E7.94.A8" rel="nofollow"><span class="tocnumber">9</span> <span class="toctext">其他链、币与应用</span></a></li>
    <li class="toclevel-1 tocsection-10"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#.E5.AE.89.E5.85.A8" rel="nofollow"><span class="tocnumber">10</span> <span class="toctext">安全</span></a></li>
    <li class="toclevel-1 tocsection-11"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#A_Transaction_Script_Language_Operators.2C_Constants.2C_and_Symbols" rel="nofollow"><span class="tocnumber">11</span> <span class="toctext">A Transaction Script Language Operators, Constants, and Symbols</span></a></li>
    <li class="toclevel-1 tocsection-12"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#B_BIP" rel="nofollow"><span class="tocnumber">12</span> <span class="toctext">B BIP</span></a></li>
    <li class="toclevel-1 tocsection-13"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#C_pycoin.2C_ku.2C_and_tx" rel="nofollow"><span class="tocnumber">13</span> <span class="toctext">C pycoin, ku, and tx</span></a></li>
    <li class="toclevel-1 tocsection-14"><a href="http://localhost/mediawiki-1.25.3/index.php/Mastering_Bitcoin#D_Available_Commands_with_sx_Tools" rel="nofollow"><span class="tocnumber">14</span> <span class="toctext">D Available Commands with sx Tools</span></a></li>
   </ul>
  </div> 
  <h2><span class="mw-headline" id=".E4.BB.8B.E7.BB.8D">介绍</span></h2> 
  <h2><span class="mw-headline" id=".E6.AF.94.E7.89.B9.E5.B8.81.E5.A6.82.E4.BD.95.E5.B7.A5.E4.BD.9C">比特币如何工作</span></h2> 
  <ol>
   <li>miner（矿工）约每10分钟产生一个block，confirm所有事务（？），同时获得25BTC奖励</li>
  </ol>
  <h2><span class="mw-headline" id=".E6.AF.94.E7.89.B9.E5.B8.81Client">比特币Client</span></h2> 
  <ol>
   <li>$ bitcoin-cli getaddressesbyaccount ""</li>
   <li>... after <strong>confirmation</strong>, the txid is immutable and authoritative</li>
   <li>$ bitcoin-cli decoderawtransaction ... //vin/vout？ 
    <ol>
     <li>asm字段是什么意思？</li>
    </ol></li>
   <li>block的height：genesis块为0</li>
   <li>scriptSig：转账事务的签名（by signrawtransaction） 
    <ol>
     <li>自己给自己转账？</li>
    </ol></li>
   <li>sendrawtransaction：向比特币网络提交事务，返回一个txid（这个id又是谁生成的？）</li>
   <li>其他的Clients、Libs and Toolkits 
    <ol>
     <li>libbitcoin与<a class="external text" href="http://sx.dyne.org/" rel="nofollow">sx</a>工具</li>
     <li>pycoin</li>
     <li>btcd（Go语言实现，不包含wallet，后者由btcwallet/btcgui提供）</li>
    </ol></li>
  </ol>
  <h2><span class="mw-headline" id=".E5.AF.86.E9.92.A5.E3.80.81.E5.9C.B0.E5.9D.80.E3.80.81.E9.92.B1.E5.8C.85">密钥、地址、钱包</span></h2> 
  <ol>
   <li>密钥：256位，~= 10^77（对比：可见宇宙包含10^80原子） 
    <ol>
     <li>dumpprivkey：Base58 checksum-encoded WIF</li>
    </ol></li>
   <li>公钥：K = k * G，ECC，G：generator point 
    <ol>
     <li>ECC：secp256k1标准？（这里居然解释了一下ECC，晕）</li>
    </ol></li>
   <li>比特币地址：“1”开始 
    <ol>
     <li>公钥 --&gt; SHA256 --&gt; RIPEMD160 --&gt; Base58Check? 
      <ol>
       <li>Base58：Base64，without 0,O,l,I,+,/</li>
       <li>Base58Check：checksum = SHA256(SHA256(prefix+data))，取前4个字节</li>
      </ol></li>
     <li>关于不同类型地址的‘前缀’： 
      <ol>
       <li>bitcoin：1</li>
       <li>Pay-to-Script Hash：3</li>
       <li>Bitcoin Testnet：m/n</li>
       <li>Private Key WIF：5/K/L</li>
       <li>BIP38加密的私钥：6P</li>
       <li>BIP32扩展的公钥：xpub</li>
      </ol></li>
    </ol></li>
   <li>压缩的公钥 
    <ol>
     <li>如果知道x，则可以通过y^2 mod p = (x^3 +7) mod p解出y</li>
     <li>没有压缩的前缀是04，压缩的02或03（y有正负2个取值，在模p有限域上有奇偶2个取值）</li>
     <li>靠，还不是所有的客户端都支持？这说明当初的设计也太粗糙了点</li>
     <li>Ironically，WIF-压缩的私钥比无压缩的版本多一个字节，这是因为它添加了01后缀</li>
    </ol></li>
   <li>钱包：私钥的容器 
    <ol>
     <li>第一版 Type-0 非确定式（私钥是随机生成的，——因此理论上可能有冲突？） 
      <ol>
       <li>缺点：必须经常备份？</li>
      </ol></li>
     <li>确定式（seeded） 
      <ol>
       <li>我怎么感觉这种更容易被追踪？因为假如seed可以被定位的话</li>
      </ol></li>
    </ol></li>
   <li>Mnemonic Code Words：代表一随机数种子，#see BIP0039 
    <ol>
     <li>只是个草稿建议，不是规范</li>
    </ol></li>
   <li>层次式的确定式钱包（BIP0032/0044） 
    <ol>
     <li>可以映射到一个组织机构？？？</li>
     <li>root seed --&gt; HMAC-SHA512 --&gt; master private key（m） and master chain code 
      <ol>
       <li>导出Private child key（CKD）</li>
       <li>我个人觉得HD钱包其实并不安全，它的安全性建立在别人不知道parent key以及一路哈希计算的不可逆上</li>
      </ol></li>
     <li>Extended keys：可导出children key</li>
     <li>从Public parent key直接导出public child key，不需要私钥（？扩展的public key包含了chain code）</li>
     <li>风险： 
      <ol>
       <li>一个泄漏的child private key可以导出全部其他的child private keys</li>
       <li>一个泄漏的child private key再加上parent chain code可以导出parent private key</li>
      </ol></li>
     <li>==&gt; Hardend CKD 
      <ol>
       <li>使用parent private key导出child chain code，而不是从parent public key（利用一路hash的不可逆性）</li>
       <li>缺点？</li>
       <li>最佳实践：第1级children都通过加固的CKD导出？</li>
      </ol></li>
     <li>HD path表示（略）</li>
    </ol></li>
   <li>Advanced Keys and Addresses</li>
   <li>Pay-to-Script Hash（P2SH）与Multi-Sig地址（BIP0016） 
    <ol>
     <li>A P2SH地址从一个transaction script创建，定义了谁可以spend a transaction output（有主的钱包？） 
      <ol>
       <li>注意，向P2SH地址支付需要多方参与！</li>
      </ol></li>
     <li>多签名地址与P2SH：M-of-N</li>
    </ol></li>
   <li>Vanity地址（包含了人类可读的信息） 
    <ol>
     <li>由于SHA256，找到这么个地址并不容易（取决于子模式的长度）</li>
    </ol></li>
   <li>Paper Wallets：印在纸上的私钥？ 
    <ol>
     <li>BIP0038增强</li>
     <li>一旦收到支付后，只能一次性用光，或者转移到另一个新的Paper Wallet（这让我想到了现在的礼品卡了）</li>
    </ol></li>
  </ol>
  <h2><span class="mw-headline" id=".E4.BA.8B.E5.8A.A1.EF.BC.88.E4.BA.A4.E6.98.93.EF.BC.89">事务（交易）</span></h2> 
  <ol>
   <li>由funds的拥有者签名</li>
   <li>不需要认证发送者的身份（直接转发即可，直到被miner放到blockchain中）</li>
   <li>数据结构 
    <ol>
     <li>版本？</li>
     <li>input、ouput</li>
     <li>locktime？</li>
    </ol></li>
   <li>UTXO（没有balance的概念，有点类似于数据库里的‘物化视图’的概念） 
    <ol>
     <li>不是实物，不可切割；input等于output；“change”</li>
     <li>Transactions consume UTXO by unlocking it with the signature of the current owner， 
      <dl>
       <dd>
        and create UTXO by locking it to the bitcoin address of the new owner.
       </dd>
      </dl></li>
    </ol></li>
   <li>coinbase事务：block中的第一个transaction，由挖矿竞争胜利的矿工创建，支付给他自己</li>
   <li>Transaction outputs（UTXO）： 
    <ol>
     <li>An amount of bitcoin, denominated in <strong>satoshi</strong>s（1/100000000 BTC）</li>
     <li>A locking script, 指定谁才能接受这个UTXO</li>
     <li>... requests.get('<a class="external free" href="https://blockchain.info/unspent?active=%25s%27" rel="nofollow">https://blockchain.info/unspent?active=%s'</a>&nbsp;% address)</li>
    </ol></li>
   <li>Transaction Inputs 
    <ol>
     <li>In simple terms, transaction inputs are <strong>pointers to UTXO</strong>.</li>
     <li>unlocking script：通常是拥有者对其比特币地址的签名</li>
    </ol></li>
   <li>事务费用 
    <ol>
     <li>Transaction fees are calculated based on the size of the transaction in kilobytes, not the value of the transaction in bitcoin.</li>
     <li>隐含的</li>
    </ol></li>
   <li>事务链结与孤儿事务 
    <ol>
     <li>orphan transaction pool：临时存放引用了parent，但parent还未知的child事务</li>
    </ol></li>
   <li>Transaction Scripts 
    <ol>
     <li>类似与Forth？ 
      <ol>
       <li>DUP CHECKSIG OP_CHECKMULTISIG ...</li>
      </ol></li>
     <li>locking：scriptPubKey；unlock：scriptSig 
      <ol>
       <li>原来是顺序执行的，有安全漏洞,...</li>
       <li>现在，executed separately with the stack transferred between the two executions</li>
      </ol></li>
     <li>the Script： 
      <ol>
       <li>Turing Incompleteness：无循环，复杂的flow control（只有条件分支）</li>
       <li>无状态的（？）</li>
      </ol></li>
    </ol></li>
   <li>5种标准事务： 
    <ol>
     <li>pay-to-public-key-hash (P2PKH),</li>
     <li>public-key,</li>
     <li>multi-signature (limited to 15 keys),</li>
     <li>pay-to-script-hash (P2SH), 
      <ol>
       <li>p132 2 &lt;Mohammed's Public Key&gt; &lt;Partner1 Public Key&gt; &lt;Partner2 Public Key&gt; &lt;Partner3 Public Key&gt; &lt;Attorney Public Key&gt; 5 OP_CHECKMULTISIG</li>
       <li>With P2SH payments, the complex locking script is replaced with its <strong>digital fingerprint</strong>, a cryptographic hash.</li>
       <li>==&gt; <strong>redeem script</strong>（为了节省blockchain的存储！） 
        <ol>
         <li>即使redeem script有可能是invalid，P2SH本身仍然会被接受（？？？）</li>
        </ol></li>
       <li>备注：Script Hash有点类似于我设想的‘兴趣路由’</li>
      </ol></li>
     <li>data output (OP_RETURN)：用于证明某样东西在指定日期起已经存在？滥用？？ 
      <ol>
       <li>这个增加了其他存储blockchain的client的负担。。。（不过，可以用于私有链？）</li>
       <li>更糟糕的是，使用20byte的虚假目标地址来存储信息，导致unspent UTXO，溢出节点的临时内存池...</li>
       <li>OP_RETURN：创建了一个provably unspendable的output，这增加了块链的大小，但不会bloat内存池（compromise？版本0.9+） 
        <ol>
         <li>40bytes：32 byte的SHA256，加上一个DOCPROOF前缀？</li>
        </ol></li>
      </ol></li>
    </ol></li>
  </ol>
  <h2><span class="mw-headline" id=".E6.AF.94.E7.89.B9.E5.B8.81.E7.BD.91.E7.BB.9C">比特币网络</span></h2> 
  <ol>
   <li>Stratum网关代理？</li>
   <li>网络发现 
    <ol>
     <li>TCP 8333端口？</li>
     <li>BestHeight：节点当前的块链高度</li>
    </ol></li>
   <li>seed nodes</li>
   <li>消息：inventory, getblocks，getdata</li>
   <li>SPV节点（瘦客户端） 
    <ol>
     <li>SPV nodes download only the block headers and do not download the transactions included in each block. 
      <ol>
       <li>需要用到时再向peer请求？</li>
      </ol></li>
     <li>The SPV node establishes the existence of a transaction in a block by requesting a <strong>merkle path</strong> proof and by validating the <strong>proof of work</strong> in the chain of blocks. 
      <ol>
       <li>检查事务所在的block是否被6个以上的新block所引用，且其中事务unspent？ 
        <ol>
         <li>注意这里的事务一般是SPV节点钱包中已知的比特币地址</li>
         <li>==&gt; 隐私风险！#see 'Bloom Filters'</li>
        </ol></li>
      </ol></li>
     <li>可以证明存在，但是不能verify它的unspent状态 ==&gt; double-spending attack 
      <ol>
       <li><strong>随机</strong>连接到多个其他nodes？期望其中至少有一个honest节点 
        <ol>
         <li>==&gt; SPV nodes also are vulnerable to network partitioning attacks or Sybil attacks</li>
        </ol></li>
      </ol></li>
     <li>getheaders消息</li>
    </ol></li>
   <li>Bloom Filters（这让我想起了密码学里的零知识证明） 
    <ol>
     <li>offer an efficient way to express a <strong>search pattern</strong>（搜索模式） while protecting privacy.</li>
     <li>filterload消息 
      <ol>
       <li>交互式的filteradd</li>
      </ol></li>
    </ol></li>
   <li>Transaction Pools</li>
   <li>Alert Messages</li>
  </ol>
  <h2><span class="mw-headline" id=".E5.9D.97.E9.93.BE">块链</span></h2> 
  <ol>
   <li>linked-back list 
    <ol>
     <li>“previous block hash”（块链概念的精髓所在）</li>
    </ol></li>
   <li>metadata in LevelDB</li>
   <li>Although a block has just one parent, it can temporarily have multiple children. (Fork) 
    <ol>
     <li>when different blocks are discovered almost <strong>simultaneously</strong> by different miners</li>
    </ol></li>
   <li>80个字节的Block Header 
    <ol>
     <li>The second set of metadata, namely the difficulty, timestamp, and nonce,（挖矿竞争）</li>
     <li>Merkle树根</li>
    </ol></li>
   <li>Block Identifiers: Block Header Hash（2次SHA256） and Block Height 
    <ol>
     <li>例如，第一个块头部的hash：000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f</li>
    </ol></li>
   <li>The Genesis Block</li>
   <li>Linking Blocks in the Blockchain 
    <ol>
     <li>检查新block的previousblockhash域</li>
    </ol></li>
   <li>Merkle Trees 
    <ol>
     <li>double-SHA256</li>
     <li>技术细节：如果奇数个事务，最后一个重复！</li>
     <li>？证明某个transaction在指定block中（仅有根hash怎么做？by retrieving a small merkle path？）</li>
     <li>与SPV 
      <ol>
       <li>peer的merkleblock消息（包含了tranaction所在的block头部，以及merkle path）——哦，需要‘计算’来验证！</li>
      </ol></li>
    </ol></li>
  </ol>
  <h2><span class="mw-headline" id=".E6.8C.96.E7.9F.BF.E4.B8.8EConsensus">挖矿与Consensus</span></h2> 
  <ol>
   <li>miner：构造一个candidate block（候选块）</li>
   <li>事务优先级：age，fees（size） 
    <ol>
     <li>高优先级：&gt;57600000</li>
     <li>初始的50KB事务空间，regardless of fee？（注意，矿工本身挖到矿有25BTC奖励）</li>
    </ol></li>
   <li>注意：这里的blockchain确认过程与数据库的WAL日志有点类似之处</li>
   <li>generation/coinbase事务：不消耗UTXO，creates bitcoin from nothing 
    <ol>
     <li>out value = 25BTC + 块内所有事务的手续费 
      <ol>
       <li>reward计算：初始50BTC，每210000块减半，当前是25BTC，但2016年某个时候就会变成12.5BTC</li>
      </ol></li>
     <li>input：32B Transaction Hash=0（不代表UTXO引用）, 4B Output Index=-1, 2~100B Coinbase Data（可被miner随意使用）, 4B Sequence Number=-1 
      <ol>
       <li>BIP0034，version-2 blocks MUST contain the height index as a script "push" 
        <ol>
         <li>以#277316为例，03（push）-443b04（小端编码的height index）-03858402062（extra nonce）-2f503253482f（‘/P2SH/’，#BIP0016） 
          <ol>
           <li>BIP0017：‘p2sh/CHV’</li>
          </ol></li>
        </ol></li>
      </ol></li>
    </ol></li>
   <li>构造块头部 
    <ol>
     <li>4B Version</li>
     <li>32B Prev Block Hash</li>
     <li>32B Merkle Root</li>
     <li>4B Timestamp</li>
     <li>4B Diffiulty Target（mantissa指数编码？） 
      <ol>
       <li>以#277316为例，0x1903a30c，19是指数，3a30c是系数</li>
       <li>target = coefficient * 2 ^ (8 * (exponent-3))，大约相当于前缀60bit=0</li>
      </ol></li>
     <li>4B Nonce（用于Proof-of-Work算法的计数器）</li>
    </ol></li>
   <li>头部构造完之后，可以开始‘挖矿’：寻找一个Nonce值（最多尝试2^32次），使得头部Hash&lt;difficulty target（？）</li>
   <li>Proof-of-Work算法 
    <ol>
     <li>先解释了一下SHA256的特性...</li>
     <li>降低target（这意味着要求SHA256输出结果有更多的前缀0），则难度增加</li>
     <li>备注：所谓的比特币挖矿专用ASIC其实就是SHA256的硬件实现？</li>
     <li>... 幸运的是，整个网络的处理能力是100 petahashes per second（PH/sec）</li>
    </ol></li>
   <li>Difficulty retargeting 
    <ol>
     <li>网络必须保证每10分钟产生一个block，不多也不少？</li>
     <li>自动地，每2016个块： 
      <ol>
       <li>度量最近的2016个块的产生时间，与20160分钟比较，比率用来调整Difficulty</li>
      </ol></li>
    </ol></li>
   <li>啊，太神奇啦</li>
   <li>Validating a New Block 
    <ol>
     <li>CheckBlock（对比之前针对Transaction的CheckInputs）</li>
    </ol></li>
   <li>main chain：具有最高的累积困难度，在大多数情况下也是拥有最多块的链 
    <ol>
     <li>branch chain可以临时保留，如果它将来的累积困难度超过了main chain</li>
     <li>orphan block</li>
     <li>最终的network-wide consensus</li>
     <li>？Mining nodes “vote” with their power by choosing which chain to extend（感觉这里可能是个漏洞？因为涉及到分布式系统的一致性选举...）</li>
    </ol></li>
   <li>Blockchain Forks 
    <ol>
     <li>Forks are almost always resolved within one block.</li>
     <li>（理论上可能）一个Fork扩展到2个blocks，——然而发生的可能性很小！</li>
    </ol></li>
   <li>Extra Nonce 
    <ol>
     <li>遍历所有Nonce都没有找到？增加Timestamp！==&gt;使用Coinbase事务的额外空间</li>
    </ol></li>
   <li>Mining Pools：这在技术上意味着需要拆分Nonce的遍历空间？ 
    <ol>
     <li>set an easier target？</li>
     <li>Managed Pools</li>
     <li>P2Pool：share chain（一个困难度小于比特币的块链）？</li>
     <li>51% attack问题</li>
    </ol></li>
   <li>Consensus Attacks 
    <ol>
     <li>只能影响最近的块，导致针对future blocks创建的DoS破坏</li>
     <li>A 51% attack允许double-spend in the new chain... 
      <ol>
       <li>To prevent，大笔支付必须等待至少6个确认</li>
      </ol></li>
     <li>对于特定事务的DoS攻击（只需忽略这些事务即可）</li>
    </ol></li>
  </ol>
  <h2><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E9.93.BE.E3.80.81.E5.B8.81.E4.B8.8E.E5.BA.94.E7.94.A8">其他链、币与应用</span></h2> 
  <ol>
   <li>Meta Coins：implemented on top of bitcoin 
    <ol>
     <li>Colored Coins：同时也作为其他资产（股份？）的标记</li>
     <li>Mastercoin：？ 
      <ol>
       <li>“exodus”address (1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P)</li>
      </ol></li>
     <li>Counterparty：都使用OP_RETURN来编码metadata？</li>
    </ol></li>
   <li>Alt Coins：从比特币源代码基础上定制修改的 
    <ol>
     <li>IXCoin：降低了难度，并把奖励提高到96BTC？</li>
     <li>Tenebrix：另一个PoW算法scrypt，内存密集，用于抵抗GPU/ASIC挖矿？Litecoin的基础</li>
     <li>Litecoin：更快的块生成时间：10m -&gt; 2.5m 
      <ol>
       <li>touted as “silver to bitcoin's gold”</li>
       <li>囧：Creating an alt coin is easy, which is why there are now more than 500 of them</li>
      </ol></li>
     <li>Evaluating an Alt Coin</li>
     <li>Monetary Parameter Alternatives: Litecoin, Dogecoin, Freicoin 
      <ol>
       <li>Litecoin 
        <ol>
         <li>Consensus algorithm: <strong>Scrypt proof of work</strong></li>
        </ol></li>
       <li>Dogecoin：Litecoin的修改版 
        <ol>
         <li>块生成时间：60s？靠</li>
        </ol></li>
       <li>Freicoin：<strong>demurrage currency</strong>；鼓励消费，不鼓励守财奴？通货膨胀？？</li>
      </ol></li>
     <li>Consensus Innovation: Peercoin, Myriad, Blackcoin, Vericoin, NXT 
      <ol>
       <li><strong>Proof of stake</strong> is a system by which existing owners of a currency can “stake” currency as interest-bearing collateral. （存钱能收利息？？？囧）</li>
       <li>Peercoin</li>
       <li>Myriad：同时使用5个不同的PoW：SHA256d, Scrypt, Qubit, Skein, or Myriad-Groestl（疯了，有这个必要吗） 
        <ol>
         <li>抵御ASIC挖矿？？？</li>
        </ol></li>
       <li>Blackcoin：introducing “multipools” </li>
       <li>VeriCoin：可变利率？？？</li>
       <li>NXT：单独的实现，非比特币fork，2.0 cryptocurrency？</li>
      </ol></li>
     <li>Dual-Purpose Mining Innovation: Primecoin, Curecoin, Gridcoin 
      <ol>
       <li>比特币的PoW被批评为‘wasteful’？？</li>
       <li>Primecoin 
        <ol>
         <li>PoW：computing Cunningham and bi-twin prime chains？</li>
        </ol></li>
       <li>Curecoin 
        <ol>
         <li>PoW：protein-folding research through the Folding@Home project</li>
        </ol></li>
       <li>Gridcoin：Proof-of-work with BOINC grid computing subsidy</li>
      </ol></li>
     <li>Anonymity-Focused Alt Coins: 
      <ol>
       <li>Zerocash/Zerocoin：理论研究，not released yet</li>
       <li>CryptoNote 
        <ol>
         <li>has a built-in periodic reset mechanism that makes it unusable as a currency itself ？</li>
        </ol></li>
       <li>Bytecoin（BCN）</li>
       <li>Monero</li>
       <li>Darkcoin 
        <ol>
         <li>使用11轮不同的hash函数：blake, bmw, groestl, jh, keccak, skein, luffa, cubehash, shavite, simd, echo</li>
        </ol></li>
      </ol></li>
     <li>Noncurrency Alt Chains 
      <ol>
       <li>Namecoin 
        <ol>
         <li>名字空间：d/用于.bit域名，id/用于PGP，u/ 
          <ol>
           <li>Namecoin registrations need to be updated every 36,000 blocks，更新没有费用？</li>
          </ol></li>
        </ol></li>
       <li>Bitmessage：a server-less encrypted email system</li>
       <li>Ethereum 
        <ol>
         <li>a Turing-complete contract processing and execution platform based on a blockchain ledger 
          <ol>
           <li>‘图灵完全’的合同契约，什么鬼</li>
          </ol></li>
         <li>完全独立的设计/实现？</li>
         <li>contract：运行在每一个node上，acting as decentralized autonomous software agents</li>
         <li>Namecoin可用Ethereum来实现？</li>
        </ol></li>
      </ol></li>
    </ol></li>
  </ol>
  <h2><span class="mw-headline" id=".E5.AE.89.E5.85.A8">安全</span></h2> 
  <ol>
   <li>decentralization</li>
   <li>用户安全最佳实践 
    <ol>
     <li>？Holding bitcoin on a computer serves to focus the user's mind on the need for improved computer security.</li>
     <li>Physical Bitcoin Storage</li>
     <li>Hardware Wallets：bitcoin key的加密存储太复杂，而最终又丢失了master key，.... 蠢货</li>
     <li>Diversifying Risk</li>
     <li>Multi-sig and Governance</li>
     <li>Survivability</li>
    </ol></li>
  </ol>
  <h2><span class="mw-headline" id="A_Transaction_Script_Language_Operators.2C_Constants.2C_and_Symbols">A Transaction Script Language Operators, Constants, and Symbols</span></h2> 
  <h2><span class="mw-headline" id="B_BIP">B BIP</span></h2> 
  <h2><span class="mw-headline" id="C_pycoin.2C_ku.2C_and_tx">C pycoin, ku, and tx</span></h2> 
  <h2><span class="mw-headline" id="D_Available_Commands_with_sx_Tools">D Available Commands with sx Tools</span></h2> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/cteng/article/details/51078190,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/cteng/article/details/51078190,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
