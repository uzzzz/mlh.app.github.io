<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>PE框架学习之道：PE框架——发送报文流程 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="PE框架学习之道：PE框架——发送报文流程" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="PE框架发送报文，适用于PE及VX技术 &nbsp; 步骤： 1.在action中使用发送报文，要指定报文在router端的交易名称 2.如果使用supe.execute(context)来发送，不需要第一步 3.配置从网银到router的xml报文 4.根据网银交易名匹配到router端交易名（这里对应的是第2步，如果用第一步的方式，可以跳过） 5.在router端配置交易，记住命名空间，交易名等要一致 6.配置报文编码，转换为主机的编码（交易名对应的数字） 7.配置router到主机的报文 8.配置主机返回router的报文 9.配置router返回网银的报文 发送报文配置xml，以查询卡信息为例(CifActsQryByLHW)： 1.在Action中调用这句，就是用一个map来装载返回的报文内容 toHostMap.put(Constants.HOST_TRANSACTION_CODE,&quot;pquery.CifActsQryByLHW&quot;); 双引号中的是在router端调用的交易名称，前半部为命名空间（同时也是报文的名称） &nbsp; //还要使用这个来发送 Map&nbsp;resultMap=(Map)this.issueHostTrs(context,map);&nbsp; 使用这种方式发送报文，由于指定了router端的交易名称，所以不需要在resolver.xml中配置 &nbsp; 也可以使用super.execute(context)来发送报文，这样上面两步都不用了，不过一样要引入父类parent=&quot;BaseQueryAction&quot;，使用这种方式发送报文，报文交易名必须在common包下的resolver.xml中配置（否则不知道该调用router端的那个交易） &nbsp; &nbsp; 2.配置从网银到路由的报文fsegquery.CifActsQryByLHW.xml，放在当前交易包下, config.outbound.csxml.packets &lt;segment&gt; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;CardNo&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;xmlTag&gt;&lt;Stringname=&quot;PageNo&quot;defaultValue=&quot;0001&quot;&gt;&lt;/String&gt; &lt;/xmlTag&gt; &lt;/segment&gt; &nbsp;&nbsp;&nbsp; 格式就是fseg+报文名称.xml &nbsp; 3.在resolver.xml中配置报文名称所对应的交易id，在router端还要调用这个交易去发报文到前置。该xml在网银端common包下（如果在第1步中指定了交易名称，此步可以跳过，它其实是根据网银交易名匹配router到主机的交易名） &nbsp;&nbsp;&lt;param&nbsp;name=&quot;CifActsQryByLHW&quot;&gt;pquery.CifActsQryByLHW&lt;/param&gt; &nbsp; 前面的name就是网银交易名称，这个一般router中的和要发报文的交易都是相同的，后面的是报文名称，同时也是在router中的交易名称，pquery为命名空间 &nbsp; 4.在router包的xml内定义交易，就是上面的那个id，注意namespace和transaction要与匹配的一致 &nbsp;&nbsp;&lt;transaction&nbsp;id=&quot;CifActsQryByLHW&quot;&nbsp;template=&quot;publicQueryTemplate&quot;&gt; &nbsp;&nbsp;&nbsp;&lt;actions&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ref&nbsp;name=&quot;action&quot;&gt;CifActsQryByCardQueryAction&lt;/ref&gt; &nbsp;&nbsp;&nbsp;&lt;/actions&gt; &lt;/transaction&gt; &nbsp; 这里是在router中定义的，一般查询就是用publicQueryTemplate，有操作的用publicTwoPhaseTrsTemplate &nbsp; 5.配置从路由到前置（主机）的报文fsegpquery.CifActsQryByLHW.xml，放在router包， &nbsp;&nbsp;config.pquery.outbound.gdrcu.packets &nbsp;&lt;segment&gt; &lt;xmlTag&nbsp;tagName=&quot;card_no&quot;&gt;&lt;String&nbsp;name=&quot;CardNo&quot;&nbsp;&gt;&lt;/String&gt; &nbsp;&nbsp;&nbsp;&lt;/xmlTag&gt; &lt;xmlTag&nbsp;tagName=&quot;page_no&quot;&gt;&lt;String&nbsp;name=&quot;PageNo&quot;&nbsp;&gt;&lt;/String&gt; &nbsp;&nbsp;&nbsp;&lt;/xmlTag&gt; &lt;/segment&gt; &nbsp; 格式就是fseg+报文名称.xml &nbsp; 6.在router端定义报文对应的接口名称，就是你所发报文与接口的对应关系，因为主机使用的是自己的编码，而不是网银的编码 &nbsp;&nbsp;&lt;param&nbsp;name=&quot;pquery.CifActsQryByLHW&quot;&gt;11130004&lt;/param&gt; &nbsp; &nbsp; &nbsp; 7.配置前置到路由router的返回报文pquery.CifActsQryByLHW.xml，放在 &nbsp;&nbsp;Rotuer端 （经过第6步的转换，这里自动由p11130004.xml变为pquery.CifActsQryByLHW.xml) &nbsp;&nbsp; &lt;mapAlias&nbsp;name=&quot;parse&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;Currency&quot;&nbsp;alias=&quot;curreny&quot;&nbsp;&nbsp;/&gt; &nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;AcctState&quot;&nbsp;alias=&quot;acct_status&quot;/&gt; &nbsp;&nbsp;&lt;/mapAlias&gt; &nbsp; &nbsp; &nbsp; 格式就是P+报文名称.xml &nbsp; 如果返回的是list，如下： &lt;mapAlias&nbsp;name=&quot;parse&quot;&gt; &nbsp;&nbsp;&nbsp;&lt;mapAlias&nbsp;name=&quot;List&quot;&nbsp;alias=&quot;list&quot;&nbsp;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;AcNo&quot;&nbsp;alias=&quot;acct_no&quot;&nbsp;&nbsp;/&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/mapAlias&gt; &lt;/mapAlias&gt; &nbsp; 8.配置路由router到网银的返回报文fsegpquery.CifActsQryByLHW.xml，放在 &nbsp;&nbsp;Router端config.inbound.csxml.packets &nbsp;&nbsp;&lt;segment&gt; &lt;xmlTag&gt; &nbsp;&nbsp;&nbsp;&lt;idxField&nbsp;name=&quot;List&quot;&nbsp;&nbsp;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Group&nbsp;name=&quot;Map&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcNo&quot;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcFlag&quot;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &nbsp;&nbsp;&nbsp;&lt;/Group&gt; &lt;/idxField&gt; &lt;/xmlTag&gt; &nbsp; &lt;/segment&gt; &nbsp; 格式就是fseg+报文名称.xml &nbsp; 如果返回的是map，不是list，那么如下写： &lt;segment&gt; &nbsp; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcctNo&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcName&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;/segment&gt; 阅读更多" />
<meta property="og:description" content="PE框架发送报文，适用于PE及VX技术 &nbsp; 步骤： 1.在action中使用发送报文，要指定报文在router端的交易名称 2.如果使用supe.execute(context)来发送，不需要第一步 3.配置从网银到router的xml报文 4.根据网银交易名匹配到router端交易名（这里对应的是第2步，如果用第一步的方式，可以跳过） 5.在router端配置交易，记住命名空间，交易名等要一致 6.配置报文编码，转换为主机的编码（交易名对应的数字） 7.配置router到主机的报文 8.配置主机返回router的报文 9.配置router返回网银的报文 发送报文配置xml，以查询卡信息为例(CifActsQryByLHW)： 1.在Action中调用这句，就是用一个map来装载返回的报文内容 toHostMap.put(Constants.HOST_TRANSACTION_CODE,&quot;pquery.CifActsQryByLHW&quot;); 双引号中的是在router端调用的交易名称，前半部为命名空间（同时也是报文的名称） &nbsp; //还要使用这个来发送 Map&nbsp;resultMap=(Map)this.issueHostTrs(context,map);&nbsp; 使用这种方式发送报文，由于指定了router端的交易名称，所以不需要在resolver.xml中配置 &nbsp; 也可以使用super.execute(context)来发送报文，这样上面两步都不用了，不过一样要引入父类parent=&quot;BaseQueryAction&quot;，使用这种方式发送报文，报文交易名必须在common包下的resolver.xml中配置（否则不知道该调用router端的那个交易） &nbsp; &nbsp; 2.配置从网银到路由的报文fsegquery.CifActsQryByLHW.xml，放在当前交易包下, config.outbound.csxml.packets &lt;segment&gt; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;CardNo&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;xmlTag&gt;&lt;Stringname=&quot;PageNo&quot;defaultValue=&quot;0001&quot;&gt;&lt;/String&gt; &lt;/xmlTag&gt; &lt;/segment&gt; &nbsp;&nbsp;&nbsp; 格式就是fseg+报文名称.xml &nbsp; 3.在resolver.xml中配置报文名称所对应的交易id，在router端还要调用这个交易去发报文到前置。该xml在网银端common包下（如果在第1步中指定了交易名称，此步可以跳过，它其实是根据网银交易名匹配router到主机的交易名） &nbsp;&nbsp;&lt;param&nbsp;name=&quot;CifActsQryByLHW&quot;&gt;pquery.CifActsQryByLHW&lt;/param&gt; &nbsp; 前面的name就是网银交易名称，这个一般router中的和要发报文的交易都是相同的，后面的是报文名称，同时也是在router中的交易名称，pquery为命名空间 &nbsp; 4.在router包的xml内定义交易，就是上面的那个id，注意namespace和transaction要与匹配的一致 &nbsp;&nbsp;&lt;transaction&nbsp;id=&quot;CifActsQryByLHW&quot;&nbsp;template=&quot;publicQueryTemplate&quot;&gt; &nbsp;&nbsp;&nbsp;&lt;actions&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ref&nbsp;name=&quot;action&quot;&gt;CifActsQryByCardQueryAction&lt;/ref&gt; &nbsp;&nbsp;&nbsp;&lt;/actions&gt; &lt;/transaction&gt; &nbsp; 这里是在router中定义的，一般查询就是用publicQueryTemplate，有操作的用publicTwoPhaseTrsTemplate &nbsp; 5.配置从路由到前置（主机）的报文fsegpquery.CifActsQryByLHW.xml，放在router包， &nbsp;&nbsp;config.pquery.outbound.gdrcu.packets &nbsp;&lt;segment&gt; &lt;xmlTag&nbsp;tagName=&quot;card_no&quot;&gt;&lt;String&nbsp;name=&quot;CardNo&quot;&nbsp;&gt;&lt;/String&gt; &nbsp;&nbsp;&nbsp;&lt;/xmlTag&gt; &lt;xmlTag&nbsp;tagName=&quot;page_no&quot;&gt;&lt;String&nbsp;name=&quot;PageNo&quot;&nbsp;&gt;&lt;/String&gt; &nbsp;&nbsp;&nbsp;&lt;/xmlTag&gt; &lt;/segment&gt; &nbsp; 格式就是fseg+报文名称.xml &nbsp; 6.在router端定义报文对应的接口名称，就是你所发报文与接口的对应关系，因为主机使用的是自己的编码，而不是网银的编码 &nbsp;&nbsp;&lt;param&nbsp;name=&quot;pquery.CifActsQryByLHW&quot;&gt;11130004&lt;/param&gt; &nbsp; &nbsp; &nbsp; 7.配置前置到路由router的返回报文pquery.CifActsQryByLHW.xml，放在 &nbsp;&nbsp;Rotuer端 （经过第6步的转换，这里自动由p11130004.xml变为pquery.CifActsQryByLHW.xml) &nbsp;&nbsp; &lt;mapAlias&nbsp;name=&quot;parse&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;Currency&quot;&nbsp;alias=&quot;curreny&quot;&nbsp;&nbsp;/&gt; &nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;AcctState&quot;&nbsp;alias=&quot;acct_status&quot;/&gt; &nbsp;&nbsp;&lt;/mapAlias&gt; &nbsp; &nbsp; &nbsp; 格式就是P+报文名称.xml &nbsp; 如果返回的是list，如下： &lt;mapAlias&nbsp;name=&quot;parse&quot;&gt; &nbsp;&nbsp;&nbsp;&lt;mapAlias&nbsp;name=&quot;List&quot;&nbsp;alias=&quot;list&quot;&nbsp;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;AcNo&quot;&nbsp;alias=&quot;acct_no&quot;&nbsp;&nbsp;/&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/mapAlias&gt; &lt;/mapAlias&gt; &nbsp; 8.配置路由router到网银的返回报文fsegpquery.CifActsQryByLHW.xml，放在 &nbsp;&nbsp;Router端config.inbound.csxml.packets &nbsp;&nbsp;&lt;segment&gt; &lt;xmlTag&gt; &nbsp;&nbsp;&nbsp;&lt;idxField&nbsp;name=&quot;List&quot;&nbsp;&nbsp;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Group&nbsp;name=&quot;Map&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcNo&quot;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcFlag&quot;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &nbsp;&nbsp;&nbsp;&lt;/Group&gt; &lt;/idxField&gt; &lt;/xmlTag&gt; &nbsp; &lt;/segment&gt; &nbsp; 格式就是fseg+报文名称.xml &nbsp; 如果返回的是map，不是list，那么如下写： &lt;segment&gt; &nbsp; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcctNo&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcName&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;/segment&gt; 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-09-15T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"PE框架发送报文，适用于PE及VX技术 &nbsp; 步骤： 1.在action中使用发送报文，要指定报文在router端的交易名称 2.如果使用supe.execute(context)来发送，不需要第一步 3.配置从网银到router的xml报文 4.根据网银交易名匹配到router端交易名（这里对应的是第2步，如果用第一步的方式，可以跳过） 5.在router端配置交易，记住命名空间，交易名等要一致 6.配置报文编码，转换为主机的编码（交易名对应的数字） 7.配置router到主机的报文 8.配置主机返回router的报文 9.配置router返回网银的报文 发送报文配置xml，以查询卡信息为例(CifActsQryByLHW)： 1.在Action中调用这句，就是用一个map来装载返回的报文内容 toHostMap.put(Constants.HOST_TRANSACTION_CODE,&quot;pquery.CifActsQryByLHW&quot;); 双引号中的是在router端调用的交易名称，前半部为命名空间（同时也是报文的名称） &nbsp; //还要使用这个来发送 Map&nbsp;resultMap=(Map)this.issueHostTrs(context,map);&nbsp; 使用这种方式发送报文，由于指定了router端的交易名称，所以不需要在resolver.xml中配置 &nbsp; 也可以使用super.execute(context)来发送报文，这样上面两步都不用了，不过一样要引入父类parent=&quot;BaseQueryAction&quot;，使用这种方式发送报文，报文交易名必须在common包下的resolver.xml中配置（否则不知道该调用router端的那个交易） &nbsp; &nbsp; 2.配置从网银到路由的报文fsegquery.CifActsQryByLHW.xml，放在当前交易包下, config.outbound.csxml.packets &lt;segment&gt; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;CardNo&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;xmlTag&gt;&lt;Stringname=&quot;PageNo&quot;defaultValue=&quot;0001&quot;&gt;&lt;/String&gt; &lt;/xmlTag&gt; &lt;/segment&gt; &nbsp;&nbsp;&nbsp; 格式就是fseg+报文名称.xml &nbsp; 3.在resolver.xml中配置报文名称所对应的交易id，在router端还要调用这个交易去发报文到前置。该xml在网银端common包下（如果在第1步中指定了交易名称，此步可以跳过，它其实是根据网银交易名匹配router到主机的交易名） &nbsp;&nbsp;&lt;param&nbsp;name=&quot;CifActsQryByLHW&quot;&gt;pquery.CifActsQryByLHW&lt;/param&gt; &nbsp; 前面的name就是网银交易名称，这个一般router中的和要发报文的交易都是相同的，后面的是报文名称，同时也是在router中的交易名称，pquery为命名空间 &nbsp; 4.在router包的xml内定义交易，就是上面的那个id，注意namespace和transaction要与匹配的一致 &nbsp;&nbsp;&lt;transaction&nbsp;id=&quot;CifActsQryByLHW&quot;&nbsp;template=&quot;publicQueryTemplate&quot;&gt; &nbsp;&nbsp;&nbsp;&lt;actions&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ref&nbsp;name=&quot;action&quot;&gt;CifActsQryByCardQueryAction&lt;/ref&gt; &nbsp;&nbsp;&nbsp;&lt;/actions&gt; &lt;/transaction&gt; &nbsp; 这里是在router中定义的，一般查询就是用publicQueryTemplate，有操作的用publicTwoPhaseTrsTemplate &nbsp; 5.配置从路由到前置（主机）的报文fsegpquery.CifActsQryByLHW.xml，放在router包， &nbsp;&nbsp;config.pquery.outbound.gdrcu.packets &nbsp;&lt;segment&gt; &lt;xmlTag&nbsp;tagName=&quot;card_no&quot;&gt;&lt;String&nbsp;name=&quot;CardNo&quot;&nbsp;&gt;&lt;/String&gt; &nbsp;&nbsp;&nbsp;&lt;/xmlTag&gt; &lt;xmlTag&nbsp;tagName=&quot;page_no&quot;&gt;&lt;String&nbsp;name=&quot;PageNo&quot;&nbsp;&gt;&lt;/String&gt; &nbsp;&nbsp;&nbsp;&lt;/xmlTag&gt; &lt;/segment&gt; &nbsp; 格式就是fseg+报文名称.xml &nbsp; 6.在router端定义报文对应的接口名称，就是你所发报文与接口的对应关系，因为主机使用的是自己的编码，而不是网银的编码 &nbsp;&nbsp;&lt;param&nbsp;name=&quot;pquery.CifActsQryByLHW&quot;&gt;11130004&lt;/param&gt; &nbsp; &nbsp; &nbsp; 7.配置前置到路由router的返回报文pquery.CifActsQryByLHW.xml，放在 &nbsp;&nbsp;Rotuer端 （经过第6步的转换，这里自动由p11130004.xml变为pquery.CifActsQryByLHW.xml) &nbsp;&nbsp; &lt;mapAlias&nbsp;name=&quot;parse&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;Currency&quot;&nbsp;alias=&quot;curreny&quot;&nbsp;&nbsp;/&gt; &nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;AcctState&quot;&nbsp;alias=&quot;acct_status&quot;/&gt; &nbsp;&nbsp;&lt;/mapAlias&gt; &nbsp; &nbsp; &nbsp; 格式就是P+报文名称.xml &nbsp; 如果返回的是list，如下： &lt;mapAlias&nbsp;name=&quot;parse&quot;&gt; &nbsp;&nbsp;&nbsp;&lt;mapAlias&nbsp;name=&quot;List&quot;&nbsp;alias=&quot;list&quot;&nbsp;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;elementAlias&nbsp;name=&quot;AcNo&quot;&nbsp;alias=&quot;acct_no&quot;&nbsp;&nbsp;/&gt; &nbsp;&nbsp;&nbsp;&nbsp;&lt;/mapAlias&gt; &lt;/mapAlias&gt; &nbsp; 8.配置路由router到网银的返回报文fsegpquery.CifActsQryByLHW.xml，放在 &nbsp;&nbsp;Router端config.inbound.csxml.packets &nbsp;&nbsp;&lt;segment&gt; &lt;xmlTag&gt; &nbsp;&nbsp;&nbsp;&lt;idxField&nbsp;name=&quot;List&quot;&nbsp;&nbsp;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Group&nbsp;name=&quot;Map&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcNo&quot;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcFlag&quot;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &nbsp;&nbsp;&nbsp;&lt;/Group&gt; &lt;/idxField&gt; &lt;/xmlTag&gt; &nbsp; &lt;/segment&gt; &nbsp; 格式就是fseg+报文名称.xml &nbsp; 如果返回的是map，不是list，那么如下写： &lt;segment&gt; &nbsp; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcctNo&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;xmlTag&gt;&lt;String&nbsp;name=&quot;AcName&quot;&nbsp;&gt;&lt;/String&gt;&lt;/xmlTag&gt; &lt;/segment&gt; 阅读更多","@type":"BlogPosting","url":"/2013/09/15/1eacee3f922419dec31bc1c32c04e084.html","headline":"PE框架学习之道：PE框架——发送报文流程","dateModified":"2013-09-15T00:00:00+08:00","datePublished":"2013-09-15T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2013/09/15/1eacee3f922419dec31bc1c32c04e084.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>PE框架学习之道：PE框架——发送报文流程</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <span style="color:rgb(73,73,73);font-family:simsun;font-size:14px;line-height:21px;background-color:rgb(254,254,254);">PE框架发送报文，适用于PE及VX技术</span> 
  <div style="color:rgb(73,73,73);font-family:simsun;font-size:14px;line-height:21px;background-color:rgb(254,254,254);"> 
   <br> &nbsp;
   <div> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">步骤：</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">1.</span><span style="font-family:'宋体';font-size:10.5pt;">在<span style="font-family:'Courier New';">action</span><span style="font-family:'宋体';">中使用发送报文，要指定报文在</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">端的交易名称</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">2.</span><span style="font-family:'宋体';font-size:10.5pt;">如果使用<span style="font-family:'Courier New';">supe.execute(context)</span><span style="font-family:'宋体';">来发送，不需要第一步</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">3.</span><span style="font-family:'宋体';font-size:10.5pt;">配置从网银到<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">的</span><span style="font-family:'Courier New';">xml</span><span style="font-family:'宋体';">报文</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">4.</span><span style="font-family:'宋体';font-size:10.5pt;">根据网银交易名匹配到<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">端交易名（这里对应的是第</span><span style="font-family:'Courier New';">2</span><span style="font-family:'宋体';">步，如果用第一步的方式，可以跳过）</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">5.</span><span style="font-family:'宋体';font-size:10.5pt;">在<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">端配置交易，记住命名空间，交易名等要一致</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">6.</span><span style="font-family:'宋体';font-size:10.5pt;">配置报文编码，转换为主机的编码（交易名对应的数字）</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">7.</span><span style="font-family:'宋体';font-size:10.5pt;">配置<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">到主机的报文</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">8.</span><span style="font-family:'宋体';font-size:10.5pt;">配置主机返回<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">的报文</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;">9.</span><span style="font-family:'宋体';font-size:10.5pt;">配置<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">返回网银的报文</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-family:'宋体';font-size:10.5pt;"><br></span></p> 
   </div> 
   <div> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">发送报文配置</span><span style="font-size:10.5pt;font-family:'宋体';">xml<span style="font-family:'宋体';">，以查询卡信息为例</span><span style="font-family:'Courier New';">(CifActsQryByLHW)</span><span style="font-family:'宋体';">：</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">1.</span><span style="font-size:10.5pt;font-family:'宋体';">在<span style="font-family:'Courier New';">Action</span><span style="font-family:'宋体';">中调用这句，就是用一个</span><span style="font-family:'Courier New';">map</span><span style="font-family:'宋体';">来装载返回的报文内容</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">toHostMap.put(Constants.</span><span style="color:rgb(0,0,192);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';"><em>HOST_TRANSACTION_CODE</em></span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">,</span><span style="color:rgb(42,0,255);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">"pquery.CifActsQryByLHW"</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">);</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">双引号中的是在</span><span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">router<span style="font-family:'宋体';">端调用的交易名称，前半部为命名空间（同时也是</span></span><span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">报文的名称）</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">//</span><span style="color:rgb(0,128,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">还要使用这个来发送</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">Map&nbsp;resultMap=(Map)</span><span style="color:rgb(127,0,85);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';"><strong>this</strong></span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">.issueHostTrs(context,map);</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&nbsp;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">使用这种方式发送报文，由于指定了<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">端的交易名称，所以不需要在</span><span style="font-family:'Courier New';">resolver.xml</span><span style="font-family:'宋体';">中配置</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';"><span style="font-family:'宋体';"><br></span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">也可以使用<span style="font-family:'Courier New';">super.execute(context)</span><span style="font-family:'宋体';">来发送报文，这样上面两步都不用了，不过一样要引入父类</span><span style="font-family:'Courier New';">parent="BaseQueryAction"</span><span style="font-family:'宋体';">，使用这种方式发送报文，报文交易名必须在</span><span style="font-family:'Courier New';">common</span><span style="font-family:'宋体';">包下的</span><span style="font-family:'Courier New';">resolver.xml</span><span style="font-family:'宋体';">中配置（否则不知道该调用</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">端的那个交易）</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';"><span style="font-family:'宋体';"><br></span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">2.<span style="font-family:'宋体';">配置从网银到路由的报文</span><span style="font-family:'Courier New';">fsegquery.CifActsQryByLHW.xml</span><span style="font-family:'宋体';">，放在当前交易包下</span><span style="font-family:'Courier New';">,</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">config.outbound.csxml.packets</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">segment</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"CardNo"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"PageNo"</em></span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">defaultValue</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"0001"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">segment</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">&nbsp;&nbsp;&nbsp;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">格式就是<span style="font-family:'Courier New';">fseg+</span><span style="font-family:'宋体';">报文名称</span><span style="font-family:'Courier New';">.xml</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';"><span style="font-family:'Courier New';"><br></span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">3.<span style="font-family:'宋体';">在</span><span style="font-family:'Courier New';">resolver.xml</span><span style="font-family:'宋体';">中配置报文名称所对应的交易</span><span style="font-family:'Courier New';">id</span><span style="font-family:'宋体';">，在</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">端还要调用这个交易去发报文到前置。该</span><span style="font-family:'Courier New';">xml</span><span style="font-family:'宋体';">在网银端</span><span style="font-family:'Courier New';">common</span><span style="font-family:'宋体';">包下（如果在第</span><span style="font-family:'Courier New';">1</span><span style="font-family:'宋体';">步中指定了交易名称，此步可以跳过，它其实是根据网银交易名匹配</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">到主机的交易名）</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">param</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">name</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';"><em>"CifActsQryByLHW"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&gt;</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">pquery.CifActsQryByLHW</span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">param</span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">前面的</span><span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">name<span style="font-family:'宋体';">就是网银交易名称，这个一般</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">中的和要发报文的交易都是相同的，后面的是报文名称，同时也是在</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">中的交易名称，</span><span style="font-family:'Courier New';">pquery</span><span style="font-family:'宋体';">为命名空间</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';"><span style="font-family:'宋体';"><br></span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">4.<span style="font-family:'宋体';">在</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">包的</span><span style="font-family:'Courier New';">xml</span><span style="font-family:'宋体';">内定义交易，就是上面的那个</span><span style="font-family:'Courier New';">id</span><span style="font-family:'宋体';">，注意</span><span style="font-family:'Courier New';">namespace</span><span style="font-family:'宋体';">和</span><span style="font-family:'Courier New';">transaction</span><span style="font-family:'宋体';">要与匹配的一致</span></span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">transaction</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">id</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"CifActsQryByLHW"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">template</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"publicQueryTemplate"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">actions</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">ref</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"action"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span><span style="font-size:10.5pt;font-family:'Courier new';">CifActsQryByCardQueryAction</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">ref</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">actions</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">transaction</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';"><br></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;font-family:'宋体';">这里是在<span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">中定义的，一般查询就是用</span><span style="font-family:'Courier New';">publicQueryTemplate</span><span style="font-family:'宋体';">，有操作的用</span></span><span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';"><em>publicTwoPhaseTrsTemplate</em></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';"><em><br></em></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">5.<span style="font-family:'宋体';">配置从路由到前置（主机）的报文</span><span style="font-family:'Courier New';">fsegpquery.CifActsQryByLHW.xml</span><span style="font-family:'宋体';">，放在</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">包，</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;config.pquery.outbound.gdrcu.packets</span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;font-family:'宋体';">&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">segment</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'宋体';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">tagName</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"card_no"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"CardNo"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">tagName</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"page_no"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"PageNo"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">segment</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">格式就是<span style="font-family:'Courier New';">fseg+</span><span style="font-family:'宋体';">报文名称</span><span style="font-family:'Courier New';">.xml</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';"><span style="font-family:'Courier New';"><br></span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">6.<span style="font-family:'宋体';">在</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">端定义报文对应的接口名称，就是你所发报文与接口的对应关系，因为主机使用的是自己的编码，而不是网银的编码</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">param</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">name</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';"><em>"pquery.CifActsQryByLHW"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&gt;</span><span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">11130004</span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">param</span><span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'Courier new';"><br></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">7.<span style="font-family:'宋体';">配置前置到路由</span><span style="font-family:'Courier New';">router</span><span style="font-family:'宋体';">的返回报文</span><span style="font-family:'Courier New';">pquery.CifActsQryByLHW.xml</span><span style="font-family:'宋体';">，放在</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;</span><span style="font-size:10.5pt;font-family:'Courier new';">Rotuer</span><span style="font-size:10.5pt;font-family:'宋体';">端</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'宋体';">（经过第<span style="font-family:'Courier New';">6</span><span style="font-family:'宋体';">步的转换，这里自动由</span><span style="font-family:'Courier New';">p11130004.xml</span><span style="font-family:'宋体';">变为</span><span style="font-family:'Courier New';">pquery.CifActsQryByLHW.xml)</span></span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">mapAlias</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"parse"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">elementAlias</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"Currency"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">alias</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"curreny"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">/&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">elementAlias</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"AcctState"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">alias</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"acct_status"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">/&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/mapAlias&gt;</span></p> 
    <p style="border:0px;list-style:none;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">格式就是<span style="font-family:'Courier New';">P+</span><span style="font-family:'宋体';">报文名称</span><span style="font-family:'Courier New';">.xml</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';"><span style="font-family:'Courier New';"><br></span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">如果返回的<span style="font-family:'宋体';">是</span><span style="font-family:'Courier New';">list</span><span style="font-family:'宋体';">，如下：</span></span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">mapAlias</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"parse"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">mapAlias</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"List"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">alias</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"list"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">elementAlias</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"AcNo"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">alias</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"acct_no"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">/&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'宋体';">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">mapAlias</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">mapAlias</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';"><br></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'Courier new';">8.</span><span style="font-size:10.5pt;font-family:'Courier new';">配置路由router到网银的返回报文fsegpquery.CifActsQryByLHW.xml，放在</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;</span><span style="font-size:10.5pt;font-family:'宋体';">Router<span style="font-family:'宋体';">端</span></span><span style="font-size:10.5pt;font-family:'Courier new';">config.inbound.csxml.packets</span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">segment</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">idxField</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"List"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">Group</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"Map"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"AcNo"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"AcFlag"</em></span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&nbsp;&nbsp;&nbsp;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">Group</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">idxField</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">segment</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">格式就是<span style="font-family:'Courier New';">fseg+</span><span style="font-family:'宋体';">报文名称</span><span style="font-family:'Courier New';">.xml</span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="color:rgb(255,0,0);font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';"><span style="font-family:'Courier New';"><br></span></span></p> 
    <p style="border:0px;list-style:none;text-align:justify;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;text-align:justify;"> <span style="font-size:10.5pt;background-color:rgb(255,255,255);font-family:'宋体';">如果返回的是<span style="font-family:'Courier New';">map</span><span style="font-family:'宋体';">，不是</span><span style="font-family:'Courier New';">list</span><span style="font-family:'宋体';">，那么如下写：</span></span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;background-color:rgb(192,192,192);font-family:'Courier new';">segment</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> &nbsp;</p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"AcctNo"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(127,0,127);font-size:10.5pt;font-family:'Courier new';">name</span><span style="font-size:10.5pt;font-family:'Courier new';">=</span><span style="color:rgb(42,0,255);font-size:10.5pt;font-family:'Courier new';"><em>"AcName"</em></span><span style="font-size:10.5pt;font-family:'Courier new';">&nbsp;</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">String</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;&lt;/</span><span style="color:rgb(63,127,127);font-size:10.5pt;font-family:'Courier new';">xmlTag</span><span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&gt;</span></p> 
    <p style="border:0px;list-style:none;"> <span style="color:rgb(0,128,128);font-size:10.5pt;font-family:'Courier new';">&lt;/segment&gt;</span></p> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u011511429/article/details/11715537,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u011511429/article/details/11715537,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
