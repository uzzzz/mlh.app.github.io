<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>基于以太坊的智能合约开发教程[Solidity] 第一篇：Solidity智能合约基础实战 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="基于以太坊的智能合约开发教程[Solidity] 第一篇：Solidity智能合约基础实战" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="第一篇：Solidity智能合约基础实战 第一节 实现自己的第一个智能合约 1. 描述一个对象有两种方式 ①属性、状态 ②行为 2.代码 pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string){ return Myname; } function changeName(string _newName) public{ Myname = _newName; } } 错误信息： （1） browser/HelloWorld.sol:6:44: TypeError: Data location must be &quot;memory&quot; for return parameter in function, but none was given. function getName() public view returns(string){ ^----^ function getName() public view returns(string) 修改为： function getName() public view returns(string memory) （2） browser/HelloWorld.sol:10:25: TypeError: Data location must be &quot;memory&quot; for parameter in function, but none was given. function changeName(string _newName) public{ ^-------------^ function changeName(string _newName) public 修改为： function changeName(string memory _newName) public 修改后： pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string memory){ return Myname; } function changeName(string memory _newName) public{ Myname = _newName; } } 第二节 节省gas的利器pure和view 1. 代码 pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string memory){ return Myname; } function changeName(string memory _newName) public{ Myname = _newName; } function pureTest(string memory _name) pure public returns(string memory){ return _name; } } view、pure不消耗gas 函数changeName()需要改变状态变量，因此需要全网节点来同步，会消耗gas 第三节 真假bool值 1.代码 pragma solidity ^0.5.0; contract BooleanTest{ bool _a; int num1 = 100; int num2 = 200; function getBool() public view returns(bool){ return _a; } function getBool2() public view returns(bool){ return !_a; } function panduan() public view returns(bool){ return num1==num2; } function panduan2() public view returns(bool){ return num1!=num2; } function yu() public view returns(bool){ return (num1==num2) &amp;&amp; true; } function yu2() public view returns(bool){ return (num1!=num2) &amp;&amp; true; } function huo() public view returns(bool){ return (num1==num2) &amp;&amp; true; } function huo2() public view returns(bool){ return (num1!=num2) &amp;&amp; true; } function huo3() public view returns(bool){ return (num1==num2) &amp;&amp; false; } } 第四节 整型特性与运算 1.代码 pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } int 代表可正可负，uint 只能代表正。 第五节 底层位运算 1.六个操作符 &amp; | ~ ^ &lt;&lt; &gt;&gt; 2.代码 pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } uint8 a = 3; uint8 b = 4; function weiyu() pure public returns(uint){ return a&amp;b; } function weihuo() pure public returns(uint){ return a|b; } function weifan() pure public returns(uint){ return ~a; } function weiyihuo() pure public returns(uint){ return a^b; } function zuoyi() pure public returns(uint){ return a&lt;&lt;1; } function youyi() pure public returns(uint){ return a&gt;&gt;1; } } 错误提示: browser/Math.sol:44:16: TypeError: Function declared as pure, but this expression (potentially) reads from the environment or state and thus requires &quot;view&quot;. return a&amp;b; 把function weiyu() pure public returns(uint) 修改为： function weiyu() view public returns(uint) 修改后代码： pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; // function add() view public returns(uint){ // return numa + numb; // } function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } uint8 a = 3; uint8 b = 4; function weiyu() view public returns(uint){ return a&amp;b; } function weihuo() view public returns(uint){ return a|b; } function weifan() view public returns(uint){ return ~a; } function weiyihuo() view public returns(uint){ return a^b; } function zuoyi() view public returns(uint){ return a&lt;&lt;1; } function youyi() view public returns(uint){ return a&gt;&gt;1; } } 第六节 危险的整数溢出以及异常处理 1. 代码 function flow() view public returns(uint){ uint8 mm = 255; mm++; return mm; //溢出，返回0 } function flow2() view public returns(uint){ uint8 mm = 0; mm--; return mm; //溢出，返回255 } function errorTest() public returns(int){ int a = 2; int b = 0; 不能执行除零 return a/b; } ***错误提示：*** function flow() view public returns(uint){ uint8 mm = 255; mm++; return mm; } function flow2() view public returns(uint){ uint8 mm = 0; mm--; return mm; } function errorTest() public returns(int){ int a = 2; //int b = 0; 不能执行除零 //return a/b; int b = -1; a&lt;&lt;b; } ***错误提示：*** 第七节 整数字面量 1.代码 function intergerTest() public returns(uint){ uint num = (2**800+1)-2**800; return num; } function intergerTest2() public returns(uint){ // uint num = 2/4.0; 报错，如下所示 uint num = 2/4.0*1000; return num; } function intergerTest3() public returns(uint){ uint num = 111111111111111111111111111111111111111111112- 111111111111111111111111111111111111111111111; return num; } uint num = 2/4.0 错误提示： browser/Math.sol:93:9: TypeError: Type rational_const 1 / 2 is not implicitly convertible to expected type uint256. Try converting to type ufixed8x1 or use an explicit conversion. uint num = 2/4.0; ^--------------^ 总结： 满足精度的需要，可以计算出来只看最后的结果满不满足，赋值给最后的变量 第八节 固定长度字节数组 1. 关键字有：bytes1,bytes2,bytes3,…,bytes32。（以步长1递增） byte代表bytes1 2.代码 pragma solidity ^0.5.0; contract ByteArray{ // 0x7a68656e676a69616e78756e bytes1 public num1 = 0x7a; // 0111 1010 // 加上public后可以自动get到该变量 bytes2 public num2 = 0x7a68; // 0111 1010 0110 1000 bytes12 public num3 = 0x7a68656e676a69616e78756e; function getLength() public returns(uint){ return num1.length; //output: &quot;uint256: 1&quot; } function getLength2() public returns(uint){ return num2.length; //output: &quot;uint256: 2&quot; } function getLength3() public returns(uint){ return num3.length; //output: &quot;uint256: 12&quot; } } Length不能被修改 function setLength(){ num1.length=18; } 错误信息： browser/ByteArray.sol:22:5: ParserError: Expected pragma, import directive or contract/interface/library definition. function setLength(){ ^------^ 第九节 固定长度字节数组深入 1. 代码 pragma solidity ^0.5.0; contract ByteArray{ // 0x7a68656e676a69616e78756e bytes1 public num1 = 0x7a; // 0111 1010 bytes2 public num2 = 0x7a68; // 0111 1010 0110 1000 bytes12 public num3 = 0x7a68656e676a69616e78756e; bytes1 public a = 0x7a; //新增 bytes1 public b = 0x68; //新增 function getLength() public returns(uint){ return num1.length; } function getLength2() public returns(uint){ return num2.length; } function getLength3() public returns(uint){ return num3.length; } // 新增比较操作 function bijiao() public returns(bool){ return a&gt;b; } function bijiao2() public returns(bool){ return a&gt;=b; } function bijiao3() public returns(bool){ return a&lt;b; } function bijiao4() public returns(bool){ return a&lt;=b; } function bijiao5() public returns(bool){ return a==b; } function bijiao6() public returns(bool){ return a!=b; } //新增位操作 function weiyu() view public returns(bytes1){ return a&amp;b; //0x68 } function weihuo() view public returns(bytes1){ return a|b; //0x7a } function weifan() view public returns(bytes1){ return ~a; // 0x85 } function weiyihuo() view public returns(bytes1){ return a^b; //0x12 } function zuoyi() view public returns(bytes1){ return a&lt;&lt;1; // 0xf4 } function youyi() view public returns(bytes1){ return a&gt;&gt;1; // 0x3d } } 第十节 动态字节数组 1. 代码 pragma solidity ^0.5.0; contract DynamicByte{ bytes public name = new bytes(2); //新建bytes数组，两个空间，public动态生成get方法 function InitName() public{ name[0] = 0x7a; name[1] = 0x68; } function getLength() public view returns(uint){ return name.length; } function changeName() public{ //改变名字 name[0] = 0x88; } function changeLength() public{ // 改变数组长度 name.length = 5; // 扩充长度在后（右）边加0 } function pushtest() public{ name.push(0x99); //添加元素在原来数字的后边 } }" />
<meta property="og:description" content="第一篇：Solidity智能合约基础实战 第一节 实现自己的第一个智能合约 1. 描述一个对象有两种方式 ①属性、状态 ②行为 2.代码 pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string){ return Myname; } function changeName(string _newName) public{ Myname = _newName; } } 错误信息： （1） browser/HelloWorld.sol:6:44: TypeError: Data location must be &quot;memory&quot; for return parameter in function, but none was given. function getName() public view returns(string){ ^----^ function getName() public view returns(string) 修改为： function getName() public view returns(string memory) （2） browser/HelloWorld.sol:10:25: TypeError: Data location must be &quot;memory&quot; for parameter in function, but none was given. function changeName(string _newName) public{ ^-------------^ function changeName(string _newName) public 修改为： function changeName(string memory _newName) public 修改后： pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string memory){ return Myname; } function changeName(string memory _newName) public{ Myname = _newName; } } 第二节 节省gas的利器pure和view 1. 代码 pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string memory){ return Myname; } function changeName(string memory _newName) public{ Myname = _newName; } function pureTest(string memory _name) pure public returns(string memory){ return _name; } } view、pure不消耗gas 函数changeName()需要改变状态变量，因此需要全网节点来同步，会消耗gas 第三节 真假bool值 1.代码 pragma solidity ^0.5.0; contract BooleanTest{ bool _a; int num1 = 100; int num2 = 200; function getBool() public view returns(bool){ return _a; } function getBool2() public view returns(bool){ return !_a; } function panduan() public view returns(bool){ return num1==num2; } function panduan2() public view returns(bool){ return num1!=num2; } function yu() public view returns(bool){ return (num1==num2) &amp;&amp; true; } function yu2() public view returns(bool){ return (num1!=num2) &amp;&amp; true; } function huo() public view returns(bool){ return (num1==num2) &amp;&amp; true; } function huo2() public view returns(bool){ return (num1!=num2) &amp;&amp; true; } function huo3() public view returns(bool){ return (num1==num2) &amp;&amp; false; } } 第四节 整型特性与运算 1.代码 pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } int 代表可正可负，uint 只能代表正。 第五节 底层位运算 1.六个操作符 &amp; | ~ ^ &lt;&lt; &gt;&gt; 2.代码 pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } uint8 a = 3; uint8 b = 4; function weiyu() pure public returns(uint){ return a&amp;b; } function weihuo() pure public returns(uint){ return a|b; } function weifan() pure public returns(uint){ return ~a; } function weiyihuo() pure public returns(uint){ return a^b; } function zuoyi() pure public returns(uint){ return a&lt;&lt;1; } function youyi() pure public returns(uint){ return a&gt;&gt;1; } } 错误提示: browser/Math.sol:44:16: TypeError: Function declared as pure, but this expression (potentially) reads from the environment or state and thus requires &quot;view&quot;. return a&amp;b; 把function weiyu() pure public returns(uint) 修改为： function weiyu() view public returns(uint) 修改后代码： pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; // function add() view public returns(uint){ // return numa + numb; // } function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } uint8 a = 3; uint8 b = 4; function weiyu() view public returns(uint){ return a&amp;b; } function weihuo() view public returns(uint){ return a|b; } function weifan() view public returns(uint){ return ~a; } function weiyihuo() view public returns(uint){ return a^b; } function zuoyi() view public returns(uint){ return a&lt;&lt;1; } function youyi() view public returns(uint){ return a&gt;&gt;1; } } 第六节 危险的整数溢出以及异常处理 1. 代码 function flow() view public returns(uint){ uint8 mm = 255; mm++; return mm; //溢出，返回0 } function flow2() view public returns(uint){ uint8 mm = 0; mm--; return mm; //溢出，返回255 } function errorTest() public returns(int){ int a = 2; int b = 0; 不能执行除零 return a/b; } ***错误提示：*** function flow() view public returns(uint){ uint8 mm = 255; mm++; return mm; } function flow2() view public returns(uint){ uint8 mm = 0; mm--; return mm; } function errorTest() public returns(int){ int a = 2; //int b = 0; 不能执行除零 //return a/b; int b = -1; a&lt;&lt;b; } ***错误提示：*** 第七节 整数字面量 1.代码 function intergerTest() public returns(uint){ uint num = (2**800+1)-2**800; return num; } function intergerTest2() public returns(uint){ // uint num = 2/4.0; 报错，如下所示 uint num = 2/4.0*1000; return num; } function intergerTest3() public returns(uint){ uint num = 111111111111111111111111111111111111111111112- 111111111111111111111111111111111111111111111; return num; } uint num = 2/4.0 错误提示： browser/Math.sol:93:9: TypeError: Type rational_const 1 / 2 is not implicitly convertible to expected type uint256. Try converting to type ufixed8x1 or use an explicit conversion. uint num = 2/4.0; ^--------------^ 总结： 满足精度的需要，可以计算出来只看最后的结果满不满足，赋值给最后的变量 第八节 固定长度字节数组 1. 关键字有：bytes1,bytes2,bytes3,…,bytes32。（以步长1递增） byte代表bytes1 2.代码 pragma solidity ^0.5.0; contract ByteArray{ // 0x7a68656e676a69616e78756e bytes1 public num1 = 0x7a; // 0111 1010 // 加上public后可以自动get到该变量 bytes2 public num2 = 0x7a68; // 0111 1010 0110 1000 bytes12 public num3 = 0x7a68656e676a69616e78756e; function getLength() public returns(uint){ return num1.length; //output: &quot;uint256: 1&quot; } function getLength2() public returns(uint){ return num2.length; //output: &quot;uint256: 2&quot; } function getLength3() public returns(uint){ return num3.length; //output: &quot;uint256: 12&quot; } } Length不能被修改 function setLength(){ num1.length=18; } 错误信息： browser/ByteArray.sol:22:5: ParserError: Expected pragma, import directive or contract/interface/library definition. function setLength(){ ^------^ 第九节 固定长度字节数组深入 1. 代码 pragma solidity ^0.5.0; contract ByteArray{ // 0x7a68656e676a69616e78756e bytes1 public num1 = 0x7a; // 0111 1010 bytes2 public num2 = 0x7a68; // 0111 1010 0110 1000 bytes12 public num3 = 0x7a68656e676a69616e78756e; bytes1 public a = 0x7a; //新增 bytes1 public b = 0x68; //新增 function getLength() public returns(uint){ return num1.length; } function getLength2() public returns(uint){ return num2.length; } function getLength3() public returns(uint){ return num3.length; } // 新增比较操作 function bijiao() public returns(bool){ return a&gt;b; } function bijiao2() public returns(bool){ return a&gt;=b; } function bijiao3() public returns(bool){ return a&lt;b; } function bijiao4() public returns(bool){ return a&lt;=b; } function bijiao5() public returns(bool){ return a==b; } function bijiao6() public returns(bool){ return a!=b; } //新增位操作 function weiyu() view public returns(bytes1){ return a&amp;b; //0x68 } function weihuo() view public returns(bytes1){ return a|b; //0x7a } function weifan() view public returns(bytes1){ return ~a; // 0x85 } function weiyihuo() view public returns(bytes1){ return a^b; //0x12 } function zuoyi() view public returns(bytes1){ return a&lt;&lt;1; // 0xf4 } function youyi() view public returns(bytes1){ return a&gt;&gt;1; // 0x3d } } 第十节 动态字节数组 1. 代码 pragma solidity ^0.5.0; contract DynamicByte{ bytes public name = new bytes(2); //新建bytes数组，两个空间，public动态生成get方法 function InitName() public{ name[0] = 0x7a; name[1] = 0x68; } function getLength() public view returns(uint){ return name.length; } function changeName() public{ //改变名字 name[0] = 0x88; } function changeLength() public{ // 改变数组长度 name.length = 5; // 扩充长度在后（右）边加0 } function pushtest() public{ name.push(0x99); //添加元素在原来数字的后边 } }" />
<link rel="canonical" href="https://mlh.app/2019/01/17/de9e3b4af6f22bf5ee35a4b6a741a05d.html" />
<meta property="og:url" content="https://mlh.app/2019/01/17/de9e3b4af6f22bf5ee35a4b6a741a05d.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-17T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"第一篇：Solidity智能合约基础实战 第一节 实现自己的第一个智能合约 1. 描述一个对象有两种方式 ①属性、状态 ②行为 2.代码 pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string){ return Myname; } function changeName(string _newName) public{ Myname = _newName; } } 错误信息： （1） browser/HelloWorld.sol:6:44: TypeError: Data location must be &quot;memory&quot; for return parameter in function, but none was given. function getName() public view returns(string){ ^----^ function getName() public view returns(string) 修改为： function getName() public view returns(string memory) （2） browser/HelloWorld.sol:10:25: TypeError: Data location must be &quot;memory&quot; for parameter in function, but none was given. function changeName(string _newName) public{ ^-------------^ function changeName(string _newName) public 修改为： function changeName(string memory _newName) public 修改后： pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string memory){ return Myname; } function changeName(string memory _newName) public{ Myname = _newName; } } 第二节 节省gas的利器pure和view 1. 代码 pragma solidity ^0.5.0; contract HelloWorld{ string Myname = &quot;lynn&quot;; function getName() public view returns(string memory){ return Myname; } function changeName(string memory _newName) public{ Myname = _newName; } function pureTest(string memory _name) pure public returns(string memory){ return _name; } } view、pure不消耗gas 函数changeName()需要改变状态变量，因此需要全网节点来同步，会消耗gas 第三节 真假bool值 1.代码 pragma solidity ^0.5.0; contract BooleanTest{ bool _a; int num1 = 100; int num2 = 200; function getBool() public view returns(bool){ return _a; } function getBool2() public view returns(bool){ return !_a; } function panduan() public view returns(bool){ return num1==num2; } function panduan2() public view returns(bool){ return num1!=num2; } function yu() public view returns(bool){ return (num1==num2) &amp;&amp; true; } function yu2() public view returns(bool){ return (num1!=num2) &amp;&amp; true; } function huo() public view returns(bool){ return (num1==num2) &amp;&amp; true; } function huo2() public view returns(bool){ return (num1!=num2) &amp;&amp; true; } function huo3() public view returns(bool){ return (num1==num2) &amp;&amp; false; } } 第四节 整型特性与运算 1.代码 pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } int 代表可正可负，uint 只能代表正。 第五节 底层位运算 1.六个操作符 &amp; | ~ ^ &lt;&lt; &gt;&gt; 2.代码 pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } uint8 a = 3; uint8 b = 4; function weiyu() pure public returns(uint){ return a&amp;b; } function weihuo() pure public returns(uint){ return a|b; } function weifan() pure public returns(uint){ return ~a; } function weiyihuo() pure public returns(uint){ return a^b; } function zuoyi() pure public returns(uint){ return a&lt;&lt;1; } function youyi() pure public returns(uint){ return a&gt;&gt;1; } } 错误提示: browser/Math.sol:44:16: TypeError: Function declared as pure, but this expression (potentially) reads from the environment or state and thus requires &quot;view&quot;. return a&amp;b; 把function weiyu() pure public returns(uint) 修改为： function weiyu() view public returns(uint) 修改后代码： pragma solidity ^0.5.0; contract math{ // int uint uint numa = 100; uint numb = 200; // uint numc = 2; // function add() view public returns(uint){ // return numa + numb; // } function add(uint a, uint b) pure public returns(uint){ return a+b; } function sub(uint a, uint b) pure public returns(uint){ return a-b; } function mul(uint a, uint b) pure public returns(uint){ return a*b; } function div(uint a, uint b) pure public returns(uint){ return a/b; } function mod(uint a, uint b) pure public returns(uint){ return a%b; } function squ(uint a,uint b) pure public returns(uint){ return a**b; } uint8 a = 3; uint8 b = 4; function weiyu() view public returns(uint){ return a&amp;b; } function weihuo() view public returns(uint){ return a|b; } function weifan() view public returns(uint){ return ~a; } function weiyihuo() view public returns(uint){ return a^b; } function zuoyi() view public returns(uint){ return a&lt;&lt;1; } function youyi() view public returns(uint){ return a&gt;&gt;1; } } 第六节 危险的整数溢出以及异常处理 1. 代码 function flow() view public returns(uint){ uint8 mm = 255; mm++; return mm; //溢出，返回0 } function flow2() view public returns(uint){ uint8 mm = 0; mm--; return mm; //溢出，返回255 } function errorTest() public returns(int){ int a = 2; int b = 0; 不能执行除零 return a/b; } ***错误提示：*** function flow() view public returns(uint){ uint8 mm = 255; mm++; return mm; } function flow2() view public returns(uint){ uint8 mm = 0; mm--; return mm; } function errorTest() public returns(int){ int a = 2; //int b = 0; 不能执行除零 //return a/b; int b = -1; a&lt;&lt;b; } ***错误提示：*** 第七节 整数字面量 1.代码 function intergerTest() public returns(uint){ uint num = (2**800+1)-2**800; return num; } function intergerTest2() public returns(uint){ // uint num = 2/4.0; 报错，如下所示 uint num = 2/4.0*1000; return num; } function intergerTest3() public returns(uint){ uint num = 111111111111111111111111111111111111111111112- 111111111111111111111111111111111111111111111; return num; } uint num = 2/4.0 错误提示： browser/Math.sol:93:9: TypeError: Type rational_const 1 / 2 is not implicitly convertible to expected type uint256. Try converting to type ufixed8x1 or use an explicit conversion. uint num = 2/4.0; ^--------------^ 总结： 满足精度的需要，可以计算出来只看最后的结果满不满足，赋值给最后的变量 第八节 固定长度字节数组 1. 关键字有：bytes1,bytes2,bytes3,…,bytes32。（以步长1递增） byte代表bytes1 2.代码 pragma solidity ^0.5.0; contract ByteArray{ // 0x7a68656e676a69616e78756e bytes1 public num1 = 0x7a; // 0111 1010 // 加上public后可以自动get到该变量 bytes2 public num2 = 0x7a68; // 0111 1010 0110 1000 bytes12 public num3 = 0x7a68656e676a69616e78756e; function getLength() public returns(uint){ return num1.length; //output: &quot;uint256: 1&quot; } function getLength2() public returns(uint){ return num2.length; //output: &quot;uint256: 2&quot; } function getLength3() public returns(uint){ return num3.length; //output: &quot;uint256: 12&quot; } } Length不能被修改 function setLength(){ num1.length=18; } 错误信息： browser/ByteArray.sol:22:5: ParserError: Expected pragma, import directive or contract/interface/library definition. function setLength(){ ^------^ 第九节 固定长度字节数组深入 1. 代码 pragma solidity ^0.5.0; contract ByteArray{ // 0x7a68656e676a69616e78756e bytes1 public num1 = 0x7a; // 0111 1010 bytes2 public num2 = 0x7a68; // 0111 1010 0110 1000 bytes12 public num3 = 0x7a68656e676a69616e78756e; bytes1 public a = 0x7a; //新增 bytes1 public b = 0x68; //新增 function getLength() public returns(uint){ return num1.length; } function getLength2() public returns(uint){ return num2.length; } function getLength3() public returns(uint){ return num3.length; } // 新增比较操作 function bijiao() public returns(bool){ return a&gt;b; } function bijiao2() public returns(bool){ return a&gt;=b; } function bijiao3() public returns(bool){ return a&lt;b; } function bijiao4() public returns(bool){ return a&lt;=b; } function bijiao5() public returns(bool){ return a==b; } function bijiao6() public returns(bool){ return a!=b; } //新增位操作 function weiyu() view public returns(bytes1){ return a&amp;b; //0x68 } function weihuo() view public returns(bytes1){ return a|b; //0x7a } function weifan() view public returns(bytes1){ return ~a; // 0x85 } function weiyihuo() view public returns(bytes1){ return a^b; //0x12 } function zuoyi() view public returns(bytes1){ return a&lt;&lt;1; // 0xf4 } function youyi() view public returns(bytes1){ return a&gt;&gt;1; // 0x3d } } 第十节 动态字节数组 1. 代码 pragma solidity ^0.5.0; contract DynamicByte{ bytes public name = new bytes(2); //新建bytes数组，两个空间，public动态生成get方法 function InitName() public{ name[0] = 0x7a; name[1] = 0x68; } function getLength() public view returns(uint){ return name.length; } function changeName() public{ //改变名字 name[0] = 0x88; } function changeLength() public{ // 改变数组长度 name.length = 5; // 扩充长度在后（右）边加0 } function pushtest() public{ name.push(0x99); //添加元素在原来数字的后边 } }","@type":"BlogPosting","url":"https://mlh.app/2019/01/17/de9e3b4af6f22bf5ee35a4b6a741a05d.html","headline":"基于以太坊的智能合约开发教程[Solidity] 第一篇：Solidity智能合约基础实战","dateModified":"2019-01-17T00:00:00+08:00","datePublished":"2019-01-17T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/01/17/de9e3b4af6f22bf5ee35a4b6a741a05d.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>基于以太坊的智能合约开发教程[Solidity] 第一篇：Solidity智能合约基础实战</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <h3><a id="Solidity_0"></a>第一篇：Solidity智能合约基础实战</h3> 
  <h4><a id="__2"></a>第一节 实现自己的第一个智能合约</h4> 
  <h5><a id="1__4"></a>1. 描述一个对象有两种方式</h5> 
  <p>①属性、状态</p> 
  <p>②行为</p> 
  <h5><a id="2_10"></a>2.代码</h5> 
  <pre><code class="prism language-Sol">pragma solidity ^0.5.0;

contract HelloWorld{
    string Myname = "lynn";
    
    function getName() public view returns(string){
        return Myname;
    }

    function changeName(string _newName) public{
        Myname = _newName;
    }

}
</code></pre> 
  <p><em><strong>错误信息：</strong></em></p> 
  <p>（1）</p> 
  <pre><code>browser/HelloWorld.sol:6:44: TypeError: Data location must be "memory" for return parameter in function, but none was given.
    function getName() public view returns(string){
                                           ^----^
</code></pre> 
  <p><code>function getName() public view returns(string)</code> 修改为：</p> 
  <p><code>function getName() public view returns(string memory)</code></p> 
  <p>（2）</p> 
  <pre><code>browser/HelloWorld.sol:10:25: TypeError: Data location must be "memory" for parameter in function, but none was given.
    function changeName(string _newName) public{
                        ^-------------^
</code></pre> 
  <p><code>function changeName(string _newName) public</code> 修改为：</p> 
  <p><code>function changeName(string memory _newName) public</code></p> 
  <p>修改后：</p> 
  <pre><code>pragma solidity ^0.5.0;

contract HelloWorld{
    string Myname = "lynn";
    
    function getName() public view returns(string memory){
        return Myname;
    }

    function changeName(string memory _newName) public{
        Myname = _newName;
    }

}
</code></pre> 
  <h4><a id="_gaspureview_74"></a>第二节 节省gas的利器pure和view</h4> 
  <h5><a id="1__76"></a>1. 代码</h5> 
  <pre><code>pragma solidity ^0.5.0;

contract HelloWorld{
    string Myname = "lynn";
    
    function getName() public view returns(string memory){
        return Myname;
    }

    function changeName(string memory _newName) public{
        Myname = _newName;
    }
    
    function pureTest(string memory _name) pure public returns(string memory){
        return _name;
    }

}
</code></pre> 
  <ul> 
   <li>view、pure不消耗gas</li> 
   <li>函数changeName()需要改变状态变量，因此需要全网节点来同步，会消耗gas</li> 
  </ul> 
  <h4><a id="_bool_102"></a>第三节 真假bool值</h4> 
  <h5><a id="1_104"></a>1.代码</h5> 
  <pre><code>pragma solidity ^0.5.0;

contract BooleanTest{
    
    bool _a;
    int num1 = 100;
    int num2 = 200;
    
    function getBool() public view returns(bool){
        return _a;
    }
    
    function getBool2() public view returns(bool){
        return !_a;
    }
    
    function panduan() public view returns(bool){
        return num1==num2;
    } 
    
    function panduan2() public view returns(bool){
        return num1!=num2;
    }
    
    function yu() public view returns(bool){
        return (num1==num2) &amp;&amp; true;
    }
    
    function yu2() public view returns(bool){
        return (num1!=num2) &amp;&amp; true;
    }
    
    function huo() public view returns(bool){
        return (num1==num2) &amp;&amp; true;
    }
    
    
    function huo2() public view returns(bool){
        return (num1!=num2) &amp;&amp; true;
    }
    
    function huo3() public view returns(bool){
        return (num1==num2) &amp;&amp; false;
    }
}
</code></pre> 
  <h4><a id="__154"></a>第四节 整型特性与运算</h4> 
  <h5><a id="1_156"></a>1.代码</h5> 
  <pre><code>pragma solidity ^0.5.0;

contract math{
    // int uint
    
    uint numa = 100;
    uint numb = 200;
    
    // uint numc = 2;
    
    function add(uint a, uint b) pure public returns(uint){
        return a+b;
    }
    
    function sub(uint a, uint b) pure public returns(uint){
        return a-b;
    }
    
    function mul(uint a, uint b) pure public returns(uint){
        return a*b;
    }
    
    function div(uint a, uint b) pure public returns(uint){
        return a/b;
    }
    
    function mod(uint a, uint b) pure public returns(uint){
        return a%b;
    }
    
    function squ(uint a,uint b) pure public returns(uint){
        return a**b;
}
</code></pre> 
  <ul> 
   <li>int 代表可正可负，uint 只能代表正。</li> 
  </ul> 
  <h4><a id="__196"></a>第五节 底层位运算</h4> 
  <h5><a id="1_198"></a>1.六个操作符</h5> 
  <p>&amp; | ~ ^ &lt;&lt; &gt;&gt;</p> 
  <h5><a id="2_202"></a>2.代码</h5> 
  <pre><code>pragma solidity ^0.5.0;

contract math{
    // int uint
    
    uint numa = 100;
    uint numb = 200;
    
    // uint numc = 2;
    
    function add(uint a, uint b) pure public returns(uint){
        return a+b;
    }
    
    function sub(uint a, uint b) pure public returns(uint){
        return a-b;
    }
    
    function mul(uint a, uint b) pure public returns(uint){
        return a*b;
    }
    
    function div(uint a, uint b) pure public returns(uint){
        return a/b;
    }
    
    function mod(uint a, uint b) pure public returns(uint){
        return a%b;
    }
    
    function squ(uint a,uint b) pure public returns(uint){
        return a**b;
    }
    
    uint8 a = 3;
    uint8 b = 4;
    
    function weiyu() pure public returns(uint){
        return a&amp;b;
    }

    function weihuo() pure public returns(uint){
        return a|b;
    }
        
    function weifan() pure public returns(uint){
        return ~a;
    }
    
    function weiyihuo() pure public returns(uint){
        return a^b;
    }
    
    function zuoyi() pure public returns(uint){
        return a&lt;&lt;1;
    }
        
    function youyi() pure public returns(uint){
        return a&gt;&gt;1;
    }
}
</code></pre> 
  <p><em><strong>错误提示:</strong></em></p> 
  <pre><code>browser/Math.sol:44:16: TypeError: Function declared as pure, but this expression (potentially) reads from the environment or state and thus requires "view".
        return a&amp;b;
</code></pre> 
  <p>把<code>function weiyu() pure public returns(uint)</code> 修改为：</p> 
  <p><code>function weiyu() view public returns(uint)</code></p> 
  <h6><a id="_279"></a>修改后代码：</h6> 
  <pre><code>pragma solidity ^0.5.0;

contract math{
    // int uint
    
    uint numa = 100;
    uint numb = 200;
    
    // uint numc = 2;
    
    // function add() view public returns(uint){
    //     return numa + numb;
    // }
    
    function add(uint a, uint b) pure public returns(uint){
        return a+b;
    }
    
    function sub(uint a, uint b) pure public returns(uint){
        return a-b;
    }
    
    function mul(uint a, uint b) pure public returns(uint){
        return a*b;
    }
    
    function div(uint a, uint b) pure public returns(uint){
        return a/b;
    }
    
    function mod(uint a, uint b) pure public returns(uint){
        return a%b;
    }
    
    function squ(uint a,uint b) pure public returns(uint){
        return a**b;
    }
    
    uint8 a = 3;
    uint8 b = 4;
    
    function weiyu() view public returns(uint){
        return a&amp;b;
    }

    function weihuo() view public returns(uint){
        return a|b;
    }
        
    function weifan() view public returns(uint){
        return ~a;
    }
    
    function weiyihuo() view public returns(uint){
        return a^b;
    }
    
    function zuoyi() view public returns(uint){
        return a&lt;&lt;1;
    }
        
    function youyi() view public returns(uint){
        return a&gt;&gt;1;
    }
}
</code></pre> 
  <h4><a id="__349"></a>第六节 危险的整数溢出以及异常处理</h4> 
  <h5><a id="1__351"></a>1. 代码</h5> 
  <pre><code>    function flow() view public returns(uint){
        uint8 mm = 255;
        mm++;               
        return mm;                  //溢出，返回0
    }
    
    function flow2() view public returns(uint){
        uint8 mm = 0;
        mm--;
        return mm;                  //溢出，返回255
    }
    
    function errorTest() public returns(int){
        int a = 2;
        int b = 0;  不能执行除零
        return a/b;
    }
</code></pre> 
  <p>***错误提示：***<img src="img/1.png" alt=""></p> 
  <pre><code>    function flow() view public returns(uint){
        uint8 mm = 255;
        mm++;
        return mm;
    }
    
    function flow2() view public returns(uint){
        uint8 mm = 0;
        mm--;
        return mm;
    }
    
    function errorTest() public returns(int){
        int a = 2;
        //int b = 0;  不能执行除零
        //return a/b;
        int b = -1;
        a&lt;&lt;b;
    }
</code></pre> 
  <p>***错误提示：***<img src="img/2.png" alt=""></p> 
  <h4><a id="__401"></a>第七节 整数字面量</h4> 
  <h5><a id="1_403"></a>1.代码</h5> 
  <pre><code>    function intergerTest() public returns(uint){
        uint num = (2**800+1)-2**800;
        return num;
    }
    
    function intergerTest2() public returns(uint){
        // uint num = 2/4.0;   报错，如下所示
        uint num = 2/4.0*1000;
        return num;
    }
    
    function intergerTest3() public returns(uint){
        uint num = 111111111111111111111111111111111111111111112-                     111111111111111111111111111111111111111111111;
        return num;
    }
</code></pre> 
  <p><em><strong>uint num = 2/4.0 错误提示：</strong></em></p> 
  <pre><code>browser/Math.sol:93:9: TypeError: Type rational_const 1 / 2 is not implicitly convertible to expected type uint256. Try converting to type ufixed8x1 or use an explicit conversion.
        uint num = 2/4.0;
        ^--------------^
</code></pre> 
  <h6><a id="_431"></a>总结：</h6> 
  <p>满足精度的需要，可以计算出来只看最后的结果满不满足，赋值给最后的变量</p> 
  <h4><a id="__435"></a>第八节 固定长度字节数组</h4> 
  <h5><a id="1_bytes1bytes2bytes3bytes321_437"></a>1. 关键字有：bytes1,bytes2,bytes3,…,bytes32。（以步长1递增）</h5> 
  <p>byte代表bytes1</p> 
  <h5><a id="2_441"></a>2.代码</h5> 
  <pre><code>pragma solidity ^0.5.0;

contract ByteArray{
    // 0x7a68656e676a69616e78756e
    bytes1  public num1 = 0x7a;  // 0111 1010    // 加上public后可以自动get到该变量
    bytes2  public num2 = 0x7a68; // 0111 1010 0110 1000
    bytes12 public num3 = 0x7a68656e676a69616e78756e; 
    
    function getLength() public returns(uint){
        return num1.length;     //output: "uint256: 1"
    }
    
    function getLength2() public returns(uint){
        return num2.length;     //output: "uint256: 2"
    }
    
    function getLength3() public returns(uint){
        return num3.length;     //output: "uint256: 12"
    }
}
</code></pre> 
  <ul> 
   <li> <p>Length不能被修改</p> <pre><code>function setLength(){
	num1.length=18;
}
</code></pre> <p><em><strong>错误信息：</strong></em></p> <pre><code>browser/ByteArray.sol:22:5: ParserError: Expected pragma, import directive or contract/interface/library definition.
    function setLength(){
    ^------^
</code></pre> </li> 
  </ul> 
  <h4><a id="__482"></a>第九节 固定长度字节数组深入</h4> 
  <h5><a id="1__484"></a>1. 代码</h5> 
  <pre><code>pragma solidity ^0.5.0;

contract ByteArray{
    // 0x7a68656e676a69616e78756e
    bytes1  public num1 = 0x7a;  // 0111 1010
    bytes2  public num2 = 0x7a68; // 0111 1010 0110 1000
    bytes12 public num3 = 0x7a68656e676a69616e78756e; 
    
    bytes1 public a = 0x7a;    //新增
    bytes1 public b = 0x68;    //新增
    
    function getLength() public returns(uint){
        return num1.length;
    }
    
    function getLength2() public returns(uint){
        return num2.length;
    }
    
    function getLength3() public returns(uint){
        return num3.length;
    }
    // 新增比较操作
    function bijiao() public returns(bool){
        return a&gt;b;
    }
    
    function bijiao2() public returns(bool){
        return a&gt;=b;
    }
    
    function bijiao3() public returns(bool){
        return a&lt;b;
    }
    
    function bijiao4() public returns(bool){
        return a&lt;=b;
    }
    
    function bijiao5() public returns(bool){
        return a==b;
    }
    function bijiao6() public returns(bool){
        return a!=b;
    }
    //新增位操作
    function weiyu() view public returns(bytes1){
        return a&amp;b;        //0x68
    }

    function weihuo() view public returns(bytes1){
        return a|b;        //0x7a
    }
        
    function weifan() view public returns(bytes1){
        return ~a;         // 0x85
    }
    
    function weiyihuo() view public returns(bytes1){
        return a^b;        //0x12
    }
    
    function zuoyi() view public returns(bytes1){
        return a&lt;&lt;1;      // 0xf4
    }
        
    function youyi() view public returns(bytes1){
        return a&gt;&gt;1;      // 0x3d
    }
}
</code></pre> 
  <h4><a id="__559"></a>第十节 动态字节数组</h4> 
  <h5><a id="1__561"></a>1. 代码</h5> 
  <pre><code>pragma solidity ^0.5.0;

contract DynamicByte{
    bytes public name = new bytes(2);  //新建bytes数组，两个空间，public动态生成get方法
    
    function InitName() public{
        name[0] = 0x7a;
        name[1] = 0x68;
    }
    
    function getLength() public view returns(uint){
        return name.length;
    }
    
    function changeName() public{     //改变名字
        name[0] = 0x88;
    }
    
    function changeLength() public{    // 改变数组长度
        name.length = 5;       // 扩充长度在后（右）边加0
    }
    
    function pushtest() public{
        name.push(0x99);       //添加元素在原来数字的后边
    }
}
</code></pre> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7b4cdcb592.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
