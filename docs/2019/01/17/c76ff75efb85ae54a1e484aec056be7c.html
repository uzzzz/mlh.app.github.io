<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>特征点（角）检测与匹配，forstner corner detection | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="特征点（角）检测与匹配，forstner corner detection" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="原始链接附带代码：https://github.com/shl666/UCSD_CV_Intro/blob/master/chapter_2/corner_detector_matching.md 也欢迎关注我的不知道什么时候会更新的CV入门教程（根据UCSD CSE252系列课程改编）：https://github.com/shl666/UCSD_CV_Intro 什么是特征点检测（Corner Detector）? 以下定义来自维基百科： 特征点检测，是计算机视觉系统中用来提取特征以及推测图像内容的一种方法.角检测的应用很广，经常用在运动检测，跟踪，图像镶嵌（image mosaicing），全景图缝合（panorama stiching），三维建模以及物体识别中. 什么是特征点（Corner）？ 以下定义来自百度百科： 图像处理中，特征点指的是图像灰度值发生剧烈变化的点或者在图像边缘上曲率较大的点(即两个边缘的交点)。图像特征点在基于特征点的图像匹配算法中有着十分重要的作用。图像特征点能够反映图像本质特征，能够标识图像中目标物体。通过特征点的匹配能够完成图像的匹配。 简单来说，特征点就是图像中具有代表性和鲁棒性的点，可以是角，也可以是局部亮点，抑或是线段终点。根据检测算法的不同，我们得到的特征点也有着区别。 示例 先看一下下面这两张图片（UCSD的PC）： 两张图片区别不大，（几乎）同一时间使用同一相机在不同角度拍下。 我们再来看看他们使用Forstner corner detection算法获得的特征点： 是不是几乎都是一致的？除了个别被覆盖的部分。接下来就是对这些特征点的匹配（matching）操作。 这样的matching结果，我们基本上可以看出两张图之间的变换关系了。之后利用这些关系，我们可以进行更多的应用操作。比如之前定义中提到的全景图缝合等。 算法流程 好了，我们开始理一理整个算法是怎么样一个东西。 特征检测（corner detection） 我们会有一张图片 I I I，首先我们要对图片进行黑白处理。一般来说图片根据不同的存储格式会有3到4个图层，我们这一步是将他们变成一个（不变也没关系，就是计算量翻倍）。 然后我们需要对图片进行梯度计算，分别是横向(x轴)与纵向(y轴)。这里需要引入Five Point Central Opertor（没找到中文翻译…）。其实说到底就是一个卷积核，是根据某些数学运算推导出来的。有兴趣看深入了解的同学请点这里。 k x = 1 12 [ − 1 8 0 − 8 1 ] k_x=\frac{1}{12} \left[ \begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \end{matrix} \right] kx​=121​[−1​8​0​−8​1​] k y = 1 12 [ − 1 8 0 − 8 1 ] T k_y=\frac{1}{12} \left[ \begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \end{matrix} \right]^{T} ky​=121​[−1​8​0​−8​1​]T 我们可以得到两幅图像 I x I_x Ix​和 I y I_y Iy​。利用简单的矩阵运算，我们在这里最好算出 I x x I_xx Ix​x和 I y y I_yy Iy​y，他们分别是 I x I_x Ix​和 I y I_y Iy​的平方值（ I x x ( i , j ) = I x 2 ( i , j ) I_xx(i,j) = I_{x}^{2}(i,j) Ix​x(i,j)=Ix2​(i,j)），下一步会有用。 这里我们要引入下一个参数 w w w，窗口（window）大小。因为我们不能从一个点的数值来判断他是不是corner，而是需要根据他和他附近区域（local area）的关系来判断，也就是这里的窗口内部区域。根据第二步的结果和窗口大小，我们就可以去计算每个点的梯度矩阵 N ( i , j ) = [ ∑ w I x 2 ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I y 2 ( i , j ) ] N(i,j) = \left[ \begin{matrix} \sum_{w}{I_x^2(i,j)} &amp;amp; \sum_{w}{I_x(i,j)I_y(i,j)} \\ \sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \sum_{w}{I_y^2(i,j)} \end{matrix} \right] N(i,j)=[∑w​Ix2​(i,j)∑w​Ix​(i,j)Iy​(i,j)​∑w​Ix​(i,j)Iy​(i,j)∑w​Iy2​(i,j)​] 再计算每个梯度矩阵的最小特征值(min eigenvalue) λ m i n ( i , j ) = T r ( N ( i , j ) ) − T r 2 ( N ( i , j ) − d e t ( N ( i , j ) ) 2 \lambda_{min}(i,j) = \frac{Tr(N(i,j)) - \sqrt{Tr^2(N(i,j) - det(N(i,j))}}{2} λmin​(i,j)=2Tr(N(i,j))−Tr2(N(i,j)−det(N(i,j)) ​​ 这是一个小型矩阵的最小特征值的近似简化算法， T r Tr Tr代表矩阵的迹， d e t det det代表矩阵的行列式。 这里对于最小特征值的理解，我个人看来，可以简单地理解为一个分数（score），分数越高，它越可能是corner；分数越低，越不可能。 再者，我们需要将图片过一个非极大抑制（NMS）滤波器。所谓非极大抑制呢，就是在给定区域（ w n m s w_{nms} wnms​大小的窗口，这个窗口和之前提到的并不是同一个）内，如果中心点是最大值，那么中心点的数值保留；如果不是，则置为0。函数表达为： J ( i , j ) = { 0 if&nbsp; I ( i , j ) &amp;lt; I m a x ( i ′ , j ′ ) I ( i , j ) if&nbsp; I ( i , j ) = I m a x ( i ′ , j ′ ) J(i,j)= \begin{cases} 0 &amp;amp; \text{if } I(i,j)&amp;lt;I_{max}(i&amp;#x27;,j&amp;#x27;)\\ I(i,j) &amp;amp; \text{if } I(i,j)=I_{max}(i&amp;#x27;,j&amp;#x27;)\\ \end{cases} J(i,j)={0I(i,j)​if&nbsp;I(i,j)&lt;Imax​(i′,j′)if&nbsp;I(i,j)=Imax​(i′,j′)​ 最后一步很关键，需要引入Forstner Corner Detection算法计算实际corner与我们筛选出来的理论corner的相对位置关系。看起来很复杂，其实只需要解一个矩阵方程即可 [ ∑ w I x 2 ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I y 2 ( i , j ) ] [ x c o r n e r y c o r n e r ] = [ ∑ w x I x 2 ( i , j ) + y I x ( i , j ) I y ( i , j ) ∑ w x I x ( i , j ) I y ( i , j ) + y I y 2 ( i , j ) ] \left[ \begin{matrix} \sum_{w}{I_x^2(i,j)} &amp;amp; \sum_{w}{I_x(i,j)I_y(i,j)} \\ \sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \sum_{w}{I_y^2(i,j)} \end{matrix} \right] \left[ \begin{matrix} x_{corner} \\ y_{corner} \end{matrix} \right] = \left[ \begin{matrix} \sum_{w}{xI_x^2(i,j)+yI_x(i,j)I_y(i,j)} \\ \sum_{w}{xI_x(i,j)I_y(i,j)+yI_y^2(i,j)} \end{matrix} \right] [∑w​Ix2​(i,j)∑w​Ix​(i,j)Iy​(i,j)​∑w​Ix​(i,j)Iy​(i,j)∑w​Iy2​(i,j)​][xcorner​ycorner​​]=[∑w​xIx2​(i,j)+yIx​(i,j)Iy​(i,j)∑w​xIx​(i,j)Iy​(i,j)+yIy2​(i,j)​] matching的部分我还没写。。。。" />
<meta property="og:description" content="原始链接附带代码：https://github.com/shl666/UCSD_CV_Intro/blob/master/chapter_2/corner_detector_matching.md 也欢迎关注我的不知道什么时候会更新的CV入门教程（根据UCSD CSE252系列课程改编）：https://github.com/shl666/UCSD_CV_Intro 什么是特征点检测（Corner Detector）? 以下定义来自维基百科： 特征点检测，是计算机视觉系统中用来提取特征以及推测图像内容的一种方法.角检测的应用很广，经常用在运动检测，跟踪，图像镶嵌（image mosaicing），全景图缝合（panorama stiching），三维建模以及物体识别中. 什么是特征点（Corner）？ 以下定义来自百度百科： 图像处理中，特征点指的是图像灰度值发生剧烈变化的点或者在图像边缘上曲率较大的点(即两个边缘的交点)。图像特征点在基于特征点的图像匹配算法中有着十分重要的作用。图像特征点能够反映图像本质特征，能够标识图像中目标物体。通过特征点的匹配能够完成图像的匹配。 简单来说，特征点就是图像中具有代表性和鲁棒性的点，可以是角，也可以是局部亮点，抑或是线段终点。根据检测算法的不同，我们得到的特征点也有着区别。 示例 先看一下下面这两张图片（UCSD的PC）： 两张图片区别不大，（几乎）同一时间使用同一相机在不同角度拍下。 我们再来看看他们使用Forstner corner detection算法获得的特征点： 是不是几乎都是一致的？除了个别被覆盖的部分。接下来就是对这些特征点的匹配（matching）操作。 这样的matching结果，我们基本上可以看出两张图之间的变换关系了。之后利用这些关系，我们可以进行更多的应用操作。比如之前定义中提到的全景图缝合等。 算法流程 好了，我们开始理一理整个算法是怎么样一个东西。 特征检测（corner detection） 我们会有一张图片 I I I，首先我们要对图片进行黑白处理。一般来说图片根据不同的存储格式会有3到4个图层，我们这一步是将他们变成一个（不变也没关系，就是计算量翻倍）。 然后我们需要对图片进行梯度计算，分别是横向(x轴)与纵向(y轴)。这里需要引入Five Point Central Opertor（没找到中文翻译…）。其实说到底就是一个卷积核，是根据某些数学运算推导出来的。有兴趣看深入了解的同学请点这里。 k x = 1 12 [ − 1 8 0 − 8 1 ] k_x=\frac{1}{12} \left[ \begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \end{matrix} \right] kx​=121​[−1​8​0​−8​1​] k y = 1 12 [ − 1 8 0 − 8 1 ] T k_y=\frac{1}{12} \left[ \begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \end{matrix} \right]^{T} ky​=121​[−1​8​0​−8​1​]T 我们可以得到两幅图像 I x I_x Ix​和 I y I_y Iy​。利用简单的矩阵运算，我们在这里最好算出 I x x I_xx Ix​x和 I y y I_yy Iy​y，他们分别是 I x I_x Ix​和 I y I_y Iy​的平方值（ I x x ( i , j ) = I x 2 ( i , j ) I_xx(i,j) = I_{x}^{2}(i,j) Ix​x(i,j)=Ix2​(i,j)），下一步会有用。 这里我们要引入下一个参数 w w w，窗口（window）大小。因为我们不能从一个点的数值来判断他是不是corner，而是需要根据他和他附近区域（local area）的关系来判断，也就是这里的窗口内部区域。根据第二步的结果和窗口大小，我们就可以去计算每个点的梯度矩阵 N ( i , j ) = [ ∑ w I x 2 ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I y 2 ( i , j ) ] N(i,j) = \left[ \begin{matrix} \sum_{w}{I_x^2(i,j)} &amp;amp; \sum_{w}{I_x(i,j)I_y(i,j)} \\ \sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \sum_{w}{I_y^2(i,j)} \end{matrix} \right] N(i,j)=[∑w​Ix2​(i,j)∑w​Ix​(i,j)Iy​(i,j)​∑w​Ix​(i,j)Iy​(i,j)∑w​Iy2​(i,j)​] 再计算每个梯度矩阵的最小特征值(min eigenvalue) λ m i n ( i , j ) = T r ( N ( i , j ) ) − T r 2 ( N ( i , j ) − d e t ( N ( i , j ) ) 2 \lambda_{min}(i,j) = \frac{Tr(N(i,j)) - \sqrt{Tr^2(N(i,j) - det(N(i,j))}}{2} λmin​(i,j)=2Tr(N(i,j))−Tr2(N(i,j)−det(N(i,j)) ​​ 这是一个小型矩阵的最小特征值的近似简化算法， T r Tr Tr代表矩阵的迹， d e t det det代表矩阵的行列式。 这里对于最小特征值的理解，我个人看来，可以简单地理解为一个分数（score），分数越高，它越可能是corner；分数越低，越不可能。 再者，我们需要将图片过一个非极大抑制（NMS）滤波器。所谓非极大抑制呢，就是在给定区域（ w n m s w_{nms} wnms​大小的窗口，这个窗口和之前提到的并不是同一个）内，如果中心点是最大值，那么中心点的数值保留；如果不是，则置为0。函数表达为： J ( i , j ) = { 0 if&nbsp; I ( i , j ) &amp;lt; I m a x ( i ′ , j ′ ) I ( i , j ) if&nbsp; I ( i , j ) = I m a x ( i ′ , j ′ ) J(i,j)= \begin{cases} 0 &amp;amp; \text{if } I(i,j)&amp;lt;I_{max}(i&amp;#x27;,j&amp;#x27;)\\ I(i,j) &amp;amp; \text{if } I(i,j)=I_{max}(i&amp;#x27;,j&amp;#x27;)\\ \end{cases} J(i,j)={0I(i,j)​if&nbsp;I(i,j)&lt;Imax​(i′,j′)if&nbsp;I(i,j)=Imax​(i′,j′)​ 最后一步很关键，需要引入Forstner Corner Detection算法计算实际corner与我们筛选出来的理论corner的相对位置关系。看起来很复杂，其实只需要解一个矩阵方程即可 [ ∑ w I x 2 ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I y 2 ( i , j ) ] [ x c o r n e r y c o r n e r ] = [ ∑ w x I x 2 ( i , j ) + y I x ( i , j ) I y ( i , j ) ∑ w x I x ( i , j ) I y ( i , j ) + y I y 2 ( i , j ) ] \left[ \begin{matrix} \sum_{w}{I_x^2(i,j)} &amp;amp; \sum_{w}{I_x(i,j)I_y(i,j)} \\ \sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \sum_{w}{I_y^2(i,j)} \end{matrix} \right] \left[ \begin{matrix} x_{corner} \\ y_{corner} \end{matrix} \right] = \left[ \begin{matrix} \sum_{w}{xI_x^2(i,j)+yI_x(i,j)I_y(i,j)} \\ \sum_{w}{xI_x(i,j)I_y(i,j)+yI_y^2(i,j)} \end{matrix} \right] [∑w​Ix2​(i,j)∑w​Ix​(i,j)Iy​(i,j)​∑w​Ix​(i,j)Iy​(i,j)∑w​Iy2​(i,j)​][xcorner​ycorner​​]=[∑w​xIx2​(i,j)+yIx​(i,j)Iy​(i,j)∑w​xIx​(i,j)Iy​(i,j)+yIy2​(i,j)​] matching的部分我还没写。。。。" />
<link rel="canonical" href="https://mlh.app/2019/01/17/c76ff75efb85ae54a1e484aec056be7c.html" />
<meta property="og:url" content="https://mlh.app/2019/01/17/c76ff75efb85ae54a1e484aec056be7c.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-17T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"原始链接附带代码：https://github.com/shl666/UCSD_CV_Intro/blob/master/chapter_2/corner_detector_matching.md 也欢迎关注我的不知道什么时候会更新的CV入门教程（根据UCSD CSE252系列课程改编）：https://github.com/shl666/UCSD_CV_Intro 什么是特征点检测（Corner Detector）? 以下定义来自维基百科： 特征点检测，是计算机视觉系统中用来提取特征以及推测图像内容的一种方法.角检测的应用很广，经常用在运动检测，跟踪，图像镶嵌（image mosaicing），全景图缝合（panorama stiching），三维建模以及物体识别中. 什么是特征点（Corner）？ 以下定义来自百度百科： 图像处理中，特征点指的是图像灰度值发生剧烈变化的点或者在图像边缘上曲率较大的点(即两个边缘的交点)。图像特征点在基于特征点的图像匹配算法中有着十分重要的作用。图像特征点能够反映图像本质特征，能够标识图像中目标物体。通过特征点的匹配能够完成图像的匹配。 简单来说，特征点就是图像中具有代表性和鲁棒性的点，可以是角，也可以是局部亮点，抑或是线段终点。根据检测算法的不同，我们得到的特征点也有着区别。 示例 先看一下下面这两张图片（UCSD的PC）： 两张图片区别不大，（几乎）同一时间使用同一相机在不同角度拍下。 我们再来看看他们使用Forstner corner detection算法获得的特征点： 是不是几乎都是一致的？除了个别被覆盖的部分。接下来就是对这些特征点的匹配（matching）操作。 这样的matching结果，我们基本上可以看出两张图之间的变换关系了。之后利用这些关系，我们可以进行更多的应用操作。比如之前定义中提到的全景图缝合等。 算法流程 好了，我们开始理一理整个算法是怎么样一个东西。 特征检测（corner detection） 我们会有一张图片 I I I，首先我们要对图片进行黑白处理。一般来说图片根据不同的存储格式会有3到4个图层，我们这一步是将他们变成一个（不变也没关系，就是计算量翻倍）。 然后我们需要对图片进行梯度计算，分别是横向(x轴)与纵向(y轴)。这里需要引入Five Point Central Opertor（没找到中文翻译…）。其实说到底就是一个卷积核，是根据某些数学运算推导出来的。有兴趣看深入了解的同学请点这里。 k x = 1 12 [ − 1 8 0 − 8 1 ] k_x=\\frac{1}{12} \\left[ \\begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \\end{matrix} \\right] kx​=121​[−1​8​0​−8​1​] k y = 1 12 [ − 1 8 0 − 8 1 ] T k_y=\\frac{1}{12} \\left[ \\begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \\end{matrix} \\right]^{T} ky​=121​[−1​8​0​−8​1​]T 我们可以得到两幅图像 I x I_x Ix​和 I y I_y Iy​。利用简单的矩阵运算，我们在这里最好算出 I x x I_xx Ix​x和 I y y I_yy Iy​y，他们分别是 I x I_x Ix​和 I y I_y Iy​的平方值（ I x x ( i , j ) = I x 2 ( i , j ) I_xx(i,j) = I_{x}^{2}(i,j) Ix​x(i,j)=Ix2​(i,j)），下一步会有用。 这里我们要引入下一个参数 w w w，窗口（window）大小。因为我们不能从一个点的数值来判断他是不是corner，而是需要根据他和他附近区域（local area）的关系来判断，也就是这里的窗口内部区域。根据第二步的结果和窗口大小，我们就可以去计算每个点的梯度矩阵 N ( i , j ) = [ ∑ w I x 2 ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I y 2 ( i , j ) ] N(i,j) = \\left[ \\begin{matrix} \\sum_{w}{I_x^2(i,j)} &amp;amp; \\sum_{w}{I_x(i,j)I_y(i,j)} \\\\ \\sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \\sum_{w}{I_y^2(i,j)} \\end{matrix} \\right] N(i,j)=[∑w​Ix2​(i,j)∑w​Ix​(i,j)Iy​(i,j)​∑w​Ix​(i,j)Iy​(i,j)∑w​Iy2​(i,j)​] 再计算每个梯度矩阵的最小特征值(min eigenvalue) λ m i n ( i , j ) = T r ( N ( i , j ) ) − T r 2 ( N ( i , j ) − d e t ( N ( i , j ) ) 2 \\lambda_{min}(i,j) = \\frac{Tr(N(i,j)) - \\sqrt{Tr^2(N(i,j) - det(N(i,j))}}{2} λmin​(i,j)=2Tr(N(i,j))−Tr2(N(i,j)−det(N(i,j)) ​​ 这是一个小型矩阵的最小特征值的近似简化算法， T r Tr Tr代表矩阵的迹， d e t det det代表矩阵的行列式。 这里对于最小特征值的理解，我个人看来，可以简单地理解为一个分数（score），分数越高，它越可能是corner；分数越低，越不可能。 再者，我们需要将图片过一个非极大抑制（NMS）滤波器。所谓非极大抑制呢，就是在给定区域（ w n m s w_{nms} wnms​大小的窗口，这个窗口和之前提到的并不是同一个）内，如果中心点是最大值，那么中心点的数值保留；如果不是，则置为0。函数表达为： J ( i , j ) = { 0 if&nbsp; I ( i , j ) &amp;lt; I m a x ( i ′ , j ′ ) I ( i , j ) if&nbsp; I ( i , j ) = I m a x ( i ′ , j ′ ) J(i,j)= \\begin{cases} 0 &amp;amp; \\text{if } I(i,j)&amp;lt;I_{max}(i&amp;#x27;,j&amp;#x27;)\\\\ I(i,j) &amp;amp; \\text{if } I(i,j)=I_{max}(i&amp;#x27;,j&amp;#x27;)\\\\ \\end{cases} J(i,j)={0I(i,j)​if&nbsp;I(i,j)&lt;Imax​(i′,j′)if&nbsp;I(i,j)=Imax​(i′,j′)​ 最后一步很关键，需要引入Forstner Corner Detection算法计算实际corner与我们筛选出来的理论corner的相对位置关系。看起来很复杂，其实只需要解一个矩阵方程即可 [ ∑ w I x 2 ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I x ( i , j ) I y ( i , j ) ∑ w I y 2 ( i , j ) ] [ x c o r n e r y c o r n e r ] = [ ∑ w x I x 2 ( i , j ) + y I x ( i , j ) I y ( i , j ) ∑ w x I x ( i , j ) I y ( i , j ) + y I y 2 ( i , j ) ] \\left[ \\begin{matrix} \\sum_{w}{I_x^2(i,j)} &amp;amp; \\sum_{w}{I_x(i,j)I_y(i,j)} \\\\ \\sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \\sum_{w}{I_y^2(i,j)} \\end{matrix} \\right] \\left[ \\begin{matrix} x_{corner} \\\\ y_{corner} \\end{matrix} \\right] = \\left[ \\begin{matrix} \\sum_{w}{xI_x^2(i,j)+yI_x(i,j)I_y(i,j)} \\\\ \\sum_{w}{xI_x(i,j)I_y(i,j)+yI_y^2(i,j)} \\end{matrix} \\right] [∑w​Ix2​(i,j)∑w​Ix​(i,j)Iy​(i,j)​∑w​Ix​(i,j)Iy​(i,j)∑w​Iy2​(i,j)​][xcorner​ycorner​​]=[∑w​xIx2​(i,j)+yIx​(i,j)Iy​(i,j)∑w​xIx​(i,j)Iy​(i,j)+yIy2​(i,j)​] matching的部分我还没写。。。。","@type":"BlogPosting","url":"https://mlh.app/2019/01/17/c76ff75efb85ae54a1e484aec056be7c.html","headline":"特征点（角）检测与匹配，forstner corner detection","dateModified":"2019-01-17T00:00:00+08:00","datePublished":"2019-01-17T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/01/17/c76ff75efb85ae54a1e484aec056be7c.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>特征点（角）检测与匹配，forstner corner detection</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p>原始链接附带<strong>代码</strong>：<a href="https://github.com/shl666/UCSD_CV_Intro/blob/master/chapter_2/corner_detector_matching.md" rel="nofollow">https://github.com/shl666/UCSD_CV_Intro/blob/master/chapter_2/corner_detector_matching.md</a></p> 
  <p>也欢迎关注我的不知道什么时候会更新的CV入门教程（根据UCSD CSE252系列课程改编）：<a href="https://github.com/shl666/UCSD_CV_Intro" rel="nofollow">https://github.com/shl666/UCSD_CV_Intro</a></p> 
  <h1><a id="Corner_Detector_5"></a>什么是特征点检测（Corner Detector）?</h1> 
  <p>以下定义来自<a href="https://zh.wikipedia.org/wiki/%E8%A7%92%E6%A3%80%E6%B5%8B" rel="nofollow">维基百科</a>：</p> 
  <p>特征点检测，是计算机视觉系统中用来提取特征以及推测图像内容的一种方法.角检测的应用很广，经常用在运动检测，跟踪，图像镶嵌（image mosaicing），全景图缝合（panorama stiching），三维建模以及物体识别中.</p> 
  <h1><a id="Corner_10"></a>什么是特征点（Corner）？</h1> 
  <p>以下定义来自<a href="https://baike.baidu.com/item/%E7%89%B9%E5%BE%81%E7%82%B9" rel="nofollow">百度百科</a>：</p> 
  <p>图像处理中，特征点指的是图像灰度值发生剧烈变化的点或者在图像边缘上曲率较大的点(即两个边缘的交点)。图像特征点在基于特征点的图像匹配算法中有着十分重要的作用。图像特征点能够反映图像本质特征，能够标识图像中目标物体。通过特征点的匹配能够完成图像的匹配。</p> 
  <p>简单来说，特征点就是图像中具有代表性和鲁棒性的点，可以是角，也可以是局部亮点，抑或是线段终点。根据检测算法的不同，我们得到的特征点也有着区别。</p> 
  <h1><a id="_17"></a>示例</h1> 
  <p>先看一下下面这两张图片（UCSD的PC）：<br> <img src="https://raw.githubusercontent.com/shl666/UCSD_CV_Intro/master/chapter_2/images/original.png" alt="original"></p> 
  <p>两张图片区别不大，（几乎）同一时间使用同一相机在不同角度拍下。 我们再来看看他们使用Forstner corner detection算法获得的特征点：</p> 
  <p><img src="https://raw.githubusercontent.com/shl666/UCSD_CV_Intro/master/chapter_2/images/corner_detection.png" alt="corner"></p> 
  <p>是不是几乎都是一致的？除了个别被覆盖的部分。接下来就是对这些特征点的匹配（matching）操作。</p> 
  <p><img src="https://raw.githubusercontent.com/shl666/UCSD_CV_Intro/master/chapter_2/images/corner_matching.png" alt="matching"></p> 
  <p>这样的matching结果，我们基本上可以看出两张图之间的变换关系了。之后利用这些关系，我们可以进行更多的应用操作。比如之前定义中提到的全景图缝合等。</p> 
  <h1><a id="_31"></a>算法流程</h1> 
  <p>好了，我们开始理一理整个算法是怎么样一个东西。</p> 
  <h2><a id="corner_detection_35"></a>特征检测（corner detection）</h2> 
  <ol> 
   <li> <p>我们会有一张图片<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            I
           </mi>
          </mrow>
          <annotation encoding="application/x-tex">
           I
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.07847em;">I</span></span></span></span></span>，首先我们要对图片进行黑白处理。一般来说图片根据不同的存储格式会有3到4个图层，我们这一步是将他们变成一个（不变也没关系，就是计算量翻倍）。</p> </li> 
   <li> <p>然后我们需要对图片进行梯度计算，分别是横向(x轴)与纵向(y轴)。这里需要引入Five Point Central Opertor（没找到中文翻译…）。其实说到底就是一个卷积核，是根据某些数学运算推导出来的。有兴趣看深入了解的同学请点<a href="https://en.wikipedia.org/wiki/Five-point_stencil" rel="nofollow">这里</a>。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi>
              k
             </mi>
             <mi>
              x
             </mi>
            </msub>
            <mo>
             =
            </mo>
            <mfrac>
             <mn>
              1
             </mn>
             <mn>
              12
             </mn>
            </mfrac>
            <mrow>
             <mo fence="true">
              [
             </mo>
             <mtable>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <mo>
                   −
                  </mo>
                  <mn>
                   1
                  </mn>
                 </mrow>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mn>
                  8
                 </mn>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mn>
                  0
                 </mn>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <mo>
                   −
                  </mo>
                  <mn>
                   8
                  </mn>
                 </mrow>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mn>
                  1
                 </mn>
                </mstyle>
               </mtd>
              </mtr>
             </mtable>
             <mo fence="true">
              ]
             </mo>
            </mrow>
           </mrow>
           <annotation encoding="application/x-tex">
             k_x=\frac{1}{12} \left[ \begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \end{matrix} \right] 
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.00744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></span></span><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi>
              k
             </mi>
             <mi>
              y
             </mi>
            </msub>
            <mo>
             =
            </mo>
            <mfrac>
             <mn>
              1
             </mn>
             <mn>
              12
             </mn>
            </mfrac>
            <msup>
             <mrow>
              <mo fence="true">
               [
              </mo>
              <mtable>
               <mtr>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="false">
                  <mrow>
                   <mo>
                    −
                   </mo>
                   <mn>
                    1
                   </mn>
                  </mrow>
                 </mstyle>
                </mtd>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="false">
                  <mn>
                   8
                  </mn>
                 </mstyle>
                </mtd>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="false">
                  <mn>
                   0
                  </mn>
                 </mstyle>
                </mtd>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="false">
                  <mrow>
                   <mo>
                    −
                   </mo>
                   <mn>
                    8
                   </mn>
                  </mrow>
                 </mstyle>
                </mtd>
                <mtd>
                 <mstyle scriptlevel="0" displaystyle="false">
                  <mn>
                   1
                  </mn>
                 </mstyle>
                </mtd>
               </mtr>
              </mtable>
              <mo fence="true">
               ]
              </mo>
             </mrow>
             <mi>
              T
             </mi>
            </msup>
           </mrow>
           <annotation encoding="application/x-tex">
             k_y=\frac{1}{12} \left[ \begin{matrix} -1 &amp;amp; 8 &amp;amp; 0 &amp;amp; -8 &amp;amp; 1 \end{matrix} \right]^{T} 
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.03148em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.00744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.85em;"><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35em;"><span class=""></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size1">]</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 1.08123em;"><span class="" style="top: -3.3029em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></span></span><br> 我们可以得到两幅图像<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             I
            </mi>
            <mi>
             x
            </mi>
           </msub>
          </mrow>
          <annotation encoding="application/x-tex">
           I_x
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             I
            </mi>
            <mi>
             y
            </mi>
           </msub>
          </mrow>
          <annotation encoding="application/x-tex">
           I_y
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。利用简单的矩阵运算，我们在这里最好算出<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             I
            </mi>
            <mi>
             x
            </mi>
           </msub>
           <mi>
            x
           </mi>
          </mrow>
          <annotation encoding="application/x-tex">
           I_xx
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">x</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             I
            </mi>
            <mi>
             y
            </mi>
           </msub>
           <mi>
            y
           </mi>
          </mrow>
          <annotation encoding="application/x-tex">
           I_yy
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span></span></span></span></span>，他们分别是<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             I
            </mi>
            <mi>
             x
            </mi>
           </msub>
          </mrow>
          <annotation encoding="application/x-tex">
           I_x
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             I
            </mi>
            <mi>
             y
            </mi>
           </msub>
          </mrow>
          <annotation encoding="application/x-tex">
           I_y
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的平方值（<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             I
            </mi>
            <mi>
             x
            </mi>
           </msub>
           <mi>
            x
           </mi>
           <mo>
            (
           </mo>
           <mi>
            i
           </mi>
           <mo separator="true">
            ,
           </mo>
           <mi>
            j
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <msubsup>
            <mi>
             I
            </mi>
            <mi>
             x
            </mi>
            <mn>
             2
            </mn>
           </msubsup>
           <mo>
            (
           </mo>
           <mi>
            i
           </mi>
           <mo separator="true">
            ,
           </mo>
           <mi>
            j
           </mi>
           <mo>
            )
           </mo>
          </mrow>
          <annotation encoding="application/x-tex">
           I_xx(i,j) = I_{x}^{2}(i,j)
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.06411em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span></span>），下一步会有用。</p> </li> 
   <li> <p>这里我们要引入下一个参数<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            w
           </mi>
          </mrow>
          <annotation encoding="application/x-tex">
           w
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.02691em;">w</span></span></span></span></span>，窗口（window）大小。因为我们不能从一个点的数值来判断他是不是corner，而是需要根据他和他附近区域（local area）的关系来判断，也就是这里的窗口内部区域。根据第二步的结果和窗口大小，我们就可以去计算每个点的梯度矩阵<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <mi>
             N
            </mi>
            <mo>
             (
            </mo>
            <mi>
             i
            </mi>
            <mo separator="true">
             ,
            </mo>
            <mi>
             j
            </mi>
            <mo>
             )
            </mo>
            <mo>
             =
            </mo>
            <mrow>
             <mo fence="true">
              [
             </mo>
             <mtable>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msubsup>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                    <mn>
                     2
                    </mn>
                   </msubsup>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msubsup>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                    <mn>
                     2
                    </mn>
                   </msubsup>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
             </mtable>
             <mo fence="true">
              ]
             </mo>
            </mrow>
           </mrow>
           <annotation encoding="application/x-tex">
             N(i,j) = \left[ \begin{matrix} \sum_{w}{I_x^2(i,j)} &amp;amp; \sum_{w}{I_x(i,j)I_y(i,j)} \\ \sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \sum_{w}{I_y^2(i,j)} \end{matrix} \right] 
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.42311em; vertical-align: -0.961554em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.46155em;"><span class="" style="top: -3.62155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="" style="top: -2.42155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.961554em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.46155em;"><span class="" style="top: -3.62155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="" style="top: -2.42155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.961554em;"><span class=""></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></span><br> 再计算每个梯度矩阵的最小特征值(min eigenvalue)<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <msub>
             <mi>
              λ
             </mi>
             <mrow>
              <mi>
               m
              </mi>
              <mi>
               i
              </mi>
              <mi>
               n
              </mi>
             </mrow>
            </msub>
            <mo>
             (
            </mo>
            <mi>
             i
            </mi>
            <mo separator="true">
             ,
            </mo>
            <mi>
             j
            </mi>
            <mo>
             )
            </mo>
            <mo>
             =
            </mo>
            <mfrac>
             <mrow>
              <mi>
               T
              </mi>
              <mi>
               r
              </mi>
              <mo>
               (
              </mo>
              <mi>
               N
              </mi>
              <mo>
               (
              </mo>
              <mi>
               i
              </mi>
              <mo separator="true">
               ,
              </mo>
              <mi>
               j
              </mi>
              <mo>
               )
              </mo>
              <mo>
               )
              </mo>
              <mo>
               −
              </mo>
              <msqrt>
               <mrow>
                <mi>
                 T
                </mi>
                <msup>
                 <mi>
                  r
                 </mi>
                 <mn>
                  2
                 </mn>
                </msup>
                <mo>
                 (
                </mo>
                <mi>
                 N
                </mi>
                <mo>
                 (
                </mo>
                <mi>
                 i
                </mi>
                <mo separator="true">
                 ,
                </mo>
                <mi>
                 j
                </mi>
                <mo>
                 )
                </mo>
                <mo>
                 −
                </mo>
                <mi>
                 d
                </mi>
                <mi>
                 e
                </mi>
                <mi>
                 t
                </mi>
                <mo>
                 (
                </mo>
                <mi>
                 N
                </mi>
                <mo>
                 (
                </mo>
                <mi>
                 i
                </mi>
                <mo separator="true">
                 ,
                </mo>
                <mi>
                 j
                </mi>
                <mo>
                 )
                </mo>
                <mo>
                 )
                </mo>
               </mrow>
              </msqrt>
             </mrow>
             <mn>
              2
             </mn>
            </mfrac>
           </mrow>
           <annotation encoding="application/x-tex">
             \lambda_{min}(i,j) = \frac{Tr(N(i,j)) - \sqrt{Tr^2(N(i,j) - det(N(i,j))}}{2}
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="mord mathit mtight">i</span><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.316em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.63em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.695em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.935em;"><span class="svg-align" style="top: -3.2em;"><span class="pstrut" style="height: 3.2em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord"><span class="mord mathit" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mclose">)</span></span></span><span class="" style="top: -2.895em;"><span class="pstrut" style="height: 3.2em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.28em;">
                       <svg width="400em" height="1.28em" viewbox="0 0 400000 1296" preserveaspectratio="xMinYMin slice">
                        <path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z"></path>
                       </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.305em;"><span class=""></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 这是一个小型矩阵的最小特征值的近似简化算法，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            T
           </mi>
           <mi>
            r
           </mi>
          </mrow>
          <annotation encoding="application/x-tex">
           Tr
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">T</span><span class="mord mathit" style="margin-right: 0.02778em;">r</span></span></span></span></span>代表矩阵的<a href="https://baike.baidu.com/item/%E7%9F%A9%E9%98%B5%E7%9A%84%E8%BF%B9" rel="nofollow">迹</a>，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            d
           </mi>
           <mi>
            e
           </mi>
           <mi>
            t
           </mi>
          </mrow>
          <annotation encoding="application/x-tex">
           det
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">t</span></span></span></span></span>代表矩阵的<a href="https://baike.baidu.com/item/%E8%A1%8C%E5%88%97%E5%BC%8F" rel="nofollow">行列式</a>。<br> 这里对于最小特征值的理解，我个人看来，可以简单地理解为一个分数（score），分数越高，它越可能是corner；分数越低，越不可能。</p> </li> 
   <li> <p>再者，我们需要将图片过一个<a href="https://baike.baidu.com/item/%E9%9D%9E%E6%9E%81%E5%A4%A7%E5%80%BC%E6%8A%91%E5%88%B6/22768283" rel="nofollow">非极大抑制（NMS）</a>滤波器。所谓非极大抑制呢，就是在给定区域（<span class="katex--inline"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <msub>
            <mi>
             w
            </mi>
            <mrow>
             <mi>
              n
             </mi>
             <mi>
              m
             </mi>
             <mi>
              s
             </mi>
            </mrow>
           </msub>
          </mrow>
          <annotation encoding="application/x-tex">
           w_{nms}
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.02691em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mord mathit mtight">m</span><span class="mord mathit mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>大小的窗口，这个窗口和之前提到的并不是同一个）内，如果中心点是最大值，那么中心点的数值保留；如果不是，则置为0。函数表达为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <mi>
             J
            </mi>
            <mo>
             (
            </mo>
            <mi>
             i
            </mi>
            <mo separator="true">
             ,
            </mo>
            <mi>
             j
            </mi>
            <mo>
             )
            </mo>
            <mo>
             =
            </mo>
            <mrow>
             <mo fence="true">
              {
             </mo>
             <mtable>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mn>
                  0
                 </mn>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <mtext>
                   if&nbsp;
                  </mtext>
                  <mi>
                   I
                  </mi>
                  <mo>
                   (
                  </mo>
                  <mi>
                   i
                  </mi>
                  <mo separator="true">
                   ,
                  </mo>
                  <mi>
                   j
                  </mi>
                  <mo>
                   )
                  </mo>
                  <mo>
                   &amp;lt;
                  </mo>
                  <msub>
                   <mi>
                    I
                   </mi>
                   <mrow>
                    <mi>
                     m
                    </mi>
                    <mi>
                     a
                    </mi>
                    <mi>
                     x
                    </mi>
                   </mrow>
                  </msub>
                  <mo>
                   (
                  </mo>
                  <msup>
                   <mi>
                    i
                   </mi>
                   <mo mathvariant="normal">
                    ′
                   </mo>
                  </msup>
                  <mo separator="true">
                   ,
                  </mo>
                  <msup>
                   <mi>
                    j
                   </mi>
                   <mo mathvariant="normal">
                    ′
                   </mo>
                  </msup>
                  <mo>
                   )
                  </mo>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <mi>
                   I
                  </mi>
                  <mo>
                   (
                  </mo>
                  <mi>
                   i
                  </mi>
                  <mo separator="true">
                   ,
                  </mo>
                  <mi>
                   j
                  </mi>
                  <mo>
                   )
                  </mo>
                 </mrow>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <mtext>
                   if&nbsp;
                  </mtext>
                  <mi>
                   I
                  </mi>
                  <mo>
                   (
                  </mo>
                  <mi>
                   i
                  </mi>
                  <mo separator="true">
                   ,
                  </mo>
                  <mi>
                   j
                  </mi>
                  <mo>
                   )
                  </mo>
                  <mo>
                   =
                  </mo>
                  <msub>
                   <mi>
                    I
                   </mi>
                   <mrow>
                    <mi>
                     m
                    </mi>
                    <mi>
                     a
                    </mi>
                    <mi>
                     x
                    </mi>
                   </mrow>
                  </msub>
                  <mo>
                   (
                  </mo>
                  <msup>
                   <mi>
                    i
                   </mi>
                   <mo mathvariant="normal">
                    ′
                   </mo>
                  </msup>
                  <mo separator="true">
                   ,
                  </mo>
                  <msup>
                   <mi>
                    j
                   </mi>
                   <mo mathvariant="normal">
                    ′
                   </mo>
                  </msup>
                  <mo>
                   )
                  </mo>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
             </mtable>
            </mrow>
           </mrow>
           <annotation encoding="application/x-tex">
             J(i,j)= \begin{cases} 0 &amp;amp; \text{if } I(i,j)&amp;lt;I_{max}(i&amp;#x27;,j&amp;#x27;)\\ I(i,j) &amp;amp; \text{if } I(i,j)=I_{max}(i&amp;#x27;,j&amp;#x27;)\\ \end{cases} 
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.00003em; vertical-align: -1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.69em;"><span class="" style="top: -3.69em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord">0</span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.19em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.69em;"><span class="" style="top: -3.69em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if&nbsp;</span></span><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.751892em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.19em;"><span class=""></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> </li> 
   <li> <p>最后一步很关键，需要引入<a href="https://en.wikipedia.org/wiki/Corner_detection#The_F%C3%B6rstner_corner_detector" rel="nofollow">Forstner Corner Detection算法</a>计算实际corner与我们筛选出来的理论corner的相对位置关系。看起来很复杂，其实只需要解一个矩阵方程即可<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
         <math>
          <semantics>
           <mrow>
            <mrow>
             <mo fence="true">
              [
             </mo>
             <mtable>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msubsup>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                    <mn>
                     2
                    </mn>
                   </msubsup>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <msubsup>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                    <mn>
                     2
                    </mn>
                   </msubsup>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
             </mtable>
             <mo fence="true">
              ]
             </mo>
            </mrow>
            <mrow>
             <mo fence="true">
              [
             </mo>
             <mtable>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <msub>
                  <mi>
                   x
                  </mi>
                  <mrow>
                   <mi>
                    c
                   </mi>
                   <mi>
                    o
                   </mi>
                   <mi>
                    r
                   </mi>
                   <mi>
                    n
                   </mi>
                   <mi>
                    e
                   </mi>
                   <mi>
                    r
                   </mi>
                  </mrow>
                 </msub>
                </mstyle>
               </mtd>
              </mtr>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <msub>
                  <mi>
                   y
                  </mi>
                  <mrow>
                   <mi>
                    c
                   </mi>
                   <mi>
                    o
                   </mi>
                   <mi>
                    r
                   </mi>
                   <mi>
                    n
                   </mi>
                   <mi>
                    e
                   </mi>
                   <mi>
                    r
                   </mi>
                  </mrow>
                 </msub>
                </mstyle>
               </mtd>
              </mtr>
             </mtable>
             <mo fence="true">
              ]
             </mo>
            </mrow>
            <mo>
             =
            </mo>
            <mrow>
             <mo fence="true">
              [
             </mo>
             <mtable>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <mi>
                    x
                   </mi>
                   <msubsup>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                    <mn>
                     2
                    </mn>
                   </msubsup>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <mo>
                    +
                   </mo>
                   <mi>
                    y
                   </mi>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
              <mtr>
               <mtd>
                <mstyle scriptlevel="0" displaystyle="false">
                 <mrow>
                  <msub>
                   <mo>
                    ∑
                   </mo>
                   <mi>
                    w
                   </mi>
                  </msub>
                  <mrow>
                   <mi>
                    x
                   </mi>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     x
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <msub>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                   </msub>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                   <mo>
                    +
                   </mo>
                   <mi>
                    y
                   </mi>
                   <msubsup>
                    <mi>
                     I
                    </mi>
                    <mi>
                     y
                    </mi>
                    <mn>
                     2
                    </mn>
                   </msubsup>
                   <mo>
                    (
                   </mo>
                   <mi>
                    i
                   </mi>
                   <mo separator="true">
                    ,
                   </mo>
                   <mi>
                    j
                   </mi>
                   <mo>
                    )
                   </mo>
                  </mrow>
                 </mrow>
                </mstyle>
               </mtd>
              </mtr>
             </mtable>
             <mo fence="true">
              ]
             </mo>
            </mrow>
           </mrow>
           <annotation encoding="application/x-tex">
             \left[ \begin{matrix} \sum_{w}{I_x^2(i,j)} &amp;amp; \sum_{w}{I_x(i,j)I_y(i,j)} \\ \sum_{w}{I_x(i,j)I_y(i,j)}&amp;amp; \sum_{w}{I_y^2(i,j)} \end{matrix} \right] \left[ \begin{matrix} x_{corner} \\ y_{corner} \end{matrix} \right] = \left[ \begin{matrix} \sum_{w}{xI_x^2(i,j)+yI_x(i,j)I_y(i,j)} \\ \sum_{w}{xI_x(i,j)I_y(i,j)+yI_y^2(i,j)} \end{matrix} \right] 
           </annotation>
          </semantics>
         </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.42311em; vertical-align: -0.961554em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.46155em;"><span class="" style="top: -3.62155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="" style="top: -2.42155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.961554em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.46155em;"><span class="" style="top: -3.62155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="" style="top: -2.42155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.961554em;"><span class=""></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.45em;"><span class="" style="top: -3.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight">o</span><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span><span class="mord mathit mtight">n</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight">o</span><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span><span class="mord mathit mtight">n</span><span class="mord mathit mtight">e</span><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.95em;"><span class=""></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.42311em; vertical-align: -0.961554em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.46155em;"><span class="" style="top: -3.62155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit">x</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="" style="top: -2.42155em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.001682em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit">x</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.383108em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mclose">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.961554em;"><span class=""></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></span></p> </li> 
  </ol> 
  <h2><a id="matching_105"></a>matching的部分我还没写。。。。</h2> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7b4cdcb592.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
