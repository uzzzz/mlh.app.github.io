<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>【Machine Learining】Ch2. 模型评估与选择 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="【Machine Learining】Ch2. 模型评估与选择" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/pengwill97/article/details/86484494 第2章 模型评估与选择· 2.1 经验误差与过拟合 错误率：分类错误的样本数占总样本数的比例 精度：1-错误率 过拟合：学习器把训练样本学的太好，甚至把训练样本的特点当做了潜在样本的一般性质，导致泛化性能下降的现象。 引起过拟合的因素一般是学习能力太过强大。 欠拟合：对训练样本的一般性质没有学习好。 引起欠拟合的因素一般是学习能力低下。 对候选模型的评估方法，对泛化误差进行评估，并选取泛化误差的最小的。由于无法直接获得泛化误差，需要选择一定的评估方法。 2.2 评估方法 需要建立测试集(testing set)，将模型在测试集上测试误差(testing error)作为泛化误差的近似。 2.2.1 留出法 操作方法 将数据集D划分为两个互斥的集合，其中一个作为训练集S，另外一个作为测试集T。在S训练完后，在T上进行测试，得到测试误差，作为泛化误差的近似。 注意事项 测试集和训练集划分尽可能保持数据分布的一致性，避免因为数据集划分引入额外偏差而带来影响，在采样的时候使用分层采样的方法。 由于样本划分的不同，单次使用留出法得到的结果往往不够稳定可靠，需要随机划分，反复试验后取平均值作为最后的结果。 2.2.2 交叉验证法 操作方法 交叉验证法首项将数据集D划分为k个大小相似的互斥子集，每个子集尽可能保持数据分布一致(分层采样)。将其中的k-1个子集作为训练集，剩余一个子集作为测试集。将每个子集均做为测试集进行一次(共k次)交叉验证法，又称为k折交叉验证。 注意事项 与留出法相同，通常要将随机使用不同的划分p次，将p次的结果取平均值作为p次k折交叉验证的最终结果。 特别的，若k等于数据集中样本总数，即可得到留一法，留一法中被实际评估的模型与期望评估模型用数据集D训练处的模型很相似，但是计算开销很大。 2.2.3 自助法 操作方法 给定一个包含m个样本的数据集D，每次从中挑选一个样本拷贝进D‘，执行m次后，可以得到一个包含m个样本的数据集D’。若执行次数无限多，那么大概有 1 e \frac{1}{e} e1​的样本始终没有被选择到。将D’作为训练集，将D\D’作为作为测试集。这样的测试结果，也作为包外估计。 注意事项 自助法在数据集较小，难以划分训练集和测试集是很有用。 2.2.4 参数调节与最终模型 参数调节 对每个参数选定一个范围和变化步长，例如在[0,0.2]范围内以0.05作为步长，从候选值中选出定值。假定算法有3个参数，每个参数仅考虑5个候选值，这样就有 5 3 = 125 5^3=125 53=125个模型进行考察。 最终模型 在学习算法和参数配置已经选定后，应该用数据集D重新训练整个模型，在训练中需要使用数据集中所有的m个样本。 2.3 性能度量 用于衡量模型泛化能力的评价标准，就是性能度量。 在回归模型中，常用的性能度量是均方误差(mean squared error) E ( f ; d ) = 1 m ( f ( x i ) − y i ) 2 E(f;d) = \frac{1}{m}(f(x_i)-y_i)^2 E(f;d)=m1​(f(xi​)−yi​)2 当给定数据分布 D D D和概率密度函数 p ( ⋅ ) p(·) p(⋅)，均方误差可以描述为 E ( f ; D ) = ∫ x ∼ D ( f ( x ) − y ) 2 p ( x ) d x E(f;D) = \int_{x \sim D}(f(x)-y)^2p(x)dx E(f;D)=∫x∼D​(f(x)−y)2p(x)dx 个人的直观理解为，已知数据集中每个数据出现的概率，可以求出模型对于数据的均方误差。 2.3.1 错误率与精度 错误率 对于分类任务来说，可以认为是分类错误的样本数占样本总数的比例 E ( f ; D ) = 1 m ∑ i = 1 m I ( f ( x i ) ≠ y i ) E(f;D)=\frac{1}{m} \sum_{i=1}^{m} \mathbb I(f(x_i) \ne y_i) E(f;D)=m1​∑i=1m​I(f(xi​)̸​=yi​) 对于给定数据分布，可以认为 E ( f ; D ) = ∫ x ∼ D I ( f ( x i ) ≠ y i ) p ( x ) d x E(f;D)=\int_{x \sim D}\mathbb I(f(x_i) \ne y_i)p(x)dx E(f;D)=∫x∼D​I(f(xi​)̸​=yi​)p(x)dx 精度 a c c ( f ; D ) = 1 m ∑ i = 1 m I ( f ( x i ) = y i ) acc(f;D) = \frac{1}{m} \sum_{i=1}^{m} \mathbb I(f(x_i) = y_i) acc(f;D)=m1​∑i=1m​I(f(xi​)=yi​) 给定数据分布，可以认为 E ( f ; D ) = ∫ x ∼ D I ( f ( x i ) = y i ) p ( x ) d x E(f;D)=\int_{x \sim D}\mathbb I(f(x_i) = y_i)p(x)dx E(f;D)=∫x∼D​I(f(xi​)=yi​)p(x)dx KaTeX parse error: Expected &#39;EOF&#39;, got &#39;\romannumeral&#39; at position 1: \̲r̲o̲m̲a̲n̲n̲u̲m̲e̲r̲a̲l̲1 2.3.2 查准率，查全率与F1 对于二分类问题，可以将样例根据其真实类别与学习器预测类别的组合划分为：真正例(true positive)、假正例(false positive)、真反例(true negative)、假反例(false negative)四种情况，用TP、FP、TN、FN代表四种情况，显然可得TP + FP + FN + TN = 总样本数。 TP：本身为正例，预测结果也为正例。 FP：本身为反例，预测结果为正例。 TN：本身为反例，预测结果也为反例。 FN：本身为正例，预测结果为反例。 查准率： P = T P T P + F P P = \frac{TP}{TP+FP} P=TP+FPTP​ 查全率： R = T P T P + F N R = \frac{TP}{TP+FN} R=TP+FNTP​ 可以这样理解，我们观察到的肯定是模型的输出结果，准确的应该是TP，但是由于模型精确度不够高，有些反例也被当做正例，也就是FP，故查准率应该是TP占TP和FP的百分比。从另一方面来讲，我们想要了解到正例在分类中的出现情况，然而有些正例被当做反例输出出来了，即FN，所以查全率是TP占TP和FN的百分比。 这一对度量是相互矛盾的，即查准率高的时候，查全率往往偏低，查全率高的时候，查准率往往偏低。 关于P-R曲线，个人觉的西瓜书上讲解的不是很清楚，可以参考这篇博客 有几点觉得还是值得注意的 P-R曲线可能会过(0,0)点。如当第一个样本本身为反例，预测结果也为反例的时候，此时TP=0，故P=R=0。不过这样情况发生概率较小，若排序后第一个样本不能正确预测，那么学习模型和可能出线了问题。 最理想的PR曲线是一个矩形，即学习模型找到一条分界线，成功将数据集分为TP和TN。 若一条PR曲线完全包含另外一条PR曲线，则认为前者更优，若交叉，则可通过平衡点(Break-Even Point)、面积来判断孰优孰劣。BEP和面积都是越大越好。 F1度量 F 1 = 2 × P × R P × R = 2 × T P 样 例 总 数 + T P − T N F1 = \frac{2 × P × R}{P×R}= \frac{2×TP}{样例总数+ TP-TN} F1=P×R2×P×R​=样例总数+TP−TN2×TP​ F β F_{\beta} Fβ​度量 F β = ( 1 + β 2 ) P R ( β 2 P ) + R F_{\beta} = \frac{(1+\beta^2)PR}{(\beta^2P) + R} Fβ​=(β2P)+R(1+β2)PR​ 其中 β \beta β表示查全率相对于查准率的重要性， β &amp;gt; 1 \beta&amp;gt;1 β&gt;1时查全率有更大的影响， β &amp;lt; 1 \beta&amp;lt;1 β&lt;1时查准率有更大的影响。 在面对多分类问题的时候，可以选择计算两两类别之间的混淆矩阵，进而得到两两数据之间的P和R，对P和R求平均值可以得宏查准率和宏查全率。也可以计算两两类别之间的混淆矩阵，对混淆矩阵求平均值，进而得到微查准率和微查全率。" />
<meta property="og:description" content="版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/pengwill97/article/details/86484494 第2章 模型评估与选择· 2.1 经验误差与过拟合 错误率：分类错误的样本数占总样本数的比例 精度：1-错误率 过拟合：学习器把训练样本学的太好，甚至把训练样本的特点当做了潜在样本的一般性质，导致泛化性能下降的现象。 引起过拟合的因素一般是学习能力太过强大。 欠拟合：对训练样本的一般性质没有学习好。 引起欠拟合的因素一般是学习能力低下。 对候选模型的评估方法，对泛化误差进行评估，并选取泛化误差的最小的。由于无法直接获得泛化误差，需要选择一定的评估方法。 2.2 评估方法 需要建立测试集(testing set)，将模型在测试集上测试误差(testing error)作为泛化误差的近似。 2.2.1 留出法 操作方法 将数据集D划分为两个互斥的集合，其中一个作为训练集S，另外一个作为测试集T。在S训练完后，在T上进行测试，得到测试误差，作为泛化误差的近似。 注意事项 测试集和训练集划分尽可能保持数据分布的一致性，避免因为数据集划分引入额外偏差而带来影响，在采样的时候使用分层采样的方法。 由于样本划分的不同，单次使用留出法得到的结果往往不够稳定可靠，需要随机划分，反复试验后取平均值作为最后的结果。 2.2.2 交叉验证法 操作方法 交叉验证法首项将数据集D划分为k个大小相似的互斥子集，每个子集尽可能保持数据分布一致(分层采样)。将其中的k-1个子集作为训练集，剩余一个子集作为测试集。将每个子集均做为测试集进行一次(共k次)交叉验证法，又称为k折交叉验证。 注意事项 与留出法相同，通常要将随机使用不同的划分p次，将p次的结果取平均值作为p次k折交叉验证的最终结果。 特别的，若k等于数据集中样本总数，即可得到留一法，留一法中被实际评估的模型与期望评估模型用数据集D训练处的模型很相似，但是计算开销很大。 2.2.3 自助法 操作方法 给定一个包含m个样本的数据集D，每次从中挑选一个样本拷贝进D‘，执行m次后，可以得到一个包含m个样本的数据集D’。若执行次数无限多，那么大概有 1 e \frac{1}{e} e1​的样本始终没有被选择到。将D’作为训练集，将D\D’作为作为测试集。这样的测试结果，也作为包外估计。 注意事项 自助法在数据集较小，难以划分训练集和测试集是很有用。 2.2.4 参数调节与最终模型 参数调节 对每个参数选定一个范围和变化步长，例如在[0,0.2]范围内以0.05作为步长，从候选值中选出定值。假定算法有3个参数，每个参数仅考虑5个候选值，这样就有 5 3 = 125 5^3=125 53=125个模型进行考察。 最终模型 在学习算法和参数配置已经选定后，应该用数据集D重新训练整个模型，在训练中需要使用数据集中所有的m个样本。 2.3 性能度量 用于衡量模型泛化能力的评价标准，就是性能度量。 在回归模型中，常用的性能度量是均方误差(mean squared error) E ( f ; d ) = 1 m ( f ( x i ) − y i ) 2 E(f;d) = \frac{1}{m}(f(x_i)-y_i)^2 E(f;d)=m1​(f(xi​)−yi​)2 当给定数据分布 D D D和概率密度函数 p ( ⋅ ) p(·) p(⋅)，均方误差可以描述为 E ( f ; D ) = ∫ x ∼ D ( f ( x ) − y ) 2 p ( x ) d x E(f;D) = \int_{x \sim D}(f(x)-y)^2p(x)dx E(f;D)=∫x∼D​(f(x)−y)2p(x)dx 个人的直观理解为，已知数据集中每个数据出现的概率，可以求出模型对于数据的均方误差。 2.3.1 错误率与精度 错误率 对于分类任务来说，可以认为是分类错误的样本数占样本总数的比例 E ( f ; D ) = 1 m ∑ i = 1 m I ( f ( x i ) ≠ y i ) E(f;D)=\frac{1}{m} \sum_{i=1}^{m} \mathbb I(f(x_i) \ne y_i) E(f;D)=m1​∑i=1m​I(f(xi​)̸​=yi​) 对于给定数据分布，可以认为 E ( f ; D ) = ∫ x ∼ D I ( f ( x i ) ≠ y i ) p ( x ) d x E(f;D)=\int_{x \sim D}\mathbb I(f(x_i) \ne y_i)p(x)dx E(f;D)=∫x∼D​I(f(xi​)̸​=yi​)p(x)dx 精度 a c c ( f ; D ) = 1 m ∑ i = 1 m I ( f ( x i ) = y i ) acc(f;D) = \frac{1}{m} \sum_{i=1}^{m} \mathbb I(f(x_i) = y_i) acc(f;D)=m1​∑i=1m​I(f(xi​)=yi​) 给定数据分布，可以认为 E ( f ; D ) = ∫ x ∼ D I ( f ( x i ) = y i ) p ( x ) d x E(f;D)=\int_{x \sim D}\mathbb I(f(x_i) = y_i)p(x)dx E(f;D)=∫x∼D​I(f(xi​)=yi​)p(x)dx KaTeX parse error: Expected &#39;EOF&#39;, got &#39;\romannumeral&#39; at position 1: \̲r̲o̲m̲a̲n̲n̲u̲m̲e̲r̲a̲l̲1 2.3.2 查准率，查全率与F1 对于二分类问题，可以将样例根据其真实类别与学习器预测类别的组合划分为：真正例(true positive)、假正例(false positive)、真反例(true negative)、假反例(false negative)四种情况，用TP、FP、TN、FN代表四种情况，显然可得TP + FP + FN + TN = 总样本数。 TP：本身为正例，预测结果也为正例。 FP：本身为反例，预测结果为正例。 TN：本身为反例，预测结果也为反例。 FN：本身为正例，预测结果为反例。 查准率： P = T P T P + F P P = \frac{TP}{TP+FP} P=TP+FPTP​ 查全率： R = T P T P + F N R = \frac{TP}{TP+FN} R=TP+FNTP​ 可以这样理解，我们观察到的肯定是模型的输出结果，准确的应该是TP，但是由于模型精确度不够高，有些反例也被当做正例，也就是FP，故查准率应该是TP占TP和FP的百分比。从另一方面来讲，我们想要了解到正例在分类中的出现情况，然而有些正例被当做反例输出出来了，即FN，所以查全率是TP占TP和FN的百分比。 这一对度量是相互矛盾的，即查准率高的时候，查全率往往偏低，查全率高的时候，查准率往往偏低。 关于P-R曲线，个人觉的西瓜书上讲解的不是很清楚，可以参考这篇博客 有几点觉得还是值得注意的 P-R曲线可能会过(0,0)点。如当第一个样本本身为反例，预测结果也为反例的时候，此时TP=0，故P=R=0。不过这样情况发生概率较小，若排序后第一个样本不能正确预测，那么学习模型和可能出线了问题。 最理想的PR曲线是一个矩形，即学习模型找到一条分界线，成功将数据集分为TP和TN。 若一条PR曲线完全包含另外一条PR曲线，则认为前者更优，若交叉，则可通过平衡点(Break-Even Point)、面积来判断孰优孰劣。BEP和面积都是越大越好。 F1度量 F 1 = 2 × P × R P × R = 2 × T P 样 例 总 数 + T P − T N F1 = \frac{2 × P × R}{P×R}= \frac{2×TP}{样例总数+ TP-TN} F1=P×R2×P×R​=样例总数+TP−TN2×TP​ F β F_{\beta} Fβ​度量 F β = ( 1 + β 2 ) P R ( β 2 P ) + R F_{\beta} = \frac{(1+\beta^2)PR}{(\beta^2P) + R} Fβ​=(β2P)+R(1+β2)PR​ 其中 β \beta β表示查全率相对于查准率的重要性， β &amp;gt; 1 \beta&amp;gt;1 β&gt;1时查全率有更大的影响， β &amp;lt; 1 \beta&amp;lt;1 β&lt;1时查准率有更大的影响。 在面对多分类问题的时候，可以选择计算两两类别之间的混淆矩阵，进而得到两两数据之间的P和R，对P和R求平均值可以得宏查准率和宏查全率。也可以计算两两类别之间的混淆矩阵，对混淆矩阵求平均值，进而得到微查准率和微查全率。" />
<link rel="canonical" href="https://mlh.app/2019/01/14/462af1a7f7412fbd147c62820a4d578b.html" />
<meta property="og:url" content="https://mlh.app/2019/01/14/462af1a7f7412fbd147c62820a4d578b.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-14T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/pengwill97/article/details/86484494 第2章 模型评估与选择· 2.1 经验误差与过拟合 错误率：分类错误的样本数占总样本数的比例 精度：1-错误率 过拟合：学习器把训练样本学的太好，甚至把训练样本的特点当做了潜在样本的一般性质，导致泛化性能下降的现象。 引起过拟合的因素一般是学习能力太过强大。 欠拟合：对训练样本的一般性质没有学习好。 引起欠拟合的因素一般是学习能力低下。 对候选模型的评估方法，对泛化误差进行评估，并选取泛化误差的最小的。由于无法直接获得泛化误差，需要选择一定的评估方法。 2.2 评估方法 需要建立测试集(testing set)，将模型在测试集上测试误差(testing error)作为泛化误差的近似。 2.2.1 留出法 操作方法 将数据集D划分为两个互斥的集合，其中一个作为训练集S，另外一个作为测试集T。在S训练完后，在T上进行测试，得到测试误差，作为泛化误差的近似。 注意事项 测试集和训练集划分尽可能保持数据分布的一致性，避免因为数据集划分引入额外偏差而带来影响，在采样的时候使用分层采样的方法。 由于样本划分的不同，单次使用留出法得到的结果往往不够稳定可靠，需要随机划分，反复试验后取平均值作为最后的结果。 2.2.2 交叉验证法 操作方法 交叉验证法首项将数据集D划分为k个大小相似的互斥子集，每个子集尽可能保持数据分布一致(分层采样)。将其中的k-1个子集作为训练集，剩余一个子集作为测试集。将每个子集均做为测试集进行一次(共k次)交叉验证法，又称为k折交叉验证。 注意事项 与留出法相同，通常要将随机使用不同的划分p次，将p次的结果取平均值作为p次k折交叉验证的最终结果。 特别的，若k等于数据集中样本总数，即可得到留一法，留一法中被实际评估的模型与期望评估模型用数据集D训练处的模型很相似，但是计算开销很大。 2.2.3 自助法 操作方法 给定一个包含m个样本的数据集D，每次从中挑选一个样本拷贝进D‘，执行m次后，可以得到一个包含m个样本的数据集D’。若执行次数无限多，那么大概有 1 e \\frac{1}{e} e1​的样本始终没有被选择到。将D’作为训练集，将D\\D’作为作为测试集。这样的测试结果，也作为包外估计。 注意事项 自助法在数据集较小，难以划分训练集和测试集是很有用。 2.2.4 参数调节与最终模型 参数调节 对每个参数选定一个范围和变化步长，例如在[0,0.2]范围内以0.05作为步长，从候选值中选出定值。假定算法有3个参数，每个参数仅考虑5个候选值，这样就有 5 3 = 125 5^3=125 53=125个模型进行考察。 最终模型 在学习算法和参数配置已经选定后，应该用数据集D重新训练整个模型，在训练中需要使用数据集中所有的m个样本。 2.3 性能度量 用于衡量模型泛化能力的评价标准，就是性能度量。 在回归模型中，常用的性能度量是均方误差(mean squared error) E ( f ; d ) = 1 m ( f ( x i ) − y i ) 2 E(f;d) = \\frac{1}{m}(f(x_i)-y_i)^2 E(f;d)=m1​(f(xi​)−yi​)2 当给定数据分布 D D D和概率密度函数 p ( ⋅ ) p(·) p(⋅)，均方误差可以描述为 E ( f ; D ) = ∫ x ∼ D ( f ( x ) − y ) 2 p ( x ) d x E(f;D) = \\int_{x \\sim D}(f(x)-y)^2p(x)dx E(f;D)=∫x∼D​(f(x)−y)2p(x)dx 个人的直观理解为，已知数据集中每个数据出现的概率，可以求出模型对于数据的均方误差。 2.3.1 错误率与精度 错误率 对于分类任务来说，可以认为是分类错误的样本数占样本总数的比例 E ( f ; D ) = 1 m ∑ i = 1 m I ( f ( x i ) ≠ y i ) E(f;D)=\\frac{1}{m} \\sum_{i=1}^{m} \\mathbb I(f(x_i) \\ne y_i) E(f;D)=m1​∑i=1m​I(f(xi​)̸​=yi​) 对于给定数据分布，可以认为 E ( f ; D ) = ∫ x ∼ D I ( f ( x i ) ≠ y i ) p ( x ) d x E(f;D)=\\int_{x \\sim D}\\mathbb I(f(x_i) \\ne y_i)p(x)dx E(f;D)=∫x∼D​I(f(xi​)̸​=yi​)p(x)dx 精度 a c c ( f ; D ) = 1 m ∑ i = 1 m I ( f ( x i ) = y i ) acc(f;D) = \\frac{1}{m} \\sum_{i=1}^{m} \\mathbb I(f(x_i) = y_i) acc(f;D)=m1​∑i=1m​I(f(xi​)=yi​) 给定数据分布，可以认为 E ( f ; D ) = ∫ x ∼ D I ( f ( x i ) = y i ) p ( x ) d x E(f;D)=\\int_{x \\sim D}\\mathbb I(f(x_i) = y_i)p(x)dx E(f;D)=∫x∼D​I(f(xi​)=yi​)p(x)dx KaTeX parse error: Expected &#39;EOF&#39;, got &#39;\\romannumeral&#39; at position 1: \\̲r̲o̲m̲a̲n̲n̲u̲m̲e̲r̲a̲l̲1 2.3.2 查准率，查全率与F1 对于二分类问题，可以将样例根据其真实类别与学习器预测类别的组合划分为：真正例(true positive)、假正例(false positive)、真反例(true negative)、假反例(false negative)四种情况，用TP、FP、TN、FN代表四种情况，显然可得TP + FP + FN + TN = 总样本数。 TP：本身为正例，预测结果也为正例。 FP：本身为反例，预测结果为正例。 TN：本身为反例，预测结果也为反例。 FN：本身为正例，预测结果为反例。 查准率： P = T P T P + F P P = \\frac{TP}{TP+FP} P=TP+FPTP​ 查全率： R = T P T P + F N R = \\frac{TP}{TP+FN} R=TP+FNTP​ 可以这样理解，我们观察到的肯定是模型的输出结果，准确的应该是TP，但是由于模型精确度不够高，有些反例也被当做正例，也就是FP，故查准率应该是TP占TP和FP的百分比。从另一方面来讲，我们想要了解到正例在分类中的出现情况，然而有些正例被当做反例输出出来了，即FN，所以查全率是TP占TP和FN的百分比。 这一对度量是相互矛盾的，即查准率高的时候，查全率往往偏低，查全率高的时候，查准率往往偏低。 关于P-R曲线，个人觉的西瓜书上讲解的不是很清楚，可以参考这篇博客 有几点觉得还是值得注意的 P-R曲线可能会过(0,0)点。如当第一个样本本身为反例，预测结果也为反例的时候，此时TP=0，故P=R=0。不过这样情况发生概率较小，若排序后第一个样本不能正确预测，那么学习模型和可能出线了问题。 最理想的PR曲线是一个矩形，即学习模型找到一条分界线，成功将数据集分为TP和TN。 若一条PR曲线完全包含另外一条PR曲线，则认为前者更优，若交叉，则可通过平衡点(Break-Even Point)、面积来判断孰优孰劣。BEP和面积都是越大越好。 F1度量 F 1 = 2 × P × R P × R = 2 × T P 样 例 总 数 + T P − T N F1 = \\frac{2 × P × R}{P×R}= \\frac{2×TP}{样例总数+ TP-TN} F1=P×R2×P×R​=样例总数+TP−TN2×TP​ F β F_{\\beta} Fβ​度量 F β = ( 1 + β 2 ) P R ( β 2 P ) + R F_{\\beta} = \\frac{(1+\\beta^2)PR}{(\\beta^2P) + R} Fβ​=(β2P)+R(1+β2)PR​ 其中 β \\beta β表示查全率相对于查准率的重要性， β &amp;gt; 1 \\beta&amp;gt;1 β&gt;1时查全率有更大的影响， β &amp;lt; 1 \\beta&amp;lt;1 β&lt;1时查准率有更大的影响。 在面对多分类问题的时候，可以选择计算两两类别之间的混淆矩阵，进而得到两两数据之间的P和R，对P和R求平均值可以得宏查准率和宏查全率。也可以计算两两类别之间的混淆矩阵，对混淆矩阵求平均值，进而得到微查准率和微查全率。","@type":"BlogPosting","url":"https://mlh.app/2019/01/14/462af1a7f7412fbd147c62820a4d578b.html","headline":"【Machine Learining】Ch2. 模型评估与选择","dateModified":"2019-01-14T00:00:00+08:00","datePublished":"2019-01-14T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/01/14/462af1a7f7412fbd147c62820a4d578b.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>【Machine Learining】Ch2. 模型评估与选择</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="article-copyright">
   版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/pengwill97/article/details/86484494 
 </div> 
 <div id="content_views" class="markdown_views prism-atom-one-light"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p>第2章 模型评估与选择·</p> 
  <p>2.1 经验误差与过拟合</p> 
  <p>错误率：分类错误的样本数占总样本数的比例<br> 精度：1-错误率</p> 
  <p>过拟合：学习器把训练样本学的太好，甚至把训练样本的特点当做了潜在样本的一般性质，导致泛化性能下降的现象。<br> 引起过拟合的因素一般是学习能力太过强大。</p> 
  <p>欠拟合：对训练样本的一般性质没有学习好。<br> 引起欠拟合的因素一般是学习能力低下。</p> 
  <p>对候选模型的评估方法，对泛化误差进行评估，并选取泛化误差的最小的。由于无法直接获得泛化误差，需要选择一定的评估方法。</p> 
  <p>2.2 评估方法</p> 
  <p>需要建立测试集(testing set)，将模型在测试集上测试误差(testing error)作为泛化误差的近似。</p> 
  <p>2.2.1 留出法</p> 
  <p>操作方法</p> 
  <p>将数据集D划分为两个互斥的集合，其中一个作为训练集S，另外一个作为测试集T。在S训练完后，在T上进行测试，得到测试误差，作为泛化误差的近似。</p> 
  <p>注意事项</p> 
  <ol> 
   <li>测试集和训练集划分尽可能保持数据分布的一致性，避免因为数据集划分引入额外偏差而带来影响，在采样的时候使用分层采样的方法。</li> 
   <li>由于样本划分的不同，单次使用留出法得到的结果往往不够稳定可靠，需要随机划分，反复试验后取平均值作为最后的结果。</li> 
  </ol> 
  <p>2.2.2 交叉验证法</p> 
  <p>操作方法</p> 
  <p>交叉验证法首项将数据集D划分为k个大小相似的互斥子集，每个子集尽可能保持数据分布一致(分层采样)。将其中的k-1个子集作为训练集，剩余一个子集作为测试集。将每个子集均做为测试集进行一次(共k次)交叉验证法，又称为k折交叉验证。</p> 
  <p>注意事项</p> 
  <ol> 
   <li>与留出法相同，通常要将随机使用不同的划分p次，将p次的结果取平均值作为p次k折交叉验证的最终结果。</li> 
   <li>特别的，若k等于数据集中样本总数，即可得到留一法，留一法中被实际评估的模型与期望评估模型用数据集D训练处的模型很相似，但是计算开销很大。</li> 
  </ol> 
  <p>2.2.3 自助法</p> 
  <p>操作方法</p> 
  <p>给定一个包含m个样本的数据集D，每次从中挑选一个样本拷贝进D‘，执行m次后，可以得到一个包含m个样本的数据集D’。若执行次数无限多，那么大概有<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mfrac>
          <mn>
           1
          </mn>
          <mi>
           e
          </mi>
         </mfrac>
        </mrow>
        <annotation encoding="application/x-tex">
         \frac{1}{e}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">e</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>的样本始终没有被选择到。将D’作为训练集，将D\D’作为作为测试集。这样的测试结果，也作为包外估计。</p> 
  <p>注意事项</p> 
  <ol> 
   <li>自助法在数据集较小，难以划分训练集和测试集是很有用。</li> 
  </ol> 
  <p>2.2.4 参数调节与最终模型</p> 
  <p>参数调节</p> 
  <p>对每个参数选定一个范围和变化步长，例如在[0,0.2]范围内以0.05作为步长，从候选值中选出定值。假定算法有3个参数，每个参数仅考虑5个候选值，这样就有<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mn>
           5
          </mn>
          <mn>
           3
          </mn>
         </msup>
         <mo>
          =
         </mo>
         <mn>
          125
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         5^3=125
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">5</span></span></span></span></span>个模型进行考察。</p> 
  <p>最终模型</p> 
  <p>在学习算法和参数配置已经选定后，应该用数据集D重新训练整个模型，在训练中需要使用数据集中所有的m个样本。</p> 
  <p>2.3 性能度量</p> 
  <p>用于衡量模型泛化能力的评价标准，就是性能度量。</p> 
  <p>在回归模型中，常用的性能度量是均方误差(mean squared error)</p> 
  <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          E
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo separator="true">
          ;
         </mo>
         <mi>
          d
         </mi>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <mfrac>
          <mn>
           1
          </mn>
          <mi>
           m
          </mi>
         </mfrac>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           x
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          −
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <msup>
          <mo>
           )
          </mo>
          <mn>
           2
          </mn>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         E(f;d) = \frac{1}{m}(f(x_i)-y_i)^2
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">d</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.06411em; vertical-align: -0.25em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p> 
  <p>当给定数据分布<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          D
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         D
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span></span></span></span></span>和概率密度函数<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          p
         </mi>
         <mo>
          (
         </mo>
         <mo separator="true">
          ⋅
         </mo>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         p(·)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mclose">)</span></span></span></span></span>，均方误差可以描述为</p> 
  <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          E
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo separator="true">
          ;
         </mo>
         <mi>
          D
         </mi>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <msub>
          <mo>
           ∫
          </mo>
          <mrow>
           <mi>
            x
           </mi>
           <mo>
            ∼
           </mo>
           <mi>
            D
           </mi>
          </mrow>
         </msub>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo>
          (
         </mo>
         <mi>
          x
         </mi>
         <mo>
          )
         </mo>
         <mo>
          −
         </mo>
         <mi>
          y
         </mi>
         <msup>
          <mo>
           )
          </mo>
          <mn>
           2
          </mn>
         </msup>
         <mi>
          p
         </mi>
         <mo>
          (
         </mo>
         <mi>
          x
         </mi>
         <mo>
          )
         </mo>
         <mi>
          d
         </mi>
         <mi>
          x
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         E(f;D) = \int_{x \sim D}(f(x)-y)^2p(x)dx
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.16082em; vertical-align: -0.35582em;"></span><span class="mop"><span style="margin-right: 0.19445em; position: relative; top: -0.00056em;" class="mop op-symbol small-op">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.122511em;"><span class="" style="top: -2.34418em; margin-left: -0.19445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="mrel mtight">∼</span><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35582em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.06411em; vertical-align: -0.25em;"></span><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord mathit">d</span><span class="mord mathit">x</span></span></span></span></span></p> 
  <p>个人的直观理解为，已知数据集中每个数据出现的概率，可以求出模型对于数据的均方误差。</p> 
  <p>2.3.1 错误率与精度</p> 
  <p>错误率<br> 对于分类任务来说，可以认为是分类错误的样本数占样本总数的比例<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          E
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo separator="true">
          ;
         </mo>
         <mi>
          D
         </mi>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <mfrac>
          <mn>
           1
          </mn>
          <mi>
           m
          </mi>
         </mfrac>
         <msubsup>
          <mo>
           ∑
          </mo>
          <mrow>
           <mi>
            i
           </mi>
           <mo>
            =
           </mo>
           <mn>
            1
           </mn>
          </mrow>
          <mi>
           m
          </mi>
         </msubsup>
         <mi mathvariant="double-struck">
          I
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           x
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mi mathvariant="normal">
          ≠
         </mi>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         E(f;D)=\frac{1}{m} \sum_{i=1}^{m} \mathbb I(f(x_i) \ne y_i)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -0.000005em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.804292em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.2029em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathbb">I</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span><br> 对于给定数据分布，可以认为<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          E
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo separator="true">
          ;
         </mo>
         <mi>
          D
         </mi>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <msub>
          <mo>
           ∫
          </mo>
          <mrow>
           <mi>
            x
           </mi>
           <mo>
            ∼
           </mo>
           <mi>
            D
           </mi>
          </mrow>
         </msub>
         <mi mathvariant="double-struck">
          I
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           x
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mi mathvariant="normal">
          ≠
         </mi>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mi>
          p
         </mi>
         <mo>
          (
         </mo>
         <mi>
          x
         </mi>
         <mo>
          )
         </mo>
         <mi>
          d
         </mi>
         <mi>
          x
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         E(f;D)=\int_{x \sim D}\mathbb I(f(x_i) \ne y_i)p(x)dx
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.16082em; vertical-align: -0.35582em;"></span><span class="mop"><span style="margin-right: 0.19445em; position: relative; top: -0.00056em;" class="mop op-symbol small-op">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.122511em;"><span class="" style="top: -2.34418em; margin-left: -0.19445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="mrel mtight">∼</span><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35582em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathbb">I</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.69444em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="rlap"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="inner"><span class="mrel latin_fallback"≯</span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.19444em;"><span class=""></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord mathit">d</span><span class="mord mathit">x</span></span></span></span></span></p> 
  <p>精度<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          a
         </mi>
         <mi>
          c
         </mi>
         <mi>
          c
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo separator="true">
          ;
         </mo>
         <mi>
          D
         </mi>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <mfrac>
          <mn>
           1
          </mn>
          <mi>
           m
          </mi>
         </mfrac>
         <msubsup>
          <mo>
           ∑
          </mo>
          <mrow>
           <mi>
            i
           </mi>
           <mo>
            =
           </mo>
           <mn>
            1
           </mn>
          </mrow>
          <mi>
           m
          </mi>
         </msubsup>
         <mi mathvariant="double-struck">
          I
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           x
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         acc(f;D) = \frac{1}{m} \sum_{i=1}^{m} \mathbb I(f(x_i) = y_i)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">c</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -0.000005em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.804292em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.2029em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathbb">I</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span><br> 给定数据分布，可以认为<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          E
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo separator="true">
          ;
         </mo>
         <mi>
          D
         </mi>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <msub>
          <mo>
           ∫
          </mo>
          <mrow>
           <mi>
            x
           </mi>
           <mo>
            ∼
           </mo>
           <mi>
            D
           </mi>
          </mrow>
         </msub>
         <mi mathvariant="double-struck">
          I
         </mi>
         <mo>
          (
         </mo>
         <mi>
          f
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           x
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mo>
          )
         </mo>
         <mi>
          p
         </mi>
         <mo>
          (
         </mo>
         <mi>
          x
         </mi>
         <mo>
          )
         </mo>
         <mi>
          d
         </mi>
         <mi>
          x
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         E(f;D)=\int_{x \sim D}\mathbb I(f(x_i) = y_i)p(x)dx
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span style="margin-right: 0.05764em;" class="mord mathit">E</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.166667em;"></span><span style="margin-right: 0.02778em;" class="mord mathit">D</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.16082em; vertical-align: -0.35582em;"></span><span class="mop"><span style="margin-right: 0.19445em; position: relative; top: -0.00056em;" class="mop op-symbol small-op">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.122511em;"><span class="" style="top: -2.34418em; margin-left: -0.19445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">x</span><span class="mrel mtight">∼</span><span style="margin-right: 0.02778em;" class="mord mathit mtight">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.35582em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathbb">I</span><span class="mopen">(</span><span style="margin-right: 0.10764em;" class="mord mathit">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span style="margin-right: 0.03588em;" class="mord mathit">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord mathit">d</span><span class="mord mathit">x</span></span></span></span></span></p> 
  <p><span class="katex--inline">KaTeX parse error: Expected 'EOF', got '\romannumeral' at position 1: \̲r̲o̲m̲a̲n̲n̲u̲m̲e̲r̲a̲l̲1</span></p> 
  <p>2.3.2 查准率，查全率与F1</p> 
  <p>对于二分类问题，可以将样例根据其真实类别与学习器预测类别的组合划分为：真正例(true positive)、假正例(false positive)、真反例(true negative)、假反例(false negative)四种情况，用TP、FP、TN、FN代表四种情况，显然可得TP + FP + FN + TN = 总样本数。</p> 
  <p>TP：本身为正例，预测结果也为正例。<br> FP：本身为反例，预测结果为正例。<br> TN：本身为反例，预测结果也为反例。<br> FN：本身为正例，预测结果为反例。</p> 
  <p>查准率：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mo>
          =
         </mo>
         <mfrac>
          <mrow>
           <mi>
            T
           </mi>
           <mi>
            P
           </mi>
          </mrow>
          <mrow>
           <mi>
            T
           </mi>
           <mi>
            P
           </mi>
           <mo>
            +
           </mo>
           <mi>
            F
           </mi>
           <mi>
            P
           </mi>
          </mrow>
         </mfrac>
        </mrow>
        <annotation encoding="application/x-tex">
         P = \frac{TP}{TP+FP}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">P</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.27566em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.872331em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mbin mtight">+</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">F</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br> 查全率：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          R
         </mi>
         <mo>
          =
         </mo>
         <mfrac>
          <mrow>
           <mi>
            T
           </mi>
           <mi>
            P
           </mi>
          </mrow>
          <mrow>
           <mi>
            T
           </mi>
           <mi>
            P
           </mi>
           <mo>
            +
           </mo>
           <mi>
            F
           </mi>
           <mi>
            N
           </mi>
          </mrow>
         </mfrac>
        </mrow>
        <annotation encoding="application/x-tex">
         R = \frac{TP}{TP+FN}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.00773em;" class="mord mathit">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.27566em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.872331em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mbin mtight">+</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">F</span><span style="margin-right: 0.10903em;" class="mord mathit mtight">N</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p> 
  <p>可以这样理解，我们观察到的肯定是模型的输出结果，准确的应该是TP，但是由于模型精确度不够高，有些反例也被当做正例，也就是FP，故查准率应该是TP占TP和FP的百分比。从另一方面来讲，我们想要了解到正例在分类中的出现情况，然而有些正例被当做反例输出出来了，即FN，所以查全率是TP占TP和FN的百分比。</p> 
  <p>这一对度量是相互矛盾的，即查准率高的时候，查全率往往偏低，查全率高的时候，查准率往往偏低。</p> 
  <p>关于P-R曲线，个人觉的西瓜书上讲解的不是很清楚，可以参考<a href="https://blog.csdn.net/b876144622/article/details/80009867" rel="nofollow">这篇博客</a></p> 
  <p>有几点觉得还是值得注意的</p> 
  <ol> 
   <li>P-R曲线可能会过(0,0)点。如当第一个样本本身为反例，预测结果也为反例的时候，此时TP=0，故P=R=0。不过这样情况发生概率较小，若排序后第一个样本不能正确预测，那么学习模型和可能出线了问题。</li> 
   <li>最理想的PR曲线是一个矩形，即学习模型找到一条分界线，成功将数据集分为TP和TN。</li> 
   <li>若一条PR曲线完全包含另外一条PR曲线，则认为前者更优，若交叉，则可通过平衡点(Break-Even Point)、面积来判断孰优孰劣。BEP和面积都是越大越好。</li> 
  </ol> 
  <p>F1度量</p> 
  <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          F
         </mi>
         <mn>
          1
         </mn>
         <mo>
          =
         </mo>
         <mfrac>
          <mrow>
           <mn>
            2
           </mn>
           <mo>
            ×
           </mo>
           <mi>
            P
           </mi>
           <mo>
            ×
           </mo>
           <mi>
            R
           </mi>
          </mrow>
          <mrow>
           <mi>
            P
           </mi>
           <mo>
            ×
           </mo>
           <mi>
            R
           </mi>
          </mrow>
         </mfrac>
         <mo>
          =
         </mo>
         <mfrac>
          <mrow>
           <mn>
            2
           </mn>
           <mo>
            ×
           </mo>
           <mi>
            T
           </mi>
           <mi>
            P
           </mi>
          </mrow>
          <mrow>
           <mi mathvariant="normal">
            样
           </mi>
           <mi mathvariant="normal">
            例
           </mi>
           <mi mathvariant="normal">
            总
           </mi>
           <mi mathvariant="normal">
            数
           </mi>
           <mo>
            +
           </mo>
           <mi>
            T
           </mi>
           <mi>
            P
           </mi>
           <mo>
            −
           </mo>
           <mi>
            T
           </mi>
           <mi>
            N
           </mi>
          </mrow>
         </mfrac>
        </mrow>
        <annotation encoding="application/x-tex">
         F1 = \frac{2 × P × R}{P×R}= \frac{2×TP}{样例总数+ TP-TN}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.27566em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.872331em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mbin mtight">×</span><span style="margin-right: 0.00773em;" class="mord mathit mtight">R</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">×</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mbin mtight">×</span><span style="margin-right: 0.00773em;" class="mord mathit mtight">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.27566em; vertical-align: -0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.872331em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">样</span><span class="mord cjk_fallback mtight">例</span><span class="mord cjk_fallback mtight">总</span><span class="mord cjk_fallback mtight">数</span><span class="mbin mtight">+</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mbin mtight">−</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.10903em;" class="mord mathit mtight">N</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">×</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">T</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.403331em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p> 
  <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           F
          </mi>
          <mi>
           β
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         F_{\beta}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.05278em;" class="mord mathit mtight">β</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>度量</p> 
  <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           F
          </mi>
          <mi>
           β
          </mi>
         </msub>
         <mo>
          =
         </mo>
         <mfrac>
          <mrow>
           <mo>
            (
           </mo>
           <mn>
            1
           </mn>
           <mo>
            +
           </mo>
           <msup>
            <mi>
             β
            </mi>
            <mn>
             2
            </mn>
           </msup>
           <mo>
            )
           </mo>
           <mi>
            P
           </mi>
           <mi>
            R
           </mi>
          </mrow>
          <mrow>
           <mo>
            (
           </mo>
           <msup>
            <mi>
             β
            </mi>
            <mn>
             2
            </mn>
           </msup>
           <mi>
            P
           </mi>
           <mo>
            )
           </mo>
           <mo>
            +
           </mo>
           <mi>
            R
           </mi>
          </mrow>
         </mfrac>
        </mrow>
        <annotation encoding="application/x-tex">
         F_{\beta} = \frac{(1+\beta^2)PR}{(\beta^2P) + R}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span style="margin-right: 0.13889em;" class="mord mathit">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span style="margin-right: 0.05278em;" class="mord mathit mtight">β</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.62892em; vertical-align: -0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10892em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight"><span style="margin-right: 0.05278em;" class="mord mathit mtight">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.746314em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span class="mclose mtight">)</span><span class="mbin mtight">+</span><span style="margin-right: 0.00773em;" class="mord mathit mtight">R</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.485em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mtight"><span style="margin-right: 0.05278em;" class="mord mathit mtight">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.891314em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span style="margin-right: 0.13889em;" class="mord mathit mtight">P</span><span style="margin-right: 0.00773em;" class="mord mathit mtight">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.52em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br> 其中<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          β
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         \beta
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span style="margin-right: 0.05278em;" class="mord mathit">β</span></span></span></span></span>表示查全率相对于查准率的重要性，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          β
         </mi>
         <mo>
          &amp;gt;
         </mo>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         \beta&amp;gt;1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span style="margin-right: 0.05278em;" class="mord mathit">β</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>时查全率有更大的影响，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          β
         </mi>
         <mo>
          &amp;lt;
         </mo>
         <mn>
          1
         </mn>
        </mrow>
        <annotation encoding="application/x-tex">
         \beta&amp;lt;1
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span style="margin-right: 0.05278em;" class="mord mathit">β</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>时查准率有更大的影响。</p> 
  <p>在面对多分类问题的时候，可以选择计算两两类别之间的混淆矩阵，进而得到两两数据之间的P和R，对P和R求平均值可以得宏查准率和宏查全率。也可以计算两两类别之间的混淆矩阵，对混淆矩阵求平均值，进而得到微查准率和微查全率。</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7b4cdcb592.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
