<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>《数据分析与挖掘实战》总结及代码练习—chap3 数据探索 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="《数据分析与挖掘实战》总结及代码练习—chap3 数据探索" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="目录 &nbsp;chap3 数据探索 3.1 数据质量分析 3.1.1 缺失值 3.1.2异常值 分析 3.1.3 一致性分析：矛盾性，不相容性 3.2 数据特征分析 3.2.1分布分析：分布特征 &amp; 分布类型 3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调， 3.2.3 统计量分析： 3.2.4 周期性分析 3.2.5 贡献度分析：帕累托法则20/80定律 3.2.6 相关性分析 3.3 Python主要数据探索函数 3.3.1 基本统计特征函数（DataFrame or Series） 3.3.2 拓展统计特征函数（DataFrame or Series） 3.3.3 统计作图函数 &nbsp; &nbsp;chap3 数据探索 样本数量&amp;质量，不一致，重复数据 特殊符号，特征，特征之间的关联性 3.1 数据质量分析 3.1.1 缺失值 缺失原因： 暂时无法获取，或者获取代价太大； 人为：不重要，忘记，理解错误； 非人为：设备故障 影响： 丢失信息，不确定性增加，建模混乱。 分析： 缺失值属性以及个数，缺失率 处理： &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除、插值处理、不处理 —&gt; 详情见4.1.1 3.1.2异常值 分析 不可忽视 检验(录入错误)不合常理数据 –&gt; 分析原因 à 改进决策 : 简单统计量分析； 3σ原则，超出3σ的概率 P&lt;=0.03 箱形图分析：提供识别异常值的标准（&lt;QL-1.5IQR 或者 &gt;QU+1.5IQR，IQR是四分位间距，QL下四分位数，QU上四分位数）。鲁棒性：有25%的数据可以偏离任意远 而不扰动四分位数，评价标准很客观。 3.1.2 python代码： #-*- coding: utf-8 -*- import pandas as pd &nbsp; catering_sale = &#39;../data/catering_sale.xls&#39; #餐饮数据 data = pd.read_excel(catering_sale, index_col = u&#39;日期&#39;) #读取数据，指定“日期”列为索引列（reade_csv打开csv文件，eread_excel打开xls文件） data.describe() &nbsp; import matplotlib.pyplot as plt #导入图像库 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用来正常显示中文标签 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #用来正常显示负号 &nbsp; plt.figure() #建立图像 p = data.boxplot(return_type=&#39;dict&#39;) #画箱线图，直接使用DataFrame的方法 x = p[&#39;fliers&#39;][0].get_xdata() # &#39;flies&#39;即为异常值的标签 y = p[&#39;fliers&#39;][0].get_ydata() #得出根据箱形图四分位数得出的异常值 y.sort() #从小到大排序，该方法直接改变原对象 &nbsp; #用annotate添加注释 #其中有些相近的点，注解会出现重叠，难以看清，需要一些技巧来控制。 #以下参数都是经过调试的，需要具体问题具体调试。 for i in range(len(x)): &nbsp; if i&gt;0: &nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.05 -0.8/(y[i]-y[i-1]),y[i])) &nbsp; else: &nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.08,y[i])) &nbsp; plt.show() #展示箱线图 &nbsp; 3.1.3 一致性分析：矛盾性，不相容性 原因：集成，来源不一致，不同的数据源，重复存放的数据 &nbsp; 3.2 数据特征分析 3.2.1分布分析：分布特征 &amp; 分布类型 定量数据：对称or非对称，频率分布直方图，茎叶图 --&gt; 分析异常数据 定性数据：饼图，条形图 3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调， 绝对数、相对数、结构相对数（某特征的占比、比例相对数）、比较相对数（同一时期不同地方，同一地区不同时期、强度相对数）、计划完成度相对数、动态相对数。 3.2.3 统计量分析： 集中趋势：均值、中位数、众数 离中趋势：方差（标准差），四分位数，极差，变异系数CV=s/Xmean 代码： (注意，statistics的数据类型是dataframe) data_after=data[(data[u&#39;销量&#39;]&gt;500)&amp;(data[u&#39;销量&#39;]&lt;5000)] statistics=data_after.describe() &nbsp; statistics.loc[&#39;range&#39;]=statistics.loc[&#39;max&#39;]-statistics.loc[&#39;min&#39;] statistics.loc[&#39;dis&#39;]=statistics.loc[&#39;75%&#39;]-statistics.loc[&#39;25%&#39;] statistics.loc[&#39;CV&#39;]=statistics.loc[&#39;std&#39;]/statistics.loc[&#39;mean&#39;] statistics statistics Out[58]: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 销量 count&nbsp;&nbsp; 195.000000 mean&nbsp;&nbsp; 2744.595385 std&nbsp;&nbsp;&nbsp;&nbsp; 424.739407 min&nbsp;&nbsp;&nbsp;&nbsp; 865.000000 25%&nbsp;&nbsp;&nbsp; 2460.600000 50%&nbsp;&nbsp;&nbsp; 2655.900000 75%&nbsp;&nbsp;&nbsp; 3023.200000 max&nbsp;&nbsp;&nbsp; 4065.200000 range&nbsp; 3200.200000 dis&nbsp;&nbsp;&nbsp;&nbsp; 562.600000 CV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.154755 3.2.4 周期性分析 变量随着时间变化&nbsp; --&gt; 周期性趋势 （年度、季度、月度、天、小时） 3.2.5 贡献度分析：帕累托法则20/80定律 #-*- coding: utf-8 -*- #菜品盈利数据 帕累托图 from __future__ import print_function import pandas as pd &nbsp; #初始化参数 dish_profit = &#39;../data/catering_dish_profit.xls&#39; #餐饮菜品盈利数据 data = pd.read_excel(dish_profit, index_col = u&#39;菜品名&#39;) data = data[u&#39;盈利&#39;].copy() #data.sort(ascending = False) &nbsp; import matplotlib.pyplot as plt #导入图像库 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用来正常显示中文标签 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #用来正常显示负号 &nbsp; plt.figure() data.plot(kind=&#39;bar&#39;) plt.ylabel(u&#39;盈利（元）&#39;) p = 1.0*data.cumsum()/data.sum() p.plot(color = &#39;r&#39;, secondary_y = True, style = &#39;-o&#39;,linewidth = 2) plt.annotate(format(p[6], &#39;.4%&#39;), xy = (6, p[6]), xytext=(6*0.9, p[6]*0.9), arrowprops=dict(arrowstyle=&quot;-&gt;&quot;, connectionstyle=&quot;arc3,rad=.2&quot;)) #添加注释，即85%处的标记。这里包括了指定箭头样式。 plt.ylabel(u&#39;盈利（比例）&#39;) plt.show() &nbsp; 3.2.6 相关性分析 1. 直接绘制散点图or散点图矩阵 à 观察线性相关 或者 是否存在其他相关性 2. 计算相关系数： 2.1 Pearson相关系数： r=cov(x,y)/(std(x)×std(y)) ，（要求连续变量服从正态分布） 值域[-1,1]： abs(r)&lt;0.3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 不存在线性相关； 0.3&lt;abs(r)&lt;0.5 &nbsp;&nbsp; 弱线性相关； 0.5&lt;abs(r)&lt;0.8 &nbsp;&nbsp; 显著线性相关 0.8&lt;abs(r) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 非常显著线性相关 2.2 Spearman 秩相关系数&nbsp; --&gt; 等级相关系数 （适用于 等级变量 等不服从正态分布的变量，只要两个变量具有严格的单调关系，则是完全Spearman相关） &nbsp; 斯皮尔曼相关系数表明X(独立变量)和Y(依赖变量)的相关方向。如果当X增加时，Y趋向于增加，斯皮尔曼相关系数则为正。如果当X增加时，Y趋向于减少，斯皮尔曼相关系数则为负。斯皮尔曼相关系数为零表明当X增加时Y没有任何趋向性。当X和Y越来越接近完全的单调相关时，斯皮尔曼相关系数会在绝对值上增加。当X和Y完全单调相关时，斯皮尔曼相关系数的绝对值为1。完全的单调递增关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是同号。完全的单调递减关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是异号。 斯皮尔曼相关系数经常被称作&quot;非参数&quot;的。这里有两层含义。首先，当X和Y的关系是由任意单调函数描述的，则它们是完全皮尔逊相关的。与此相应的，皮尔逊相关系数只能给出由线性方程描述的X和Y的相关性。其次，斯皮尔曼不需要先验知识(也就是说，知道其参数)便可以准确获取XandY的采样概率分布。 &nbsp; 3. 判定系数 --&gt; 相关系数的平方 --&gt; 越接近1 --&gt;&nbsp;&nbsp;拟合效果越好 #-*- coding: utf-8 -*- #餐饮销量数据相关性分析 from __future__ import print_function import pandas as pd &nbsp; catering_sale = &#39;../data/catering_sale_all.xls&#39; #餐饮数据，含有其他属性 data = pd.read_excel(catering_sale, index_col = u&#39;日期&#39;) #读取数据，指定“日期”列为索引列 data.corr() #相关系数矩阵，即给出了任意两款菜式之间的相关系数 data.corr()[u&#39;百合酱蒸凤爪&#39;] #只显示“百合酱蒸凤爪”与其他菜式的相关系数 data[u&#39;百合酱蒸凤爪&#39;].corr(data[u&#39;翡翠蒸香茜饺&#39;]) #计算“百合酱蒸凤爪”与“翡翠蒸香茜饺”的相关系数 &nbsp; help(pd.DataFrame.corr) Help on function corr in module pandas.core.frame: corr(self, method=&#39;pearson&#39;, min_periods=1) &nbsp;&nbsp;&nbsp; Compute pairwise correlation of columns, excluding NA/null values &nbsp;&nbsp;&nbsp; Parameters &nbsp;&nbsp;&nbsp; ---------- &nbsp;&nbsp;&nbsp; method : {&#39;pearson&#39;, &#39;kendall&#39;, &#39;spearman&#39;} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * pearson : standard correlation coefficient &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * kendall : Kendall Tau correlation coefficient &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * spearman : Spearman rank correlation &nbsp;&nbsp;&nbsp; min_periods : int, optional &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Minimum number of observations required per pair of columns &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to have a valid result. Currently only available for pearson &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and spearman correlation &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns &nbsp;&nbsp;&nbsp; ------- &nbsp;&nbsp;&nbsp; y : DataFrame &nbsp; 3.3 Python主要数据探索函数 3.3.1 基本统计特征函数（DataFrame or Series） 方法 功能 库 方法 功能 库 D.sum() &nbsp; Pandas D.corr() 相关系数矩阵 Pandas D.mean() &nbsp; Pandas D.cov() 协方差矩阵 Pandas D.var() 方差 Pandas D.skew() 偏度（三阶矩） Pandas D.std() &nbsp; Pandas D.kurt() 峰度（四阶矩） Pandas D.describe() &nbsp; Pandas &nbsp; &nbsp; &nbsp; 3.3.2 拓展统计特征函数（DataFrame or Series） 方法 功能 库 方法 功能 库 cumsum() 依次给出前1/2/3…n个数的和 Pandas rolling_sum() 计算数据样本的总和（按列计算） Pandas cumprod() 依次给出前1/2/3…n个数的积 Pandas rolling_mean() 。。。 Pandas cummax() 。。。 Pandas rolling_var() 。。。 Pandas cummin() 。。。 Pandas rolling_std() 。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_cov() 。。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_skew() 。。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_kurt() 。。。 Pandas 3.3.3 统计作图函数 方法 功能 库 说明 plot() 绘制线性二维图 Matlotlib/Pandas plt.plot(x,y,S) DataFrame.plot(kind=’line/bar(条形)/box/barh/hist(直方图)/kde(密度)/area()/pie(饼图)’)&nbsp;&nbsp; #bar类似是对离散离散特征每个特征 Series.plot() pie() 饼图 Matlotlib/Pandas plt.pie(size); #size是列表，表示扇形各个部分的比例 hist() 二维条形直方图 Matlotlib/Pandas plt.hist(x,n); #x代表一维数组，n代表组数 &nbsp; boxplot() 箱形图 Pandas &nbsp; plot(logy=True) plot(logx=True) y轴对数 Pandas &nbsp; plot(yerr=error) 误差条形图 Pandas ？？？不理解 &nbsp; &nbsp; &nbsp; &nbsp; Figure 1 bar plot &nbsp; Figure 2 hist plot &nbsp; Figure 3 sale.boxplot() &nbsp; Figure 4 sale.plot(kind=&#39;box&#39;) sale.plot(logy=True) &nbsp; &nbsp; &nbsp;" />
<meta property="og:description" content="目录 &nbsp;chap3 数据探索 3.1 数据质量分析 3.1.1 缺失值 3.1.2异常值 分析 3.1.3 一致性分析：矛盾性，不相容性 3.2 数据特征分析 3.2.1分布分析：分布特征 &amp; 分布类型 3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调， 3.2.3 统计量分析： 3.2.4 周期性分析 3.2.5 贡献度分析：帕累托法则20/80定律 3.2.6 相关性分析 3.3 Python主要数据探索函数 3.3.1 基本统计特征函数（DataFrame or Series） 3.3.2 拓展统计特征函数（DataFrame or Series） 3.3.3 统计作图函数 &nbsp; &nbsp;chap3 数据探索 样本数量&amp;质量，不一致，重复数据 特殊符号，特征，特征之间的关联性 3.1 数据质量分析 3.1.1 缺失值 缺失原因： 暂时无法获取，或者获取代价太大； 人为：不重要，忘记，理解错误； 非人为：设备故障 影响： 丢失信息，不确定性增加，建模混乱。 分析： 缺失值属性以及个数，缺失率 处理： &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除、插值处理、不处理 —&gt; 详情见4.1.1 3.1.2异常值 分析 不可忽视 检验(录入错误)不合常理数据 –&gt; 分析原因 à 改进决策 : 简单统计量分析； 3σ原则，超出3σ的概率 P&lt;=0.03 箱形图分析：提供识别异常值的标准（&lt;QL-1.5IQR 或者 &gt;QU+1.5IQR，IQR是四分位间距，QL下四分位数，QU上四分位数）。鲁棒性：有25%的数据可以偏离任意远 而不扰动四分位数，评价标准很客观。 3.1.2 python代码： #-*- coding: utf-8 -*- import pandas as pd &nbsp; catering_sale = &#39;../data/catering_sale.xls&#39; #餐饮数据 data = pd.read_excel(catering_sale, index_col = u&#39;日期&#39;) #读取数据，指定“日期”列为索引列（reade_csv打开csv文件，eread_excel打开xls文件） data.describe() &nbsp; import matplotlib.pyplot as plt #导入图像库 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用来正常显示中文标签 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #用来正常显示负号 &nbsp; plt.figure() #建立图像 p = data.boxplot(return_type=&#39;dict&#39;) #画箱线图，直接使用DataFrame的方法 x = p[&#39;fliers&#39;][0].get_xdata() # &#39;flies&#39;即为异常值的标签 y = p[&#39;fliers&#39;][0].get_ydata() #得出根据箱形图四分位数得出的异常值 y.sort() #从小到大排序，该方法直接改变原对象 &nbsp; #用annotate添加注释 #其中有些相近的点，注解会出现重叠，难以看清，需要一些技巧来控制。 #以下参数都是经过调试的，需要具体问题具体调试。 for i in range(len(x)): &nbsp; if i&gt;0: &nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.05 -0.8/(y[i]-y[i-1]),y[i])) &nbsp; else: &nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.08,y[i])) &nbsp; plt.show() #展示箱线图 &nbsp; 3.1.3 一致性分析：矛盾性，不相容性 原因：集成，来源不一致，不同的数据源，重复存放的数据 &nbsp; 3.2 数据特征分析 3.2.1分布分析：分布特征 &amp; 分布类型 定量数据：对称or非对称，频率分布直方图，茎叶图 --&gt; 分析异常数据 定性数据：饼图，条形图 3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调， 绝对数、相对数、结构相对数（某特征的占比、比例相对数）、比较相对数（同一时期不同地方，同一地区不同时期、强度相对数）、计划完成度相对数、动态相对数。 3.2.3 统计量分析： 集中趋势：均值、中位数、众数 离中趋势：方差（标准差），四分位数，极差，变异系数CV=s/Xmean 代码： (注意，statistics的数据类型是dataframe) data_after=data[(data[u&#39;销量&#39;]&gt;500)&amp;(data[u&#39;销量&#39;]&lt;5000)] statistics=data_after.describe() &nbsp; statistics.loc[&#39;range&#39;]=statistics.loc[&#39;max&#39;]-statistics.loc[&#39;min&#39;] statistics.loc[&#39;dis&#39;]=statistics.loc[&#39;75%&#39;]-statistics.loc[&#39;25%&#39;] statistics.loc[&#39;CV&#39;]=statistics.loc[&#39;std&#39;]/statistics.loc[&#39;mean&#39;] statistics statistics Out[58]: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 销量 count&nbsp;&nbsp; 195.000000 mean&nbsp;&nbsp; 2744.595385 std&nbsp;&nbsp;&nbsp;&nbsp; 424.739407 min&nbsp;&nbsp;&nbsp;&nbsp; 865.000000 25%&nbsp;&nbsp;&nbsp; 2460.600000 50%&nbsp;&nbsp;&nbsp; 2655.900000 75%&nbsp;&nbsp;&nbsp; 3023.200000 max&nbsp;&nbsp;&nbsp; 4065.200000 range&nbsp; 3200.200000 dis&nbsp;&nbsp;&nbsp;&nbsp; 562.600000 CV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.154755 3.2.4 周期性分析 变量随着时间变化&nbsp; --&gt; 周期性趋势 （年度、季度、月度、天、小时） 3.2.5 贡献度分析：帕累托法则20/80定律 #-*- coding: utf-8 -*- #菜品盈利数据 帕累托图 from __future__ import print_function import pandas as pd &nbsp; #初始化参数 dish_profit = &#39;../data/catering_dish_profit.xls&#39; #餐饮菜品盈利数据 data = pd.read_excel(dish_profit, index_col = u&#39;菜品名&#39;) data = data[u&#39;盈利&#39;].copy() #data.sort(ascending = False) &nbsp; import matplotlib.pyplot as plt #导入图像库 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用来正常显示中文标签 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #用来正常显示负号 &nbsp; plt.figure() data.plot(kind=&#39;bar&#39;) plt.ylabel(u&#39;盈利（元）&#39;) p = 1.0*data.cumsum()/data.sum() p.plot(color = &#39;r&#39;, secondary_y = True, style = &#39;-o&#39;,linewidth = 2) plt.annotate(format(p[6], &#39;.4%&#39;), xy = (6, p[6]), xytext=(6*0.9, p[6]*0.9), arrowprops=dict(arrowstyle=&quot;-&gt;&quot;, connectionstyle=&quot;arc3,rad=.2&quot;)) #添加注释，即85%处的标记。这里包括了指定箭头样式。 plt.ylabel(u&#39;盈利（比例）&#39;) plt.show() &nbsp; 3.2.6 相关性分析 1. 直接绘制散点图or散点图矩阵 à 观察线性相关 或者 是否存在其他相关性 2. 计算相关系数： 2.1 Pearson相关系数： r=cov(x,y)/(std(x)×std(y)) ，（要求连续变量服从正态分布） 值域[-1,1]： abs(r)&lt;0.3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 不存在线性相关； 0.3&lt;abs(r)&lt;0.5 &nbsp;&nbsp; 弱线性相关； 0.5&lt;abs(r)&lt;0.8 &nbsp;&nbsp; 显著线性相关 0.8&lt;abs(r) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 非常显著线性相关 2.2 Spearman 秩相关系数&nbsp; --&gt; 等级相关系数 （适用于 等级变量 等不服从正态分布的变量，只要两个变量具有严格的单调关系，则是完全Spearman相关） &nbsp; 斯皮尔曼相关系数表明X(独立变量)和Y(依赖变量)的相关方向。如果当X增加时，Y趋向于增加，斯皮尔曼相关系数则为正。如果当X增加时，Y趋向于减少，斯皮尔曼相关系数则为负。斯皮尔曼相关系数为零表明当X增加时Y没有任何趋向性。当X和Y越来越接近完全的单调相关时，斯皮尔曼相关系数会在绝对值上增加。当X和Y完全单调相关时，斯皮尔曼相关系数的绝对值为1。完全的单调递增关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是同号。完全的单调递减关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是异号。 斯皮尔曼相关系数经常被称作&quot;非参数&quot;的。这里有两层含义。首先，当X和Y的关系是由任意单调函数描述的，则它们是完全皮尔逊相关的。与此相应的，皮尔逊相关系数只能给出由线性方程描述的X和Y的相关性。其次，斯皮尔曼不需要先验知识(也就是说，知道其参数)便可以准确获取XandY的采样概率分布。 &nbsp; 3. 判定系数 --&gt; 相关系数的平方 --&gt; 越接近1 --&gt;&nbsp;&nbsp;拟合效果越好 #-*- coding: utf-8 -*- #餐饮销量数据相关性分析 from __future__ import print_function import pandas as pd &nbsp; catering_sale = &#39;../data/catering_sale_all.xls&#39; #餐饮数据，含有其他属性 data = pd.read_excel(catering_sale, index_col = u&#39;日期&#39;) #读取数据，指定“日期”列为索引列 data.corr() #相关系数矩阵，即给出了任意两款菜式之间的相关系数 data.corr()[u&#39;百合酱蒸凤爪&#39;] #只显示“百合酱蒸凤爪”与其他菜式的相关系数 data[u&#39;百合酱蒸凤爪&#39;].corr(data[u&#39;翡翠蒸香茜饺&#39;]) #计算“百合酱蒸凤爪”与“翡翠蒸香茜饺”的相关系数 &nbsp; help(pd.DataFrame.corr) Help on function corr in module pandas.core.frame: corr(self, method=&#39;pearson&#39;, min_periods=1) &nbsp;&nbsp;&nbsp; Compute pairwise correlation of columns, excluding NA/null values &nbsp;&nbsp;&nbsp; Parameters &nbsp;&nbsp;&nbsp; ---------- &nbsp;&nbsp;&nbsp; method : {&#39;pearson&#39;, &#39;kendall&#39;, &#39;spearman&#39;} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * pearson : standard correlation coefficient &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * kendall : Kendall Tau correlation coefficient &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * spearman : Spearman rank correlation &nbsp;&nbsp;&nbsp; min_periods : int, optional &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Minimum number of observations required per pair of columns &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to have a valid result. Currently only available for pearson &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and spearman correlation &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns &nbsp;&nbsp;&nbsp; ------- &nbsp;&nbsp;&nbsp; y : DataFrame &nbsp; 3.3 Python主要数据探索函数 3.3.1 基本统计特征函数（DataFrame or Series） 方法 功能 库 方法 功能 库 D.sum() &nbsp; Pandas D.corr() 相关系数矩阵 Pandas D.mean() &nbsp; Pandas D.cov() 协方差矩阵 Pandas D.var() 方差 Pandas D.skew() 偏度（三阶矩） Pandas D.std() &nbsp; Pandas D.kurt() 峰度（四阶矩） Pandas D.describe() &nbsp; Pandas &nbsp; &nbsp; &nbsp; 3.3.2 拓展统计特征函数（DataFrame or Series） 方法 功能 库 方法 功能 库 cumsum() 依次给出前1/2/3…n个数的和 Pandas rolling_sum() 计算数据样本的总和（按列计算） Pandas cumprod() 依次给出前1/2/3…n个数的积 Pandas rolling_mean() 。。。 Pandas cummax() 。。。 Pandas rolling_var() 。。。 Pandas cummin() 。。。 Pandas rolling_std() 。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_cov() 。。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_skew() 。。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_kurt() 。。。 Pandas 3.3.3 统计作图函数 方法 功能 库 说明 plot() 绘制线性二维图 Matlotlib/Pandas plt.plot(x,y,S) DataFrame.plot(kind=’line/bar(条形)/box/barh/hist(直方图)/kde(密度)/area()/pie(饼图)’)&nbsp;&nbsp; #bar类似是对离散离散特征每个特征 Series.plot() pie() 饼图 Matlotlib/Pandas plt.pie(size); #size是列表，表示扇形各个部分的比例 hist() 二维条形直方图 Matlotlib/Pandas plt.hist(x,n); #x代表一维数组，n代表组数 &nbsp; boxplot() 箱形图 Pandas &nbsp; plot(logy=True) plot(logx=True) y轴对数 Pandas &nbsp; plot(yerr=error) 误差条形图 Pandas ？？？不理解 &nbsp; &nbsp; &nbsp; &nbsp; Figure 1 bar plot &nbsp; Figure 2 hist plot &nbsp; Figure 3 sale.boxplot() &nbsp; Figure 4 sale.plot(kind=&#39;box&#39;) sale.plot(logy=True) &nbsp; &nbsp; &nbsp;" />
<link rel="canonical" href="https://mlh.app/2019/01/15/181a2c17c03e10c4e554a4d074e1c4c3.html" />
<meta property="og:url" content="https://mlh.app/2019/01/15/181a2c17c03e10c4e554a4d074e1c4c3.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-15T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"目录 &nbsp;chap3 数据探索 3.1 数据质量分析 3.1.1 缺失值 3.1.2异常值 分析 3.1.3 一致性分析：矛盾性，不相容性 3.2 数据特征分析 3.2.1分布分析：分布特征 &amp; 分布类型 3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调， 3.2.3 统计量分析： 3.2.4 周期性分析 3.2.5 贡献度分析：帕累托法则20/80定律 3.2.6 相关性分析 3.3 Python主要数据探索函数 3.3.1 基本统计特征函数（DataFrame or Series） 3.3.2 拓展统计特征函数（DataFrame or Series） 3.3.3 统计作图函数 &nbsp; &nbsp;chap3 数据探索 样本数量&amp;质量，不一致，重复数据 特殊符号，特征，特征之间的关联性 3.1 数据质量分析 3.1.1 缺失值 缺失原因： 暂时无法获取，或者获取代价太大； 人为：不重要，忘记，理解错误； 非人为：设备故障 影响： 丢失信息，不确定性增加，建模混乱。 分析： 缺失值属性以及个数，缺失率 处理： &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除、插值处理、不处理 —&gt; 详情见4.1.1 3.1.2异常值 分析 不可忽视 检验(录入错误)不合常理数据 –&gt; 分析原因 à 改进决策 : 简单统计量分析； 3σ原则，超出3σ的概率 P&lt;=0.03 箱形图分析：提供识别异常值的标准（&lt;QL-1.5IQR 或者 &gt;QU+1.5IQR，IQR是四分位间距，QL下四分位数，QU上四分位数）。鲁棒性：有25%的数据可以偏离任意远 而不扰动四分位数，评价标准很客观。 3.1.2 python代码： #-*- coding: utf-8 -*- import pandas as pd &nbsp; catering_sale = &#39;../data/catering_sale.xls&#39; #餐饮数据 data = pd.read_excel(catering_sale, index_col = u&#39;日期&#39;) #读取数据，指定“日期”列为索引列（reade_csv打开csv文件，eread_excel打开xls文件） data.describe() &nbsp; import matplotlib.pyplot as plt #导入图像库 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用来正常显示中文标签 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #用来正常显示负号 &nbsp; plt.figure() #建立图像 p = data.boxplot(return_type=&#39;dict&#39;) #画箱线图，直接使用DataFrame的方法 x = p[&#39;fliers&#39;][0].get_xdata() # &#39;flies&#39;即为异常值的标签 y = p[&#39;fliers&#39;][0].get_ydata() #得出根据箱形图四分位数得出的异常值 y.sort() #从小到大排序，该方法直接改变原对象 &nbsp; #用annotate添加注释 #其中有些相近的点，注解会出现重叠，难以看清，需要一些技巧来控制。 #以下参数都是经过调试的，需要具体问题具体调试。 for i in range(len(x)): &nbsp; if i&gt;0: &nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.05 -0.8/(y[i]-y[i-1]),y[i])) &nbsp; else: &nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.08,y[i])) &nbsp; plt.show() #展示箱线图 &nbsp; 3.1.3 一致性分析：矛盾性，不相容性 原因：集成，来源不一致，不同的数据源，重复存放的数据 &nbsp; 3.2 数据特征分析 3.2.1分布分析：分布特征 &amp; 分布类型 定量数据：对称or非对称，频率分布直方图，茎叶图 --&gt; 分析异常数据 定性数据：饼图，条形图 3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调， 绝对数、相对数、结构相对数（某特征的占比、比例相对数）、比较相对数（同一时期不同地方，同一地区不同时期、强度相对数）、计划完成度相对数、动态相对数。 3.2.3 统计量分析： 集中趋势：均值、中位数、众数 离中趋势：方差（标准差），四分位数，极差，变异系数CV=s/Xmean 代码： (注意，statistics的数据类型是dataframe) data_after=data[(data[u&#39;销量&#39;]&gt;500)&amp;(data[u&#39;销量&#39;]&lt;5000)] statistics=data_after.describe() &nbsp; statistics.loc[&#39;range&#39;]=statistics.loc[&#39;max&#39;]-statistics.loc[&#39;min&#39;] statistics.loc[&#39;dis&#39;]=statistics.loc[&#39;75%&#39;]-statistics.loc[&#39;25%&#39;] statistics.loc[&#39;CV&#39;]=statistics.loc[&#39;std&#39;]/statistics.loc[&#39;mean&#39;] statistics statistics Out[58]: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 销量 count&nbsp;&nbsp; 195.000000 mean&nbsp;&nbsp; 2744.595385 std&nbsp;&nbsp;&nbsp;&nbsp; 424.739407 min&nbsp;&nbsp;&nbsp;&nbsp; 865.000000 25%&nbsp;&nbsp;&nbsp; 2460.600000 50%&nbsp;&nbsp;&nbsp; 2655.900000 75%&nbsp;&nbsp;&nbsp; 3023.200000 max&nbsp;&nbsp;&nbsp; 4065.200000 range&nbsp; 3200.200000 dis&nbsp;&nbsp;&nbsp;&nbsp; 562.600000 CV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.154755 3.2.4 周期性分析 变量随着时间变化&nbsp; --&gt; 周期性趋势 （年度、季度、月度、天、小时） 3.2.5 贡献度分析：帕累托法则20/80定律 #-*- coding: utf-8 -*- #菜品盈利数据 帕累托图 from __future__ import print_function import pandas as pd &nbsp; #初始化参数 dish_profit = &#39;../data/catering_dish_profit.xls&#39; #餐饮菜品盈利数据 data = pd.read_excel(dish_profit, index_col = u&#39;菜品名&#39;) data = data[u&#39;盈利&#39;].copy() #data.sort(ascending = False) &nbsp; import matplotlib.pyplot as plt #导入图像库 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用来正常显示中文标签 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #用来正常显示负号 &nbsp; plt.figure() data.plot(kind=&#39;bar&#39;) plt.ylabel(u&#39;盈利（元）&#39;) p = 1.0*data.cumsum()/data.sum() p.plot(color = &#39;r&#39;, secondary_y = True, style = &#39;-o&#39;,linewidth = 2) plt.annotate(format(p[6], &#39;.4%&#39;), xy = (6, p[6]), xytext=(6*0.9, p[6]*0.9), arrowprops=dict(arrowstyle=&quot;-&gt;&quot;, connectionstyle=&quot;arc3,rad=.2&quot;)) #添加注释，即85%处的标记。这里包括了指定箭头样式。 plt.ylabel(u&#39;盈利（比例）&#39;) plt.show() &nbsp; 3.2.6 相关性分析 1. 直接绘制散点图or散点图矩阵 à 观察线性相关 或者 是否存在其他相关性 2. 计算相关系数： 2.1 Pearson相关系数： r=cov(x,y)/(std(x)×std(y)) ，（要求连续变量服从正态分布） 值域[-1,1]： abs(r)&lt;0.3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 不存在线性相关； 0.3&lt;abs(r)&lt;0.5 &nbsp;&nbsp; 弱线性相关； 0.5&lt;abs(r)&lt;0.8 &nbsp;&nbsp; 显著线性相关 0.8&lt;abs(r) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 非常显著线性相关 2.2 Spearman 秩相关系数&nbsp; --&gt; 等级相关系数 （适用于 等级变量 等不服从正态分布的变量，只要两个变量具有严格的单调关系，则是完全Spearman相关） &nbsp; 斯皮尔曼相关系数表明X(独立变量)和Y(依赖变量)的相关方向。如果当X增加时，Y趋向于增加，斯皮尔曼相关系数则为正。如果当X增加时，Y趋向于减少，斯皮尔曼相关系数则为负。斯皮尔曼相关系数为零表明当X增加时Y没有任何趋向性。当X和Y越来越接近完全的单调相关时，斯皮尔曼相关系数会在绝对值上增加。当X和Y完全单调相关时，斯皮尔曼相关系数的绝对值为1。完全的单调递增关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是同号。完全的单调递减关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是异号。 斯皮尔曼相关系数经常被称作&quot;非参数&quot;的。这里有两层含义。首先，当X和Y的关系是由任意单调函数描述的，则它们是完全皮尔逊相关的。与此相应的，皮尔逊相关系数只能给出由线性方程描述的X和Y的相关性。其次，斯皮尔曼不需要先验知识(也就是说，知道其参数)便可以准确获取XandY的采样概率分布。 &nbsp; 3. 判定系数 --&gt; 相关系数的平方 --&gt; 越接近1 --&gt;&nbsp;&nbsp;拟合效果越好 #-*- coding: utf-8 -*- #餐饮销量数据相关性分析 from __future__ import print_function import pandas as pd &nbsp; catering_sale = &#39;../data/catering_sale_all.xls&#39; #餐饮数据，含有其他属性 data = pd.read_excel(catering_sale, index_col = u&#39;日期&#39;) #读取数据，指定“日期”列为索引列 data.corr() #相关系数矩阵，即给出了任意两款菜式之间的相关系数 data.corr()[u&#39;百合酱蒸凤爪&#39;] #只显示“百合酱蒸凤爪”与其他菜式的相关系数 data[u&#39;百合酱蒸凤爪&#39;].corr(data[u&#39;翡翠蒸香茜饺&#39;]) #计算“百合酱蒸凤爪”与“翡翠蒸香茜饺”的相关系数 &nbsp; help(pd.DataFrame.corr) Help on function corr in module pandas.core.frame: corr(self, method=&#39;pearson&#39;, min_periods=1) &nbsp;&nbsp;&nbsp; Compute pairwise correlation of columns, excluding NA/null values &nbsp;&nbsp;&nbsp; Parameters &nbsp;&nbsp;&nbsp; ---------- &nbsp;&nbsp;&nbsp; method : {&#39;pearson&#39;, &#39;kendall&#39;, &#39;spearman&#39;} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * pearson : standard correlation coefficient &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * kendall : Kendall Tau correlation coefficient &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * spearman : Spearman rank correlation &nbsp;&nbsp;&nbsp; min_periods : int, optional &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Minimum number of observations required per pair of columns &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to have a valid result. Currently only available for pearson &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and spearman correlation &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns &nbsp;&nbsp;&nbsp; ------- &nbsp;&nbsp;&nbsp; y : DataFrame &nbsp; 3.3 Python主要数据探索函数 3.3.1 基本统计特征函数（DataFrame or Series） 方法 功能 库 方法 功能 库 D.sum() &nbsp; Pandas D.corr() 相关系数矩阵 Pandas D.mean() &nbsp; Pandas D.cov() 协方差矩阵 Pandas D.var() 方差 Pandas D.skew() 偏度（三阶矩） Pandas D.std() &nbsp; Pandas D.kurt() 峰度（四阶矩） Pandas D.describe() &nbsp; Pandas &nbsp; &nbsp; &nbsp; 3.3.2 拓展统计特征函数（DataFrame or Series） 方法 功能 库 方法 功能 库 cumsum() 依次给出前1/2/3…n个数的和 Pandas rolling_sum() 计算数据样本的总和（按列计算） Pandas cumprod() 依次给出前1/2/3…n个数的积 Pandas rolling_mean() 。。。 Pandas cummax() 。。。 Pandas rolling_var() 。。。 Pandas cummin() 。。。 Pandas rolling_std() 。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_cov() 。。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_skew() 。。。。 Pandas &nbsp; &nbsp; &nbsp; rolling_kurt() 。。。 Pandas 3.3.3 统计作图函数 方法 功能 库 说明 plot() 绘制线性二维图 Matlotlib/Pandas plt.plot(x,y,S) DataFrame.plot(kind=’line/bar(条形)/box/barh/hist(直方图)/kde(密度)/area()/pie(饼图)’)&nbsp;&nbsp; #bar类似是对离散离散特征每个特征 Series.plot() pie() 饼图 Matlotlib/Pandas plt.pie(size); #size是列表，表示扇形各个部分的比例 hist() 二维条形直方图 Matlotlib/Pandas plt.hist(x,n); #x代表一维数组，n代表组数 &nbsp; boxplot() 箱形图 Pandas &nbsp; plot(logy=True) plot(logx=True) y轴对数 Pandas &nbsp; plot(yerr=error) 误差条形图 Pandas ？？？不理解 &nbsp; &nbsp; &nbsp; &nbsp; Figure 1 bar plot &nbsp; Figure 2 hist plot &nbsp; Figure 3 sale.boxplot() &nbsp; Figure 4 sale.plot(kind=&#39;box&#39;) sale.plot(logy=True) &nbsp; &nbsp; &nbsp;","@type":"BlogPosting","url":"https://mlh.app/2019/01/15/181a2c17c03e10c4e554a4d074e1c4c3.html","headline":"《数据分析与挖掘实战》总结及代码练习—chap3 数据探索","dateModified":"2019-01-15T00:00:00+08:00","datePublished":"2019-01-15T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/01/15/181a2c17c03e10c4e554a4d074e1c4c3.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>《数据分析与挖掘实战》总结及代码练习---chap3 数据探索</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <table border="1" cellpadding="1" cellspacing="1">
   <tbody>
    <tr>
     <td> <p id="main-toc"><strong>目录</strong></p> <p id="%C2%A0chap3%20%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2-toc" style="margin-left:0px;"><a href="#%C2%A0chap3%20%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2" rel="nofollow">&nbsp;chap3 数据探索</a></p> <p id="3.1%20%E6%95%B0%E6%8D%AE%E8%B4%A8%E9%87%8F%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#3.1%20%E6%95%B0%E6%8D%AE%E8%B4%A8%E9%87%8F%E5%88%86%E6%9E%90" rel="nofollow">3.1 数据质量分析</a></p> <p id="3.1.1%20%E7%BC%BA%E5%A4%B1%E5%80%BC-toc" style="margin-left:80px;"><a href="#3.1.1%20%E7%BC%BA%E5%A4%B1%E5%80%BC" rel="nofollow">3.1.1 缺失值</a></p> <p id="3.1.2%E5%BC%82%E5%B8%B8%E5%80%BC%20%E5%88%86%E6%9E%90-toc" style="margin-left:80px;"><a href="#3.1.2%E5%BC%82%E5%B8%B8%E5%80%BC%20%E5%88%86%E6%9E%90" rel="nofollow">3.1.2异常值 分析</a></p> <p id="3.1.3%20%E4%B8%80%E8%87%B4%E6%80%A7%E5%88%86%E6%9E%90%EF%BC%9A%E7%9F%9B%E7%9B%BE%E6%80%A7%EF%BC%8C%E4%B8%8D%E7%9B%B8%E5%AE%B9%E6%80%A7-toc" style="margin-left:80px;"><a href="#3.1.3%20%E4%B8%80%E8%87%B4%E6%80%A7%E5%88%86%E6%9E%90%EF%BC%9A%E7%9F%9B%E7%9B%BE%E6%80%A7%EF%BC%8C%E4%B8%8D%E7%9B%B8%E5%AE%B9%E6%80%A7" rel="nofollow">3.1.3 一致性分析：矛盾性，不相容性</a></p> <p id="3.2%20%E6%95%B0%E6%8D%AE%E7%89%B9%E5%BE%81%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#3.2%20%E6%95%B0%E6%8D%AE%E7%89%B9%E5%BE%81%E5%88%86%E6%9E%90" rel="nofollow">3.2 数据特征分析</a></p> <p id="3.2.1%E5%88%86%E5%B8%83%E5%88%86%E6%9E%90%EF%BC%9A%E5%88%86%E5%B8%83%E7%89%B9%E5%BE%81%20%26%20%E5%88%86%E5%B8%83%E7%B1%BB%E5%9E%8B-toc" style="margin-left:80px;"><a href="#3.2.1%E5%88%86%E5%B8%83%E5%88%86%E6%9E%90%EF%BC%9A%E5%88%86%E5%B8%83%E7%89%B9%E5%BE%81%20%26%20%E5%88%86%E5%B8%83%E7%B1%BB%E5%9E%8B" rel="nofollow">3.2.1分布分析：分布特征 &amp; 分布类型</a></p> <p id="3.2.2%20%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90%EF%BC%9A%20%E4%BA%92%E7%9B%B8%E8%81%94%E7%B3%BB%E7%9A%84%E6%8C%87%E6%A0%87%20--%3E%20%E5%90%88%E9%80%82%E7%9A%84%E6%A0%87%E5%87%86%20--%3E%20compare%20--%3E%C2%A0%E5%85%B3%E7%B3%BB%E6%98%AF%E5%90%A6%E5%8D%8F%E8%B0%83%EF%BC%8C-toc" style="margin-left:80px;"><a href="#3.2.2%20%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90%EF%BC%9A%20%E4%BA%92%E7%9B%B8%E8%81%94%E7%B3%BB%E7%9A%84%E6%8C%87%E6%A0%87%20--%3E%20%E5%90%88%E9%80%82%E7%9A%84%E6%A0%87%E5%87%86%20--%3E%20compare%20--%3E%C2%A0%E5%85%B3%E7%B3%BB%E6%98%AF%E5%90%A6%E5%8D%8F%E8%B0%83%EF%BC%8C" rel="nofollow">3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调，</a></p> <p id="3.2.3%20%E7%BB%9F%E8%AE%A1%E9%87%8F%E5%88%86%E6%9E%90%EF%BC%9A-toc" style="margin-left:80px;"><a href="#3.2.3%20%E7%BB%9F%E8%AE%A1%E9%87%8F%E5%88%86%E6%9E%90%EF%BC%9A" rel="nofollow">3.2.3 统计量分析：</a></p> <p id="3.2.4%20%E5%91%A8%E6%9C%9F%E6%80%A7%E5%88%86%E6%9E%90-toc" style="margin-left:80px;"><a href="#3.2.4%20%E5%91%A8%E6%9C%9F%E6%80%A7%E5%88%86%E6%9E%90" rel="nofollow">3.2.4 周期性分析</a></p> <p id="3.2.5%20%E8%B4%A1%E7%8C%AE%E5%BA%A6%E5%88%86%E6%9E%90%EF%BC%9A%E5%B8%95%E7%B4%AF%E6%89%98%E6%B3%95%E5%88%9920%2F80%E5%AE%9A%E5%BE%8B-toc" style="margin-left:80px;"><a href="#3.2.5%20%E8%B4%A1%E7%8C%AE%E5%BA%A6%E5%88%86%E6%9E%90%EF%BC%9A%E5%B8%95%E7%B4%AF%E6%89%98%E6%B3%95%E5%88%9920%2F80%E5%AE%9A%E5%BE%8B" rel="nofollow">3.2.5 贡献度分析：帕累托法则20/80定律</a></p> <p id="3.2.6%20%E7%9B%B8%E5%85%B3%E6%80%A7%E5%88%86%E6%9E%90-toc" style="margin-left:80px;"><a href="#3.2.6%20%E7%9B%B8%E5%85%B3%E6%80%A7%E5%88%86%E6%9E%90" rel="nofollow">3.2.6 相关性分析</a></p> <p id="3.3%20Python%E4%B8%BB%E8%A6%81%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#3.3%20Python%E4%B8%BB%E8%A6%81%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%87%BD%E6%95%B0" rel="nofollow">3.3 Python主要数据探索函数</a></p> <p id="3.3.1%20%E5%9F%BA%E6%9C%AC%E7%BB%9F%E8%AE%A1%E7%89%B9%E5%BE%81%E5%87%BD%E6%95%B0%EF%BC%88DataFrame%20or%20Series%EF%BC%89-toc" style="margin-left:80px;"><a href="#3.3.1%20%E5%9F%BA%E6%9C%AC%E7%BB%9F%E8%AE%A1%E7%89%B9%E5%BE%81%E5%87%BD%E6%95%B0%EF%BC%88DataFrame%20or%20Series%EF%BC%89" rel="nofollow">3.3.1 基本统计特征函数（DataFrame or Series）</a></p> <p id="3.3.2%20%E6%8B%93%E5%B1%95%E7%BB%9F%E8%AE%A1%E7%89%B9%E5%BE%81%E5%87%BD%E6%95%B0%EF%BC%88DataFrame%20or%20Series%EF%BC%89-toc" style="margin-left:80px;"><a href="#3.3.2%20%E6%8B%93%E5%B1%95%E7%BB%9F%E8%AE%A1%E7%89%B9%E5%BE%81%E5%87%BD%E6%95%B0%EF%BC%88DataFrame%20or%20Series%EF%BC%89" rel="nofollow">3.3.2 拓展统计特征函数（DataFrame or Series）</a></p> <p id="3.3.3%20%E7%BB%9F%E8%AE%A1%E4%BD%9C%E5%9B%BE%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#3.3.3%20%E7%BB%9F%E8%AE%A1%E4%BD%9C%E5%9B%BE%E5%87%BD%E6%95%B0" rel="nofollow">3.3.3 统计作图函数</a></p> <p>&nbsp;</p> 
      <hr></td> 
    </tr>
    <tr>
     <td> <h1 id="%C2%A0chap3%20%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2" style="margin-left:0cm;">&nbsp;chap3 数据探索</h1> <p style="margin-left:0cm;">样本数量&amp;质量，不一致，重复数据 特殊符号，特征，特征之间的关联性</p> <h2 id="3.1%20%E6%95%B0%E6%8D%AE%E8%B4%A8%E9%87%8F%E5%88%86%E6%9E%90" style="margin-left:0cm;">3.1 数据质量分析</h2> <h3 id="3.1.1%20%E7%BC%BA%E5%A4%B1%E5%80%BC">3.1.1 缺失值</h3> <p style="margin-left:0cm;"><strong>缺失原因</strong>：</p> <p style="margin-left:0cm;">暂时无法获取，或者获取代价太大；</p> <p style="margin-left:0cm;">人为：不重要，忘记，理解错误；</p> <p style="margin-left:0cm;">非人为：设备故障</p> <p style="margin-left:0cm;"><strong>影响：</strong></p> <p style="margin-left:0cm;">丢失信息，不确定性增加，建模混乱。</p> <p style="margin-left:0cm;"><strong>分析：</strong></p> <p style="margin-left:0cm;">缺失值属性以及个数，缺失率</p> <p style="margin-left:0cm;">处理：</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除、插值处理、不处理 —&gt;<strong> </strong><strong>详情见4.1.1</strong></p> <h3 id="3.1.2%E5%BC%82%E5%B8%B8%E5%80%BC%20%E5%88%86%E6%9E%90">3.1.2异常值 分析</h3> <p style="margin-left:0cm;">不可忽视</p> <p style="margin-left:0cm;">检验(录入错误)不合常理数据 <strong>–&gt; </strong>分析原因 à 改进决策 :</p> 
      <ol>
       <li>简单统计量分析；</li> 
       <li>3σ原则，超出3σ的概率 P&lt;=0.03</li> 
       <li>箱形图分析：提供识别异常值的标准（&lt;QL-1.5IQR 或者 &gt;QU+1.5IQR，IQR是四分位间距，QL下四分位数，QU上四分位数）。<strong>鲁棒性</strong>：有25%的数据可以偏离任意远 而不扰动四分位数，评价标准很客观。</li> 
      </ol><p><strong>3.1.2 python代码：</strong></p> 
      <table border="1" cellspacing="0">
       <tbody>
        <tr>
         <td style="vertical-align:top;width:414.8pt;"> <p style="margin-left:0cm;">#-*- coding: utf-8 -*-</p> <p style="margin-left:0cm;">import pandas as pd</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">catering_sale = '../data/catering_sale.xls' #餐饮数据</p> <p style="margin-left:0cm;">data = pd.read_excel(catering_sale, <strong>index_col</strong> = u'日期')</p> <p style="margin-left:0cm;">#读取数据，指定“日期”列为索引列（reade_csv打开csv文件，eread_excel打开xls文件）</p> <p style="margin-left:0cm;">data.describe()</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">import matplotlib.pyplot as plt #导入图像库</p> <p style="margin-left:0cm;">plt.rcParams['font.sans-serif'] = ['SimHei'] #用来正常显示中文标签</p> <p style="margin-left:0cm;">plt.rcParams['axes.unicode_minus'] = False #用来正常显示负号</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">plt.figure() #建立图像</p> <p style="margin-left:0cm;">p = data.boxplot(return_type='dict') #画箱线图，直接使用DataFrame的方法</p> <p style="margin-left:0cm;"><strong>x = p['fliers'][0].get_xdata()</strong> #<strong> 'flies'</strong><strong>即为异常值的标签</strong></p> <p style="margin-left:0cm;"><strong>y = p['fliers'][0].get_ydata() </strong>#得出根据箱形图四分位数得出的异常值</p> <p style="margin-left:0cm;">y.sort() #从小到大排序，该方法直接改变原对象</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">#用annotate添加注释</p> <p style="margin-left:0cm;">#其中有些相近的点，注解会出现重叠，难以看清，需要一些技巧来控制。</p> <p style="margin-left:0cm;">#以下参数都是经过调试的，需要具体问题具体调试。</p> <p style="margin-left:0cm;">for i in range(len(x)):</p> <p style="margin-left:0cm;">&nbsp; if i&gt;0:</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.05 -0.8/(y[i]-y[i-1]),y[i]))</p> <p style="margin-left:0cm;">&nbsp; else:</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; plt.annotate(y[i], xy = (x[i],y[i]), xytext=(x[i]+0.08,y[i]))</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">plt.show() #展示箱线图</p> <p style="margin-left:0cm;"><img alt="" class="has" height="217" src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/20190115195235699.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTUyMTY4MQ==,size_16,color_FFFFFF,t_70" width="328"></p> </td> 
        </tr>
       </tbody>
      </table><p style="margin-left:0cm;">&nbsp;</p> <h3 id="3.1.3%20%E4%B8%80%E8%87%B4%E6%80%A7%E5%88%86%E6%9E%90%EF%BC%9A%E7%9F%9B%E7%9B%BE%E6%80%A7%EF%BC%8C%E4%B8%8D%E7%9B%B8%E5%AE%B9%E6%80%A7">3.1.3 一致性分析：矛盾性，不相容性</h3> <p style="margin-left:0cm;">原因：集成，来源不一致，不同的数据源，重复存放的数据</p> </td> 
    </tr>
    <tr>
     <td>&nbsp;</td> 
    </tr>
    <tr>
     <td> <h2 id="3.2%20%E6%95%B0%E6%8D%AE%E7%89%B9%E5%BE%81%E5%88%86%E6%9E%90" style="margin-left:0cm;">3.2 数据特征分析</h2> <h3 id="3.2.1%E5%88%86%E5%B8%83%E5%88%86%E6%9E%90%EF%BC%9A%E5%88%86%E5%B8%83%E7%89%B9%E5%BE%81%20%26%20%E5%88%86%E5%B8%83%E7%B1%BB%E5%9E%8B">3.2.1分布分析：分布特征 &amp; 分布类型</h3> <p style="margin-left:0cm;"><strong>定量数据：</strong>对称or非对称，频率分布直方图，茎叶图 --&gt; 分析异常数据</p> <p style="text-indent:50px;"><img alt="" class="has" height="285" src="https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=3b160d4b6059252db71a155655f2685e/d0c8a786c9177f3e85e6135c70cf3bc79e3d5695.jpg" width="498"></p> <p style="margin-left:0cm;"><strong>定性数据：</strong>饼图，条形图</p> <h3 id="3.2.2%20%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90%EF%BC%9A%20%E4%BA%92%E7%9B%B8%E8%81%94%E7%B3%BB%E7%9A%84%E6%8C%87%E6%A0%87%20--%3E%20%E5%90%88%E9%80%82%E7%9A%84%E6%A0%87%E5%87%86%20--%3E%20compare%20--%3E%C2%A0%E5%85%B3%E7%B3%BB%E6%98%AF%E5%90%A6%E5%8D%8F%E8%B0%83%EF%BC%8C">3.2.2 对比分析： 互相联系的指标 --&gt; 合适的标准 --&gt; compare --&gt;&nbsp;关系是否协调，</h3> <p style="margin-left:0cm;">绝对数、相对数、结构相对数（某特征的占比、比例相对数）、比较相对数（同一时期不同地方，同一地区不同时期、强度相对数）、计划完成度相对数、动态相对数。</p> <h3 id="3.2.3%20%E7%BB%9F%E8%AE%A1%E9%87%8F%E5%88%86%E6%9E%90%EF%BC%9A">3.2.3 统计量分析：</h3> <p style="margin-left:0cm;"><strong>集中趋势</strong>：均值、中位数、众数</p> <p style="margin-left:0cm;"><strong>离中趋势</strong>：方差（标准差），四分位数，极差，变异系数CV=s/Xmean</p> <p style="margin-left:0cm;"><strong>代码：</strong></p> <p style="margin-left:0cm;"><strong>(</strong>注意，statistics的数据类型是dataframe<strong>)</strong></p> 
      <table border="1" cellspacing="0">
       <tbody>
        <tr>
         <td style="vertical-align:top;width:328.2pt;"> <p style="margin-left:0cm;">data_after=data[(data[u'销量']&gt;500)&amp;(data[u'销量']&lt;5000)]</p> <p style="margin-left:0cm;">statistics=data_after.describe()</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">statistics.<strong>loc['range']</strong>=statistics.loc['max']-statistics.loc['min']</p> <p style="margin-left:0cm;">statistics<strong>.loc['dis']</strong>=statistics.loc['75%']-statistics.loc['25%']</p> <p style="margin-left:0cm;">statistics<strong>.loc['CV']</strong>=statistics.loc['std']/statistics.loc['mean']</p> <p style="margin-left:0cm;">statistics</p> </td> 
         <td style="vertical-align:top;width:158.6pt;"> <p style="margin-left:0cm;">statistics</p> <p style="margin-left:0cm;">Out[58]:</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 销量</p> <p style="margin-left:0cm;">count&nbsp;&nbsp; 195.000000</p> <p style="margin-left:0cm;">mean&nbsp;&nbsp; 2744.595385</p> <p style="margin-left:0cm;">std&nbsp;&nbsp;&nbsp;&nbsp; 424.739407</p> <p style="margin-left:0cm;">min&nbsp;&nbsp;&nbsp;&nbsp; 865.000000</p> <p style="margin-left:0cm;">25%&nbsp;&nbsp;&nbsp; 2460.600000</p> <p style="margin-left:0cm;">50%&nbsp;&nbsp;&nbsp; 2655.900000</p> <p style="margin-left:0cm;">75%&nbsp;&nbsp;&nbsp; 3023.200000</p> <p style="margin-left:0cm;">max&nbsp;&nbsp;&nbsp; 4065.200000</p> <p style="margin-left:0cm;">range&nbsp; 3200.200000</p> <p style="margin-left:0cm;">dis&nbsp;&nbsp;&nbsp;&nbsp; 562.600000</p> <p style="margin-left:0cm;">CV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.154755</p> </td> 
        </tr>
       </tbody>
      </table><h3 id="3.2.4%20%E5%91%A8%E6%9C%9F%E6%80%A7%E5%88%86%E6%9E%90">3.2.4 周期性分析</h3> <p style="margin-left:0cm;">变量随着时间变化&nbsp; --&gt; 周期性趋势 （年度、季度、月度、天、小时）</p> <h3 id="3.2.5%20%E8%B4%A1%E7%8C%AE%E5%BA%A6%E5%88%86%E6%9E%90%EF%BC%9A%E5%B8%95%E7%B4%AF%E6%89%98%E6%B3%95%E5%88%9920%2F80%E5%AE%9A%E5%BE%8B">3.2.5 贡献度分析：帕累托法则20/80定律</h3> 
      <table border="1" cellspacing="0">
       <tbody>
        <tr>
         <td style="vertical-align:top;width:486.8pt;"> <p style="margin-left:0cm;">#-*- coding: utf-8 -*-</p> <p style="margin-left:0cm;">#菜品盈利数据 帕累托图</p> <p style="margin-left:0cm;">from __future__ import print_function</p> <p style="margin-left:0cm;">import pandas as pd</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">#初始化参数</p> <p style="margin-left:0cm;">dish_profit = '../data/catering_dish_profit.xls' #餐饮菜品盈利数据</p> <p style="margin-left:0cm;">data = pd.read_excel(dish_profit, index_col = u'菜品名')</p> <p style="margin-left:0cm;">data = data[u'盈利'].copy()</p> <p style="margin-left:0cm;">#data.sort(ascending = False)</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">import matplotlib.pyplot as plt #导入图像库</p> <p style="margin-left:0cm;">plt.rcParams['font.sans-serif'] = ['SimHei'] #用来正常显示中文标签</p> <p style="margin-left:0cm;">plt.rcParams['axes.unicode_minus'] = False #用来正常显示负号</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">plt.figure()</p> <p style="margin-left:0cm;">data.plot(kind='bar')</p> <p style="margin-left:0cm;">plt.ylabel(u'盈利（元）')</p> <p style="margin-left:0cm;">p = 1.0*data.cumsum()/data.sum()</p> <p style="margin-left:0cm;">p.plot(color = 'r', secondary_y = True, style = '-o',linewidth = 2)</p> <p style="margin-left:0cm;">plt.annotate(format(p[6], '.4%'), xy = (6, p[6]), xytext=(6*0.9, p[6]*0.9), arrowprops=dict(arrowstyle="-&gt;", connectionstyle="arc3,rad=.2")) #添加注释，即85%处的标记。这里包括了指定箭头样式。</p> <p style="margin-left:0cm;">plt.ylabel(u'盈利（比例）')</p> <p style="margin-left:0cm;">plt.show()</p> <p style="margin-left:0cm;"><img alt="" class="has" height="249" src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/20190115201042670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTUyMTY4MQ==,size_16,color_FFFFFF,t_70" width="361"><img alt="" class="has" height="250" src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/20190115201049425.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTUyMTY4MQ==,size_16,color_FFFFFF,t_70" width="369"></p> </td> 
        </tr>
       </tbody>
      </table><p style="margin-left:0cm;">&nbsp;</p> <h3 id="3.2.6%20%E7%9B%B8%E5%85%B3%E6%80%A7%E5%88%86%E6%9E%90">3.2.6 相关性分析</h3> <p style="margin-left:0cm;">1. 直接绘制<strong>散点图</strong>or<strong>散点图矩阵</strong> à 观察线性相关 或者 是否存在其他<strong>相关性</strong></p> <p style="margin-left:0cm;">2. 计算相关系数：</p> <p style="margin-left:0cm;">2.1 Pearson相关系数： r=cov(x,y)/(<em>std(</em><em>x)</em><em>×std(y))</em> ，（要求<strong>连续变量</strong>服从<strong>正态分布</strong>）</p> <p style="margin-left:0cm;">值域[-1,1]：</p> <p style="margin-left:0cm;">abs(r)&lt;0.3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 不存在线性相关；</p> <p style="margin-left:0cm;">0.3&lt;abs(r)&lt;0.5 &nbsp;&nbsp; 弱线性相关；</p> <p style="margin-left:0cm;">0.5&lt;abs(r)&lt;0.8 &nbsp;&nbsp; 显著<strong>线性相关</strong></p> <p style="margin-left:0cm;">0.8&lt;abs(r) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 非常显著<strong>线性相关</strong></p> <p style="margin-left:0cm;">2.2 Spearman 秩相关系数&nbsp; --&gt; 等级相关系数 （适用于 <strong>等级变量</strong> 等不服从正态分布的变量，只要两个变量具有<strong>严格的单调关系</strong>，则是完全Spearman相关）</p> <p style="text-indent:50px;"><img alt="" class="has" height="104" src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/20190115202451224.png" width="371"></p> <p style="margin-left:0cm;">&nbsp;</p> <p style="text-indent:50px;">斯皮尔曼相关系数表明X(独立变量)和Y(依赖变量)的相关方向。如果当X增加时，Y趋向于增加，斯皮尔曼相关系数则为正。如果当X增加时，Y趋向于减少，斯皮尔曼相关系数则为负。斯皮尔曼相关系数为零表明当X增加时Y没有任何趋向性。当X和Y越来越接近完全的单调相关时，斯皮尔曼相关系数会在绝对值上增加。当X和Y完全单调相关时，斯皮尔曼相关系数的绝对值为1。完全的单调递增关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是同号。完全的单调递减关系意味着任意两对数据Xi，Yi和Xj，Yj，有Xi−Xj和Yi−Yj总是异号。</p> <p style="text-indent:50px;">斯皮尔曼相关系数经常被称作"非参数"的。这里有两层含义。首先，当X和Y的关系是由任意<a href="https://baike.baidu.com/item/%E5%8D%95%E8%B0%83%E5%87%BD%E6%95%B0" rel="nofollow">单调函数</a>描述的，则它们是完全皮尔逊相关的。与此相应的，皮尔逊相关系数只能给出由线性方程描述的X和Y的相关性。其次，斯皮尔曼不需要先验知识(也就是说，知道其参数)便可以准确获取XandY的采样<a href="https://baike.baidu.com/item/%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83" rel="nofollow">概率分布</a>。</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">3. 判定系数 --&gt; 相关系数的平方 --&gt; 越接近1 --&gt;&nbsp;&nbsp;拟合效果越好</p> 
      <table border="1" cellspacing="0">
       <tbody>
        <tr>
         <td style="width:486.8pt;"> <p style="margin-left:0cm;">#-*- coding: utf-8 -*-</p> <p style="margin-left:0cm;">#餐饮销量数据相关性分析</p> <p style="margin-left:0cm;">from __future__ import print_function</p> <p style="margin-left:0cm;">import pandas as pd</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">catering_sale = '../data/catering_sale_all.xls' #餐饮数据，含有其他属性</p> <p style="margin-left:0cm;">data = pd.read_excel(catering_sale, index_col = u'日期') #读取数据，指定“日期”列为索引列</p> <p style="margin-left:0cm;">data.corr() #相关系数矩阵，即给出了任意两款菜式之间的相关系数</p> <p style="margin-left:0cm;">data.corr()[u'百合酱蒸凤爪'] #只显示“百合酱蒸凤爪”与其他菜式的相关系数</p> <p style="margin-left:0cm;">data[u'百合酱蒸凤爪'].corr(data[u'翡翠蒸香茜饺']) #计算“百合酱蒸凤爪”与“翡翠蒸香茜饺”的相关系数</p> <p style="margin-left:0cm;">&nbsp;</p> </td> 
        </tr>
        <tr>
         <td style="width:486.8pt;"><img alt="" class="has" height="521" src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/20190115201512651.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTUyMTY4MQ==,size_16,color_FFFFFF,t_70" width="796"></td> 
        </tr>
        <tr>
         <td style="vertical-align:top;width:486.8pt;"> <p style="margin-left:0cm;">help(pd.DataFrame.corr)</p> <p style="margin-left:0cm;">Help on function corr in module pandas.core.frame:</p> <p style="margin-left:0cm;">corr(self, method='pearson', min_periods=1)</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; Compute pairwise correlation of columns, excluding NA/null values</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; Parameters</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; ----------</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; method : {'pearson', 'kendall', 'spearman'}</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * pearson : standard correlation coefficient</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * kendall : Kendall Tau correlation coefficient</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; * spearman : Spearman rank correlation</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; min_periods : int, optional</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Minimum number of observations required per pair of columns</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to have a valid result. Currently only available for pearson</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and spearman correlation</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Returns</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; -------</p> <p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp; y : DataFrame</p> <p style="margin-left:0cm;">&nbsp;</p> </td> 
        </tr>
        <tr>
         <td style="vertical-align:top;width:486.8pt;"> <h2 id="3.3%20Python%E4%B8%BB%E8%A6%81%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E5%87%BD%E6%95%B0" style="margin-left:0cm;">3.3 Python主要数据探索函数</h2> <h3 id="3.3.1%20%E5%9F%BA%E6%9C%AC%E7%BB%9F%E8%AE%A1%E7%89%B9%E5%BE%81%E5%87%BD%E6%95%B0%EF%BC%88DataFrame%20or%20Series%EF%BC%89">3.3.1 基本统计特征函数（DataFrame or Series）</h3> 
          <table align="center" border="1" cellspacing="0">
           <tbody>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>方法</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>功能</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>库</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>方法</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>功能</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>库</strong></p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.sum()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.corr()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">相关系数矩阵</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.mean()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.cov()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">协方差矩阵</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.var()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">方差</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.skew()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">偏度（三阶矩）</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.std()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.kurt()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">峰度（四阶矩）</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">D.describe()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
            </tr>
           </tbody>
          </table><h3 id="3.3.2%20%E6%8B%93%E5%B1%95%E7%BB%9F%E8%AE%A1%E7%89%B9%E5%BE%81%E5%87%BD%E6%95%B0%EF%BC%88DataFrame%20or%20Series%EF%BC%89">3.3.2 拓展统计特征函数（DataFrame or Series）</h3> 
          <table align="center" border="1" cellspacing="0">
           <tbody>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>方法</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>功能</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>库</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>方法</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>功能</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>库</strong></p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">cumsum()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">依次给出前1/2/3…n个数的和</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">rolling_sum()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">计算数据样本的总和（按列计算）</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">cumprod()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">依次给出前1/2/3…n个数的积</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">rolling_mean()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">cummax()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">rolling_var()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">cummin()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">rolling_std()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">rolling_cov()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">rolling_skew()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">rolling_kurt()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">。。。</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
            </tr>
           </tbody>
          </table><h3 id="3.3.3%20%E7%BB%9F%E8%AE%A1%E4%BD%9C%E5%9B%BE%E5%87%BD%E6%95%B0">3.3.3 统计作图函数</h3> 
          <table align="center" border="1" cellspacing="0">
           <tbody>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>方法</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>功能</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>库</strong></p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;"><strong>说明</strong></p> </td> 
            </tr>
            <tr>
             <td rowspan="3" style="vertical-align:top;"> <p style="margin-left:0cm;">plot()</p> </td> 
             <td rowspan="3" style="vertical-align:top;"> <p style="margin-left:0cm;">绘制线性二维图</p> </td> 
             <td rowspan="3" style="vertical-align:top;"> <p style="margin-left:0cm;">Matlotlib/Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">plt.plot(x,y,S)</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">DataFrame.plot(kind=’line/bar(条形)/box/barh/hist(直方图)/kde(密度)/area()/pie(饼图)’)&nbsp;&nbsp; #bar类似是对离散离散特征每个特征</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Series.plot()</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">pie()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">饼图</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Matlotlib/Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">plt.pie(size); #size是列表，表示扇形各个部分的比例</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">hist()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">二维条形直方图</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Matlotlib/Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">plt.hist(x,n); #x代表一维数组，n代表组数</p> <p style="margin-left:0cm;">&nbsp;</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">boxplot()</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">箱形图</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">plot(logy=True)</p> <p style="margin-left:0cm;">plot(logx=True)</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">y轴对数</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">plot(yerr=error)</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">误差条形图</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">Pandas</p> </td> 
             <td style="vertical-align:top;"> <p style="margin-left:0cm;">？？？不理解</p> </td> 
            </tr>
           </tbody>
          </table><p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">&nbsp;</p> 
          <table border="1" cellspacing="0">
           <tbody>
            <tr>
             <td style="vertical-align:top;width:243.4pt;"> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">Figure 1 bar plot</p> </td> 
             <td style="vertical-align:top;width:243.4pt;"> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">Figure 2 hist plot</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;width:243.4pt;"> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">Figure 3 sale.boxplot()</p> </td> 
             <td style="vertical-align:top;width:243.4pt;"> <p style="margin-left:0cm;">&nbsp;</p> <p style="margin-left:0cm;">Figure 4 sale.plot(kind='box')</p> </td> 
            </tr>
            <tr>
             <td style="vertical-align:top;width:243.4pt;"> <p style="margin-left:0cm;">sale.plot(logy=True)</p> <p style="margin-left:0cm;">&nbsp;</p> </td> 
             <td style="vertical-align:top;width:243.4pt;"> <p style="margin-left:0cm;">&nbsp;</p> </td> 
            </tr>
           </tbody>
          </table></td> 
        </tr>
       </tbody>
      </table></td> 
    </tr>
   </tbody>
  </table>
  <p>&nbsp;</p> 
 </div> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
