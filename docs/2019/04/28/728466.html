<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>AI 算法在 FPGA 芯片上还有这种操作？ | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="AI 算法在 FPGA 芯片上还有这种操作？" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="作者 | 杨付收 出品 | CSDN（ID：CSDNnews） 碾压与崛起 AI算法的崛起并非一帆风顺的，现在的主流的NN类的卷积神经网络已经是第二波浪潮了，早在上个世纪80年代，源于仿生学，后又发展于概率学的早期AI算法已经取得了重大的进展，到1986年Rumelhart等人提出多层网络的反向传播算法（BP算法，这是AI算法可进行数据训练并能收敛的基础）后，第一波AI算法以“连接主义”的旗帜高高举起。 不幸的是，旗帜没举多久就开始偃旗息鼓，让位于基于统计学的算法，直到2006年，Hinton提出了“深度信念网络”的概念，从此，AI算法从“连接主义”变成“深度神经网络”再次华丽登场。 第一波AI算法之所以会快速落寞，不在于算法不够精美，是因为当时的cpu不够强大，算力完全无法适配当时的算法需求.第二次AI算法的崛起也并非算法足够惊艳，恰恰是证明了算力的崛起。 而且这算力的提供者并不是CPU，这种基于调度和内存交换的方式难以支持如此强大的AI算力缺口。 与此同时，基于异构计算的ASIC/FPGA/GPU也在快速崛起，其计算性能完全碾压CPU，有效的补充AI算力的缺口。 其中GPU迅速发展，成为目前AI崛起之路的最大收益者，然而GPU最初的设计目的不是针对AI算法而是处理图形图像的，因为图像上每个像素点处理的过程和方式都十分相似，所以GPU的构成相对简单，有数量众多的计算单元和用于并行的流水线，正是这种单指令流多数据流的设计模式，特别适合处理大量的类型统一的数据。 这也是在用GPU处理AI算法时，batchsize不能太低的原因。而在其他方面，如面积/功耗/能耗比方面，GPU也便成了弱势，相比较而言，ASIC芯片从一开始便是为AI而生，能效比高，不会有冗余，功耗低，适合算法稳定且要求的应用。 其缺点也是硬件为算法而定制，导致其只能运行特定的算法，当然，能做出通用AI算法的ASIC芯片是业界的终极目标。 而同时，作为ASIC的共轭形式存在的FPGA越来越受重视，FPGA能效比高，可编程逻辑，计算效率高，FPGA 同时拥有控制流并行和数据并行，是天生适合异构计算的芯片，目前开发FPGA应用方面还有很多潜能可挖。 通用Or灵活 一个基本的认知是ASIC虽然高效，但只能走专业化定制化的部分，ASIC制作成本很高，而算法一直在持续更新，如何解决这个矛盾呢？ 是否可以做一个通用的ASIC来解决算力提升和灵活性的问题？寒武纪的NPU和google的TPU给出了答案，两者的实现虽然不同，但思路是一致的。 即：既然NN算法可以拆分成不同的算子，设计的硬件建模应该全部支持这些算子从而解决通用性问题，并建立相应的指令集来解决不同算子的组合，来解决灵活性的问题。当然，核心模块还是围绕计算量最大的模块卷积进行的。那么,在实现方式上它们又有哪些共同点和不足呢? 寒武纪dadiannao： 图1 （dadiannao） 上图的硬件建模就是在模仿神经网络部分的数据流向，NFU（Neural Functional Units）分三部分顺序展开，NFU-1是乘法单元，NFU-2是加法数树，处理filter内部或通道累加的问题，NFU-3是激活单元。 从模型上不难看出，这里的核心处理卷积的单元是在数据流方向上的一维展开进行计算的。 一维度展开会带来两个问题，一个是多扇出（fan-out）的问题，如果想更大限度的利用内部数据带宽优势以及多用乘法器模块，一个data需要同时广播给多个计算单元，这会导致多扇出的问题，要保证多个模块同时到达，则频率就不能提的太高。 另外一个问题就是为了保证乘法器都能充分工作，需对filter的相关参数进行限制.以DianNao为例，一个PE中的16个mul是同时计算的，那么卷积层中的kernel、channel、windows的长和宽都会对计算的效率造成影响，如channel最好是16或16的倍数，否则就会造成计算资源的浪费. 相比较而言，Google的TPU采用脉动矩阵的方式，巧妙的避开了对filter敏感的问题，TPU的脉动矩阵是面向数据流方向的二维结构，在处理卷积乘加这块有很强的优势。 理论上可以支持任何形式的windows、kernel和channel这种设计使得TPU有更强的灵活性和高效性。 TPU： 图2 （TPU） 然而，有得必有失。脉动矩阵中处理卷积时优势明显，但在处理非卷积类算子方面则未必高效。 比如在fastRcnn中的要用到排序算法proposal层，又如在多网融合的过程中会经常被使用 interp层（双线性插值）。 其中，排序算法在基因里是反asic的(区块链中的零币就是以排序为主的算法，主要用于反asic的功能)。类似这种非卷积算法因子则会导致脉动矩阵的功能大大降低，正是因为硬件的固定设置所限制。 ASIC 在走一个统一的路子，DADIANNAO和TPU都在用统一的模式来解决一切问题，然而现实是很骨感的，有两个基本点是ASIC中无法完美解决的，一个就是AI算法在不同的探索和更改期。 目前尚未突破其中的黑盒特性，而支持AI算法优化的强有力的基础理论迟迟没有发现，这个时期就好比科学历史上人们只知道电的存在而没有电磁原理支撑是一个道理，说明AI算法的研究应处于发展初期。 另外一点就是针对各个垂直领域，如无人机/自动驾驶/智能安防/无人零售的各种特殊的情况，每一个领域都对功耗/能耗比/性能/系统等等方面有不同的诉求，这些需求都有极强的定制性。如此，想要一颗ASIC芯片通吃天下的事情似乎是个无法求出的解。 &nbsp; 找规律，找突破 如果ASIC无法解决算法通用性问题，那么更具有灵活配置性的芯片FPGA便越来越受到重视，FPGA的低延时，高可配置性的特点使其天然的在灵活性方面比ASIC略胜一筹。 那么FPGA能否满足统一性呢？其实，在业界对FPGA的探索一直没有停止， 图3（三级压缩流水线） &nbsp;国内FPGA的头部公司深鉴科技一直研究深度压缩技术，并在FPGA上实现了基于深度压缩技术的方案：深度压缩技术，其采用剪枝+量化+霍夫曼编码，形成三级大流水，如图3所示，实现高度压缩权重占用的存储空间。 其基本的思路就是，先对网络本身做pruning来减少权重的个数，同时通过训练来弥补由于减少权重而带来的精度损失，然后经过量化部分来减少权重的位宽，最后用霍夫曼编码来压缩权重。 总之目的只有一个，制作稀疏矩阵，然后利用稀疏矩阵的特性生成weight查找表，从而达到数据压缩的目的。数据压缩后再用FPGA实现会大大的降低开发难度和门槛。 而国内另外一个头部公司商汤科技的设计思想就是：通过大量减少卷积计算的乘法操作，降低运算复杂度，来提高运算速度，并在FPGA中顺利实现。 不管是降低乘法操作，还是做网络裁剪，其思路都是在修改算法的方式来适配FPGA的实现。 即先将FPGA的设计以固定的方式配置好，然后去修改算法来适配这种固定好的硬件设计。 这种方式的缺点也是显而易见的，且不说固定的设计方式会遇到ASIC同样的问题，单就修改网络的部分可能会导致原有网络的精度丢失的问题。 更为严重的是，这种设计方式会导致无法挖掘FPGA的全部潜力。 &nbsp; FPGA本身就是一个可编程系统，能够适配各种算法，为什么大家都在想办法修改算法问题，而没有想办法去修改FPGA的内部实现优化，从而完美的使其适配不同神经网络算法呢？答案很简单，用FPGA开发高难度的算法是一件很困难的事。 换一个语言，换一个世界 &nbsp; 工欲善其事，必先利其器，现在主流的开发语言verilog HDL 是上个世纪80年代研究出来的，这在计算机界就好比是原始社会阶段，而且这么多年来一直没有更新过，对比高级语言的B-&gt;C-&gt;C++-&gt;java-&gt;python的不断升级，它就好比一个古老的青铜宝剑，虽价值连城，但并不适用，而让这个古老的语言来开发现在最先进的AI算法，这便是一个现代版的愚翁移山的故事。 &nbsp; 接着探寻问题的本质，verilog的缺陷： A)无规则化，或规范化，或许这是一个社会工程的问题，因为用的人少，所以没有形成统一的规范，编程方式过分自由，基本上是一千个人里有一千个哈姆雷特。 B)遇到复杂的逻辑，只能用状态机。 C)同步信号建模时，对控制信号的掌控偏弱。 D)没有图形化界面，仿真工具都是看波形。 而改进的方案正是解决这些问题，FPGA的开发就像是在玩乐高游戏，其实现过程就是在搭积木，其中的原语部分就是积木的原始器件，只是颗粒度有点小而已。 有没有一种方式将原始器件进行封装，加强控制逻辑，同时将控制逻辑和数据流逻辑分开，用软件的思想来封装硬件，包含继承，多态，递归，然后以图形化的形式展现出来，自带仿真系统，所见即所得，利用核心库器件，真正做到用搭积木的方式来开发FPGA，这样便能大大降低其开发门槛。 &nbsp;有一种很好用的开发工具ptero，是雪湖信息科技公司自主研发的开发FPGA的工具链，可以颠覆对FPGA开发的认知，上文的种种特性都已经在该工具中实现，相当于用全新的语言来开发FPGA，且完全是界面化的形式进行开发,所见即所得,极大的降低了开发门槛并提高了开发效率。 举个例子，在实现AI算法的过程中，对数据流的严格控制是关键，如下图所示，图中的例子是一个卷积核是3×3的数据组装功能实现，一个数据产生器来模拟数据来源，补零模块来进行padding补零操作，地址译码器来处理数据组装需要的不断变化的bram地址，三行缓存模块完成数据的组装。 图4 &nbsp;卷积里面的数据组装模块 图4便是对上述流程的一个展示，从图形化里面我们很容易理解设计思路，由于里面的用到的模块都是在核心模块封装好。 所以，对开发人员来说，只需要将所有的精力都来放到逻辑这块即可。 同时，可以随时验证逻辑的正确性，所有的输出结果都可以打印输出。这种所见即所得的开发模式极大的提高了硬件逻辑的开发效率。 那么，在FPGA实现的过程中，是否可以做出通用化的过程呢？答案是肯定的，如图4中的红色字体所示，控制参数部分就是自动更新的参数，通过自动化工具生成的控制参数能有效的控制不同算子模块的实现，而无需改动硬件电路。 有了这样方便又强大的工具，又有了底层封装的模块，才能在上层建筑有更大的发挥空间，就能更好的发挥FPGA的潜能，使其适配更多的算法结构，而不是只关注于修改算法来削足适履。 换一种维度思考 解决了开发FPGA效率的问题，我们可以把主要精力在提升FPGA的性能上下功夫，利用FPGA的分布式的存储的思路来设计模型，将FPGA的性能提升到最高。 假设网络结构中有三层卷积依次执行，如下图所示： &nbsp;图5（卷积合并示例） 在这样的网络结构下，第一层是1×1的卷积核，第二层是3×3的depwise卷积运算，第三层又是一个1×1的卷积核，每层的conv模块的kernel和channel都不是很大，类似这样的网络不同的算子组合在AI算法中很常见，若按传统的思路,只能每层conv都单独计算。 但每一层的计算都不能将FPGA的资源用满（dsp&amp;bram），这会导致资源的浪费，最重要的是没有发挥FPGA的最大的性能，从而导致处理的帧率降低。 为了更好的利用FPGA 资源，挖掘FPGA的潜能，我们可以根据每层的资源分布做个统计，发现将上述三层的资源合并成一个全流水的方式（即一次IO读写，三层连续计算）才能将FPGA的潜能发挥到最大。 这种设计方案是根据算法的规律进行调整FPGA的组装结构，从而发挥出并行计算的最大性能。 如此定制化的方式是发挥了FPGA的最大性能，那么又会产生一个问题：AI算法那么多，有没有那种即能发挥FPGA的最大性能,又能有通用性的方法？ 要回答这个问题，我们得先探究FPGA的本质，FPGA本质上是个分布式的资源分布系统，那么对核心资源（主要是dsp和bram）是否可以进行动态分配？ 如果解决了这个问题，那么就能完美解决上述问题。 我们可以通过给相应模块不同的参数来适配不同的算法因子以及不同的算法组合，而修改这些参数并不需要修改FPGA程序。 而对这种方式的探索，雪湖信息科技已经做了很多工作，并有相当多的积累，并有可以商用的成熟案例，如下图，是我们生成参数的一角。 图6&nbsp;（控制参数列表） 这样的设计思路是根据不同的参数控制，针对不同的filter大小、不同的算子、不同的算子组合、不同的conv层的组合，来进行不同的控制。 这种设计兼顾了FPGA的灵活性和通用性，可以说着兼顾通用性的情况下最大限度的提高了FPGA资源的使用率，也不会出现设计硬伤，可以适配任何新的算子，对interp等非卷积类支持很充分。 而针对proposal层的处理，可以在采用将网络一分为二，预留比较小的资源进行排序处理，而其他资源可以处理新的数据，两者并行处理，只有控制逻辑和周期计算处理好，两者不会产生阻塞和延时。 另一种维度的统一 反过来想，能否在保持FPGA灵活性的情况下，做成统一平台，这种探索是可行的，这种探索雪湖信息科技一直在坚持。 图7（各个网络/芯片平台的评估数据表） 控制参数在处理平台的灵活性，而模块化的开发则是开发平台的基石ptero在开发卷积过程中不断的积累现有的卷积模块/非卷积模块，在不断的打磨过程中将平台的核心库不断的更新/优化，这些高效的模块才是能兼顾通用和灵活的关键所在。 当这种模块经过实践证明可行之后，雪湖开发出了自动化工具平台，该工具平台包括自动解析网络结构、生成控制参数、生成计算参数、推荐相应的模块、分配合理的FPGA资源等等内容。 同时会包含自动测试部分，有了自动化工具的支持，对平台的通用性和便捷性提到了一个新的高度。 如下图，便是自动化测试工具测试示例： 已经实现的卷积算法计算量在5.3 Gflops左右（算法的细节涉及机密不便展开），用znq7020里进行实现，dsp利用率在88.88%左右，下图为自动测试工具生成结果图： 图8（自动测试工具生成结果图） 自动化工具是自适应FPGA开发平台的浓缩表现，可以根据不同的算法推荐不同的方案，通过生成的不同的控制参数来合理的分配FPGA资源使用。随着该平台的不断更新和升级，最终完成一键式端到端的FPGA实现方案。 通过这种方式，最终解决FPGA开发中通用性和灵活性的问题，这是雪湖不遗余力去追求的目标。 通过这种方式，不同的用户可以根据自己的需求进行不同的配置，得到高性价比的FPGA开发方案。 同时，更重要的是该方案不需要修改网络结构，不需要对用户的数据进行重新训练，从而保护用户的核心资产。 而同时，由于FPGA的高度可配置性，当用户的算法进行更新时，可以快速的修改和部署，这也是保护用户投资的有效手段。 总之，从复杂到简单，由繁琐到简洁，是事物发展的普遍规律。 而将FPGA开发的由难到易，以工具建平台，以平台来培养人才，在灵活易用的FPGA芯片上，解决应用开发难题，能够加快AI算法的快速落地， 作者简介：杨付收，雪湖科技创始合伙人，一个在硬件圈里努力写诗的软件程序猿。专注在芯片算法相关领域十多年，曾就职于中兴、华为、展讯等知名芯片公司。白天代码几千行，晚上咖啡伴梦香。每天也就一件事，处理Bug一箩筐。 【End】 &nbsp;热 文&nbsp;推 荐&nbsp; ☞抖音“死于”印度 | 畅言 ☞996 的程序员，只能云养娃吗？ ☞Python 让蔡徐坤在我的命令行里打篮球！| 技术头条 ☞零编程基础、大龄全职妈妈是如何写出两个商业网站的？ ☞下过富士康工厂、做过华为外包，这位程序员是如何花 6 年逆袭成为技术大佬的？ ☞《权力的游戏》最终季上线！谁是你最喜爱的演员？这里有一份Python教程 | 附源码 ☞微服务落地，我们在考虑什么？| 技术头条 ☞爆料! 18张图、55个链接, 证据都在这了, 你还说自己是中本聪? ☞程序员被骗&quot;黑砖窑&quot;：监禁、恐吓、996无休编程！ System.out.println(&quot;点个在看吧！&quot;);console.log(&quot;点个在看吧！&quot;);print(&quot;点个在看吧！&quot;);printf(&quot;点个在看吧！\n&quot;);cout&nbsp;&lt;&lt;&nbsp;&quot;点个在看吧！&quot;&nbsp;&lt;&lt;&nbsp;endl;Console.WriteLine(&quot;点个在看吧！&quot;);Response.Write(&quot;点个在看吧！&quot;);alert(&quot;点个在看吧！&quot;)echo &quot;点个在看吧！&quot; 点击阅读原文，输入关键词，即可搜索您想要的 CSDN 文章。 你点的每个“在看”，我都认真当成了喜欢" />
<meta property="og:description" content="作者 | 杨付收 出品 | CSDN（ID：CSDNnews） 碾压与崛起 AI算法的崛起并非一帆风顺的，现在的主流的NN类的卷积神经网络已经是第二波浪潮了，早在上个世纪80年代，源于仿生学，后又发展于概率学的早期AI算法已经取得了重大的进展，到1986年Rumelhart等人提出多层网络的反向传播算法（BP算法，这是AI算法可进行数据训练并能收敛的基础）后，第一波AI算法以“连接主义”的旗帜高高举起。 不幸的是，旗帜没举多久就开始偃旗息鼓，让位于基于统计学的算法，直到2006年，Hinton提出了“深度信念网络”的概念，从此，AI算法从“连接主义”变成“深度神经网络”再次华丽登场。 第一波AI算法之所以会快速落寞，不在于算法不够精美，是因为当时的cpu不够强大，算力完全无法适配当时的算法需求.第二次AI算法的崛起也并非算法足够惊艳，恰恰是证明了算力的崛起。 而且这算力的提供者并不是CPU，这种基于调度和内存交换的方式难以支持如此强大的AI算力缺口。 与此同时，基于异构计算的ASIC/FPGA/GPU也在快速崛起，其计算性能完全碾压CPU，有效的补充AI算力的缺口。 其中GPU迅速发展，成为目前AI崛起之路的最大收益者，然而GPU最初的设计目的不是针对AI算法而是处理图形图像的，因为图像上每个像素点处理的过程和方式都十分相似，所以GPU的构成相对简单，有数量众多的计算单元和用于并行的流水线，正是这种单指令流多数据流的设计模式，特别适合处理大量的类型统一的数据。 这也是在用GPU处理AI算法时，batchsize不能太低的原因。而在其他方面，如面积/功耗/能耗比方面，GPU也便成了弱势，相比较而言，ASIC芯片从一开始便是为AI而生，能效比高，不会有冗余，功耗低，适合算法稳定且要求的应用。 其缺点也是硬件为算法而定制，导致其只能运行特定的算法，当然，能做出通用AI算法的ASIC芯片是业界的终极目标。 而同时，作为ASIC的共轭形式存在的FPGA越来越受重视，FPGA能效比高，可编程逻辑，计算效率高，FPGA 同时拥有控制流并行和数据并行，是天生适合异构计算的芯片，目前开发FPGA应用方面还有很多潜能可挖。 通用Or灵活 一个基本的认知是ASIC虽然高效，但只能走专业化定制化的部分，ASIC制作成本很高，而算法一直在持续更新，如何解决这个矛盾呢？ 是否可以做一个通用的ASIC来解决算力提升和灵活性的问题？寒武纪的NPU和google的TPU给出了答案，两者的实现虽然不同，但思路是一致的。 即：既然NN算法可以拆分成不同的算子，设计的硬件建模应该全部支持这些算子从而解决通用性问题，并建立相应的指令集来解决不同算子的组合，来解决灵活性的问题。当然，核心模块还是围绕计算量最大的模块卷积进行的。那么,在实现方式上它们又有哪些共同点和不足呢? 寒武纪dadiannao： 图1 （dadiannao） 上图的硬件建模就是在模仿神经网络部分的数据流向，NFU（Neural Functional Units）分三部分顺序展开，NFU-1是乘法单元，NFU-2是加法数树，处理filter内部或通道累加的问题，NFU-3是激活单元。 从模型上不难看出，这里的核心处理卷积的单元是在数据流方向上的一维展开进行计算的。 一维度展开会带来两个问题，一个是多扇出（fan-out）的问题，如果想更大限度的利用内部数据带宽优势以及多用乘法器模块，一个data需要同时广播给多个计算单元，这会导致多扇出的问题，要保证多个模块同时到达，则频率就不能提的太高。 另外一个问题就是为了保证乘法器都能充分工作，需对filter的相关参数进行限制.以DianNao为例，一个PE中的16个mul是同时计算的，那么卷积层中的kernel、channel、windows的长和宽都会对计算的效率造成影响，如channel最好是16或16的倍数，否则就会造成计算资源的浪费. 相比较而言，Google的TPU采用脉动矩阵的方式，巧妙的避开了对filter敏感的问题，TPU的脉动矩阵是面向数据流方向的二维结构，在处理卷积乘加这块有很强的优势。 理论上可以支持任何形式的windows、kernel和channel这种设计使得TPU有更强的灵活性和高效性。 TPU： 图2 （TPU） 然而，有得必有失。脉动矩阵中处理卷积时优势明显，但在处理非卷积类算子方面则未必高效。 比如在fastRcnn中的要用到排序算法proposal层，又如在多网融合的过程中会经常被使用 interp层（双线性插值）。 其中，排序算法在基因里是反asic的(区块链中的零币就是以排序为主的算法，主要用于反asic的功能)。类似这种非卷积算法因子则会导致脉动矩阵的功能大大降低，正是因为硬件的固定设置所限制。 ASIC 在走一个统一的路子，DADIANNAO和TPU都在用统一的模式来解决一切问题，然而现实是很骨感的，有两个基本点是ASIC中无法完美解决的，一个就是AI算法在不同的探索和更改期。 目前尚未突破其中的黑盒特性，而支持AI算法优化的强有力的基础理论迟迟没有发现，这个时期就好比科学历史上人们只知道电的存在而没有电磁原理支撑是一个道理，说明AI算法的研究应处于发展初期。 另外一点就是针对各个垂直领域，如无人机/自动驾驶/智能安防/无人零售的各种特殊的情况，每一个领域都对功耗/能耗比/性能/系统等等方面有不同的诉求，这些需求都有极强的定制性。如此，想要一颗ASIC芯片通吃天下的事情似乎是个无法求出的解。 &nbsp; 找规律，找突破 如果ASIC无法解决算法通用性问题，那么更具有灵活配置性的芯片FPGA便越来越受到重视，FPGA的低延时，高可配置性的特点使其天然的在灵活性方面比ASIC略胜一筹。 那么FPGA能否满足统一性呢？其实，在业界对FPGA的探索一直没有停止， 图3（三级压缩流水线） &nbsp;国内FPGA的头部公司深鉴科技一直研究深度压缩技术，并在FPGA上实现了基于深度压缩技术的方案：深度压缩技术，其采用剪枝+量化+霍夫曼编码，形成三级大流水，如图3所示，实现高度压缩权重占用的存储空间。 其基本的思路就是，先对网络本身做pruning来减少权重的个数，同时通过训练来弥补由于减少权重而带来的精度损失，然后经过量化部分来减少权重的位宽，最后用霍夫曼编码来压缩权重。 总之目的只有一个，制作稀疏矩阵，然后利用稀疏矩阵的特性生成weight查找表，从而达到数据压缩的目的。数据压缩后再用FPGA实现会大大的降低开发难度和门槛。 而国内另外一个头部公司商汤科技的设计思想就是：通过大量减少卷积计算的乘法操作，降低运算复杂度，来提高运算速度，并在FPGA中顺利实现。 不管是降低乘法操作，还是做网络裁剪，其思路都是在修改算法的方式来适配FPGA的实现。 即先将FPGA的设计以固定的方式配置好，然后去修改算法来适配这种固定好的硬件设计。 这种方式的缺点也是显而易见的，且不说固定的设计方式会遇到ASIC同样的问题，单就修改网络的部分可能会导致原有网络的精度丢失的问题。 更为严重的是，这种设计方式会导致无法挖掘FPGA的全部潜力。 &nbsp; FPGA本身就是一个可编程系统，能够适配各种算法，为什么大家都在想办法修改算法问题，而没有想办法去修改FPGA的内部实现优化，从而完美的使其适配不同神经网络算法呢？答案很简单，用FPGA开发高难度的算法是一件很困难的事。 换一个语言，换一个世界 &nbsp; 工欲善其事，必先利其器，现在主流的开发语言verilog HDL 是上个世纪80年代研究出来的，这在计算机界就好比是原始社会阶段，而且这么多年来一直没有更新过，对比高级语言的B-&gt;C-&gt;C++-&gt;java-&gt;python的不断升级，它就好比一个古老的青铜宝剑，虽价值连城，但并不适用，而让这个古老的语言来开发现在最先进的AI算法，这便是一个现代版的愚翁移山的故事。 &nbsp; 接着探寻问题的本质，verilog的缺陷： A)无规则化，或规范化，或许这是一个社会工程的问题，因为用的人少，所以没有形成统一的规范，编程方式过分自由，基本上是一千个人里有一千个哈姆雷特。 B)遇到复杂的逻辑，只能用状态机。 C)同步信号建模时，对控制信号的掌控偏弱。 D)没有图形化界面，仿真工具都是看波形。 而改进的方案正是解决这些问题，FPGA的开发就像是在玩乐高游戏，其实现过程就是在搭积木，其中的原语部分就是积木的原始器件，只是颗粒度有点小而已。 有没有一种方式将原始器件进行封装，加强控制逻辑，同时将控制逻辑和数据流逻辑分开，用软件的思想来封装硬件，包含继承，多态，递归，然后以图形化的形式展现出来，自带仿真系统，所见即所得，利用核心库器件，真正做到用搭积木的方式来开发FPGA，这样便能大大降低其开发门槛。 &nbsp;有一种很好用的开发工具ptero，是雪湖信息科技公司自主研发的开发FPGA的工具链，可以颠覆对FPGA开发的认知，上文的种种特性都已经在该工具中实现，相当于用全新的语言来开发FPGA，且完全是界面化的形式进行开发,所见即所得,极大的降低了开发门槛并提高了开发效率。 举个例子，在实现AI算法的过程中，对数据流的严格控制是关键，如下图所示，图中的例子是一个卷积核是3×3的数据组装功能实现，一个数据产生器来模拟数据来源，补零模块来进行padding补零操作，地址译码器来处理数据组装需要的不断变化的bram地址，三行缓存模块完成数据的组装。 图4 &nbsp;卷积里面的数据组装模块 图4便是对上述流程的一个展示，从图形化里面我们很容易理解设计思路，由于里面的用到的模块都是在核心模块封装好。 所以，对开发人员来说，只需要将所有的精力都来放到逻辑这块即可。 同时，可以随时验证逻辑的正确性，所有的输出结果都可以打印输出。这种所见即所得的开发模式极大的提高了硬件逻辑的开发效率。 那么，在FPGA实现的过程中，是否可以做出通用化的过程呢？答案是肯定的，如图4中的红色字体所示，控制参数部分就是自动更新的参数，通过自动化工具生成的控制参数能有效的控制不同算子模块的实现，而无需改动硬件电路。 有了这样方便又强大的工具，又有了底层封装的模块，才能在上层建筑有更大的发挥空间，就能更好的发挥FPGA的潜能，使其适配更多的算法结构，而不是只关注于修改算法来削足适履。 换一种维度思考 解决了开发FPGA效率的问题，我们可以把主要精力在提升FPGA的性能上下功夫，利用FPGA的分布式的存储的思路来设计模型，将FPGA的性能提升到最高。 假设网络结构中有三层卷积依次执行，如下图所示： &nbsp;图5（卷积合并示例） 在这样的网络结构下，第一层是1×1的卷积核，第二层是3×3的depwise卷积运算，第三层又是一个1×1的卷积核，每层的conv模块的kernel和channel都不是很大，类似这样的网络不同的算子组合在AI算法中很常见，若按传统的思路,只能每层conv都单独计算。 但每一层的计算都不能将FPGA的资源用满（dsp&amp;bram），这会导致资源的浪费，最重要的是没有发挥FPGA的最大的性能，从而导致处理的帧率降低。 为了更好的利用FPGA 资源，挖掘FPGA的潜能，我们可以根据每层的资源分布做个统计，发现将上述三层的资源合并成一个全流水的方式（即一次IO读写，三层连续计算）才能将FPGA的潜能发挥到最大。 这种设计方案是根据算法的规律进行调整FPGA的组装结构，从而发挥出并行计算的最大性能。 如此定制化的方式是发挥了FPGA的最大性能，那么又会产生一个问题：AI算法那么多，有没有那种即能发挥FPGA的最大性能,又能有通用性的方法？ 要回答这个问题，我们得先探究FPGA的本质，FPGA本质上是个分布式的资源分布系统，那么对核心资源（主要是dsp和bram）是否可以进行动态分配？ 如果解决了这个问题，那么就能完美解决上述问题。 我们可以通过给相应模块不同的参数来适配不同的算法因子以及不同的算法组合，而修改这些参数并不需要修改FPGA程序。 而对这种方式的探索，雪湖信息科技已经做了很多工作，并有相当多的积累，并有可以商用的成熟案例，如下图，是我们生成参数的一角。 图6&nbsp;（控制参数列表） 这样的设计思路是根据不同的参数控制，针对不同的filter大小、不同的算子、不同的算子组合、不同的conv层的组合，来进行不同的控制。 这种设计兼顾了FPGA的灵活性和通用性，可以说着兼顾通用性的情况下最大限度的提高了FPGA资源的使用率，也不会出现设计硬伤，可以适配任何新的算子，对interp等非卷积类支持很充分。 而针对proposal层的处理，可以在采用将网络一分为二，预留比较小的资源进行排序处理，而其他资源可以处理新的数据，两者并行处理，只有控制逻辑和周期计算处理好，两者不会产生阻塞和延时。 另一种维度的统一 反过来想，能否在保持FPGA灵活性的情况下，做成统一平台，这种探索是可行的，这种探索雪湖信息科技一直在坚持。 图7（各个网络/芯片平台的评估数据表） 控制参数在处理平台的灵活性，而模块化的开发则是开发平台的基石ptero在开发卷积过程中不断的积累现有的卷积模块/非卷积模块，在不断的打磨过程中将平台的核心库不断的更新/优化，这些高效的模块才是能兼顾通用和灵活的关键所在。 当这种模块经过实践证明可行之后，雪湖开发出了自动化工具平台，该工具平台包括自动解析网络结构、生成控制参数、生成计算参数、推荐相应的模块、分配合理的FPGA资源等等内容。 同时会包含自动测试部分，有了自动化工具的支持，对平台的通用性和便捷性提到了一个新的高度。 如下图，便是自动化测试工具测试示例： 已经实现的卷积算法计算量在5.3 Gflops左右（算法的细节涉及机密不便展开），用znq7020里进行实现，dsp利用率在88.88%左右，下图为自动测试工具生成结果图： 图8（自动测试工具生成结果图） 自动化工具是自适应FPGA开发平台的浓缩表现，可以根据不同的算法推荐不同的方案，通过生成的不同的控制参数来合理的分配FPGA资源使用。随着该平台的不断更新和升级，最终完成一键式端到端的FPGA实现方案。 通过这种方式，最终解决FPGA开发中通用性和灵活性的问题，这是雪湖不遗余力去追求的目标。 通过这种方式，不同的用户可以根据自己的需求进行不同的配置，得到高性价比的FPGA开发方案。 同时，更重要的是该方案不需要修改网络结构，不需要对用户的数据进行重新训练，从而保护用户的核心资产。 而同时，由于FPGA的高度可配置性，当用户的算法进行更新时，可以快速的修改和部署，这也是保护用户投资的有效手段。 总之，从复杂到简单，由繁琐到简洁，是事物发展的普遍规律。 而将FPGA开发的由难到易，以工具建平台，以平台来培养人才，在灵活易用的FPGA芯片上，解决应用开发难题，能够加快AI算法的快速落地， 作者简介：杨付收，雪湖科技创始合伙人，一个在硬件圈里努力写诗的软件程序猿。专注在芯片算法相关领域十多年，曾就职于中兴、华为、展讯等知名芯片公司。白天代码几千行，晚上咖啡伴梦香。每天也就一件事，处理Bug一箩筐。 【End】 &nbsp;热 文&nbsp;推 荐&nbsp; ☞抖音“死于”印度 | 畅言 ☞996 的程序员，只能云养娃吗？ ☞Python 让蔡徐坤在我的命令行里打篮球！| 技术头条 ☞零编程基础、大龄全职妈妈是如何写出两个商业网站的？ ☞下过富士康工厂、做过华为外包，这位程序员是如何花 6 年逆袭成为技术大佬的？ ☞《权力的游戏》最终季上线！谁是你最喜爱的演员？这里有一份Python教程 | 附源码 ☞微服务落地，我们在考虑什么？| 技术头条 ☞爆料! 18张图、55个链接, 证据都在这了, 你还说自己是中本聪? ☞程序员被骗&quot;黑砖窑&quot;：监禁、恐吓、996无休编程！ System.out.println(&quot;点个在看吧！&quot;);console.log(&quot;点个在看吧！&quot;);print(&quot;点个在看吧！&quot;);printf(&quot;点个在看吧！\n&quot;);cout&nbsp;&lt;&lt;&nbsp;&quot;点个在看吧！&quot;&nbsp;&lt;&lt;&nbsp;endl;Console.WriteLine(&quot;点个在看吧！&quot;);Response.Write(&quot;点个在看吧！&quot;);alert(&quot;点个在看吧！&quot;)echo &quot;点个在看吧！&quot; 点击阅读原文，输入关键词，即可搜索您想要的 CSDN 文章。 你点的每个“在看”，我都认真当成了喜欢" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-28T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"作者 | 杨付收 出品 | CSDN（ID：CSDNnews） 碾压与崛起 AI算法的崛起并非一帆风顺的，现在的主流的NN类的卷积神经网络已经是第二波浪潮了，早在上个世纪80年代，源于仿生学，后又发展于概率学的早期AI算法已经取得了重大的进展，到1986年Rumelhart等人提出多层网络的反向传播算法（BP算法，这是AI算法可进行数据训练并能收敛的基础）后，第一波AI算法以“连接主义”的旗帜高高举起。 不幸的是，旗帜没举多久就开始偃旗息鼓，让位于基于统计学的算法，直到2006年，Hinton提出了“深度信念网络”的概念，从此，AI算法从“连接主义”变成“深度神经网络”再次华丽登场。 第一波AI算法之所以会快速落寞，不在于算法不够精美，是因为当时的cpu不够强大，算力完全无法适配当时的算法需求.第二次AI算法的崛起也并非算法足够惊艳，恰恰是证明了算力的崛起。 而且这算力的提供者并不是CPU，这种基于调度和内存交换的方式难以支持如此强大的AI算力缺口。 与此同时，基于异构计算的ASIC/FPGA/GPU也在快速崛起，其计算性能完全碾压CPU，有效的补充AI算力的缺口。 其中GPU迅速发展，成为目前AI崛起之路的最大收益者，然而GPU最初的设计目的不是针对AI算法而是处理图形图像的，因为图像上每个像素点处理的过程和方式都十分相似，所以GPU的构成相对简单，有数量众多的计算单元和用于并行的流水线，正是这种单指令流多数据流的设计模式，特别适合处理大量的类型统一的数据。 这也是在用GPU处理AI算法时，batchsize不能太低的原因。而在其他方面，如面积/功耗/能耗比方面，GPU也便成了弱势，相比较而言，ASIC芯片从一开始便是为AI而生，能效比高，不会有冗余，功耗低，适合算法稳定且要求的应用。 其缺点也是硬件为算法而定制，导致其只能运行特定的算法，当然，能做出通用AI算法的ASIC芯片是业界的终极目标。 而同时，作为ASIC的共轭形式存在的FPGA越来越受重视，FPGA能效比高，可编程逻辑，计算效率高，FPGA 同时拥有控制流并行和数据并行，是天生适合异构计算的芯片，目前开发FPGA应用方面还有很多潜能可挖。 通用Or灵活 一个基本的认知是ASIC虽然高效，但只能走专业化定制化的部分，ASIC制作成本很高，而算法一直在持续更新，如何解决这个矛盾呢？ 是否可以做一个通用的ASIC来解决算力提升和灵活性的问题？寒武纪的NPU和google的TPU给出了答案，两者的实现虽然不同，但思路是一致的。 即：既然NN算法可以拆分成不同的算子，设计的硬件建模应该全部支持这些算子从而解决通用性问题，并建立相应的指令集来解决不同算子的组合，来解决灵活性的问题。当然，核心模块还是围绕计算量最大的模块卷积进行的。那么,在实现方式上它们又有哪些共同点和不足呢? 寒武纪dadiannao： 图1 （dadiannao） 上图的硬件建模就是在模仿神经网络部分的数据流向，NFU（Neural Functional Units）分三部分顺序展开，NFU-1是乘法单元，NFU-2是加法数树，处理filter内部或通道累加的问题，NFU-3是激活单元。 从模型上不难看出，这里的核心处理卷积的单元是在数据流方向上的一维展开进行计算的。 一维度展开会带来两个问题，一个是多扇出（fan-out）的问题，如果想更大限度的利用内部数据带宽优势以及多用乘法器模块，一个data需要同时广播给多个计算单元，这会导致多扇出的问题，要保证多个模块同时到达，则频率就不能提的太高。 另外一个问题就是为了保证乘法器都能充分工作，需对filter的相关参数进行限制.以DianNao为例，一个PE中的16个mul是同时计算的，那么卷积层中的kernel、channel、windows的长和宽都会对计算的效率造成影响，如channel最好是16或16的倍数，否则就会造成计算资源的浪费. 相比较而言，Google的TPU采用脉动矩阵的方式，巧妙的避开了对filter敏感的问题，TPU的脉动矩阵是面向数据流方向的二维结构，在处理卷积乘加这块有很强的优势。 理论上可以支持任何形式的windows、kernel和channel这种设计使得TPU有更强的灵活性和高效性。 TPU： 图2 （TPU） 然而，有得必有失。脉动矩阵中处理卷积时优势明显，但在处理非卷积类算子方面则未必高效。 比如在fastRcnn中的要用到排序算法proposal层，又如在多网融合的过程中会经常被使用 interp层（双线性插值）。 其中，排序算法在基因里是反asic的(区块链中的零币就是以排序为主的算法，主要用于反asic的功能)。类似这种非卷积算法因子则会导致脉动矩阵的功能大大降低，正是因为硬件的固定设置所限制。 ASIC 在走一个统一的路子，DADIANNAO和TPU都在用统一的模式来解决一切问题，然而现实是很骨感的，有两个基本点是ASIC中无法完美解决的，一个就是AI算法在不同的探索和更改期。 目前尚未突破其中的黑盒特性，而支持AI算法优化的强有力的基础理论迟迟没有发现，这个时期就好比科学历史上人们只知道电的存在而没有电磁原理支撑是一个道理，说明AI算法的研究应处于发展初期。 另外一点就是针对各个垂直领域，如无人机/自动驾驶/智能安防/无人零售的各种特殊的情况，每一个领域都对功耗/能耗比/性能/系统等等方面有不同的诉求，这些需求都有极强的定制性。如此，想要一颗ASIC芯片通吃天下的事情似乎是个无法求出的解。 &nbsp; 找规律，找突破 如果ASIC无法解决算法通用性问题，那么更具有灵活配置性的芯片FPGA便越来越受到重视，FPGA的低延时，高可配置性的特点使其天然的在灵活性方面比ASIC略胜一筹。 那么FPGA能否满足统一性呢？其实，在业界对FPGA的探索一直没有停止， 图3（三级压缩流水线） &nbsp;国内FPGA的头部公司深鉴科技一直研究深度压缩技术，并在FPGA上实现了基于深度压缩技术的方案：深度压缩技术，其采用剪枝+量化+霍夫曼编码，形成三级大流水，如图3所示，实现高度压缩权重占用的存储空间。 其基本的思路就是，先对网络本身做pruning来减少权重的个数，同时通过训练来弥补由于减少权重而带来的精度损失，然后经过量化部分来减少权重的位宽，最后用霍夫曼编码来压缩权重。 总之目的只有一个，制作稀疏矩阵，然后利用稀疏矩阵的特性生成weight查找表，从而达到数据压缩的目的。数据压缩后再用FPGA实现会大大的降低开发难度和门槛。 而国内另外一个头部公司商汤科技的设计思想就是：通过大量减少卷积计算的乘法操作，降低运算复杂度，来提高运算速度，并在FPGA中顺利实现。 不管是降低乘法操作，还是做网络裁剪，其思路都是在修改算法的方式来适配FPGA的实现。 即先将FPGA的设计以固定的方式配置好，然后去修改算法来适配这种固定好的硬件设计。 这种方式的缺点也是显而易见的，且不说固定的设计方式会遇到ASIC同样的问题，单就修改网络的部分可能会导致原有网络的精度丢失的问题。 更为严重的是，这种设计方式会导致无法挖掘FPGA的全部潜力。 &nbsp; FPGA本身就是一个可编程系统，能够适配各种算法，为什么大家都在想办法修改算法问题，而没有想办法去修改FPGA的内部实现优化，从而完美的使其适配不同神经网络算法呢？答案很简单，用FPGA开发高难度的算法是一件很困难的事。 换一个语言，换一个世界 &nbsp; 工欲善其事，必先利其器，现在主流的开发语言verilog HDL 是上个世纪80年代研究出来的，这在计算机界就好比是原始社会阶段，而且这么多年来一直没有更新过，对比高级语言的B-&gt;C-&gt;C++-&gt;java-&gt;python的不断升级，它就好比一个古老的青铜宝剑，虽价值连城，但并不适用，而让这个古老的语言来开发现在最先进的AI算法，这便是一个现代版的愚翁移山的故事。 &nbsp; 接着探寻问题的本质，verilog的缺陷： A)无规则化，或规范化，或许这是一个社会工程的问题，因为用的人少，所以没有形成统一的规范，编程方式过分自由，基本上是一千个人里有一千个哈姆雷特。 B)遇到复杂的逻辑，只能用状态机。 C)同步信号建模时，对控制信号的掌控偏弱。 D)没有图形化界面，仿真工具都是看波形。 而改进的方案正是解决这些问题，FPGA的开发就像是在玩乐高游戏，其实现过程就是在搭积木，其中的原语部分就是积木的原始器件，只是颗粒度有点小而已。 有没有一种方式将原始器件进行封装，加强控制逻辑，同时将控制逻辑和数据流逻辑分开，用软件的思想来封装硬件，包含继承，多态，递归，然后以图形化的形式展现出来，自带仿真系统，所见即所得，利用核心库器件，真正做到用搭积木的方式来开发FPGA，这样便能大大降低其开发门槛。 &nbsp;有一种很好用的开发工具ptero，是雪湖信息科技公司自主研发的开发FPGA的工具链，可以颠覆对FPGA开发的认知，上文的种种特性都已经在该工具中实现，相当于用全新的语言来开发FPGA，且完全是界面化的形式进行开发,所见即所得,极大的降低了开发门槛并提高了开发效率。 举个例子，在实现AI算法的过程中，对数据流的严格控制是关键，如下图所示，图中的例子是一个卷积核是3×3的数据组装功能实现，一个数据产生器来模拟数据来源，补零模块来进行padding补零操作，地址译码器来处理数据组装需要的不断变化的bram地址，三行缓存模块完成数据的组装。 图4 &nbsp;卷积里面的数据组装模块 图4便是对上述流程的一个展示，从图形化里面我们很容易理解设计思路，由于里面的用到的模块都是在核心模块封装好。 所以，对开发人员来说，只需要将所有的精力都来放到逻辑这块即可。 同时，可以随时验证逻辑的正确性，所有的输出结果都可以打印输出。这种所见即所得的开发模式极大的提高了硬件逻辑的开发效率。 那么，在FPGA实现的过程中，是否可以做出通用化的过程呢？答案是肯定的，如图4中的红色字体所示，控制参数部分就是自动更新的参数，通过自动化工具生成的控制参数能有效的控制不同算子模块的实现，而无需改动硬件电路。 有了这样方便又强大的工具，又有了底层封装的模块，才能在上层建筑有更大的发挥空间，就能更好的发挥FPGA的潜能，使其适配更多的算法结构，而不是只关注于修改算法来削足适履。 换一种维度思考 解决了开发FPGA效率的问题，我们可以把主要精力在提升FPGA的性能上下功夫，利用FPGA的分布式的存储的思路来设计模型，将FPGA的性能提升到最高。 假设网络结构中有三层卷积依次执行，如下图所示： &nbsp;图5（卷积合并示例） 在这样的网络结构下，第一层是1×1的卷积核，第二层是3×3的depwise卷积运算，第三层又是一个1×1的卷积核，每层的conv模块的kernel和channel都不是很大，类似这样的网络不同的算子组合在AI算法中很常见，若按传统的思路,只能每层conv都单独计算。 但每一层的计算都不能将FPGA的资源用满（dsp&amp;bram），这会导致资源的浪费，最重要的是没有发挥FPGA的最大的性能，从而导致处理的帧率降低。 为了更好的利用FPGA 资源，挖掘FPGA的潜能，我们可以根据每层的资源分布做个统计，发现将上述三层的资源合并成一个全流水的方式（即一次IO读写，三层连续计算）才能将FPGA的潜能发挥到最大。 这种设计方案是根据算法的规律进行调整FPGA的组装结构，从而发挥出并行计算的最大性能。 如此定制化的方式是发挥了FPGA的最大性能，那么又会产生一个问题：AI算法那么多，有没有那种即能发挥FPGA的最大性能,又能有通用性的方法？ 要回答这个问题，我们得先探究FPGA的本质，FPGA本质上是个分布式的资源分布系统，那么对核心资源（主要是dsp和bram）是否可以进行动态分配？ 如果解决了这个问题，那么就能完美解决上述问题。 我们可以通过给相应模块不同的参数来适配不同的算法因子以及不同的算法组合，而修改这些参数并不需要修改FPGA程序。 而对这种方式的探索，雪湖信息科技已经做了很多工作，并有相当多的积累，并有可以商用的成熟案例，如下图，是我们生成参数的一角。 图6&nbsp;（控制参数列表） 这样的设计思路是根据不同的参数控制，针对不同的filter大小、不同的算子、不同的算子组合、不同的conv层的组合，来进行不同的控制。 这种设计兼顾了FPGA的灵活性和通用性，可以说着兼顾通用性的情况下最大限度的提高了FPGA资源的使用率，也不会出现设计硬伤，可以适配任何新的算子，对interp等非卷积类支持很充分。 而针对proposal层的处理，可以在采用将网络一分为二，预留比较小的资源进行排序处理，而其他资源可以处理新的数据，两者并行处理，只有控制逻辑和周期计算处理好，两者不会产生阻塞和延时。 另一种维度的统一 反过来想，能否在保持FPGA灵活性的情况下，做成统一平台，这种探索是可行的，这种探索雪湖信息科技一直在坚持。 图7（各个网络/芯片平台的评估数据表） 控制参数在处理平台的灵活性，而模块化的开发则是开发平台的基石ptero在开发卷积过程中不断的积累现有的卷积模块/非卷积模块，在不断的打磨过程中将平台的核心库不断的更新/优化，这些高效的模块才是能兼顾通用和灵活的关键所在。 当这种模块经过实践证明可行之后，雪湖开发出了自动化工具平台，该工具平台包括自动解析网络结构、生成控制参数、生成计算参数、推荐相应的模块、分配合理的FPGA资源等等内容。 同时会包含自动测试部分，有了自动化工具的支持，对平台的通用性和便捷性提到了一个新的高度。 如下图，便是自动化测试工具测试示例： 已经实现的卷积算法计算量在5.3 Gflops左右（算法的细节涉及机密不便展开），用znq7020里进行实现，dsp利用率在88.88%左右，下图为自动测试工具生成结果图： 图8（自动测试工具生成结果图） 自动化工具是自适应FPGA开发平台的浓缩表现，可以根据不同的算法推荐不同的方案，通过生成的不同的控制参数来合理的分配FPGA资源使用。随着该平台的不断更新和升级，最终完成一键式端到端的FPGA实现方案。 通过这种方式，最终解决FPGA开发中通用性和灵活性的问题，这是雪湖不遗余力去追求的目标。 通过这种方式，不同的用户可以根据自己的需求进行不同的配置，得到高性价比的FPGA开发方案。 同时，更重要的是该方案不需要修改网络结构，不需要对用户的数据进行重新训练，从而保护用户的核心资产。 而同时，由于FPGA的高度可配置性，当用户的算法进行更新时，可以快速的修改和部署，这也是保护用户投资的有效手段。 总之，从复杂到简单，由繁琐到简洁，是事物发展的普遍规律。 而将FPGA开发的由难到易，以工具建平台，以平台来培养人才，在灵活易用的FPGA芯片上，解决应用开发难题，能够加快AI算法的快速落地， 作者简介：杨付收，雪湖科技创始合伙人，一个在硬件圈里努力写诗的软件程序猿。专注在芯片算法相关领域十多年，曾就职于中兴、华为、展讯等知名芯片公司。白天代码几千行，晚上咖啡伴梦香。每天也就一件事，处理Bug一箩筐。 【End】 &nbsp;热 文&nbsp;推 荐&nbsp; ☞抖音“死于”印度 | 畅言 ☞996 的程序员，只能云养娃吗？ ☞Python 让蔡徐坤在我的命令行里打篮球！| 技术头条 ☞零编程基础、大龄全职妈妈是如何写出两个商业网站的？ ☞下过富士康工厂、做过华为外包，这位程序员是如何花 6 年逆袭成为技术大佬的？ ☞《权力的游戏》最终季上线！谁是你最喜爱的演员？这里有一份Python教程 | 附源码 ☞微服务落地，我们在考虑什么？| 技术头条 ☞爆料! 18张图、55个链接, 证据都在这了, 你还说自己是中本聪? ☞程序员被骗&quot;黑砖窑&quot;：监禁、恐吓、996无休编程！ System.out.println(&quot;点个在看吧！&quot;);console.log(&quot;点个在看吧！&quot;);print(&quot;点个在看吧！&quot;);printf(&quot;点个在看吧！\\n&quot;);cout&nbsp;&lt;&lt;&nbsp;&quot;点个在看吧！&quot;&nbsp;&lt;&lt;&nbsp;endl;Console.WriteLine(&quot;点个在看吧！&quot;);Response.Write(&quot;点个在看吧！&quot;);alert(&quot;点个在看吧！&quot;)echo &quot;点个在看吧！&quot; 点击阅读原文，输入关键词，即可搜索您想要的 CSDN 文章。 你点的每个“在看”，我都认真当成了喜欢","@type":"BlogPosting","url":"/2019/04/28/728466.html","headline":"AI 算法在 FPGA 芯片上还有这种操作？","dateModified":"2019-04-28T00:00:00+08:00","datePublished":"2019-04-28T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2019/04/28/728466.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>AI 算法在 FPGA 芯片上还有这种操作？</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><img class="" data-copyright="0" data-ratio="0.15644171779141106" data-src="https://mmbiz.qpic.cn/mmbiz_gif/Pn4Sm0RsAug5zOzy32A3RIVhRwowK5ogg1hJ631uGyu9zOMKfTddDnSrsxicbCQNm59Qeo3lDYCvF70I9ibGvA9g/640?wx_fmt=gif" data-type="gif" data-w="652" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_gif/Pn4Sm0RsAug5zOzy32A3RIVhRwowK5ogg1hJ631uGyu9zOMKfTddDnSrsxicbCQNm59Qeo3lDYCvF70I9ibGvA9g/640?wx_fmt=gif"></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><img class="" data-copyright="0" data-ratio="0.66625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/Pn4Sm0RsAuhJJTWNB3UdQa50RN4xbqYetmzsmRnV4fVfD4KwW52EkryXO3y47hRtg3Oh4X6yzM7GEdBXdLUIuw/640?wx_fmt=jpeg" data-type="jpeg" data-w="800" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/Pn4Sm0RsAuhJJTWNB3UdQa50RN4xbqYetmzsmRnV4fVfD4KwW52EkryXO3y47hRtg3Oh4X6yzM7GEdBXdLUIuw/640?wx_fmt=jpeg"></p> 
<h2 style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">作者 | 杨付收</span><br></h2> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">出品 | CSDN（ID：CSDNnews）</span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="font-size: 18px;"><strong><img class="rich_pages" data-copyright="0" data-ratio="0.1625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LXSAriayI15u06ibNNlXzIcor2tTtgJBKFxkIicJ8tiaRKRaictbrQEssdSg/640?wx_fmt=png" data-type="png" data-w="160" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LXSAriayI15u06ibNNlXzIcor2tTtgJBKFxkIicJ8tiaRKRaictbrQEssdSg/640?wx_fmt=png"></strong></span></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="font-size: 18px;"><strong>碾压与崛起</strong></span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">AI算法的崛起并非一帆风顺的，现在的主流的NN类的卷积神经网络已经是第二波浪潮了，早在上个世纪80年代，源于仿生学，后又发展于概率学的早期AI算法已经取得了重大的进展，到1986年Rumelhart等人提出多层网络的反向传播算法（BP算法，这是AI算法可进行数据训练并能收敛的基础）后，第一波AI算法以“连接主义”的旗帜高高举起。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">不幸的是，旗帜没举多久就开始偃旗息鼓，让位于基于统计学的算法，直到2006年，Hinton提出了“深度信念网络”的概念，从此，AI算法从“连接主义”变成“深度神经网络”再次华丽登场。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">第一波AI算法之所以会快速落寞，不在于算法不够精美，是因为当时的cpu不够强大，算力完全无法适配当时的算法需求.第二次AI算法的崛起也并非算法足够惊艳，恰恰是证明了算力的崛起。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而且这算力的提供者并不是CPU，这种基于调度和内存交换的方式难以支持如此强大的AI算力缺口。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">与此同时，基于异构计算的ASIC/FPGA/GPU也在快速崛起，其计算性能完全碾压CPU，有效的补充AI算力的缺口。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">其中GPU迅速发展，成为目前AI崛起之路的最大收益者，然而GPU最初的设计目的不是针对AI算法而是处理图形图像的，因为图像上每个像素点处理的过程和方式都十分相似，所以GPU的构成相对简单，有数量众多的计算单元和用于并行的流水线，正是这种单指令流多数据流的设计模式，特别适合处理大量的类型统一的数据。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">这也是在用GPU处理AI算法时，batchsize不能太低的原因。而在其他方面，如面积/功耗/能耗比方面，<span style="font-size: 15px;letter-spacing: 1px;">GPU</span>也便成了弱势，相比较而言，ASIC芯片从一开始便是为AI而生，能效比高，不会有冗余，功耗低，适合算法稳定且要求的应用。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">其缺点也是硬件为算法而定制，导致其只能运行特定的算法，当然，能做出通用AI算法的ASIC芯片是业界的终极目标。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而同时，作为ASIC的共轭形式存在的FPGA越来越受重视，FPGA能效比高，可编程逻辑，计算效率高，FPGA 同时拥有控制流并行和数据并行，是天生适合异构计算的芯片，目前开发FPGA应用方面还有很多潜能可挖。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 0.5px;"><span style="font-size: 18px;"><strong><img class="rich_pages" data-copyright="0" data-ratio="0.1625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LwYnW1VvkaHWiaL6W1Mr1yiaNLQpxwhyqice9F1yJzMHticssPX515qyvog/640?wx_fmt=png" data-type="png" data-w="160" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LwYnW1VvkaHWiaL6W1Mr1yiaNLQpxwhyqice9F1yJzMHticssPX515qyvog/640?wx_fmt=png"></strong></span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 0.5px;"><span style="font-size: 18px;"><strong> 通用Or灵活</strong></span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">一个基本的认知是ASIC虽然高效，但只能走专业化定制化的部分，ASIC制作成本很高，而算法一直在持续更新，如何解决这个矛盾呢？</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">是否可以做一个通用的ASIC来解决算力提升和灵活性的问题？寒武纪的NPU和google的TPU给出了答案，两者的实现虽然不同，但思路是一致的。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">即：既然NN算法可以拆分成不同的算子，设计的硬件建模应该全部支持这些算子从而解决通用性问题，并建立相应的指令集来解决不同算子的组合，来解决灵活性的问题。当然，核心模块还是围绕计算量最大的模块卷积进行的。那么,在实现方式上它们又有哪些共同点和不足呢?</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">寒武纪dadiannao：</span></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.8207705192629816" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu383fMoExqQicvwV9CIKZ7fkIyjFluDtl9ibHKlq4lhMMN7GXm7Z93z9bmA/640?wx_fmt=png" data-type="png" data-w="597" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu383fMoExqQicvwV9CIKZ7fkIyjFluDtl9ibHKlq4lhMMN7GXm7Z93z9bmA/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">图1 （dadiannao）</span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">上图的硬件建模就是在模仿神经网络部分的数据流向，NFU（Neural Functional Units）分三部分顺序展开，NFU-1是乘法单元，NFU-2是加法数树，处理filter内部或通道累加的问题，NFU-3是激活单元。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">从模型上不难看出，这里的核心处理卷积的单元是在数据流方向上的一维展开进行计算的。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">一维度展开会带来两个问题，一个是多扇出（fan-out）的问题，如果想更大限度的利用内部数据带宽优势以及多用乘法器模块，一个data需要同时广播给多个计算单元，这会导致多扇出的问题，要保证多个模块同时到达，则频率就不能提的太高。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">另外一个问题就是为了保证乘法器都能充分工作，需对filter的相关参数进行限制.以DianNao为例，一个PE中的16个mul是同时计算的，那么卷积层中的kernel、channel、windows的长和宽都会对计算的效率造成影响，如channel最好是16或16的倍数，否则就会造成计算资源的浪费.</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">相比较而言，Google的TPU采用脉动矩阵的方式，巧妙的避开了对filter敏感的问题，TPU的脉动矩阵是面向数据流方向的二维结构，在处理卷积乘加这块有很强的优势。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">理论上可以支持任何形式的windows、kernel和channel这种设计使得TPU有更强的灵活性和高效性。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">TPU：</span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.9229024943310657" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38iavp7c16eFTmIYJpQNUDFW3dhVXoWqnw7pjPHtY7bOA7ibsLshd1A1pg/640?wx_fmt=png" data-type="png" data-w="441" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38iavp7c16eFTmIYJpQNUDFW3dhVXoWqnw7pjPHtY7bOA7ibsLshd1A1pg/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">图2 （TPU）</span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">然而，有得必有失。脉动矩阵中处理卷积时优势明显，但在处理非卷积类算子方面则未必高效。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">比如在fastRcnn中的要用到排序算法proposal层，又如在多网融合的过程中会经常被使用 interp层（双线性插值）。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">其中，排序算法在基因里是反asic的(区块链中的零币就是以排序为主的算法，主要用于反asic的功能)。类似这种非卷积算法因子则会导致脉动矩阵的功能大大降低，正是因为硬件的固定设置所限制。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">ASIC 在走一个统一的路子，DADIANNAO和TPU都在用统一的模式来解决一切问题，然而现实是很骨感的，有两个基本点是ASIC中无法完美解决的，一个就是AI算法在不同的探索和更改期。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">目前尚未突破其中的黑盒特性，而支持AI算法优化的强有力的基础理论迟迟没有发现，这个时期就好比科学历史上人们只知道电的存在而没有电磁原理支撑是一个道理，说明AI算法的研究应处于发展初期。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">另外一点就是针对各个垂直领域，如无人机/自动驾驶/智能安防/无人零售的各种特殊的情况，每一个领域都对功耗/能耗比/性能/系统等等方面有不同的诉求，这些需求都有极强的定制性。如此，想要一颗ASIC芯片通吃天下的事情似乎是个无法求出的解。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 18px;"><strong><img class="rich_pages" data-copyright="0" data-ratio="0.1625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4Lb4ybNEVGnaAvEDwENKzW27LUKFDGZPKcBneWwTaTpaJyG2C3em7libQ/640?wx_fmt=png" data-type="png" data-w="160" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4Lb4ybNEVGnaAvEDwENKzW27LUKFDGZPKcBneWwTaTpaJyG2C3em7libQ/640?wx_fmt=png"></strong></span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 18px;"><strong>找规律，找突破</strong></span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">如果ASIC无法解决算法通用性问题，那么更具有灵活配置性的芯片FPGA便越来越受到重视，FPGA的低延时，高可配置性的特点使其天然的在灵活性方面比ASIC略胜一筹。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">那么FPGA能否满足统一性呢？其实，在业界对FPGA的探索一直没有停止，</span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.5347682119205298" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38L7AgYuOR7TsMdaxibNcvMOxZFR0q2vqwK7jGjsY73lPQaE1HkM267eQ/640?wx_fmt=png" data-type="png" data-w="604" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38L7AgYuOR7TsMdaxibNcvMOxZFR0q2vqwK7jGjsY73lPQaE1HkM267eQ/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">图3（三级压缩流水线）</span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"> &nbsp;国内FPGA的头部公司深鉴科技一直研究深度压缩技术，并在FPGA上实现了基于深度压缩技术的方案：深度压缩技术，其采用剪枝+量化+霍夫曼编码，形成三级大流水，如图3所示，实现高度压缩权重占用的存储空间。</span> </p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">其基本的思路就是，先对网络本身做pruning来减少权重的个数，同时通过训练来弥补由于减少权重而带来的精度损失，然后经过量化部分来减少权重的位宽，最后用霍夫曼编码来压缩权重。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">总之目的只有一个，制作稀疏矩阵，然后利用稀疏矩阵的特性生成weight查找表，从而达到数据压缩的目的。数据压缩后再用FPGA实现会大大的降低开发难度和门槛。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而国内另外一个头部公司商汤科技的设计思想就是：通过大量减少卷积计算的乘法操作，降低运算复杂度，来提高运算速度，并在FPGA中顺利实现。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">不管是降低乘法操作，还是做网络裁剪，其思路都是在修改算法的方式来适配FPGA的实现。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">即先将FPGA的设计以固定的方式配置好，然后去修改算法来适配这种固定好的硬件设计。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">这种方式的缺点也是显而易见的，且不说固定的设计方式会遇到ASIC同样的问题，单就修改网络的部分可能会导致原有网络的精度丢失的问题。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">更为严重的是，这种设计方式会导致无法挖掘FPGA的全部潜力。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"> &nbsp; FPGA本身就是一个可编程系统，能够适配各种算法，为什么大家都在想办法修改算法问题，而没有想办法去修改FPGA的内部实现优化，从而完美的使其适配不同神经网络算法呢？答案很简单，用FPGA开发高难度的算法是一件很困难的事。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 18px;"><strong><img class="rich_pages" data-copyright="0" data-ratio="0.1625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LLqyf6BY4rMfY2LsU81MibFjicKDLjMjib5R23h8uo6GtGDY8OufWJfpEw/640?wx_fmt=png" data-type="png" data-w="160" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LLqyf6BY4rMfY2LsU81MibFjicKDLjMjib5R23h8uo6GtGDY8OufWJfpEw/640?wx_fmt=png"></strong></span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 18px;"><strong>换一个语言，换一个世界</strong></span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"> &nbsp; 工欲善其事，必先利其器，现在主流的开发语言verilog HDL 是上个世纪80年代研究出来的，这在计算机界就好比是原始社会阶段，而且这么多年来一直没有更新过，对比高级语言的B-&gt;C-&gt;C++-&gt;java-&gt;python的不断升级，它就好比一个古老的青铜宝剑，虽价值连城，但并不适用，而让这个古老的语言来开发现在最先进的AI算法，这便是一个现代版的愚翁移山的故事。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"> &nbsp; 接着探寻问题的本质，verilog的缺陷：</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">A)无规则化，或规范化，或许这是一个社会工程的问题，因为用的人少，所以没有形成统一的规范，编程方式过分自由，基本上是一千个人里有一千个哈姆雷特。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">B)遇到复杂的逻辑，只能用状态机。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">C)同步信号建模时，对控制信号的掌控偏弱。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">D)没有图形化界面，仿真工具都是看波形。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而改进的方案正是解决这些问题，FPGA的开发就像是在玩乐高游戏，其实现过程就是在搭积木，其中的原语部分就是积木的原始器件，只是颗粒度有点小而已。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">有没有一种方式将原始器件进行封装，加强控制逻辑，同时将控制逻辑和数据流逻辑分开，用软件的思想来封装硬件，包含继承，多态，递归，然后以图形化的形式展现出来，自带仿真系统，所见即所得，利用核心库器件，真正做到用搭积木的方式来开发FPGA，这样便能大大降低其开发门槛。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"> &nbsp;有一种很好用的开发工具ptero，是雪湖信息科技公司自主研发的开发FPGA的工具链，可以颠覆对FPGA开发的认知，上文的种种特性都已经在该工具中实现，相当于用全新的语言来开发FPGA，且完全是界面化的形式进行开发,所见即所得,极大的降低了开发门槛并提高了开发效率。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">举个例子，在实现AI算法的过程中，对数据流的严格控制是关键，如下图所示，图中的例子是一个卷积核是3×3的数据组装功能实现，一个数据产生器来模拟数据来源，补零模块来进行padding补零操作，地址译码器来处理数据组装需要的不断变化的bram地址，三行缓存模块完成数据的组装。</span></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.7028571428571428" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38r0vMetyV6Mg5wmGxlTHLHJ4MMeTYYVgzOCcaHedSxGyNf2tFJjiaNsA/640?wx_fmt=png" data-type="png" data-w="525" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38r0vMetyV6Mg5wmGxlTHLHJ4MMeTYYVgzOCcaHedSxGyNf2tFJjiaNsA/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">图4 &nbsp;卷积里面的数据组装模块</span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">图4便是对上述流程的一个展示，从图形化里面我们很容易理解设计思路，由于里面的用到的模块都是在核心模块封装好。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">所以，对开发人员来说，只需要将所有的精力都来放到逻辑这块即可。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">同时，可以随时验证逻辑的正确性，所有的输出结果都可以打印输出。这种所见即所得的开发模式极大的提高了硬件逻辑的开发效率。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;"> 那么，在FPGA实现的过程中，是否可以做出通用化的过程呢？答案是肯定的，如图4中的红色字体所示，控制参数部分就是自动更新的参数，通过自动化工具生成的控制参数能有效的控制不同算子模块的实现，而无需改动硬件电路。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">有了这样方便又强大的工具，又有了底层封装的模块，才能在上层建筑有更大的发挥空间，就能更好的发挥FPGA的潜能，使其适配更多的算法结构，而不是只关注于修改算法来削足适履。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="font-size: 18px;"><strong><img class="rich_pages" data-copyright="0" data-ratio="0.1625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LzUzfol6q1COlZYpeYXqe0aia45DXyhcTQW8voWvibFJvEjfmkhPvCrEg/640?wx_fmt=png" data-type="png" data-w="160" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4LzUzfol6q1COlZYpeYXqe0aia45DXyhcTQW8voWvibFJvEjfmkhPvCrEg/640?wx_fmt=png"></strong></span></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="font-size: 18px;"><strong>换一种维度思考</strong></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">解决了开发FPGA效率的问题，我们可以把主要精力在提升FPGA的性能上下功夫，利用FPGA的分布式的存储的思路来设计模型，将FPGA的性能提升到最高。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">假设网络结构中有三层卷积依次执行，如下图所示：</span></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.11594202898550725" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38d6jUt8ZevmicJSFjKrSjoocsJRzF88KLB7PWKJpPmqhU1ZKenQaORVw/640?wx_fmt=png" data-type="png" data-w="828" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38d6jUt8ZevmicJSFjKrSjoocsJRzF88KLB7PWKJpPmqhU1ZKenQaORVw/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">&nbsp;图5（卷积合并示例）</span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">在这样的网络结构下，第一层是1×1的卷积核，第二层是3×3的depwise卷积运算，第三层又是一个1×1的卷积核，每层的conv模块的kernel和channel都不是很大，类似这样的网络不同的算子组合在AI算法中很常见，若按传统的思路,只能每层conv都单独计算。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">但每一层的计算都不能将FPGA的资源用满（dsp&amp;bram），这会导致资源的浪费，最重要的是没有发挥FPGA的最大的性能，从而导致处理的帧率降低。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">为了更好的利用FPGA 资源，挖掘FPGA的潜能，我们可以根据每层的资源分布做个统计，发现将上述三层的资源合并成一个全流水的方式（<span style="font-size: 15px;letter-spacing: 1px;">即一次IO读写，三层连续计算</span>）才能将FPGA的潜能发挥到最大。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">这种设计方案是根据算法的规律进行调整FPGA的组装结构，从而发挥出并行计算的最大性能。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">如此定制化的方式是发挥了FPGA的最大性能，那么又会产生一个问题：AI算法那么多，有没有那种即能发挥FPGA的最大性能,又能有通用性的方法？</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">要回答这个问题，我们得先探究FPGA的本质，FPGA本质上是个分布式的资源分布系统，那么对核心资源（主要是dsp和bram）是否可以进行动态分配？</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">如果解决了这个问题，那么就能完美解决上述问题。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">我们可以通过给相应模块不同的参数来适配不同的算法因子以及不同的算法组合，而修改这些参数并不需要修改FPGA程序。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而对这种方式的探索，雪湖信息科技已经做了很多工作，并有相当多的积累，并有可以商用的成熟案例，如下图，是我们生成参数的一角。</span></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.36403750689464975" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38YSicf17LAyhAo7RuKoqLXIJ7vxwDcJ45HjWwY30TOdhdp5CXdicENc5A/640?wx_fmt=png" data-type="png" data-w="1813" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38YSicf17LAyhAo7RuKoqLXIJ7vxwDcJ45HjWwY30TOdhdp5CXdicENc5A/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">图6&nbsp;（控制参数列表）</span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">这样的设计思路是根据不同的参数控制，针对不同的filter大小、不同的算子<span style="font-size: 15px;letter-spacing: 1px;">、</span>不同的算子组合<span style="font-size: 15px;letter-spacing: 1px;">、</span>不同的conv层的组合，来进行不同的控制。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">这种设计兼顾了FPGA的灵活性和通用性，可以说着兼顾通用性的情况下最大限度的提高了FPGA资源的使用率，也不会出现设计硬伤，可以适配任何新的算子，对interp等非卷积类支持很充分。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而针对proposal层的处理，可以在采用将网络一分为二，预留比较小的资源进行排序处理，而其他资源可以处理新的数据，两者并行处理，只有控制逻辑和周期计算处理好，两者不会产生阻塞和延时。</span></p> 
<p style="margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><br></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 18px;"><strong><img class="rich_pages" data-copyright="0" data-ratio="0.1625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4L8DRknQu3FB9eZicibvOSlVrgnllB3XcGnsrw4zCk19ic0QjZkTPoqFMWw/640?wx_fmt=png" data-type="png" data-w="160" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhSvZMAt2zKcxGQN3l1NV4L8DRknQu3FB9eZicibvOSlVrgnllB3XcGnsrw4zCk19ic0QjZkTPoqFMWw/640?wx_fmt=png"></strong></span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 18px;"><strong>另一种维度的统一</strong></span><span style="font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;margin-left: 8px;margin-right: 8px;"><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">反过来想，能否在保持FPGA灵活性的情况下，做成统一平台，这种探索是可行的，这种探索雪湖信息科技一直在坚持。</span></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.2513287775246773" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38hPicpNNXMBpY9icQjjoVC5EahJDNGSq58hIHcKDCwbKkk3MT6fJ8eppw/640?wx_fmt=png" data-type="png" data-w="1317" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu38hPicpNNXMBpY9icQjjoVC5EahJDNGSq58hIHcKDCwbKkk3MT6fJ8eppw/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-bottom: 15px;line-height: 1.75em;margin-left: 8px;margin-right: 8px;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">图7（各个网络/芯片平台的评估数据表）</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">控制参数在处理平台的灵活性，而模块化的开发则是开发平台的基石ptero在开发卷积过程中不断的积累现有的卷积模块/非卷积模块，在不断的打磨过程中将平台的核心库不断的更新/优化，这些高效的模块才是能兼顾通用和灵活的关键所在。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">当这种模块经过实践证明可行之后，雪湖开发出了自动化工具平台，该工具平台包括自动解析网络结构、生成控制参数<span style="font-size: 15px;letter-spacing: 1px;">、</span>生成计算参数<span style="font-size: 15px;letter-spacing: 1px;">、</span>推荐相应的模块<span style="font-size: 15px;letter-spacing: 1px;">、</span>分配合理的FPGA资源等等内容。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">同时会包含自动测试部分，有了自动化工具的支持，对平台的通用性和便捷性提到了一个新的高度。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">如下图，便是自动化测试工具测试示例：</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">已经实现的卷积算法计算量在5.3 Gflops左右（算法的细节涉及机密不便展开），用znq7020里进行实现，dsp利用率在88.88%左右，下图为<span style="font-size: 15px;letter-spacing: 1px;">自动测试工具生成结果图</span>：</span></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><img class="rich_pages" data-copyright="0" data-ratio="0.5786082474226805" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu386YjSbreM4LUaLeW5c82l0dtODz9wVLPaVFtRj8eUQxnY9cxcHXRgbw/640?wx_fmt=png" data-type="png" data-w="776" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujxcqKxmqdFOQOrbSCDbu386YjSbreM4LUaLeW5c82l0dtODz9wVLPaVFtRj8eUQxnY9cxcHXRgbw/640?wx_fmt=png"></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);font-size: 14px;">图8（<span style="font-size: 14px;color: rgb(136, 136, 136);letter-spacing: 1px;">自动测试工具生成结果图</span>）</span><span style="font-size: 15px;"></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">自动化工具是自适应FPGA开发平台的浓缩表现，可以根据不同的算法推荐不同的方案，通过生成的不同的控制参数来合理的分配FPGA资源使用。随着该平台的不断更新和升级，最终完成一键式端到端的FPGA实现方案。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">通过这种方式，最终解决FPGA开发中通用性和灵活性的问题，这是雪湖不遗余力去追求的目标。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">通过这种方式，不同的用户可以根据自己的需求进行不同的配置，得到高性价比的FPGA开发方案。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">同时，更重要的是该方案不需要修改网络结构，不需要对用户的数据进行重新训练，从而保护用户的核心资产。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而同时，由于FPGA的高度可配置性，当用户的算法进行更新时，可以快速的修改和部署，这也是保护用户投资的有效手段。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">总之，从复杂到简单，由繁琐到简洁，是事物发展的普遍规律。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="font-size: 15px;">而将FPGA开发的由难到易，以工具建平台，以平台来培养人才，在灵活易用的FPGA芯片上，解决应用开发难题，能够加快AI算法的快速落地，</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;margin-bottom: 15px;line-height: 1.75em;letter-spacing: 1px;"><span style="color: rgb(136, 136, 136);">作<span style="font-size: 15px;">者简介：杨付收，雪湖科技创始合伙人，一个在硬件圈里努力写诗的软件程序猿。专注在芯片算法相关领域十多年，曾就职于中兴、华为、展讯等知名芯片公司。白天代码几千行，晚上咖啡伴梦香。每天也就一件事，处理Bug一箩筐。</span></span></p> 
<p style="margin: 15px 8px;max-width: 100%;min-height: 1em;white-space: normal;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: center;line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;overflow-wrap: break-word !important;">【End】</span></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;text-align: center;line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.5482233502538071" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/Pn4Sm0RsAuha00icpm13kvibNc1ebfcQjpgySe2fkicMtiaqgjmTjGspENfMVYJx6URDTibSr3uAEQ867w9ajGwicwag/640?wx_fmt=jpeg" data-type="jpeg" data-w="591" style="box-sizing: border-box !important;overflow-wrap: break-word !important;width: 591px !important;visibility: visible !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/Pn4Sm0RsAuha00icpm13kvibNc1ebfcQjpgySe2fkicMtiaqgjmTjGspENfMVYJx6URDTibSr3uAEQ867w9ajGwicwag/640?wx_fmt=jpeg"></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;text-align: center;line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(255, 255, 255);background-color: rgb(60, 142, 216);font-size: 15px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">&nbsp;热 文</strong>&nbsp;推 荐&nbsp;</strong></span></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAwODM4MA==&amp;mid=2650718528&amp;idx=1&amp;sn=c8eb2461a6785b74c0711678c95134e3&amp;chksm=bea6b09389d13985cbfb59ee1b55833a46de14fe5b6eec523d4c8b9a4c0d293f5ba2f1e6b466&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);color: rgb(0, 82, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">☞</span><span style="max-width: 100%;color: rgb(0, 82, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">抖音“死于”印度 | 畅言</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAwODM4MA==&amp;mid=2650718500&amp;idx=1&amp;sn=e230a91cd91a7a5e6c7797b95dfd26ff&amp;chksm=bea6b0f789d139e184e777515684e31faf4375f65ea4bbba1ab1b9f883d7e17fe15141e5dec7&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);font-size: 14px;color: rgb(0, 82, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">☞</span><span style="max-width: 100%;font-size: 14px;color: rgb(0, 82, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">996 的程序员，只能云养娃吗？</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(0, 82, 255);font-size: 14px;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);box-sizing: border-box !important;overflow-wrap: break-word !important;">☞</span><a href="http://mp.weixin.qq.com/s?__biz=MjM5MjAwODM4MA==&amp;mid=2650718440&amp;idx=4&amp;sn=c45d15eb96a9460d7e3d94fbc77d966d&amp;chksm=bea6b13b89d1382d868a3fb4859c0c6c19be1e7fc4aa768942976ffdb5a2a9e6ff3f3dab5202&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="11" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);color: rgb(0, 82, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">Python 让蔡徐坤在我的命令行里打篮球！| 技术头条</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MDA4NDkxMQ==&amp;mid=2247483866&amp;idx=1&amp;sn=c61e53808100986007f9798ef29e4960&amp;chksm=ce92799af9e5f08c0b4a77d1a5f522627da14e8cb5c46f83ef4afa45a102ba517daee8bc1453&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);color: rgb(0, 82, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">☞零编程基础、大龄全职妈妈是如何写出两个商业网站的？</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzA5MzY4NTQwMA==&amp;mid=2651010298&amp;idx=1&amp;sn=655f418a8e1ac2feaf9f52f655c3d7f2&amp;chksm=8bad870dbcda0e1bb2dca72f09be158651d9de5bd9f97ce686166072bf661f18481083a694c1&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="11" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);color: rgb(0, 82, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">☞下过富士康工厂、做过华为外包，这位程序员是如何花 6 年逆袭成为技术大佬的？</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzI0ODcxODk5OA==&amp;mid=2247504463&amp;idx=1&amp;sn=ef40cf8abd754de861823a3943b689c7&amp;chksm=e99ee1b6dee968a0788a7909be5f313e039871fe56132266740d9f61e6fb19d9c0d8c093bebe&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);color: rgb(0, 82, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">☞《权力的游戏》最终季上线！谁是你最喜爱的演员？这里有一份Python教程 | 附源码</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3MjY1MTQwNQ==&amp;mid=2649827209&amp;idx=1&amp;sn=c7dd99053f8bb7091c3dc87943a0751a&amp;chksm=871e806bb069097d06406a39b33820c8b4b075b6a56199aa139a1ae58daaa8a079fce80fcc85&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);color: rgb(0, 82, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">☞微服务落地，我们在考虑什么？| 技术头条</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247494442&amp;idx=1&amp;sn=76439d40b659cfae06572333232cbbe7&amp;chksm=fc7fb5d7cb083cc1331fa903b5ce0737714628bb0b8ae3a28c509b4a8fcea6512a08c8dc258f&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);color: rgb(0, 82, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">☞爆料! 18张图、55个链接, 证据都在这了, 你还说自己是中本聪?</span></a></p> 
<p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);line-height: normal;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzA5MjcxNjc2Ng==&amp;mid=2650559766&amp;idx=1&amp;sn=fb6e44a97e108113a772c6c2bba25289&amp;chksm=88601ea7bf1797b117aa0625a3efa316fa660eb90654a96013c14a03c4eb3a71bb75b6bab646&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);font-size: 14px;color: rgb(0, 82, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;">☞程序员被骗"黑砖窑"：监禁、恐吓、996无休编程！</span></a></p> 
<section style="max-width: 100%;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
 <section class="" style="max-width: 100%;font-size: 16px;color: rgb(62, 62, 62);line-height: 1.6;letter-spacing: 0px;box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
  <pre style="max-width: 100%;font-size: inherit;color: inherit;line-height: inherit;box-sizing: border-box !important;overflow-wrap: break-word !important;"><p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;padding: 0.5em;max-width: 100%;min-height: 1em;font-size: 14px;font-family: Consolas, Inconsolata, Courier, monospace;border-radius: 0px;background: rgb(34, 34, 34);color: rgb(170, 170, 170);line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: normal !important;word-break: normal !important;overflow: auto !important;">System.out.println(<span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">"点个在看吧！"</span>);<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">console.log(<span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！"</span>);<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(50, 170, 238);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">print</span>(<span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！"</span>);<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(50, 170, 238);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">printf</span>(<span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！\n"</span>);<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">cout&nbsp;&lt;&lt;&nbsp;<span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！"</span>&nbsp;&lt;&lt;&nbsp;endl;<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">Console.WriteLine(<span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！"</span>);<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">Response.Write(<span class="" style="max-width: 100%;font-size: inherit;line-height: inherit;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！"</span>);<br style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-variant-numeric: normal;line-height: 24.5px;widows: 1;box-sizing: border-box !important;overflow-wrap: break-word !important;">alert(</span><span style="max-width: 100%;font-variant-numeric: normal;line-height: 24.5px;widows: 1;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: break-word !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！"</span><span style="max-width: 100%;font-variant-numeric: normal;line-height: 24.5px;widows: 1;box-sizing: border-box !important;overflow-wrap: break-word !important;">)</span><br style="max-width: 100%;font-variant-numeric: normal;line-height: 24.5px;widows: 1;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span class="" style="max-width: 100%;font-size: inherit;font-variant-numeric: normal;line-height: inherit;widows: 1;color: rgb(50, 170, 238);box-sizing: border-box !important;overflow-wrap: inherit !important;word-break: inherit !important;">echo </span><span style="max-width: 100%;font-variant-numeric: normal;line-height: 24.5px;widows: 1;color: rgb(255, 204, 51);box-sizing: border-box !important;overflow-wrap: break-word !important;">"点个<span style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">在</span>看吧！"</span></p></pre> 
 </section> 
</section> 
<p style="margin: 15px 8px;max-width: 100%;min-height: 1em;white-space: normal;background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;line-height: 1.75em;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><img border="0" class="__bg_gif" data-ratio="0.8" data-src="https://mmbiz.qpic.cn/mmbiz_gif/Pn4Sm0RsAujr9dOtwUGfl03zJzLBRXbZs8g1RcNcLr7qm5qEy419tofZ8dq1sIW75xZwq2K4zIzcTtaDOy4OTg/640?wx_fmt=gif" data-type="gif" data-w="200" height="" style="box-sizing: border-box;font-family: 微软雅黑;font-size: 16px;letter-spacing: 0.544px;vertical-align: middle;overflow-wrap: break-word !important;visibility: visible !important;width: 45px !important;" title="" width="45" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_gif/Pn4Sm0RsAujr9dOtwUGfl03zJzLBRXbZs8g1RcNcLr7qm5qEy419tofZ8dq1sIW75xZwq2K4zIzcTtaDOy4OTg/640?wx_fmt=gif"><strong style="max-width: 100%;color: rgb(55, 55, 93);font-family: 微软雅黑;font-size: 16px;letter-spacing: 0.544px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;font-family: -apple-system-font, system-ui, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 1px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;widows: 1;box-sizing: border-box !important;overflow-wrap: break-word !important;">点击阅读原文，输入关键词，即可搜索您想要的 CSDN 文章。</span></strong></strong></p> 
<section class="" data-tools="135编辑器" data-id="94250" style="max-width: 100%;box-sizing: border-box;letter-spacing: 0.544px;white-space: normal;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"> 
 <section class="" data-tools="135编辑器" data-id="91842" style="max-width: 100%;box-sizing: border-box;border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"> 
  <section style="max-width: 100%;text-align: right;width: auto;box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
   <section style="max-width: 100%;display: inline-block;clear: both;box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
    <section class="" data-brushtype="text" style="padding: 18px 15px 20px 10px;max-width: 100%;box-sizing: border-box;color: rgb(86, 146, 214);background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhpplm16ibb8iaib7RoGQ5iaHEdy66AHd7QqL7A2s5icSBE0aw4iaKOKPnXGYxQPhG7VMpbbYV6VJprSh7w/640?wx_fmt=png&quot;);background-repeat: no-repeat;text-align: center;background-size: 100% 100%;font-size: 16px;letter-spacing: 1.5px;overflow-wrap: break-word !important;"> 
     <section style="max-width: 100%;display: flex;justify-content: center;align-items: center;box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
      <section style="margin-left: 2px;max-width: 100%;width: 20px;box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
       <img class="" data-ratio="0.8936170212765957" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhpplm16ibb8iaib7RoGQ5iaHEdvAd0o9e1LlUGA2k0Yib222agOxzweXhahA9GuzJcGBg0dA4DzlibxRqw/640?wx_fmt=png" data-type="png" data-w="47" style="margin-bottom: -6px;box-sizing: border-box !important;overflow-wrap: break-word !important;visibility: visible !important;width: 20px !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhpplm16ibb8iaib7RoGQ5iaHEdvAd0o9e1LlUGA2k0Yib222agOxzweXhahA9GuzJcGBg0dA4DzlibxRqw/640?wx_fmt=png"> 
      </section> 
      <section class="" data-brushtype="text" style="max-width: 100%;font-size: 14px;color: rgb(51, 51, 51);box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
       <span style="max-width: 100%;font-family: 楷体, 楷体_GB2312, SimKai;box-sizing: border-box !important;overflow-wrap: break-word !important;">你点的每个“在看”，我都认真当成了喜欢</span> 
       <br> 
      </section> 
     </section> 
    </section> 
   </section> 
  </section> 
 </section> 
</section> 
<section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"> 
 <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;font-size: 16px;font-family: 微软雅黑;text-align: right;box-sizing: border-box !important;overflow-wrap: break-word !important;"></section> 
</section>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
