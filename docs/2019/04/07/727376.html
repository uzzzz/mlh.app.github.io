<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践 1.原理 2.tf-idf的理论依据及不足 3.实践 tf-idf（英语：term frequency–inverse document frequency）是一种用于信息检索与文本挖掘的常用加权技术。tf-idf是一种统计方法，用以评估一字词对于一个文件集或一个语料库中的其中一份文件的重要程度。字词的重要性随着它在文件中出现的次数成正比增加，但同时会随着它在语料库中出现的频率成反比下降。tf-idf加权的各种形式常被搜索引擎应用，作为文件与用户查询之间相关程度的度量或评级。 1.原理 在一份给定的文件里，词频（term frequency，tf）指的是某一个给定的词语在该文件中出现的频率。这个数字是对词数（term count）的归一化，以防止它偏向长的文件。（同一个词语在长文件里可能会比短文件有更高的词数，而不管该词语重要与否。）对于在某一特定文件里的词语 t i ​ t_i​ ti​​来说，它的重要性可表示为： t f i , j = n i , j ∑ k n k , j tf_{i,j}=\frac{n_{i,j}}{\sum_kn_{k,j}} tfi,j​=∑k​nk,j​ni,j​​ 以上式子中 n i , j n_{i,j} ni,j​是该词在文件 d j d_j dj​中的出现次数，而分母则是在文件 d j d_j dj​中所有字词的出现次数之和。 逆向文件频率（inverse document frequency，idf）是一个词语普遍重要性的度量。某一特定词语的idf，可以由总文件数目除以包含该词语之文件的数目，再将得到的商取以10为底的对数得到： i d f i = l g ∣ D ∣ ∣ { j : t i ϵ d j } ∣ idf_i=lg\frac{|D|}{|\{j:t_i\epsilon d_j\}|} idfi​=lg∣{j:ti​ϵdj​}∣∣D∣​ 其中： ∣ D ∣ |D| ∣D∣:语料库中的文件总数 ∣ { j : t i ϵ d j } ∣ |\{j:t_i\epsilon d_j\}| ∣{j:ti​ϵdj​}∣:包含词语 t i t_i ti​的文件数目， 如果词语不在数据中，就导致分母为零，因此一般情况下使用1 + ∣ { j : t i ϵ d j } ∣ ​ |\{j:t_i\epsilon d_j\}|​ ∣{j:ti​ϵdj​}∣​ 然后 t d i d f i , j = t f i , j ∗ i d f i tdidf_{i,j}=tf_{i,j}*idf_i tdidfi,j​=tfi,j​∗idfi​ 某一特定文件内的高词语频率，以及该词语在整个文件集合中的低文件频率，可以产生出高权重的tf-idf。因此，tf-idf倾向于过滤掉常见的词语，保留重要的词语。 2.tf-idf的理论依据及不足 tf-idf算法是创建在这样一个假设之上的：对区别文档最有意义的词语应该是那些在文档中出现频率高，而在整个文档集合的其他文档中出现频率少的词语，所以如果特征空间坐标系取tf词频作为测度，就可以体现同类文本的特点。另外考虑到单词区别不同类别的能力，tf-idf法认为一个单词出现的文本频数越小，它区别不同类别文本的能力就越大。因此引入了逆文本频度idf的概念，以tf和idf的乘积作为特征空间坐标系的取值测度，并用它完成对权值tf的调整，调整权值的目的在于突出重要单词，抑制次要单词。但是在本质上idf是一种试图抑制噪声的加权，并且单纯地认为文本频率小的单词就越重要，文本频率大的单词就越无用，显然这并不是完全正确的。idf的简单结构并不能有效地反映单词的重要程度和特征词的分布情况，使其无法很好地完成对权值调整的功能，所以tf-idf法的精度并不是很高。 此外，在tf-idf算法中并没有体现出单词的位置信息，对于Web文档而言，权重的计算方法应该体现出HTML的结构特征。特征词在不同的标记符中对文章内容的反映程度不同，其权重的计算方法也应不同。因此应该对于处于网页不同位置的特征词分别赋予不同的系数，然后乘以特征词的词频，以提高文本表示的效果。 3.实践 接上篇 from sklearn.feature_extraction.text import TfidfVectorizer from time import time t0 = time() tfidf = TfidfVectorizer() vectorizer = tfidf.fit(x_train[&#39;word_seg&#39;]) x_train = vectorizer.fit_transform(x_train[&#39;word_seg&#39;]) x_valid = vectorizer.fit_transform(x_valid[&#39;word_seg&#39;]) duration = time() - t0 print(&quot;done in %fs&quot; % (duration)) print(&quot;%d documents, %d features&quot; % x_train.shape) print(&quot;%d documents, %d features&quot; % x_valid.shape) 运行结果： # done in 237.123385s # 92049 documents, 826647 features # 10228 documents, 250299 features 参考文献及补充阅读： 维基百科—tf-idf TF-IDF与余弦相似性的应用（一）：自动提取关键词—阮一峰 TF-IDF与余弦相似性的应用（二）：找出相似文章—阮一峰 TF-IDF与余弦相似性的应用（三）：自动摘要—阮一峰" />
<meta property="og:description" content="数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践 1.原理 2.tf-idf的理论依据及不足 3.实践 tf-idf（英语：term frequency–inverse document frequency）是一种用于信息检索与文本挖掘的常用加权技术。tf-idf是一种统计方法，用以评估一字词对于一个文件集或一个语料库中的其中一份文件的重要程度。字词的重要性随着它在文件中出现的次数成正比增加，但同时会随着它在语料库中出现的频率成反比下降。tf-idf加权的各种形式常被搜索引擎应用，作为文件与用户查询之间相关程度的度量或评级。 1.原理 在一份给定的文件里，词频（term frequency，tf）指的是某一个给定的词语在该文件中出现的频率。这个数字是对词数（term count）的归一化，以防止它偏向长的文件。（同一个词语在长文件里可能会比短文件有更高的词数，而不管该词语重要与否。）对于在某一特定文件里的词语 t i ​ t_i​ ti​​来说，它的重要性可表示为： t f i , j = n i , j ∑ k n k , j tf_{i,j}=\frac{n_{i,j}}{\sum_kn_{k,j}} tfi,j​=∑k​nk,j​ni,j​​ 以上式子中 n i , j n_{i,j} ni,j​是该词在文件 d j d_j dj​中的出现次数，而分母则是在文件 d j d_j dj​中所有字词的出现次数之和。 逆向文件频率（inverse document frequency，idf）是一个词语普遍重要性的度量。某一特定词语的idf，可以由总文件数目除以包含该词语之文件的数目，再将得到的商取以10为底的对数得到： i d f i = l g ∣ D ∣ ∣ { j : t i ϵ d j } ∣ idf_i=lg\frac{|D|}{|\{j:t_i\epsilon d_j\}|} idfi​=lg∣{j:ti​ϵdj​}∣∣D∣​ 其中： ∣ D ∣ |D| ∣D∣:语料库中的文件总数 ∣ { j : t i ϵ d j } ∣ |\{j:t_i\epsilon d_j\}| ∣{j:ti​ϵdj​}∣:包含词语 t i t_i ti​的文件数目， 如果词语不在数据中，就导致分母为零，因此一般情况下使用1 + ∣ { j : t i ϵ d j } ∣ ​ |\{j:t_i\epsilon d_j\}|​ ∣{j:ti​ϵdj​}∣​ 然后 t d i d f i , j = t f i , j ∗ i d f i tdidf_{i,j}=tf_{i,j}*idf_i tdidfi,j​=tfi,j​∗idfi​ 某一特定文件内的高词语频率，以及该词语在整个文件集合中的低文件频率，可以产生出高权重的tf-idf。因此，tf-idf倾向于过滤掉常见的词语，保留重要的词语。 2.tf-idf的理论依据及不足 tf-idf算法是创建在这样一个假设之上的：对区别文档最有意义的词语应该是那些在文档中出现频率高，而在整个文档集合的其他文档中出现频率少的词语，所以如果特征空间坐标系取tf词频作为测度，就可以体现同类文本的特点。另外考虑到单词区别不同类别的能力，tf-idf法认为一个单词出现的文本频数越小，它区别不同类别文本的能力就越大。因此引入了逆文本频度idf的概念，以tf和idf的乘积作为特征空间坐标系的取值测度，并用它完成对权值tf的调整，调整权值的目的在于突出重要单词，抑制次要单词。但是在本质上idf是一种试图抑制噪声的加权，并且单纯地认为文本频率小的单词就越重要，文本频率大的单词就越无用，显然这并不是完全正确的。idf的简单结构并不能有效地反映单词的重要程度和特征词的分布情况，使其无法很好地完成对权值调整的功能，所以tf-idf法的精度并不是很高。 此外，在tf-idf算法中并没有体现出单词的位置信息，对于Web文档而言，权重的计算方法应该体现出HTML的结构特征。特征词在不同的标记符中对文章内容的反映程度不同，其权重的计算方法也应不同。因此应该对于处于网页不同位置的特征词分别赋予不同的系数，然后乘以特征词的词频，以提高文本表示的效果。 3.实践 接上篇 from sklearn.feature_extraction.text import TfidfVectorizer from time import time t0 = time() tfidf = TfidfVectorizer() vectorizer = tfidf.fit(x_train[&#39;word_seg&#39;]) x_train = vectorizer.fit_transform(x_train[&#39;word_seg&#39;]) x_valid = vectorizer.fit_transform(x_valid[&#39;word_seg&#39;]) duration = time() - t0 print(&quot;done in %fs&quot; % (duration)) print(&quot;%d documents, %d features&quot; % x_train.shape) print(&quot;%d documents, %d features&quot; % x_valid.shape) 运行结果： # done in 237.123385s # 92049 documents, 826647 features # 10228 documents, 250299 features 参考文献及补充阅读： 维基百科—tf-idf TF-IDF与余弦相似性的应用（一）：自动提取关键词—阮一峰 TF-IDF与余弦相似性的应用（二）：找出相似文章—阮一峰 TF-IDF与余弦相似性的应用（三）：自动摘要—阮一峰" />
<link rel="canonical" href="https://mlh.app/2019/04/07/727376.html" />
<meta property="og:url" content="https://mlh.app/2019/04/07/727376.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-07T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践 1.原理 2.tf-idf的理论依据及不足 3.实践 tf-idf（英语：term frequency–inverse document frequency）是一种用于信息检索与文本挖掘的常用加权技术。tf-idf是一种统计方法，用以评估一字词对于一个文件集或一个语料库中的其中一份文件的重要程度。字词的重要性随着它在文件中出现的次数成正比增加，但同时会随着它在语料库中出现的频率成反比下降。tf-idf加权的各种形式常被搜索引擎应用，作为文件与用户查询之间相关程度的度量或评级。 1.原理 在一份给定的文件里，词频（term frequency，tf）指的是某一个给定的词语在该文件中出现的频率。这个数字是对词数（term count）的归一化，以防止它偏向长的文件。（同一个词语在长文件里可能会比短文件有更高的词数，而不管该词语重要与否。）对于在某一特定文件里的词语 t i ​ t_i​ ti​​来说，它的重要性可表示为： t f i , j = n i , j ∑ k n k , j tf_{i,j}=\\frac{n_{i,j}}{\\sum_kn_{k,j}} tfi,j​=∑k​nk,j​ni,j​​ 以上式子中 n i , j n_{i,j} ni,j​是该词在文件 d j d_j dj​中的出现次数，而分母则是在文件 d j d_j dj​中所有字词的出现次数之和。 逆向文件频率（inverse document frequency，idf）是一个词语普遍重要性的度量。某一特定词语的idf，可以由总文件数目除以包含该词语之文件的数目，再将得到的商取以10为底的对数得到： i d f i = l g ∣ D ∣ ∣ { j : t i ϵ d j } ∣ idf_i=lg\\frac{|D|}{|\\{j:t_i\\epsilon d_j\\}|} idfi​=lg∣{j:ti​ϵdj​}∣∣D∣​ 其中： ∣ D ∣ |D| ∣D∣:语料库中的文件总数 ∣ { j : t i ϵ d j } ∣ |\\{j:t_i\\epsilon d_j\\}| ∣{j:ti​ϵdj​}∣:包含词语 t i t_i ti​的文件数目， 如果词语不在数据中，就导致分母为零，因此一般情况下使用1 + ∣ { j : t i ϵ d j } ∣ ​ |\\{j:t_i\\epsilon d_j\\}|​ ∣{j:ti​ϵdj​}∣​ 然后 t d i d f i , j = t f i , j ∗ i d f i tdidf_{i,j}=tf_{i,j}*idf_i tdidfi,j​=tfi,j​∗idfi​ 某一特定文件内的高词语频率，以及该词语在整个文件集合中的低文件频率，可以产生出高权重的tf-idf。因此，tf-idf倾向于过滤掉常见的词语，保留重要的词语。 2.tf-idf的理论依据及不足 tf-idf算法是创建在这样一个假设之上的：对区别文档最有意义的词语应该是那些在文档中出现频率高，而在整个文档集合的其他文档中出现频率少的词语，所以如果特征空间坐标系取tf词频作为测度，就可以体现同类文本的特点。另外考虑到单词区别不同类别的能力，tf-idf法认为一个单词出现的文本频数越小，它区别不同类别文本的能力就越大。因此引入了逆文本频度idf的概念，以tf和idf的乘积作为特征空间坐标系的取值测度，并用它完成对权值tf的调整，调整权值的目的在于突出重要单词，抑制次要单词。但是在本质上idf是一种试图抑制噪声的加权，并且单纯地认为文本频率小的单词就越重要，文本频率大的单词就越无用，显然这并不是完全正确的。idf的简单结构并不能有效地反映单词的重要程度和特征词的分布情况，使其无法很好地完成对权值调整的功能，所以tf-idf法的精度并不是很高。 此外，在tf-idf算法中并没有体现出单词的位置信息，对于Web文档而言，权重的计算方法应该体现出HTML的结构特征。特征词在不同的标记符中对文章内容的反映程度不同，其权重的计算方法也应不同。因此应该对于处于网页不同位置的特征词分别赋予不同的系数，然后乘以特征词的词频，以提高文本表示的效果。 3.实践 接上篇 from sklearn.feature_extraction.text import TfidfVectorizer from time import time t0 = time() tfidf = TfidfVectorizer() vectorizer = tfidf.fit(x_train[&#39;word_seg&#39;]) x_train = vectorizer.fit_transform(x_train[&#39;word_seg&#39;]) x_valid = vectorizer.fit_transform(x_valid[&#39;word_seg&#39;]) duration = time() - t0 print(&quot;done in %fs&quot; % (duration)) print(&quot;%d documents, %d features&quot; % x_train.shape) print(&quot;%d documents, %d features&quot; % x_valid.shape) 运行结果： # done in 237.123385s # 92049 documents, 826647 features # 10228 documents, 250299 features 参考文献及补充阅读： 维基百科—tf-idf TF-IDF与余弦相似性的应用（一）：自动提取关键词—阮一峰 TF-IDF与余弦相似性的应用（二）：找出相似文章—阮一峰 TF-IDF与余弦相似性的应用（三）：自动摘要—阮一峰","@type":"BlogPosting","url":"https://mlh.app/2019/04/07/727376.html","headline":"数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践","dateModified":"2019-04-07T00:00:00+08:00","datePublished":"2019-04-07T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/04/07/727376.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-tomorrow-night-eighties"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p></p>
  <div class="toc">
   <h3>数据竞赛-“达观杯”文本智能处理-Day2：TF-IDF实践</h3>
   <ul>
    <li><a href="#1_4" rel="nofollow">1.原理</a></li>
    <li><a href="#2tfidf_29" rel="nofollow">2.tf-idf的理论依据及不足</a></li>
    <li><a href="#3_35" rel="nofollow">3.实践</a></li>
   </ul>
  </div>
  <p></p> 
  <p><strong>tf-idf</strong>（英语：<strong>t</strong>erm <strong>f</strong>requency–<strong>i</strong>nverse <strong>d</strong>ocument <strong>f</strong>requency）是一种用于<a href="https://zh.wikipedia.org/wiki/%E8%B3%87%E8%A8%8A%E6%AA%A2%E7%B4%A2" rel="nofollow">信息检索</a>与<a href="https://zh.wikipedia.org/wiki/%E6%96%87%E6%9C%AC%E6%8C%96%E6%8E%98" rel="nofollow">文本挖掘</a>的常用加权技术。tf-idf是一种统计方法，用以评估一字词对于一个文件集或一个<a href="https://zh.wikipedia.org/wiki/%E8%AA%9E%E6%96%99%E5%BA%AB" rel="nofollow">语料库</a>中的其中一份<a href="https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6" rel="nofollow">文件</a>的重要程度。字词的重要性随着它在文件中出现的次数成<a href="https://zh.wikipedia.org/wiki/%E6%AD%A3%E6%AF%94" rel="nofollow">正比</a>增加，但同时会随着它在语料库中出现的频率成反比下降。tf-idf加权的各种形式常被<a href="https://zh.wikipedia.org/wiki/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E" rel="nofollow">搜索引擎</a>应用，作为文件与用户查询之间相关程度的度量或评级。</p> 
  <h1><a id="1_4"></a>1.原理</h1> 
  <p>在一份给定的文件里，<strong>词频</strong>（term frequency，tf）指的是某一个给定的词语在该文件中出现的频率。这个数字是对<strong>词数</strong>（term count）的归一化，以防止它偏向长的文件。（同一个词语在长文件里可能会比短文件有更高的词数，而不管该词语重要与否。）对于在某一特定文件里的词语<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           t
          </mi>
          <mi>
           i
          </mi>
         </msub>
         <mi mathvariant="normal">
          ​
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         t_i​
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord">​</span></span></span></span></span>来说，它的重要性可表示为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           t
          </mi>
          <msub>
           <mi>
            f
           </mi>
           <mrow>
            <mi>
             i
            </mi>
            <mo separator="true">
             ,
            </mo>
            <mi>
             j
            </mi>
           </mrow>
          </msub>
          <mo>
           =
          </mo>
          <mfrac>
           <msub>
            <mi>
             n
            </mi>
            <mrow>
             <mi>
              i
             </mi>
             <mo separator="true">
              ,
             </mo>
             <mi>
              j
             </mi>
            </mrow>
           </msub>
           <mrow>
            <munder>
             <mo>
              ∑
             </mo>
             <mi>
              k
             </mi>
            </munder>
            <msub>
             <mi>
              n
             </mi>
             <mrow>
              <mi>
               k
              </mi>
              <mo separator="true">
               ,
              </mo>
              <mi>
               j
              </mi>
             </mrow>
            </msub>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
           tf_{i,j}=\frac{n_{i,j}}{\sum_kn_{k,j}} 
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord mathit">t</span><span class="mord"><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.09327em; vertical-align: -0.98571em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10756em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.186398em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29971em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03148em;">k</span><span class="mpunct mtight">,</span><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.98571em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 以上式子中<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           n
          </mi>
          <mrow>
           <mi>
            i
           </mi>
           <mo separator="true">
            ,
           </mo>
           <mi>
            j
           </mi>
          </mrow>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         n_{i,j}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.716668em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>是该词在文件<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           d
          </mi>
          <mi>
           j
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         d_j
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>中的出现次数，而分母则是在文件<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           d
          </mi>
          <mi>
           j
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         d_j
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>中所有字词的出现次数之和。</p> 
  <p><strong>逆向文件频率</strong>（inverse document frequency，idf）是一个词语普遍重要性的度量。某一特定词语的idf，可以由总文件数目除以包含该词语之文件的数目，再将得到的商取以10为底的<a href="https://zh.wikipedia.org/wiki/%E5%B0%8D%E6%95%B8" rel="nofollow">对数</a>得到：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           i
          </mi>
          <mi>
           d
          </mi>
          <msub>
           <mi>
            f
           </mi>
           <mi>
            i
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mi>
           l
          </mi>
          <mi>
           g
          </mi>
          <mfrac>
           <mrow>
            <mi mathvariant="normal">
             ∣
            </mi>
            <mi>
             D
            </mi>
            <mi mathvariant="normal">
             ∣
            </mi>
           </mrow>
           <mrow>
            <mi mathvariant="normal">
             ∣
            </mi>
            <mo>
             {
            </mo>
            <mi>
             j
            </mi>
            <mo>
             :
            </mo>
            <msub>
             <mi>
              t
             </mi>
             <mi>
              i
             </mi>
            </msub>
            <mi>
             ϵ
            </mi>
            <msub>
             <mi>
              d
             </mi>
             <mi>
              j
             </mi>
            </msub>
            <mo>
             }
            </mo>
            <mi mathvariant="normal">
             ∣
            </mi>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
           idf_i=lg\frac{|D|}{|\{j:t_i\epsilon d_j\}|} 
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mord"><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.39911em; vertical-align: -0.972108em;"></span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">∣</span><span class="mopen">{</span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">ϵ</span><span class="mord"><span class="mord mathit">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">}</span><span class="mord">∣</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord">∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.972108em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
  <p>其中：</p> 
  <ul> 
   <li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi mathvariant="normal">
           ∣
          </mi>
          <mi>
           D
          </mi>
          <mi mathvariant="normal">
           ∣
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          |D|
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">∣</span><span class="mord mathit" style="margin-right: 0.02778em;">D</span><span class="mord">∣</span></span></span></span></span>:语料库中的文件总数</li> 
   <li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi mathvariant="normal">
           ∣
          </mi>
          <mo>
           {
          </mo>
          <mi>
           j
          </mi>
          <mo>
           :
          </mo>
          <msub>
           <mi>
            t
           </mi>
           <mi>
            i
           </mi>
          </msub>
          <mi>
           ϵ
          </mi>
          <msub>
           <mi>
            d
           </mi>
           <mi>
            j
           </mi>
          </msub>
          <mo>
           }
          </mo>
          <mi mathvariant="normal">
           ∣
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          |\{j:t_i\epsilon d_j\}|
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">∣</span><span class="mopen">{</span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">ϵ</span><span class="mord"><span class="mord mathit">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">}</span><span class="mord">∣</span></span></span></span></span>:包含词语<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            t
           </mi>
           <mi>
            i
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          t_i
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的文件数目， 如果词语不在数据中，就导致分母为零，因此一般情况下使用1 + <span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi mathvariant="normal">
           ∣
          </mi>
          <mo>
           {
          </mo>
          <mi>
           j
          </mi>
          <mo>
           :
          </mo>
          <msub>
           <mi>
            t
           </mi>
           <mi>
            i
           </mi>
          </msub>
          <mi>
           ϵ
          </mi>
          <msub>
           <mi>
            d
           </mi>
           <mi>
            j
           </mi>
          </msub>
          <mo>
           }
          </mo>
          <mi mathvariant="normal">
           ∣
          </mi>
          <mi mathvariant="normal">
           ​
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          |\{j:t_i\epsilon d_j\}|​
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">∣</span><span class="mopen">{</span><span class="mord mathit" style="margin-right: 0.05724em;">j</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">ϵ</span><span class="mord"><span class="mord mathit">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">}</span><span class="mord">∣</span><span class="mord">​</span></span></span></span></span></li> 
  </ul> 
  <p>然后<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           t
          </mi>
          <mi>
           d
          </mi>
          <mi>
           i
          </mi>
          <mi>
           d
          </mi>
          <msub>
           <mi>
            f
           </mi>
           <mrow>
            <mi>
             i
            </mi>
            <mo separator="true">
             ,
            </mo>
            <mi>
             j
            </mi>
           </mrow>
          </msub>
          <mo>
           =
          </mo>
          <mi>
           t
          </mi>
          <msub>
           <mi>
            f
           </mi>
           <mrow>
            <mi>
             i
            </mi>
            <mo separator="true">
             ,
            </mo>
            <mi>
             j
            </mi>
           </mrow>
          </msub>
          <mo>
           ∗
          </mo>
          <mi>
           i
          </mi>
          <mi>
           d
          </mi>
          <msub>
           <mi>
            f
           </mi>
           <mi>
            i
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
           tdidf_{i,j}=tf_{i,j}*idf_i 
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord mathit">t</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mord"><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.980548em; vertical-align: -0.286108em;"></span><span class="mord mathit">t</span><span class="mord"><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathit mtight" style="margin-right: 0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mord"><span class="mord mathit" style="margin-right: 0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.10764em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p> 
  <p>某一特定文件内的高词语频率，以及该词语在整个文件集合中的低文件频率，可以产生出高权重的tf-idf。因此，tf-idf倾向于过滤掉常见的词语，保留重要的词语。</p> 
  <h1><a id="2tfidf_29"></a>2.tf-idf的理论依据及不足</h1> 
  <p>tf-idf算法是创建在这样一个假设之上的：对区别文档最有意义的词语应该是那些在文档中出现频率高，而在整个文档集合的其他文档中出现频率少的词语，所以如果特征空间坐标系取tf词频作为测度，就可以体现同类文本的特点。另外考虑到单词区别不同类别的能力，tf-idf法认为一个单词出现的文本频数越小，它区别不同类别文本的能力就越大。因此引入了逆文本频度idf的概念，以tf和idf的乘积作为特征空间坐标系的取值测度，并用它完成对权值tf的调整，调整权值的目的在于突出重要单词，抑制次要单词。但是在本质上idf是一种试图抑制噪声的加权，并且单纯地认为文本频率小的单词就越重要，文本频率大的单词就越无用，显然这并不是完全正确的。idf的简单结构并不能有效地反映单词的重要程度和特征词的分布情况，使其无法很好地完成对权值调整的功能，所以tf-idf法的精度并不是很高。</p> 
  <p>此外，在tf-idf算法中并没有体现出单词的位置信息，对于Web文档而言，权重的计算方法应该体现出HTML的结构特征。特征词在不同的标记符中对文章内容的反映程度不同，其权重的计算方法也应不同。因此应该对于处于网页不同位置的特征词分别赋予不同的系数，然后乘以特征词的词频，以提高文本表示的效果。</p> 
  <h1><a id="3_35"></a>3.实践</h1> 
  <p>接<a href="https://blog.csdn.net/hsk6543210/article/details/89046146" rel="nofollow">上篇</a></p> 
  <pre><code class="prism language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_extraction<span class="token punctuation">.</span>text <span class="token keyword">import</span> TfidfVectorizer
<span class="token keyword">from</span> time <span class="token keyword">import</span> time

t0 <span class="token operator">=</span> time<span class="token punctuation">(</span><span class="token punctuation">)</span>
tfidf <span class="token operator">=</span> TfidfVectorizer<span class="token punctuation">(</span><span class="token punctuation">)</span>
vectorizer <span class="token operator">=</span> tfidf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x_train<span class="token punctuation">[</span><span class="token string">'word_seg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x_train <span class="token operator">=</span> vectorizer<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>x_train<span class="token punctuation">[</span><span class="token string">'word_seg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x_valid <span class="token operator">=</span> vectorizer<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>x_valid<span class="token punctuation">[</span><span class="token string">'word_seg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
duration <span class="token operator">=</span> time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t0
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"done in %fs"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>duration<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d documents, %d features"</span> <span class="token operator">%</span> x_train<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d documents, %d features"</span> <span class="token operator">%</span> x_valid<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
</code></pre> 
  <p>运行结果：</p> 
  <pre><code class="prism language-python"><span class="token comment"># done in 237.123385s</span>
<span class="token comment"># 92049 documents, 826647 features</span>
<span class="token comment"># 10228 documents, 250299 features</span>
</code></pre> 
  <p>参考文献及补充阅读：</p> 
  <ol> 
   <li><a href="https://zh.wikipedia.org/wiki/Tf-idf" rel="nofollow">维基百科—tf-idf</a></li> 
   <li><a href="http://www.ruanyifeng.com/blog/2013/03/tf-idf.html" rel="nofollow">TF-IDF与余弦相似性的应用（一）：自动提取关键词—阮一峰</a></li> 
   <li><a href="http://www.ruanyifeng.com/blog/2013/03/cosine_similarity.html" rel="nofollow">TF-IDF与余弦相似性的应用（二）：找出相似文章—阮一峰</a></li> 
   <li><a href="http://www.ruanyifeng.com/blog/2013/03/automatic_summarization.html" rel="nofollow">TF-IDF与余弦相似性的应用（三）：自动摘要—阮一峰</a></li> 
  </ol> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
