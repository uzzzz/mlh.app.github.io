<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>基于CentOS 7的Hadoop-2.7.7集群搭建手册 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="基于CentOS 7的Hadoop-2.7.7集群搭建手册" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="文章目录 1 基于 VMware workstations 的CentOS7安装 1.1 安装虚拟机 1.2 安装CentOS7操作系统 2 Linux系统配置 2.1 上传安装包 2.2 配置时钟同步 2.2.1 查看时间 2.2.2 时间不一致的解决办法 2.3 配置主机名 2.3.1 命令设置主机名永久有效 2.3.2 配置文件 2.4 关闭防火墙 2.4.1 关闭防火墙 2.4.2 禁止firewall开机启动 2.4.3 查看状态 2.5 配置网络 2.6 配置hosts 2.7 安装jdk 2.7.1 新建目录 2.7.2 解压安装包 2.7.3 配置环境变量 2.7.4 测试 2.8 免密钥登陆配置 2.8.1 master节点 2.8.2 slave节点 2.8.3 验证免密钥登录 3 hadoop 配置部署 3.1 解压Hadoop安装包 3.2 修改配置文件 3.2.1 hadoop-env.sh 3.2.2 yarn-env.sh 3.2.3 core-site.xml 3.2.4 hdfs-site.xml 3.2.5 yarn-site.xml 3.2.6 marpred-site.xml 3.2.7 slaves文件 3.3 复制主从点 4 启动Hadoop集群 4.1 配置环境变量 4.2 格式化文件系统 4.4 验证Hadoop集群是否成功 4.4.1 jps 4.4.2 通过web页面 4.4.3 Pi 1 基于 VMware workstations 的CentOS7安装 1.1 安装虚拟机 打开VMware，文件-&gt;新建虚拟机，出现如下界面， 选择“自定义（高级）”选项，下一步 此步骤默认，下一步继续： 在出现下面界面，选中“稍后安装操作系统”选项，下一步继续： 在出现如下界面，客户机操作系统选择“Linux”，版本选择“CentOS 64位”，下一步继续： 出现如下界面，输入自定义虚拟机名称，这里是“node1”，指定虚拟机位置，这里是“E:\VirtualMachines\CentOS 64位\node1“，然后下一步继续： 出现下面界面，选择处理器数量和每个处理器核心数量，这里分别是2和2，下一步继续： 出现如下界面，指定虚拟机占用内存大小，这里是2048M，下一步继续： 8. 出现如下界面，选择网络连接类型，这里选择“使用NAT模式”，各位安装虚拟机过程根据需要自行选择，安装向导中已经针对各种模式进行了比较规范的说明，这里补充说明如下： 1） 使用桥接网络：虚拟机ip与本机在同一网段，本机与虚拟机可以通过ip互通，本机联网状态下虚拟机即可联网，同时虚拟机与本网段内其他主机可以互通，这种模式常用于服务器环境架构中。 2） 使用网络地址转换（NAT）：虚拟机可以联网，与本机互通，与本机网段内其他主机不通。 3） 使用仅主机模式网络：虚拟机不能联网，与本机互通，与本机网段内其他主机不通。下一步继续： 9. 默认，下一步继续： 10. 默认、下一步继续： 11. 默认，下一步继续： 12. 出现下面界面，输入虚拟机磁盘大小，这里设置虚拟机磁盘大小为30G，下一步继续： 13. 默认，下一步继续： 14. 默认、点击“完成”结束虚拟机创建： 退出安装向导后，我们可以在虚拟机管理界面左侧栏看到刚刚创建的虚拟机，右侧栏可以看到虚拟机详细配置信息： 上图界面中点击“编辑虚拟机设置”选项，出现如下界面： 16. 挂载光盘，然后点击确定，按照上述设置后界面如下图所示： 1.2 安装CentOS7操作系统 点击开启虚拟机进入CentOS7操作系统安装过程。 1.虚拟机控制台出现界面，选择Install CentOS Linux 7，点击回车键继续： 2.根据提示点击回车键继续： 3.如下界面默认选择English，点击Continue继续： 3.CentOS7安装配置主要界面如下图所示，根据界面展示，这里对以下3个部分配置进行说明： *Localization和software部分不需要进行任何设置，其中需要注意的是software selection选项，这里本次采用安装含图形界面安装，至于其他组件，待后期使用通过yum安装即可。 4.点击“Installation Destination”，进入如下界面，选中30g硬盘，点击左上角done进行磁盘分区规划： 5.点击“DATE&amp;TIME”配置时间 6. 完成磁盘规划后，点击network &amp; host name选项中修改主机名（默认主机名为 localhost.localdomain），这里 node1修改为master，node2修改为slave，然后点击done完成主机名配置，返回主配置界面： 7.右下角“Begin Installation”按钮已经从原本的灰色变成蓝色，这说明已经可以进行操作系统安装工作了，点击“Begin Installation”进行操作系统安装过程。 8.在用户设置中需要做的是修改root用户密码和创建普通用户。 点击“root password”，设置密码，如果密码安全度不高，比如我这里的密码为“rootroot”，那么可能需要点击2次确定才可以。 分别在node1和node2创建普通用户yao 9.在下图，操作系统安装已经完成，点击reboot重启操作系统。 安装完成，通过普通用户yao登录： 2 Linux系统配置 2.1 上传安装包 1.将jdk-8u144-linux-x64.tar.gz分别上传到两台虚拟机的/soft目录下 sftp&gt; pwd /soft sftp&gt; put E:/study2019/software/jdk-8u144-linux-x64.tar.gz master： slave： 2.将hadoop-2.7.7.tar.gz上传到master： sftp&gt; put E:/study2019/software/hadoop-2.7.7.tar.gz 3.查看是否上传成功 2.2 配置时钟同步 2.2.1 查看时间 2.2.2 时间不一致的解决办法 方法一：通过timedatectl命令修改 使用指南 timedatectl -h 查看当前系统时间 timedatectl status 设置当前时间 timedatectl set-time “YYYY-MM-DD HH:MM:SS” timedatectl set-time “YYYY-MM-DD” timedatectl set-time “HH:MM:SS” 查看所有可用的时区 timedatectl list-timezones timedatectl list-timezones | grep -E “Asia/S.*” 设置时区 timedatectl set-timezone Asia/Shanghai 设置硬件时间 timedatectl set-local-rtc 1 # 默认UTC 启动自动同步时间 timedatectl set-ntp yes # yes或no，1或0 方法二：同步网络时间 1.同步mater [root@master ~]# ntpdate time.nuri.net 13 Mar 17:32:29 ntpdate[26372]: adjust time server 211.115.194.21 offset -0.263924 sec 2.同步slave [root@master ~]# ntpdate time.nuri.net 13 Mar 17:32:41 ntpdate[26372]: adjust time server 211.115.194.21 offset -0.263924 sec 2.3 配置主机名 2.3.1 命令设置主机名永久有效 [root@master ~]# hostnamectl set-hostname master 2.3.2 配置文件 [root@master ~]# vim /etc/hostname 2.4 关闭防火墙 直接关闭防火墙 2.4.1 关闭防火墙 [root@master ~]# systemctl stop firewalld.service 2.4.2 禁止firewall开机启动 [root@master ~]# systemctl disable firewalld.service 2.4.3 查看状态 [root@master ~]# systemctl status firewalld 2.5 配置网络 查看IP 虚拟机名称 Hostname IP Address node1 master 192.168.16.199 node2 slave 192.168.16.200 master： slave： 如果没有显示IP使用setup设置 2.6 配置hosts 注意，要同时在两个节点配置 2.7 安装jdk 2.7.1 新建目录 [root@master ~]# mkdir /usr/java/ 2.7.2 解压安装包 将JDK文件解压，放到/usr/java目录下 [root@master java]# tar zxvf jdk-8u144-linux-x64.tar.gz 解压后： 2.7.3 配置环境变量 切换到普通用户 [root@master ~]# su yao [yao@master root]$ cd ~ [yao@master ~]$ vi .bash_profile PATH=$PATH:$HOME/.local/bin:$HOME/bin export PATH export JAVA_HOME=/usr/java/jdk1.8.0_144 export PATH=$JAVA_HOME/bin:$PATH export HADOOP_HOME=/home/yao/hadoop-2.7.7 export PATH=SHADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH 2.7.4 测试 注意，如果主机名是后配的，以上操作完成以后需要重启： [root@slave java]# reboot 2.8 免密钥登陆配置 切换到普通用户下操作 2.8.1 master节点 1.在终端生成密钥 [yao@master root]$ ssh-keygen -t rsa 2.复制公钥文件 [yao@master .ssh]$ cat ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys 3.修改authorized_keys文件的权限 [yao@master .ssh]$ chmod 600 ~/.ssh/authorized_keys 4.将authorized_keys复制到slave节点 [yao@master .ssh]$ scp ~/.ssh/authorized_keys yao@slave:~/ 2.8.2 slave节点 1.在终端生成密钥 [yao@slave root]$ ssh-keygen -t rsa 2.将authorized_keys文件移动到.ssh目录 [yao@slave ~]$ mv authorized_keys ~/.ssh/ 2.8.3 验证免密钥登录 在master机器上执行 [yao@master .ssh]$ ssh slave 3 hadoop 配置部署 Hadoop配置部署要在普通用户下操作： 3.1 解压Hadoop安装包 [yao@master ~]$ tar -xzvf hadoop-2.7.7.tar.gz 3.2 修改配置文件 3.2.1 hadoop-env.sh [yao@master hadoop]$ vim hadoop-env.sh 3.2.2 yarn-env.sh [yao@master hadoop]$ vim yarn-env.sh 3.2.3 core-site.xml [yao@master hadoop]$ vim core-site.xml 修改内容： &lt;configuration&gt; &lt;property&gt; # 修改项 &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://master:9000&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/home/yao/hadoopdata&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; 3.2.4 hdfs-site.xml [yao@master hadoop]$ vim hdfs-site.xml 修改内容： &lt;configuration&gt; &lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;1&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; 3.2.5 yarn-site.xml [yao@master hadoop]$ vim yarn-site.xml 修改内容： &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt; &lt;value&gt;master:18040&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt; &lt;value&gt;master:18030&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt; &lt;value&gt;master:18025&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt; &lt;value&gt;master:18141&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt; &lt;value&gt;master:18088&lt;/value&gt; &lt;/property&gt; 3.2.6 marpred-site.xml [yao@master hadoop]$ cp mapred-site.xml.template mapred-site.xml [yao@master hadoop]$ vim mapred-site.xml 修改内容 &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt; 3.2.7 slaves文件 [yao@master hadoop]$ vi slaves 3.3 复制主从点 [yao@master hadoop]$ cd ~ [yao@master ~]$ scp -r hadoop-2.7.7 yao@slave:~/ 4 启动Hadoop集群 4.1 配置环境变量 [yao@master ~]$ vi .bash_profile export HADOOP_HOME=/home/yao/Hadoop-2.7.7 export PATH=$HADOOP_HOME/bin:$ HADOOP_HOME/sbin:$PATH [yao@master ~]$ source .bash_profile 4.2 格式化文件系统 [yao@master ~]$ hdfs namenode –format ```![在这里插入图片描述](https://img-blog.csdnimg.cn/20190409185203824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70) *此处有一个报错，原因是配置文件core-site.xml中的一个路径出错了，更改后，需要手动将slave中的core-site.xml也一并修改为正确版。删掉/home/yao/hadoop-2.7.7/logs下的全部文件，因为格式化的过程中，它已经记录日志了。再删掉/home/yao/hadoopdata目录。重新格式化*。 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190409185221516.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70) ### 4.3 启动hadoop集群 ```c [yao@master ~]$ start-all.sh 4.4 验证Hadoop集群是否成功 4.4.1 jps jps的一个打印启动的进程的命令，可以用来测试Hadoop集群是否连接成功。 在master节点上有4个进程： 在slave节点上有3个进程： 4.4.2 通过web页面 1.在地址栏输入master：18088 2.在地址栏输入master：50070 4.4.3 Pi 这是hadoop自带的一个小例子，pi是一个参数，可以用来验证Hadoop集群是否成功。 [yao@master ~]$ hadoop jar hadoop-2.7.7/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.7.jar pi 5 5" />
<meta property="og:description" content="文章目录 1 基于 VMware workstations 的CentOS7安装 1.1 安装虚拟机 1.2 安装CentOS7操作系统 2 Linux系统配置 2.1 上传安装包 2.2 配置时钟同步 2.2.1 查看时间 2.2.2 时间不一致的解决办法 2.3 配置主机名 2.3.1 命令设置主机名永久有效 2.3.2 配置文件 2.4 关闭防火墙 2.4.1 关闭防火墙 2.4.2 禁止firewall开机启动 2.4.3 查看状态 2.5 配置网络 2.6 配置hosts 2.7 安装jdk 2.7.1 新建目录 2.7.2 解压安装包 2.7.3 配置环境变量 2.7.4 测试 2.8 免密钥登陆配置 2.8.1 master节点 2.8.2 slave节点 2.8.3 验证免密钥登录 3 hadoop 配置部署 3.1 解压Hadoop安装包 3.2 修改配置文件 3.2.1 hadoop-env.sh 3.2.2 yarn-env.sh 3.2.3 core-site.xml 3.2.4 hdfs-site.xml 3.2.5 yarn-site.xml 3.2.6 marpred-site.xml 3.2.7 slaves文件 3.3 复制主从点 4 启动Hadoop集群 4.1 配置环境变量 4.2 格式化文件系统 4.4 验证Hadoop集群是否成功 4.4.1 jps 4.4.2 通过web页面 4.4.3 Pi 1 基于 VMware workstations 的CentOS7安装 1.1 安装虚拟机 打开VMware，文件-&gt;新建虚拟机，出现如下界面， 选择“自定义（高级）”选项，下一步 此步骤默认，下一步继续： 在出现下面界面，选中“稍后安装操作系统”选项，下一步继续： 在出现如下界面，客户机操作系统选择“Linux”，版本选择“CentOS 64位”，下一步继续： 出现如下界面，输入自定义虚拟机名称，这里是“node1”，指定虚拟机位置，这里是“E:\VirtualMachines\CentOS 64位\node1“，然后下一步继续： 出现下面界面，选择处理器数量和每个处理器核心数量，这里分别是2和2，下一步继续： 出现如下界面，指定虚拟机占用内存大小，这里是2048M，下一步继续： 8. 出现如下界面，选择网络连接类型，这里选择“使用NAT模式”，各位安装虚拟机过程根据需要自行选择，安装向导中已经针对各种模式进行了比较规范的说明，这里补充说明如下： 1） 使用桥接网络：虚拟机ip与本机在同一网段，本机与虚拟机可以通过ip互通，本机联网状态下虚拟机即可联网，同时虚拟机与本网段内其他主机可以互通，这种模式常用于服务器环境架构中。 2） 使用网络地址转换（NAT）：虚拟机可以联网，与本机互通，与本机网段内其他主机不通。 3） 使用仅主机模式网络：虚拟机不能联网，与本机互通，与本机网段内其他主机不通。下一步继续： 9. 默认，下一步继续： 10. 默认、下一步继续： 11. 默认，下一步继续： 12. 出现下面界面，输入虚拟机磁盘大小，这里设置虚拟机磁盘大小为30G，下一步继续： 13. 默认，下一步继续： 14. 默认、点击“完成”结束虚拟机创建： 退出安装向导后，我们可以在虚拟机管理界面左侧栏看到刚刚创建的虚拟机，右侧栏可以看到虚拟机详细配置信息： 上图界面中点击“编辑虚拟机设置”选项，出现如下界面： 16. 挂载光盘，然后点击确定，按照上述设置后界面如下图所示： 1.2 安装CentOS7操作系统 点击开启虚拟机进入CentOS7操作系统安装过程。 1.虚拟机控制台出现界面，选择Install CentOS Linux 7，点击回车键继续： 2.根据提示点击回车键继续： 3.如下界面默认选择English，点击Continue继续： 3.CentOS7安装配置主要界面如下图所示，根据界面展示，这里对以下3个部分配置进行说明： *Localization和software部分不需要进行任何设置，其中需要注意的是software selection选项，这里本次采用安装含图形界面安装，至于其他组件，待后期使用通过yum安装即可。 4.点击“Installation Destination”，进入如下界面，选中30g硬盘，点击左上角done进行磁盘分区规划： 5.点击“DATE&amp;TIME”配置时间 6. 完成磁盘规划后，点击network &amp; host name选项中修改主机名（默认主机名为 localhost.localdomain），这里 node1修改为master，node2修改为slave，然后点击done完成主机名配置，返回主配置界面： 7.右下角“Begin Installation”按钮已经从原本的灰色变成蓝色，这说明已经可以进行操作系统安装工作了，点击“Begin Installation”进行操作系统安装过程。 8.在用户设置中需要做的是修改root用户密码和创建普通用户。 点击“root password”，设置密码，如果密码安全度不高，比如我这里的密码为“rootroot”，那么可能需要点击2次确定才可以。 分别在node1和node2创建普通用户yao 9.在下图，操作系统安装已经完成，点击reboot重启操作系统。 安装完成，通过普通用户yao登录： 2 Linux系统配置 2.1 上传安装包 1.将jdk-8u144-linux-x64.tar.gz分别上传到两台虚拟机的/soft目录下 sftp&gt; pwd /soft sftp&gt; put E:/study2019/software/jdk-8u144-linux-x64.tar.gz master： slave： 2.将hadoop-2.7.7.tar.gz上传到master： sftp&gt; put E:/study2019/software/hadoop-2.7.7.tar.gz 3.查看是否上传成功 2.2 配置时钟同步 2.2.1 查看时间 2.2.2 时间不一致的解决办法 方法一：通过timedatectl命令修改 使用指南 timedatectl -h 查看当前系统时间 timedatectl status 设置当前时间 timedatectl set-time “YYYY-MM-DD HH:MM:SS” timedatectl set-time “YYYY-MM-DD” timedatectl set-time “HH:MM:SS” 查看所有可用的时区 timedatectl list-timezones timedatectl list-timezones | grep -E “Asia/S.*” 设置时区 timedatectl set-timezone Asia/Shanghai 设置硬件时间 timedatectl set-local-rtc 1 # 默认UTC 启动自动同步时间 timedatectl set-ntp yes # yes或no，1或0 方法二：同步网络时间 1.同步mater [root@master ~]# ntpdate time.nuri.net 13 Mar 17:32:29 ntpdate[26372]: adjust time server 211.115.194.21 offset -0.263924 sec 2.同步slave [root@master ~]# ntpdate time.nuri.net 13 Mar 17:32:41 ntpdate[26372]: adjust time server 211.115.194.21 offset -0.263924 sec 2.3 配置主机名 2.3.1 命令设置主机名永久有效 [root@master ~]# hostnamectl set-hostname master 2.3.2 配置文件 [root@master ~]# vim /etc/hostname 2.4 关闭防火墙 直接关闭防火墙 2.4.1 关闭防火墙 [root@master ~]# systemctl stop firewalld.service 2.4.2 禁止firewall开机启动 [root@master ~]# systemctl disable firewalld.service 2.4.3 查看状态 [root@master ~]# systemctl status firewalld 2.5 配置网络 查看IP 虚拟机名称 Hostname IP Address node1 master 192.168.16.199 node2 slave 192.168.16.200 master： slave： 如果没有显示IP使用setup设置 2.6 配置hosts 注意，要同时在两个节点配置 2.7 安装jdk 2.7.1 新建目录 [root@master ~]# mkdir /usr/java/ 2.7.2 解压安装包 将JDK文件解压，放到/usr/java目录下 [root@master java]# tar zxvf jdk-8u144-linux-x64.tar.gz 解压后： 2.7.3 配置环境变量 切换到普通用户 [root@master ~]# su yao [yao@master root]$ cd ~ [yao@master ~]$ vi .bash_profile PATH=$PATH:$HOME/.local/bin:$HOME/bin export PATH export JAVA_HOME=/usr/java/jdk1.8.0_144 export PATH=$JAVA_HOME/bin:$PATH export HADOOP_HOME=/home/yao/hadoop-2.7.7 export PATH=SHADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH 2.7.4 测试 注意，如果主机名是后配的，以上操作完成以后需要重启： [root@slave java]# reboot 2.8 免密钥登陆配置 切换到普通用户下操作 2.8.1 master节点 1.在终端生成密钥 [yao@master root]$ ssh-keygen -t rsa 2.复制公钥文件 [yao@master .ssh]$ cat ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys 3.修改authorized_keys文件的权限 [yao@master .ssh]$ chmod 600 ~/.ssh/authorized_keys 4.将authorized_keys复制到slave节点 [yao@master .ssh]$ scp ~/.ssh/authorized_keys yao@slave:~/ 2.8.2 slave节点 1.在终端生成密钥 [yao@slave root]$ ssh-keygen -t rsa 2.将authorized_keys文件移动到.ssh目录 [yao@slave ~]$ mv authorized_keys ~/.ssh/ 2.8.3 验证免密钥登录 在master机器上执行 [yao@master .ssh]$ ssh slave 3 hadoop 配置部署 Hadoop配置部署要在普通用户下操作： 3.1 解压Hadoop安装包 [yao@master ~]$ tar -xzvf hadoop-2.7.7.tar.gz 3.2 修改配置文件 3.2.1 hadoop-env.sh [yao@master hadoop]$ vim hadoop-env.sh 3.2.2 yarn-env.sh [yao@master hadoop]$ vim yarn-env.sh 3.2.3 core-site.xml [yao@master hadoop]$ vim core-site.xml 修改内容： &lt;configuration&gt; &lt;property&gt; # 修改项 &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://master:9000&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/home/yao/hadoopdata&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; 3.2.4 hdfs-site.xml [yao@master hadoop]$ vim hdfs-site.xml 修改内容： &lt;configuration&gt; &lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;1&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; 3.2.5 yarn-site.xml [yao@master hadoop]$ vim yarn-site.xml 修改内容： &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt; &lt;value&gt;master:18040&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt; &lt;value&gt;master:18030&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt; &lt;value&gt;master:18025&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt; &lt;value&gt;master:18141&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt; &lt;value&gt;master:18088&lt;/value&gt; &lt;/property&gt; 3.2.6 marpred-site.xml [yao@master hadoop]$ cp mapred-site.xml.template mapred-site.xml [yao@master hadoop]$ vim mapred-site.xml 修改内容 &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt; 3.2.7 slaves文件 [yao@master hadoop]$ vi slaves 3.3 复制主从点 [yao@master hadoop]$ cd ~ [yao@master ~]$ scp -r hadoop-2.7.7 yao@slave:~/ 4 启动Hadoop集群 4.1 配置环境变量 [yao@master ~]$ vi .bash_profile export HADOOP_HOME=/home/yao/Hadoop-2.7.7 export PATH=$HADOOP_HOME/bin:$ HADOOP_HOME/sbin:$PATH [yao@master ~]$ source .bash_profile 4.2 格式化文件系统 [yao@master ~]$ hdfs namenode –format ```![在这里插入图片描述](https://img-blog.csdnimg.cn/20190409185203824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70) *此处有一个报错，原因是配置文件core-site.xml中的一个路径出错了，更改后，需要手动将slave中的core-site.xml也一并修改为正确版。删掉/home/yao/hadoop-2.7.7/logs下的全部文件，因为格式化的过程中，它已经记录日志了。再删掉/home/yao/hadoopdata目录。重新格式化*。 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190409185221516.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70) ### 4.3 启动hadoop集群 ```c [yao@master ~]$ start-all.sh 4.4 验证Hadoop集群是否成功 4.4.1 jps jps的一个打印启动的进程的命令，可以用来测试Hadoop集群是否连接成功。 在master节点上有4个进程： 在slave节点上有3个进程： 4.4.2 通过web页面 1.在地址栏输入master：18088 2.在地址栏输入master：50070 4.4.3 Pi 这是hadoop自带的一个小例子，pi是一个参数，可以用来验证Hadoop集群是否成功。 [yao@master ~]$ hadoop jar hadoop-2.7.7/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.7.jar pi 5 5" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-09T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"文章目录 1 基于 VMware workstations 的CentOS7安装 1.1 安装虚拟机 1.2 安装CentOS7操作系统 2 Linux系统配置 2.1 上传安装包 2.2 配置时钟同步 2.2.1 查看时间 2.2.2 时间不一致的解决办法 2.3 配置主机名 2.3.1 命令设置主机名永久有效 2.3.2 配置文件 2.4 关闭防火墙 2.4.1 关闭防火墙 2.4.2 禁止firewall开机启动 2.4.3 查看状态 2.5 配置网络 2.6 配置hosts 2.7 安装jdk 2.7.1 新建目录 2.7.2 解压安装包 2.7.3 配置环境变量 2.7.4 测试 2.8 免密钥登陆配置 2.8.1 master节点 2.8.2 slave节点 2.8.3 验证免密钥登录 3 hadoop 配置部署 3.1 解压Hadoop安装包 3.2 修改配置文件 3.2.1 hadoop-env.sh 3.2.2 yarn-env.sh 3.2.3 core-site.xml 3.2.4 hdfs-site.xml 3.2.5 yarn-site.xml 3.2.6 marpred-site.xml 3.2.7 slaves文件 3.3 复制主从点 4 启动Hadoop集群 4.1 配置环境变量 4.2 格式化文件系统 4.4 验证Hadoop集群是否成功 4.4.1 jps 4.4.2 通过web页面 4.4.3 Pi 1 基于 VMware workstations 的CentOS7安装 1.1 安装虚拟机 打开VMware，文件-&gt;新建虚拟机，出现如下界面， 选择“自定义（高级）”选项，下一步 此步骤默认，下一步继续： 在出现下面界面，选中“稍后安装操作系统”选项，下一步继续： 在出现如下界面，客户机操作系统选择“Linux”，版本选择“CentOS 64位”，下一步继续： 出现如下界面，输入自定义虚拟机名称，这里是“node1”，指定虚拟机位置，这里是“E:\\VirtualMachines\\CentOS 64位\\node1“，然后下一步继续： 出现下面界面，选择处理器数量和每个处理器核心数量，这里分别是2和2，下一步继续： 出现如下界面，指定虚拟机占用内存大小，这里是2048M，下一步继续： 8. 出现如下界面，选择网络连接类型，这里选择“使用NAT模式”，各位安装虚拟机过程根据需要自行选择，安装向导中已经针对各种模式进行了比较规范的说明，这里补充说明如下： 1） 使用桥接网络：虚拟机ip与本机在同一网段，本机与虚拟机可以通过ip互通，本机联网状态下虚拟机即可联网，同时虚拟机与本网段内其他主机可以互通，这种模式常用于服务器环境架构中。 2） 使用网络地址转换（NAT）：虚拟机可以联网，与本机互通，与本机网段内其他主机不通。 3） 使用仅主机模式网络：虚拟机不能联网，与本机互通，与本机网段内其他主机不通。下一步继续： 9. 默认，下一步继续： 10. 默认、下一步继续： 11. 默认，下一步继续： 12. 出现下面界面，输入虚拟机磁盘大小，这里设置虚拟机磁盘大小为30G，下一步继续： 13. 默认，下一步继续： 14. 默认、点击“完成”结束虚拟机创建： 退出安装向导后，我们可以在虚拟机管理界面左侧栏看到刚刚创建的虚拟机，右侧栏可以看到虚拟机详细配置信息： 上图界面中点击“编辑虚拟机设置”选项，出现如下界面： 16. 挂载光盘，然后点击确定，按照上述设置后界面如下图所示： 1.2 安装CentOS7操作系统 点击开启虚拟机进入CentOS7操作系统安装过程。 1.虚拟机控制台出现界面，选择Install CentOS Linux 7，点击回车键继续： 2.根据提示点击回车键继续： 3.如下界面默认选择English，点击Continue继续： 3.CentOS7安装配置主要界面如下图所示，根据界面展示，这里对以下3个部分配置进行说明： *Localization和software部分不需要进行任何设置，其中需要注意的是software selection选项，这里本次采用安装含图形界面安装，至于其他组件，待后期使用通过yum安装即可。 4.点击“Installation Destination”，进入如下界面，选中30g硬盘，点击左上角done进行磁盘分区规划： 5.点击“DATE&amp;TIME”配置时间 6. 完成磁盘规划后，点击network &amp; host name选项中修改主机名（默认主机名为 localhost.localdomain），这里 node1修改为master，node2修改为slave，然后点击done完成主机名配置，返回主配置界面： 7.右下角“Begin Installation”按钮已经从原本的灰色变成蓝色，这说明已经可以进行操作系统安装工作了，点击“Begin Installation”进行操作系统安装过程。 8.在用户设置中需要做的是修改root用户密码和创建普通用户。 点击“root password”，设置密码，如果密码安全度不高，比如我这里的密码为“rootroot”，那么可能需要点击2次确定才可以。 分别在node1和node2创建普通用户yao 9.在下图，操作系统安装已经完成，点击reboot重启操作系统。 安装完成，通过普通用户yao登录： 2 Linux系统配置 2.1 上传安装包 1.将jdk-8u144-linux-x64.tar.gz分别上传到两台虚拟机的/soft目录下 sftp&gt; pwd /soft sftp&gt; put E:/study2019/software/jdk-8u144-linux-x64.tar.gz master： slave： 2.将hadoop-2.7.7.tar.gz上传到master： sftp&gt; put E:/study2019/software/hadoop-2.7.7.tar.gz 3.查看是否上传成功 2.2 配置时钟同步 2.2.1 查看时间 2.2.2 时间不一致的解决办法 方法一：通过timedatectl命令修改 使用指南 timedatectl -h 查看当前系统时间 timedatectl status 设置当前时间 timedatectl set-time “YYYY-MM-DD HH:MM:SS” timedatectl set-time “YYYY-MM-DD” timedatectl set-time “HH:MM:SS” 查看所有可用的时区 timedatectl list-timezones timedatectl list-timezones | grep -E “Asia/S.*” 设置时区 timedatectl set-timezone Asia/Shanghai 设置硬件时间 timedatectl set-local-rtc 1 # 默认UTC 启动自动同步时间 timedatectl set-ntp yes # yes或no，1或0 方法二：同步网络时间 1.同步mater [root@master ~]# ntpdate time.nuri.net 13 Mar 17:32:29 ntpdate[26372]: adjust time server 211.115.194.21 offset -0.263924 sec 2.同步slave [root@master ~]# ntpdate time.nuri.net 13 Mar 17:32:41 ntpdate[26372]: adjust time server 211.115.194.21 offset -0.263924 sec 2.3 配置主机名 2.3.1 命令设置主机名永久有效 [root@master ~]# hostnamectl set-hostname master 2.3.2 配置文件 [root@master ~]# vim /etc/hostname 2.4 关闭防火墙 直接关闭防火墙 2.4.1 关闭防火墙 [root@master ~]# systemctl stop firewalld.service 2.4.2 禁止firewall开机启动 [root@master ~]# systemctl disable firewalld.service 2.4.3 查看状态 [root@master ~]# systemctl status firewalld 2.5 配置网络 查看IP 虚拟机名称 Hostname IP Address node1 master 192.168.16.199 node2 slave 192.168.16.200 master： slave： 如果没有显示IP使用setup设置 2.6 配置hosts 注意，要同时在两个节点配置 2.7 安装jdk 2.7.1 新建目录 [root@master ~]# mkdir /usr/java/ 2.7.2 解压安装包 将JDK文件解压，放到/usr/java目录下 [root@master java]# tar zxvf jdk-8u144-linux-x64.tar.gz 解压后： 2.7.3 配置环境变量 切换到普通用户 [root@master ~]# su yao [yao@master root]$ cd ~ [yao@master ~]$ vi .bash_profile PATH=$PATH:$HOME/.local/bin:$HOME/bin export PATH export JAVA_HOME=/usr/java/jdk1.8.0_144 export PATH=$JAVA_HOME/bin:$PATH export HADOOP_HOME=/home/yao/hadoop-2.7.7 export PATH=SHADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH 2.7.4 测试 注意，如果主机名是后配的，以上操作完成以后需要重启： [root@slave java]# reboot 2.8 免密钥登陆配置 切换到普通用户下操作 2.8.1 master节点 1.在终端生成密钥 [yao@master root]$ ssh-keygen -t rsa 2.复制公钥文件 [yao@master .ssh]$ cat ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys 3.修改authorized_keys文件的权限 [yao@master .ssh]$ chmod 600 ~/.ssh/authorized_keys 4.将authorized_keys复制到slave节点 [yao@master .ssh]$ scp ~/.ssh/authorized_keys yao@slave:~/ 2.8.2 slave节点 1.在终端生成密钥 [yao@slave root]$ ssh-keygen -t rsa 2.将authorized_keys文件移动到.ssh目录 [yao@slave ~]$ mv authorized_keys ~/.ssh/ 2.8.3 验证免密钥登录 在master机器上执行 [yao@master .ssh]$ ssh slave 3 hadoop 配置部署 Hadoop配置部署要在普通用户下操作： 3.1 解压Hadoop安装包 [yao@master ~]$ tar -xzvf hadoop-2.7.7.tar.gz 3.2 修改配置文件 3.2.1 hadoop-env.sh [yao@master hadoop]$ vim hadoop-env.sh 3.2.2 yarn-env.sh [yao@master hadoop]$ vim yarn-env.sh 3.2.3 core-site.xml [yao@master hadoop]$ vim core-site.xml 修改内容： &lt;configuration&gt; &lt;property&gt; # 修改项 &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://master:9000&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.tmp.dir&lt;/name&gt; &lt;value&gt;/home/yao/hadoopdata&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; 3.2.4 hdfs-site.xml [yao@master hadoop]$ vim hdfs-site.xml 修改内容： &lt;configuration&gt; &lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;1&lt;/value&gt; &lt;/property&gt; &lt;/configuration&gt; 3.2.5 yarn-site.xml [yao@master hadoop]$ vim yarn-site.xml 修改内容： &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt; &lt;value&gt;master:18040&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt; &lt;value&gt;master:18030&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt; &lt;value&gt;master:18025&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt; &lt;value&gt;master:18141&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt; &lt;value&gt;master:18088&lt;/value&gt; &lt;/property&gt; 3.2.6 marpred-site.xml [yao@master hadoop]$ cp mapred-site.xml.template mapred-site.xml [yao@master hadoop]$ vim mapred-site.xml 修改内容 &lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt; &lt;/property&gt; 3.2.7 slaves文件 [yao@master hadoop]$ vi slaves 3.3 复制主从点 [yao@master hadoop]$ cd ~ [yao@master ~]$ scp -r hadoop-2.7.7 yao@slave:~/ 4 启动Hadoop集群 4.1 配置环境变量 [yao@master ~]$ vi .bash_profile export HADOOP_HOME=/home/yao/Hadoop-2.7.7 export PATH=$HADOOP_HOME/bin:$ HADOOP_HOME/sbin:$PATH [yao@master ~]$ source .bash_profile 4.2 格式化文件系统 [yao@master ~]$ hdfs namenode –format ```![在这里插入图片描述](https://img-blog.csdnimg.cn/20190409185203824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70) *此处有一个报错，原因是配置文件core-site.xml中的一个路径出错了，更改后，需要手动将slave中的core-site.xml也一并修改为正确版。删掉/home/yao/hadoop-2.7.7/logs下的全部文件，因为格式化的过程中，它已经记录日志了。再删掉/home/yao/hadoopdata目录。重新格式化*。 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190409185221516.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70) ### 4.3 启动hadoop集群 ```c [yao@master ~]$ start-all.sh 4.4 验证Hadoop集群是否成功 4.4.1 jps jps的一个打印启动的进程的命令，可以用来测试Hadoop集群是否连接成功。 在master节点上有4个进程： 在slave节点上有3个进程： 4.4.2 通过web页面 1.在地址栏输入master：18088 2.在地址栏输入master：50070 4.4.3 Pi 这是hadoop自带的一个小例子，pi是一个参数，可以用来验证Hadoop集群是否成功。 [yao@master ~]$ hadoop jar hadoop-2.7.7/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.7.jar pi 5 5","@type":"BlogPosting","url":"/2019/04/09/728278.html","headline":"基于CentOS 7的Hadoop-2.7.7集群搭建手册","dateModified":"2019-04-09T00:00:00+08:00","datePublished":"2019-04-09T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2019/04/09/728278.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>基于CentOS 7的Hadoop-2.7.7集群搭建手册</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-atom-one-light"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p></p>
  <div class="toc">
   <h3>文章目录</h3>
   <ul>
    <ul>
     <li><a href="#1__VMware_workstations_CentOS7_1" rel="nofollow">1 基于 VMware workstations 的CentOS7安装</a></li>
     <ul>
      <li><a href="#11	_2" rel="nofollow">1.1 安装虚拟机</a></li>
      <li><a href="#12_CentOS7_47" rel="nofollow">1.2 安装CentOS7操作系统</a></li>
     </ul>
     <li><a href="#2_Linux_90" rel="nofollow">2 Linux系统配置</a></li>
     <ul>
      <li><a href="#21__91" rel="nofollow">2.1 上传安装包</a></li>
      <li><a href="#22__112" rel="nofollow">2.2 配置时钟同步</a></li>
      <ul>
       <li><a href="#221__113" rel="nofollow">2.2.1 查看时间</a></li>
       <li><a href="#222__116" rel="nofollow">2.2.2 时间不一致的解决办法</a></li>
      </ul>
      <li><a href="#23__147" rel="nofollow">2.3 配置主机名</a></li>
      <ul>
       <li><a href="#231__148" rel="nofollow">2.3.1 命令设置主机名永久有效</a></li>
       <li><a href="#232__152" rel="nofollow">2.3.2 配置文件</a></li>
      </ul>
      <li><a href="#24__158" rel="nofollow">2.4 关闭防火墙</a></li>
      <ul>
       <li><a href="#241__160" rel="nofollow">2.4.1 关闭防火墙</a></li>
       <li><a href="#242_firewall_164" rel="nofollow">2.4.2 禁止firewall开机启动</a></li>
       <li><a href="#243__168" rel="nofollow">2.4.3 查看状态</a></li>
      </ul>
      <li><a href="#25__175" rel="nofollow">2.5 配置网络</a></li>
      <li><a href="#26_hosts_191" rel="nofollow">2.6 配置hosts</a></li>
      <li><a href="#27_jdk_195" rel="nofollow">2.7 安装jdk</a></li>
      <ul>
       <li><a href="#271__196" rel="nofollow">2.7.1 新建目录</a></li>
       <li><a href="#272	_200" rel="nofollow">2.7.2 解压安装包</a></li>
       <li><a href="#273__208" rel="nofollow">2.7.3 配置环境变量</a></li>
       <li><a href="#274__223" rel="nofollow">2.7.4 测试</a></li>
      </ul>
      <li><a href="#28__231" rel="nofollow">2.8 免密钥登陆配置</a></li>
      <ul>
       <li><a href="#281_master_233" rel="nofollow">2.8.1 master节点</a></li>
       <li><a href="#282_slave_253" rel="nofollow">2.8.2 slave节点</a></li>
       <li><a href="#283__263" rel="nofollow">2.8.3 验证免密钥登录</a></li>
      </ul>
     </ul>
     <li><a href="#3_hadoop__269" rel="nofollow">3 hadoop 配置部署</a></li>
     <ul>
      <li><a href="#31_Hadoop_271" rel="nofollow">3.1 解压Hadoop安装包</a></li>
      <li><a href="#32__276" rel="nofollow">3.2 修改配置文件</a></li>
      <ul>
       <li><a href="#321_hadoopenvsh_278" rel="nofollow">3.2.1 hadoop-env.sh</a></li>
       <li><a href="#322_yarnenvsh_283" rel="nofollow">3.2.2 yarn-env.sh</a></li>
       <li><a href="#323_coresitexml_288" rel="nofollow">3.2.3 core-site.xml</a></li>
       <li><a href="#324_hdfssitexml_305" rel="nofollow">3.2.4 hdfs-site.xml</a></li>
       <li><a href="#325_yarnsitexml_318" rel="nofollow">3.2.5 yarn-site.xml</a></li>
       <li><a href="#326_marpredsitexml_349" rel="nofollow">3.2.6 marpred-site.xml</a></li>
       <li><a href="#327_slaves_361" rel="nofollow">3.2.7 slaves文件</a></li>
      </ul>
      <li><a href="#33	_365" rel="nofollow">3.3 复制主从点</a></li>
     </ul>
     <li><a href="#4_Hadoop_370" rel="nofollow">4 启动Hadoop集群</a></li>
     <ul>
      <li><a href="#41__371" rel="nofollow">4.1 配置环境变量</a></li>
      <li><a href="#42__381" rel="nofollow">4.2 格式化文件系统</a></li>
      <li><a href="#44_Hadoop_393" rel="nofollow">4.4 验证Hadoop集群是否成功</a></li>
      <ul>
       <li><a href="#441_jps_394" rel="nofollow">4.4.1 jps</a></li>
       <li><a href="#442_web_400" rel="nofollow">4.4.2 通过web页面</a></li>
       <li><a href="#443_Pi_406" rel="nofollow">4.4.3 Pi</a></li>
      </ul>
     </ul>
    </ul>
   </ul>
  </div>
  <p></p> 
  <h2><a id="1__VMware_workstations_CentOS7_1"></a>1 基于 VMware workstations 的CentOS7安装</h2> 
  <h3><a id="11	_2"></a>1.1 安装虚拟机</h3> 
  <ol> 
   <li>打开VMware，文件-&gt;新建虚拟机，出现如下界面，<br> 选择“自定义（高级）”选项，下一步<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183222850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
   <li>此步骤默认，下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183231279.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
   <li>在出现下面界面，选中“稍后安装操作系统”选项，下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183413258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
   <li>在出现如下界面，客户机操作系统选择“Linux”，版本选择“CentOS 64位”，下一步继续：</li> 
  </ol> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183432665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <ol start="5"> 
   <li>出现如下界面，输入自定义虚拟机名称，这里是“node1”，指定虚拟机位置，这里是“E:\VirtualMachines\CentOS 64位\node1“，然后下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183445624.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
   <li>出现下面界面，选择处理器数量和每个处理器核心数量，这里分别是2和2，下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183501652.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li> 
   <li>出现如下界面，指定虚拟机占用内存大小，这里是2048M，下一步继续：</li> 
  </ol> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183516291.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 8. 出现如下界面，选择网络连接类型，这里选择“使用NAT模式”，各位安装虚拟机过程根据需要自行选择，安装向导中已经针对各种模式进行了比较规范的说明，这里补充说明如下：<br> 1） 使用桥接网络：虚拟机ip与本机在同一网段，本机与虚拟机可以通过ip互通，本机联网状态下虚拟机即可联网，同时虚拟机与本网段内其他主机可以互通，这种模式常用于服务器环境架构中。<br> 2） 使用网络地址转换（NAT）：虚拟机可以联网，与本机互通，与本机网段内其他主机不通。<br> 3） 使用仅主机模式网络：虚拟机不能联网，与本机互通，与本机网段内其他主机不通。下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183528983.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 9. 默认，下一步继续：</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183536856.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 10. 默认、下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183605325.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 11. 默认，下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183610372.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 12. 出现下面界面，输入虚拟机磁盘大小，这里设置虚拟机磁盘大小为30G，下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/201904091836162.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 13. 默认，下一步继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183619634.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 14. 默认、点击“完成”结束虚拟机创建：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183623962.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 退出安装向导后，我们可以在虚拟机管理界面左侧栏看到刚刚创建的虚拟机，右侧栏可以看到虚拟机详细配置信息：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183628615.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <ol start="15"> 
   <li>上图界面中点击“编辑虚拟机设置”选项，出现如下界面：</li> 
  </ol> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183633357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 16. 挂载光盘，然后点击确定，按照上述设置后界面如下图所示：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019040918363831.png" alt="在这里插入图片描述"></p> 
  <h3><a id="12_CentOS7_47"></a>1.2 安装CentOS7操作系统</h3> 
  <p>点击开启虚拟机进入CentOS7操作系统安装过程。<br> 1.虚拟机控制台出现界面，选择Install CentOS Linux 7，点击回车键继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183738465.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <p>2.根据提示点击回车键继续：</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183742274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 3.如下界面默认选择English，点击Continue继续：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183746862.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <p>3.CentOS7安装配置主要界面如下图所示，根据界面展示，这里对以下3个部分配置进行说明：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183753621.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <p>*Localization和software部分不需要进行任何设置，其中需要注意的是software selection选项，这里本次采用安装含图形界面安装，至于其他组件，待后期使用通过yum安装即可。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183758949.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <p>4.点击“Installation Destination”，进入如下界面，选中30g硬盘，点击左上角done进行磁盘分区规划：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183803463.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 5.点击“DATE&amp;TIME”配置时间<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019040918380889.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 6. 完成磁盘规划后，点击network &amp; host name选项中修改主机名（默认主机名为 localhost.localdomain），这里 node1修改为master，node2修改为slave，然后点击done完成主机名配置，返回主配置界面：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183811949.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183825433.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 7.右下角“Begin Installation”按钮已经从原本的灰色变成蓝色，这说明已经可以进行操作系统安装工作了，点击“Begin Installation”进行操作系统安装过程。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183829288.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 8.在用户设置中需要做的是修改root用户密码和创建普通用户。</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183833532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 点击“root password”，设置密码，如果密码安全度不高，比如我这里的密码为“rootroot”，那么可能需要点击2次确定才可以。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183836423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 分别在node1和node2创建普通用户yao<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183840147.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019040918384322.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 9.在下图，操作系统安装已经完成，点击reboot重启操作系统。<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183847160.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <p>安装完成，通过普通用户yao登录：</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/201904091838504.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183853878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183858597.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h2><a id="2_Linux_90"></a>2 Linux系统配置</h2> 
  <h3><a id="21__91"></a>2.1 上传安装包</h3> 
  <p>1.将jdk-8u144-linux-x64.tar.gz分别上传到两台虚拟机的/soft目录下</p> 
  <pre><code class="prism language-c">sftp<span class="token operator">&gt;</span> pwd
<span class="token operator">/</span>soft
sftp<span class="token operator">&gt;</span> put E<span class="token punctuation">:</span><span class="token operator">/</span>study2019<span class="token operator">/</span>software<span class="token operator">/</span>jdk<span class="token operator">-</span><span class="token number">8u</span><span class="token number">144</span><span class="token operator">-</span>linux<span class="token operator">-</span>x64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre> 
  <p>master：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019040918392083.png" alt="在这里插入图片描述"><br> slave：</p> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183924607.png" alt="在这里插入图片描述"><br> 2.将hadoop-2.7.7.tar.gz上传到master：</p> 
  <pre><code class="prism language-c">sftp<span class="token operator">&gt;</span> put E<span class="token punctuation">:</span><span class="token operator">/</span>study2019<span class="token operator">/</span>software<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183935392.png" alt="在这里插入图片描述"></p> 
  <p>3.查看是否上传成功<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183939555.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183942605.png" alt="在这里插入图片描述"></p> 
  <h3><a id="22__112"></a>2.2 配置时钟同步</h3> 
  <h4><a id="221__113"></a>2.2.1 查看时间</h4> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183954300.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409183957588.png" alt="在这里插入图片描述"></p> 
  <h4><a id="222__116"></a>2.2.2 时间不一致的解决办法</h4> 
  <ul> 
   <li> <p>方法一：通过timedatectl命令修改 <br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184007608.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184010667.png" alt="在这里插入图片描述"><br> 使用指南 timedatectl -h<br> 查看当前系统时间 timedatectl status<br> 设置当前时间 <br> timedatectl set-time “YYYY-MM-DD HH:MM:SS”<br> timedatectl set-time “YYYY-MM-DD”<br> timedatectl set-time “HH:MM:SS”<br> 查看所有可用的时区<br> timedatectl list-timezones<br> timedatectl list-timezones | grep -E “Asia/S.*”<br> 设置时区<br> timedatectl set-timezone Asia/Shanghai<br> 设置硬件时间<br> timedatectl set-local-rtc 1 # 默认UTC<br> 启动自动同步时间<br> timedatectl set-ntp yes # yes或no，1或0</p> </li> 
   <li> <p>方法二：同步网络时间<br> 1.同步mater</p> </li> 
  </ul> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># ntpdate time<span class="token punctuation">.</span>nuri<span class="token punctuation">.</span>net
<span class="token number">13</span> Mar <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">32</span><span class="token punctuation">:</span><span class="token number">29</span> ntpdate<span class="token punctuation">[</span><span class="token number">26372</span><span class="token punctuation">]</span><span class="token punctuation">:</span> adjust time server <span class="token number">211.115</span><span class="token number">.194</span><span class="token number">.21</span> offset <span class="token operator">-</span><span class="token number">0.263924</span> sec
</code></pre> 
  <p>2.同步slave</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># ntpdate time<span class="token punctuation">.</span>nuri<span class="token punctuation">.</span>net
<span class="token number">13</span> Mar <span class="token number">17</span><span class="token punctuation">:</span><span class="token number">32</span><span class="token punctuation">:</span><span class="token number">41</span> ntpdate<span class="token punctuation">[</span><span class="token number">26372</span><span class="token punctuation">]</span><span class="token punctuation">:</span> adjust time server <span class="token number">211.115</span><span class="token number">.194</span><span class="token number">.21</span> offset <span class="token operator">-</span><span class="token number">0.263924</span> sec
</code></pre> 
  <h3><a id="23__147"></a>2.3 配置主机名</h3> 
  <h4><a id="231__148"></a>2.3.1 命令设置主机名永久有效</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># hostnamectl set<span class="token operator">-</span>hostname master
</code></pre> 
  <h4><a id="232__152"></a>2.3.2 配置文件</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># vim <span class="token operator">/</span>etc<span class="token operator">/</span>hostname
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184108805.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184115246.png" alt="在这里插入图片描述"></p> 
  <h3><a id="24__158"></a>2.4 关闭防火墙</h3> 
  <p>直接关闭防火墙</p> 
  <h4><a id="241__160"></a>2.4.1 关闭防火墙</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># systemctl stop firewalld<span class="token punctuation">.</span>service
</code></pre> 
  <h4><a id="242_firewall_164"></a>2.4.2 禁止firewall开机启动</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># systemctl disable firewalld<span class="token punctuation">.</span>service
</code></pre> 
  <h4><a id="243__168"></a>2.4.3 查看状态</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># systemctl status firewalld
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184250655.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184255890.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184305576.png" alt="在这里插入图片描述"></p> 
  <h3><a id="25__175"></a>2.5 配置网络</h3> 
  <ul> 
   <li>查看IP</li> 
  </ul> 
  <table> 
   <thead> 
    <tr> 
     <th>虚拟机名称</th> 
     <th>Hostname</th> 
     <th>IP Address</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td>node1</td> 
     <td>master</td> 
     <td>192.168.16.199</td> 
    </tr> 
    <tr> 
     <td>node2</td> 
     <td>slave</td> 
     <td>192.168.16.200</td> 
    </tr> 
   </tbody> 
  </table>
  <ul> 
   <li>master：</li> 
  </ul> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184342397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> slave：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184525902.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <em>如果没有显示IP使用setup设置</em></p> 
  <h3><a id="26_hosts_191"></a>2.6 配置hosts</h3> 
  <p><em>注意，要同时在两个节点配置</em><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184544195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184548919.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h3><a id="27_jdk_195"></a>2.7 安装jdk</h3> 
  <h4><a id="271__196"></a>2.7.1 新建目录</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># mkdir <span class="token operator">/</span>usr<span class="token operator">/</span>java<span class="token operator">/</span>
</code></pre> 
  <h4><a id="272	_200"></a>2.7.2 解压安装包</h4> 
  <p>将JDK文件解压，放到/usr/java目录下</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master java<span class="token punctuation">]</span># tar zxvf jdk<span class="token operator">-</span><span class="token number">8u</span><span class="token number">144</span><span class="token operator">-</span>linux<span class="token operator">-</span>x64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184617653.png" alt="在这里插入图片描述"><br> 解压后：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184621468.png" alt="在这里插入图片描述"></p> 
  <h4><a id="273__208"></a>2.7.3 配置环境变量</h4> 
  <p><em>切换到普通用户</em></p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span># su yao
<span class="token punctuation">[</span>yao@master root<span class="token punctuation">]</span>$ cd <span class="token operator">~</span>
<span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ vi <span class="token punctuation">.</span>bash_profile
PATH<span class="token operator">=</span>$PATH<span class="token punctuation">:</span>$HOME<span class="token operator">/</span><span class="token punctuation">.</span>local<span class="token operator">/</span>bin<span class="token punctuation">:</span>$HOME<span class="token operator">/</span>bin

export PATH

export JAVA_HOME<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>java<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0</span>_144
export PATH<span class="token operator">=</span>$JAVA_HOME<span class="token operator">/</span>bin<span class="token punctuation">:</span>$PATH
export HADOOP_HOME<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>yao<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span>
export PATH<span class="token operator">=</span>SHADOOP_HOME<span class="token operator">/</span>bin<span class="token punctuation">:</span>$HADOOP_HOME<span class="token operator">/</span>sbin<span class="token punctuation">:</span>$PATH
</code></pre> 
  <h4><a id="274__223"></a>2.7.4 测试</h4> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184644526.png" alt="在这里插入图片描述"><br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184650543.png" alt="在这里插入图片描述"></p> 
  <p><em>注意，如果主机名是后配的，以上操作完成以后需要重启</em>：</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>root@slave java<span class="token punctuation">]</span># reboot
</code></pre> 
  <h3><a id="28__231"></a>2.8 免密钥登陆配置</h3> 
  <p><em>切换到普通用户下操作</em></p> 
  <h4><a id="281_master_233"></a>2.8.1 master节点</h4> 
  <p>1.在终端生成密钥</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master root<span class="token punctuation">]</span>$ ssh<span class="token operator">-</span>keygen <span class="token operator">-</span>t rsa
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184727112.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> 2.复制公钥文件</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token punctuation">.</span>ssh<span class="token punctuation">]</span>$ cat <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>id_rsa<span class="token punctuation">.</span>pub <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys
</code></pre> 
  <p>3.修改authorized_keys文件的权限</p> 
  <pre><code>[yao@master .ssh]$ chmod 600 ~/.ssh/authorized_keys 
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184741285.png" alt="在这里插入图片描述"><br> 4.将authorized_keys复制到slave节点</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token punctuation">.</span>ssh<span class="token punctuation">]</span>$ scp <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys yao@slave<span class="token punctuation">:</span><span class="token operator">~</span><span class="token operator">/</span>
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184750836.png" alt="在这里插入图片描述"></p> 
  <h4><a id="282_slave_253"></a>2.8.2 slave节点</h4> 
  <p>1.在终端生成密钥</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@slave root<span class="token punctuation">]</span>$ ssh<span class="token operator">-</span>keygen <span class="token operator">-</span>t rsa
</code></pre> 
  <p>2.将authorized_keys文件移动到.ssh目录</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@slave <span class="token operator">~</span><span class="token punctuation">]</span>$ mv authorized_keys <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184808936.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h4><a id="283__263"></a>2.8.3 验证免密钥登录</h4> 
  <p>在master机器上执行</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token punctuation">.</span>ssh<span class="token punctuation">]</span>$ ssh slave
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184829792.png" alt="在这里插入图片描述"></p> 
  <h2><a id="3_hadoop__269"></a>3 hadoop 配置部署</h2> 
  <p>Hadoop配置部署要在普通用户下操作：</p> 
  <h3><a id="31_Hadoop_271"></a>3.1 解压Hadoop安装包</h3> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ tar <span class="token operator">-</span>xzvf hadoop<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184847734.png" alt="在这里插入图片描述"></p> 
  <h3><a id="32__276"></a>3.2 修改配置文件</h3> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184900847.png" alt="在这里插入图片描述"></p> 
  <h4><a id="321_hadoopenvsh_278"></a>3.2.1 <a href="http://hadoop-env.sh" rel="nofollow">hadoop-env.sh</a></h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ vim hadoop<span class="token operator">-</span>env<span class="token punctuation">.</span>sh 
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409184915644.png" alt="在这里插入图片描述"></p> 
  <h4><a id="322_yarnenvsh_283"></a>3.2.2 <a href="http://yarn-env.sh" rel="nofollow">yarn-env.sh</a></h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ vim yarn<span class="token operator">-</span>env<span class="token punctuation">.</span>sh 
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/201904091849304.png" alt="在这里插入图片描述"></p> 
  <h4><a id="323_coresitexml_288"></a>3.2.3 core-site.xml</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ vim core<span class="token operator">-</span>site<span class="token punctuation">.</span>xml 
</code></pre> 
  <p>修改内容：</p> 
  <pre><code class="prism language-c"><span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span> 				# 修改项
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs<span class="token punctuation">.</span>defaultFS<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>master<span class="token punctuation">:</span><span class="token number">9000</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hadoop<span class="token punctuation">.</span>tmp<span class="token punctuation">.</span>dir<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator">/</span>home<span class="token operator">/</span>yao<span class="token operator">/</span>hadoopdata<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
  <h4><a id="324_hdfssitexml_305"></a>3.2.4 hdfs-site.xml</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ vim hdfs<span class="token operator">-</span>site<span class="token punctuation">.</span>xml
</code></pre> 
  <p>修改内容：</p> 
  <pre><code class="prism language-c"><span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs<span class="token punctuation">.</span>replication<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
  <h4><a id="325_yarnsitexml_318"></a>3.2.5 yarn-site.xml</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ vim yarn<span class="token operator">-</span>site<span class="token punctuation">.</span>xml 
</code></pre> 
  <p>修改内容：</p> 
  <pre><code class="prism language-c"><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>nodemanager<span class="token punctuation">.</span>aux<span class="token operator">-</span>services<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>mapreduce_shuffle<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token punctuation">:</span><span class="token number">18040</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>scheduler<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token punctuation">:</span><span class="token number">18030</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>resource<span class="token operator">-</span>tracker<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token punctuation">:</span><span class="token number">18025</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token punctuation">:</span><span class="token number">18141</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>webapp<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token punctuation">:</span><span class="token number">18088</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
</code></pre> 
  <h4><a id="326_marpredsitexml_349"></a>3.2.6 marpred-site.xml</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ cp mapred<span class="token operator">-</span>site<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>template mapred<span class="token operator">-</span>site<span class="token punctuation">.</span>xml
<span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ vim mapred<span class="token operator">-</span>site<span class="token punctuation">.</span>xml
</code></pre> 
  <p>修改内容</p> 
  <pre><code class="prism language-c"><span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>name<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>yarn<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
</code></pre> 
  <h4><a id="327_slaves_361"></a>3.2.7 slaves文件</h4> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ vi slaves
</code></pre> 
  <h3><a id="33	_365"></a>3.3 复制主从点</h3> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master hadoop<span class="token punctuation">]</span>$ cd <span class="token operator">~</span> 
<span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ scp <span class="token operator">-</span>r hadoop<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span> yao@slave<span class="token punctuation">:</span><span class="token operator">~</span><span class="token operator">/</span>
</code></pre> 
  <h2><a id="4_Hadoop_370"></a>4 启动Hadoop集群</h2> 
  <h3><a id="41__371"></a>4.1 配置环境变量</h3> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ vi <span class="token punctuation">.</span>bash_profile 
export HADOOP_HOME<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>yao<span class="token operator">/</span>Hadoop<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span>
export PATH<span class="token operator">=</span>$HADOOP_HOME<span class="token operator">/</span>bin<span class="token punctuation">:</span>$ HADOOP_HOME<span class="token operator">/</span>sbin<span class="token punctuation">:</span>$PATH
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409185145673.png" alt="在这里插入图片描述"></p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ source <span class="token punctuation">.</span>bash_profile
</code></pre> 
  <h3><a id="42__381"></a>4.2 格式化文件系统</h3> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ hdfs namenode –format
 ```<span class="token operator">!</span><span class="token punctuation">[</span>在这里插入图片描述<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token operator">-</span>blog<span class="token punctuation">.</span>csdnimg<span class="token punctuation">.</span>cn<span class="token operator">/</span><span class="token number">20190409185203824.</span>png<span class="token operator">?</span>x<span class="token operator">-</span>oss<span class="token operator">-</span>process<span class="token operator">=</span>image<span class="token operator">/</span>watermark<span class="token punctuation">,</span>type_ZmFuZ3poZW5naGVpdGk<span class="token punctuation">,</span>shadow_10<span class="token punctuation">,</span>text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp<span class="token punctuation">,</span>size_16<span class="token punctuation">,</span>color_FFFFFF<span class="token punctuation">,</span>t_70<span class="token punctuation">)</span>
<span class="token operator">*</span>此处有一个报错，原因是配置文件core<span class="token operator">-</span>site<span class="token punctuation">.</span>xml中的一个路径出错了，更改后，需要手动将slave中的core<span class="token operator">-</span>site<span class="token punctuation">.</span>xml也一并修改为正确版。删掉<span class="token operator">/</span>home<span class="token operator">/</span>yao<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span><span class="token operator">/</span>logs下的全部文件，因为格式化的过程中，它已经记录日志了。再删掉<span class="token operator">/</span>home<span class="token operator">/</span>yao<span class="token operator">/</span>hadoopdata目录。重新格式化<span class="token operator">*</span>。
<span class="token operator">!</span><span class="token punctuation">[</span>在这里插入图片描述<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>img<span class="token operator">-</span>blog<span class="token punctuation">.</span>csdnimg<span class="token punctuation">.</span>cn<span class="token operator">/</span><span class="token number">20190409185221516.</span>png<span class="token operator">?</span>x<span class="token operator">-</span>oss<span class="token operator">-</span>process<span class="token operator">=</span>image<span class="token operator">/</span>watermark<span class="token punctuation">,</span>type_ZmFuZ3poZW5naGVpdGk<span class="token punctuation">,</span>shadow_10<span class="token punctuation">,</span>text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp<span class="token punctuation">,</span>size_16<span class="token punctuation">,</span>color_FFFFFF<span class="token punctuation">,</span>t_70<span class="token punctuation">)</span>
 
### <span class="token number">4.3</span> 启动hadoop集群
```c
<span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ start<span class="token operator">-</span>all<span class="token punctuation">.</span>sh
</code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409185237568.png" alt="在这里插入图片描述"></p> 
  <h3><a id="44_Hadoop_393"></a>4.4 验证Hadoop集群是否成功</h3> 
  <h4><a id="441_jps_394"></a>4.4.1 jps</h4> 
  <p>jps的一个打印启动的进程的命令，可以用来测试Hadoop集群是否连接成功。<br> 在master节点上有4个进程：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409185250466.png" alt="在这里插入图片描述"><br> 在slave节点上有3个进程：<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409185253417.png" alt="在这里插入图片描述"></p> 
  <h4><a id="442_web_400"></a>4.4.2 通过web页面</h4> 
  <p>1.在地址栏输入master：18088<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409185303338.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <p>2.在地址栏输入master：50070<br> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190409185307908.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYXl1d2Vp,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h4><a id="443_Pi_406"></a>4.4.3 Pi</h4> 
  <p>这是hadoop自带的一个小例子，pi是一个参数，可以用来验证Hadoop集群是否成功。</p> 
  <pre><code class="prism language-c"><span class="token punctuation">[</span>yao@master <span class="token operator">~</span><span class="token punctuation">]</span>$ hadoop jar hadoop<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span><span class="token operator">/</span>share<span class="token operator">/</span>hadoop<span class="token operator">/</span>mapreduce<span class="token operator">/</span>hadoop<span class="token operator">-</span>mapreduce<span class="token operator">-</span>examples<span class="token operator">-</span><span class="token number">2.7</span><span class="token number">.7</span><span class="token punctuation">.</span>jar pi <span class="token number">5</span> <span class="token number">5</span>
</code></pre> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
