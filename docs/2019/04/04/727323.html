<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>这才是实现分布式锁的正确姿势！ | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="这才是实现分布式锁的正确姿势！" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="都9102年了，你还在手写分布式锁吗？ 经常被问到”如何实现分布式锁”，看来这是大家的一个痛点。 其实Java世界的”半壁江山”——Spring早就提供了分布式锁的实现。早期，分布式锁的相关代码存在于Spring Cloud的子项目Spring Cloud Cluster中，后来被迁到Spring Integration中。 •Spring Cloud Cluster的GitHub：https://github.com/spring-cloud/spring-cloud-cluster[1]&nbsp;，里面有些用例，以及基于ETCD、hazelcast的分布式锁实现值得一看。•Spring Integration的GitHub：https://github.com/spring-projects/spring-integration[2] TIPS 这就是明明&nbsp;Spring Cloud官方[3]&nbsp;说自己实现了&nbsp;Global Locks&nbsp;，但又无法找到任何相关文档的原因——人家早把相关代码搬迁到Spring Integration了。 可能有不少童鞋对Spring Integration不是很熟悉，简单介绍一下——官方说法，这是一个&nbsp;企业集成模式&nbsp;的实现；通俗地说，Spring Integration的定位是一个轻量级的ESB，尽管它做了很多ESB不做的事情。顺便说一下，Spring Cloud Stream的底层也是Spring Integration。 Spring Integration提供的全局锁目前为如下存储提供了实现： •Gemfire[4]•JDBC[5]•Redis[6]•Zookeeper[7] 它们使用相同的API抽象——这正是Spring最擅长的。这意味着，不论使用哪种存储，你的编码体验是一样的，有一天想更换实现，只需要修改依赖和配置就可以了，无需修改代码。 TIPS 实现无关性：举个例子，你目前有一个基于Redis的分布式锁，但有一天想讲存储改为Consul。此时，统一的API至关重要——我相信你不会希望仅仅是修改了分布式锁的存储，就得让开发把相关代码翻新一遍。 大学的时候，不也讲过面向接口编程的重要性嘛。 因此，即使Spring Integration没有为您使用的存储提供实现(例如Consul)，你也应该基于Spring Integration的API去开发。这样未来的某一天，一旦Spring Integration为你的存储提供支持，你就可以无痛切换啦。 编码 下面以Redis为例，讲解Spring Integration里面如何使用分布式锁。 1 加依赖 &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt; &lt;artifactId&gt;spring-integration-redis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; 2 写配置： spring: redis: port: 6379 host: localhost 3 写代码：初始化 @Configurationpublic class RedisLockConfiguration { @Bean public RedisLockRegistry redisLockRegistry(RedisConnectionFactory redisConnectionFactory) { return new RedisLockRegistry(redisConnectionFactory, &quot;spring-cloud&quot;); }} 强烈建议阅读一下&nbsp;org.springframework.integration.redis.util.RedisLockRegistry&nbsp;的注释，它详细描述了该类的特性，例如可重入性以及锁在Redis中如何存储等。 4 写代码：测试 @GetMapping(&quot;test&quot;)public void test() throws InterruptedException { Lock lock = redisLockRegistry.obtain(&quot;lock&quot;); boolean b1 = lock.tryLock(3, TimeUnit.SECONDS); log.info(&quot;b1 is : {}&quot;, b1); TimeUnit.SECONDS.sleep(5); boolean b2 = lock.tryLock(3, TimeUnit.SECONDS); log.info(&quot;b2 is : {}&quot;, b2); lock.unlock(); lock.unlock();} 测试 1 启动1个实例，访问&nbsp;http://localhost:8080/test&nbsp;，会看到类似如下的日志： 2019-03-15 00:48:38.948 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b1 is : true2019-03-15 00:48:43.958 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b2 is : true 2 启动2个实例，并迅速访问两个实例的&nbsp;/test&nbsp;端点，会在第二个实例上看到类似如下日志： 2019-03-15 00:50:08.222 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b1 is : false2019-03-15 00:50:13.233 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b2 is : true2019-03-15 00:50:13.252 ERROR 21898 --- [nio-8081-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: You do not own lock at spring-cloud:lock] with root causejava.lang.IllegalStateException: You do not own lock at spring-cloud:lock at org.springframework.integration.redis.util.RedisLockRegistry$RedisLock.unlock(RedisLockRegistry.java:300) ~[spring-integration-redis-5.1.3.RELEASE.jar:5.1.3.RELEASE] at com.itmuch.lock.SpringBootLockApplication.test(SpringBootLockApplication.java:33) ~[classes/:na] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_201] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_201] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_201] at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_201] at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] 说明第二个实例没有拿到锁，证明了分布式锁的存在。 至此，是不是让你有删掉手写的那些蹩脚的分布式锁的冲动呢？▼往期精彩回顾▼ 微服务为什么一定要用docker 使用docker部署spring cloud项目详细步骤 几道和「堆栈、队列」有关的面试算法题 在Spring Boot中格式化JSON日期 使用windows版Docker并在IntelliJ IDEA使用Docker运行Spring Cloud项目 Springboot项目的接口防刷 实体与模型之间的映射,就用Mapstruct Java高级开发必会的50个性能优化的细节（珍藏版） 记下来，spring 装配bean的三种方式！ 厉害！这届码农追星玩出了新花样 Java生成二维码 与 30 家公司过招，得到了这章面试心法 一道让你拍案叫绝的算法题 了解一下Spring中用了哪些设计模式？这样回答面试官才稳 dubbo 面试18问 拜托！面试请不要再问我Spring Cloud底层原理 稳了！Java并发编程71道面试题及答案 【附答案】Java面试2019常考题目汇总（一） 这10道springboot常见面试题你需要了解下 JVM面试题巧用这19条MySQL优化，效率至少提高3倍 长按关注，更多精彩" />
<meta property="og:description" content="都9102年了，你还在手写分布式锁吗？ 经常被问到”如何实现分布式锁”，看来这是大家的一个痛点。 其实Java世界的”半壁江山”——Spring早就提供了分布式锁的实现。早期，分布式锁的相关代码存在于Spring Cloud的子项目Spring Cloud Cluster中，后来被迁到Spring Integration中。 •Spring Cloud Cluster的GitHub：https://github.com/spring-cloud/spring-cloud-cluster[1]&nbsp;，里面有些用例，以及基于ETCD、hazelcast的分布式锁实现值得一看。•Spring Integration的GitHub：https://github.com/spring-projects/spring-integration[2] TIPS 这就是明明&nbsp;Spring Cloud官方[3]&nbsp;说自己实现了&nbsp;Global Locks&nbsp;，但又无法找到任何相关文档的原因——人家早把相关代码搬迁到Spring Integration了。 可能有不少童鞋对Spring Integration不是很熟悉，简单介绍一下——官方说法，这是一个&nbsp;企业集成模式&nbsp;的实现；通俗地说，Spring Integration的定位是一个轻量级的ESB，尽管它做了很多ESB不做的事情。顺便说一下，Spring Cloud Stream的底层也是Spring Integration。 Spring Integration提供的全局锁目前为如下存储提供了实现： •Gemfire[4]•JDBC[5]•Redis[6]•Zookeeper[7] 它们使用相同的API抽象——这正是Spring最擅长的。这意味着，不论使用哪种存储，你的编码体验是一样的，有一天想更换实现，只需要修改依赖和配置就可以了，无需修改代码。 TIPS 实现无关性：举个例子，你目前有一个基于Redis的分布式锁，但有一天想讲存储改为Consul。此时，统一的API至关重要——我相信你不会希望仅仅是修改了分布式锁的存储，就得让开发把相关代码翻新一遍。 大学的时候，不也讲过面向接口编程的重要性嘛。 因此，即使Spring Integration没有为您使用的存储提供实现(例如Consul)，你也应该基于Spring Integration的API去开发。这样未来的某一天，一旦Spring Integration为你的存储提供支持，你就可以无痛切换啦。 编码 下面以Redis为例，讲解Spring Integration里面如何使用分布式锁。 1 加依赖 &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt; &lt;artifactId&gt;spring-integration-redis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; 2 写配置： spring: redis: port: 6379 host: localhost 3 写代码：初始化 @Configurationpublic class RedisLockConfiguration { @Bean public RedisLockRegistry redisLockRegistry(RedisConnectionFactory redisConnectionFactory) { return new RedisLockRegistry(redisConnectionFactory, &quot;spring-cloud&quot;); }} 强烈建议阅读一下&nbsp;org.springframework.integration.redis.util.RedisLockRegistry&nbsp;的注释，它详细描述了该类的特性，例如可重入性以及锁在Redis中如何存储等。 4 写代码：测试 @GetMapping(&quot;test&quot;)public void test() throws InterruptedException { Lock lock = redisLockRegistry.obtain(&quot;lock&quot;); boolean b1 = lock.tryLock(3, TimeUnit.SECONDS); log.info(&quot;b1 is : {}&quot;, b1); TimeUnit.SECONDS.sleep(5); boolean b2 = lock.tryLock(3, TimeUnit.SECONDS); log.info(&quot;b2 is : {}&quot;, b2); lock.unlock(); lock.unlock();} 测试 1 启动1个实例，访问&nbsp;http://localhost:8080/test&nbsp;，会看到类似如下的日志： 2019-03-15 00:48:38.948 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b1 is : true2019-03-15 00:48:43.958 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b2 is : true 2 启动2个实例，并迅速访问两个实例的&nbsp;/test&nbsp;端点，会在第二个实例上看到类似如下日志： 2019-03-15 00:50:08.222 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b1 is : false2019-03-15 00:50:13.233 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b2 is : true2019-03-15 00:50:13.252 ERROR 21898 --- [nio-8081-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: You do not own lock at spring-cloud:lock] with root causejava.lang.IllegalStateException: You do not own lock at spring-cloud:lock at org.springframework.integration.redis.util.RedisLockRegistry$RedisLock.unlock(RedisLockRegistry.java:300) ~[spring-integration-redis-5.1.3.RELEASE.jar:5.1.3.RELEASE] at com.itmuch.lock.SpringBootLockApplication.test(SpringBootLockApplication.java:33) ~[classes/:na] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_201] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_201] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_201] at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_201] at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] 说明第二个实例没有拿到锁，证明了分布式锁的存在。 至此，是不是让你有删掉手写的那些蹩脚的分布式锁的冲动呢？▼往期精彩回顾▼ 微服务为什么一定要用docker 使用docker部署spring cloud项目详细步骤 几道和「堆栈、队列」有关的面试算法题 在Spring Boot中格式化JSON日期 使用windows版Docker并在IntelliJ IDEA使用Docker运行Spring Cloud项目 Springboot项目的接口防刷 实体与模型之间的映射,就用Mapstruct Java高级开发必会的50个性能优化的细节（珍藏版） 记下来，spring 装配bean的三种方式！ 厉害！这届码农追星玩出了新花样 Java生成二维码 与 30 家公司过招，得到了这章面试心法 一道让你拍案叫绝的算法题 了解一下Spring中用了哪些设计模式？这样回答面试官才稳 dubbo 面试18问 拜托！面试请不要再问我Spring Cloud底层原理 稳了！Java并发编程71道面试题及答案 【附答案】Java面试2019常考题目汇总（一） 这10道springboot常见面试题你需要了解下 JVM面试题巧用这19条MySQL优化，效率至少提高3倍 长按关注，更多精彩" />
<link rel="canonical" href="https://mlh.app/2019/04/04/727323.html" />
<meta property="og:url" content="https://mlh.app/2019/04/04/727323.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-04T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"都9102年了，你还在手写分布式锁吗？ 经常被问到”如何实现分布式锁”，看来这是大家的一个痛点。 其实Java世界的”半壁江山”——Spring早就提供了分布式锁的实现。早期，分布式锁的相关代码存在于Spring Cloud的子项目Spring Cloud Cluster中，后来被迁到Spring Integration中。 •Spring Cloud Cluster的GitHub：https://github.com/spring-cloud/spring-cloud-cluster[1]&nbsp;，里面有些用例，以及基于ETCD、hazelcast的分布式锁实现值得一看。•Spring Integration的GitHub：https://github.com/spring-projects/spring-integration[2] TIPS 这就是明明&nbsp;Spring Cloud官方[3]&nbsp;说自己实现了&nbsp;Global Locks&nbsp;，但又无法找到任何相关文档的原因——人家早把相关代码搬迁到Spring Integration了。 可能有不少童鞋对Spring Integration不是很熟悉，简单介绍一下——官方说法，这是一个&nbsp;企业集成模式&nbsp;的实现；通俗地说，Spring Integration的定位是一个轻量级的ESB，尽管它做了很多ESB不做的事情。顺便说一下，Spring Cloud Stream的底层也是Spring Integration。 Spring Integration提供的全局锁目前为如下存储提供了实现： •Gemfire[4]•JDBC[5]•Redis[6]•Zookeeper[7] 它们使用相同的API抽象——这正是Spring最擅长的。这意味着，不论使用哪种存储，你的编码体验是一样的，有一天想更换实现，只需要修改依赖和配置就可以了，无需修改代码。 TIPS 实现无关性：举个例子，你目前有一个基于Redis的分布式锁，但有一天想讲存储改为Consul。此时，统一的API至关重要——我相信你不会希望仅仅是修改了分布式锁的存储，就得让开发把相关代码翻新一遍。 大学的时候，不也讲过面向接口编程的重要性嘛。 因此，即使Spring Integration没有为您使用的存储提供实现(例如Consul)，你也应该基于Spring Integration的API去开发。这样未来的某一天，一旦Spring Integration为你的存储提供支持，你就可以无痛切换啦。 编码 下面以Redis为例，讲解Spring Integration里面如何使用分布式锁。 1 加依赖 &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt; &lt;artifactId&gt;spring-integration-redis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; 2 写配置： spring: redis: port: 6379 host: localhost 3 写代码：初始化 @Configurationpublic class RedisLockConfiguration { @Bean public RedisLockRegistry redisLockRegistry(RedisConnectionFactory redisConnectionFactory) { return new RedisLockRegistry(redisConnectionFactory, &quot;spring-cloud&quot;); }} 强烈建议阅读一下&nbsp;org.springframework.integration.redis.util.RedisLockRegistry&nbsp;的注释，它详细描述了该类的特性，例如可重入性以及锁在Redis中如何存储等。 4 写代码：测试 @GetMapping(&quot;test&quot;)public void test() throws InterruptedException { Lock lock = redisLockRegistry.obtain(&quot;lock&quot;); boolean b1 = lock.tryLock(3, TimeUnit.SECONDS); log.info(&quot;b1 is : {}&quot;, b1); TimeUnit.SECONDS.sleep(5); boolean b2 = lock.tryLock(3, TimeUnit.SECONDS); log.info(&quot;b2 is : {}&quot;, b2); lock.unlock(); lock.unlock();} 测试 1 启动1个实例，访问&nbsp;http://localhost:8080/test&nbsp;，会看到类似如下的日志： 2019-03-15 00:48:38.948 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b1 is : true2019-03-15 00:48:43.958 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b2 is : true 2 启动2个实例，并迅速访问两个实例的&nbsp;/test&nbsp;端点，会在第二个实例上看到类似如下日志： 2019-03-15 00:50:08.222 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b1 is : false2019-03-15 00:50:13.233 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b2 is : true2019-03-15 00:50:13.252 ERROR 21898 --- [nio-8081-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: You do not own lock at spring-cloud:lock] with root causejava.lang.IllegalStateException: You do not own lock at spring-cloud:lock at org.springframework.integration.redis.util.RedisLockRegistry$RedisLock.unlock(RedisLockRegistry.java:300) ~[spring-integration-redis-5.1.3.RELEASE.jar:5.1.3.RELEASE] at com.itmuch.lock.SpringBootLockApplication.test(SpringBootLockApplication.java:33) ~[classes/:na] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_201] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_201] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_201] at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_201] at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE] at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16] at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE] 说明第二个实例没有拿到锁，证明了分布式锁的存在。 至此，是不是让你有删掉手写的那些蹩脚的分布式锁的冲动呢？▼往期精彩回顾▼ 微服务为什么一定要用docker 使用docker部署spring cloud项目详细步骤 几道和「堆栈、队列」有关的面试算法题 在Spring Boot中格式化JSON日期 使用windows版Docker并在IntelliJ IDEA使用Docker运行Spring Cloud项目 Springboot项目的接口防刷 实体与模型之间的映射,就用Mapstruct Java高级开发必会的50个性能优化的细节（珍藏版） 记下来，spring 装配bean的三种方式！ 厉害！这届码农追星玩出了新花样 Java生成二维码 与 30 家公司过招，得到了这章面试心法 一道让你拍案叫绝的算法题 了解一下Spring中用了哪些设计模式？这样回答面试官才稳 dubbo 面试18问 拜托！面试请不要再问我Spring Cloud底层原理 稳了！Java并发编程71道面试题及答案 【附答案】Java面试2019常考题目汇总（一） 这10道springboot常见面试题你需要了解下 JVM面试题巧用这19条MySQL优化，效率至少提高3倍 长按关注，更多精彩","@type":"BlogPosting","url":"https://mlh.app/2019/04/04/727323.html","headline":"这才是实现分布式锁的正确姿势！","dateModified":"2019-04-04T00:00:00+08:00","datePublished":"2019-04-04T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/04/04/727323.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>这才是实现分布式锁的正确姿势！</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="rich_media_content" id="js_content"> 
   <blockquote style="border-left-color:rgb(158,158,158);color:rgb(91,91,91);font-size:16px;letter-spacing:.544px;text-align:left;line-height:1.5;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;background:rgba(158,158,158,.1);">
    <p style="color:rgb(63,63,63);line-height:1.6;">都9102年了，你还在手写分布式锁吗？</p>
   </blockquote>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">经常被问到”如何实现分布式锁”，看来这是大家的一个痛点。</p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">其实Java世界的”半壁江山”——Spring早就提供了分布式锁的实现。早期，分布式锁的相关代码存在于Spring Cloud的子项目Spring Cloud Cluster中，后来被迁到Spring Integration中。</p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.5;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;list-style:circle;"><span style="line-height:1.5;text-indent:-20px;"><span>•</span>Spring Cloud Cluster的GitHub：<span style="color:rgb(255,53,2);line-height:1.5;">https://github.com/spring-cloud/spring-cloud-cluster<sup>[1]</sup></span>&nbsp;，<strong style="color:rgb(255,53,2);line-height:1.5;">里面有些用例，以及基于ETCD、hazelcast的分布式锁实现值得一看</strong>。</span><span style="line-height:1.5;text-indent:-20px;"><span>•</span>Spring Integration的GitHub：<span style="color:rgb(255,53,2);line-height:1.5;">https://github.com/spring-projects/spring-integration<sup>[2]</sup></span></span></p>
   <blockquote style="border-left-color:rgb(158,158,158);color:rgb(91,91,91);font-size:16px;letter-spacing:.544px;text-align:left;line-height:1.5;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;background:rgba(158,158,158,.1);">
    <p style="color:rgb(63,63,63);line-height:1.6;"><strong style="color:rgb(255,53,2);line-height:1.5;">TIPS</strong></p>
    <p style="color:rgb(63,63,63);line-height:1.6;">这就是明明&nbsp;<span style="color:rgb(255,53,2);line-height:1.5;">Spring Cloud官方<sup>[3]</sup></span>&nbsp;说自己实现了&nbsp;<code style="color:rgb(255,53,2);line-height:1.5;font-size:14.4px;font-family:'Operator Mono', Consolas, Monaco, Menlo, monospace;background:rgb(248,245,236);">Global Locks</code>&nbsp;，但又无法找到任何相关文档的原因——人家早把相关代码搬迁到Spring Integration了。</p>
   </blockquote>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">可能有不少童鞋对Spring Integration不是很熟悉，简单介绍一下——官方说法，这是一个&nbsp;<code style="color:rgb(255,53,2);line-height:1.5;font-size:14.4px;font-family:'Operator Mono', Consolas, Monaco, Menlo, monospace;background:rgb(248,245,236);">企业集成模式</code>&nbsp;的实现；通俗地说，Spring Integration的定位是一个轻量级的ESB，尽管它做了很多ESB不做的事情。顺便说一下，Spring Cloud Stream的底层也是Spring Integration。</p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Spring Integration提供的全局锁目前为如下存储提供了实现：</p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.5;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;list-style:circle;"><span style="line-height:1.5;text-indent:-20px;"><span>•</span><span style="color:rgb(255,53,2);line-height:1.5;">Gemfire<sup>[4]</sup></span></span><span style="line-height:1.5;text-indent:-20px;"><span>•</span><span style="color:rgb(255,53,2);line-height:1.5;">JDBC<sup>[5]</sup></span></span><span style="line-height:1.5;text-indent:-20px;"><span>•</span><span style="color:rgb(255,53,2);line-height:1.5;">Redis<sup>[6]</sup></span></span><span style="line-height:1.5;text-indent:-20px;"><span>•</span><span style="color:rgb(255,53,2);line-height:1.5;">Zookeeper<sup>[7]</sup></span></span></p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">它们使用相同的API抽象——这正是Spring最擅长的。这意味着，不论使用哪种存储，你的编码体验是一样的，<strong style="color:rgb(255,53,2);line-height:1.5;">有一天想更换实现，只需要修改依赖和配置就可以了，无需修改代码</strong>。</p>
   <blockquote style="border-left-color:rgb(158,158,158);color:rgb(91,91,91);font-size:16px;letter-spacing:.544px;text-align:left;line-height:1.5;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;background:rgba(158,158,158,.1);">
    <p style="color:rgb(63,63,63);line-height:1.6;"><strong style="color:rgb(255,53,2);line-height:1.5;">TIPS</strong></p>
    <p style="color:rgb(63,63,63);line-height:1.6;">实现无关性：举个例子，你目前有一个基于Redis的分布式锁，但有一天想讲存储改为Consul。此时，统一的API至关重要——<strong style="color:rgb(255,53,2);line-height:1.5;">我相信你不会希望仅仅是修改了分布式锁的存储，就得让开发把相关代码翻新一遍</strong>。</p>
    <p style="color:rgb(63,63,63);line-height:1.6;">大学的时候，不也讲过面向接口编程的重要性嘛。</p>
    <p style="color:rgb(63,63,63);line-height:1.6;">因此，即使Spring Integration没有为您使用的存储提供实现(例如Consul)，你也应该基于Spring Integration的API去开发。这样未来的某一天，一旦Spring Integration为你的存储提供支持，<strong style="color:rgb(255,53,2);line-height:1.5;">你就可以无痛切换啦</strong>。</p>
   </blockquote>
   <h2 style="font-size:22.4px;letter-spacing:.544px;text-align:center;color:rgb(63,63,63);line-height:1.5;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">编码</h2>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">下面以Redis为例，讲解Spring Integration里面如何使用分布式锁。</p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">1 加依赖</p>
   <ul class="code-snippet__line-index code-snippet__js">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
   </ul>
   <pre class="code-snippet__js"><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">&lt;dependency&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">&lt;/dependency&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">&lt;dependency&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> &lt;artifactId&gt;spring-integration-redis&lt;/artifactId&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">&lt;/dependency&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">&lt;dependency&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">&lt;/dependency&gt;</span></code></pre>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">2 写配置：</p>
   <ul class="code-snippet__line-index code-snippet__js">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
   </ul>
   <pre class="code-snippet__js"><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">spring:</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> redis:</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> port: 6379</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> host: localhost</span></code></pre>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">3 写代码：初始化</p>
   <ul class="code-snippet__line-index code-snippet__js">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
   </ul>
   <pre class="code-snippet__js"><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">@Configuration</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">public class RedisLockConfiguration {</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> @Bean</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> public RedisLockRegistry redisLockRegistry(RedisConnectionFactory redisConnectionFactory) {</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> return new RedisLockRegistry(redisConnectionFactory, "spring-cloud");</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> }</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">}</span></code></pre>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">强烈建议阅读一下&nbsp;<code style="color:rgb(255,53,2);line-height:1.5;font-size:14.4px;font-family:'Operator Mono', Consolas, Monaco, Menlo, monospace;background:rgb(248,245,236);">org.springframework.integration.redis.util.RedisLockRegistry</code>&nbsp;的注释，<strong style="color:rgb(255,53,2);line-height:1.5;">它详细描述了该类的特性，例如可重入性以及锁在Redis中如何存储等</strong>。</p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">4 写代码：测试</p>
   <ul class="code-snippet__line-index code-snippet__js">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
   </ul>
   <pre class="code-snippet__js"><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">@GetMapping("test")</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">public void test() throws InterruptedException {</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> Lock lock = redisLockRegistry.obtain("lock");</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> boolean b1 = lock.tryLock(3, TimeUnit.SECONDS);</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> log.info("b1 is : {}", b1);</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"><br></span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> TimeUnit.SECONDS.sleep(5);</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"><br></span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> boolean b2 = lock.tryLock(3, TimeUnit.SECONDS);</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> log.info("b2 is : {}", b2);</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"><br></span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> lock.unlock();</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> lock.unlock();</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">}</span></code></pre>
   <h2 style="font-size:22.4px;letter-spacing:.544px;text-align:center;color:rgb(63,63,63);line-height:1.5;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">测试</h2>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">1 启动1个实例，访问&nbsp;<code style="color:rgb(255,53,2);line-height:1.5;font-size:14.4px;font-family:'Operator Mono', Consolas, Monaco, Menlo, monospace;background:rgb(248,245,236);">http://localhost:8080/test</code>&nbsp;，会看到类似如下的日志：</p>
   <ul class="code-snippet__line-index code-snippet__js">
    <li></li>
    <li></li>
   </ul>
   <pre class="code-snippet__js"><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">2019-03-15 00:48:38.948 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b1 is : true</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">2019-03-15 00:48:43.958 INFO 21893 --- [nio-8080-exec-1] c.itmuch.lock.SpringBootLockApplication : b2 is : true</span></code></pre>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">2 启动2个实例，并迅速访问两个实例的&nbsp;<code style="color:rgb(255,53,2);line-height:1.5;font-size:14.4px;font-family:'Operator Mono', Consolas, Monaco, Menlo, monospace;background:rgb(248,245,236);">/test</code>&nbsp;端点，会在第二个实例上看到类似如下日志：</p>
   <ul class="code-snippet__line-index code-snippet__js">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
   </ul>
   <pre class="code-snippet__js"><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">2019-03-15 00:50:08.222 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b1 is : false</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">2019-03-15 00:50:13.233 INFO 21898 --- [nio-8081-exec-3] c.itmuch.lock.SpringBootLockApplication : b2 is : true</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">2019-03-15 00:50:13.252 ERROR 21898 --- [nio-8081-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet] : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: You do not own lock at spring-cloud:lock] with root cause</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"><br></span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer">java.lang.IllegalStateException: You do not own lock at spring-cloud:lock</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.integration.redis.util.RedisLockRegistry$RedisLock.unlock(RedisLockRegistry.java:300) ~[spring-integration-redis-5.1.3.RELEASE.jar:5.1.3.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at com.itmuch.lock.SpringBootLockApplication.test(SpringBootLockApplication.java:33) ~[classes/:na]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_201]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_201]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_201]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_201]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.16.jar:9.0.16]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar:9.0.16]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar:9.0.16]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar:9.0.16]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar:9.0.16]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar:9.0.16]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code><code style="text-align:left;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace;"><span class="code-snippet_outer"> at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar:5.1.5.RELEASE]</span></code></pre>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">说明第二个实例没有拿到锁，证明了分布式锁的存在。</p>
   <p style="letter-spacing:.544px;font-size:16px;text-align:left;color:rgb(63,63,63);line-height:1.6;font-family:'Optima-Regular', Optima, 'PingFangSC-light', 'PingFangTC-light', 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">至此，是不是让你有删掉手写的那些蹩脚的分布式锁的冲动呢？</p>▼往期精彩回顾▼
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049068&amp;idx=1&amp;sn=530ed5ee346befd2ea6714bece98fd32&amp;chksm=875343dfb024cac90570b76a38b1c4f7585d175a9d2fd184ebaf95c6bdac42c27e8a7ec4d880&amp;scene=21#wechat_redirect" rel="nofollow">微服务为什么一定要用docker</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049182&amp;idx=1&amp;sn=d46bbd5d06a73a4a37dcb0d8da8b389b&amp;chksm=87534c6db024c57b6bbf082bd97fad5bde28ce20f89cf6b3dfe867384d41b458a1e5c4d7382a&amp;scene=21#wechat_redirect" rel="nofollow">使用docker部署spring cloud项目详细步骤</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049182&amp;idx=2&amp;sn=14a35a0d0c7d0b1b7429992ab07e36df&amp;chksm=87534c6db024c57b456573d3ee417b0e1fe759c2f85bed86b368a86ba2c3e85a7137faf7d53a&amp;scene=21#wechat_redirect" rel="nofollow">几道和「堆栈、队列」有关的面试算法题</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049168&amp;idx=1&amp;sn=829ead3661e4725dca062f2021caf7d6&amp;chksm=87534c63b024c575fcdff6f0f9b775b7453c33d1ebf0803ab91c0b4c75dfbc04395c5863ecce&amp;scene=21#wechat_redirect" rel="nofollow">在Spring Boot中格式化JSON日期</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049157&amp;idx=1&amp;sn=5b339f8968c74b51b8ce786f0bb9996a&amp;chksm=87534c76b024c560df685ee2e1a902e5c6f1b92ce5a638dbe82515ccd97fc8045ceca743fb0c&amp;scene=21#wechat_redirect" rel="nofollow">使用windows版Docker并在IntelliJ IDEA使用Docker运行Spring Cloud项目</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049145&amp;idx=2&amp;sn=fa191f98b4d8a3e74cba91b5ce16acbc&amp;chksm=87534c0ab024c51cdb8e14f31df01a49c8c725add2567182ba5ca40481d4fb575bfa7b9b36f9&amp;scene=21#wechat_redirect" rel="nofollow">Springboot项目的接口防刷</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049141&amp;idx=2&amp;sn=005a1392da010954b3db14ead37aad8b&amp;chksm=87534c06b024c51028dfc0773e0f9cb03c132e7424bf7400ecac421b5939677bae53ab71b882&amp;scene=21#wechat_redirect" rel="nofollow">实体与模型之间的映射,就用Mapstruct</a></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049132&amp;idx=1&amp;sn=3468c65313a1643fecb00169d7027000&amp;chksm=87534c1fb024c5095beb91ef00ad7b44cd689261609cec8e7da765b5c92bec8175481b4a0634&amp;scene=21#wechat_redirect" rel="nofollow">Java高级开发必会的50个性能优化的细节（珍藏版）</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049114&amp;idx=1&amp;sn=7c8a4325319ee6bc9fd31fc15db90b8f&amp;chksm=87534c29b024c53fcd240f8511ce65a5cf2f4dc233d6b4b771b6cd342f9900a9999913cfa576&amp;scene=21#wechat_redirect" rel="nofollow">记下来，spring 装配bean的三种方式！</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049109&amp;idx=1&amp;sn=33dc89b06119576b269280f476130621&amp;chksm=87534c26b024c530ab58c1d94507a34a209409e0e4f4b54745892a19ce57ab078f215da87ec3&amp;scene=21#wechat_redirect" rel="nofollow">厉害！这届码农追星玩出了新花样</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049065&amp;idx=2&amp;sn=9cb669cad49f5c7bbf49dc59ec54d55c&amp;chksm=875343dab024cacc90dc5e19cecf800087fe9dc7fc79f332bed9187b0a4a0ba2169e5b112d29&amp;scene=21#wechat_redirect" rel="nofollow">Java生成二维码</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049106&amp;idx=1&amp;sn=ac465104982aa3e51b8f5e79815a74a2&amp;chksm=87534c21b024c537f903ad3883fc43d45c487eefa2e92d84400ec6d1d00f8e61b818ade152cd&amp;scene=21#wechat_redirect" rel="nofollow">与 30 家公司过招，得到了这章面试心法</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049096&amp;idx=1&amp;sn=f7bd569c81bef356a16489253cfe5bec&amp;chksm=87534c3bb024c52d4ebab45c45f0edf5a720df0a72e67298f09d9a20d2e9e3f415c2af49a0b5&amp;scene=21#wechat_redirect" rel="nofollow">一道让你拍案叫绝的算法题</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649048999&amp;idx=1&amp;sn=ca3efda9a37983d1bd8500f649121e8f&amp;chksm=87534394b024ca826a1f1cdd1256c97fc41b5bce38a72f286fd97019a5a9b0eeb51b2b9b9b88&amp;scene=21#wechat_redirect" rel="nofollow">了解一下Spring中用了哪些设计模式？这样回答面试官才稳</a></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049036&amp;idx=1&amp;sn=3b04d1383043cb8f34a51c3bf9bd8235&amp;chksm=875343ffb024cae95c2b7f742a1e62c403c38deeb46cb2ceb6e00fd4ed1bde83d8400d589b97&amp;scene=21#wechat_redirect" rel="nofollow">dubbo 面试18问</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049002&amp;idx=1&amp;sn=fc0428835f97198258c5e670e7e9c16b&amp;chksm=87534399b024ca8fac0d20f8dac0b2da990369820c4acfd635525a641a9292f8428522015692&amp;scene=21#wechat_redirect" rel="nofollow">拜托！面试请不要再问我Spring Cloud底层原理</a><br></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649048995&amp;idx=1&amp;sn=4edf6f841a9ca77356eba5c2b4388152&amp;chksm=87534390b024ca86ece393afea1d460d337b79b0ac916be12b083d094ad1b333595257ec624d&amp;scene=21#wechat_redirect" rel="nofollow">稳了！Java并发编程71道面试题及答案</a></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649048987&amp;idx=1&amp;sn=51d695e336a15f4f83a040667329c6e9&amp;chksm=875343a8b024cabe3ca4731992a648f75779f83ad65615d2a6a00fd980c449a285d6b8ad8a83&amp;scene=21#wechat_redirect" rel="nofollow">【附答案】Java面试2019常考题目汇总（一）</a></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649048975&amp;idx=1&amp;sn=b0eecd92b2d033647713ecd21216acb1&amp;chksm=875343bcb024caaa849ff589131cc4ff6269619fe1094a71554b79a25e14681ea74c93558711&amp;scene=21#wechat_redirect" rel="nofollow">这10道springboot常见面试题你需要了解下</a></p>
   <p style="font-size:15px;letter-spacing:2px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649048958&amp;idx=2&amp;sn=c27caee93cdbdb67642f603a3a4947de&amp;chksm=8753434db024ca5bc19aded90a12cb7cb7f6220d70974a9034c9b7683f9cfd2a500d55d4e7cb&amp;scene=21#wechat_redirect" rel="nofollow">JVM面试题</a><br><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODQ0Mzg2OA==&amp;mid=2649049010&amp;idx=1&amp;sn=3fbd48429e2d384cc9cfb888460f0dff&amp;chksm=87534381b024ca97a7b03c23f0063759dcd88440fa119fc98223ed41ca5fe157aa640174648a&amp;scene=21#wechat_redirect" rel="nofollow">巧用这19条MySQL优化，效率至少提高3倍</a><br></p>
   <p style="letter-spacing:.544px;font-size:15px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/sG1icpcmhbiaDibCb0MpMDoQ657RBycRPEFCtEL0Ktpiakqt3ibT1qbyEpqZjy8PowShHgthU3OicBUfGe3uFqXYXc5Q/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="letter-spacing:.544px;font-size:15px;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><span style="color:rgb(0,0,0);"><strong>长按关注，更多精彩</strong></span></p>
   <p><br></p> 
  </div> 
 </div> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
