<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>从 Kubernetes 1.14 发布，看技术社区演进方向 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="从 Kubernetes 1.14 发布，看技术社区演进方向" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="阿里妹导读：如果说以“不断提升插件能力和可扩展能力”的&nbsp;“基础设施开源项目民主化”进程是&nbsp;Kubernetes&nbsp;在2017-2018年的核心主题的话，那么在2019年，这个技术社区的发展脉络又是怎样的呢？ &nbsp; 今天，阿里云高级技术专家张磊将从&nbsp;Kubernetes&nbsp;1.14&nbsp;这个承前启后的版本聊起，一窥技术社区的演进方向。 Kubernetes&nbsp;1.14&nbsp;正式发布已经过去了一段时间，相信你已经从不同渠道看过了各种版本的解读。 &nbsp; 不过，相比于代码&nbsp;Release，马上就要迎来5周岁生日的&nbsp;Kubernetes&nbsp;项目接下来如何演进，其实也是一个让人着迷的话题。而作为一个日趋成熟的开源生态，Kubernetes&nbsp;项目每三个月一次的正式发布，其实正是这个高速发展的技术社区不断向前演进的过程中留下的扎实脚印。 &nbsp; Windows 生态成为 Kubernetes 项目的一等公民 Kubernetes&nbsp;对&nbsp;Windows&nbsp;生态的支持，自从这个项目发布起就被提上了日程。不过，作为一个纯粹的&nbsp;Linux&nbsp;技术栈支撑的基础设施开源项目，Windows&nbsp;节点以及&nbsp;Windows&nbsp;容器支持真正取得实质性进展，还是要从&nbsp;Kubernetes&nbsp;项目的插件和可扩展能力在1.6版本后逐渐成熟之后才慢慢步入了正轨。这也很容易理解，Windows&nbsp;体系与目前主流容器技术栈有着本质性的差异，这就要求&nbsp;Kubernetes&nbsp;项目必须能够提供更高层次的抽象和可扩展能力以支持两种迥然不同的技术栈，并且同现有的Kubernetes&nbsp;生态比如&nbsp;CNI&nbsp;和&nbsp;CSI&nbsp;完成对接。这部分工作的复杂度和工作量，也是&nbsp;Windows&nbsp;Node&nbsp;的生产可用从1.13延期到1.14的主要原因。 &nbsp; 而在这次1.14的发布中，Kubernetes&nbsp;的&nbsp;Pod，Service，应用编排，CNI&nbsp;网络等绝大多数核心能力都已经在&nbsp;Windows&nbsp;节点上得到了支持。此外，包括自定义监控指标、水平扩展、抢占和优先级调度等很多进阶功能也都在&nbsp;Windows&nbsp;上得以实现。 目前，尚不能被支持的功能基本上都是在&nbsp;Windows&nbsp;上暂时无法实现的语义比如&nbsp;Host&nbsp;Network&nbsp;以及其它&nbsp;Linux&nbsp;内核专属的资源和权限定义方式等。可以看到，Kubernetes&nbsp;这次发布对&nbsp;Windows&nbsp;节点和&nbsp;Windows&nbsp;容器的支持，较之前相比有了巨大提升，完成度非常高，确实对得起&nbsp;“GA”这个具备承诺意味的发布用语。 而国内外公共云提供商比如阿里云容器服务（ACK）也已经于近期已经推出了&nbsp;Windows&nbsp;Container&nbsp;的支持，提供了&nbsp;Linux/Windows&nbsp;应用混合部署的统一管理能力，再一次印证了这次发布的可用度。 &nbsp; 不难看到，公共云提供商（比如本次Windows&nbsp;支持GA背后的微软云团队）作为&nbsp;CNCF社区的主要推动方之一，实际上一直在整个云原生技术生态中发挥着巨大的作用，逐步促成了将像&nbsp;Windows&nbsp;支持这样的实际企业用户诉求带给了一个高速发展的、完全以&nbsp;Linux&nbsp;技术栈为核心的基础设施项目。而在未来的发展中，诸如此类的来自于公共云提供商的输入，将会继续在&nbsp;Kubernetes&nbsp;项目发展的过程中扮演至关重要的角色，这也会成为更多的企业用户能够从云原生技术生态中获益的一个重要途径。这一点，将会继续成为&nbsp;Kubernetes&nbsp;项目与其他基础设施开源项目的最大不同。 &nbsp; Kubernetes 原生的应用管理能力崭露头角 在长期一段时间里，Kubernetes&nbsp;的应用管理都是由&nbsp;Helm&nbsp;这样的第三方项目或者上层&nbsp;PaaS&nbsp;来完成的。不过，在1.14之后，Kubernetes&nbsp;项目本身开始具备了原生的应用管理能力，这其中最重要的一个功能，就是&nbsp;Kustomize。 &nbsp; Kustomize&nbsp;允许用户以一个应用描述文件&nbsp;（YAML&nbsp;文件）为基础（Base&nbsp;YAML），然后通过&nbsp;Overlay&nbsp;的方式生成最终部署应用所需的描述文件，而不是像&nbsp;Helm&nbsp;那样只提供应用描述文件模板，然后通过字符替换（Templating）的方式来进行定制化。 &nbsp; 而与此同时，其他用户可以完全不受影响地使用任何一个&nbsp;Base&nbsp;YAML&nbsp;或者任何一层生成出来的&nbsp;YAML&nbsp;。这使得每一个用户都可以通过类似&nbsp;fork/modify/rebase&nbsp;这样&nbsp;Git&nbsp;风格的流程来管理海量的应用描述文件。这种&nbsp;PATCH&nbsp;的思想跟&nbsp;Docker&nbsp;镜像是非常相似的，它可以规避“字符替换”对应用描述文件的入侵，也不需要用户学习额外的&nbsp;DSL&nbsp;语法（比如&nbsp;Lua）。 &nbsp; 更为重要的是，上述PATCH&nbsp;的思想，跟&nbsp;Kubernetes&nbsp;项目强调的声明式&nbsp;API&nbsp;是完全匹配的，整个使用体验跟&nbsp;Kubernetes&nbsp;API&nbsp;本身完全一致，没有割裂感（大家可以思考一下为什么&nbsp;PATCH&nbsp;才是声明式&nbsp;API&nbsp;的精髓）。 &nbsp; 在1.14发布中，Kustomize&nbsp;功能已经成为了&nbsp;kubectl&nbsp;的一个内置命令，这使得用户使用&nbsp;Kubernetes&nbsp;的声明式&nbsp;API来直接在云端管理、修改和部署海量的应用成为了可能。并且，kubectl&nbsp;本身的插件机制也在1.14中得到了大量完善，使得&nbsp;kubectl&nbsp;结合各种客户端插件已经具备成为应用管理工具的潜在能力。而在这样的演进路线下，Kubernetes&nbsp;项目对应用以及应用管理的定义也开始清晰了起来，我们可以用如下一幅示意图来简单描述： &nbsp; &nbsp; 在这个&nbsp;Kubernetes&nbsp;原生的应用管理体系中，应用描述文件（YAML&nbsp;文件）居于核心位置。一份应用描述文件，实际上是多个&nbsp;Kubernetes&nbsp;API&nbsp;对象的组合，共同定义了这个部署这个应用所需的资源编排和服务编排内容。一旦这样一个描述文件提交给Kubernetes&nbsp;，那么接下来它就会通过控制器模式来保证整个集群里的状态与该描述文件的定义完全一致。 &nbsp; 这些描述文件的来源，则来自于上层框架或者用户的产出。更为重要的是，所有对应用的操作，都应该通过声明式&nbsp;API&nbsp;对该文件进行&nbsp;Create、Patch&nbsp;和&nbsp;Delete&nbsp;操作来完成，进而触发&nbsp;Kubernetes&nbsp;的控制器模型执行预定义的编排动作。 &nbsp; 不难看到，在这个模型中，Helm&nbsp;和&nbsp;Kustomize&nbsp;其实定义了两种不同的应用描述文件的产出路径和用户体验，也代表了两种同&nbsp;Kubernetes&nbsp;API&nbsp;不同的耦合度和抽象程度：一个自成体系，一个则融入到了&nbsp;Kubernetes的设计理念当中。在1.14发布之后，Kubernetes&nbsp;社区当前正在探索的这种应用管理体系效果如何，我们不妨拭目以待。 &nbsp; 大规模场景下的性能优化工作逐渐提上日程 熟悉&nbsp;Kubernetes&nbsp;项目的很多参与者可能都知道，在过去一段时间，Kubernetes&nbsp;社区对于大规模场景下的性能优化工作的优先级大多不会非常高。这里的原因也比较容易理解，在一个基础设施开源项目发展的早期，扩大生态和完善功能相比于支持更大的集群来说往往要更重要一些。 &nbsp; 但在&nbsp;Kubernetes&nbsp;的主干功能日趋稳定之后，社区一定会开始更多地关注大规模场景下&nbsp;Kubernetes&nbsp;项目会暴露出来的各种各样的问题，这其实依然容易理解：中小规模的用户固然是整个项目取得生态成功的根本，但是通过&nbsp;Kubernetes&nbsp;这条路径让更多的沃尔玛、星巴克、国内外的技术独角兽们成为云原生技术的受益者，进而成为公共云上的规模性用户，一定是&nbsp;Kubernetes&nbsp;社区要重点考虑的发展方向。 &nbsp; 当然，作为一个天然处于“被集成”位置的基础设施项目，Kubernetes&nbsp;进行性能提升的主要方向，一定优先关注于与上层使用者关系最为紧密的&nbsp;API&nbsp;层以及客户端使用场景。当然，这也与&nbsp;Kubernetes&nbsp;项目的架构关系紧密：声明式&nbsp;API&nbsp;的设计围绕着以&nbsp;etcd&nbsp;为核心的配置管理机制，使得&nbsp;Kubernetes&nbsp;项目天生就是一个重&nbsp;API&nbsp;层而轻调度的分布式系统。这也意味着当需要管理的配置信息（即：API&nbsp;对象）数量巨大时，这一层也是最有可能的暴露出性能问题的领域。 &nbsp; 所以，在&nbsp;Kubernetes&nbsp;v1.14中，社区首先从面向最终用户的角度做出了很多优化，比如：&nbsp;kubectl&nbsp;对&nbsp;API&nbsp;对象的遍历行为进行了大量的并行化工作。这种看似微小的修改在大规模场景下对&nbsp;kubectl&nbsp;使用者带来的性能提升体验，却是非常显著的。 &nbsp; 当然，最重要的工作，还是发生在&nbsp;APIServer&nbsp;本身的性能优化上。比如，Kubernetes&nbsp;的&nbsp;Aggregated&nbsp;API&nbsp;允许开发人员编写一个自定义服务，并把这个服务注册到&nbsp;k8s&nbsp;的&nbsp;API&nbsp;里面像原生&nbsp;API&nbsp;一样使用。但是在这个情况下，APIServer&nbsp;会将用户自定义&nbsp;API&nbsp;Spec&nbsp;与原生的&nbsp;API&nbsp;Spec&nbsp;归并起来，这是一个非常消耗CPU&nbsp;的性能痛点。而在v1.14中，社区专门对这个操作的效率进行了细致的优化，最终极将APIServer&nbsp;归并&nbsp;Spec&nbsp;的性能提升了十倍以上。 &nbsp; 除此之外，Kubernetes&nbsp;项目性能提升的另一个重要方向，就是对&nbsp;etcd&nbsp;到&nbsp;APIServer&nbsp;之间的连接路径的优化和提升上。作为&nbsp;Kubernetes&nbsp;项目的配置中心，也是唯一的外部数据依赖，etcd&nbsp;每一次提交操作的数据量和间隔大小，每一个连接的请求和响应周期，都有可能对最终&nbsp;Kubernetes&nbsp;项目在大规模场景下的性能表现产生影响。阿里巴巴的技术团队在&nbsp;etcd&nbsp;项目的中一直在持续进行性能调优与提升工作并已陆续发布在了&nbsp;etcd&nbsp;的最新版本当中。这些内容虽然不属于&nbsp;Kubernetes&nbsp;1.14&nbsp;发布的一部分，但同样值得我们关注。 &nbsp; 可扩展能力和项目稳定性持续提升 除了上述几个领域在本次发布后逐步成为核心领域之外，Kubernetes&nbsp;项目在过往一直比较重视的几个核心方向，比如，可扩展能力的提升，项目稳定性等，依然是&nbsp;Kubernetes&nbsp;项目继续演进的重要旋律。所以在&nbsp;Kubernetes&nbsp;1.14中，才会出现很多像“Pod&nbsp;Ready&nbsp;++”&nbsp;这样将原本已经成熟的系统特性进一步重构成为可扩展接口的重要变更。在&nbsp;Pod&nbsp;Ready&nbsp;++&nbsp;正式发布后，Kubernetes&nbsp;用户只需要自己编写一个外部控制器（Controller）就可以非常方便地自定义一个应用从创建到最终可用（Ready）的标准到底是什么，而不是被强迫遵守&nbsp;Kubernetes&nbsp;项目已有的定义方法。这种能力，同样是基础设施开源项目“民主化”的重要体现。 &nbsp; 总结 Kubernetes&nbsp;1.14的发布，在这个日趋成熟稳定的项目开源基础设施项目的发展过程中有着重要的承前启后的作用。所以我们会看到，Kubernetes&nbsp;社区正在几个以往并不太受关注的领域里开始持续发力，甚至有可能会进一步改变整个云原生社区在某些领域的发展方向。这种在日趋稳定的发展历程中不时透露出来的技术革新，也正是这个社区能够持续令人兴奋的关键所在。 &nbsp; 而放眼当前的云计算生态，国外越来越多的大规模企业级用户比如&nbsp;Snapchat、Twitter&nbsp;等都已经开始了将自己的整套技术栈直接迁往以&nbsp;Kubernetes&nbsp;为基础的公共云服务上，这正好印证了“云原生”这个关键词的本质含义：在未来云的时代，软件的开发、测试、发布、运维等完整的生命周期，都会基于云来进行。而所谓的“云原生”，其实正在通过一系列技术手段，为广大开发者编制出了一幅能够让软件天然的生长在云上、交付在云上，从而最大程度地发挥出云的价值的技术蓝图。 &nbsp; 更多关于云原生技术原理和实践的内容，欢迎点击文末“阅读原文”关注阿里云和CNCF&nbsp;官方联合开发的免费公开课《CNCF&nbsp;x&nbsp;Alibaba&nbsp;云原生技术公开课》：业内一线技术大咖为你剖析云原生技术核心原理与落地实践，期待各位的学习与反馈。 参考资料： https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.14.md 小彩蛋来了！ 一年之计在于春。阿里妹整理了自阿里技术公众号诞生以来，最受欢迎的技术干货，分门别类打好包，送给大家。&nbsp;点此阅读：阿里技术干货合集 你可能还喜欢 点击下方图片即可阅读 今天，阿里巴巴报告厅里只谈快乐的数学 直播：对话Ruby创始人 阿里巴巴2019实习生招聘正式启动！" />
<meta property="og:description" content="阿里妹导读：如果说以“不断提升插件能力和可扩展能力”的&nbsp;“基础设施开源项目民主化”进程是&nbsp;Kubernetes&nbsp;在2017-2018年的核心主题的话，那么在2019年，这个技术社区的发展脉络又是怎样的呢？ &nbsp; 今天，阿里云高级技术专家张磊将从&nbsp;Kubernetes&nbsp;1.14&nbsp;这个承前启后的版本聊起，一窥技术社区的演进方向。 Kubernetes&nbsp;1.14&nbsp;正式发布已经过去了一段时间，相信你已经从不同渠道看过了各种版本的解读。 &nbsp; 不过，相比于代码&nbsp;Release，马上就要迎来5周岁生日的&nbsp;Kubernetes&nbsp;项目接下来如何演进，其实也是一个让人着迷的话题。而作为一个日趋成熟的开源生态，Kubernetes&nbsp;项目每三个月一次的正式发布，其实正是这个高速发展的技术社区不断向前演进的过程中留下的扎实脚印。 &nbsp; Windows 生态成为 Kubernetes 项目的一等公民 Kubernetes&nbsp;对&nbsp;Windows&nbsp;生态的支持，自从这个项目发布起就被提上了日程。不过，作为一个纯粹的&nbsp;Linux&nbsp;技术栈支撑的基础设施开源项目，Windows&nbsp;节点以及&nbsp;Windows&nbsp;容器支持真正取得实质性进展，还是要从&nbsp;Kubernetes&nbsp;项目的插件和可扩展能力在1.6版本后逐渐成熟之后才慢慢步入了正轨。这也很容易理解，Windows&nbsp;体系与目前主流容器技术栈有着本质性的差异，这就要求&nbsp;Kubernetes&nbsp;项目必须能够提供更高层次的抽象和可扩展能力以支持两种迥然不同的技术栈，并且同现有的Kubernetes&nbsp;生态比如&nbsp;CNI&nbsp;和&nbsp;CSI&nbsp;完成对接。这部分工作的复杂度和工作量，也是&nbsp;Windows&nbsp;Node&nbsp;的生产可用从1.13延期到1.14的主要原因。 &nbsp; 而在这次1.14的发布中，Kubernetes&nbsp;的&nbsp;Pod，Service，应用编排，CNI&nbsp;网络等绝大多数核心能力都已经在&nbsp;Windows&nbsp;节点上得到了支持。此外，包括自定义监控指标、水平扩展、抢占和优先级调度等很多进阶功能也都在&nbsp;Windows&nbsp;上得以实现。 目前，尚不能被支持的功能基本上都是在&nbsp;Windows&nbsp;上暂时无法实现的语义比如&nbsp;Host&nbsp;Network&nbsp;以及其它&nbsp;Linux&nbsp;内核专属的资源和权限定义方式等。可以看到，Kubernetes&nbsp;这次发布对&nbsp;Windows&nbsp;节点和&nbsp;Windows&nbsp;容器的支持，较之前相比有了巨大提升，完成度非常高，确实对得起&nbsp;“GA”这个具备承诺意味的发布用语。 而国内外公共云提供商比如阿里云容器服务（ACK）也已经于近期已经推出了&nbsp;Windows&nbsp;Container&nbsp;的支持，提供了&nbsp;Linux/Windows&nbsp;应用混合部署的统一管理能力，再一次印证了这次发布的可用度。 &nbsp; 不难看到，公共云提供商（比如本次Windows&nbsp;支持GA背后的微软云团队）作为&nbsp;CNCF社区的主要推动方之一，实际上一直在整个云原生技术生态中发挥着巨大的作用，逐步促成了将像&nbsp;Windows&nbsp;支持这样的实际企业用户诉求带给了一个高速发展的、完全以&nbsp;Linux&nbsp;技术栈为核心的基础设施项目。而在未来的发展中，诸如此类的来自于公共云提供商的输入，将会继续在&nbsp;Kubernetes&nbsp;项目发展的过程中扮演至关重要的角色，这也会成为更多的企业用户能够从云原生技术生态中获益的一个重要途径。这一点，将会继续成为&nbsp;Kubernetes&nbsp;项目与其他基础设施开源项目的最大不同。 &nbsp; Kubernetes 原生的应用管理能力崭露头角 在长期一段时间里，Kubernetes&nbsp;的应用管理都是由&nbsp;Helm&nbsp;这样的第三方项目或者上层&nbsp;PaaS&nbsp;来完成的。不过，在1.14之后，Kubernetes&nbsp;项目本身开始具备了原生的应用管理能力，这其中最重要的一个功能，就是&nbsp;Kustomize。 &nbsp; Kustomize&nbsp;允许用户以一个应用描述文件&nbsp;（YAML&nbsp;文件）为基础（Base&nbsp;YAML），然后通过&nbsp;Overlay&nbsp;的方式生成最终部署应用所需的描述文件，而不是像&nbsp;Helm&nbsp;那样只提供应用描述文件模板，然后通过字符替换（Templating）的方式来进行定制化。 &nbsp; 而与此同时，其他用户可以完全不受影响地使用任何一个&nbsp;Base&nbsp;YAML&nbsp;或者任何一层生成出来的&nbsp;YAML&nbsp;。这使得每一个用户都可以通过类似&nbsp;fork/modify/rebase&nbsp;这样&nbsp;Git&nbsp;风格的流程来管理海量的应用描述文件。这种&nbsp;PATCH&nbsp;的思想跟&nbsp;Docker&nbsp;镜像是非常相似的，它可以规避“字符替换”对应用描述文件的入侵，也不需要用户学习额外的&nbsp;DSL&nbsp;语法（比如&nbsp;Lua）。 &nbsp; 更为重要的是，上述PATCH&nbsp;的思想，跟&nbsp;Kubernetes&nbsp;项目强调的声明式&nbsp;API&nbsp;是完全匹配的，整个使用体验跟&nbsp;Kubernetes&nbsp;API&nbsp;本身完全一致，没有割裂感（大家可以思考一下为什么&nbsp;PATCH&nbsp;才是声明式&nbsp;API&nbsp;的精髓）。 &nbsp; 在1.14发布中，Kustomize&nbsp;功能已经成为了&nbsp;kubectl&nbsp;的一个内置命令，这使得用户使用&nbsp;Kubernetes&nbsp;的声明式&nbsp;API来直接在云端管理、修改和部署海量的应用成为了可能。并且，kubectl&nbsp;本身的插件机制也在1.14中得到了大量完善，使得&nbsp;kubectl&nbsp;结合各种客户端插件已经具备成为应用管理工具的潜在能力。而在这样的演进路线下，Kubernetes&nbsp;项目对应用以及应用管理的定义也开始清晰了起来，我们可以用如下一幅示意图来简单描述： &nbsp; &nbsp; 在这个&nbsp;Kubernetes&nbsp;原生的应用管理体系中，应用描述文件（YAML&nbsp;文件）居于核心位置。一份应用描述文件，实际上是多个&nbsp;Kubernetes&nbsp;API&nbsp;对象的组合，共同定义了这个部署这个应用所需的资源编排和服务编排内容。一旦这样一个描述文件提交给Kubernetes&nbsp;，那么接下来它就会通过控制器模式来保证整个集群里的状态与该描述文件的定义完全一致。 &nbsp; 这些描述文件的来源，则来自于上层框架或者用户的产出。更为重要的是，所有对应用的操作，都应该通过声明式&nbsp;API&nbsp;对该文件进行&nbsp;Create、Patch&nbsp;和&nbsp;Delete&nbsp;操作来完成，进而触发&nbsp;Kubernetes&nbsp;的控制器模型执行预定义的编排动作。 &nbsp; 不难看到，在这个模型中，Helm&nbsp;和&nbsp;Kustomize&nbsp;其实定义了两种不同的应用描述文件的产出路径和用户体验，也代表了两种同&nbsp;Kubernetes&nbsp;API&nbsp;不同的耦合度和抽象程度：一个自成体系，一个则融入到了&nbsp;Kubernetes的设计理念当中。在1.14发布之后，Kubernetes&nbsp;社区当前正在探索的这种应用管理体系效果如何，我们不妨拭目以待。 &nbsp; 大规模场景下的性能优化工作逐渐提上日程 熟悉&nbsp;Kubernetes&nbsp;项目的很多参与者可能都知道，在过去一段时间，Kubernetes&nbsp;社区对于大规模场景下的性能优化工作的优先级大多不会非常高。这里的原因也比较容易理解，在一个基础设施开源项目发展的早期，扩大生态和完善功能相比于支持更大的集群来说往往要更重要一些。 &nbsp; 但在&nbsp;Kubernetes&nbsp;的主干功能日趋稳定之后，社区一定会开始更多地关注大规模场景下&nbsp;Kubernetes&nbsp;项目会暴露出来的各种各样的问题，这其实依然容易理解：中小规模的用户固然是整个项目取得生态成功的根本，但是通过&nbsp;Kubernetes&nbsp;这条路径让更多的沃尔玛、星巴克、国内外的技术独角兽们成为云原生技术的受益者，进而成为公共云上的规模性用户，一定是&nbsp;Kubernetes&nbsp;社区要重点考虑的发展方向。 &nbsp; 当然，作为一个天然处于“被集成”位置的基础设施项目，Kubernetes&nbsp;进行性能提升的主要方向，一定优先关注于与上层使用者关系最为紧密的&nbsp;API&nbsp;层以及客户端使用场景。当然，这也与&nbsp;Kubernetes&nbsp;项目的架构关系紧密：声明式&nbsp;API&nbsp;的设计围绕着以&nbsp;etcd&nbsp;为核心的配置管理机制，使得&nbsp;Kubernetes&nbsp;项目天生就是一个重&nbsp;API&nbsp;层而轻调度的分布式系统。这也意味着当需要管理的配置信息（即：API&nbsp;对象）数量巨大时，这一层也是最有可能的暴露出性能问题的领域。 &nbsp; 所以，在&nbsp;Kubernetes&nbsp;v1.14中，社区首先从面向最终用户的角度做出了很多优化，比如：&nbsp;kubectl&nbsp;对&nbsp;API&nbsp;对象的遍历行为进行了大量的并行化工作。这种看似微小的修改在大规模场景下对&nbsp;kubectl&nbsp;使用者带来的性能提升体验，却是非常显著的。 &nbsp; 当然，最重要的工作，还是发生在&nbsp;APIServer&nbsp;本身的性能优化上。比如，Kubernetes&nbsp;的&nbsp;Aggregated&nbsp;API&nbsp;允许开发人员编写一个自定义服务，并把这个服务注册到&nbsp;k8s&nbsp;的&nbsp;API&nbsp;里面像原生&nbsp;API&nbsp;一样使用。但是在这个情况下，APIServer&nbsp;会将用户自定义&nbsp;API&nbsp;Spec&nbsp;与原生的&nbsp;API&nbsp;Spec&nbsp;归并起来，这是一个非常消耗CPU&nbsp;的性能痛点。而在v1.14中，社区专门对这个操作的效率进行了细致的优化，最终极将APIServer&nbsp;归并&nbsp;Spec&nbsp;的性能提升了十倍以上。 &nbsp; 除此之外，Kubernetes&nbsp;项目性能提升的另一个重要方向，就是对&nbsp;etcd&nbsp;到&nbsp;APIServer&nbsp;之间的连接路径的优化和提升上。作为&nbsp;Kubernetes&nbsp;项目的配置中心，也是唯一的外部数据依赖，etcd&nbsp;每一次提交操作的数据量和间隔大小，每一个连接的请求和响应周期，都有可能对最终&nbsp;Kubernetes&nbsp;项目在大规模场景下的性能表现产生影响。阿里巴巴的技术团队在&nbsp;etcd&nbsp;项目的中一直在持续进行性能调优与提升工作并已陆续发布在了&nbsp;etcd&nbsp;的最新版本当中。这些内容虽然不属于&nbsp;Kubernetes&nbsp;1.14&nbsp;发布的一部分，但同样值得我们关注。 &nbsp; 可扩展能力和项目稳定性持续提升 除了上述几个领域在本次发布后逐步成为核心领域之外，Kubernetes&nbsp;项目在过往一直比较重视的几个核心方向，比如，可扩展能力的提升，项目稳定性等，依然是&nbsp;Kubernetes&nbsp;项目继续演进的重要旋律。所以在&nbsp;Kubernetes&nbsp;1.14中，才会出现很多像“Pod&nbsp;Ready&nbsp;++”&nbsp;这样将原本已经成熟的系统特性进一步重构成为可扩展接口的重要变更。在&nbsp;Pod&nbsp;Ready&nbsp;++&nbsp;正式发布后，Kubernetes&nbsp;用户只需要自己编写一个外部控制器（Controller）就可以非常方便地自定义一个应用从创建到最终可用（Ready）的标准到底是什么，而不是被强迫遵守&nbsp;Kubernetes&nbsp;项目已有的定义方法。这种能力，同样是基础设施开源项目“民主化”的重要体现。 &nbsp; 总结 Kubernetes&nbsp;1.14的发布，在这个日趋成熟稳定的项目开源基础设施项目的发展过程中有着重要的承前启后的作用。所以我们会看到，Kubernetes&nbsp;社区正在几个以往并不太受关注的领域里开始持续发力，甚至有可能会进一步改变整个云原生社区在某些领域的发展方向。这种在日趋稳定的发展历程中不时透露出来的技术革新，也正是这个社区能够持续令人兴奋的关键所在。 &nbsp; 而放眼当前的云计算生态，国外越来越多的大规模企业级用户比如&nbsp;Snapchat、Twitter&nbsp;等都已经开始了将自己的整套技术栈直接迁往以&nbsp;Kubernetes&nbsp;为基础的公共云服务上，这正好印证了“云原生”这个关键词的本质含义：在未来云的时代，软件的开发、测试、发布、运维等完整的生命周期，都会基于云来进行。而所谓的“云原生”，其实正在通过一系列技术手段，为广大开发者编制出了一幅能够让软件天然的生长在云上、交付在云上，从而最大程度地发挥出云的价值的技术蓝图。 &nbsp; 更多关于云原生技术原理和实践的内容，欢迎点击文末“阅读原文”关注阿里云和CNCF&nbsp;官方联合开发的免费公开课《CNCF&nbsp;x&nbsp;Alibaba&nbsp;云原生技术公开课》：业内一线技术大咖为你剖析云原生技术核心原理与落地实践，期待各位的学习与反馈。 参考资料： https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.14.md 小彩蛋来了！ 一年之计在于春。阿里妹整理了自阿里技术公众号诞生以来，最受欢迎的技术干货，分门别类打好包，送给大家。&nbsp;点此阅读：阿里技术干货合集 你可能还喜欢 点击下方图片即可阅读 今天，阿里巴巴报告厅里只谈快乐的数学 直播：对话Ruby创始人 阿里巴巴2019实习生招聘正式启动！" />
<link rel="canonical" href="https://mlh.app/2019/04/29/729073.html" />
<meta property="og:url" content="https://mlh.app/2019/04/29/729073.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-29T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"阿里妹导读：如果说以“不断提升插件能力和可扩展能力”的&nbsp;“基础设施开源项目民主化”进程是&nbsp;Kubernetes&nbsp;在2017-2018年的核心主题的话，那么在2019年，这个技术社区的发展脉络又是怎样的呢？ &nbsp; 今天，阿里云高级技术专家张磊将从&nbsp;Kubernetes&nbsp;1.14&nbsp;这个承前启后的版本聊起，一窥技术社区的演进方向。 Kubernetes&nbsp;1.14&nbsp;正式发布已经过去了一段时间，相信你已经从不同渠道看过了各种版本的解读。 &nbsp; 不过，相比于代码&nbsp;Release，马上就要迎来5周岁生日的&nbsp;Kubernetes&nbsp;项目接下来如何演进，其实也是一个让人着迷的话题。而作为一个日趋成熟的开源生态，Kubernetes&nbsp;项目每三个月一次的正式发布，其实正是这个高速发展的技术社区不断向前演进的过程中留下的扎实脚印。 &nbsp; Windows 生态成为 Kubernetes 项目的一等公民 Kubernetes&nbsp;对&nbsp;Windows&nbsp;生态的支持，自从这个项目发布起就被提上了日程。不过，作为一个纯粹的&nbsp;Linux&nbsp;技术栈支撑的基础设施开源项目，Windows&nbsp;节点以及&nbsp;Windows&nbsp;容器支持真正取得实质性进展，还是要从&nbsp;Kubernetes&nbsp;项目的插件和可扩展能力在1.6版本后逐渐成熟之后才慢慢步入了正轨。这也很容易理解，Windows&nbsp;体系与目前主流容器技术栈有着本质性的差异，这就要求&nbsp;Kubernetes&nbsp;项目必须能够提供更高层次的抽象和可扩展能力以支持两种迥然不同的技术栈，并且同现有的Kubernetes&nbsp;生态比如&nbsp;CNI&nbsp;和&nbsp;CSI&nbsp;完成对接。这部分工作的复杂度和工作量，也是&nbsp;Windows&nbsp;Node&nbsp;的生产可用从1.13延期到1.14的主要原因。 &nbsp; 而在这次1.14的发布中，Kubernetes&nbsp;的&nbsp;Pod，Service，应用编排，CNI&nbsp;网络等绝大多数核心能力都已经在&nbsp;Windows&nbsp;节点上得到了支持。此外，包括自定义监控指标、水平扩展、抢占和优先级调度等很多进阶功能也都在&nbsp;Windows&nbsp;上得以实现。 目前，尚不能被支持的功能基本上都是在&nbsp;Windows&nbsp;上暂时无法实现的语义比如&nbsp;Host&nbsp;Network&nbsp;以及其它&nbsp;Linux&nbsp;内核专属的资源和权限定义方式等。可以看到，Kubernetes&nbsp;这次发布对&nbsp;Windows&nbsp;节点和&nbsp;Windows&nbsp;容器的支持，较之前相比有了巨大提升，完成度非常高，确实对得起&nbsp;“GA”这个具备承诺意味的发布用语。 而国内外公共云提供商比如阿里云容器服务（ACK）也已经于近期已经推出了&nbsp;Windows&nbsp;Container&nbsp;的支持，提供了&nbsp;Linux/Windows&nbsp;应用混合部署的统一管理能力，再一次印证了这次发布的可用度。 &nbsp; 不难看到，公共云提供商（比如本次Windows&nbsp;支持GA背后的微软云团队）作为&nbsp;CNCF社区的主要推动方之一，实际上一直在整个云原生技术生态中发挥着巨大的作用，逐步促成了将像&nbsp;Windows&nbsp;支持这样的实际企业用户诉求带给了一个高速发展的、完全以&nbsp;Linux&nbsp;技术栈为核心的基础设施项目。而在未来的发展中，诸如此类的来自于公共云提供商的输入，将会继续在&nbsp;Kubernetes&nbsp;项目发展的过程中扮演至关重要的角色，这也会成为更多的企业用户能够从云原生技术生态中获益的一个重要途径。这一点，将会继续成为&nbsp;Kubernetes&nbsp;项目与其他基础设施开源项目的最大不同。 &nbsp; Kubernetes 原生的应用管理能力崭露头角 在长期一段时间里，Kubernetes&nbsp;的应用管理都是由&nbsp;Helm&nbsp;这样的第三方项目或者上层&nbsp;PaaS&nbsp;来完成的。不过，在1.14之后，Kubernetes&nbsp;项目本身开始具备了原生的应用管理能力，这其中最重要的一个功能，就是&nbsp;Kustomize。 &nbsp; Kustomize&nbsp;允许用户以一个应用描述文件&nbsp;（YAML&nbsp;文件）为基础（Base&nbsp;YAML），然后通过&nbsp;Overlay&nbsp;的方式生成最终部署应用所需的描述文件，而不是像&nbsp;Helm&nbsp;那样只提供应用描述文件模板，然后通过字符替换（Templating）的方式来进行定制化。 &nbsp; 而与此同时，其他用户可以完全不受影响地使用任何一个&nbsp;Base&nbsp;YAML&nbsp;或者任何一层生成出来的&nbsp;YAML&nbsp;。这使得每一个用户都可以通过类似&nbsp;fork/modify/rebase&nbsp;这样&nbsp;Git&nbsp;风格的流程来管理海量的应用描述文件。这种&nbsp;PATCH&nbsp;的思想跟&nbsp;Docker&nbsp;镜像是非常相似的，它可以规避“字符替换”对应用描述文件的入侵，也不需要用户学习额外的&nbsp;DSL&nbsp;语法（比如&nbsp;Lua）。 &nbsp; 更为重要的是，上述PATCH&nbsp;的思想，跟&nbsp;Kubernetes&nbsp;项目强调的声明式&nbsp;API&nbsp;是完全匹配的，整个使用体验跟&nbsp;Kubernetes&nbsp;API&nbsp;本身完全一致，没有割裂感（大家可以思考一下为什么&nbsp;PATCH&nbsp;才是声明式&nbsp;API&nbsp;的精髓）。 &nbsp; 在1.14发布中，Kustomize&nbsp;功能已经成为了&nbsp;kubectl&nbsp;的一个内置命令，这使得用户使用&nbsp;Kubernetes&nbsp;的声明式&nbsp;API来直接在云端管理、修改和部署海量的应用成为了可能。并且，kubectl&nbsp;本身的插件机制也在1.14中得到了大量完善，使得&nbsp;kubectl&nbsp;结合各种客户端插件已经具备成为应用管理工具的潜在能力。而在这样的演进路线下，Kubernetes&nbsp;项目对应用以及应用管理的定义也开始清晰了起来，我们可以用如下一幅示意图来简单描述： &nbsp; &nbsp; 在这个&nbsp;Kubernetes&nbsp;原生的应用管理体系中，应用描述文件（YAML&nbsp;文件）居于核心位置。一份应用描述文件，实际上是多个&nbsp;Kubernetes&nbsp;API&nbsp;对象的组合，共同定义了这个部署这个应用所需的资源编排和服务编排内容。一旦这样一个描述文件提交给Kubernetes&nbsp;，那么接下来它就会通过控制器模式来保证整个集群里的状态与该描述文件的定义完全一致。 &nbsp; 这些描述文件的来源，则来自于上层框架或者用户的产出。更为重要的是，所有对应用的操作，都应该通过声明式&nbsp;API&nbsp;对该文件进行&nbsp;Create、Patch&nbsp;和&nbsp;Delete&nbsp;操作来完成，进而触发&nbsp;Kubernetes&nbsp;的控制器模型执行预定义的编排动作。 &nbsp; 不难看到，在这个模型中，Helm&nbsp;和&nbsp;Kustomize&nbsp;其实定义了两种不同的应用描述文件的产出路径和用户体验，也代表了两种同&nbsp;Kubernetes&nbsp;API&nbsp;不同的耦合度和抽象程度：一个自成体系，一个则融入到了&nbsp;Kubernetes的设计理念当中。在1.14发布之后，Kubernetes&nbsp;社区当前正在探索的这种应用管理体系效果如何，我们不妨拭目以待。 &nbsp; 大规模场景下的性能优化工作逐渐提上日程 熟悉&nbsp;Kubernetes&nbsp;项目的很多参与者可能都知道，在过去一段时间，Kubernetes&nbsp;社区对于大规模场景下的性能优化工作的优先级大多不会非常高。这里的原因也比较容易理解，在一个基础设施开源项目发展的早期，扩大生态和完善功能相比于支持更大的集群来说往往要更重要一些。 &nbsp; 但在&nbsp;Kubernetes&nbsp;的主干功能日趋稳定之后，社区一定会开始更多地关注大规模场景下&nbsp;Kubernetes&nbsp;项目会暴露出来的各种各样的问题，这其实依然容易理解：中小规模的用户固然是整个项目取得生态成功的根本，但是通过&nbsp;Kubernetes&nbsp;这条路径让更多的沃尔玛、星巴克、国内外的技术独角兽们成为云原生技术的受益者，进而成为公共云上的规模性用户，一定是&nbsp;Kubernetes&nbsp;社区要重点考虑的发展方向。 &nbsp; 当然，作为一个天然处于“被集成”位置的基础设施项目，Kubernetes&nbsp;进行性能提升的主要方向，一定优先关注于与上层使用者关系最为紧密的&nbsp;API&nbsp;层以及客户端使用场景。当然，这也与&nbsp;Kubernetes&nbsp;项目的架构关系紧密：声明式&nbsp;API&nbsp;的设计围绕着以&nbsp;etcd&nbsp;为核心的配置管理机制，使得&nbsp;Kubernetes&nbsp;项目天生就是一个重&nbsp;API&nbsp;层而轻调度的分布式系统。这也意味着当需要管理的配置信息（即：API&nbsp;对象）数量巨大时，这一层也是最有可能的暴露出性能问题的领域。 &nbsp; 所以，在&nbsp;Kubernetes&nbsp;v1.14中，社区首先从面向最终用户的角度做出了很多优化，比如：&nbsp;kubectl&nbsp;对&nbsp;API&nbsp;对象的遍历行为进行了大量的并行化工作。这种看似微小的修改在大规模场景下对&nbsp;kubectl&nbsp;使用者带来的性能提升体验，却是非常显著的。 &nbsp; 当然，最重要的工作，还是发生在&nbsp;APIServer&nbsp;本身的性能优化上。比如，Kubernetes&nbsp;的&nbsp;Aggregated&nbsp;API&nbsp;允许开发人员编写一个自定义服务，并把这个服务注册到&nbsp;k8s&nbsp;的&nbsp;API&nbsp;里面像原生&nbsp;API&nbsp;一样使用。但是在这个情况下，APIServer&nbsp;会将用户自定义&nbsp;API&nbsp;Spec&nbsp;与原生的&nbsp;API&nbsp;Spec&nbsp;归并起来，这是一个非常消耗CPU&nbsp;的性能痛点。而在v1.14中，社区专门对这个操作的效率进行了细致的优化，最终极将APIServer&nbsp;归并&nbsp;Spec&nbsp;的性能提升了十倍以上。 &nbsp; 除此之外，Kubernetes&nbsp;项目性能提升的另一个重要方向，就是对&nbsp;etcd&nbsp;到&nbsp;APIServer&nbsp;之间的连接路径的优化和提升上。作为&nbsp;Kubernetes&nbsp;项目的配置中心，也是唯一的外部数据依赖，etcd&nbsp;每一次提交操作的数据量和间隔大小，每一个连接的请求和响应周期，都有可能对最终&nbsp;Kubernetes&nbsp;项目在大规模场景下的性能表现产生影响。阿里巴巴的技术团队在&nbsp;etcd&nbsp;项目的中一直在持续进行性能调优与提升工作并已陆续发布在了&nbsp;etcd&nbsp;的最新版本当中。这些内容虽然不属于&nbsp;Kubernetes&nbsp;1.14&nbsp;发布的一部分，但同样值得我们关注。 &nbsp; 可扩展能力和项目稳定性持续提升 除了上述几个领域在本次发布后逐步成为核心领域之外，Kubernetes&nbsp;项目在过往一直比较重视的几个核心方向，比如，可扩展能力的提升，项目稳定性等，依然是&nbsp;Kubernetes&nbsp;项目继续演进的重要旋律。所以在&nbsp;Kubernetes&nbsp;1.14中，才会出现很多像“Pod&nbsp;Ready&nbsp;++”&nbsp;这样将原本已经成熟的系统特性进一步重构成为可扩展接口的重要变更。在&nbsp;Pod&nbsp;Ready&nbsp;++&nbsp;正式发布后，Kubernetes&nbsp;用户只需要自己编写一个外部控制器（Controller）就可以非常方便地自定义一个应用从创建到最终可用（Ready）的标准到底是什么，而不是被强迫遵守&nbsp;Kubernetes&nbsp;项目已有的定义方法。这种能力，同样是基础设施开源项目“民主化”的重要体现。 &nbsp; 总结 Kubernetes&nbsp;1.14的发布，在这个日趋成熟稳定的项目开源基础设施项目的发展过程中有着重要的承前启后的作用。所以我们会看到，Kubernetes&nbsp;社区正在几个以往并不太受关注的领域里开始持续发力，甚至有可能会进一步改变整个云原生社区在某些领域的发展方向。这种在日趋稳定的发展历程中不时透露出来的技术革新，也正是这个社区能够持续令人兴奋的关键所在。 &nbsp; 而放眼当前的云计算生态，国外越来越多的大规模企业级用户比如&nbsp;Snapchat、Twitter&nbsp;等都已经开始了将自己的整套技术栈直接迁往以&nbsp;Kubernetes&nbsp;为基础的公共云服务上，这正好印证了“云原生”这个关键词的本质含义：在未来云的时代，软件的开发、测试、发布、运维等完整的生命周期，都会基于云来进行。而所谓的“云原生”，其实正在通过一系列技术手段，为广大开发者编制出了一幅能够让软件天然的生长在云上、交付在云上，从而最大程度地发挥出云的价值的技术蓝图。 &nbsp; 更多关于云原生技术原理和实践的内容，欢迎点击文末“阅读原文”关注阿里云和CNCF&nbsp;官方联合开发的免费公开课《CNCF&nbsp;x&nbsp;Alibaba&nbsp;云原生技术公开课》：业内一线技术大咖为你剖析云原生技术核心原理与落地实践，期待各位的学习与反馈。 参考资料： https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.14.md 小彩蛋来了！ 一年之计在于春。阿里妹整理了自阿里技术公众号诞生以来，最受欢迎的技术干货，分门别类打好包，送给大家。&nbsp;点此阅读：阿里技术干货合集 你可能还喜欢 点击下方图片即可阅读 今天，阿里巴巴报告厅里只谈快乐的数学 直播：对话Ruby创始人 阿里巴巴2019实习生招聘正式启动！","@type":"BlogPosting","url":"https://mlh.app/2019/04/29/729073.html","headline":"从 Kubernetes 1.14 发布，看技术社区演进方向","dateModified":"2019-04-29T00:00:00+08:00","datePublished":"2019-04-29T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/04/29/729073.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>从 Kubernetes 1.14 发布，看技术社区演进方向</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <p style="white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><img class="rich_pages" data-backh="439" data-backw="556" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_jpg/LwZPmXjm4Wwqf93icySvVUz7lLYaQL8UibttjHbBaAwAYDNJERibJhiagLsvicH3icjCbqTia3HKYRZlVQ89WTYFIIaRg/640?wx_fmt=jpeg" data-copyright="0" data-cropselx1="0" data-cropselx2="556" data-cropsely1="0" data-cropsely2="411" data-ratio="0.7898148148148149" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/LwZPmXjm4Wwqf93icySvVUz7lLYaQL8UibttjHbBaAwAYDNJERibJhiagLsvicH3icjCbqTia3HKYRZlVQ89WTYFIIaRg/640?wx_fmt=jpeg" data-type="jpeg" data-w="1080" style="letter-spacing: 0.5440000295639038px;white-space: normal;background-color: rgb(255, 255, 255);width: 556px;box-sizing: border-box !important;word-wrap: break-word !important;visibility: visible !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/LwZPmXjm4Wwqf93icySvVUz7lLYaQL8UibttjHbBaAwAYDNJERibJhiagLsvicH3icjCbqTia3HKYRZlVQ89WTYFIIaRg/640?wx_fmt=jpeg"></p> 
<section class="" powered-by="xiumi.us" style="white-space: normal;max-width: 100%;letter-spacing: 0.544px;line-height: 27.2px;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"> 
 <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
  <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
   <section class="" powered-by="xiumi.us" style="max-width: 100%;letter-spacing: 0.544px;box-sizing: border-box !important;word-wrap: break-word !important;"> 
    <section class="" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
     <section label="Copyright Reserved by PLAYHUDONG." donone="shifuMouseDownCard('shifu_c_008')" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
      <section class="" powered-by="xiumi.us" style="max-width: 100%;letter-spacing: 0.612px;box-sizing: border-box !important;word-wrap: break-word !important;"> 
       <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
        <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
         <section class="" powered-by="xiumi.us" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
          <section class="" powered-by="xiumi.us" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
           <section label="Copyright Reserved by PLAYHUDONG." donone="shifuMouseDownCard('shifu_c_008')" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
            <section class="" powered-by="xiumi.us" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
             <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
              <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
               <section class="" powered-by="xiumi.us" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
                <section class="" powered-by="xiumi.us" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
                 <section label="Copyright Reserved by PLAYHUDONG." donone="shifuMouseDownCard('shifu_c_008')" style="margin-right: 0em;margin-left: 0em;padding: 0.5em 1em;max-width: 100%;border-style: none;background-color: rgb(235, 235, 235);box-sizing: border-box !important;word-wrap: break-word !important;"> 
                  <p style="max-width: 100%;min-height: 1em;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 15px;letter-spacing: 0.612px;box-sizing: border-box !important;word-wrap: break-word !important;">阿里妹导读：</span><span style="color: rgb(136, 136, 136);font-size: 15px;letter-spacing: 0.612px;text-align: left;">如果说以“不断提升插件能力和可扩展能力”的&nbsp;“基础设施开源项目民主化”进程是&nbsp;Kubernetes&nbsp;在2017-2018年的核心主题的话，那么在2019年，这个技术社区的发展脉络又是怎样的呢？</span></p> 
                  <p style="text-align: left;line-height: 1.75em;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 15px;letter-spacing: 0.612px;box-sizing: border-box !important;word-wrap: break-word !important;">&nbsp;</span></p> 
                  <p style="text-align: left;line-height: 1.75em;"><span style="max-width: 100%;color: rgb(136, 136, 136);font-size: 15px;letter-spacing: 0.612px;box-sizing: border-box !important;word-wrap: break-word !important;">今天，阿里云高级技术专家张磊将从&nbsp;Kubernetes&nbsp;1.14&nbsp;这个承前启后的版本聊起，一窥技术社区的演进方向。</span></p> 
                 </section> 
                </section> 
               </section> 
              </section> 
             </section> 
            </section> 
           </section> 
          </section> 
         </section> 
        </section> 
       </section> 
      </section> 
     </section> 
    </section> 
   </section> 
  </section> 
 </section> 
</section> 
<p style="white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="color: rgb(62, 62, 62);font-size: 15px;">Kubernetes&nbsp;1.14&nbsp;正式发布已经过去了一段时间，相信你已经从不同渠道看过了各种版本的解读。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">不过，相比于代码&nbsp;Release，马上就要迎来5周岁生日的&nbsp;Kubernetes&nbsp;项目接下来如何演进，其实也是一个让人着迷的话题。而作为一个日趋成熟的开源生态，Kubernetes&nbsp;项目每三个月一次的正式发布，其实正是这个高速发展的技术社区不断向前演进的过程中留下的扎实脚印。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<h2 style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="color: rgb(255, 129, 36);"><strong><span style="font-size: 15px;">Windows 生态成为 Kubernetes 项目的一等公民</span></strong></span></h2> 
<p style="white-space: normal;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">Kubernetes&nbsp;对&nbsp;Windows&nbsp;生态的支持，自从这个项目发布起就被提上了日程。不过，作为一个纯粹的&nbsp;Linux&nbsp;技术栈支撑的基础设施开源项目，Windows&nbsp;节点以及&nbsp;Windows&nbsp;容器支持真正取得实质性进展，还是要从&nbsp;Kubernetes&nbsp;项目的插件和可扩展能力在1.6版本后逐渐成熟之后才慢慢步入了正轨。这也很容易理解，Windows&nbsp;体系与目前主流容器技术栈有着本质性的差异，这就要求&nbsp;Kubernetes&nbsp;项目必须能够提供更高层次的抽象和可扩展能力以支持两种迥然不同的技术栈，并且同现有的Kubernetes&nbsp;生态比如&nbsp;CNI&nbsp;和&nbsp;CSI&nbsp;完成对接。这部分工作的复杂度和工作量，也是&nbsp;Windows&nbsp;Node&nbsp;的生产可用从1.13延期到1.14的主要原因。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">而在这次1.14的发布中，Kubernetes&nbsp;的&nbsp;Pod，Service，应用编排，CNI&nbsp;网络等绝大多数核心能力都已经在&nbsp;Windows&nbsp;节点上得到了支持。此外，包括自定义监控指标、水平扩展、抢占和优先级调度等很多进阶功能也都在&nbsp;Windows&nbsp;上得以实现。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">目前，尚不能被支持的功能基本上都是在&nbsp;Windows&nbsp;上暂时无法实现的语义比如&nbsp;Host&nbsp;Network&nbsp;以及其它&nbsp;Linux&nbsp;内核专属的资源和权限定义方式等。可以看到，Kubernetes&nbsp;这次发布对&nbsp;Windows&nbsp;节点和&nbsp;Windows&nbsp;容器的支持，较之前相比有了巨大提升，完成度非常高，确实对得起&nbsp;“GA”这个具备承诺意味的发布用语。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">而国内外公共云提供商比如阿里云容器服务（ACK）也已经于近期已经推出了&nbsp;Windows&nbsp;Container&nbsp;的支持，提供了&nbsp;Linux/Windows&nbsp;应用混合部署的统一管理能力，再一次印证了这次发布的可用度。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">不难看到，公共云提供商（比如本次Windows&nbsp;支持GA背后的微软云团队）作为&nbsp;CNCF社区的主要推动方之一，实际上一直在整个云原生技术生态中发挥着巨大的作用，逐步促成了将像&nbsp;Windows&nbsp;支持这样的实际企业用户诉求带给了一个高速发展的、完全以&nbsp;Linux&nbsp;技术栈为核心的基础设施项目。而在未来的发展中，诸如此类的来自于公共云提供商的输入，将会继续在&nbsp;Kubernetes&nbsp;项目发展的过程中扮演至关重要的角色，这也会成为更多的企业用户能够从云原生技术生态中获益的一个重要途径。这一点，将会继续成为&nbsp;Kubernetes&nbsp;项目与其他基础设施开源项目的最大不同。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<h2 style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="color: rgb(255, 129, 36);"><strong><span style="font-size: 15px;">Kubernetes 原生的应用管理能力崭露头角</span></strong></span></h2> 
<p style="white-space: normal;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">在长期一段时间里，Kubernetes&nbsp;的应用管理都是由&nbsp;Helm&nbsp;这样的第三方项目或者上层&nbsp;PaaS&nbsp;来完成的。不过，在1.14之后，Kubernetes&nbsp;项目本身开始具备了原生的应用管理能力，这其中最重要的一个功能，就是&nbsp;Kustomize。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">Kustomize&nbsp;允许用户以一个应用描述文件&nbsp;（YAML&nbsp;文件）为基础（Base&nbsp;YAML），然后通过&nbsp;Overlay&nbsp;的方式生成最终部署应用所需的描述文件，而不是像&nbsp;Helm&nbsp;那样只提供应用描述文件模板，然后通过字符替换（Templating）的方式来进行定制化。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">而与此同时，其他用户可以完全不受影响地使用任何一个&nbsp;Base&nbsp;YAML&nbsp;或者任何一层生成出来的&nbsp;YAML&nbsp;。这使得每一个用户都可以通过类似&nbsp;fork/modify/rebase&nbsp;这样&nbsp;Git&nbsp;风格的流程来管理海量的应用描述文件。这种&nbsp;PATCH&nbsp;的思想跟&nbsp;Docker&nbsp;镜像是非常相似的，它可以规避“字符替换”对应用描述文件的入侵，也不需要用户学习额外的&nbsp;DSL&nbsp;语法（比如&nbsp;Lua）。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">更为重要的是，上述PATCH&nbsp;的思想，跟&nbsp;Kubernetes&nbsp;项目强调的声明式&nbsp;API&nbsp;是完全匹配的，整个使用体验跟&nbsp;Kubernetes&nbsp;API&nbsp;本身完全一致，没有割裂感（大家可以思考一下为什么&nbsp;PATCH&nbsp;才是声明式&nbsp;API&nbsp;的精髓）。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">在1.14发布中，Kustomize&nbsp;功能已经成为了&nbsp;kubectl&nbsp;的一个内置命令，这使得用户使用&nbsp;Kubernetes&nbsp;的声明式&nbsp;API来直接在云端管理、修改和部署海量的应用成为了可能。并且，kubectl&nbsp;本身的插件机制也在1.14中得到了大量完善，使得&nbsp;kubectl&nbsp;结合各种客户端插件已经具备成为应用管理工具的潜在能力。而在这样的演进路线下，Kubernetes&nbsp;项目对应用以及应用管理的定义也开始清晰了起来，我们可以用如下一幅示意图来简单描述：</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: center;"><img class="rich_pages" data-ratio="0.5711805555555556" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/LwZPmXjm4Wwqf93icySvVUz7lLYaQL8UibicPCCNOnPANAREMibrakDpljFn6paxmH1aeDjibic7lomuxNIDebLRdKqA/640?wx_fmt=png" data-type="png" data-w="576" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/LwZPmXjm4Wwqf93icySvVUz7lLYaQL8UibicPCCNOnPANAREMibrakDpljFn6paxmH1aeDjibic7lomuxNIDebLRdKqA/640?wx_fmt=png"></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">在这个&nbsp;Kubernetes&nbsp;原生的应用管理体系中，应用描述文件（YAML&nbsp;文件）居于核心位置。一份应用描述文件，实际上是多个&nbsp;Kubernetes&nbsp;API&nbsp;对象的组合，共同定义了这个部署这个应用所需的资源编排和服务编排内容。一旦这样一个描述文件提交给Kubernetes&nbsp;，那么接下来它就会通过控制器模式来保证整个集群里的状态与该描述文件的定义完全一致。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">这些描述文件的来源，则来自于上层框架或者用户的产出。更为重要的是，所有对应用的操作，都应该通过声明式&nbsp;API&nbsp;对该文件进行&nbsp;Create、Patch&nbsp;和&nbsp;Delete&nbsp;操作来完成，进而触发&nbsp;Kubernetes&nbsp;的控制器模型执行预定义的编排动作。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">不难看到，在这个模型中，Helm&nbsp;和&nbsp;Kustomize&nbsp;其实定义了两种不同的应用描述文件的产出路径和用户体验，也代表了两种同&nbsp;Kubernetes&nbsp;API&nbsp;不同的耦合度和抽象程度：一个自成体系，一个则融入到了&nbsp;Kubernetes的设计理念当中。在1.14发布之后，Kubernetes&nbsp;社区当前正在探索的这种应用管理体系效果如何，我们不妨拭目以待。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<h2 style="white-space: normal;text-align: left;line-height: 1.75em;"><strong><span style="font-size: 15px;color: rgb(255, 129, 36);">大规模场景下的性能优化工作逐渐提上日程</span></strong></h2> 
<p style="white-space: normal;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">熟悉&nbsp;Kubernetes&nbsp;项目的很多参与者可能都知道，在过去一段时间，Kubernetes&nbsp;社区对于大规模场景下的性能优化工作的优先级大多不会非常高。这里的原因也比较容易理解，在一个基础设施开源项目发展的早期，扩大生态和完善功能相比于支持更大的集群来说往往要更重要一些。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">但在&nbsp;Kubernetes&nbsp;的主干功能日趋稳定之后，社区一定会开始更多地关注大规模场景下&nbsp;Kubernetes&nbsp;项目会暴露出来的各种各样的问题，这其实依然容易理解：中小规模的用户固然是整个项目取得生态成功的根本，但是通过&nbsp;Kubernetes&nbsp;这条路径让更多的沃尔玛、星巴克、国内外的技术独角兽们成为云原生技术的受益者，进而成为公共云上的规模性用户，一定是&nbsp;Kubernetes&nbsp;社区要重点考虑的发展方向。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">当然，作为一个天然处于“被集成”位置的基础设施项目，Kubernetes&nbsp;进行性能提升的主要方向，一定优先关注于与上层使用者关系最为紧密的&nbsp;API&nbsp;层以及客户端使用场景。当然，这也与&nbsp;Kubernetes&nbsp;项目的架构关系紧密：声明式&nbsp;API&nbsp;的设计围绕着以&nbsp;etcd&nbsp;为核心的配置管理机制，使得&nbsp;Kubernetes&nbsp;项目天生就是一个重&nbsp;API&nbsp;层而轻调度的分布式系统。这也意味着当需要管理的配置信息（即：API&nbsp;对象）数量巨大时，这一层也是最有可能的暴露出性能问题的领域。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">所以，在&nbsp;Kubernetes&nbsp;v1.14中，社区首先从面向最终用户的角度做出了很多优化，比如：&nbsp;kubectl&nbsp;对&nbsp;API&nbsp;对象的遍历行为进行了大量的并行化工作。这种看似微小的修改在大规模场景下对&nbsp;kubectl&nbsp;使用者带来的性能提升体验，却是非常显著的。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">当然，最重要的工作，还是发生在&nbsp;APIServer&nbsp;本身的性能优化上。比如，Kubernetes&nbsp;的&nbsp;Aggregated&nbsp;API&nbsp;允许开发人员编写一个自定义服务，并把这个服务注册到&nbsp;k8s&nbsp;的&nbsp;API&nbsp;里面像原生&nbsp;API&nbsp;一样使用。但是在这个情况下，APIServer&nbsp;会将用户自定义&nbsp;API&nbsp;Spec&nbsp;与原生的&nbsp;API&nbsp;Spec&nbsp;归并起来，这是一个非常消耗CPU&nbsp;的性能痛点。而在v1.14中，社区专门对这个操作的效率进行了细致的优化，最终极将APIServer&nbsp;归并&nbsp;Spec&nbsp;的性能提升了十倍以上。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">除此之外，Kubernetes&nbsp;项目性能提升的另一个重要方向，就是对&nbsp;etcd&nbsp;到&nbsp;APIServer&nbsp;之间的连接路径的优化和提升上。作为&nbsp;Kubernetes&nbsp;项目的配置中心，也是唯一的外部数据依赖，etcd&nbsp;每一次提交操作的数据量和间隔大小，每一个连接的请求和响应周期，都有可能对最终&nbsp;Kubernetes&nbsp;项目在大规模场景下的性能表现产生影响。阿里巴巴的技术团队在&nbsp;etcd&nbsp;项目的中一直在持续进行性能调优与提升工作并已陆续发布在了&nbsp;etcd&nbsp;的最新版本当中。这些内容虽然不属于&nbsp;Kubernetes&nbsp;1.14&nbsp;发布的一部分，但同样值得我们关注。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<h2 style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="color: rgb(255, 129, 36);"><strong><span style="font-size: 15px;">可扩展能力和项目稳定性持续提升</span></strong></span></h2> 
<p style="white-space: normal;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">除了上述几个领域在本次发布后逐步成为核心领域之外，Kubernetes&nbsp;项目在过往一直比较重视的几个核心方向，比如，可扩展能力的提升，项目稳定性等，依然是&nbsp;Kubernetes&nbsp;项目继续演进的重要旋律。所以在&nbsp;Kubernetes&nbsp;1.14中，才会出现很多像“Pod&nbsp;Ready&nbsp;++”&nbsp;这样将原本已经成熟的系统特性进一步重构成为可扩展接口的重要变更。在&nbsp;Pod&nbsp;Ready&nbsp;++&nbsp;正式发布后，Kubernetes&nbsp;用户只需要自己编写一个外部控制器（Controller）就可以非常方便地自定义一个应用从创建到最终可用（Ready）的标准到底是什么，而不是被强迫遵守&nbsp;Kubernetes&nbsp;项目已有的定义方法。这种能力，同样是基础设施开源项目“民主化”的重要体现。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<h2 style="white-space: normal;text-align: left;line-height: 1.75em;"><strong><span style="font-size: 15px;color: rgb(255, 129, 36);">总结</span></strong></h2> 
<p style="white-space: normal;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">Kubernetes&nbsp;1.14的发布，在这个日趋成熟稳定的项目开源基础设施项目的发展过程中有着重要的承前启后的作用。所以我们会看到，Kubernetes&nbsp;社区正在几个以往并不太受关注的领域里开始持续发力，甚至有可能会进一步改变整个云原生社区在某些领域的发展方向。这种在日趋稳定的发展历程中不时透露出来的技术革新，也正是这个社区能够持续令人兴奋的关键所在。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">而放眼当前的云计算生态，国外越来越多的大规模企业级用户比如&nbsp;Snapchat、Twitter&nbsp;等都已经开始了将自己的整套技术栈直接迁往以&nbsp;Kubernetes&nbsp;为基础的公共云服务上，这正好印证了“云原生”这个关键词的本质含义：在未来云的时代，软件的开发、测试、发布、运维等完整的生命周期，都会基于云来进行。而所谓的“云原生”，其实正在通过一系列技术手段，为广大开发者编制出了一幅能够让软件天然的生长在云上、交付在云上，从而最大程度地发挥出云的价值的技术蓝图。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">&nbsp;</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(62, 62, 62);">更多关于云原生技术原理和实践的内容，欢迎点击文末</span><span style="font-size: 15px;color: rgb(255, 129, 36);"><strong>“阅读原文”</strong></span><span style="font-size: 15px;color: rgb(62, 62, 62);">关注阿里云和CNCF&nbsp;官方联合开发的免费公开课《CNCF&nbsp;x&nbsp;Alibaba&nbsp;云原生技术公开课》：业内一线技术大咖为你剖析云原生技术核心原理与落地实践，期待各位的学习与反馈。</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(136, 136, 136);">参考资料：</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(136, 136, 136);">https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.14.md</span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(136, 136, 136);"><br></span></p> 
<hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(136, 136, 136);"></span><br></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="color: rgb(255, 76, 0);"><strong><span style="font-size: 14px;">小彩蛋来了！</span></strong></span><strong><span style="font-size: 14px;color: rgb(79, 79, 79);"></span></strong></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(79, 79, 79);"><br></span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><span style="font-size: 14px;color: rgb(79, 79, 79);">一年之计在于春。阿里妹整理了自阿里技术公众号诞生以来，最受欢迎的技术干货，分门别类打好包，送给大家。<img data-src="https://res.wx.qq.com/mpres/htmledition/images/icon/common/emotion_panel/smiley/smiley_12.png" data-ratio="1" data-w="20" style="display:inline-block;width:20px;vertical-align:text-bottom;" src="https://uzshare.com/_p?https://res.wx.qq.com/mpres/htmledition/images/icon/common/emotion_panel/smiley/smiley_12.png">&nbsp;点此阅读：<a href="http://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&amp;mid=2247488533&amp;idx=1&amp;sn=64a6e1c605baa15bfd1850d1c3706c03&amp;chksm=e929291ade5ea00c7df680bb6a10bdc05595a6d29083ef5105ba45c6b8cb6aeaa4a637c7bf00&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2">阿里技术干货合集</a></span><span style="font-size: 14px;color: rgb(136, 136, 136);"></span></p> 
<p style="white-space: normal;text-align: left;line-height: 1.75em;"><br></p> 
<p style="min-height: 1em;letter-spacing: 0.5440000295639038px;white-space: normal;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.04907481898632341" data-type="gif" data-w="1243" width="auto" data-src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naKLzTlj0XiaExO7CCIZrf95viarmPTV7zRp58LaaLlESZlOxNwA4nWbpTXfwnOmRWkeBVWcVU2r2pRg/640?wx_fmt=gif" style="box-sizing: border-box !important;word-wrap: break-word !important;visibility: visible !important;width: auto !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naKLzTlj0XiaExO7CCIZrf95viarmPTV7zRp58LaaLlESZlOxNwA4nWbpTXfwnOmRWkeBVWcVU2r2pRg/640?wx_fmt=gif"></p> 
<p style="min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;font-family: monospace;white-space: pre;text-align: center;line-height: 1.75em;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="color: rgb(136, 136, 136);font-size: 15px;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;">你可能还喜欢</strong></span></p> 
<p style="min-height: 1em;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;font-family: monospace;white-space: pre;text-align: center;line-height: 1.75em;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="color: rgb(136, 136, 136);font-size: 12px;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;">点击下方图片即可阅读</span></p> 
<p style="text-align: center;"><br></p> 
<p style="min-height: 1em;letter-spacing: 0.5440000295639038px;white-space: normal;text-align: center;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&amp;mid=2247489972&amp;idx=1&amp;sn=87b338b21479f46551b473253213b233&amp;chksm=e92924bbde5eadad0a5a64c8dd01ad6f5635571b788dec007c217879a60acab66c48e5c6d7e8&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="1" style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><span class="js_jump_icon h5_image_link" data-positionback="static" style="line-height: 0;top: auto;left: auto;right: auto;bottom: auto;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="rich_pages " data-croporisrc="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naIKH5aPyf70VhW1RWoTxXv4xNYfl0qmQzib2CqTAMnV8liaegfp7Tl9Yg0ibsEkPdJWjIGaNicsK0sw8g/0?wx_fmt=jpeg" data-cropx1="130.20057306590257" data-cropx2="1149.7994269340975" data-cropy1="130.20057306590257" data-cropy2="586.8194842406878" data-ratio="0.44847890088321885" data-s="300,640" data-type="jpeg" data-w="1019" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naJKXuH4Od0xiafHoaNiaa0kzd1ytuxSqib2Plicc2bl4xVbBCJf7Ifsvj6JXwGjy74icZrRbHCUsf3LIqw/640?wx_fmt=jpeg" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 556px !important;visibility: visible !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naJKXuH4Od0xiafHoaNiaa0kzd1ytuxSqib2Plicc2bl4xVbBCJf7Ifsvj6JXwGjy74icZrRbHCUsf3LIqw/640?wx_fmt=jpeg"></span></a></p> 
<p style="min-height: 1em;letter-spacing: 0.5440000295639038px;white-space: normal;text-align: center;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&amp;mid=2247489972&amp;idx=1&amp;sn=87b338b21479f46551b473253213b233&amp;chksm=e92924bbde5eadad0a5a64c8dd01ad6f5635571b788dec007c217879a60acab66c48e5c6d7e8&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="font-size: 14px;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;">今天，阿里巴巴报告厅里只谈快乐的数学</span></a><br></p> 
<p style="min-height: 1em;letter-spacing: 0.5440000295639038px;white-space: normal;text-align: center;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"></p> 
<p style="white-space: normal;text-align: center;"><a href="https://mp.weixin.qq.com/s?__biz=MzI0NTE4NjA0OQ==&amp;mid=2658360341&amp;idx=1&amp;sn=1783ea5be2c3fc3e9c76f79bef2bab50&amp;scene=21#wechat_redirect" target="_blank" data-linktype="1"><span class="js_jump_icon h5_image_link" data-positionback="static" style="top: auto;left: auto;right: auto;bottom: auto;"><img class="rich_pages" data-copyright="0" data-ratio="0.4" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naJmOicicAiaIUNc5zXb0ZG3A8aZaSsMXic1A3H7OW6r5yB7oqiaKEmGHMpu9fXSmExYC5u7hy9Yq6xrq4Q/640?wx_fmt=jpeg" data-type="jpeg" data-w="750" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naJmOicicAiaIUNc5zXb0ZG3A8aZaSsMXic1A3H7OW6r5yB7oqiaKEmGHMpu9fXSmExYC5u7hy9Yq6xrq4Q/640?wx_fmt=jpeg"></span></a></p> 
<p style="white-space: normal;text-align: center;"><a href="https://mp.weixin.qq.com/s?__biz=MzI0NTE4NjA0OQ==&amp;mid=2658360341&amp;idx=1&amp;sn=1783ea5be2c3fc3e9c76f79bef2bab50&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;" data-linktype="2">直播：</a><a href="https://mp.weixin.qq.com/s?__biz=MzI0NTE4NjA0OQ==&amp;mid=2658360341&amp;idx=1&amp;sn=1783ea5be2c3fc3e9c76f79bef2bab50&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 14px;" data-linktype="2">对话Ruby创始人</a></p> 
<p style="white-space: normal;text-align: center;"><br></p> 
<p style="min-height: 1em;letter-spacing: 0.5440000295639038px;white-space: normal;text-align: center;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&amp;mid=2247489852&amp;idx=1&amp;sn=6b94d16927eb89fdda103cbae991a50d&amp;chksm=e9292433de5ead2530474a236a02b5d66741e20def6d95e89bede2a3a2d23181ad0243f63d59&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="1" style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><span class="js_jump_icon h5_image_link" data-positionback="static" style="line-height: 0;top: auto;left: auto;right: auto;bottom: auto;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-backh="255" data-backw="556" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLKic1egJxjceV3fxYy7SsKWffsRy23sYQU26XGWBiaLHwOnEicbxa1C77bsvWenQI1KHiccEJQDGRlEA/640?wx_fmt=jpeg" data-copyright="0" data-ratio="0.4582463465553236" data-s="300,640" data-type="jpeg" data-w="958" width="100%" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLKic1egJxjceV3fxYy7SsKWffsRy23sYQU26XGWBiaLHwOnEicbxa1C77bsvWenQI1KHiccEJQDGRlEA/640?wx_fmt=jpeg" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 100% !important;visibility: visible !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLKic1egJxjceV3fxYy7SsKWffsRy23sYQU26XGWBiaLHwOnEicbxa1C77bsvWenQI1KHiccEJQDGRlEA/640?wx_fmt=jpeg"></span></a></p> 
<p style="min-height: 1em;letter-spacing: 0.5440000295639038px;white-space: normal;text-align: center;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="http://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&amp;mid=2247489852&amp;idx=1&amp;sn=6b94d16927eb89fdda103cbae991a50d&amp;chksm=e9292433de5ead2530474a236a02b5d66741e20def6d95e89bede2a3a2d23181ad0243f63d59&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" style="font-size: 14px;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;">阿里巴巴2019实习生招聘正式启动！</span></a><br style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"></p> 
<p style="min-height: 1em;letter-spacing: 0.5440000295639038px;white-space: normal;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"><br style="max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;"></p> 
<p style="min-height: 1em;letter-spacing: 0.544px;white-space: normal;text-align: center;max-width: 100% !important;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><img class="__bg_gif " data-copyright="0" data-ratio="1.0616740088105727" data-type="gif" data-w="454" width="253px" data-src="https://mmbiz.qpic.cn/mmbiz_gif/Z6bicxIx5naKcJeVLrERoBcjILPJtnWgOAsnKJ8RVuvGo7DPusIGvV4iauQEEAUlh9GyGu7ZZX9XqOCPOGiaUdXVg/640?wx_fmt=gif" style="box-sizing: border-box !important;word-wrap: break-word !important;width: 253px !important;visibility: visible !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_gif/Z6bicxIx5naKcJeVLrERoBcjILPJtnWgOAsnKJ8RVuvGo7DPusIGvV4iauQEEAUlh9GyGu7ZZX9XqOCPOGiaUdXVg/640?wx_fmt=gif"></p>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
