<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>SaaS路线图   时光机 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="SaaS路线图   时光机" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="戳蓝字“CSDN云计算”关注我们哦！ 时光机：搭载这部时光机，带您回顾《程序员》大量优秀文章，重温经典技术干货，我们发现硬核技术永不过时，对于get要点、solve难题、提高自我，仍有非凡意义。 作者：Richy Ho是一名软件架 构师，热衷于分布式及 并行计算、机器学习和 数据挖掘、SaaS和云 计算。先后在Cisco、 eBay、Adobe等公司工作。博客在horicky. blogspot.com。 本文介绍了从传统Web应用一步一步迁移到SaaS的历程。 我观察了多家企业从传统 Web 应用迁移到 SaaS 的历程，察觉出其中存在着一种模式。本文试 图将这模式描绘出来，并总结出从中学到的若 干教训。虽然讲解中以 J2EE Web 应用架构作为示 例，但同样的原理也适用于其他技术平台。 &nbsp; 第1阶段：使用中的现有Web应用 在最开始，我们已经拥有正常工作的Web应用。我 们分析现有应用的功能，把各个实现类划分成适当的组 （见图1）。 &nbsp; &nbsp;第2阶段：将功能分散到单独的进程中去 我们分析各个功能，将它们拆分到不同的进程 （JVM）中。拆分要求是粗粒度的，各进程通过一个 Facade类暴露出服务接口，经由这些服务接口实现彼 此间的通信。服务接口可以是各种远程对象调用，也 可以是XML Over HTTP。Restful Web Service是服务 接口实现途径的事实标准（见图2）。 &nbsp; 第3阶段：将不同进程转移到不同机器上 为了进一步扩展，跨越单台服务器能力的局限， 我们将进程转移到不同的机器上。请注意可以是物理 机器，也可以是虚拟机器（见图3）。 &nbsp; 第4阶段：构建服务池 如果服务本身是无状态的，我们可以简单地 向服务池中投入（运行着同样服务的）更多机器， 横向扩展服务的容量。有必要使用一个网络负载均 衡服务器来平均地将工作量分散到池中的服务器上 （见图4）。 当工作负载上升时，可以向池中投入更多机器去 增强服务的总体容量。云计算供应商提供了弹性的扩展能力，使我们可以更加迅速地伸缩 池的大小，更有效率地处理动态的负 载变化。 &nbsp; 第5阶段：通过分区扩展数 据层 业务处理层扩展完毕之后，我 们发现数据层成了瓶颈。因此有必 要通过按照数据的键作分区，分散 数据访问的工作负载。构建分布式 数据库的典型技巧请参考本刊2010 年第1期的文章《NoSQL的模式》 （见图5）。 &nbsp; 第6阶段：加入缓存以降低服 务器负载 如果应用的读/写比很高，或者可 以在一定程度上容忍过时数据，我们 就可以增加一层缓存层，减少对服务 的实际访问量。客户端在向服务发送 请求之前先检查缓存。 &nbsp; 我们需要维持缓存对象的新鲜 度。这方面存在很多方案，比如可以设定缓存对象在一定时间后过期；也 可以在后端数据发生变化的时候，明 确地发出请求，将相应的特定缓存对 象废弃掉（见图6）。 我们可以用本地缓存（位于客 户端所在的机器上），也可以采用 Memcached或者Oracle Coherence这 类分布式缓存引擎。 &nbsp; 第7阶段：考虑对外公开哪些 服务 到了这个阶段，我们希望对外 公开一些服务，也许是服务本身就 是获利渠道，也许是为了更方便与 商业伙伴实现紧密的B2B集成。决 定暴露哪些东西，牵涉到非常多的 考虑因素，比如安全、可伸缩性、 服 务 水 平 协 议 、 使 用 情 况 跟 踪 等 （见图7）。 &nbsp; 第8阶段：部署服务入口网关 决定对外暴露哪些服务之后，我 们根据具体的决策配置专门的服务入 口网关，负责处理上面提到的那些问 题。大多数XML服务网关都具备了消 息验证、安全检查、消息转换、路由 逻辑等功能（见图8）。 &nbsp; 第9阶段：部署服务出口网关 我们不但对外提供服务，同时也 会消费其他人提供的服务。此时需要 部署一个服务出口网关，帮助我们完 成查找服务端点、提取服务策略等任 务（见图9）。 服务出口网关的一项重要功能 是管理企业内部对外部服务提供者的 依赖。典型的安排是让出口网关持有 提供相同服务的服务提供者的一份列 表，列表中还记录了该服务提供者的可用性（availability）和响应时间等信 息。出口网关要负责按照我选择的指 标（如最便宜的、最可靠的、延迟最 小的等）将请求路由到适当的服务提 供者（见图10）。 &nbsp; 第10阶段：实现服务的版本 控制 服务在对外开放之后还会继续演 进。在理想的情况下，只需要改变服 务的实现，服务的接口保持不变，因 此不需要改动客户端的代码。 &nbsp; 但现实往往没有那么理想，服 务接口或者消息格式都有可能需要 修改。在这样的情况下，为了保证不 破坏现有客户端，有可能要同时运 行多个版本的服务。也就是说，服务 入口网关必须智能地将客户端请求 路由到正确版本的服务实现上去（见 图11）。 &nbsp; 典型的解决方法是维护一个版 本矩阵，跟踪各版本之间的兼容性。 我们可以规定一些发布策略，比如小 版本号的变动必须保持向后兼容， 而大版本号的变动就不要求。利用 这样的兼容性矩阵，入口网关就能 根据收到的请求判定客户端的版本， 并将其路由到具有最新兼容版本的服 务器上。 &nbsp; 第11阶段：将基础设施外包 给云提供商 购买和维护必要的硬件设备成本 可能非常高昂，使用中出现闲置的计 算资源更是浪费。闲置通常是不可避 免的，因为我们要按照负载高峰去配 备资源，所以非高峰时段就必然会出 现闲置。 为了更有效地利用计算资源， &nbsp; 我们可以考虑市场上的云提供商，比如，Amazon AWS或者Microsoft Azure。 将应用迁移到云上可能需要重 新设计，才能适应云环境的一些特 质，比如，要适应较高的网络延迟， 要计较带宽的成本，还要让应用程序 的设计适应数据库的“最终一致性” 模型。 &nbsp; 福利 扫描添加小编微信，备注“姓名+公司职位”，加入【云计算学习交流群】，和志同道合的朋友们共同打卡学习！ 推荐阅读： 太形象了！什么是边缘计算？最有趣的解释没有之一！ 互联网出海十年 华为员工年薪 200 万！真相让人心酸！ 天才程序员：25 岁进贝尔实验室，32 岁创建信息论 &nbsp;琥珀 &nbsp;极客宝宝 &nbsp;5天前 安全顾问反水成黑客, 靠瞎猜盗得5000万美元的以太币, 一个区块链大盗的另类传奇 人造器官新突破！美国科学家3D打印出会“呼吸”的肺 | Science 真香，朕在看了！" />
<meta property="og:description" content="戳蓝字“CSDN云计算”关注我们哦！ 时光机：搭载这部时光机，带您回顾《程序员》大量优秀文章，重温经典技术干货，我们发现硬核技术永不过时，对于get要点、solve难题、提高自我，仍有非凡意义。 作者：Richy Ho是一名软件架 构师，热衷于分布式及 并行计算、机器学习和 数据挖掘、SaaS和云 计算。先后在Cisco、 eBay、Adobe等公司工作。博客在horicky. blogspot.com。 本文介绍了从传统Web应用一步一步迁移到SaaS的历程。 我观察了多家企业从传统 Web 应用迁移到 SaaS 的历程，察觉出其中存在着一种模式。本文试 图将这模式描绘出来，并总结出从中学到的若 干教训。虽然讲解中以 J2EE Web 应用架构作为示 例，但同样的原理也适用于其他技术平台。 &nbsp; 第1阶段：使用中的现有Web应用 在最开始，我们已经拥有正常工作的Web应用。我 们分析现有应用的功能，把各个实现类划分成适当的组 （见图1）。 &nbsp; &nbsp;第2阶段：将功能分散到单独的进程中去 我们分析各个功能，将它们拆分到不同的进程 （JVM）中。拆分要求是粗粒度的，各进程通过一个 Facade类暴露出服务接口，经由这些服务接口实现彼 此间的通信。服务接口可以是各种远程对象调用，也 可以是XML Over HTTP。Restful Web Service是服务 接口实现途径的事实标准（见图2）。 &nbsp; 第3阶段：将不同进程转移到不同机器上 为了进一步扩展，跨越单台服务器能力的局限， 我们将进程转移到不同的机器上。请注意可以是物理 机器，也可以是虚拟机器（见图3）。 &nbsp; 第4阶段：构建服务池 如果服务本身是无状态的，我们可以简单地 向服务池中投入（运行着同样服务的）更多机器， 横向扩展服务的容量。有必要使用一个网络负载均 衡服务器来平均地将工作量分散到池中的服务器上 （见图4）。 当工作负载上升时，可以向池中投入更多机器去 增强服务的总体容量。云计算供应商提供了弹性的扩展能力，使我们可以更加迅速地伸缩 池的大小，更有效率地处理动态的负 载变化。 &nbsp; 第5阶段：通过分区扩展数 据层 业务处理层扩展完毕之后，我 们发现数据层成了瓶颈。因此有必 要通过按照数据的键作分区，分散 数据访问的工作负载。构建分布式 数据库的典型技巧请参考本刊2010 年第1期的文章《NoSQL的模式》 （见图5）。 &nbsp; 第6阶段：加入缓存以降低服 务器负载 如果应用的读/写比很高，或者可 以在一定程度上容忍过时数据，我们 就可以增加一层缓存层，减少对服务 的实际访问量。客户端在向服务发送 请求之前先检查缓存。 &nbsp; 我们需要维持缓存对象的新鲜 度。这方面存在很多方案，比如可以设定缓存对象在一定时间后过期；也 可以在后端数据发生变化的时候，明 确地发出请求，将相应的特定缓存对 象废弃掉（见图6）。 我们可以用本地缓存（位于客 户端所在的机器上），也可以采用 Memcached或者Oracle Coherence这 类分布式缓存引擎。 &nbsp; 第7阶段：考虑对外公开哪些 服务 到了这个阶段，我们希望对外 公开一些服务，也许是服务本身就 是获利渠道，也许是为了更方便与 商业伙伴实现紧密的B2B集成。决 定暴露哪些东西，牵涉到非常多的 考虑因素，比如安全、可伸缩性、 服 务 水 平 协 议 、 使 用 情 况 跟 踪 等 （见图7）。 &nbsp; 第8阶段：部署服务入口网关 决定对外暴露哪些服务之后，我 们根据具体的决策配置专门的服务入 口网关，负责处理上面提到的那些问 题。大多数XML服务网关都具备了消 息验证、安全检查、消息转换、路由 逻辑等功能（见图8）。 &nbsp; 第9阶段：部署服务出口网关 我们不但对外提供服务，同时也 会消费其他人提供的服务。此时需要 部署一个服务出口网关，帮助我们完 成查找服务端点、提取服务策略等任 务（见图9）。 服务出口网关的一项重要功能 是管理企业内部对外部服务提供者的 依赖。典型的安排是让出口网关持有 提供相同服务的服务提供者的一份列 表，列表中还记录了该服务提供者的可用性（availability）和响应时间等信 息。出口网关要负责按照我选择的指 标（如最便宜的、最可靠的、延迟最 小的等）将请求路由到适当的服务提 供者（见图10）。 &nbsp; 第10阶段：实现服务的版本 控制 服务在对外开放之后还会继续演 进。在理想的情况下，只需要改变服 务的实现，服务的接口保持不变，因 此不需要改动客户端的代码。 &nbsp; 但现实往往没有那么理想，服 务接口或者消息格式都有可能需要 修改。在这样的情况下，为了保证不 破坏现有客户端，有可能要同时运 行多个版本的服务。也就是说，服务 入口网关必须智能地将客户端请求 路由到正确版本的服务实现上去（见 图11）。 &nbsp; 典型的解决方法是维护一个版 本矩阵，跟踪各版本之间的兼容性。 我们可以规定一些发布策略，比如小 版本号的变动必须保持向后兼容， 而大版本号的变动就不要求。利用 这样的兼容性矩阵，入口网关就能 根据收到的请求判定客户端的版本， 并将其路由到具有最新兼容版本的服 务器上。 &nbsp; 第11阶段：将基础设施外包 给云提供商 购买和维护必要的硬件设备成本 可能非常高昂，使用中出现闲置的计 算资源更是浪费。闲置通常是不可避 免的，因为我们要按照负载高峰去配 备资源，所以非高峰时段就必然会出 现闲置。 为了更有效地利用计算资源， &nbsp; 我们可以考虑市场上的云提供商，比如，Amazon AWS或者Microsoft Azure。 将应用迁移到云上可能需要重 新设计，才能适应云环境的一些特 质，比如，要适应较高的网络延迟， 要计较带宽的成本，还要让应用程序 的设计适应数据库的“最终一致性” 模型。 &nbsp; 福利 扫描添加小编微信，备注“姓名+公司职位”，加入【云计算学习交流群】，和志同道合的朋友们共同打卡学习！ 推荐阅读： 太形象了！什么是边缘计算？最有趣的解释没有之一！ 互联网出海十年 华为员工年薪 200 万！真相让人心酸！ 天才程序员：25 岁进贝尔实验室，32 岁创建信息论 &nbsp;琥珀 &nbsp;极客宝宝 &nbsp;5天前 安全顾问反水成黑客, 靠瞎猜盗得5000万美元的以太币, 一个区块链大盗的另类传奇 人造器官新突破！美国科学家3D打印出会“呼吸”的肺 | Science 真香，朕在看了！" />
<link rel="canonical" href="https://mlh.app/2019/05/08/729946.html" />
<meta property="og:url" content="https://mlh.app/2019/05/08/729946.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-08T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"戳蓝字“CSDN云计算”关注我们哦！ 时光机：搭载这部时光机，带您回顾《程序员》大量优秀文章，重温经典技术干货，我们发现硬核技术永不过时，对于get要点、solve难题、提高自我，仍有非凡意义。 作者：Richy Ho是一名软件架 构师，热衷于分布式及 并行计算、机器学习和 数据挖掘、SaaS和云 计算。先后在Cisco、 eBay、Adobe等公司工作。博客在horicky. blogspot.com。 本文介绍了从传统Web应用一步一步迁移到SaaS的历程。 我观察了多家企业从传统 Web 应用迁移到 SaaS 的历程，察觉出其中存在着一种模式。本文试 图将这模式描绘出来，并总结出从中学到的若 干教训。虽然讲解中以 J2EE Web 应用架构作为示 例，但同样的原理也适用于其他技术平台。 &nbsp; 第1阶段：使用中的现有Web应用 在最开始，我们已经拥有正常工作的Web应用。我 们分析现有应用的功能，把各个实现类划分成适当的组 （见图1）。 &nbsp; &nbsp;第2阶段：将功能分散到单独的进程中去 我们分析各个功能，将它们拆分到不同的进程 （JVM）中。拆分要求是粗粒度的，各进程通过一个 Facade类暴露出服务接口，经由这些服务接口实现彼 此间的通信。服务接口可以是各种远程对象调用，也 可以是XML Over HTTP。Restful Web Service是服务 接口实现途径的事实标准（见图2）。 &nbsp; 第3阶段：将不同进程转移到不同机器上 为了进一步扩展，跨越单台服务器能力的局限， 我们将进程转移到不同的机器上。请注意可以是物理 机器，也可以是虚拟机器（见图3）。 &nbsp; 第4阶段：构建服务池 如果服务本身是无状态的，我们可以简单地 向服务池中投入（运行着同样服务的）更多机器， 横向扩展服务的容量。有必要使用一个网络负载均 衡服务器来平均地将工作量分散到池中的服务器上 （见图4）。 当工作负载上升时，可以向池中投入更多机器去 增强服务的总体容量。云计算供应商提供了弹性的扩展能力，使我们可以更加迅速地伸缩 池的大小，更有效率地处理动态的负 载变化。 &nbsp; 第5阶段：通过分区扩展数 据层 业务处理层扩展完毕之后，我 们发现数据层成了瓶颈。因此有必 要通过按照数据的键作分区，分散 数据访问的工作负载。构建分布式 数据库的典型技巧请参考本刊2010 年第1期的文章《NoSQL的模式》 （见图5）。 &nbsp; 第6阶段：加入缓存以降低服 务器负载 如果应用的读/写比很高，或者可 以在一定程度上容忍过时数据，我们 就可以增加一层缓存层，减少对服务 的实际访问量。客户端在向服务发送 请求之前先检查缓存。 &nbsp; 我们需要维持缓存对象的新鲜 度。这方面存在很多方案，比如可以设定缓存对象在一定时间后过期；也 可以在后端数据发生变化的时候，明 确地发出请求，将相应的特定缓存对 象废弃掉（见图6）。 我们可以用本地缓存（位于客 户端所在的机器上），也可以采用 Memcached或者Oracle Coherence这 类分布式缓存引擎。 &nbsp; 第7阶段：考虑对外公开哪些 服务 到了这个阶段，我们希望对外 公开一些服务，也许是服务本身就 是获利渠道，也许是为了更方便与 商业伙伴实现紧密的B2B集成。决 定暴露哪些东西，牵涉到非常多的 考虑因素，比如安全、可伸缩性、 服 务 水 平 协 议 、 使 用 情 况 跟 踪 等 （见图7）。 &nbsp; 第8阶段：部署服务入口网关 决定对外暴露哪些服务之后，我 们根据具体的决策配置专门的服务入 口网关，负责处理上面提到的那些问 题。大多数XML服务网关都具备了消 息验证、安全检查、消息转换、路由 逻辑等功能（见图8）。 &nbsp; 第9阶段：部署服务出口网关 我们不但对外提供服务，同时也 会消费其他人提供的服务。此时需要 部署一个服务出口网关，帮助我们完 成查找服务端点、提取服务策略等任 务（见图9）。 服务出口网关的一项重要功能 是管理企业内部对外部服务提供者的 依赖。典型的安排是让出口网关持有 提供相同服务的服务提供者的一份列 表，列表中还记录了该服务提供者的可用性（availability）和响应时间等信 息。出口网关要负责按照我选择的指 标（如最便宜的、最可靠的、延迟最 小的等）将请求路由到适当的服务提 供者（见图10）。 &nbsp; 第10阶段：实现服务的版本 控制 服务在对外开放之后还会继续演 进。在理想的情况下，只需要改变服 务的实现，服务的接口保持不变，因 此不需要改动客户端的代码。 &nbsp; 但现实往往没有那么理想，服 务接口或者消息格式都有可能需要 修改。在这样的情况下，为了保证不 破坏现有客户端，有可能要同时运 行多个版本的服务。也就是说，服务 入口网关必须智能地将客户端请求 路由到正确版本的服务实现上去（见 图11）。 &nbsp; 典型的解决方法是维护一个版 本矩阵，跟踪各版本之间的兼容性。 我们可以规定一些发布策略，比如小 版本号的变动必须保持向后兼容， 而大版本号的变动就不要求。利用 这样的兼容性矩阵，入口网关就能 根据收到的请求判定客户端的版本， 并将其路由到具有最新兼容版本的服 务器上。 &nbsp; 第11阶段：将基础设施外包 给云提供商 购买和维护必要的硬件设备成本 可能非常高昂，使用中出现闲置的计 算资源更是浪费。闲置通常是不可避 免的，因为我们要按照负载高峰去配 备资源，所以非高峰时段就必然会出 现闲置。 为了更有效地利用计算资源， &nbsp; 我们可以考虑市场上的云提供商，比如，Amazon AWS或者Microsoft Azure。 将应用迁移到云上可能需要重 新设计，才能适应云环境的一些特 质，比如，要适应较高的网络延迟， 要计较带宽的成本，还要让应用程序 的设计适应数据库的“最终一致性” 模型。 &nbsp; 福利 扫描添加小编微信，备注“姓名+公司职位”，加入【云计算学习交流群】，和志同道合的朋友们共同打卡学习！ 推荐阅读： 太形象了！什么是边缘计算？最有趣的解释没有之一！ 互联网出海十年 华为员工年薪 200 万！真相让人心酸！ 天才程序员：25 岁进贝尔实验室，32 岁创建信息论 &nbsp;琥珀 &nbsp;极客宝宝 &nbsp;5天前 安全顾问反水成黑客, 靠瞎猜盗得5000万美元的以太币, 一个区块链大盗的另类传奇 人造器官新突破！美国科学家3D打印出会“呼吸”的肺 | Science 真香，朕在看了！","@type":"BlogPosting","url":"https://mlh.app/2019/05/08/729946.html","headline":"SaaS路线图   时光机","dateModified":"2019-05-08T00:00:00+08:00","datePublished":"2019-05-08T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/05/08/729946.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>SaaS路线图&nbsp;|&nbsp;时光机</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <section class="xmteditor" style="display:none;" data-tools="新媒体管家" data-label="powered by xmt.cn"> 
 <br> 
</section> 
<p style="text-align: right;margin-left: 8px;margin-right: 8px;"><strong><span style="font-size: 15px;">戳蓝字“</span><span style="color: rgb(0, 82, 255);font-size: 15px;">CSDN云</span><span style="font-size: 15px;color: rgb(0, 82, 255);">计算</span><span style="font-size: 15px;">”关注我们哦！</span></strong><br></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-backh="325" data-backw="500" data-before-oversubscription-url="http://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy585no0I9qnnickByLPAuvR3rVKQsia9gzWxzIfw0512lsLHdxotcMZPCw/?wx_fmt=jpeg" data-oversubscription-url="http://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5kqeAOj3cj5Jicc7aLiad9bQa86whawsv28yIb7fF269tw5YL9w1ElOqQ/0?wx_fmt=jpeg" data-ratio="0.65" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5kqeAOj3cj5Jicc7aLiad9bQa86whawsv28yIb7fF269tw5YL9w1ElOqQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="500" style="width: 100%;height: auto;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5kqeAOj3cj5Jicc7aLiad9bQa86whawsv28yIb7fF269tw5YL9w1ElOqQ/640?wx_fmt=jpeg"></p> 
<section powered-by="xiumi.us" style="white-space: normal;max-width: 100%;box-sizing: border-box;font-size: 15px;letter-spacing: 0.544px;line-height: 30px;widows: 1;background-color: rgb(255, 255, 255);word-wrap: break-word !important;"> 
 <section style="max-width: 100%;box-sizing: border-box;word-wrap: break-word !important;"> 
  <section> 
   <section powered-by="xiumi.us" style="box-sizing: border-box;line-height: 30px;max-width: 100%;letter-spacing: 0.54px;word-wrap: break-word !important;"> 
    <section style="box-sizing: border-box;max-width: 100%;word-wrap: break-word !important;"> 
     <section> 
      <section powered-by="xiumi.us" style="box-sizing: border-box;line-height: 30px;max-width: 100%;letter-spacing: 0.54px;word-wrap: break-word !important;"> 
       <section style="box-sizing: border-box;max-width: 100%;word-wrap: break-word !important;"> 
        <section> 
         <blockquote> 
          <p style="margin-right: 8px;margin-bottom: 15px;margin-left: 8px;line-height: 1.75em;min-height: 1em;max-width: 100%;letter-spacing: 1px;text-indent: 0em;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="letter-spacing: 0.54px;color: rgb(0, 82, 255);"></span><strong style="color: rgb(0, 82, 255);font-size: 15px;letter-spacing: 0.54px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);"><strong style="max-width: 100%;color: rgba(0, 0, 0, 0.5);font-size: 15px;letter-spacing: 1px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;letter-spacing: 0.54px;color: rgb(0, 82, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;color: rgba(0, 0, 0, 0.498);font-size: 15px;font-variant-numeric: normal;font-variant-east-asian: normal;letter-spacing: 1px;line-height: 26.25px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;letter-spacing: 0.54px;color: rgb(0, 82, 255);box-sizing: border-box !important;word-wrap: break-word !important;">时光机：搭载这部时光机，带您回顾《程序员》大量优秀文章，重温经典技术干货，我们发现硬核技术永不过时，对于get要点、solve难题、提高自我，仍有非凡意义。</span></strong></span></strong></strong></p> 
         </blockquote> 
        </section> 
       </section> 
      </section> 
     </section> 
    </section> 
   </section> 
  </section> 
 </section> 
</section> 
<p style="max-width: 100%;min-height: 1em;font-variant-numeric: normal;font-variant-east-asian: normal;letter-spacing: 0.544px;line-height: 27.2px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);margin-left: 8px;margin-right: 8px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;word-wrap: break-word !important;"><br></span></p> 
<p style="max-width: 100%;min-height: 1em;font-variant-numeric: normal;font-variant-east-asian: normal;letter-spacing: 0.544px;line-height: 27.2px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);margin-left: 8px;margin-right: 8px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;">作者：Richy Ho是一名软件架 构师，热衷于分布式及 并行计算、机器学习和 数据挖掘、SaaS和云 计算。先后在Cisco、 eBay、Adobe等公司工作。博客在horicky. blogspot.com。</span></p> 
<p style="max-width: 100%;min-height: 1em;font-variant-numeric: normal;font-variant-east-asian: normal;letter-spacing: 0.544px;line-height: 27.2px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);margin-left: 8px;margin-right: 8px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;color: rgb(217, 33, 66);">本文介绍了从传统Web应用一步一步迁移到SaaS的历程。</span></strong></p> 
<p style="max-width: 100%;min-height: 1em;font-variant-numeric: normal;font-variant-east-asian: normal;letter-spacing: 0.544px;line-height: 27.2px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);text-align: justify;margin-left: 8px;margin-right: 8px;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">我观察了多家企业从传统 Web 应用迁移到 SaaS 的历程，察觉出其中存在着一种模式。本文试 图将这模式描绘出来，并总结出从中学到的若 干教训。虽然讲解中以 J2EE Web 应用架构作为示 例，但同样的原理也适用于其他技术平台。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第1阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">使用中的现有Web应用 在最开始，我们已经拥有正常工作的Web应用。我 们分析现有应用的功能，把各个实现类划分成适当的组 （见图1）。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.6055555555555555" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5d9E1WmLl5H18MAKfVQ5FTI41qicrxx4HreHYBGoCyiakQdic1Bxibfe2yQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5d9E1WmLl5H18MAKfVQ5FTI41qicrxx4HreHYBGoCyiakQdic1Bxibfe2yQ/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;第2阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">将功能分散到单独的进程中去 我们分析各个功能，将它们拆分到不同的进程 （JVM）中。拆分要求是粗粒度的，各进程通过一个 Facade类暴露出服务接口，经由这些服务接口实现彼 此间的通信。服务接口可以是各种远程对象调用，也 可以是XML Over HTTP。Restful Web Service是服务 接口实现途径的事实标准（见图2）。 </span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.6055555555555555" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy588ZOYJZ5oQGYGpgW1TjfUaKYonjIBYicqZPBCibP0uAcWwzUPIibFWOVQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy588ZOYJZ5oQGYGpgW1TjfUaKYonjIBYicqZPBCibP0uAcWwzUPIibFWOVQ/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第3阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">将不同进程转移到不同机器上 为了进一步扩展，跨越单台服务器能力的局限， 我们将进程转移到不同的机器上。请注意可以是物理 机器，也可以是虚拟机器（见图3）。 </span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.5428571428571428" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5GbibZAiaTZAmiawxu071uGmvepIV4BMGicEpX4PCuMbZTSEvnM7ibqibk94g/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5GbibZAiaTZAmiawxu071uGmvepIV4BMGicEpX4PCuMbZTSEvnM7ibqibk94g/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第4阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">构建服务池 如果服务本身是无状态的，我们可以简单地 向服务池中投入（运行着同样服务的）更多机器， 横向扩展服务的容量。有必要使用一个网络负载均 衡服务器来平均地将工作量分散到池中的服务器上 （见图4）。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.5777777777777777" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5q0E4jiaNoYCCV3icIckm4Kt2NZbiccGjIoVqibibKDXye0OBibESZJ4f8uEA/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5q0E4jiaNoYCCV3icIckm4Kt2NZbiccGjIoVqibibKDXye0OBibESZJ4f8uEA/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">当工作负载上升时，可以向池中投入更多机器去 增强服务的总体容量。云计算供应商提供了弹性的扩展能力，使我们可以更加迅速地伸缩 池的大小，更有效率地处理动态的负 载变化。</span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第5阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">通过分区扩展数 据层 业务处理层扩展完毕之后，我 们发现数据层成了瓶颈。因此有必 要通过按照数据的键作分区，分散 数据访问的工作负载。构建分布式 数据库的典型技巧请参考本刊2010 年第1期的文章《NoSQL的模式》 （见图5）。 </span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.48253968253968255" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5tmUVicb9MeG0GxHhMBaAXmDA9MCZcq4uicxBpCn4wgBUmmv2bNIib1Jhw/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5tmUVicb9MeG0GxHhMBaAXmDA9MCZcq4uicxBpCn4wgBUmmv2bNIib1Jhw/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第6阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">加入缓存以降低服 务器负载 如果应用的读/写比很高，或者可 以在一定程度上容忍过时数据，我们 就可以增加一层缓存层，减少对服务 的实际访问量。客户端在向服务发送 请求之前先检查缓存。</span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">我们需要维持缓存对象的新鲜 度。这方面存在很多方案，比如可以设定缓存对象在一定时间后过期；也 可以在后端数据发生变化的时候，明 确地发出请求，将相应的特定缓存对 象废弃掉（见图6）。 我们可以用本地缓存（位于客 户端所在的机器上），也可以采用 Memcached或者Oracle Coherence这 类分布式缓存引擎。 </span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.5" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5x8Bcq0u1leBOKfDibibUAxK3mgshlabYCquVXDm0W0rR3sibwLBBveJYQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5x8Bcq0u1leBOKfDibibUAxK3mgshlabYCquVXDm0W0rR3sibwLBBveJYQ/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第7阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">考虑对外公开哪些 服务 到了这个阶段，我们希望对外 公开一些服务，也许是服务本身就 是获利渠道，也许是为了更方便与 商业伙伴实现紧密的B2B集成。决 定暴露哪些东西，牵涉到非常多的 考虑因素，比如安全、可伸缩性、 服 务 水 平 协 议 、 使 用 情 况 跟 踪 等 （见图7）。</span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.5404761904761904" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5WSBIuib7iaics1psSiaFsazItFJ9chtSHV5IksOWSZib47ibY1fPViasqzsDA/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5WSBIuib7iaics1psSiaFsazItFJ9chtSHV5IksOWSZib47ibY1fPViasqzsDA/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第8阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">部署服务入口网关 决定对外暴露哪些服务之后，我 们根据具体的决策配置专门的服务入 口网关，负责处理上面提到的那些问 题。大多数XML服务网关都具备了消 息验证、安全检查、消息转换、路由 逻辑等功能（见图8）。</span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.4777777777777778" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5iap36zYRG5jjNM2Uicm6YRe9RJ7D9QCibmAEWFLDes74ibFRenmGH0Mic8g/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5iap36zYRG5jjNM2Uicm6YRe9RJ7D9QCibmAEWFLDes74ibFRenmGH0Mic8g/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第9阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">部署服务出口网关 我们不但对外提供服务，同时也 会消费其他人提供的服务。此时需要 部署一个服务出口网关，帮助我们完 成查找服务端点、提取服务策略等任 务（见图9）。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.5055555555555555" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5sFSInWu7mNDnyCDOFj0Zz4whpnlGLS7CCJaKtJibhxpsoh5yv1ThV2g/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5sFSInWu7mNDnyCDOFj0Zz4whpnlGLS7CCJaKtJibhxpsoh5yv1ThV2g/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"></span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">服务出口网关的一项重要功能 是管理企业内部对外部服务提供者的 依赖。典型的安排是让出口网关持有 提供相同服务的服务提供者的一份列 表，列表中还记录了该服务提供者的可用性（availability）和响应时间等信 息。出口网关要负责按照我选择的指 标（如最便宜的、最可靠的、延迟最 小的等）将请求路由到适当的服务提 供者（见图10）。 </span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.5880952380952381" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5FDwoKTIicTeprSzWXJ2UHnW1DupSqq1jqWE4BRDNY8dqf4j3uk3iaCXg/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5FDwoKTIicTeprSzWXJ2UHnW1DupSqq1jqWE4BRDNY8dqf4j3uk3iaCXg/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第10阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">实现服务的版本 控制 服务在对外开放之后还会继续演 进。在理想的情况下，只需要改变服 务的实现，服务的接口保持不变，因 此不需要改动客户端的代码。 </span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">但现实往往没有那么理想，服 务接口或者消息格式都有可能需要 修改。在这样的情况下，为了保证不 破坏现有客户端，有可能要同时运 行多个版本的服务。也就是说，服务 入口网关必须智能地将客户端请求 路由到正确版本的服务实现上去（见 图11）。</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><img class="rich_pages" data-ratio="0.473015873015873" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5ZyLdmibf7ib2qOibtyd5JbC65pq9lFicjwbXicmHdKmRdn6aCDyBaH1Eohw/640?wx_fmt=jpeg" data-type="jpeg" data-w="1260" style="" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QibGUuCWJZGLglpWTW3Hjy5ZyLdmibf7ib2qOibtyd5JbC65pq9lFicjwbXicmHdKmRdn6aCDyBaH1Eohw/640?wx_fmt=jpeg"></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;"><br></span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">典型的解决方法是维护一个版 本矩阵，跟踪各版本之间的兼容性。 我们可以规定一些发布策略，比如小 版本号的变动必须保持向后兼容， 而大版本号的变动就不要求。利用 这样的兼容性矩阵，入口网关就能 根据收到的请求判定客户端的版本， 并将其路由到具有最新兼容版本的服 务器上。</span><br></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><strong><span style="font-family: 微软雅黑;font-size: 15px;">第11阶段：</span></strong><span style="font-family: 微软雅黑;font-size: 15px;">将基础设施外包 给云提供商 购买和维护必要的硬件设备成本 可能非常高昂，使用中出现闲置的计 算资源更是浪费。闲置通常是不可避 免的，因为我们要按照负载高峰去配 备资源，所以非高峰时段就必然会出 现闲置。 为了更有效地利用计算资源， </span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">&nbsp;</span></p> 
<p style="text-align: justify;margin-left: 8px;margin-right: 8px;"><span style="font-family: 微软雅黑;font-size: 15px;">我们可以考虑市场上的云提供商，比如，Amazon AWS或者Microsoft Azure。 将应用迁移到云上可能需要重 新设计，才能适应云环境的一些特 质，比如，要适应较高的网络延迟， 要计较带宽的成本，还要让应用程序 的设计适应数据库的“最终一致性” 模型。</span></p> 
<p style="max-width: 100%;min-height: 1em;font-variant-numeric: normal;font-variant-east-asian: normal;letter-spacing: 0.544px;line-height: 27.2px;white-space: normal;widows: 1;background-color: rgb(255, 255, 255);margin-left: 8px;margin-right: 8px;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="color: rgb(0, 0, 0);font-family: 微软雅黑;text-align: center;text-indent: 32px;font-size: 16px;letter-spacing: 0.544px;white-space: pre-line;">&nbsp;</span><br></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;"><img class="" data-copyright="0" data-ratio="0.04523809523809524" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/1hReHaqafafJYoFH7OAhmUdTjo35vvJTy1lRVjG2CzFP3arfVRDqI7a8PSS6Sx5LialaFTE1HFu2N4OIhL8jP9g/640?wx_fmt=png" data-type="png" data-w="420" style="letter-spacing: 0.544px;line-height: 29.75px;box-sizing: border-box !important;word-wrap: break-word !important;width: 420px !important;visibility: visible !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/1hReHaqafafJYoFH7OAhmUdTjo35vvJTy1lRVjG2CzFP3arfVRDqI7a8PSS6Sx5LialaFTE1HFu2N4OIhL8jP9g/640?wx_fmt=png"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;"><br></p> 
<p style="margin-right: 8px;margin-left: 8px;white-space: normal;max-width: 100%;min-height: 1em;letter-spacing: 0.544px;widows: 1;line-height: 1.4;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><span style="padding: 0.2em 0.5em;max-width: 100%;border-radius: 0.3em;color: white;font-size: 1em;font-family: inherit;font-weight: inherit;text-align: inherit;text-decoration: inherit;background-color: rgb(255, 105, 31);box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;">福利</span></strong></p> 
<section class="" style="margin-top: -0.7em;font-size: 1em;white-space: normal;max-width: 100%;letter-spacing: 0.544px;line-height: 27.2px;widows: 1;border-width: 1px;border-style: solid;border-color: rgb(255, 105, 31);border-radius: 0.4em;background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"> 
 <section style="padding: 1.4em 1em 1em;max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"> 
  <section style="max-width: 100%;font-size: 1em;font-family: inherit;text-align: inherit;text-decoration: inherit;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"> 
   <p style="margin-right: 8px;margin-left: 8px;max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">扫描添加小编微信，备注“</span></strong><span style="max-width: 100%;color: rgb(255, 104, 39);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">姓名+公司职位</span></strong></span><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">”，加入【</span></strong><span style="max-width: 100%;color: rgb(255, 104, 39);box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">云计算学习交流群</span></strong></span><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">】，和志同道合的朋友们共同打卡学习！</span></strong></p> 
   <p style="margin-right: 8px;margin-left: 8px;max-width: 100%;min-height: 1em;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"></p> 
   <p style="text-align: center;"><img class="rich_pages" data-copyright="0" data-ratio="1.005813953488372" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QDZW3ZeMemRs5PPyI20qxP8zicUCD67ia0kT4tk9BTQ6OaiaGTrvMQzl6sfmlRmFhKBcuibvRsxg3ktA/640?wx_fmt=jpeg" data-type="jpeg" data-w="516" style="height: 156px;width: 155px;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_jpg/zxoLaeCI28QDZW3ZeMemRs5PPyI20qxP8zicUCD67ia0kT4tk9BTQ6OaiaGTrvMQzl6sfmlRmFhKBcuibvRsxg3ktA/640?wx_fmt=jpeg"></p> 
  </section> 
 </section> 
</section> 
<p style="text-align: center;margin-left: 8px;margin-right: 8px;"><br></p> 
<p style="margin-right: 8px;margin-left: 8px;white-space: normal;max-width: 100%;min-height: 1em;font-size: 15px;letter-spacing: 0.544px;line-height: 1.75em;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><strong style="max-width: 100%;text-indent: 28px;font-family: arial, 宋体, sans-serif;letter-spacing: 1px;overflow-wrap: break-word;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;letter-spacing: 0.5px;overflow-wrap: break-word;box-sizing: border-box !important;word-wrap: break-word !important;">推荐阅读：</span></strong></p> 
<ul class=" list-paddingleft-2" style="margin-left: 8px;margin-right: 8px;"> 
 <li><h2 style="max-width: 100%;letter-spacing: 0.54px;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="https://mp.weixin.qq.com/s?__biz=MzA3MjY1MTQwNQ==&amp;mid=2649827524&amp;idx=2&amp;sn=4e4ef8fb348292834fc6cdb5d991abbe&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 15px;text-decoration: underline;" data-linktype="2"><span style="font-size: 15px;">太形象了！什么是边缘计算？最有趣的解释没有之一！</span></a></h2></li> 
 <li><h2 style="max-width: 100%;letter-spacing: 0.54px;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="https://mp.weixin.qq.com/s?__biz=MjM5MjAwODM4MA==&amp;mid=2650719490&amp;idx=1&amp;sn=dc628b2516de6aaf4d458bfad0e4ad1a&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 15px;text-decoration: underline;" data-linktype="2"><span style="font-size: 15px;">互联网出海十年</span></a></h2></li> 
 <li><h2 style="max-width: 100%;letter-spacing: 0.54px;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="https://mp.weixin.qq.com/s?__biz=MzA5MzY4NTQwMA==&amp;mid=2651010707&amp;idx=1&amp;sn=aeca20839d93b82db6b7f654b60b9b49&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 15px;text-decoration: underline;" data-linktype="2"><span style="font-size: 15px;">华为员工年薪 200 万！真相让人心酸！</span></a></h2></li> 
 <li><h2 style="max-width: 100%;letter-spacing: 0.54px;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="https://mp.weixin.qq.com/s?__biz=Mzg3MDA4NDkxMQ==&amp;mid=2247483906&amp;idx=1&amp;sn=028974f5b9a583116b453ea947113916&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 15px;text-decoration: underline;" data-linktype="2"><span style="font-size: 15px;">天才程序员：25 岁进贝尔实验室，32 岁创建信息论 &nbsp;琥珀 &nbsp;极客宝宝 &nbsp;5天前</span></a></h2></li> 
 <li><h2 style="max-width: 100%;letter-spacing: 0.54px;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="https://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247494919&amp;idx=1&amp;sn=5874d3b2eaf4cda3d6ff74d2aba97a30&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 15px;text-decoration: underline;" data-linktype="2"><span style="font-size: 15px;">安全顾问反水成黑客, 靠瞎猜盗得5000万美元的以太币, 一个区块链大盗的另类传奇</span></a></h2></li> 
 <li><h2 style="max-width: 100%;letter-spacing: 0.54px;box-sizing: border-box !important;word-wrap: break-word !important;"><a href="https://mp.weixin.qq.com/s?__biz=MzI0ODcxODk5OA==&amp;mid=2247504798&amp;idx=1&amp;sn=fab3271deb222c619046e123186307e3&amp;scene=21#wechat_redirect" target="_blank" style="font-size: 15px;text-decoration: underline;" data-linktype="2"><span style="font-size: 15px;">人造器官新突破！美国科学家3D打印出会“呼吸”的肺 | Science</span></a><br></h2></li> 
</ul> 
<section data-role="outer" label="Powered by 135editor.com" style="white-space: normal;max-width: 100%;font-size: 15px;letter-spacing: 0.544px;line-height: 27.2px;box-sizing: border-box !important;word-wrap: break-word !important;"> 
 <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
  <section class="" data-tools="135编辑器" data-id="94174" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
   <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
    <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;letter-spacing: 0.544px;line-height: 27.2px;box-sizing: border-box !important;word-wrap: break-word !important;"> 
     <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
      <section class="" data-tools="135编辑器" data-id="94174" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
       <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
        <section style="max-width: 100%;text-align: right;box-sizing: border-box !important;word-wrap: break-word !important;"> 
         <br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
        </section> 
        <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;letter-spacing: 0.544px;line-height: 27.2px;box-sizing: border-box !important;word-wrap: break-word !important;"> 
         <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
          <section class="" data-tools="135编辑器" data-id="94174" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
           <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
            <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;letter-spacing: 0.544px;line-height: 27.2px;box-sizing: border-box !important;word-wrap: break-word !important;"> 
             <section data-role="outer" label="Powered by 135editor.com" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
              <section class="" data-tools="135编辑器" data-id="94174" style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
               <section style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"> 
                <section style="max-width: 100%;text-align: right;box-sizing: border-box !important;word-wrap: break-word !important;"> 
                 <section style="margin-top: -6.4px;margin-left: -16px;max-width: 197px;font-family: 微软雅黑;font-size: 16px;letter-spacing: 0.544px;line-height: 25.6px;float: right;transform: matrix(1, 0, 0, 1, 0, 0);width: 16px;box-sizing: border-box !important;word-wrap: break-word !important;"> 
                  <img class="" data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujO0pvtNCLzZCiaWxGBfq2xaPwze1NRLTSQZYbzWNnTJwDwsReHiam91Wojzvw3RLibjicWkLWJjicgsvw/640?wx_fmt=png" data-type="png" data-w="23" data-width="100%" style="max-width: 16px;display: block;box-sizing: border-box !important;word-wrap: break-word !important;visibility: visible !important;width: 15.99px !important;" src="https://uzshare.com/_p?https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAujO0pvtNCLzZCiaWxGBfq2xaPwze1NRLTSQZYbzWNnTJwDwsReHiam91Wojzvw3RLibjicWkLWJjicgsvw/640?wx_fmt=png"> 
                 </section> 
                 <section data-brushtype="text" style="padding: 10px 16px;max-width: 197px;font-family: 微软雅黑;font-size: 16px;line-height: 25.6px;border-radius: 10px;color: rgb(73, 73, 72);display: inline-block;font-weight: 700;letter-spacing: 1.5px;text-align: center;background: none 0% 0% / auto repeat scroll padding-box border-box rgb(253, 245, 13);box-sizing: border-box !important;word-wrap: break-word !important;"> 
                  <span style="max-width: 100%;font-size: 15px;box-sizing: border-box !important;word-wrap: break-word !important;">真香，朕在看了！</span> 
                 </section> 
                </section> 
               </section> 
              </section> 
             </section> 
            </section> 
           </section> 
          </section> 
         </section> 
        </section> 
       </section> 
      </section> 
     </section> 
    </section> 
   </section> 
  </section> 
 </section> 
</section>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?aee162ba0c05d8e682055e28ff964fa2";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
