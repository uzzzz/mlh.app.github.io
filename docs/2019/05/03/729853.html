<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>基于模板的文字识别结果结构化处理技术 公开课速记 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="基于模板的文字识别结果结构化处理技术 公开课速记" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="嘉宾 | 向宇波 编辑 | suiling 来源 | AI科技大本营在线公开课 出品 | AI科技大本营（ID：rgznai100） 随着行业的发展和技术的成熟，文字识别（OCR）目前已经应用到了多个行业中，比如物流行业快递包裹的分拣，金融行业的支票单据识别输入，交通领域中的车牌识别，以及日常生活中的卡证、票据识别等等。OCR（文字识别）技术是目前常用的一种AI能力。但一般OCR的识别结果是一种按行输出的半结构化输出。 本次公开课我们邀请到了百度高级研发工程师向宇波老师，他将在12月20日（周四）带来一场主题为《基于模板的文字识别结果结构化处理技术》的分享。本课程从百度自定义模板文字识别展开，从理论到案例，详细介绍OCR结构化的相关技术，并理清OCR和结构化之间的关系和适用场景。 向宇波：大家好，我是来自百度AI技术生态部的研发工程师，我叫向宇波，今天给大家带来的分享是基于模板的文字识别结果结构化处理技术，我们主要讲的是文字处理结果的结构化。 文字识别行业现状 我们从一个财税案例的角度出发。大家在公司里肯定都做过报销，报销的时候我们都会有出租车票、定额发票等，我们需要将各种发票贴到纸上然后提交上去，由财务来做后面的事情。通常来说，他们其实做的都非常辛苦，要耗费大量的人力来进行人工录入。这样的话，不仅成本很高，而且耗时也很长，人工录入的话还有可能会出错。我们能不能够通过用文字识别的方式来解决这个问题呢？比如把这个流程变成这样，我们在中间加一层，不是人工录入，而是通过一个识别系统，首先我们把这些票据通过图像采集设备，例如高分辨率扫描、拍照这种方式转换成图像，然后通过文字识别技术把图像上的文字识别出来，再经过一个数据的结构化，最后输入到财务系统。这样能节约大量的人力物力，也能够提高效率及准确率。其关键部分是在识别之后做一个结构化处理。 我们来看一下多模板的结构化识别。首先来说，我们从刚刚的例子也能看得到，哪怕是一个很简单的报销过程，也涉及到很多种票据，例如火车票、定额发票等等。现实生活中这种票据非常多。所以，我们的结构化方案要能够支持多种模板。 一般来讲，OCR识别出来的结果是单纯的一行一行文字，这样业务处理起来会比较困难，key value形式的结构会比较好处理。我们用一个例子来解释，比如我们识别一张火车票，这个火车票上面有一行文字是始发站，然后是车次、到达站。如果直接处理识别出来的那一行文字相对麻烦，因为需要去切分出各个字段。但是，如果我们的识别结果有结构，那处理起来就会容易很多。通过key value的形式检索，我就能够知道我的始发站（北京南），然后到达站（天津）、车次。所以结构化给业务处理带来了极大的便利。 接下来我们看一下文字识别分类。通常来说文字识别分为两个大类，一种是通用文字识别，另一种就是专用垂类识别。通用文字识别就像刚刚提到的，对一个图片来说，识别结果会以行的形式输出，同时会有比较准确的文字坐标，这种按行输出的结构可以称之为半结构化，它只能告诉你在这一行，在这一行，从上到下罗列，没有真正意义上的key value结构。 专用垂类识别的结果有结构，比如说对于身份证，其实我们知道所有身份证都长的一样，我们能够知道身份证上这个地方是姓名，这个地方是性别，这个地方是民族，所以我们能够返回的时候就告诉你姓名是什么，性别是什么，生日是什么。常见的专用垂类还覆盖几类常见卡证，像身份证、银行卡、增值税发票这些。但是开发一个专用垂类识别，通常来说需要花比较多的人力物力，才能够达到一个比较高的准确度，所以它的开发周期和人力成本都比较高。 &nbsp; &nbsp; &nbsp; 整个看来，业务处理需要不同板式的文字识别，并且希望能够结构化，但是如果把它们变成专用的垂类模板来，就会面临成本很高，周期很长的情况。 基于这些矛盾，我们推出了一个基于模板的文字识别结果的结构化方案。给大家做一个例子来演示，比如用火车票。我有一个火车票的模板，就是就拿我自己的火车票举例，大家可以看到我的始发站、终点站都有了。然后我们可以再做一个模板，这次可以换一个增值税发票的。首先我们上传一张模板的底图，所有的增值税发票都长的差不多。然后我现在来选一些参照字段，选这个纳税人、开票日期、税率、开票人、小写、收款人、价税，这样就差不多了。比如说我想要识别这个，大写的金额，保存。就可以选择另外一张，这两张显然是不一样的。我们来看一下，应该是这张，可以看到这里写的是1000元整，这样的话我们也可以多框选一些别的字段，就可以像刚刚火车票一样，在这边，在页面上就可以测试出来我们想要的字段都能够给它结构化，按key value的形式找到。 基于模板的文字识别结构化流程 刚刚说的看起来操作很简单，但其实在它的背后我们做了一系列的操作。这个就是我们对整个文字识别结构化的流程，它经历了4个大的步骤（4大流程）。首先是图片摆正，然后是模板匹配、多次摆正，最后是结构化。 &nbsp; &nbsp; &nbsp; &nbsp; 对于图片的摆正来说，首先我们会进行一次文字识别，然后基于文字来寻找参照字段。我们通过参照字段来选择参照字段能够围成的最大面积的四边形，根据这个四边形来计算透视投影矩阵，并做一系列的图像变换，然后再计算所匹配的程度。如果足够匹配了，OK，那我们结构化；如果没有匹配，并且没有达到我们的匹配次数上限，我们是可以再来一次，尝试多次摆正，摆得更好一点。 基于深度学习的文字识别 &nbsp; &nbsp; &nbsp; &nbsp; 我们来讲一讲基于深度学习的文字识别。首先大体上来说有两种方式，一种是单字检测加上单字识别，另一种是行检测加上行识别。单字检测就是把文字当做一般的物体检测任务，例如可以用faster-rcnn这个网络去做，每一个字都可以当做一个小物体。检测出来的单字再用单字识别处理，本质上是个多分类任务。行识别就不再是检测一个一个字，而是一个文本行。一般来说文本行的特征有：高度不是很高，但是可能一行字会比较长，它其实是类似于小竖条，然后横着摆过来一个很长条的。对通常的物体检测模型做改造，然后去检测，其中一个好的例子就是cptn。然后把一行文字导出来之后再来识别，就可以当做是一个序列标注的问题了。当然现在也有这种端到端的，是大家正在做的一些方向。 基于模板的图片摆正 &nbsp; &nbsp; &nbsp; &nbsp; 我们再回到刚刚的模板。模板可以认为是一个标准的底版定义的结构，比如这个定额发票，其实我们一开始就知道我们需要识别的部分在模板上的位置，在这个票据上，我就知道这个发票代码它其实就在这儿，发票号码在这儿，金额在这儿。如果每张图都长这样，其实就很简单。但实际上来识别的图都不像模板一样摆的那么正，识别的区域在图片上的位置不是固定的，比如有可能我上传的图是这样，如果按照固定位置扣取，很可能什么都扣不到。所以我们需要有一种方案，也就是刚刚说的摆正那套流程，希望把所有待识别图都摆的跟模板一样正。我们选用的是透视投影方法来做图片的摆正，尽可能的把待识别的图跟模板图对齐，这样比较方便后面提取字。 &nbsp; &nbsp; &nbsp; 透视投影变换的时候，需要4组从待识别图到模板图对应的点对。也就是说像这样，比如这个发票的票字它在这儿，但是识别图上在这儿，模板上在这儿，这边一个发票号码，然后各种类似这样的对应起来的点对。通过这4组点对可以计算一个透视投影矩阵，做透视投影变换。我们通过框选模板上固定字段来做参照字段，进而通过文字匹配方式寻找对应点对。通常一个票据它的板式固定，那么它就符合我们刚刚说的那种条件，是对应的点对。 &nbsp; &nbsp; &nbsp; 如果参照字段有多个，这个时候可能就会遇到一个问题了。比如说对于这个票据来说，它虽然很简单，在上面可以提取的字也只有1、2、3、4、5，比如说我只提取了5个字段作为参照字段，但是计算索引的时候只需要4个点，此时需要取舍。比如这儿虽然只有5个字段，但实际组成的点对个数其实是比较多的，比如这个蓝线的可以算一个，这个红线这一圈也可以算一个。我们经过一些实验，当然从主观上看也能够想到，参照字段越分散它摆正的效果越好。可以这么理解，越分散的时候每一个点它能够管辖的区域就越存在这个票面的四周，那么它摆的时候，相当于说你从一个更高的维度或者一个更大的范围去摆，那么摆完的效果肯定比在一个小范围内去拉动其他地方来摆的误差小。 然后怎么样来衡量这个分散的程度？我们选用面积作为衡量四边形分散程度的指标。我们选面积的一个原因是好计算，四边形可以当做是两个三角形，只要有坐标，那么两个三角形的面积很好计算。另一个，其实说分散是很难衡量的，如果转化成面积的话其实面积就是一个数，比较好度量比较。 模板匹配 我们把待识别图做了透视投影之后，接下来要计算它和模板匹配的程度。因为有的时候，比如说这个时候识别的文字并不是太好，我摆了一下，然后这个时候我发现我可以识别的字更多了，而且第一次摆的时候我能识别得更多，但是发现这个时候摆的还不够，那我怎么能知道它摆得不够好？就需要来计算和模板的匹配程度。我们在这个地方选择的是用新的透视投影矩阵来计算摆正的程度。用新的透视投影矩阵计算摆正图片四顶点和模板，四顶点的距离来判断匹配程度。比如刚刚我们摆正之后，这个图的四个顶点和模板底图的四个顶点，有三个点都是比较近的，然后这个点相对来说远一点，就可以通过这种距离的方式来判断它的匹配程度。如果这个点通过摆正之后，计算出来它到了这个位置，那么距离的差其实就很小了，就可以认为它已经摆的非常好了，所以我们选择的是用这种策略来判断它匹配的程度。当然如果摆得很歪，这儿离得也很远，整个是这样一个倾斜的角度，如果和模板原图的四个点其实距离比较远，是能够判断出去这个时候匹配得不够好，可能还要再去做一次。 刚刚说到了多次摆正，也就是说我可能会计算多个透视投影矩阵。这个时候我们用到了一种技巧，就是透视投影矩阵的一个栈来操作。如果对级联透视矩阵有了解的同学就知道，我们通常来说透视投影的乘法是倒着乘的。比如这里的一个公式，M1代表的是透视投影之后的一个结果，M_origin表示是原图的矩阵，然后乘透视投影矩阵。如果它只有一次摆正的时候，只有一个透视投影矩阵，这个时候它就等价于那个结果就是用原图乘以这个透视投影矩阵。但有可能中间我们在处理的时候发现没有摆正，可能这个时候就会计算出很多个透视投影矩阵，我们就会把它们都重复地往透视投影矩阵的栈里面压入。这个时候，我们乘以透视投影矩阵栈就等价于原图逆序乘以矩阵栈中每个元素。 为什么一定要费劲来用这个透视投影矩阵栈？我倒着乘它，从origin倒着乘M2，再乘M1，和乘M2、M1，它俩的解读要加一个括号，其实是一样的，从矩阵上是这样。但是因为我们其实还是对图片做透视投影，如果单纯的类似括号的方式处理的话，它先乘以M2，它可能会把这个角扭到这儿，这个角往里收，可能会有一些图超出了图片原本的大小。那么在最后的一步处理的时候会进行一个裁剪，如果它有超出的部分，那么这个部分其实就已经被抛弃了。即使我后面希望再把它扭回来，其实那部分的信息已经永远丢失。所以我们在这个时候有一个透视投影矩阵栈，虽然它是逆着出来的，但其实计算的时候是先把这个矩阵栈里边做了一个相当于加括号的优先计算，以保留原图的全部信息。 多类型结构化 我们经过一系列的摆正操作之后，图片就跟模板比较接近了，可以对它进行一个识别结果的结构化处理。从刚刚我们的演示操作能看得到，我们的处理通常来说是有一个固定的识别区，就像刚刚火车票的这种始发站、车次号、终点站，我们识别出来是每个字有个小方框。我们对于这种固定识别区来说操作相对比较简单，可以根据单字矩形框的待识别区矩形框的交并比来判断是否属于某个字段。就像这样，比如说我们框的北京框是这儿，对于北京南这三个字完全处在起点站这个待识别区的内部。OK，那就可以确定它俩肯定是起点站这个识别区的内容。对于站这个字，虽然它也沾了一点，但是这个字的矩形框和整个待识别区矩形框的交并比并不多，所以我们就把它抛弃掉。对于车次来说，我们正好把这个全部框住，所以它们都是。对天津两个字跟北京南的情况类似。对于这种简单的情况可能就结束了。 &nbsp; &nbsp; &nbsp; &nbsp; 对于更复杂的，比如说成段落的，比如说我框了整个这一片的时候，我们就需要做纵横双向排序来自动处理跨行文字的拼接。什么意思？比如这两行，我会先对文字做一个上下的排序，所以第一行的字肯定拿出来会在第二行的前面，所以需要先对纵向每一个字做比较，然后把它们先分成上下两行。然后再看那两行之后，按照左右来排序，这样排完之后出来的结果才是顺序的从左到右，第一行然后第二行这样的关系。 &nbsp; &nbsp; &nbsp; 还有一种表格识别区。比如这个地方，这个识别区就是某一种体检的结果，可以很明显地看到它是一种表格，而且它没有线，它既没有横线，也没有竖线。我们需要把整个表格的结构从文字重新构建出来，我们在这个地方采用的是一种自底向上的表格构建方式，用先列后行的方式来减少非刚性形变的影响。比如说我们识别完了之后，现有单字的位置（比如前白蛋白4个字）的坐标，我们先从单字的坐标开始来构建组成一个字段关系。比如我们现在有4个字，我们根据位置关系把它组合成一个字段，这样的话我们就知道它们是一个整体，不可拆分。通常来说表格的这种一个单格的内容确实是不可拆分的。然后我们根据它的横向的位置关系来串成列，其实就有点像串冰糖葫芦一样。比如这个，我们知道其实所有的字段它的横向位置都在这个区域，我们就可以把它们都这样串起来，像串糖葫芦一样，串成一列。另外的两列也可以做类似的操作，但最后读的时候是一行一行读，比如糖、5.04。按列之后，再每次取列的头部字段，来根据高度信息组装成行。比如在这儿就是糖，这一列取第一个就是糖，第二列取第一个就是5.04，第三个就是取这个。 这种方式能够一定程度上地减少对于非刚性形变的影响。比如说什么叫刚性形变，什么叫非刚性形变？比如像现在是个平铺的，就是一个很薄的很平整的一个面片，把它做仿射变换，都是刚性的，但如果是弯曲这种，扭过来，折痕这种，其实就称为非刚性形变。那么它们的相对位置可能会有一些波纹型的变化，这种会比较难以处理。 &nbsp; &nbsp; &nbsp; 我们现在就把结构化的两个方式讲完了，总结一下，还是对应到刚刚的4个大的流程，一个是图片摆正，一个是模板匹配，计算和模板匹配的程度，如果匹配的还不错，匹配上了，OK，那我们就进行结构化，去提取我们事先定义好的待识别区和表格识别区。但如果很不幸我们摆的还不够正，那可能就会需要去做多次摆正这样一个操作，力求把它跟模板匹配得比较好，最后再做结构化。 迁移学习与图像分类 下面给大家介绍一下我们这个产品的分类器。为什么需要分类？其实根据第一个财税的例子来看，可能我们会报很多种票据，比如说出租车票、增值税发票。一般来说我们传的时候，是一张一张传，但汇聚到财务的时候，那就是一堆了，财务其实对不同的票据处理方式都不一样，所以非常需要把它们区分出来。比如说对增值税发票，有可能你报了那个发票多会对公司有什么减税，别的人只是单纯的报销。 &nbsp; &nbsp; &nbsp; 最近，我们也提出了对模板进行分类。其实最简单的一个想法是，如果我们是按图片，它就是一个简单的图像分类。我们可以采用的方案是基于迁移学习的一个图像分类，所谓迁移学习就是在已有的分类任务上效果比较好的CNN的模型在别的分类任务上面也有不错的效果，大家都知道比如ImageNet比赛有很庞大的数据，如果在那上面运行的预训练模型的结果不错，那么用它提取出来的特征在别的分类上效果也不错。第二就是迁移学习能够极大地减少训练数据需求的量，还有训练时长。 &nbsp; &nbsp; &nbsp; 我们的分类除了基于图像，还有关注到它基本都是票据类的图像，它其实是包括文字的，所以我们也结合了文字的特征来进行一个分类。首先是把整张图过一遍CNN的模型，提取出它的图像的特征，然后还要结合它的OCR出来的文字，提取它的文字特征。最后把两种特征进行一个融合，然后再去训练最终的分类器。 可以给大家看一个例子。比如在这里有一个分类器管理，我们可以看到我现在已经有的三个分类器，点编辑进去看一看。我现在能分的就是车牌跟火车票，可以在这儿试一试。火车票，它就分类到我的火车票了，就像刚刚我定的那个模板一样，就把那些数据都给结构化出来。就是说刚刚在这个地方的时候，相当于是指定了某一个模板。但是在分类器的时候其实就不需要了，随便扔，随便把图扔进去，然后它就能自动地帮我们分类，并且做我们需要的结构化。基于分类的原理就是这样。 &nbsp; &nbsp; &nbsp; 最后给大家带来一个财税场景上的例子，就是木牛盒子这个产品，它首先通过批量的票据扫描，其实就是这种扫描仪，能够把图像比较清晰地扫描出来，然后使用我们刚刚自定义模板的票据分类，然后结构化的功能加各种票据进行分类出来，就做到了智能识别。然后再把它结构化出来，再生成凭证，进行输出。 以上就是今天我给大家分享的内容，谢谢大家。 关注AI科技大本营微信公众号，回复：OCR，获取本次公开课演讲PPT。公开课讲师申请，请联系微信1092722531 （本文为 AI科技大本营公开课速记，转载请微信联系 1092722531） ◆ CTA核心技术及应用峰会 ◆ 5月25-27日，由中国IT社区CSDN与数字经济人才发展中心联合主办的第一届CTA核心技术及应用峰会将在杭州国际博览中心隆重召开，峰会将围绕人工智能领域，邀请技术领航者，与开发者共同探讨机器学习和知识图谱的前沿研究及应用。 更多重磅嘉宾请识别海报二维码查看，目前会议早鸟票发售中（原票价1099元），点击阅读原文即刻抢购。添加小助手微信15101014297，备注“CTA”，了解票务以及会务详情。 推荐阅读 他25岁进贝尔实验室，32岁提信息论，40岁办达特茅斯会议，晚年患上阿兹海默 | 人物志 重磅！Facebook更新PyTorch 1.1，打算跨GPU分割神经网络 小样，加张图你就不认识我了？“补丁”模型骗你没商量！| 技术头条 东大漆桂林、清华李涓子、复旦肖仰华等大牛确认出席CTA峰会！5月一起打卡杭州 京东 60 天哗变！CTO 成优化第一人 | 畅言 异构计算=未来？一文带你秒懂3大主流异构 《互联网人叹气图鉴》 回报率29%! 大神用情感分析创建一个比特币交易算法, 原来交易玩的是心理战 她说：为啥程序员都特想要机械键盘？这答案我服！" />
<meta property="og:description" content="嘉宾 | 向宇波 编辑 | suiling 来源 | AI科技大本营在线公开课 出品 | AI科技大本营（ID：rgznai100） 随着行业的发展和技术的成熟，文字识别（OCR）目前已经应用到了多个行业中，比如物流行业快递包裹的分拣，金融行业的支票单据识别输入，交通领域中的车牌识别，以及日常生活中的卡证、票据识别等等。OCR（文字识别）技术是目前常用的一种AI能力。但一般OCR的识别结果是一种按行输出的半结构化输出。 本次公开课我们邀请到了百度高级研发工程师向宇波老师，他将在12月20日（周四）带来一场主题为《基于模板的文字识别结果结构化处理技术》的分享。本课程从百度自定义模板文字识别展开，从理论到案例，详细介绍OCR结构化的相关技术，并理清OCR和结构化之间的关系和适用场景。 向宇波：大家好，我是来自百度AI技术生态部的研发工程师，我叫向宇波，今天给大家带来的分享是基于模板的文字识别结果结构化处理技术，我们主要讲的是文字处理结果的结构化。 文字识别行业现状 我们从一个财税案例的角度出发。大家在公司里肯定都做过报销，报销的时候我们都会有出租车票、定额发票等，我们需要将各种发票贴到纸上然后提交上去，由财务来做后面的事情。通常来说，他们其实做的都非常辛苦，要耗费大量的人力来进行人工录入。这样的话，不仅成本很高，而且耗时也很长，人工录入的话还有可能会出错。我们能不能够通过用文字识别的方式来解决这个问题呢？比如把这个流程变成这样，我们在中间加一层，不是人工录入，而是通过一个识别系统，首先我们把这些票据通过图像采集设备，例如高分辨率扫描、拍照这种方式转换成图像，然后通过文字识别技术把图像上的文字识别出来，再经过一个数据的结构化，最后输入到财务系统。这样能节约大量的人力物力，也能够提高效率及准确率。其关键部分是在识别之后做一个结构化处理。 我们来看一下多模板的结构化识别。首先来说，我们从刚刚的例子也能看得到，哪怕是一个很简单的报销过程，也涉及到很多种票据，例如火车票、定额发票等等。现实生活中这种票据非常多。所以，我们的结构化方案要能够支持多种模板。 一般来讲，OCR识别出来的结果是单纯的一行一行文字，这样业务处理起来会比较困难，key value形式的结构会比较好处理。我们用一个例子来解释，比如我们识别一张火车票，这个火车票上面有一行文字是始发站，然后是车次、到达站。如果直接处理识别出来的那一行文字相对麻烦，因为需要去切分出各个字段。但是，如果我们的识别结果有结构，那处理起来就会容易很多。通过key value的形式检索，我就能够知道我的始发站（北京南），然后到达站（天津）、车次。所以结构化给业务处理带来了极大的便利。 接下来我们看一下文字识别分类。通常来说文字识别分为两个大类，一种是通用文字识别，另一种就是专用垂类识别。通用文字识别就像刚刚提到的，对一个图片来说，识别结果会以行的形式输出，同时会有比较准确的文字坐标，这种按行输出的结构可以称之为半结构化，它只能告诉你在这一行，在这一行，从上到下罗列，没有真正意义上的key value结构。 专用垂类识别的结果有结构，比如说对于身份证，其实我们知道所有身份证都长的一样，我们能够知道身份证上这个地方是姓名，这个地方是性别，这个地方是民族，所以我们能够返回的时候就告诉你姓名是什么，性别是什么，生日是什么。常见的专用垂类还覆盖几类常见卡证，像身份证、银行卡、增值税发票这些。但是开发一个专用垂类识别，通常来说需要花比较多的人力物力，才能够达到一个比较高的准确度，所以它的开发周期和人力成本都比较高。 &nbsp; &nbsp; &nbsp; 整个看来，业务处理需要不同板式的文字识别，并且希望能够结构化，但是如果把它们变成专用的垂类模板来，就会面临成本很高，周期很长的情况。 基于这些矛盾，我们推出了一个基于模板的文字识别结果的结构化方案。给大家做一个例子来演示，比如用火车票。我有一个火车票的模板，就是就拿我自己的火车票举例，大家可以看到我的始发站、终点站都有了。然后我们可以再做一个模板，这次可以换一个增值税发票的。首先我们上传一张模板的底图，所有的增值税发票都长的差不多。然后我现在来选一些参照字段，选这个纳税人、开票日期、税率、开票人、小写、收款人、价税，这样就差不多了。比如说我想要识别这个，大写的金额，保存。就可以选择另外一张，这两张显然是不一样的。我们来看一下，应该是这张，可以看到这里写的是1000元整，这样的话我们也可以多框选一些别的字段，就可以像刚刚火车票一样，在这边，在页面上就可以测试出来我们想要的字段都能够给它结构化，按key value的形式找到。 基于模板的文字识别结构化流程 刚刚说的看起来操作很简单，但其实在它的背后我们做了一系列的操作。这个就是我们对整个文字识别结构化的流程，它经历了4个大的步骤（4大流程）。首先是图片摆正，然后是模板匹配、多次摆正，最后是结构化。 &nbsp; &nbsp; &nbsp; &nbsp; 对于图片的摆正来说，首先我们会进行一次文字识别，然后基于文字来寻找参照字段。我们通过参照字段来选择参照字段能够围成的最大面积的四边形，根据这个四边形来计算透视投影矩阵，并做一系列的图像变换，然后再计算所匹配的程度。如果足够匹配了，OK，那我们结构化；如果没有匹配，并且没有达到我们的匹配次数上限，我们是可以再来一次，尝试多次摆正，摆得更好一点。 基于深度学习的文字识别 &nbsp; &nbsp; &nbsp; &nbsp; 我们来讲一讲基于深度学习的文字识别。首先大体上来说有两种方式，一种是单字检测加上单字识别，另一种是行检测加上行识别。单字检测就是把文字当做一般的物体检测任务，例如可以用faster-rcnn这个网络去做，每一个字都可以当做一个小物体。检测出来的单字再用单字识别处理，本质上是个多分类任务。行识别就不再是检测一个一个字，而是一个文本行。一般来说文本行的特征有：高度不是很高，但是可能一行字会比较长，它其实是类似于小竖条，然后横着摆过来一个很长条的。对通常的物体检测模型做改造，然后去检测，其中一个好的例子就是cptn。然后把一行文字导出来之后再来识别，就可以当做是一个序列标注的问题了。当然现在也有这种端到端的，是大家正在做的一些方向。 基于模板的图片摆正 &nbsp; &nbsp; &nbsp; &nbsp; 我们再回到刚刚的模板。模板可以认为是一个标准的底版定义的结构，比如这个定额发票，其实我们一开始就知道我们需要识别的部分在模板上的位置，在这个票据上，我就知道这个发票代码它其实就在这儿，发票号码在这儿，金额在这儿。如果每张图都长这样，其实就很简单。但实际上来识别的图都不像模板一样摆的那么正，识别的区域在图片上的位置不是固定的，比如有可能我上传的图是这样，如果按照固定位置扣取，很可能什么都扣不到。所以我们需要有一种方案，也就是刚刚说的摆正那套流程，希望把所有待识别图都摆的跟模板一样正。我们选用的是透视投影方法来做图片的摆正，尽可能的把待识别的图跟模板图对齐，这样比较方便后面提取字。 &nbsp; &nbsp; &nbsp; 透视投影变换的时候，需要4组从待识别图到模板图对应的点对。也就是说像这样，比如这个发票的票字它在这儿，但是识别图上在这儿，模板上在这儿，这边一个发票号码，然后各种类似这样的对应起来的点对。通过这4组点对可以计算一个透视投影矩阵，做透视投影变换。我们通过框选模板上固定字段来做参照字段，进而通过文字匹配方式寻找对应点对。通常一个票据它的板式固定，那么它就符合我们刚刚说的那种条件，是对应的点对。 &nbsp; &nbsp; &nbsp; 如果参照字段有多个，这个时候可能就会遇到一个问题了。比如说对于这个票据来说，它虽然很简单，在上面可以提取的字也只有1、2、3、4、5，比如说我只提取了5个字段作为参照字段，但是计算索引的时候只需要4个点，此时需要取舍。比如这儿虽然只有5个字段，但实际组成的点对个数其实是比较多的，比如这个蓝线的可以算一个，这个红线这一圈也可以算一个。我们经过一些实验，当然从主观上看也能够想到，参照字段越分散它摆正的效果越好。可以这么理解，越分散的时候每一个点它能够管辖的区域就越存在这个票面的四周，那么它摆的时候，相当于说你从一个更高的维度或者一个更大的范围去摆，那么摆完的效果肯定比在一个小范围内去拉动其他地方来摆的误差小。 然后怎么样来衡量这个分散的程度？我们选用面积作为衡量四边形分散程度的指标。我们选面积的一个原因是好计算，四边形可以当做是两个三角形，只要有坐标，那么两个三角形的面积很好计算。另一个，其实说分散是很难衡量的，如果转化成面积的话其实面积就是一个数，比较好度量比较。 模板匹配 我们把待识别图做了透视投影之后，接下来要计算它和模板匹配的程度。因为有的时候，比如说这个时候识别的文字并不是太好，我摆了一下，然后这个时候我发现我可以识别的字更多了，而且第一次摆的时候我能识别得更多，但是发现这个时候摆的还不够，那我怎么能知道它摆得不够好？就需要来计算和模板的匹配程度。我们在这个地方选择的是用新的透视投影矩阵来计算摆正的程度。用新的透视投影矩阵计算摆正图片四顶点和模板，四顶点的距离来判断匹配程度。比如刚刚我们摆正之后，这个图的四个顶点和模板底图的四个顶点，有三个点都是比较近的，然后这个点相对来说远一点，就可以通过这种距离的方式来判断它的匹配程度。如果这个点通过摆正之后，计算出来它到了这个位置，那么距离的差其实就很小了，就可以认为它已经摆的非常好了，所以我们选择的是用这种策略来判断它匹配的程度。当然如果摆得很歪，这儿离得也很远，整个是这样一个倾斜的角度，如果和模板原图的四个点其实距离比较远，是能够判断出去这个时候匹配得不够好，可能还要再去做一次。 刚刚说到了多次摆正，也就是说我可能会计算多个透视投影矩阵。这个时候我们用到了一种技巧，就是透视投影矩阵的一个栈来操作。如果对级联透视矩阵有了解的同学就知道，我们通常来说透视投影的乘法是倒着乘的。比如这里的一个公式，M1代表的是透视投影之后的一个结果，M_origin表示是原图的矩阵，然后乘透视投影矩阵。如果它只有一次摆正的时候，只有一个透视投影矩阵，这个时候它就等价于那个结果就是用原图乘以这个透视投影矩阵。但有可能中间我们在处理的时候发现没有摆正，可能这个时候就会计算出很多个透视投影矩阵，我们就会把它们都重复地往透视投影矩阵的栈里面压入。这个时候，我们乘以透视投影矩阵栈就等价于原图逆序乘以矩阵栈中每个元素。 为什么一定要费劲来用这个透视投影矩阵栈？我倒着乘它，从origin倒着乘M2，再乘M1，和乘M2、M1，它俩的解读要加一个括号，其实是一样的，从矩阵上是这样。但是因为我们其实还是对图片做透视投影，如果单纯的类似括号的方式处理的话，它先乘以M2，它可能会把这个角扭到这儿，这个角往里收，可能会有一些图超出了图片原本的大小。那么在最后的一步处理的时候会进行一个裁剪，如果它有超出的部分，那么这个部分其实就已经被抛弃了。即使我后面希望再把它扭回来，其实那部分的信息已经永远丢失。所以我们在这个时候有一个透视投影矩阵栈，虽然它是逆着出来的，但其实计算的时候是先把这个矩阵栈里边做了一个相当于加括号的优先计算，以保留原图的全部信息。 多类型结构化 我们经过一系列的摆正操作之后，图片就跟模板比较接近了，可以对它进行一个识别结果的结构化处理。从刚刚我们的演示操作能看得到，我们的处理通常来说是有一个固定的识别区，就像刚刚火车票的这种始发站、车次号、终点站，我们识别出来是每个字有个小方框。我们对于这种固定识别区来说操作相对比较简单，可以根据单字矩形框的待识别区矩形框的交并比来判断是否属于某个字段。就像这样，比如说我们框的北京框是这儿，对于北京南这三个字完全处在起点站这个待识别区的内部。OK，那就可以确定它俩肯定是起点站这个识别区的内容。对于站这个字，虽然它也沾了一点，但是这个字的矩形框和整个待识别区矩形框的交并比并不多，所以我们就把它抛弃掉。对于车次来说，我们正好把这个全部框住，所以它们都是。对天津两个字跟北京南的情况类似。对于这种简单的情况可能就结束了。 &nbsp; &nbsp; &nbsp; &nbsp; 对于更复杂的，比如说成段落的，比如说我框了整个这一片的时候，我们就需要做纵横双向排序来自动处理跨行文字的拼接。什么意思？比如这两行，我会先对文字做一个上下的排序，所以第一行的字肯定拿出来会在第二行的前面，所以需要先对纵向每一个字做比较，然后把它们先分成上下两行。然后再看那两行之后，按照左右来排序，这样排完之后出来的结果才是顺序的从左到右，第一行然后第二行这样的关系。 &nbsp; &nbsp; &nbsp; 还有一种表格识别区。比如这个地方，这个识别区就是某一种体检的结果，可以很明显地看到它是一种表格，而且它没有线，它既没有横线，也没有竖线。我们需要把整个表格的结构从文字重新构建出来，我们在这个地方采用的是一种自底向上的表格构建方式，用先列后行的方式来减少非刚性形变的影响。比如说我们识别完了之后，现有单字的位置（比如前白蛋白4个字）的坐标，我们先从单字的坐标开始来构建组成一个字段关系。比如我们现在有4个字，我们根据位置关系把它组合成一个字段，这样的话我们就知道它们是一个整体，不可拆分。通常来说表格的这种一个单格的内容确实是不可拆分的。然后我们根据它的横向的位置关系来串成列，其实就有点像串冰糖葫芦一样。比如这个，我们知道其实所有的字段它的横向位置都在这个区域，我们就可以把它们都这样串起来，像串糖葫芦一样，串成一列。另外的两列也可以做类似的操作，但最后读的时候是一行一行读，比如糖、5.04。按列之后，再每次取列的头部字段，来根据高度信息组装成行。比如在这儿就是糖，这一列取第一个就是糖，第二列取第一个就是5.04，第三个就是取这个。 这种方式能够一定程度上地减少对于非刚性形变的影响。比如说什么叫刚性形变，什么叫非刚性形变？比如像现在是个平铺的，就是一个很薄的很平整的一个面片，把它做仿射变换，都是刚性的，但如果是弯曲这种，扭过来，折痕这种，其实就称为非刚性形变。那么它们的相对位置可能会有一些波纹型的变化，这种会比较难以处理。 &nbsp; &nbsp; &nbsp; 我们现在就把结构化的两个方式讲完了，总结一下，还是对应到刚刚的4个大的流程，一个是图片摆正，一个是模板匹配，计算和模板匹配的程度，如果匹配的还不错，匹配上了，OK，那我们就进行结构化，去提取我们事先定义好的待识别区和表格识别区。但如果很不幸我们摆的还不够正，那可能就会需要去做多次摆正这样一个操作，力求把它跟模板匹配得比较好，最后再做结构化。 迁移学习与图像分类 下面给大家介绍一下我们这个产品的分类器。为什么需要分类？其实根据第一个财税的例子来看，可能我们会报很多种票据，比如说出租车票、增值税发票。一般来说我们传的时候，是一张一张传，但汇聚到财务的时候，那就是一堆了，财务其实对不同的票据处理方式都不一样，所以非常需要把它们区分出来。比如说对增值税发票，有可能你报了那个发票多会对公司有什么减税，别的人只是单纯的报销。 &nbsp; &nbsp; &nbsp; 最近，我们也提出了对模板进行分类。其实最简单的一个想法是，如果我们是按图片，它就是一个简单的图像分类。我们可以采用的方案是基于迁移学习的一个图像分类，所谓迁移学习就是在已有的分类任务上效果比较好的CNN的模型在别的分类任务上面也有不错的效果，大家都知道比如ImageNet比赛有很庞大的数据，如果在那上面运行的预训练模型的结果不错，那么用它提取出来的特征在别的分类上效果也不错。第二就是迁移学习能够极大地减少训练数据需求的量，还有训练时长。 &nbsp; &nbsp; &nbsp; 我们的分类除了基于图像，还有关注到它基本都是票据类的图像，它其实是包括文字的，所以我们也结合了文字的特征来进行一个分类。首先是把整张图过一遍CNN的模型，提取出它的图像的特征，然后还要结合它的OCR出来的文字，提取它的文字特征。最后把两种特征进行一个融合，然后再去训练最终的分类器。 可以给大家看一个例子。比如在这里有一个分类器管理，我们可以看到我现在已经有的三个分类器，点编辑进去看一看。我现在能分的就是车牌跟火车票，可以在这儿试一试。火车票，它就分类到我的火车票了，就像刚刚我定的那个模板一样，就把那些数据都给结构化出来。就是说刚刚在这个地方的时候，相当于是指定了某一个模板。但是在分类器的时候其实就不需要了，随便扔，随便把图扔进去，然后它就能自动地帮我们分类，并且做我们需要的结构化。基于分类的原理就是这样。 &nbsp; &nbsp; &nbsp; 最后给大家带来一个财税场景上的例子，就是木牛盒子这个产品，它首先通过批量的票据扫描，其实就是这种扫描仪，能够把图像比较清晰地扫描出来，然后使用我们刚刚自定义模板的票据分类，然后结构化的功能加各种票据进行分类出来，就做到了智能识别。然后再把它结构化出来，再生成凭证，进行输出。 以上就是今天我给大家分享的内容，谢谢大家。 关注AI科技大本营微信公众号，回复：OCR，获取本次公开课演讲PPT。公开课讲师申请，请联系微信1092722531 （本文为 AI科技大本营公开课速记，转载请微信联系 1092722531） ◆ CTA核心技术及应用峰会 ◆ 5月25-27日，由中国IT社区CSDN与数字经济人才发展中心联合主办的第一届CTA核心技术及应用峰会将在杭州国际博览中心隆重召开，峰会将围绕人工智能领域，邀请技术领航者，与开发者共同探讨机器学习和知识图谱的前沿研究及应用。 更多重磅嘉宾请识别海报二维码查看，目前会议早鸟票发售中（原票价1099元），点击阅读原文即刻抢购。添加小助手微信15101014297，备注“CTA”，了解票务以及会务详情。 推荐阅读 他25岁进贝尔实验室，32岁提信息论，40岁办达特茅斯会议，晚年患上阿兹海默 | 人物志 重磅！Facebook更新PyTorch 1.1，打算跨GPU分割神经网络 小样，加张图你就不认识我了？“补丁”模型骗你没商量！| 技术头条 东大漆桂林、清华李涓子、复旦肖仰华等大牛确认出席CTA峰会！5月一起打卡杭州 京东 60 天哗变！CTO 成优化第一人 | 畅言 异构计算=未来？一文带你秒懂3大主流异构 《互联网人叹气图鉴》 回报率29%! 大神用情感分析创建一个比特币交易算法, 原来交易玩的是心理战 她说：为啥程序员都特想要机械键盘？这答案我服！" />
<link rel="canonical" href="https://mlh.app/2019/05/03/729853.html" />
<meta property="og:url" content="https://mlh.app/2019/05/03/729853.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-03T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"嘉宾 | 向宇波 编辑 | suiling 来源 | AI科技大本营在线公开课 出品 | AI科技大本营（ID：rgznai100） 随着行业的发展和技术的成熟，文字识别（OCR）目前已经应用到了多个行业中，比如物流行业快递包裹的分拣，金融行业的支票单据识别输入，交通领域中的车牌识别，以及日常生活中的卡证、票据识别等等。OCR（文字识别）技术是目前常用的一种AI能力。但一般OCR的识别结果是一种按行输出的半结构化输出。 本次公开课我们邀请到了百度高级研发工程师向宇波老师，他将在12月20日（周四）带来一场主题为《基于模板的文字识别结果结构化处理技术》的分享。本课程从百度自定义模板文字识别展开，从理论到案例，详细介绍OCR结构化的相关技术，并理清OCR和结构化之间的关系和适用场景。 向宇波：大家好，我是来自百度AI技术生态部的研发工程师，我叫向宇波，今天给大家带来的分享是基于模板的文字识别结果结构化处理技术，我们主要讲的是文字处理结果的结构化。 文字识别行业现状 我们从一个财税案例的角度出发。大家在公司里肯定都做过报销，报销的时候我们都会有出租车票、定额发票等，我们需要将各种发票贴到纸上然后提交上去，由财务来做后面的事情。通常来说，他们其实做的都非常辛苦，要耗费大量的人力来进行人工录入。这样的话，不仅成本很高，而且耗时也很长，人工录入的话还有可能会出错。我们能不能够通过用文字识别的方式来解决这个问题呢？比如把这个流程变成这样，我们在中间加一层，不是人工录入，而是通过一个识别系统，首先我们把这些票据通过图像采集设备，例如高分辨率扫描、拍照这种方式转换成图像，然后通过文字识别技术把图像上的文字识别出来，再经过一个数据的结构化，最后输入到财务系统。这样能节约大量的人力物力，也能够提高效率及准确率。其关键部分是在识别之后做一个结构化处理。 我们来看一下多模板的结构化识别。首先来说，我们从刚刚的例子也能看得到，哪怕是一个很简单的报销过程，也涉及到很多种票据，例如火车票、定额发票等等。现实生活中这种票据非常多。所以，我们的结构化方案要能够支持多种模板。 一般来讲，OCR识别出来的结果是单纯的一行一行文字，这样业务处理起来会比较困难，key value形式的结构会比较好处理。我们用一个例子来解释，比如我们识别一张火车票，这个火车票上面有一行文字是始发站，然后是车次、到达站。如果直接处理识别出来的那一行文字相对麻烦，因为需要去切分出各个字段。但是，如果我们的识别结果有结构，那处理起来就会容易很多。通过key value的形式检索，我就能够知道我的始发站（北京南），然后到达站（天津）、车次。所以结构化给业务处理带来了极大的便利。 接下来我们看一下文字识别分类。通常来说文字识别分为两个大类，一种是通用文字识别，另一种就是专用垂类识别。通用文字识别就像刚刚提到的，对一个图片来说，识别结果会以行的形式输出，同时会有比较准确的文字坐标，这种按行输出的结构可以称之为半结构化，它只能告诉你在这一行，在这一行，从上到下罗列，没有真正意义上的key value结构。 专用垂类识别的结果有结构，比如说对于身份证，其实我们知道所有身份证都长的一样，我们能够知道身份证上这个地方是姓名，这个地方是性别，这个地方是民族，所以我们能够返回的时候就告诉你姓名是什么，性别是什么，生日是什么。常见的专用垂类还覆盖几类常见卡证，像身份证、银行卡、增值税发票这些。但是开发一个专用垂类识别，通常来说需要花比较多的人力物力，才能够达到一个比较高的准确度，所以它的开发周期和人力成本都比较高。 &nbsp; &nbsp; &nbsp; 整个看来，业务处理需要不同板式的文字识别，并且希望能够结构化，但是如果把它们变成专用的垂类模板来，就会面临成本很高，周期很长的情况。 基于这些矛盾，我们推出了一个基于模板的文字识别结果的结构化方案。给大家做一个例子来演示，比如用火车票。我有一个火车票的模板，就是就拿我自己的火车票举例，大家可以看到我的始发站、终点站都有了。然后我们可以再做一个模板，这次可以换一个增值税发票的。首先我们上传一张模板的底图，所有的增值税发票都长的差不多。然后我现在来选一些参照字段，选这个纳税人、开票日期、税率、开票人、小写、收款人、价税，这样就差不多了。比如说我想要识别这个，大写的金额，保存。就可以选择另外一张，这两张显然是不一样的。我们来看一下，应该是这张，可以看到这里写的是1000元整，这样的话我们也可以多框选一些别的字段，就可以像刚刚火车票一样，在这边，在页面上就可以测试出来我们想要的字段都能够给它结构化，按key value的形式找到。 基于模板的文字识别结构化流程 刚刚说的看起来操作很简单，但其实在它的背后我们做了一系列的操作。这个就是我们对整个文字识别结构化的流程，它经历了4个大的步骤（4大流程）。首先是图片摆正，然后是模板匹配、多次摆正，最后是结构化。 &nbsp; &nbsp; &nbsp; &nbsp; 对于图片的摆正来说，首先我们会进行一次文字识别，然后基于文字来寻找参照字段。我们通过参照字段来选择参照字段能够围成的最大面积的四边形，根据这个四边形来计算透视投影矩阵，并做一系列的图像变换，然后再计算所匹配的程度。如果足够匹配了，OK，那我们结构化；如果没有匹配，并且没有达到我们的匹配次数上限，我们是可以再来一次，尝试多次摆正，摆得更好一点。 基于深度学习的文字识别 &nbsp; &nbsp; &nbsp; &nbsp; 我们来讲一讲基于深度学习的文字识别。首先大体上来说有两种方式，一种是单字检测加上单字识别，另一种是行检测加上行识别。单字检测就是把文字当做一般的物体检测任务，例如可以用faster-rcnn这个网络去做，每一个字都可以当做一个小物体。检测出来的单字再用单字识别处理，本质上是个多分类任务。行识别就不再是检测一个一个字，而是一个文本行。一般来说文本行的特征有：高度不是很高，但是可能一行字会比较长，它其实是类似于小竖条，然后横着摆过来一个很长条的。对通常的物体检测模型做改造，然后去检测，其中一个好的例子就是cptn。然后把一行文字导出来之后再来识别，就可以当做是一个序列标注的问题了。当然现在也有这种端到端的，是大家正在做的一些方向。 基于模板的图片摆正 &nbsp; &nbsp; &nbsp; &nbsp; 我们再回到刚刚的模板。模板可以认为是一个标准的底版定义的结构，比如这个定额发票，其实我们一开始就知道我们需要识别的部分在模板上的位置，在这个票据上，我就知道这个发票代码它其实就在这儿，发票号码在这儿，金额在这儿。如果每张图都长这样，其实就很简单。但实际上来识别的图都不像模板一样摆的那么正，识别的区域在图片上的位置不是固定的，比如有可能我上传的图是这样，如果按照固定位置扣取，很可能什么都扣不到。所以我们需要有一种方案，也就是刚刚说的摆正那套流程，希望把所有待识别图都摆的跟模板一样正。我们选用的是透视投影方法来做图片的摆正，尽可能的把待识别的图跟模板图对齐，这样比较方便后面提取字。 &nbsp; &nbsp; &nbsp; 透视投影变换的时候，需要4组从待识别图到模板图对应的点对。也就是说像这样，比如这个发票的票字它在这儿，但是识别图上在这儿，模板上在这儿，这边一个发票号码，然后各种类似这样的对应起来的点对。通过这4组点对可以计算一个透视投影矩阵，做透视投影变换。我们通过框选模板上固定字段来做参照字段，进而通过文字匹配方式寻找对应点对。通常一个票据它的板式固定，那么它就符合我们刚刚说的那种条件，是对应的点对。 &nbsp; &nbsp; &nbsp; 如果参照字段有多个，这个时候可能就会遇到一个问题了。比如说对于这个票据来说，它虽然很简单，在上面可以提取的字也只有1、2、3、4、5，比如说我只提取了5个字段作为参照字段，但是计算索引的时候只需要4个点，此时需要取舍。比如这儿虽然只有5个字段，但实际组成的点对个数其实是比较多的，比如这个蓝线的可以算一个，这个红线这一圈也可以算一个。我们经过一些实验，当然从主观上看也能够想到，参照字段越分散它摆正的效果越好。可以这么理解，越分散的时候每一个点它能够管辖的区域就越存在这个票面的四周，那么它摆的时候，相当于说你从一个更高的维度或者一个更大的范围去摆，那么摆完的效果肯定比在一个小范围内去拉动其他地方来摆的误差小。 然后怎么样来衡量这个分散的程度？我们选用面积作为衡量四边形分散程度的指标。我们选面积的一个原因是好计算，四边形可以当做是两个三角形，只要有坐标，那么两个三角形的面积很好计算。另一个，其实说分散是很难衡量的，如果转化成面积的话其实面积就是一个数，比较好度量比较。 模板匹配 我们把待识别图做了透视投影之后，接下来要计算它和模板匹配的程度。因为有的时候，比如说这个时候识别的文字并不是太好，我摆了一下，然后这个时候我发现我可以识别的字更多了，而且第一次摆的时候我能识别得更多，但是发现这个时候摆的还不够，那我怎么能知道它摆得不够好？就需要来计算和模板的匹配程度。我们在这个地方选择的是用新的透视投影矩阵来计算摆正的程度。用新的透视投影矩阵计算摆正图片四顶点和模板，四顶点的距离来判断匹配程度。比如刚刚我们摆正之后，这个图的四个顶点和模板底图的四个顶点，有三个点都是比较近的，然后这个点相对来说远一点，就可以通过这种距离的方式来判断它的匹配程度。如果这个点通过摆正之后，计算出来它到了这个位置，那么距离的差其实就很小了，就可以认为它已经摆的非常好了，所以我们选择的是用这种策略来判断它匹配的程度。当然如果摆得很歪，这儿离得也很远，整个是这样一个倾斜的角度，如果和模板原图的四个点其实距离比较远，是能够判断出去这个时候匹配得不够好，可能还要再去做一次。 刚刚说到了多次摆正，也就是说我可能会计算多个透视投影矩阵。这个时候我们用到了一种技巧，就是透视投影矩阵的一个栈来操作。如果对级联透视矩阵有了解的同学就知道，我们通常来说透视投影的乘法是倒着乘的。比如这里的一个公式，M1代表的是透视投影之后的一个结果，M_origin表示是原图的矩阵，然后乘透视投影矩阵。如果它只有一次摆正的时候，只有一个透视投影矩阵，这个时候它就等价于那个结果就是用原图乘以这个透视投影矩阵。但有可能中间我们在处理的时候发现没有摆正，可能这个时候就会计算出很多个透视投影矩阵，我们就会把它们都重复地往透视投影矩阵的栈里面压入。这个时候，我们乘以透视投影矩阵栈就等价于原图逆序乘以矩阵栈中每个元素。 为什么一定要费劲来用这个透视投影矩阵栈？我倒着乘它，从origin倒着乘M2，再乘M1，和乘M2、M1，它俩的解读要加一个括号，其实是一样的，从矩阵上是这样。但是因为我们其实还是对图片做透视投影，如果单纯的类似括号的方式处理的话，它先乘以M2，它可能会把这个角扭到这儿，这个角往里收，可能会有一些图超出了图片原本的大小。那么在最后的一步处理的时候会进行一个裁剪，如果它有超出的部分，那么这个部分其实就已经被抛弃了。即使我后面希望再把它扭回来，其实那部分的信息已经永远丢失。所以我们在这个时候有一个透视投影矩阵栈，虽然它是逆着出来的，但其实计算的时候是先把这个矩阵栈里边做了一个相当于加括号的优先计算，以保留原图的全部信息。 多类型结构化 我们经过一系列的摆正操作之后，图片就跟模板比较接近了，可以对它进行一个识别结果的结构化处理。从刚刚我们的演示操作能看得到，我们的处理通常来说是有一个固定的识别区，就像刚刚火车票的这种始发站、车次号、终点站，我们识别出来是每个字有个小方框。我们对于这种固定识别区来说操作相对比较简单，可以根据单字矩形框的待识别区矩形框的交并比来判断是否属于某个字段。就像这样，比如说我们框的北京框是这儿，对于北京南这三个字完全处在起点站这个待识别区的内部。OK，那就可以确定它俩肯定是起点站这个识别区的内容。对于站这个字，虽然它也沾了一点，但是这个字的矩形框和整个待识别区矩形框的交并比并不多，所以我们就把它抛弃掉。对于车次来说，我们正好把这个全部框住，所以它们都是。对天津两个字跟北京南的情况类似。对于这种简单的情况可能就结束了。 &nbsp; &nbsp; &nbsp; &nbsp; 对于更复杂的，比如说成段落的，比如说我框了整个这一片的时候，我们就需要做纵横双向排序来自动处理跨行文字的拼接。什么意思？比如这两行，我会先对文字做一个上下的排序，所以第一行的字肯定拿出来会在第二行的前面，所以需要先对纵向每一个字做比较，然后把它们先分成上下两行。然后再看那两行之后，按照左右来排序，这样排完之后出来的结果才是顺序的从左到右，第一行然后第二行这样的关系。 &nbsp; &nbsp; &nbsp; 还有一种表格识别区。比如这个地方，这个识别区就是某一种体检的结果，可以很明显地看到它是一种表格，而且它没有线，它既没有横线，也没有竖线。我们需要把整个表格的结构从文字重新构建出来，我们在这个地方采用的是一种自底向上的表格构建方式，用先列后行的方式来减少非刚性形变的影响。比如说我们识别完了之后，现有单字的位置（比如前白蛋白4个字）的坐标，我们先从单字的坐标开始来构建组成一个字段关系。比如我们现在有4个字，我们根据位置关系把它组合成一个字段，这样的话我们就知道它们是一个整体，不可拆分。通常来说表格的这种一个单格的内容确实是不可拆分的。然后我们根据它的横向的位置关系来串成列，其实就有点像串冰糖葫芦一样。比如这个，我们知道其实所有的字段它的横向位置都在这个区域，我们就可以把它们都这样串起来，像串糖葫芦一样，串成一列。另外的两列也可以做类似的操作，但最后读的时候是一行一行读，比如糖、5.04。按列之后，再每次取列的头部字段，来根据高度信息组装成行。比如在这儿就是糖，这一列取第一个就是糖，第二列取第一个就是5.04，第三个就是取这个。 这种方式能够一定程度上地减少对于非刚性形变的影响。比如说什么叫刚性形变，什么叫非刚性形变？比如像现在是个平铺的，就是一个很薄的很平整的一个面片，把它做仿射变换，都是刚性的，但如果是弯曲这种，扭过来，折痕这种，其实就称为非刚性形变。那么它们的相对位置可能会有一些波纹型的变化，这种会比较难以处理。 &nbsp; &nbsp; &nbsp; 我们现在就把结构化的两个方式讲完了，总结一下，还是对应到刚刚的4个大的流程，一个是图片摆正，一个是模板匹配，计算和模板匹配的程度，如果匹配的还不错，匹配上了，OK，那我们就进行结构化，去提取我们事先定义好的待识别区和表格识别区。但如果很不幸我们摆的还不够正，那可能就会需要去做多次摆正这样一个操作，力求把它跟模板匹配得比较好，最后再做结构化。 迁移学习与图像分类 下面给大家介绍一下我们这个产品的分类器。为什么需要分类？其实根据第一个财税的例子来看，可能我们会报很多种票据，比如说出租车票、增值税发票。一般来说我们传的时候，是一张一张传，但汇聚到财务的时候，那就是一堆了，财务其实对不同的票据处理方式都不一样，所以非常需要把它们区分出来。比如说对增值税发票，有可能你报了那个发票多会对公司有什么减税，别的人只是单纯的报销。 &nbsp; &nbsp; &nbsp; 最近，我们也提出了对模板进行分类。其实最简单的一个想法是，如果我们是按图片，它就是一个简单的图像分类。我们可以采用的方案是基于迁移学习的一个图像分类，所谓迁移学习就是在已有的分类任务上效果比较好的CNN的模型在别的分类任务上面也有不错的效果，大家都知道比如ImageNet比赛有很庞大的数据，如果在那上面运行的预训练模型的结果不错，那么用它提取出来的特征在别的分类上效果也不错。第二就是迁移学习能够极大地减少训练数据需求的量，还有训练时长。 &nbsp; &nbsp; &nbsp; 我们的分类除了基于图像，还有关注到它基本都是票据类的图像，它其实是包括文字的，所以我们也结合了文字的特征来进行一个分类。首先是把整张图过一遍CNN的模型，提取出它的图像的特征，然后还要结合它的OCR出来的文字，提取它的文字特征。最后把两种特征进行一个融合，然后再去训练最终的分类器。 可以给大家看一个例子。比如在这里有一个分类器管理，我们可以看到我现在已经有的三个分类器，点编辑进去看一看。我现在能分的就是车牌跟火车票，可以在这儿试一试。火车票，它就分类到我的火车票了，就像刚刚我定的那个模板一样，就把那些数据都给结构化出来。就是说刚刚在这个地方的时候，相当于是指定了某一个模板。但是在分类器的时候其实就不需要了，随便扔，随便把图扔进去，然后它就能自动地帮我们分类，并且做我们需要的结构化。基于分类的原理就是这样。 &nbsp; &nbsp; &nbsp; 最后给大家带来一个财税场景上的例子，就是木牛盒子这个产品，它首先通过批量的票据扫描，其实就是这种扫描仪，能够把图像比较清晰地扫描出来，然后使用我们刚刚自定义模板的票据分类，然后结构化的功能加各种票据进行分类出来，就做到了智能识别。然后再把它结构化出来，再生成凭证，进行输出。 以上就是今天我给大家分享的内容，谢谢大家。 关注AI科技大本营微信公众号，回复：OCR，获取本次公开课演讲PPT。公开课讲师申请，请联系微信1092722531 （本文为 AI科技大本营公开课速记，转载请微信联系 1092722531） ◆ CTA核心技术及应用峰会 ◆ 5月25-27日，由中国IT社区CSDN与数字经济人才发展中心联合主办的第一届CTA核心技术及应用峰会将在杭州国际博览中心隆重召开，峰会将围绕人工智能领域，邀请技术领航者，与开发者共同探讨机器学习和知识图谱的前沿研究及应用。 更多重磅嘉宾请识别海报二维码查看，目前会议早鸟票发售中（原票价1099元），点击阅读原文即刻抢购。添加小助手微信15101014297，备注“CTA”，了解票务以及会务详情。 推荐阅读 他25岁进贝尔实验室，32岁提信息论，40岁办达特茅斯会议，晚年患上阿兹海默 | 人物志 重磅！Facebook更新PyTorch 1.1，打算跨GPU分割神经网络 小样，加张图你就不认识我了？“补丁”模型骗你没商量！| 技术头条 东大漆桂林、清华李涓子、复旦肖仰华等大牛确认出席CTA峰会！5月一起打卡杭州 京东 60 天哗变！CTO 成优化第一人 | 畅言 异构计算=未来？一文带你秒懂3大主流异构 《互联网人叹气图鉴》 回报率29%! 大神用情感分析创建一个比特币交易算法, 原来交易玩的是心理战 她说：为啥程序员都特想要机械键盘？这答案我服！","@type":"BlogPosting","url":"https://mlh.app/2019/05/03/729853.html","headline":"基于模板的文字识别结果结构化处理技术 公开课速记","dateModified":"2019-05-03T00:00:00+08:00","datePublished":"2019-05-03T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/05/03/729853.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>基于模板的文字识别结果结构化处理技术 | 公开课速记</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">  
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="rich_media_content" id="js_content"> 
   <p style="text-align:center;margin-left:8px;"><img class="rich_pages" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAaEvfrVTwTOJmJOdd48GLj5h1RyAH4y6ib8lZENjZq9y9IjJGT5scoiaetlqgA8yoKrqr2yugAHs58w/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="margin-left:8px;line-height:1.5em;"><span style="font-size:15px;letter-spacing:1px;color:rgb(136,136,136);"></span><br></p>
   <p style="margin-left:8px;line-height:1.5em;"><span style="font-size:14px;color:rgb(136,136,136);letter-spacing:1px;">嘉宾 | 向宇波<br></span></p>
   <p style="line-height:1.5em;margin-left:8px;"><span style="letter-spacing:1px;color:rgb(136,136,136);font-size:14px;">编辑 | suiling</span></p>
   <p style="line-height:1.5em;margin-left:8px;"><span style="letter-spacing:1px;color:rgb(136,136,136);font-size:14px;">来源 | AI科技大本营在线公开课</span></p>
   <p style="line-height:1.5em;margin-left:8px;"><span style="color:rgb(136,136,136);font-size:14px;letter-spacing:1px;">出品 | AI科技大本营（ID：rgznai100）</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;">随着行业的发展和技术的成熟，文字识别（OCR）目前已经应用到了多个行业中，比如物流行业快递包裹的分拣，金融行业的支票单据识别输入，交通领域中的车牌识别，以及日常生活中的卡证、票据识别等等。OCR（文字识别）技术是目前常用的一种AI能力。但一般OCR的识别结果是一种按行输出的半结构化输出。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;">本次公开课我们邀请到了百度高级研发工程师向宇波老师，他将在12月20日（周四）带来一场主题为《基于模板的文字识别结果结构化处理技术》的分享。<strong>本课程从百度自定义模板文字识别展开，从理论到案例，详细介绍OCR结构化的相关技术，并理清OCR和结构化之间的关系和适用场景。</strong></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;"></span><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;">向宇波：大家好，我是来自百度AI技术生态部的研发工程师，我叫向宇波，今天给大家带来的分享是基于模板的文字识别结果结构化处理技术，我们主要讲的是文字处理结果的结构化。</span><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;color:rgb(63,63,63);"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQp7MWSTWFS7hicrXnGR62mpmYacH9DIkgC8nEuBaCr7CxAwoiacsq3ia2Q/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="line-height:2.5;margin-left:8px;"><br></p>
   <h1 class="ql-long-19033417"></h1>
   <p style="text-align:center;line-height:1.75em;"><strong><span style="font-size:18px;color:rgb(70,118,217);">文字识别行业现状</span></strong></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;color:rgb(63,63,63);">我们从一个财税案例的角度出发。大家在公司里肯定都做过报销，报销的时候我们都会有出租车票、定额发票等，我们需要将各种发票贴到纸上然后提交上去，由财务来做后面的事情。通常来说，他们其实做的都非常辛苦，要耗费大量的人力来进行人工录入。这样的话，不仅成本很高，而且耗时也很长，人工录入的话还有可能会出错。我们能不能够通过用文字识别的方式来解决这个问题呢？比如把这个流程变成这样，我们在中间加一层，不是人工录入，而是通过一个识别系统，首先我们把这些票据通过图像采集设备，例如高分辨率扫描、拍照这种方式转换成图像，然后通过文字识别技术把图像上的文字识别出来，再经过一个数据的结构化，最后输入到财务系统。这样能节约大量的人力物力，也能够提高效率及准确率。其关键部分是在识别之后做一个结构化处理。</span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQboqJrcDVKgSmLmZ626ncfk3SRiaO4Yd162UzLHWtAdHBcp5icGI5XzqA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">我们来看一下多模板的结构化识别。首先来说，我们从刚刚的例子也能看得到，哪怕是一个很简<span style="font-size:15px;letter-spacing:1px;color:rgb(63,63,63);"></span>单的报销过程，也涉及到很多种票据，例如火车票、定额发票等等。现实生活中这种票据非常多。所以，我们的结构化方案要能够支持多种模板。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQXa73VzKPD5VbjapFWNbtB2ktdeiahicAyGKyM7Nb8447qDOZZWxflayw/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">一般来讲，OCR识别出来的结果是单纯的一行一行文字，这样业务处理起来会比较困难，key value形式的结构会比较好处理。我们用一个例子来解释，比如我们识别一张火车票，这个火车票上面有一行文字是始发站，然后是车次、到达站。如果直接处理识别出来的那一行文字相对麻烦，因为需要去切分出各个字段。但是，如果我们的识别结果有结构，那处理起来就会容易很多。通过key value的形式检索，我就能够知道我的始发站（北京南），然后到达站（天津）、车次。所以结构化给业务处理带来了极大的便利。</span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQ76Zyt8GHrs5j8bGm7ZaibvibpsM0C3VLPyiaP0fW4EFNetIxquFgJH1Rg/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">接下来我们看一下文字识别分类。通常来说文字识别分为两个大类，一种是通用文字识别，另一种就是专用垂类识别。通用文字识别就像刚刚提到的，对一个图片来说，识别结果会以行的形式输出，同时会有比较准确的文字坐标，这种按行输出的结构可以称之为半结构化，它只能告诉你在这一行，在这一行，从上到下罗列，没有真正意义上的key value结构。</span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">专用垂类识别的结果有结构，比如说对于身份证，其实我们知道所有身份证都长的一样，我们能够知道身份证上这个地方是姓名，这个地方是性别，这个地方是民族，所以我们能够返回的时候就告诉你姓名是什么，性别是什么，生日是什么。常见的专用垂类还覆盖几类常见卡证，像身份证、银行卡、增值税发票这些。但是开发一个专用垂类识别，通常来说需要花比较多的人力物力，才能够达到一个比较高的准确度，所以它的开发周期和人力成本都比较高。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQcDKhtb0nnp5SsK9bvUqE82p9bL5lNlLpbCsibLvOXibQx8TAsUsxSyGA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">整个看来，业务处理需要不同板式的文字识别，并且希望能够结构化，但是如果把它们变成专用的垂类模板来，就会面临成本很高，周期很长的情况。</span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">基于这些矛盾，我们推出了一个基于模板的文字识别结果的结构化方案。给大家做一个例子来演示，比如用火车票。我有一个火车票的模板，就是就拿我自己的火车票举例，大家可以看到我的始发站、终点站都有了。然后我们可以再做一个模板，这次可以换一个增值税发票的。首先我们上传一张模板的底图，所有的增值税发票都长的差不多。然后我现在来选一些参照字段，选这个纳税人、开票日期、税率、开票人、小写、收款人、价税，这样就差不多了。比如说我想要识别这个，大写的金额，保存。就可以选择另外一张，这两张显然是不一样的。我们来看一下，应该是这张，可以看到这里写的是1000元整，这样的话我们也可以多框选一些别的字段，就可以像刚刚火车票一样，在这边，在页面上就可以测试出来我们想要的字段都能够给它结构化，按key value的形式找到。</span></p>
   <p><br></p>
   <h1 class="ql-long-19033417"></h1>
   <p style="text-align:center;line-height:1.75em;"><span style="color:rgb(70,118,217);"><strong><span style="font-size:18px;">基于模板的文字识别结构化流程</span></strong></span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">刚刚说的看起来操作很简单，但其实在它的背后我们做了一系列的操作。这个就是我们对整个文字识别结构化的流程，它经历了4个大的步骤（4大流程）。首先是</span><span style="letter-spacing:1px;"><strong><span style="font-size:15px;">图片摆正</span></strong></span>，<span style="font-size:15px;letter-spacing:1px;">然后是</span><span style="letter-spacing:1px;"><strong><span style="font-size:15px;">模板匹配</span></strong></span><span style="font-size:15px;letter-spacing:1px;">、</span><span style="letter-spacing:1px;"><strong><span style="font-size:15px;">多次摆正</span></strong></span><span style="font-size:15px;letter-spacing:1px;">，</span><span style="letter-spacing:1px;"><strong><span style="font-size:15px;">最后是结构化</span></strong></span><span style="font-size:15px;letter-spacing:1px;">。</span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQvkMMNXnX7xMZt4mEnC0QlZAWvw0iauoXJzxH7Hl0ZibiaGGybx9s98MhA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg">&nbsp; &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">对于图片的摆正来说，首先我们会进行一次文字识别，然后基于文字来寻找参照字段。我们通过参照字段来选择参照字段能够围成的最大面积的四边形，根据这个四边形来计算透视投影矩阵，并做一系列的图像变换，然后再计算所匹配的程度。如果足够匹配了，OK，那我们结构化；如果没有匹配，并且没有达到我们的匹配次数上限，我们是可以再来一次，尝试多次摆正，摆得更好一点。</span></p>
   <h2 class="ql-long-19033417"></h2>
   <p style="text-align:center;line-height:1.75em;"><span style="font-size:18px;color:rgb(70,118,217);"><strong><span style="font-size:18px;letter-spacing:1px;">基于深度学习的文字识别</span></strong></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQRd8JlMdbaj1WLjQyTBsMuFIPtcDWZU5bWupPkJvk2ADpicjYvbLyfPA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg">&nbsp; &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">我们来讲一讲基于深度学习的文字识别。首先大体上来说有两种方式，一种是单字检测加上单字识别，另一种是行检测加上行识别。单字检测就是把文字当做一般的物体检测任务，例如可以用faster-rcnn这个网络去做，每一个字都可以当做一个小物体。检测出来的单字再用<strong>单字识别</strong>处理，本质上是个<strong>多分类任务</strong>。<strong>行识别</strong>就不再是检测一个一个字，而是一个文本行。一般来说文本行的特征有：高度不是很高，但是可能一行字会比较长，它其实是类似于小竖条，然后横着摆过来一个很长条的。对通常的物体检测模型做改造，然后去检测，其中一个好的例子就是cptn。然后把一行文字导出来之后再来识别，就可以当做是一个<strong>序列标注</strong>的问题了。当然现在也有这种端到端的，是大家正在做的一些方向。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <h2 class="ql-long-19033417"></h2>
   <p style="text-align:center;line-height:1.75em;"><span style="font-size:18px;color:rgb(70,118,217);"><strong><span style="font-size:18px;letter-spacing:1px;">基于模板的图片摆正</span></strong></span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQ4ibAibbHAk6DVxVibp19YZXHFQpMmpP00oteAIu30vRXlcHQyDhCWlVgg/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg">&nbsp; &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">我们再回到刚刚的模板。模板可以认为是一个标准的底版定义的结构，比如这个定额发票，其实我们一开始就知道我们需要识别的部分在模板上的位置，在这个票据上，我就知道这个发票代码它其实就在这儿，发票号码在这儿，金额在这儿。如果每张图都长这样，其实就很简单。但实际上来识别的图都不像模板一样摆的那么正，识别的区域在图片上的位置不是固定的，比如有可能我上传的图是这样，如果按照固定位置扣取，很可能什么都扣不到。所以我们需要有一种方案，也就是刚刚说的摆正那套流程，希望把所有待识别图都摆的跟模板一样正。我们选用的是透视投影方法来做图片的摆正，尽可能的把待识别的图跟模板图对齐，这样比较方便后面提取字。</span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQFoZBnN4QicibaMzYQCQjTDYA7guMPibjbdT9M2SaibQzRichVDHc1ZmEgbA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">透视投影变换的时候，需要4组从待识别图到模板图对应的点对。也就是说像这样，比如这个发票的票字它在这儿，但是识别图上在这儿，模板上在这儿，这边一个发票号码，然后各种类似这样的对应起来的点对。通过这4组点对可以计算一个透视投影矩阵，做透视投影变换。我们通过框选模板上固定字段来做参照字段，进而通过文字匹配方式寻找对应点对。通常一个票据它的板式固定，那么它就符合我们刚刚说的那种条件，是对应的点对。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQlfOsvE4ctFWkOapmcGR934NULyE2YL7o4kNFficuhFZLGLwQbk5TXUQ/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">如果参照字段有多个，这个时候可能就会遇到一个问题了。比如说对于这个票据来说，它虽然很简单，在上面可以提取的字也只有1、2、3、4、5，比如说我只提取了5个字段作为参照字段，但是计算索引的时候只需要4个点，此时需要取舍。比如这儿虽然只有5个字段，但实际组成的点对个数其实是比较多的，比如这个蓝线的可以算一个，这个红线这一圈也可以算一个。我们经过一些实验，当然从主观上看也能够想到，参照字段越分散它摆正的效果越好。可以这么理解，越分散的时候每一个点它能够管辖的区域就越存在这个票面的四周，那么它摆的时候，相当于说你从一个更高的维度或者一个更大的范围去摆，那么摆完的效果肯定比在一个小范围内去拉动其他地方来摆的误差小。</span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">然后怎么样来衡量这个分散的程度？我们选用面积作为衡量四边形分散程度的指标。我们选面积的一个原因是好计算，四边形可以当做是两个三角形，只要有坐标，那么两个三角形的面积很好计算。另一个，其实说分散是很难衡量的，如果转化成面积的话其实面积就是一个数，比较好度量比较。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <h2 class="ql-long-19033417"></h2>
   <p style="text-align:center;line-height:1.75em;"><span style="font-size:18px;color:rgb(70,118,217);"><strong><span style="font-size:18px;letter-spacing:1px;">模板匹配</span></strong></span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQ9LBgB5bKgiaLlbmej0vxa6JdW5wQ7qDQnto3r31tWGrbjUdPvJ2y0sw/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">我们把待识别图做了透视投影之后，接下来要计算它和模板匹配的程度。因为有的时候，比如说这个时候识别的文字并不是太好，我摆了一下，然后这个时候我发现我可以识别的字更多了，而且第一次摆的时候我能识别得更多，但是发现这个时候摆的还不够，那我怎么能知道它摆得不够好？就需要来计算和模板的匹配程度。我们在这个地方选择的是用新的透视投影矩阵来计算摆正的程度。用新的透视投影矩阵计算摆正图片四顶点和模板，四顶点的距离来判断匹配程度。比如刚刚我们摆正之后，这个图的四个顶点和模板底图的四个顶点，有三个点都是比较近的，然后这个点相对来说远一点，就可以通过这种距离的方式来判断它的匹配程度。如果这个点通过摆正之后，计算出来它到了这个位置，那么距离的差其实就很小了，就可以认为它已经摆的非常好了，所以我们选择的是用这种策略来判断它匹配的程度。当然如果摆得很歪，这儿离得也很远，整个是这样一个倾斜的角度，如果和模板原图的四个点其实距离比较远，是能够判断出去这个时候匹配得不够好，可能还要再去做一次。</span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQZY6Z1gicca1qBPwBpjfUmxDqkLHohg5cKOnPvOsXPHGEhERcBGmSt5g/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">刚刚说到了多次摆正，也就是说我可能会计算多个透视投影矩阵。这个时候我们用到了一种技巧，就是透视投影矩阵的一个栈来操作。如果对级联透视矩阵有了解的同学就知道，我们通常来说透视投影的乘法是倒着乘的。比如这里的一个公式，M1代表的是透视投影之后的一个结果，M_origin表示是原图的矩阵，然后乘透视投影矩阵。如果它只有一次摆正的时候，只有一个透视投影矩阵，这个时候它就等价于那个结果就是用原图乘以这个透视投影矩阵。但有可能中间我们在处理的时候发现没有摆正，可能这个时候就会计算出很多个透视投影矩阵，我们就会把它们都重复地往透视投影矩阵的栈里面压入。这个时候，我们乘以透视投影矩阵栈就等价于原图逆序乘以矩阵栈中每个元素。</span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">为什么一定要费劲来用这个透视投影矩阵栈？我倒着乘它，从origin倒着乘M2，再乘M1，和乘M2、M1，它俩的解读要加一个括号，其实是一样的，从矩阵上是这样。但是因为我们其实还是对图片做透视投影，如果单纯的类似括号的方式处理的话，它先乘以M2，它可能会把这个角扭到这儿，这个角往里收，可能会有一些图超出了图片原本的大小。那么在最后的一步处理的时候会进行一个裁剪，如果它有超出的部分，那么这个部分其实就已经被抛弃了。即使我后面希望再把它扭回来，其实那部分的信息已经永远丢失。所以我们在这个时候有一个透视投影矩阵栈，虽然它是逆着出来的，但其实计算的时候是先把这个矩阵栈里边做了一个相当于加括号的优先计算，以保留原图的全部信息。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><strong style="color:rgb(70,118,217);font-size:18px;text-align:center;"><span style="letter-spacing:1px;"><br></span></strong></p>
   <p style="line-height:1.75em;text-align:center;"><strong style="color:rgb(70,118,217);font-size:18px;text-align:center;"><span style="letter-spacing:1px;">多类型结构化</span></strong></p>
   <p style="margin-left:8px;line-height:1.75em;"><strong style="color:rgb(70,118,217);font-size:18px;text-align:center;"><span style="letter-spacing:1px;"><br></span></strong></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">我们经过一系列的摆正操作之后，图片就跟模板比较接近了，可以对它进行一个识别结果的结构化处理。从刚刚我们的演示操作能看得到，我们的处理通常来说是有一个固定的识别区，就像刚刚火车票的这种始发站、车次号、终点站，我们识别出来是每个字有个小方框。我们对于这种固定识别区来说操作相对比较简单，可以根据单字矩形框的待识别区矩形框的交并比来判断是否属于某个字段。就像这样，比如说我们框的北京框是这儿，对于北京南这三个字完全处在起点站这个待识别区的内部。OK，那就可以确定它俩肯定是起点站这个识别区的内容。对于站这个字，虽然它也沾了一点，但是这个字的矩形框和整个待识别区矩形框的交并比并不多，所以我们就把它抛弃掉。对于车次来说，我们正好把这个全部框住，所以它们都是。对天津两个字跟北京南的情况类似。对于这种简单的情况可能就结束了。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQTrOnrWmE1FvLTnfeBJgvAibe1dPTBKHhqSpKzMw4iaqVPEQjiaDlFe0CQ/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg">&nbsp; &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">对于更复杂的，比如说成段落的，比如说我框了整个这一片的时候，我们就需要做纵横双向排序来自动处理跨行文字的拼接。什么意思？比如这两行，我会先对文字做一个上下的排序，所以第一行的字肯定拿出来会在第二行的前面，所以需要先对纵向每一个字做比较，然后把它们先分成上下两行。然后再看那两行之后，按照左右来排序，这样排完之后出来的结果才是顺序的从左到右，第一行然后第二行这样的关系。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQvYpJIEzEibW4YT73cq0k0aepVzTLNjnEoXicnRO5NYyIlyQhhX74wsew/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">还有一种表格识别区。比如这个地方，这个识别区就是某一种体检的结果，可以很明显地看到它是一种表格，而且它没有线，它既没有横线，也没有竖线。我们需要把整个表格的结构从文字重新构建出来，我们在这个地方采用的是一种自底向上的表格构建方式，用先列后行的方式来减少非刚性形变的影响。比如说我们识别完了之后，现有单字的位置（比如前白蛋白4个字）的坐标，我们先从单字的坐标开始来构建组成一个字段关系。比如我们现在有4个字，我们根据位置关系把它组合成一个字段，这样的话我们就知道它们是一个整体，不可拆分。通常来说表格的这种一个单格的内容确实是不可拆分的。然后我们根据它的横向的位置关系来串成列，其实就有点像串冰糖葫芦一样。比如这个，我们知道其实所有的字段它的横向位置都在这个区域，我们就可以把它们都这样串起来，像串糖葫芦一样，串成一列。另外的两列也可以做类似的操作，但最后读的时候是一行一行读，比如糖、5.04。按列之后，再每次取列的头部字段，来根据高度信息组装成行。比如在这儿就是糖，这一列取第一个就是糖，第二列取第一个就是5.04，第三个就是取这个。</span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">这种方式能够一定程度上地减少对于非刚性形变的影响。比如说什么叫刚性形变，什么叫非刚性形变？比如像现在是个平铺的，就是一个很薄的很平整的一个面片，把它做仿射变换，都是刚性的，但如果是弯曲这种，扭过来，折痕这种，其实就称为非刚性形变。那么它们的相对位置可能会有一些波纹型的变化，这种会比较难以处理。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQhoaMIazn7G0OUibMgrrakzKJgfiaffWEzuNu4PDeXQ49qhhEsFv1wibRw/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">我们现在就把结构化的两个方式讲完了，总结一下，还是对应到刚刚的4个大的流程，一个是<strong>图片摆正</strong>，一个是<strong>模板匹配</strong>，计算和模板匹配的程度，如果匹配的还不错，匹配上了，OK，那我们就进行<strong>结构化</strong>，去提取我们事先定义好的待识别区和表格识别区。但如果很不幸我们摆的还不够正，那可能就会需要去做<strong>多次摆正</strong>这样一个操作，力求把它跟模板匹配得比较好，最后再做结构化。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><strong style="color:rgb(70,118,217);font-size:18px;text-align:center;"><span style="letter-spacing:1px;"><br></span></strong></p>
   <p style="line-height:1.75em;text-align:center;"><strong style="color:rgb(70,118,217);font-size:18px;text-align:center;"><span style="letter-spacing:1px;">迁移学习与图像分类</span></strong></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;">下面给大家介绍一下我们这个产品的分类器。为什么需要分类？其实根据第一个财税的例子来看，可能我们会报很多种票据，比如说出租车票、增值税发票。一般来说我们传的时候，是一张一张传，但汇聚到财务的时候，那就是一堆了，财务其实对不同的票据处理方式都不一样，所以非常需要把它们区分出来。比如说对增值税发票，有可能你报了那个发票多会对公司有什么减税，别的人只是单纯的报销。</span></p>
   <p style="line-height:2.5;"><br></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQFuiaQbUyRibicoWV1oVG8tSV8IpS9ZSV0R9y1xNicnyL0odAOwIto1ytDg/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">最近，我们也提出了对模板进行分类。其实最简单的一个想法是，如果我们是按图片，它就是一个简单的图像分类。我们可以采用的方案是基于迁移学习的一个图像分类，所谓迁移学习就是在已有的分类任务上效果比较好的CNN的模型在别的分类任务上面也有不错的效果，大家都知道比如ImageNet比赛有很庞大的数据，如果在那上面运行的预训练模型的结果不错，那么用它提取出来的特征在别的分类上效果也不错。第二就是迁移学习能够极大地减少训练数据需求的量，还有训练时长。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQ7c7ibIRusFLo5Dmar5AsPicD1FvtFsicmHnkO42o6m8fMTL3CTosqjINA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; &nbsp; &nbsp;</p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">我们的分类除了基于图像，还有关注到它基本都是票据类的图像，它其实是包括文字的，所以我们也结合了文字的特征来进行一个分类。首先是把整张图过一遍CNN的模型，提取出它的图像的特征，然后还要结合它的OCR出来的文字，提取它的文字特征。最后把两种特征进行一个融合，然后再去训练最终的分类器。</span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">可以给大家看一个例子。比如在这里有一个分类器管理，我们可以看到我现在已经有的三个分类器，点编辑进去看一看。我现在能分的就是车牌跟火车票，可以在这儿试一试。火车票，它就分类到我的火车票了，就像刚刚我定的那个模板一样，就把那些数据都给结构化出来。就是说刚刚在这个地方的时候，相当于是指定了某一个模板。但是在分类器的时候其实就不需要了，随便扔，随便把图扔进去，然后它就能自动地帮我们分类，并且做我们需要的结构化。基于分类的原理就是这样。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;"><br></span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><img width="1200" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAYLwvrFPsKibEC1d4loO59oQ0zQVBfMop7dEeYLkKA1vIl4pyOFRIbL0GHLMwvzBY2qoL9lFxqXtTA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"> &nbsp; <span style="font-size:15px;letter-spacing:1px;">&nbsp; &nbsp;</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">最后给大家带来一个财税场景上的例子，就是木牛盒子这个产品，它首先通过批量的票据扫描，其实就是这种扫描仪，能够把图像比较清晰地扫描出来，然后使用我们刚刚自定义模板的票据分类，然后结构化的功能加各种票据进行分类出来，就做到了智能识别。然后再把它结构化出来，再生成凭证，进行输出。</span></p>
   <p><br></p>
   <p style="margin-left:8px;line-height:1.75em;"><span style="font-size:15px;letter-spacing:1px;">以上就是今天我给大家分享的内容，谢谢大家。</span></p>
   <p style="margin-left:8px;line-height:1.75em;"><br></p>
   <p style="border-width:2.1px;border-style:dashed;border-color:rgb(244,233,233);font-size:16px;line-height:1.75em;"><span style="letter-spacing:2px;font-size:15px;color:rgb(63,63,63);">关注AI科技大本营微信公众号，回复：</span><span style="font-size:15px;"><strong><span style="letter-spacing:2px;color:rgb(255,76,0);">OCR</span></strong></span><span style="letter-spacing:2px;font-size:15px;color:rgb(63,63,63);">，获取本次公开课演讲PPT。公开课讲师申请，请联系微信</span><span style="font-size:15px;"><strong><span style="letter-spacing:2px;color:rgb(255,76,0);">1092722531</span></strong></span></p>
   <p style="margin-left:8px;"><span style="color:rgb(136,136,136);font-size:14px;font-style:italic;letter-spacing:1px;text-align:left;"><br></span></p>
   <p style="margin-left:8px;"><span style="color:rgb(136,136,136);font-size:14px;font-style:italic;letter-spacing:1px;text-align:left;">（本文为 AI科技大本营公开课速记，转载请微信联系 1092722531）</span></p>
   <p style="margin-left:8px;line-height:1.75em;text-align:center;"><br></p>
   <p style="min-height:1em;">◆</p>
   <p style="min-height:1em;"><span style="color:rgb(255,76,0);letter-spacing:1px;"><strong><span><strong style="letter-spacing:.544px;">CTA核心技术及应用峰会</strong></span></strong></span></p>
   <p style="min-height:1em;">◆</p>
   <p><span style="color:rgb(63,63,63);font-size:15px;letter-spacing:1px;">5月25-27日，由中国IT社区CSDN与数字经济人才发展中心联合主办的第一届CTA核心技术及应用峰会将在杭州国际博览中心隆重召开，峰会将围绕人工智能领域，邀请技术领航者，与开发者共同探讨机器学习和知识图谱的前沿研究及应用。</span><br></p>
   <p><br></p>
   <p><span style="letter-spacing:1px;font-size:15px;color:rgb(63,63,63);">更多重磅嘉宾请识别海报二维码查看，</span><span style="letter-spacing:1px;font-size:15px;color:rgb(63,63,63);">目前会议早鸟票发售中（原票价1099元），</span><strong style="letter-spacing:.544px;"><span style="color:rgb(255,76,0);letter-spacing:1px;font-size:15px;">点击阅读原文即刻抢购</span></strong><span style="letter-spacing:1px;font-size:15px;color:rgb(63,63,63);">。添加小助手微信</span><span style="letter-spacing:1px;font-size:15px;color:rgb(255,76,0);"><strong>15101014297</strong></span><span style="letter-spacing:1px;font-size:15px;color:rgb(63,63,63);">，备注“</span><strong style="letter-spacing:.544px;"><span style="letter-spacing:1px;font-size:15px;color:rgb(255,76,0);">CTA</span></strong><span style="letter-spacing:1px;font-size:15px;color:rgb(63,63,63);">”，了解票务以及会务详情。</span></p>
   <p><br></p>
   <p style="text-align:center;margin-left:8px;"><img class="rich_pages" style="width:540px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/BnSNEaficFAaEvfrVTwTOJmJOdd48GLj5vdEsysxDn5IbBMxPae10gfYod2Px8DcIZZEOTiaK2vib6T4fZko637ibw/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="margin-left:8px;min-height:1em;letter-spacing:.544px;line-height:27.2px;text-align:left;"><strong style="text-align:justify;"><span style="font-size:15px;">推荐阅读</span></strong></p>
   <ul class="list-paddingleft-2">
    <li><h2><a href="https://blog.csdn.net/dQCFKyQDXYm3F8rB0/article/details/89715015" rel="nofollow">他25岁进贝尔实验室，32岁提信息论，40岁办达特茅斯会议，晚年患上阿兹海默 | 人物志</a></h2></li>
    <li><h2 class="rich_media_title"><a href="https://blog.csdn.net/dQCFKyQDXYm3F8rB0/article/details/89764051" rel="nofollow">重磅！Facebook更新PyTorch 1.1，打算跨GPU分割神经网络</a></h2></li>
    <li><h2 class="rich_media_title"><a href="https://blog.csdn.net/dQCFKyQDXYm3F8rB0/article/details/89667051" rel="nofollow">小样，加张图你就不认识我了？“补丁”模型骗你没商量！| 技术头条</a></h2></li>
    <li><p><a href="https://mp.weixin.qq.com/s?__biz=MzU5MjEwMTE2OQ==&amp;mid=2247485808&amp;idx=1&amp;sn=214ad17daba746cf6ac22da2f8787633&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;font-size:14px;">东大漆桂林、清华李涓子、复旦肖仰华等大牛确认出席CTA峰会！5月一起打卡杭州</a></p></li>
    <li><p><a href="https://mp.weixin.qq.com/s?__biz=MjM5MjAwODM4MA==&amp;mid=2650719196&amp;idx=1&amp;sn=08ddf7ad2a591aa70ab21940ad7ed46f&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;font-size:14px;">京东 60 天哗变！CTO 成优化第一人 | 畅言</a></p></li>
    <li><p style="min-height:1em;"><a href="https://blog.csdn.net/FL63Zv9Zou86950w/article/details/89667030" rel="nofollow">异构计算=未来？一文带你秒懂3大主流异构</a></p></li>
    <li><p style="min-height:1em;"><a href="https://blog.csdn.net/csdnsevenn/article/details/89666825" rel="nofollow">《互联网人叹气图鉴》</a></p></li>
    <li><p style="min-height:1em;"><a href="https://blog.csdn.net/Blockchain_lemon/article/details/89629591" rel="nofollow">回报率29%! 大神用情感分析创建一个比特币交易算法, 原来交易玩的是心理战</a></p></li>
    <li><p style="min-height:1em;"><a href="https://mp.weixin.qq.com/s?__biz=MzA5MjcxNjc2Ng==&amp;mid=2650559816&amp;idx=1&amp;sn=380cfd3d18fb987c0073bf1b8289155a&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;font-size:14px;">她说：</a><a href="https://mp.weixin.qq.com/s?__biz=MzA5MjcxNjc2Ng==&amp;mid=2650559816&amp;idx=1&amp;sn=380cfd3d18fb987c0073bf1b8289155a&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;font-size:14px;">为啥程序员都特想要机械键盘？</a><a href="https://mp.weixin.qq.com/s?__biz=MzA5MjcxNjc2Ng==&amp;mid=2650559816&amp;idx=1&amp;sn=380cfd3d18fb987c0073bf1b8289155a&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;font-size:14px;">这答案我服！</a></p></li>
   </ul>
   <p style="min-height:1em;letter-spacing:.544px;text-align:right;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/BnSNEaficFAaBKZcUCzAia226XxjflVWcEefX4n29GVz3bwHiaeKYTz99IUdicIUic28RH1uMCQicuBRxgUhgsmqLP3A/640?wx_fmt=png" alt="640?wx_fmt=png"></p> 
  </div> 
 </div> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
