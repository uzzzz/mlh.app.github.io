<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Python基础入门　(五数据可视化库Matplotlib应用） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Python基础入门　(五数据可视化库Matplotlib应用）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1.Matplotlib基本介绍 2.基础用法 3.一些设置属性 4.图中图 5.动画 &nbsp; 1.Matplotlib基本介绍 Matplotlib是一个非常强大的画图工具，对数据的可视化起着很大的作用。Maplotlib可以画图线图，散点图，等高线图，条形图，柱形图，3D图形，图形动画等。 pip3 install matplotlib #python3中使用这条语句进行安装，在命令行中输入，敲入回车即可 #Matplotlib导入 import matplotlib.pyplot as plt import numpy as np import pandas as pd 2.基础用法 x=np.linspace(-1,1,50) #定义x y1=2*x+1 #定义y数据范围 y2=x**2 plt.figure() #定义图像窗口 plt.plot(x,y1) #画出曲线 plt.plot(x,y2) plt.show() #显示图像 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) # plt.plot(x,y2) plt.show() &nbsp; 3.一些设置属性 3.1 设置坐标轴 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) plt.show() plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) plt.show() #设置边框属性 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) ax=plt.gca() #get current axis ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) #边框属性设置为None 不显示 ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) plt.show() #调整移动坐标轴 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) ax=plt.gca() #get current axis ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) #边框属性设置为None 不显示 ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) #设置x坐标刻度数字或名称的位置，所有属性为：top,bottom,both,default,none ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) # 设置.spines边框x轴，设置.set_position设置边框的位置，y=0位置；位置所有属性有outward,axes,data ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #坐标中心点在（0,0）位置 plt.show() 3.2 设置图例 x=np.linspace(-3,3,50) y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) plt.xlim(-1,2) plt.ylim(-2,3) new_ticks=np.linspace(-1,2,5) plt.xticks(new_ticks) plt.yticks([-2,-1,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) l1,=plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;,label=&#39;linear line&#39;) l2,=plt.plot(x,y2,label=&#39;square line&#39;) plt.legend(loc=&#39;best&#39;) #显示在最好的位置,自动分配 plt.show() #显示图 x=np.linspace(-3,3,50) y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) plt.xlim(-1,2) plt.ylim(-2,3) new_ticks=np.linspace(-1,2,5) plt.xticks(new_ticks) plt.yticks([-2,-1,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) l1,=plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;,label=&#39;linear line&#39;) l2,=plt.plot(x,y2,label=&#39;square line&#39;) #单独修改label的信息 plt.legend(loc=&#39;best&#39;,handles=[l1,l2],labels=[&#39;up&#39;,&#39;down&#39;]) #显示在最好的位置,自动分配 plt.show() #显示图 loc中的参数： best upper right upper left lower left lower right right center right lower center upper center center 3.3 Annotation标注 x=np.linspace(-3,3,50) y=2*x+1 plt.figure(num=1,figsize=(8,5)) plt.plot(x,y) #移动坐标轴 ax=plt.gca() ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #标注信息 x0=1 y0=2*x0+1 plt.scatter(x0,y0,color=&#39;b&#39;) plt.plot([x0,x0],[y0,0],&#39;k--&#39;,lw=2.5) #连接两个点，k表示黑色，lw=line weight 线粗细 plt.annotate(r&#39;$2x0+1=%s$&#39; % y0,xy=(x0,y0),xycoords=&#39;data&#39;,xytext=(+30,-30),textcoords=&#39;offset points&#39;,fontsize=16, arrowprops=dict(arrowstyle=&#39;-&gt;&#39;,connectionstyle=&#39;arc3,rad=.2&#39;)) #xycoords=&#39;data&#39; 基于数据的值来选位置，xytext=(+30,-30),对于标注位置的描述，textcoords=&#39;offset points&#39;，xy偏差值，arrowprops对图中箭头类型设置 plt.text(-3.7,3,r&#39;$This\ is\ the\ some\ text. \mu\ \sigma_i\ \alpha_t$&#39;,fontdict={&#39;size&#39;:16,&#39;color&#39;:&#39;r&#39;}) plt.show() &nbsp; 3.4 Tick能见度 x=np.linspace(-3,3,50) y=0.1*x plt.figure() plt.plot(x,y,linewidth=10,zorder=1) plt.ylim(-2,2) #移动坐标轴 ax=plt.gca() ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #label.set_fontsize(12) 重新调整字体的大小，bbox设置目的内容透明度相关系数，facecolor调节box景色 #edgecolor设置边框 ,alpha设置透明度，zorder设置图层顺序 for label in ax.get_xticklabels()+ax.get_yticklabels(): label.set_fontsize(12) label.set_bbox(dict(facecolor=&#39;red&#39;,edgecolor=&#39;None&#39;,alpha=0.7,zorder=2)) plt.show() 3.5 不同图形 3.5.1 Scatter散点图 n=1024 X=np.random.normal(0,1,n) Y=np.random.normal(0,1,n) T=np.arctan2(Y,X) #arctan2返回给定的X和Y值的反正切值 #scatter画散点图，size=75,颜色为T,透明度为50%，利用xticks函数来隐藏x坐标轴 plt.scatter(X,Y,s=75,c=T,alpha=0.5) plt.xlim(-1.5,1.5) plt.xticks(()) #忽略xticks plt.ylim(-1.5,1.5) plt.yticks(()) #忽略yticks plt.show() 3.5.2 Bar条形图 n=12 X=np.arange(n) Y1=(1-X/float(n))*np.random.uniform(0.5,1,n) Y2=(1-X/float(n))*np.random.uniform(0.5,1,n) plt.bar(X,+Y1,facecolor=&#39;#9999ff&#39;,edgecolor=&#39;white&#39;) plt.bar(X,-Y2,facecolor=&#39;#ff9999&#39;,edgecolor=&#39;white&#39;) #标记值 for x,y in zip(X,Y1): #zip表示可以传递两个值 plt.text(x+0.4,y+0.5,&#39;%.2f&#39;%y,ha=&#39;center&#39;,va=&#39;bottom&#39;) #ha表示横向对齐，bottom表示向下对齐 for x,y in zip(X,Y2): plt.text(x+0.4,-y-0.05,&#39;%.2f&#39;%y,ha=&#39;center&#39;,va=&#39;top&#39;) plt.xlim(-0.5,n) plt.xticks(()) plt.ylim(-1.25,1.25) plt.yticks(()) plt.show() 3.5.3 Contours等高线图 n=256 x=np.linspace(-3,3,n) y=np.linspace(-3,3,n) X,Y=np.meshgrid(x,y) #从坐标向量返回坐标矩阵 #函数用来计算高度值，利用contour函数把颜色加进去，位置参数依次为x,y,f(x,y)，透明度为0.75，并将f(x,y)的值对应到camp之中 def f(x,y): return (1-x/2+x**5+y**3)*np.exp(-x**2-y**2) plt.contourf(X,Y,f(X,Y),8,alpha=0.75,cmap=plt.cm.hot) #8表示等高线分成多少份，alpha表示透明度，cmap表示color map C=plt.contour(X,Y,f(X,Y),8,colors=&#39;black&#39;,linewidth=0.5) plt.clabel(C,inline=True,fontsize=10) plt.xticks(()) #隐藏坐标轴 plt.yticks(()) plt.show() 3.6 Image图片 import matplotlib.pyplot as plt import numpy as np a = np.array([0.313660827978, 0.365348418405, 0.423733120134, 0.365348418405, 0.439599930621, 0.525083754405, 0.423733120134, 0.525083754405, 0.651536351379]).reshape(3,3) plt.imshow(a, interpolation=&#39;nearest&#39;, cmap=&#39;bone&#39;, origin=&#39;lower&#39;) plt.show() #利用matplotlib打印出图像 a=np.array([0.313660827978,0.365348418405,0.423733120134, 0.365348418405,0.439599930621,0.525083754405, 0.423733120134,0.525083754405,0.651536351379]).reshape(3,3) plt.imshow(a,interpolation=&#39;nearest&#39;,cmap=&#39;bone&#39;,origin=&#39;lower&#39;) #origin=&#39;lower&#39;代表就是选择原点位置 plt.colorbar(shrink=.92) #shrink参数是将图片长度变为原来的92% plt.xticks(()) plt.yticks(()) plt.show() &nbsp; 3.7 3D数据 import numpy as np import matplotlib.pyplot as plt from mpl_toolkits.mplot3d import Axes3D #需要导入模块Axes3D fig=plt.figure() #定义图像窗口 ax=Axes3D(fig) #在窗口上添加3D坐标轴 #将x和y值编织成栅格 X=np.arange(-4,4,0.25) Y=np.arange(-4,4,0.25) X,Y=np.meshgrid(X,Y) R=np.sqrt(X**2+Y**2) Z=np.sin(R) #高度值 #将colormap ranbow填充颜色，之后将三维图像投影到XY平面做等高线图，其中rstride和cstride表示row和column的宽度 ax.plot_surface(X,Y,Z,rstride=1,cstride=1,cmap=plt.get_cmap(&#39;rainbow&#39;)) #rstride表示图像中分割线的跨图 #添加XY平面等高线 投影到Z平面 ax.contourf(X,Y,Z,zdir=&#39;z&#39;,offset=-2,cmap=plt.get_cmap(&#39;rainbow&#39;)) #把图像进行投影的图形 offset表示比0坐标轴低两个位置 ax.set_zlim(-2,2) plt.show() 3.8 subplot 3.8.1 多合一显示 均匀图中图：MatPlotLib可以组合许多的小图在大图中显示，使用的方法叫做subplot. plt.figure() plt.subplot(2,2,1) #表示将整个图像分割成2行2列，当前位置为1 plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2] plt.subplot(2,2,2) plt.plot([0,1],[0,2]) plt.subplot(2,2,3) plt.plot([0,1],[0,3]) plt.subplot(2,2,4) plt.plot([0,1],[0,4]) plt.show() 不均匀图中图 plt.figure() plt.subplot(2,1,1) #表示将整个图像分割成2行1列，当前位置为1 plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2] plt.subplot(2,3,4) plt.plot([0,1],[0,2]) plt.subplot(2,3,5) plt.plot([0,1],[0,3]) plt.subplot(2,3,6) plt.plot([0,1],[0,4]) plt.show() 3.8.2 分格显示 #方法一 import matplotlib.gridspec as gridspec #引入新模块 plt.figure() #使用plt.subplot2grid创建一个小图，（3,3）表示将整个图像分割成三行三列，（0,0）表示从第0行0列开始作图， #colspan=3表示列的跨度为3.colspan和rowspan缺省时默认跨度为1 ax1=plt.subplot2grid((3,3),(0,0),colspan=3) ax1.plot([1,2],[1,2]) ax1.set_title(&#39;ax1_title&#39;) #设置图的标题 #将图像分割成3行3列，从第1行0列开始作图，列的跨度为2 ax2=plt.subplot2grid((3,3),(1,0),colspan=2) #将图像分割成3行3列，从第1行2列开始作图，行的跨度为2 ax3=plt.subplot2grid((3,3),(1,2),rowspan=2) #将图像分割成3行3列，从第2行0列开始作图，行与列的跨度默认为1 ax4=plt.subplot2grid((3,3),(2,0)) ax4.scatter([1,2],[2,2]) ax4.set_xlabel(&#39;ax4_x&#39;) ax4.set_ylabel(&#39;ax4_y&#39;) ax5=plt.subplot2grid((3,3),(2,1)) plt.show() #方法二 plt.figure() gs=gridspec.GridSpec(3,3) #将图像分割成三行三列 ax6=plt.subplot(gs[0,:]) #gs[0:1]表示图占第0行和所有列 ax7=plt.subplot(gs[1,:2]) #gs[1,:2]表示图占第1行和前两列 ax8=plt.subplot(gs[1:,2]) #gs[1,:]表示图占后两行的最后一列 ax9=plt.subplot(gs[-1,0]) ax10=plt.subplot(gs[-1,-2]) #gs[-1,-2]表示这个图占倒数第一行和倒数第2列 plt.show() #方法三 #建立一个2行2列的图像窗口，sharex=True表示共享x轴坐标，sharey=True表示共享y轴坐标， #((ax11,ax12),(ax13,ax14))表示从左到右一次存放ax11,ax12,ax13,ax14 f,((ax11,ax12),(ax13,ax14))=plt.subplots(2,2,sharex=True,sharey=True) ax11.scatter([1,2],[1,2]) #坐标范围x为[1,2],y为[1,2] plt.tight_layout() #表示紧凑显示图像 plt.show() &nbsp; 3.9 次坐标轴 x=np.arange(0,10,0.1) y1=0.5*x**2 y2=-1*y1 fig,ax1=plt.subplots() ax2=ax1.twinx() #镜像显示 ax1.plot(x,y1,&#39;g-&#39;) ax2.plot(x,y2,&#39;b-&#39;) ax1.set_xlabel(&#39;x data&#39;) ax1.set_ylabel(&#39;Y1 data&#39;,color=&#39;g&#39;) #第一个y坐标轴 ax2.set_ylabel(&#39;Y2 data&#39;,color=&#39;b&#39;) #第二个y坐标轴 plt.show() &nbsp; 4.图中图 fig=plt.figure() #创建数据 x=[1,2,3,4,5,6,7] y=[1,3,4,2,5,8,6] #绘制大图：假设大图的大小为10，那么大图被包含在由（1,1）开始，宽8高8的坐标系之中 left,bottom,width,height=0.1,0.1,0.8,0.8 ax1=fig.add_axes([left,bottom,width,height]) #main axes ax1.plot(x,y,&#39;r&#39;) #绘制大图，颜色为red ax1.set_xlabel(&#39;x&#39;) #横坐标名称为x ax1.set_ylabel(&#39;y&#39;) ax1.set_title(&#39;title&#39;) #图名称为title #绘制小图，注意坐标系位置和大小的改变 ax2=fig.add_axes([0.2,0.6,0.25,0.25]) ax2.plot(y,x,&#39;b&#39;) #颜色为bule ax2.set_xlabel(&#39;x&#39;) ax2.set_title(&#39;title inside 1&#39;) #绘制第二个小图 plt.axes([0.6,0.2,0.25,0.25]) plt.plot(y[::-1],x,&#39;g&#39;) #将y进行逆序 plt.xlabel(&#39;x&#39;) plt.ylabel(&#39;y&#39;) plt.title(&#39;title inside 2&#39;) plt.show() &nbsp; 5.动画 %matplotlib notebook #在jupyter 中显示动画 from matplotlib.animation import FuncAnimation #引入新模块 fig,ax=plt.subplots() x=np.arange(0,2*np.pi,0.01) #数据为0~2PI范围内的正弦曲线 line,=ax.plot(x,np.sin(x)) #line表示列表 #构造自定义动画函数animate,用来更新每一帧上x和y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x+i/100)) return line, #构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, #frame表示动画长度，一次循环所包含的帧数；interval表示更新频率 #blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False ani=FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=10,blit=False) plt.show() %matplotlib notebook from matplotlib import animation#引入新模块 fig,ax=plt.subplots() x=np.arange(0,2*np.pi,0.01)#数据为0~2PI范围内的正弦曲线 line,=ax.plot(x,np.sin(x))# line表示列表 #构造自定义动画函数animate，用来更新每一帧上x和y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x+i/100)) return line, #构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, # frame表示动画长度，一次循环所包含的帧数；interval表示更新频率 # blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False。 ani=animation.FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=20,blit=False) plt.show() from matplotlib import pyplot as plt from matplotlib import animation import numpy as np fig, ax = plt.subplots() #我们的数据是一个0~2π内的正弦曲线 x = np.arange(0, 2*np.pi, 0.01) line, = ax.plot(x, np.sin(x)) #接着，构造自定义动画函数animate，用来更新每一帧上各个x对应的y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x + i/10.0)) return line, #然后，构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, #接下来，我们调用FuncAnimation函数生成动画。参数说明： #fig 进行动画绘制的figure #func 自定义动画函数，即传入刚定义的函数animate #frames 动画长度，一次循环包含的帧数 #init_func 自定义开始帧，即传入刚定义的函数init #interval 更新频率，以ms计 #blit 选择更新所有点，还是仅更新产生变化的点。应选择True，但mac用户请选择False，否则无法显示动画 ani = animation.FuncAnimation(fig=fig, func=animate, frames=100, init_func=init, interval=20, blit=False) plt.show() # #当然，你也可以将动画以mp4格式保存下来，但首先要保证你已经安装了ffmpeg 或者mencoder # ani.save(&#39;basic_animation.mp4&#39;, fps=30, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;]) %matplotlib notebook import tensorflow as tf #这里不需要吧 import numpy as np import matplotlib.pyplot as plt from matplotlib import animation fig, ax = plt.subplots() x =np.arange(0,2*np.pi,0.01) # 返回的是个列表 line , = ax.plot(x,np.sin(x)) def animate(i): # xdata 保持不变， ydata 更新成另外一批数据 # 将0-100都传进去更新一下，i变化时，y也会变化，更新图像 line.set_ydata(np.sin(x+i/10)) return line, def init(): line.set_ydata(np.sin(x)) return line, # interval 是更新的频率，隔多少毫秒更新一次，这里是隔20ms更新一次 # blit=True,只更新有变化的点 ani = animation.FuncAnimation(fig=fig,func=animate,frames =100,init_func=init,interval =20,blit=False) plt.show()" />
<meta property="og:description" content="1.Matplotlib基本介绍 2.基础用法 3.一些设置属性 4.图中图 5.动画 &nbsp; 1.Matplotlib基本介绍 Matplotlib是一个非常强大的画图工具，对数据的可视化起着很大的作用。Maplotlib可以画图线图，散点图，等高线图，条形图，柱形图，3D图形，图形动画等。 pip3 install matplotlib #python3中使用这条语句进行安装，在命令行中输入，敲入回车即可 #Matplotlib导入 import matplotlib.pyplot as plt import numpy as np import pandas as pd 2.基础用法 x=np.linspace(-1,1,50) #定义x y1=2*x+1 #定义y数据范围 y2=x**2 plt.figure() #定义图像窗口 plt.plot(x,y1) #画出曲线 plt.plot(x,y2) plt.show() #显示图像 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) # plt.plot(x,y2) plt.show() &nbsp; 3.一些设置属性 3.1 设置坐标轴 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) plt.show() plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) plt.show() #设置边框属性 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) ax=plt.gca() #get current axis ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) #边框属性设置为None 不显示 ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) plt.show() #调整移动坐标轴 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) ax=plt.gca() #get current axis ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) #边框属性设置为None 不显示 ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) #设置x坐标刻度数字或名称的位置，所有属性为：top,bottom,both,default,none ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) # 设置.spines边框x轴，设置.set_position设置边框的位置，y=0位置；位置所有属性有outward,axes,data ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #坐标中心点在（0,0）位置 plt.show() 3.2 设置图例 x=np.linspace(-3,3,50) y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) plt.xlim(-1,2) plt.ylim(-2,3) new_ticks=np.linspace(-1,2,5) plt.xticks(new_ticks) plt.yticks([-2,-1,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) l1,=plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;,label=&#39;linear line&#39;) l2,=plt.plot(x,y2,label=&#39;square line&#39;) plt.legend(loc=&#39;best&#39;) #显示在最好的位置,自动分配 plt.show() #显示图 x=np.linspace(-3,3,50) y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) plt.xlim(-1,2) plt.ylim(-2,3) new_ticks=np.linspace(-1,2,5) plt.xticks(new_ticks) plt.yticks([-2,-1,1,2,], [r&#39;$really\ bad$&#39;,&#39;$bad$&#39;,&#39;$well$&#39;,&#39;$really\ well$&#39;]) l1,=plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;,label=&#39;linear line&#39;) l2,=plt.plot(x,y2,label=&#39;square line&#39;) #单独修改label的信息 plt.legend(loc=&#39;best&#39;,handles=[l1,l2],labels=[&#39;up&#39;,&#39;down&#39;]) #显示在最好的位置,自动分配 plt.show() #显示图 loc中的参数： best upper right upper left lower left lower right right center right lower center upper center center 3.3 Annotation标注 x=np.linspace(-3,3,50) y=2*x+1 plt.figure(num=1,figsize=(8,5)) plt.plot(x,y) #移动坐标轴 ax=plt.gca() ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #标注信息 x0=1 y0=2*x0+1 plt.scatter(x0,y0,color=&#39;b&#39;) plt.plot([x0,x0],[y0,0],&#39;k--&#39;,lw=2.5) #连接两个点，k表示黑色，lw=line weight 线粗细 plt.annotate(r&#39;$2x0+1=%s$&#39; % y0,xy=(x0,y0),xycoords=&#39;data&#39;,xytext=(+30,-30),textcoords=&#39;offset points&#39;,fontsize=16, arrowprops=dict(arrowstyle=&#39;-&gt;&#39;,connectionstyle=&#39;arc3,rad=.2&#39;)) #xycoords=&#39;data&#39; 基于数据的值来选位置，xytext=(+30,-30),对于标注位置的描述，textcoords=&#39;offset points&#39;，xy偏差值，arrowprops对图中箭头类型设置 plt.text(-3.7,3,r&#39;$This\ is\ the\ some\ text. \mu\ \sigma_i\ \alpha_t$&#39;,fontdict={&#39;size&#39;:16,&#39;color&#39;:&#39;r&#39;}) plt.show() &nbsp; 3.4 Tick能见度 x=np.linspace(-3,3,50) y=0.1*x plt.figure() plt.plot(x,y,linewidth=10,zorder=1) plt.ylim(-2,2) #移动坐标轴 ax=plt.gca() ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #label.set_fontsize(12) 重新调整字体的大小，bbox设置目的内容透明度相关系数，facecolor调节box景色 #edgecolor设置边框 ,alpha设置透明度，zorder设置图层顺序 for label in ax.get_xticklabels()+ax.get_yticklabels(): label.set_fontsize(12) label.set_bbox(dict(facecolor=&#39;red&#39;,edgecolor=&#39;None&#39;,alpha=0.7,zorder=2)) plt.show() 3.5 不同图形 3.5.1 Scatter散点图 n=1024 X=np.random.normal(0,1,n) Y=np.random.normal(0,1,n) T=np.arctan2(Y,X) #arctan2返回给定的X和Y值的反正切值 #scatter画散点图，size=75,颜色为T,透明度为50%，利用xticks函数来隐藏x坐标轴 plt.scatter(X,Y,s=75,c=T,alpha=0.5) plt.xlim(-1.5,1.5) plt.xticks(()) #忽略xticks plt.ylim(-1.5,1.5) plt.yticks(()) #忽略yticks plt.show() 3.5.2 Bar条形图 n=12 X=np.arange(n) Y1=(1-X/float(n))*np.random.uniform(0.5,1,n) Y2=(1-X/float(n))*np.random.uniform(0.5,1,n) plt.bar(X,+Y1,facecolor=&#39;#9999ff&#39;,edgecolor=&#39;white&#39;) plt.bar(X,-Y2,facecolor=&#39;#ff9999&#39;,edgecolor=&#39;white&#39;) #标记值 for x,y in zip(X,Y1): #zip表示可以传递两个值 plt.text(x+0.4,y+0.5,&#39;%.2f&#39;%y,ha=&#39;center&#39;,va=&#39;bottom&#39;) #ha表示横向对齐，bottom表示向下对齐 for x,y in zip(X,Y2): plt.text(x+0.4,-y-0.05,&#39;%.2f&#39;%y,ha=&#39;center&#39;,va=&#39;top&#39;) plt.xlim(-0.5,n) plt.xticks(()) plt.ylim(-1.25,1.25) plt.yticks(()) plt.show() 3.5.3 Contours等高线图 n=256 x=np.linspace(-3,3,n) y=np.linspace(-3,3,n) X,Y=np.meshgrid(x,y) #从坐标向量返回坐标矩阵 #函数用来计算高度值，利用contour函数把颜色加进去，位置参数依次为x,y,f(x,y)，透明度为0.75，并将f(x,y)的值对应到camp之中 def f(x,y): return (1-x/2+x**5+y**3)*np.exp(-x**2-y**2) plt.contourf(X,Y,f(X,Y),8,alpha=0.75,cmap=plt.cm.hot) #8表示等高线分成多少份，alpha表示透明度，cmap表示color map C=plt.contour(X,Y,f(X,Y),8,colors=&#39;black&#39;,linewidth=0.5) plt.clabel(C,inline=True,fontsize=10) plt.xticks(()) #隐藏坐标轴 plt.yticks(()) plt.show() 3.6 Image图片 import matplotlib.pyplot as plt import numpy as np a = np.array([0.313660827978, 0.365348418405, 0.423733120134, 0.365348418405, 0.439599930621, 0.525083754405, 0.423733120134, 0.525083754405, 0.651536351379]).reshape(3,3) plt.imshow(a, interpolation=&#39;nearest&#39;, cmap=&#39;bone&#39;, origin=&#39;lower&#39;) plt.show() #利用matplotlib打印出图像 a=np.array([0.313660827978,0.365348418405,0.423733120134, 0.365348418405,0.439599930621,0.525083754405, 0.423733120134,0.525083754405,0.651536351379]).reshape(3,3) plt.imshow(a,interpolation=&#39;nearest&#39;,cmap=&#39;bone&#39;,origin=&#39;lower&#39;) #origin=&#39;lower&#39;代表就是选择原点位置 plt.colorbar(shrink=.92) #shrink参数是将图片长度变为原来的92% plt.xticks(()) plt.yticks(()) plt.show() &nbsp; 3.7 3D数据 import numpy as np import matplotlib.pyplot as plt from mpl_toolkits.mplot3d import Axes3D #需要导入模块Axes3D fig=plt.figure() #定义图像窗口 ax=Axes3D(fig) #在窗口上添加3D坐标轴 #将x和y值编织成栅格 X=np.arange(-4,4,0.25) Y=np.arange(-4,4,0.25) X,Y=np.meshgrid(X,Y) R=np.sqrt(X**2+Y**2) Z=np.sin(R) #高度值 #将colormap ranbow填充颜色，之后将三维图像投影到XY平面做等高线图，其中rstride和cstride表示row和column的宽度 ax.plot_surface(X,Y,Z,rstride=1,cstride=1,cmap=plt.get_cmap(&#39;rainbow&#39;)) #rstride表示图像中分割线的跨图 #添加XY平面等高线 投影到Z平面 ax.contourf(X,Y,Z,zdir=&#39;z&#39;,offset=-2,cmap=plt.get_cmap(&#39;rainbow&#39;)) #把图像进行投影的图形 offset表示比0坐标轴低两个位置 ax.set_zlim(-2,2) plt.show() 3.8 subplot 3.8.1 多合一显示 均匀图中图：MatPlotLib可以组合许多的小图在大图中显示，使用的方法叫做subplot. plt.figure() plt.subplot(2,2,1) #表示将整个图像分割成2行2列，当前位置为1 plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2] plt.subplot(2,2,2) plt.plot([0,1],[0,2]) plt.subplot(2,2,3) plt.plot([0,1],[0,3]) plt.subplot(2,2,4) plt.plot([0,1],[0,4]) plt.show() 不均匀图中图 plt.figure() plt.subplot(2,1,1) #表示将整个图像分割成2行1列，当前位置为1 plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2] plt.subplot(2,3,4) plt.plot([0,1],[0,2]) plt.subplot(2,3,5) plt.plot([0,1],[0,3]) plt.subplot(2,3,6) plt.plot([0,1],[0,4]) plt.show() 3.8.2 分格显示 #方法一 import matplotlib.gridspec as gridspec #引入新模块 plt.figure() #使用plt.subplot2grid创建一个小图，（3,3）表示将整个图像分割成三行三列，（0,0）表示从第0行0列开始作图， #colspan=3表示列的跨度为3.colspan和rowspan缺省时默认跨度为1 ax1=plt.subplot2grid((3,3),(0,0),colspan=3) ax1.plot([1,2],[1,2]) ax1.set_title(&#39;ax1_title&#39;) #设置图的标题 #将图像分割成3行3列，从第1行0列开始作图，列的跨度为2 ax2=plt.subplot2grid((3,3),(1,0),colspan=2) #将图像分割成3行3列，从第1行2列开始作图，行的跨度为2 ax3=plt.subplot2grid((3,3),(1,2),rowspan=2) #将图像分割成3行3列，从第2行0列开始作图，行与列的跨度默认为1 ax4=plt.subplot2grid((3,3),(2,0)) ax4.scatter([1,2],[2,2]) ax4.set_xlabel(&#39;ax4_x&#39;) ax4.set_ylabel(&#39;ax4_y&#39;) ax5=plt.subplot2grid((3,3),(2,1)) plt.show() #方法二 plt.figure() gs=gridspec.GridSpec(3,3) #将图像分割成三行三列 ax6=plt.subplot(gs[0,:]) #gs[0:1]表示图占第0行和所有列 ax7=plt.subplot(gs[1,:2]) #gs[1,:2]表示图占第1行和前两列 ax8=plt.subplot(gs[1:,2]) #gs[1,:]表示图占后两行的最后一列 ax9=plt.subplot(gs[-1,0]) ax10=plt.subplot(gs[-1,-2]) #gs[-1,-2]表示这个图占倒数第一行和倒数第2列 plt.show() #方法三 #建立一个2行2列的图像窗口，sharex=True表示共享x轴坐标，sharey=True表示共享y轴坐标， #((ax11,ax12),(ax13,ax14))表示从左到右一次存放ax11,ax12,ax13,ax14 f,((ax11,ax12),(ax13,ax14))=plt.subplots(2,2,sharex=True,sharey=True) ax11.scatter([1,2],[1,2]) #坐标范围x为[1,2],y为[1,2] plt.tight_layout() #表示紧凑显示图像 plt.show() &nbsp; 3.9 次坐标轴 x=np.arange(0,10,0.1) y1=0.5*x**2 y2=-1*y1 fig,ax1=plt.subplots() ax2=ax1.twinx() #镜像显示 ax1.plot(x,y1,&#39;g-&#39;) ax2.plot(x,y2,&#39;b-&#39;) ax1.set_xlabel(&#39;x data&#39;) ax1.set_ylabel(&#39;Y1 data&#39;,color=&#39;g&#39;) #第一个y坐标轴 ax2.set_ylabel(&#39;Y2 data&#39;,color=&#39;b&#39;) #第二个y坐标轴 plt.show() &nbsp; 4.图中图 fig=plt.figure() #创建数据 x=[1,2,3,4,5,6,7] y=[1,3,4,2,5,8,6] #绘制大图：假设大图的大小为10，那么大图被包含在由（1,1）开始，宽8高8的坐标系之中 left,bottom,width,height=0.1,0.1,0.8,0.8 ax1=fig.add_axes([left,bottom,width,height]) #main axes ax1.plot(x,y,&#39;r&#39;) #绘制大图，颜色为red ax1.set_xlabel(&#39;x&#39;) #横坐标名称为x ax1.set_ylabel(&#39;y&#39;) ax1.set_title(&#39;title&#39;) #图名称为title #绘制小图，注意坐标系位置和大小的改变 ax2=fig.add_axes([0.2,0.6,0.25,0.25]) ax2.plot(y,x,&#39;b&#39;) #颜色为bule ax2.set_xlabel(&#39;x&#39;) ax2.set_title(&#39;title inside 1&#39;) #绘制第二个小图 plt.axes([0.6,0.2,0.25,0.25]) plt.plot(y[::-1],x,&#39;g&#39;) #将y进行逆序 plt.xlabel(&#39;x&#39;) plt.ylabel(&#39;y&#39;) plt.title(&#39;title inside 2&#39;) plt.show() &nbsp; 5.动画 %matplotlib notebook #在jupyter 中显示动画 from matplotlib.animation import FuncAnimation #引入新模块 fig,ax=plt.subplots() x=np.arange(0,2*np.pi,0.01) #数据为0~2PI范围内的正弦曲线 line,=ax.plot(x,np.sin(x)) #line表示列表 #构造自定义动画函数animate,用来更新每一帧上x和y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x+i/100)) return line, #构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, #frame表示动画长度，一次循环所包含的帧数；interval表示更新频率 #blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False ani=FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=10,blit=False) plt.show() %matplotlib notebook from matplotlib import animation#引入新模块 fig,ax=plt.subplots() x=np.arange(0,2*np.pi,0.01)#数据为0~2PI范围内的正弦曲线 line,=ax.plot(x,np.sin(x))# line表示列表 #构造自定义动画函数animate，用来更新每一帧上x和y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x+i/100)) return line, #构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, # frame表示动画长度，一次循环所包含的帧数；interval表示更新频率 # blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False。 ani=animation.FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=20,blit=False) plt.show() from matplotlib import pyplot as plt from matplotlib import animation import numpy as np fig, ax = plt.subplots() #我们的数据是一个0~2π内的正弦曲线 x = np.arange(0, 2*np.pi, 0.01) line, = ax.plot(x, np.sin(x)) #接着，构造自定义动画函数animate，用来更新每一帧上各个x对应的y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x + i/10.0)) return line, #然后，构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, #接下来，我们调用FuncAnimation函数生成动画。参数说明： #fig 进行动画绘制的figure #func 自定义动画函数，即传入刚定义的函数animate #frames 动画长度，一次循环包含的帧数 #init_func 自定义开始帧，即传入刚定义的函数init #interval 更新频率，以ms计 #blit 选择更新所有点，还是仅更新产生变化的点。应选择True，但mac用户请选择False，否则无法显示动画 ani = animation.FuncAnimation(fig=fig, func=animate, frames=100, init_func=init, interval=20, blit=False) plt.show() # #当然，你也可以将动画以mp4格式保存下来，但首先要保证你已经安装了ffmpeg 或者mencoder # ani.save(&#39;basic_animation.mp4&#39;, fps=30, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;]) %matplotlib notebook import tensorflow as tf #这里不需要吧 import numpy as np import matplotlib.pyplot as plt from matplotlib import animation fig, ax = plt.subplots() x =np.arange(0,2*np.pi,0.01) # 返回的是个列表 line , = ax.plot(x,np.sin(x)) def animate(i): # xdata 保持不变， ydata 更新成另外一批数据 # 将0-100都传进去更新一下，i变化时，y也会变化，更新图像 line.set_ydata(np.sin(x+i/10)) return line, def init(): line.set_ydata(np.sin(x)) return line, # interval 是更新的频率，隔多少毫秒更新一次，这里是隔20ms更新一次 # blit=True,只更新有变化的点 ani = animation.FuncAnimation(fig=fig,func=animate,frames =100,init_func=init,interval =20,blit=False) plt.show()" />
<link rel="canonical" href="https://mlh.app/2019/05/04/729555.html" />
<meta property="og:url" content="https://mlh.app/2019/05/04/729555.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-04T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1.Matplotlib基本介绍 2.基础用法 3.一些设置属性 4.图中图 5.动画 &nbsp; 1.Matplotlib基本介绍 Matplotlib是一个非常强大的画图工具，对数据的可视化起着很大的作用。Maplotlib可以画图线图，散点图，等高线图，条形图，柱形图，3D图形，图形动画等。 pip3 install matplotlib #python3中使用这条语句进行安装，在命令行中输入，敲入回车即可 #Matplotlib导入 import matplotlib.pyplot as plt import numpy as np import pandas as pd 2.基础用法 x=np.linspace(-1,1,50) #定义x y1=2*x+1 #定义y数据范围 y2=x**2 plt.figure() #定义图像窗口 plt.plot(x,y1) #画出曲线 plt.plot(x,y2) plt.show() #显示图像 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) # plt.plot(x,y2) plt.show() &nbsp; 3.一些设置属性 3.1 设置坐标轴 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) plt.show() plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\\ well$&#39;]) plt.show() #设置边框属性 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\\ well$&#39;]) ax=plt.gca() #get current axis ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) #边框属性设置为None 不显示 ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) plt.show() #调整移动坐标轴 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] #用于正常显示中文 plt.rcParams[&#39;axes.unicode_minus&#39;] = False #解决保存图像是负号&#39;-&#39;显示为方块的问题,或者转换负号为字符串 x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数 y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5） plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;) plt.plot(x,y2) plt.xlim(-1,2) #x轴的范围 plt.ylim(-2,3) #y轴的范围 plt.xlabel(&quot;x轴&quot;) plt.ylabel(&quot;y轴&quot;) new_ticks=np.linspace(-1,2,5) #-1到2分成5段，包含端点 print(new_ticks) plt.xticks(new_ticks) #进行替换新下标 plt.yticks([-2,-1,0,1,2,], [r&#39;$really\\ bad$&#39;,&#39;$bad$&#39;,&#39;$0$&#39;,&#39;$well$&#39;,&#39;$really\\ well$&#39;]) ax=plt.gca() #get current axis ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) #边框属性设置为None 不显示 ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) #设置x坐标刻度数字或名称的位置，所有属性为：top,bottom,both,default,none ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) # 设置.spines边框x轴，设置.set_position设置边框的位置，y=0位置；位置所有属性有outward,axes,data ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #坐标中心点在（0,0）位置 plt.show() 3.2 设置图例 x=np.linspace(-3,3,50) y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) plt.xlim(-1,2) plt.ylim(-2,3) new_ticks=np.linspace(-1,2,5) plt.xticks(new_ticks) plt.yticks([-2,-1,1,2,], [r&#39;$really\\ bad$&#39;,&#39;$bad$&#39;,&#39;$well$&#39;,&#39;$really\\ well$&#39;]) l1,=plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;,label=&#39;linear line&#39;) l2,=plt.plot(x,y2,label=&#39;square line&#39;) plt.legend(loc=&#39;best&#39;) #显示在最好的位置,自动分配 plt.show() #显示图 x=np.linspace(-3,3,50) y1=2*x+1 y2=x**2 plt.figure(num=2,figsize=(8,5)) plt.xlim(-1,2) plt.ylim(-2,3) new_ticks=np.linspace(-1,2,5) plt.xticks(new_ticks) plt.yticks([-2,-1,1,2,], [r&#39;$really\\ bad$&#39;,&#39;$bad$&#39;,&#39;$well$&#39;,&#39;$really\\ well$&#39;]) l1,=plt.plot(x,y1,color=&#39;red&#39;,linewidth=2,linestyle=&#39;--&#39;,label=&#39;linear line&#39;) l2,=plt.plot(x,y2,label=&#39;square line&#39;) #单独修改label的信息 plt.legend(loc=&#39;best&#39;,handles=[l1,l2],labels=[&#39;up&#39;,&#39;down&#39;]) #显示在最好的位置,自动分配 plt.show() #显示图 loc中的参数： best upper right upper left lower left lower right right center right lower center upper center center 3.3 Annotation标注 x=np.linspace(-3,3,50) y=2*x+1 plt.figure(num=1,figsize=(8,5)) plt.plot(x,y) #移动坐标轴 ax=plt.gca() ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #标注信息 x0=1 y0=2*x0+1 plt.scatter(x0,y0,color=&#39;b&#39;) plt.plot([x0,x0],[y0,0],&#39;k--&#39;,lw=2.5) #连接两个点，k表示黑色，lw=line weight 线粗细 plt.annotate(r&#39;$2x0+1=%s$&#39; % y0,xy=(x0,y0),xycoords=&#39;data&#39;,xytext=(+30,-30),textcoords=&#39;offset points&#39;,fontsize=16, arrowprops=dict(arrowstyle=&#39;-&gt;&#39;,connectionstyle=&#39;arc3,rad=.2&#39;)) #xycoords=&#39;data&#39; 基于数据的值来选位置，xytext=(+30,-30),对于标注位置的描述，textcoords=&#39;offset points&#39;，xy偏差值，arrowprops对图中箭头类型设置 plt.text(-3.7,3,r&#39;$This\\ is\\ the\\ some\\ text. \\mu\\ \\sigma_i\\ \\alpha_t$&#39;,fontdict={&#39;size&#39;:16,&#39;color&#39;:&#39;r&#39;}) plt.show() &nbsp; 3.4 Tick能见度 x=np.linspace(-3,3,50) y=0.1*x plt.figure() plt.plot(x,y,linewidth=10,zorder=1) plt.ylim(-2,2) #移动坐标轴 ax=plt.gca() ax.spines[&#39;right&#39;].set_color(&#39;none&#39;) ax.spines[&#39;top&#39;].set_color(&#39;none&#39;) ax.xaxis.set_ticks_position(&#39;bottom&#39;) ax.spines[&#39;bottom&#39;].set_position((&#39;data&#39;,0)) ax.yaxis.set_ticks_position(&#39;left&#39;) ax.spines[&#39;left&#39;].set_position((&#39;data&#39;,0)) #label.set_fontsize(12) 重新调整字体的大小，bbox设置目的内容透明度相关系数，facecolor调节box景色 #edgecolor设置边框 ,alpha设置透明度，zorder设置图层顺序 for label in ax.get_xticklabels()+ax.get_yticklabels(): label.set_fontsize(12) label.set_bbox(dict(facecolor=&#39;red&#39;,edgecolor=&#39;None&#39;,alpha=0.7,zorder=2)) plt.show() 3.5 不同图形 3.5.1 Scatter散点图 n=1024 X=np.random.normal(0,1,n) Y=np.random.normal(0,1,n) T=np.arctan2(Y,X) #arctan2返回给定的X和Y值的反正切值 #scatter画散点图，size=75,颜色为T,透明度为50%，利用xticks函数来隐藏x坐标轴 plt.scatter(X,Y,s=75,c=T,alpha=0.5) plt.xlim(-1.5,1.5) plt.xticks(()) #忽略xticks plt.ylim(-1.5,1.5) plt.yticks(()) #忽略yticks plt.show() 3.5.2 Bar条形图 n=12 X=np.arange(n) Y1=(1-X/float(n))*np.random.uniform(0.5,1,n) Y2=(1-X/float(n))*np.random.uniform(0.5,1,n) plt.bar(X,+Y1,facecolor=&#39;#9999ff&#39;,edgecolor=&#39;white&#39;) plt.bar(X,-Y2,facecolor=&#39;#ff9999&#39;,edgecolor=&#39;white&#39;) #标记值 for x,y in zip(X,Y1): #zip表示可以传递两个值 plt.text(x+0.4,y+0.5,&#39;%.2f&#39;%y,ha=&#39;center&#39;,va=&#39;bottom&#39;) #ha表示横向对齐，bottom表示向下对齐 for x,y in zip(X,Y2): plt.text(x+0.4,-y-0.05,&#39;%.2f&#39;%y,ha=&#39;center&#39;,va=&#39;top&#39;) plt.xlim(-0.5,n) plt.xticks(()) plt.ylim(-1.25,1.25) plt.yticks(()) plt.show() 3.5.3 Contours等高线图 n=256 x=np.linspace(-3,3,n) y=np.linspace(-3,3,n) X,Y=np.meshgrid(x,y) #从坐标向量返回坐标矩阵 #函数用来计算高度值，利用contour函数把颜色加进去，位置参数依次为x,y,f(x,y)，透明度为0.75，并将f(x,y)的值对应到camp之中 def f(x,y): return (1-x/2+x**5+y**3)*np.exp(-x**2-y**2) plt.contourf(X,Y,f(X,Y),8,alpha=0.75,cmap=plt.cm.hot) #8表示等高线分成多少份，alpha表示透明度，cmap表示color map C=plt.contour(X,Y,f(X,Y),8,colors=&#39;black&#39;,linewidth=0.5) plt.clabel(C,inline=True,fontsize=10) plt.xticks(()) #隐藏坐标轴 plt.yticks(()) plt.show() 3.6 Image图片 import matplotlib.pyplot as plt import numpy as np a = np.array([0.313660827978, 0.365348418405, 0.423733120134, 0.365348418405, 0.439599930621, 0.525083754405, 0.423733120134, 0.525083754405, 0.651536351379]).reshape(3,3) plt.imshow(a, interpolation=&#39;nearest&#39;, cmap=&#39;bone&#39;, origin=&#39;lower&#39;) plt.show() #利用matplotlib打印出图像 a=np.array([0.313660827978,0.365348418405,0.423733120134, 0.365348418405,0.439599930621,0.525083754405, 0.423733120134,0.525083754405,0.651536351379]).reshape(3,3) plt.imshow(a,interpolation=&#39;nearest&#39;,cmap=&#39;bone&#39;,origin=&#39;lower&#39;) #origin=&#39;lower&#39;代表就是选择原点位置 plt.colorbar(shrink=.92) #shrink参数是将图片长度变为原来的92% plt.xticks(()) plt.yticks(()) plt.show() &nbsp; 3.7 3D数据 import numpy as np import matplotlib.pyplot as plt from mpl_toolkits.mplot3d import Axes3D #需要导入模块Axes3D fig=plt.figure() #定义图像窗口 ax=Axes3D(fig) #在窗口上添加3D坐标轴 #将x和y值编织成栅格 X=np.arange(-4,4,0.25) Y=np.arange(-4,4,0.25) X,Y=np.meshgrid(X,Y) R=np.sqrt(X**2+Y**2) Z=np.sin(R) #高度值 #将colormap ranbow填充颜色，之后将三维图像投影到XY平面做等高线图，其中rstride和cstride表示row和column的宽度 ax.plot_surface(X,Y,Z,rstride=1,cstride=1,cmap=plt.get_cmap(&#39;rainbow&#39;)) #rstride表示图像中分割线的跨图 #添加XY平面等高线 投影到Z平面 ax.contourf(X,Y,Z,zdir=&#39;z&#39;,offset=-2,cmap=plt.get_cmap(&#39;rainbow&#39;)) #把图像进行投影的图形 offset表示比0坐标轴低两个位置 ax.set_zlim(-2,2) plt.show() 3.8 subplot 3.8.1 多合一显示 均匀图中图：MatPlotLib可以组合许多的小图在大图中显示，使用的方法叫做subplot. plt.figure() plt.subplot(2,2,1) #表示将整个图像分割成2行2列，当前位置为1 plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2] plt.subplot(2,2,2) plt.plot([0,1],[0,2]) plt.subplot(2,2,3) plt.plot([0,1],[0,3]) plt.subplot(2,2,4) plt.plot([0,1],[0,4]) plt.show() 不均匀图中图 plt.figure() plt.subplot(2,1,1) #表示将整个图像分割成2行1列，当前位置为1 plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2] plt.subplot(2,3,4) plt.plot([0,1],[0,2]) plt.subplot(2,3,5) plt.plot([0,1],[0,3]) plt.subplot(2,3,6) plt.plot([0,1],[0,4]) plt.show() 3.8.2 分格显示 #方法一 import matplotlib.gridspec as gridspec #引入新模块 plt.figure() #使用plt.subplot2grid创建一个小图，（3,3）表示将整个图像分割成三行三列，（0,0）表示从第0行0列开始作图， #colspan=3表示列的跨度为3.colspan和rowspan缺省时默认跨度为1 ax1=plt.subplot2grid((3,3),(0,0),colspan=3) ax1.plot([1,2],[1,2]) ax1.set_title(&#39;ax1_title&#39;) #设置图的标题 #将图像分割成3行3列，从第1行0列开始作图，列的跨度为2 ax2=plt.subplot2grid((3,3),(1,0),colspan=2) #将图像分割成3行3列，从第1行2列开始作图，行的跨度为2 ax3=plt.subplot2grid((3,3),(1,2),rowspan=2) #将图像分割成3行3列，从第2行0列开始作图，行与列的跨度默认为1 ax4=plt.subplot2grid((3,3),(2,0)) ax4.scatter([1,2],[2,2]) ax4.set_xlabel(&#39;ax4_x&#39;) ax4.set_ylabel(&#39;ax4_y&#39;) ax5=plt.subplot2grid((3,3),(2,1)) plt.show() #方法二 plt.figure() gs=gridspec.GridSpec(3,3) #将图像分割成三行三列 ax6=plt.subplot(gs[0,:]) #gs[0:1]表示图占第0行和所有列 ax7=plt.subplot(gs[1,:2]) #gs[1,:2]表示图占第1行和前两列 ax8=plt.subplot(gs[1:,2]) #gs[1,:]表示图占后两行的最后一列 ax9=plt.subplot(gs[-1,0]) ax10=plt.subplot(gs[-1,-2]) #gs[-1,-2]表示这个图占倒数第一行和倒数第2列 plt.show() #方法三 #建立一个2行2列的图像窗口，sharex=True表示共享x轴坐标，sharey=True表示共享y轴坐标， #((ax11,ax12),(ax13,ax14))表示从左到右一次存放ax11,ax12,ax13,ax14 f,((ax11,ax12),(ax13,ax14))=plt.subplots(2,2,sharex=True,sharey=True) ax11.scatter([1,2],[1,2]) #坐标范围x为[1,2],y为[1,2] plt.tight_layout() #表示紧凑显示图像 plt.show() &nbsp; 3.9 次坐标轴 x=np.arange(0,10,0.1) y1=0.5*x**2 y2=-1*y1 fig,ax1=plt.subplots() ax2=ax1.twinx() #镜像显示 ax1.plot(x,y1,&#39;g-&#39;) ax2.plot(x,y2,&#39;b-&#39;) ax1.set_xlabel(&#39;x data&#39;) ax1.set_ylabel(&#39;Y1 data&#39;,color=&#39;g&#39;) #第一个y坐标轴 ax2.set_ylabel(&#39;Y2 data&#39;,color=&#39;b&#39;) #第二个y坐标轴 plt.show() &nbsp; 4.图中图 fig=plt.figure() #创建数据 x=[1,2,3,4,5,6,7] y=[1,3,4,2,5,8,6] #绘制大图：假设大图的大小为10，那么大图被包含在由（1,1）开始，宽8高8的坐标系之中 left,bottom,width,height=0.1,0.1,0.8,0.8 ax1=fig.add_axes([left,bottom,width,height]) #main axes ax1.plot(x,y,&#39;r&#39;) #绘制大图，颜色为red ax1.set_xlabel(&#39;x&#39;) #横坐标名称为x ax1.set_ylabel(&#39;y&#39;) ax1.set_title(&#39;title&#39;) #图名称为title #绘制小图，注意坐标系位置和大小的改变 ax2=fig.add_axes([0.2,0.6,0.25,0.25]) ax2.plot(y,x,&#39;b&#39;) #颜色为bule ax2.set_xlabel(&#39;x&#39;) ax2.set_title(&#39;title inside 1&#39;) #绘制第二个小图 plt.axes([0.6,0.2,0.25,0.25]) plt.plot(y[::-1],x,&#39;g&#39;) #将y进行逆序 plt.xlabel(&#39;x&#39;) plt.ylabel(&#39;y&#39;) plt.title(&#39;title inside 2&#39;) plt.show() &nbsp; 5.动画 %matplotlib notebook #在jupyter 中显示动画 from matplotlib.animation import FuncAnimation #引入新模块 fig,ax=plt.subplots() x=np.arange(0,2*np.pi,0.01) #数据为0~2PI范围内的正弦曲线 line,=ax.plot(x,np.sin(x)) #line表示列表 #构造自定义动画函数animate,用来更新每一帧上x和y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x+i/100)) return line, #构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, #frame表示动画长度，一次循环所包含的帧数；interval表示更新频率 #blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False ani=FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=10,blit=False) plt.show() %matplotlib notebook from matplotlib import animation#引入新模块 fig,ax=plt.subplots() x=np.arange(0,2*np.pi,0.01)#数据为0~2PI范围内的正弦曲线 line,=ax.plot(x,np.sin(x))# line表示列表 #构造自定义动画函数animate，用来更新每一帧上x和y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x+i/100)) return line, #构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, # frame表示动画长度，一次循环所包含的帧数；interval表示更新频率 # blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False。 ani=animation.FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=20,blit=False) plt.show() from matplotlib import pyplot as plt from matplotlib import animation import numpy as np fig, ax = plt.subplots() #我们的数据是一个0~2π内的正弦曲线 x = np.arange(0, 2*np.pi, 0.01) line, = ax.plot(x, np.sin(x)) #接着，构造自定义动画函数animate，用来更新每一帧上各个x对应的y坐标值，参数表示第i帧 def animate(i): line.set_ydata(np.sin(x + i/10.0)) return line, #然后，构造开始帧函数init def init(): line.set_ydata(np.sin(x)) return line, #接下来，我们调用FuncAnimation函数生成动画。参数说明： #fig 进行动画绘制的figure #func 自定义动画函数，即传入刚定义的函数animate #frames 动画长度，一次循环包含的帧数 #init_func 自定义开始帧，即传入刚定义的函数init #interval 更新频率，以ms计 #blit 选择更新所有点，还是仅更新产生变化的点。应选择True，但mac用户请选择False，否则无法显示动画 ani = animation.FuncAnimation(fig=fig, func=animate, frames=100, init_func=init, interval=20, blit=False) plt.show() # #当然，你也可以将动画以mp4格式保存下来，但首先要保证你已经安装了ffmpeg 或者mencoder # ani.save(&#39;basic_animation.mp4&#39;, fps=30, extra_args=[&#39;-vcodec&#39;, &#39;libx264&#39;]) %matplotlib notebook import tensorflow as tf #这里不需要吧 import numpy as np import matplotlib.pyplot as plt from matplotlib import animation fig, ax = plt.subplots() x =np.arange(0,2*np.pi,0.01) # 返回的是个列表 line , = ax.plot(x,np.sin(x)) def animate(i): # xdata 保持不变， ydata 更新成另外一批数据 # 将0-100都传进去更新一下，i变化时，y也会变化，更新图像 line.set_ydata(np.sin(x+i/10)) return line, def init(): line.set_ydata(np.sin(x)) return line, # interval 是更新的频率，隔多少毫秒更新一次，这里是隔20ms更新一次 # blit=True,只更新有变化的点 ani = animation.FuncAnimation(fig=fig,func=animate,frames =100,init_func=init,interval =20,blit=False) plt.show()","@type":"BlogPosting","url":"https://mlh.app/2019/05/04/729555.html","headline":"Python基础入门　(五数据可视化库Matplotlib应用）","dateModified":"2019-05-04T00:00:00+08:00","datePublished":"2019-05-04T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2019/05/04/729555.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>Python基础入门　(五数据可视化库Matplotlib应用）</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <p>1.Matplotlib基本介绍</p> 
  <p>2.基础用法</p> 
  <p>3.一些设置属性</p> 
  <p>4.图中图</p> 
  <p>5.动画</p> 
  <p>&nbsp;</p> 
  <p><strong>1.Matplotlib基本介绍</strong></p> 
  <p>Matplotlib是一个非常强大的画图工具，对数据的可视化起着很大的作用。Maplotlib可以画图线图，散点图，等高线图，条形图，柱形图，3D图形，图形动画等。</p> 
  <p>pip3 install matplotlib #python3中使用这条语句进行安装，在命令行中输入，敲入回车即可</p> 
  <pre class="has">
<code class="language-python">#Matplotlib导入
import matplotlib.pyplot as plt  
import numpy as np
import pandas as pd </code></pre> 
  <p>2.基础用法</p> 
  <pre class="has">
<code class="language-python">x=np.linspace(-1,1,50)  #定义x
y1=2*x+1  #定义y数据范围
y2=x**2
plt.figure()  #定义图像窗口
plt.plot(x,y1)  #画出曲线
plt.plot(x,y2)
plt.show() #显示图像</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504175019431.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数
y1=2*x+1
y2=x**2
plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5）
plt.plot(x,y1,color='red',linewidth=2,linestyle='--')  #
plt.plot(x,y2)
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504175129842.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>&nbsp;</p> 
  <p>3.一些设置属性</p> 
  <p>3.1 设置坐标轴</p> 
  <pre class="has">
<code class="language-python">plt.rcParams['font.sans-serif'] = ['SimHei'] #用于正常显示中文
plt.rcParams['axes.unicode_minus'] = False   #解决保存图像是负号'-'显示为方块的问题,或者转换负号为字符串
x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数
y1=2*x+1
y2=x**2
plt.figure(num=1,figsize=(8,5)) #定义编号为1，大小为（8,5）
plt.plot(x,y1,color='red',linewidth=2,linestyle='--')  
plt.plot(x,y2)
plt.xlim(-1,2) #x轴的范围
plt.ylim(-2,3) #y轴的范围
plt.xlabel("x轴")
plt.ylabel("y轴")
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504175544153.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">plt.rcParams['font.sans-serif'] = ['SimHei'] #用于正常显示中文
plt.rcParams['axes.unicode_minus'] = False   #解决保存图像是负号'-'显示为方块的问题,或者转换负号为字符串
x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数
y1=2*x+1
y2=x**2
plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5）
plt.plot(x,y1,color='red',linewidth=2,linestyle='--')  
plt.plot(x,y2)
plt.xlim(-1,2) #x轴的范围
plt.ylim(-2,3) #y轴的范围
plt.xlabel("x轴")
plt.ylabel("y轴")

new_ticks=np.linspace(-1,2,5)  #-1到2分成5段，包含端点
print(new_ticks)
plt.xticks(new_ticks)  #进行替换新下标
plt.yticks([-2,-1,0,1,2,],
          [r'$really\ bad$','$bad$','$0$','$well$','$really\ well$'])

plt.show()
</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019050417565362.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">#设置边框属性
plt.rcParams['font.sans-serif'] = ['SimHei'] #用于正常显示中文
plt.rcParams['axes.unicode_minus'] = False   #解决保存图像是负号'-'显示为方块的问题,或者转换负号为字符串
x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数
y1=2*x+1
y2=x**2
plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5）
plt.plot(x,y1,color='red',linewidth=2,linestyle='--')  
plt.plot(x,y2)
plt.xlim(-1,2) #x轴的范围
plt.ylim(-2,3) #y轴的范围
plt.xlabel("x轴")
plt.ylabel("y轴")

new_ticks=np.linspace(-1,2,5)  #-1到2分成5段，包含端点
print(new_ticks)
plt.xticks(new_ticks)  #进行替换新下标
plt.yticks([-2,-1,0,1,2,],
          [r'$really\ bad$','$bad$','$0$','$well$','$really\ well$'])


ax=plt.gca()  #get current axis
ax.spines['right'].set_color('none') #边框属性设置为None 不显示
ax.spines['top'].set_color('none')


plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504175823511.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">#调整移动坐标轴

plt.rcParams['font.sans-serif'] = ['SimHei'] #用于正常显示中文
plt.rcParams['axes.unicode_minus'] = False   #解决保存图像是负号'-'显示为方块的问题,或者转换负号为字符串
x=np.linspace(-3,3,50) #在（-3,3）之间生成50个样本数
y1=2*x+1
y2=x**2
plt.figure(num=2,figsize=(8,5)) #定义编号为2，大小为（8,5）
plt.plot(x,y1,color='red',linewidth=2,linestyle='--')  
plt.plot(x,y2)
plt.xlim(-1,2) #x轴的范围
plt.ylim(-2,3) #y轴的范围
plt.xlabel("x轴")
plt.ylabel("y轴")

new_ticks=np.linspace(-1,2,5)  #-1到2分成5段，包含端点
print(new_ticks)
plt.xticks(new_ticks)  #进行替换新下标
plt.yticks([-2,-1,0,1,2,],
          [r'$really\ bad$','$bad$','$0$','$well$','$really\ well$'])


ax=plt.gca()  #get current axis
ax.spines['right'].set_color('none') #边框属性设置为None 不显示
ax.spines['top'].set_color('none')


ax.xaxis.set_ticks_position('bottom')  #设置x坐标刻度数字或名称的位置，所有属性为：top,bottom,both,default,none
ax.spines['bottom'].set_position(('data',0)) # 设置.spines边框x轴，设置.set_position设置边框的位置，y=0位置；位置所有属性有outward,axes,data
ax.yaxis.set_ticks_position('left')
ax.spines['left'].set_position(('data',0)) #坐标中心点在（0,0）位置


plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504180117408.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>3.2 设置图例</p> 
  <pre class="has">
<code class="language-python">x=np.linspace(-3,3,50)
y1=2*x+1
y2=x**2
plt.figure(num=2,figsize=(8,5))
plt.xlim(-1,2)
plt.ylim(-2,3)

new_ticks=np.linspace(-1,2,5) 
plt.xticks(new_ticks)
plt.yticks([-2,-1,1,2,],
          [r'$really\ bad$','$bad$','$well$','$really\ well$'])

l1,=plt.plot(x,y1,color='red',linewidth=2,linestyle='--',label='linear line')
l2,=plt.plot(x,y2,label='square line') 
plt.legend(loc='best') #显示在最好的位置,自动分配


plt.show() #显示图</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504180429119.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">x=np.linspace(-3,3,50)
y1=2*x+1
y2=x**2
plt.figure(num=2,figsize=(8,5))
plt.xlim(-1,2)
plt.ylim(-2,3)

new_ticks=np.linspace(-1,2,5) 
plt.xticks(new_ticks)
plt.yticks([-2,-1,1,2,],
          [r'$really\ bad$','$bad$','$well$','$really\ well$'])

l1,=plt.plot(x,y1,color='red',linewidth=2,linestyle='--',label='linear line')
l2,=plt.plot(x,y2,label='square line') 

#单独修改label的信息
plt.legend(loc='best',handles=[l1,l2],labels=['up','down']) #显示在最好的位置,自动分配


plt.show() #显示图</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504180622625.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>loc中的参数：</p> 
  <blockquote> 
   <p>best<br> upper right<br> upper left<br> lower left<br> lower right<br> right<br> center right<br> lower center<br> upper center<br> center</p> 
  </blockquote> 
  <p>3.3 Annotation标注</p> 
  <pre class="has">
<code class="language-python">x=np.linspace(-3,3,50)
y=2*x+1
plt.figure(num=1,figsize=(8,5))
plt.plot(x,y)

#移动坐标轴
ax=plt.gca()
ax.spines['right'].set_color('none')
ax.spines['top'].set_color('none')
ax.xaxis.set_ticks_position('bottom')
ax.spines['bottom'].set_position(('data',0))
ax.yaxis.set_ticks_position('left')
ax.spines['left'].set_position(('data',0))

#标注信息
x0=1
y0=2*x0+1
plt.scatter(x0,y0,color='b')
plt.plot([x0,x0],[y0,0],'k--',lw=2.5)  #连接两个点，k表示黑色，lw=line weight 线粗细

plt.annotate(r'$2x0+1=%s$' % y0,xy=(x0,y0),xycoords='data',xytext=(+30,-30),textcoords='offset points',fontsize=16,
             arrowprops=dict(arrowstyle='-&gt;',connectionstyle='arc3,rad=.2'))
#xycoords='data'  基于数据的值来选位置，xytext=(+30,-30),对于标注位置的描述，textcoords='offset points'，xy偏差值，arrowprops对图中箭头类型设置
plt.text(-3.7,3,r'$This\ is\ the\ some\ text. \mu\ \sigma_i\ \alpha_t$',fontdict={'size':16,'color':'r'})

plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504192420172.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>&nbsp;</p> 
  <p>3.4 Tick能见度</p> 
  <pre class="has">
<code class="language-python">x=np.linspace(-3,3,50)
y=0.1*x
plt.figure()
plt.plot(x,y,linewidth=10,zorder=1)
plt.ylim(-2,2)

#移动坐标轴
ax=plt.gca()
ax.spines['right'].set_color('none')
ax.spines['top'].set_color('none')
ax.xaxis.set_ticks_position('bottom')
ax.spines['bottom'].set_position(('data',0))
ax.yaxis.set_ticks_position('left')
ax.spines['left'].set_position(('data',0))

#label.set_fontsize(12) 重新调整字体的大小，bbox设置目的内容透明度相关系数，facecolor调节box景色
#edgecolor设置边框 ,alpha设置透明度，zorder设置图层顺序
for label in ax.get_xticklabels()+ax.get_yticklabels():
    label.set_fontsize(12)
    label.set_bbox(dict(facecolor='red',edgecolor='None',alpha=0.7,zorder=2))

plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504192519593.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>3.5 不同图形</p> 
  <p>3.5.1 Scatter散点图</p> 
  <pre class="has">
<code class="language-python">n=1024
X=np.random.normal(0,1,n)  
Y=np.random.normal(0,1,n)
T=np.arctan2(Y,X)  #arctan2返回给定的X和Y值的反正切值
#scatter画散点图，size=75,颜色为T,透明度为50%，利用xticks函数来隐藏x坐标轴
plt.scatter(X,Y,s=75,c=T,alpha=0.5)
plt.xlim(-1.5,1.5)
plt.xticks(())  #忽略xticks
plt.ylim(-1.5,1.5)
plt.yticks(()) #忽略yticks
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504192712154.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>3.5.2 Bar条形图</p> 
  <pre class="has">
<code class="language-python">n=12
X=np.arange(n)
Y1=(1-X/float(n))*np.random.uniform(0.5,1,n)
Y2=(1-X/float(n))*np.random.uniform(0.5,1,n)
plt.bar(X,+Y1,facecolor='#9999ff',edgecolor='white')
plt.bar(X,-Y2,facecolor='#ff9999',edgecolor='white')

#标记值
for x,y in zip(X,Y1):  #zip表示可以传递两个值
    plt.text(x+0.4,y+0.5,'%.2f'%y,ha='center',va='bottom')  #ha表示横向对齐，bottom表示向下对齐
for x,y in zip(X,Y2):
    plt.text(x+0.4,-y-0.05,'%.2f'%y,ha='center',va='top')
plt.xlim(-0.5,n)
plt.xticks(())
plt.ylim(-1.25,1.25)
plt.yticks(())

plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504192749331.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>3.5.3 Contours等高线图</p> 
  <pre class="has">
<code class="language-python">n=256
x=np.linspace(-3,3,n)
y=np.linspace(-3,3,n)
X,Y=np.meshgrid(x,y)  #从坐标向量返回坐标矩阵
#函数用来计算高度值，利用contour函数把颜色加进去，位置参数依次为x,y,f(x,y)，透明度为0.75，并将f(x,y)的值对应到camp之中
def f(x,y):
    return (1-x/2+x**5+y**3)*np.exp(-x**2-y**2)
plt.contourf(X,Y,f(X,Y),8,alpha=0.75,cmap=plt.cm.hot)  #8表示等高线分成多少份，alpha表示透明度，cmap表示color map

C=plt.contour(X,Y,f(X,Y),8,colors='black',linewidth=0.5)
plt.clabel(C,inline=True,fontsize=10)
plt.xticks(()) #隐藏坐标轴
plt.yticks(())

plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504192830920.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>3.6 Image图片</p> 
  <pre class="has">
<code class="language-python">import matplotlib.pyplot as plt
import numpy as np

a = np.array([0.313660827978, 0.365348418405, 0.423733120134,
              0.365348418405, 0.439599930621, 0.525083754405,
              0.423733120134, 0.525083754405, 0.651536351379]).reshape(3,3)

plt.imshow(a, interpolation='nearest', cmap='bone', origin='lower')
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504192928261.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">#利用matplotlib打印出图像
a=np.array([0.313660827978,0.365348418405,0.423733120134,
           0.365348418405,0.439599930621,0.525083754405,
           0.423733120134,0.525083754405,0.651536351379]).reshape(3,3)
plt.imshow(a,interpolation='nearest',cmap='bone',origin='lower') #origin='lower'代表就是选择原点位置
plt.colorbar(shrink=.92) #shrink参数是将图片长度变为原来的92%
plt.xticks(())
plt.yticks(())
plt.show()

</code></pre> 
  <p><img alt="" class="has" height="228" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193006607.png" width="295"></p> 
  <p>&nbsp;</p> 
  <p>3.7 3D数据</p> 
  <pre class="has">
<code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D   #需要导入模块Axes3D
fig=plt.figure() #定义图像窗口
ax=Axes3D(fig)  #在窗口上添加3D坐标轴
#将x和y值编织成栅格
X=np.arange(-4,4,0.25)
Y=np.arange(-4,4,0.25)
X,Y=np.meshgrid(X,Y)
R=np.sqrt(X**2+Y**2)
Z=np.sin(R)  #高度值

#将colormap ranbow填充颜色，之后将三维图像投影到XY平面做等高线图，其中rstride和cstride表示row和column的宽度
ax.plot_surface(X,Y,Z,rstride=1,cstride=1,cmap=plt.get_cmap('rainbow')) #rstride表示图像中分割线的跨图

#添加XY平面等高线 投影到Z平面
ax.contourf(X,Y,Z,zdir='z',offset=-2,cmap=plt.get_cmap('rainbow')) #把图像进行投影的图形 offset表示比0坐标轴低两个位置
ax.set_zlim(-2,2)
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193054935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>3.8 subplot</p> 
  <p>3.8.1 多合一显示</p> 
  <p>均匀图中图：MatPlotLib可以组合许多的小图在大图中显示，使用的方法叫做subplot.</p> 
  <pre class="has">
<code class="language-python">plt.figure()
plt.subplot(2,2,1)  #表示将整个图像分割成2行2列，当前位置为1
plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2]

plt.subplot(2,2,2)
plt.plot([0,1],[0,2])

plt.subplot(2,2,3)
plt.plot([0,1],[0,3])

plt.subplot(2,2,4)
plt.plot([0,1],[0,4])
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193233476.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>不均匀图中图</p> 
  <pre class="has">
<code class="language-python">plt.figure()
plt.subplot(2,1,1)  #表示将整个图像分割成2行1列，当前位置为1
plt.plot([0,1],[0,1]) #横坐标变化为[0,1] 竖坐标变化为[0,2]

plt.subplot(2,3,4)
plt.plot([0,1],[0,2])

plt.subplot(2,3,5)
plt.plot([0,1],[0,3])

plt.subplot(2,3,6)
plt.plot([0,1],[0,4])
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193320195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>3.8.2 分格显示</p> 
  <pre class="has">
<code class="language-python">#方法一
import matplotlib.gridspec as gridspec  #引入新模块
plt.figure()
#使用plt.subplot2grid创建一个小图，（3,3）表示将整个图像分割成三行三列，（0,0）表示从第0行0列开始作图，
#colspan=3表示列的跨度为3.colspan和rowspan缺省时默认跨度为1
ax1=plt.subplot2grid((3,3),(0,0),colspan=3)  
ax1.plot([1,2],[1,2])
ax1.set_title('ax1_title')  #设置图的标题

#将图像分割成3行3列，从第1行0列开始作图，列的跨度为2
ax2=plt.subplot2grid((3,3),(1,0),colspan=2)

#将图像分割成3行3列，从第1行2列开始作图，行的跨度为2
ax3=plt.subplot2grid((3,3),(1,2),rowspan=2)

#将图像分割成3行3列，从第2行0列开始作图，行与列的跨度默认为1
ax4=plt.subplot2grid((3,3),(2,0))
ax4.scatter([1,2],[2,2])
ax4.set_xlabel('ax4_x')
ax4.set_ylabel('ax4_y')

ax5=plt.subplot2grid((3,3),(2,1))
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193416228.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">#方法二
plt.figure()
gs=gridspec.GridSpec(3,3)  #将图像分割成三行三列
ax6=plt.subplot(gs[0,:]) #gs[0:1]表示图占第0行和所有列
ax7=plt.subplot(gs[1,:2]) #gs[1,:2]表示图占第1行和前两列
ax8=plt.subplot(gs[1:,2]) #gs[1,:]表示图占后两行的最后一列
ax9=plt.subplot(gs[-1,0]) 
ax10=plt.subplot(gs[-1,-2]) #gs[-1,-2]表示这个图占倒数第一行和倒数第2列
plt.show()
</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019050419350675.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <pre class="has">
<code class="language-python">#方法三
#建立一个2行2列的图像窗口，sharex=True表示共享x轴坐标，sharey=True表示共享y轴坐标，
#((ax11,ax12),(ax13,ax14))表示从左到右一次存放ax11,ax12,ax13,ax14
f,((ax11,ax12),(ax13,ax14))=plt.subplots(2,2,sharex=True,sharey=True)
ax11.scatter([1,2],[1,2]) #坐标范围x为[1,2],y为[1,2]
plt.tight_layout() #表示紧凑显示图像
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193541818.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>&nbsp;</p> 
  <p>3.9 次坐标轴</p> 
  <pre class="has">
<code class="language-python">x=np.arange(0,10,0.1)
y1=0.5*x**2
y2=-1*y1
fig,ax1=plt.subplots()

ax2=ax1.twinx()  #镜像显示
ax1.plot(x,y1,'g-')
ax2.plot(x,y2,'b-')

ax1.set_xlabel('x data')
ax1.set_ylabel('Y1 data',color='g') #第一个y坐标轴
ax2.set_ylabel('Y2 data',color='b') #第二个y坐标轴
plt.show()
</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193716906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>&nbsp;</p> 
  <p>4.图中图</p> 
  <pre class="has">
<code class="language-python">fig=plt.figure()
#创建数据
x=[1,2,3,4,5,6,7]
y=[1,3,4,2,5,8,6]

#绘制大图：假设大图的大小为10，那么大图被包含在由（1,1）开始，宽8高8的坐标系之中
left,bottom,width,height=0.1,0.1,0.8,0.8
ax1=fig.add_axes([left,bottom,width,height]) #main axes
ax1.plot(x,y,'r')  #绘制大图，颜色为red
ax1.set_xlabel('x') #横坐标名称为x
ax1.set_ylabel('y')
ax1.set_title('title') #图名称为title

#绘制小图，注意坐标系位置和大小的改变
ax2=fig.add_axes([0.2,0.6,0.25,0.25])
ax2.plot(y,x,'b') #颜色为bule
ax2.set_xlabel('x')
ax2.set_title('title inside 1')

#绘制第二个小图
plt.axes([0.6,0.2,0.25,0.25])
plt.plot(y[::-1],x,'g')  #将y进行逆序
plt.xlabel('x')
plt.ylabel('y')
plt.title('title inside 2')
plt.show()</code></pre> 
  <p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504193809349.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWhhbzYy,size_16,color_FFFFFF,t_70"></p> 
  <p>&nbsp;</p> 
  <p>5.动画</p> 
  <pre class="has">
<code class="language-python">%matplotlib notebook  
#在jupyter 中显示动画
from matplotlib.animation import FuncAnimation #引入新模块
fig,ax=plt.subplots()
x=np.arange(0,2*np.pi,0.01)  #数据为0~2PI范围内的正弦曲线
line,=ax.plot(x,np.sin(x))  #line表示列表

#构造自定义动画函数animate,用来更新每一帧上x和y坐标值，参数表示第i帧
def animate(i):
    line.set_ydata(np.sin(x+i/100))
    return line,

#构造开始帧函数init
def init():
    line.set_ydata(np.sin(x))
    return line,

#frame表示动画长度，一次循环所包含的帧数；interval表示更新频率
#blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False
ani=FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=10,blit=False)
plt.show()</code></pre> 
  <p><img alt="" class="has" height="300" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504194132407.gif" width="445"></p> 
  <pre class="has">
<code class="language-python">%matplotlib notebook
from matplotlib import animation#引入新模块
fig,ax=plt.subplots()
x=np.arange(0,2*np.pi,0.01)#数据为0~2PI范围内的正弦曲线
line,=ax.plot(x,np.sin(x))# line表示列表

#构造自定义动画函数animate，用来更新每一帧上x和y坐标值，参数表示第i帧
def animate(i):
    line.set_ydata(np.sin(x+i/100))
    return line,

#构造开始帧函数init
def init():
    line.set_ydata(np.sin(x))
    return line,

# frame表示动画长度，一次循环所包含的帧数；interval表示更新频率 
# blit选择更新所有点，还是仅更新新变化产生的点。应该选True，但mac用户选择False。
ani=animation.FuncAnimation(fig=fig,func=animate,frames=200,init_func=init,interval=20,blit=False)
plt.show()</code></pre> 
  <p><img alt="" class="has" height="287" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504194427548.gif" width="457"></p> 
  <pre class="has">
<code class="language-python">from matplotlib import pyplot as plt
from matplotlib import animation
import numpy as np
fig, ax = plt.subplots()
#我们的数据是一个0~2π内的正弦曲线
x = np.arange(0, 2*np.pi, 0.01)
line, = ax.plot(x, np.sin(x))

#接着，构造自定义动画函数animate，用来更新每一帧上各个x对应的y坐标值，参数表示第i帧
def animate(i):
    line.set_ydata(np.sin(x + i/10.0))
    return line,
#然后，构造开始帧函数init
def init():
    line.set_ydata(np.sin(x))
    return line,
#接下来，我们调用FuncAnimation函数生成动画。参数说明：
#fig 进行动画绘制的figure
#func 自定义动画函数，即传入刚定义的函数animate
#frames 动画长度，一次循环包含的帧数
#init_func 自定义开始帧，即传入刚定义的函数init
#interval 更新频率，以ms计
#blit 选择更新所有点，还是仅更新产生变化的点。应选择True，但mac用户请选择False，否则无法显示动画

ani = animation.FuncAnimation(fig=fig,
                              func=animate,
                              frames=100,
                              init_func=init,
                              interval=20,
                              blit=False)
plt.show()

# #当然，你也可以将动画以mp4格式保存下来，但首先要保证你已经安装了ffmpeg 或者mencoder
# ani.save('basic_animation.mp4', fps=30, extra_args=['-vcodec', 'libx264'])</code></pre> 
  <p><img alt="" class="has" height="276" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190504194611397.gif" width="438"></p> 
  <pre class="has">
<code class="language-python">%matplotlib notebook
import tensorflow as tf #这里不需要吧
import numpy as np 
import matplotlib.pyplot as plt
from matplotlib import animation
fig, ax = plt.subplots()
x =np.arange(0,2*np.pi,0.01)
# 返回的是个列表
line , = ax.plot(x,np.sin(x))
def animate(i):
    # xdata 保持不变， ydata 更新成另外一批数据
    # 将0-100都传进去更新一下，i变化时，y也会变化，更新图像
    line.set_ydata(np.sin(x+i/10))
    return line,

def init():
    line.set_ydata(np.sin(x))
    return line,

# interval 是更新的频率，隔多少毫秒更新一次，这里是隔20ms更新一次
# blit=True,只更新有变化的点
ani = animation.FuncAnimation(fig=fig,func=animate,frames =100,init_func=init,interval =20,blit=False)
plt.show()
</code></pre> 
  <p><img alt="" class="has" height="282" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019050419492171.gif" width="449"></p> 
 </div> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
