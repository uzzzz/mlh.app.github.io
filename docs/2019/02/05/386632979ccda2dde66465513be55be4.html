<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>iOSçª¥æ¢KVOåº•å±‚å®ç°åŸç†ç¯‡ | æœ‰ç»„ç»‡åœ¨ï¼</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="iOSçª¥æ¢KVOåº•å±‚å®ç°åŸç†ç¯‡" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Linuxç¼–ç¨‹ ç‚¹å‡»å³ä¾§å…³æ³¨ï¼Œå…è´¹å…¥é—¨åˆ°ç²¾é€šï¼ ä½œè€…ä¸¨å¤§å…µå¸ƒè±æ©ç‰¹https://www.jianshu.com/p/0aa83ac521ba æœ€è¿‘å°ç¼–å…¬å¸æ‹›è˜ iOS, äºæ˜¯å°ç¼–ä»ç½‘ä¸Šæ‰¾äº†å‡ é“é¢è¯•é¢˜,æ¥è€ƒå¯Ÿå€™é€‰äººiOS å¼€å‘æ–¹é¢çš„æŠ€æœ¯æ°´å¹³,å…¶ä¸­æœ‰ä¸€é“é¢è¯•é¢˜ä¾¿æ˜¯ KVO åº•å±‚å®ç°æ˜¯ä»€ä¹ˆ? å¦‚ä½•æ‰‹åŠ¨å‡ºå‘ KVO? ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ä¼šå‡ºå‘ KVO å—? KVC èµ‹å€¼ä¼šå‡ºå‘ KVO å—? å½“ä½ äº†è§£ KVO å®ç°åŸç†å,è¿™å‡ é“é¢è¯•é¢˜è‡ªç„¶ä¸åœ¨è¯ä¸‹.æ¥ä¸‹æ¥æˆ‘å°†é€šè¿‡ä»£ç å’Œè®²è§£æ¥çª¥æ¢ KVO èƒŒåçš„å¥¥ç§˜. é¦–å…ˆåˆ›å»ºä¸€ä¸ª Person ç±» å†…éƒ¨æœ‰ä¸ª name å±æ€§,ç„¶å åˆ›å»ºp1 å’Œ p2ä¸¤ä¸ªå®ä¾‹å¯¹è±¡,å…¶ä¸­p1æ·»åŠ äº†kvoç›‘å¬,p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬,ç„¶åé‡å†™äº† observeValueForKeyPath æ–¹æ³• ç›‘å¬Person.name å±æ€§å‘ç”Ÿæ”¹å˜æ—¶å€™çš„é€šçŸ¥. ä»æœ¬è´¨ä¸Šæ¥çœ‹ Person ç»™nameèµ‹å€¼çš„æ—¶å€™ è°ƒç”¨çš„æ˜¯ setName æ–¹æ³• ,æ— è®º p1è¿˜æ˜¯p2 è°ƒç”¨çš„ setter æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„,ä¸ºä»€ä¹ˆ p1æ”¹å˜ name å±æ€§å€¼å°±èƒ½æœ‰é€šçŸ¥, p2ç¡®æ²¡æœ‰,è°ƒç”¨çš„ éƒ½æ˜¯åŒä¸€ä¸ª setName:(NSString *)name æ–¹æ³•,åŒºåˆ«æ€ä¹ˆé‚£ä¹ˆå¤§? å°ç¼–çª¥æ¢å°è¯•1 æ¥ä¸‹æ¥å°ç¼–æ‰“å°ä¸‹p1å’Œp2çš„å†…å­˜åœ°å€ çœ‹çœ‹p1å’Œp2å†…å­˜åœ°å€èƒ½ä¸èƒ½ä¸€æ¢ç©¶ç«Ÿ. ä» p1å’Œ p2å†…å­˜åœ°å€ä¸Šä¹Ÿçœ‹ä¸å‡ºæ¥ä»€ä¹ˆä¸œä¸œ. å°ç¼–çª¥æ¢å°è¯•2 æ‰“å° p1å’Œ p2 çš„ class ä¿¡æ¯ what ä»€ä¹ˆ è¾“å‡ºçš„ class éƒ½æ˜¯ Person ç±» ,æ—¢ç„¶åŒä¸€ä¸ªç±» åŒä¸€ä¸ª setter æ–¹æ³•,ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä¸€æ ·å‘¢? å°ç¼–çª¥æ¢å°è¯•3 æ‰“å° object_getClass è¯•è¯•çœ‹ æˆ‘ä»¬éƒ½çŸ¥é“object_getClass(id) æ‰ä¼šè¿”å›è¿™ä¸ªå®ä¾‹å¯¹è±¡çš„çœŸå® class ç±»å‹ ä»€ä¹ˆ , æ·»åŠ  KVO ä¹‹åè¯´å¥½çš„ Person ç±»è·‘å“ªå»äº†, NSKVONotifying_Personæ˜¯ä»€ä¹ˆä¸œä¸œ? ä¸ºäº†è¿›ä¸€æ­¥çª¥æ¢ KVO æ·»åŠ å‰åçš„å˜åŒ– å°ç¼–çª¥æ¢å°è¯•4 æ‰“å° setName æ–¹æ³•å®ç°IMPæŒ‡é’ˆæœ‰æ²¡æœ‰å‘ç”Ÿæ”¹å˜,æˆ‘ä»¬çŸ¥é“åŒä¸€ä¸ªæ–¹æ³•çš„å®ç° IMP åœ°å€æ˜¯ä¸å˜çš„. è¿ setNameæ–¹æ³•éƒ½ä¸ä¸€æ ·äº† , ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿ å°ç¼–ç»å¯¹å¯¹ä¸Šè¾¹çš„ NSKVONotifying_Person å’Œ æ·»åŠ  KVO ä¹‹åçš„ imp æŒ‡é’ˆè¿›è¡Œè¿›ä¸€æ­¥ç ”ç©¶. é¦–å…ˆ åœ¨ lldb ä¸Šè¾“å…¥ imp1å’Œ imp2 å‘ç”Ÿäº† imp1 æ–¹æ³•å®ç°åœ¨ Foundation æ¡†æ¶é‡Œçš„ _NSSetObjectValueAndNotify å‡½æ•°ä¸­ ,è€Œ imp2 åˆ™è°ƒç”¨äº† Person setName æ–¹æ³• ä¹Ÿå°±æ˜¯è¯´æ·»åŠ äº† KVO ä¹‹å p1 ä¿®æ”¹ name å€¼ä¹‹å ä¸å†è°ƒç”¨ Person çš„ setNameæ–¹æ³• ,è€Œ p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬ ä¾ç„¶æ­£å¸¸è°ƒç”¨ setName:æ–¹æ³• ,ç”±æ­¤å¯ä»¥å¾—å‡º p1 æ·»åŠ å®Œ KVO ç›‘å¬å ç³»ç»Ÿä¿®æ”¹äº†é»˜è®¤æ–¹æ³•å®ç°,é‚£ä¹ˆæ—¢ç„¶æ²¡æœ‰è°ƒç”¨ setName: æ–¹æ³• ä¸ºä»€ä¹ˆ p1.name çš„å€¼ä¹Ÿå‘ç”Ÿäº†æ”¹å˜? æ¥ä¸‹æ¥æˆ‘ä»¬å‡†å¤‡å¯¹åˆšæ‰ NSKVONotifying_Person ç±»è¿›è¡Œä¸‹ä¸€æ­¥ç ”ç©¶, NSKVONotifying_Person å’Œ Person æœ‰æ²¡æœ‰å†…åœ¨çš„è”ç³»å‘¢? å°ç¼–çª¥æ¢å°è¯•5 NSKVONotifying_Personå’Œ Person ä¹‹é—´çš„è”ç³»æ—¶ä»€ä¹ˆ é€šè¿‡æ‰“å° NSKVONotifying_Person çš„ superclass &nbsp;å’Œ Person çš„ superclass å¯ä»¥å¾—å‡º, NSKVONotifying_Personæ˜¯ä¸€ä¸ª Person å­ç±»,é‚£ä¹ˆä¸ºä»€ä¹ˆè‹¹æœä¼šåŠ¨æ€åˆ›å»ºè¿™ä¹ˆä¸€ä¸ª å­ç±»å‘¢? NSKVONotifying_Person è¿™ä¸ªå­ç±» è·Ÿ Person å†…éƒ¨æœ‰å“ªäº›ä¸åŒå‘¢ ? è¿™ä¸ªæ—¶å€™ æˆ‘ä»¬å»è¾“å‡ºä¸‹ Person å’Œ NSKVONotifying_Person å†…éƒ¨çš„æ–¹æ³•åˆ—è¡¨ å’Œ å±æ€§åˆ—è¡¨ ,çœ‹çœ‹NSKVONotifying_Person å­ç±»éƒ½æ·»åŠ äº†é‚£äº›æ–¹æ³•å’Œå±æ€§. -&nbsp;(void)viewDidLoad&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;[super&nbsp;viewDidLoad];&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p1&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p2&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å‰:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;&quot;,cls1,cls2);&nbsp;&nbsp;&nbsp;&nbsp;[p1&nbsp;addObserver:self&nbsp;forKeyPath:@&quot;name&quot;&nbsp;options:NSKeyValueObservingOptionNew&nbsp;context:NULL];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);&nbsp;&nbsp;&nbsp;&nbsp;NSString&nbsp;*methodList1&nbsp;=&nbsp;[self&nbsp;printPersonMethods:cls1];&nbsp;&nbsp;&nbsp;&nbsp;NSString&nbsp;*methodList2&nbsp;=&nbsp;[self&nbsp;printPersonMethods:cls2];&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;%@&quot;,methodList1);&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;%@&quot;,methodList2);//&nbsp;&nbsp;NSLog(@&quot;æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;&quot;,cls1,cls2);//&nbsp;&nbsp;id&nbsp;super_cls1&nbsp;=&nbsp;class_getSuperclass(cls1);//&nbsp;&nbsp;id&nbsp;super_cls2&nbsp;=&nbsp;class_getSuperclass(cls2);////&nbsp;&nbsp;NSLog(@&quot;super_cls1&nbsp;=&nbsp;%@&nbsp;,super_cls2&nbsp;=&nbsp;%@&quot;,super_cls1,super_cls2);////&nbsp;&nbsp;p1.name&nbsp;=&nbsp;@&quot;dzb&quot;;//&nbsp;&nbsp;p2.name&nbsp;=&nbsp;@&quot;123&quot;;}-&nbsp;(NSString&nbsp;*)&nbsp;printPersonMethods:(id)obj&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;count&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;*methods&nbsp;=&nbsp;class_copyMethodList([obj&nbsp;class],&amp;count);&nbsp;&nbsp;&nbsp;&nbsp;NSMutableString&nbsp;*methodList&nbsp;=&nbsp;[NSMutableString&nbsp;string];&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:@&quot;[ &quot;];&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&lt;count;&nbsp;i++)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;method&nbsp;=&nbsp;methods[i];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEL&nbsp;sel&nbsp;=&nbsp;method_getName(method);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:@&quot;%@&quot;,NSStringFromSelector(sel)];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:@&quot; &quot;];&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:@&quot;]&quot;];&nbsp;&nbsp;&nbsp;&nbsp;free(methods);&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;methodList;} ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºæ¥ &nbsp;NSKVONotifying_Person å†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ª setName:æ–¹æ³• &nbsp;è¿˜é‡å†™äº† class å’Œ dealloc æ–¹æ³• , _isKVOA, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¤§è‡´çš„å¾—å‡º, p1æ·»åŠ  kVO å runtime åŠ¨æ€çš„ç”Ÿæˆäº†ä¸€ä¸ª &nbsp;NSKVONotifying_Personå­ç±» å¹¶é‡å†™äº† setName æ–¹æ³• ,é‚£ä¹ˆ setName å†…éƒ¨ä¸€å®šæ˜¯åšäº†ä¸€äº›äº‹æƒ…,æ‰ä¼šè§¦å‘ &nbsp;observeValueForKeyPath ç›‘å¬æ–¹æ³•. ç»§ç»­æ¢ç©¶ NSKVONotifying_Person å­ç±» é‡å†™ setName éƒ½åšäº†ä»€ä¹ˆ? å…¶å® setName æ–¹æ³•å†…éƒ¨ æ˜¯è°ƒç”¨äº† Foundation çš„ _NSSetObjectValueAndNotify å‡½æ•° ,åœ¨ _NSSetObjectValueAndNotify å†…éƒ¨ 1é¦–å…ˆä¼šè°ƒç”¨ willChangeValueForKey 2ç„¶åç»™ name å±æ€§èµ‹å€¼ 3 æœ€åè°ƒç”¨ didChangeValueForKey 4æœ€åè°ƒç”¨ observer çš„ observeValueForKeyPath å»å‘Šè¯‰ç›‘å¬å™¨å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜ . ç”±äºè‹¹æœ Foundation æ¡†æ¶æ˜¯ä¸å¼€æºçš„ ,æ‰€ä»¥æˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡é‡å†™Person çš„ &nbsp;willChangeValueForKey &nbsp;å’Œ &nbsp;didChangeValueForKey éªŒè¯æˆ‘ä»¬çš„çŒœæƒ³ . é¦–å…ˆå½“æˆ‘ä»¬æ”¹å˜p1.name çš„å€¼æ—¶ å¹¶ä¸æ˜¯é¦–å…ˆæ‰§è¡Œçš„ setName: è¿™ä¸ªæ–¹æ³• ,è€Œæ˜¯å…ˆè°ƒç”¨äº† &nbsp;willChangeValueForKey &nbsp;å…¶æ¬¡ è°ƒç”¨çˆ¶ç±»çš„ setter æ–¹æ³• å¯¹å±æ€§èµ‹å€¼ ,ç„¶åå†è°ƒç”¨ &nbsp;didChangeValueForKey æ–¹æ³• ,å¹¶åœ¨ didChangeValueForKey å†…éƒ¨ è°ƒç”¨ç›‘å¬å™¨çš„ &nbsp;observeValueForKeyPathæ–¹æ³• å‘Šè¯‰å¤–ç•Œ å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜. è‡³äºé‡å†™äº† dealloc å’Œ class æ–¹æ³• æ˜¯ä¸ºäº†åšä¸€äº› KVO é‡Šæ”¾å†…å­˜ å’Œ éšè—å¤–ç•Œå¯¹äº NSKVONotifying_Person å­ç±»çš„å­˜åœ¨ è¿™å°±æ˜¯æˆ‘ä»¬è°ƒç”¨ [p1 class] å’Œ [p2 class]ç»“æœéƒ½æ˜¾ç¤º Person ç±» ,è®©æˆ‘ä»¬è¯¯ä»¥ä¸º Person æ²¡æœ‰å‘ç”Ÿå˜åŒ– è¡¥å……è¯´æ˜ ,KVC å¯¹å±æ€§èµ‹å€¼æ—¶å€™ æ˜¯ä¼šåœ¨è¿™ä¸ªç±»é‡Œè¾¹ å»æŸ¥æ‰¾ _age &nbsp;isAge setAge setIsAge ç­‰æ–¹æ³•çš„ ,æœ€ç»ˆä¼šè°ƒç”¨å±æ€§çš„ setter æ–¹æ³• ,é‚£ä¹ˆå¦‚æœæ·»åŠ äº† KVO è¿˜æ˜¯ä¼šè¢«è§¦å‘çš„ . ç›¸å è®¾ç½®æˆå‘˜å˜é‡ &nbsp;_age ç”±äºä¸ä¼šè§¦å‘ setter æ–¹æ³• ,å› æ­¤ä¸ä¼šå»è§¦å‘ KVO ç›¸å…³çš„ä»£ç  . &nbsp;æ¨èâ†“â†“â†“&nbsp; é•¿ æŒ‰ å…³ æ³¨ ğŸ‘‰ã€16ä¸ªæŠ€æœ¯å…¬ä¼—å·ã€‘éƒ½åœ¨è¿™é‡Œï¼ æ¶µç›–ï¼šç¨‹åºå‘˜å¤§å’–ã€æºç å…±è¯»ã€ç¨‹åºå‘˜å…±è¯»ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€é»‘å®¢æŠ€æœ¯å’Œç½‘ç»œå®‰å…¨ã€å¤§æ•°æ®ç§‘æŠ€ã€ç¼–ç¨‹å‰ç«¯ã€Javaã€Pythonã€Webç¼–ç¨‹å¼€å‘ã€Androidã€iOSå¼€å‘ã€Linuxã€æ•°æ®åº“ç ”å‘ã€å¹½é»˜ç¨‹åºå‘˜ç­‰ã€‚ ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç‚¹ä¸ª â€œ å¥½çœ‹â€ è¡Œä¸è¡Œ" />
<meta property="og:description" content="Linuxç¼–ç¨‹ ç‚¹å‡»å³ä¾§å…³æ³¨ï¼Œå…è´¹å…¥é—¨åˆ°ç²¾é€šï¼ ä½œè€…ä¸¨å¤§å…µå¸ƒè±æ©ç‰¹https://www.jianshu.com/p/0aa83ac521ba æœ€è¿‘å°ç¼–å…¬å¸æ‹›è˜ iOS, äºæ˜¯å°ç¼–ä»ç½‘ä¸Šæ‰¾äº†å‡ é“é¢è¯•é¢˜,æ¥è€ƒå¯Ÿå€™é€‰äººiOS å¼€å‘æ–¹é¢çš„æŠ€æœ¯æ°´å¹³,å…¶ä¸­æœ‰ä¸€é“é¢è¯•é¢˜ä¾¿æ˜¯ KVO åº•å±‚å®ç°æ˜¯ä»€ä¹ˆ? å¦‚ä½•æ‰‹åŠ¨å‡ºå‘ KVO? ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ä¼šå‡ºå‘ KVO å—? KVC èµ‹å€¼ä¼šå‡ºå‘ KVO å—? å½“ä½ äº†è§£ KVO å®ç°åŸç†å,è¿™å‡ é“é¢è¯•é¢˜è‡ªç„¶ä¸åœ¨è¯ä¸‹.æ¥ä¸‹æ¥æˆ‘å°†é€šè¿‡ä»£ç å’Œè®²è§£æ¥çª¥æ¢ KVO èƒŒåçš„å¥¥ç§˜. é¦–å…ˆåˆ›å»ºä¸€ä¸ª Person ç±» å†…éƒ¨æœ‰ä¸ª name å±æ€§,ç„¶å åˆ›å»ºp1 å’Œ p2ä¸¤ä¸ªå®ä¾‹å¯¹è±¡,å…¶ä¸­p1æ·»åŠ äº†kvoç›‘å¬,p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬,ç„¶åé‡å†™äº† observeValueForKeyPath æ–¹æ³• ç›‘å¬Person.name å±æ€§å‘ç”Ÿæ”¹å˜æ—¶å€™çš„é€šçŸ¥. ä»æœ¬è´¨ä¸Šæ¥çœ‹ Person ç»™nameèµ‹å€¼çš„æ—¶å€™ è°ƒç”¨çš„æ˜¯ setName æ–¹æ³• ,æ— è®º p1è¿˜æ˜¯p2 è°ƒç”¨çš„ setter æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„,ä¸ºä»€ä¹ˆ p1æ”¹å˜ name å±æ€§å€¼å°±èƒ½æœ‰é€šçŸ¥, p2ç¡®æ²¡æœ‰,è°ƒç”¨çš„ éƒ½æ˜¯åŒä¸€ä¸ª setName:(NSString *)name æ–¹æ³•,åŒºåˆ«æ€ä¹ˆé‚£ä¹ˆå¤§? å°ç¼–çª¥æ¢å°è¯•1 æ¥ä¸‹æ¥å°ç¼–æ‰“å°ä¸‹p1å’Œp2çš„å†…å­˜åœ°å€ çœ‹çœ‹p1å’Œp2å†…å­˜åœ°å€èƒ½ä¸èƒ½ä¸€æ¢ç©¶ç«Ÿ. ä» p1å’Œ p2å†…å­˜åœ°å€ä¸Šä¹Ÿçœ‹ä¸å‡ºæ¥ä»€ä¹ˆä¸œä¸œ. å°ç¼–çª¥æ¢å°è¯•2 æ‰“å° p1å’Œ p2 çš„ class ä¿¡æ¯ what ä»€ä¹ˆ è¾“å‡ºçš„ class éƒ½æ˜¯ Person ç±» ,æ—¢ç„¶åŒä¸€ä¸ªç±» åŒä¸€ä¸ª setter æ–¹æ³•,ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä¸€æ ·å‘¢? å°ç¼–çª¥æ¢å°è¯•3 æ‰“å° object_getClass è¯•è¯•çœ‹ æˆ‘ä»¬éƒ½çŸ¥é“object_getClass(id) æ‰ä¼šè¿”å›è¿™ä¸ªå®ä¾‹å¯¹è±¡çš„çœŸå® class ç±»å‹ ä»€ä¹ˆ , æ·»åŠ  KVO ä¹‹åè¯´å¥½çš„ Person ç±»è·‘å“ªå»äº†, NSKVONotifying_Personæ˜¯ä»€ä¹ˆä¸œä¸œ? ä¸ºäº†è¿›ä¸€æ­¥çª¥æ¢ KVO æ·»åŠ å‰åçš„å˜åŒ– å°ç¼–çª¥æ¢å°è¯•4 æ‰“å° setName æ–¹æ³•å®ç°IMPæŒ‡é’ˆæœ‰æ²¡æœ‰å‘ç”Ÿæ”¹å˜,æˆ‘ä»¬çŸ¥é“åŒä¸€ä¸ªæ–¹æ³•çš„å®ç° IMP åœ°å€æ˜¯ä¸å˜çš„. è¿ setNameæ–¹æ³•éƒ½ä¸ä¸€æ ·äº† , ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿ å°ç¼–ç»å¯¹å¯¹ä¸Šè¾¹çš„ NSKVONotifying_Person å’Œ æ·»åŠ  KVO ä¹‹åçš„ imp æŒ‡é’ˆè¿›è¡Œè¿›ä¸€æ­¥ç ”ç©¶. é¦–å…ˆ åœ¨ lldb ä¸Šè¾“å…¥ imp1å’Œ imp2 å‘ç”Ÿäº† imp1 æ–¹æ³•å®ç°åœ¨ Foundation æ¡†æ¶é‡Œçš„ _NSSetObjectValueAndNotify å‡½æ•°ä¸­ ,è€Œ imp2 åˆ™è°ƒç”¨äº† Person setName æ–¹æ³• ä¹Ÿå°±æ˜¯è¯´æ·»åŠ äº† KVO ä¹‹å p1 ä¿®æ”¹ name å€¼ä¹‹å ä¸å†è°ƒç”¨ Person çš„ setNameæ–¹æ³• ,è€Œ p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬ ä¾ç„¶æ­£å¸¸è°ƒç”¨ setName:æ–¹æ³• ,ç”±æ­¤å¯ä»¥å¾—å‡º p1 æ·»åŠ å®Œ KVO ç›‘å¬å ç³»ç»Ÿä¿®æ”¹äº†é»˜è®¤æ–¹æ³•å®ç°,é‚£ä¹ˆæ—¢ç„¶æ²¡æœ‰è°ƒç”¨ setName: æ–¹æ³• ä¸ºä»€ä¹ˆ p1.name çš„å€¼ä¹Ÿå‘ç”Ÿäº†æ”¹å˜? æ¥ä¸‹æ¥æˆ‘ä»¬å‡†å¤‡å¯¹åˆšæ‰ NSKVONotifying_Person ç±»è¿›è¡Œä¸‹ä¸€æ­¥ç ”ç©¶, NSKVONotifying_Person å’Œ Person æœ‰æ²¡æœ‰å†…åœ¨çš„è”ç³»å‘¢? å°ç¼–çª¥æ¢å°è¯•5 NSKVONotifying_Personå’Œ Person ä¹‹é—´çš„è”ç³»æ—¶ä»€ä¹ˆ é€šè¿‡æ‰“å° NSKVONotifying_Person çš„ superclass &nbsp;å’Œ Person çš„ superclass å¯ä»¥å¾—å‡º, NSKVONotifying_Personæ˜¯ä¸€ä¸ª Person å­ç±»,é‚£ä¹ˆä¸ºä»€ä¹ˆè‹¹æœä¼šåŠ¨æ€åˆ›å»ºè¿™ä¹ˆä¸€ä¸ª å­ç±»å‘¢? NSKVONotifying_Person è¿™ä¸ªå­ç±» è·Ÿ Person å†…éƒ¨æœ‰å“ªäº›ä¸åŒå‘¢ ? è¿™ä¸ªæ—¶å€™ æˆ‘ä»¬å»è¾“å‡ºä¸‹ Person å’Œ NSKVONotifying_Person å†…éƒ¨çš„æ–¹æ³•åˆ—è¡¨ å’Œ å±æ€§åˆ—è¡¨ ,çœ‹çœ‹NSKVONotifying_Person å­ç±»éƒ½æ·»åŠ äº†é‚£äº›æ–¹æ³•å’Œå±æ€§. -&nbsp;(void)viewDidLoad&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;[super&nbsp;viewDidLoad];&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p1&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p2&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å‰:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;&quot;,cls1,cls2);&nbsp;&nbsp;&nbsp;&nbsp;[p1&nbsp;addObserver:self&nbsp;forKeyPath:@&quot;name&quot;&nbsp;options:NSKeyValueObservingOptionNew&nbsp;context:NULL];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);&nbsp;&nbsp;&nbsp;&nbsp;NSString&nbsp;*methodList1&nbsp;=&nbsp;[self&nbsp;printPersonMethods:cls1];&nbsp;&nbsp;&nbsp;&nbsp;NSString&nbsp;*methodList2&nbsp;=&nbsp;[self&nbsp;printPersonMethods:cls2];&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;%@&quot;,methodList1);&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;%@&quot;,methodList2);//&nbsp;&nbsp;NSLog(@&quot;æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;&quot;,cls1,cls2);//&nbsp;&nbsp;id&nbsp;super_cls1&nbsp;=&nbsp;class_getSuperclass(cls1);//&nbsp;&nbsp;id&nbsp;super_cls2&nbsp;=&nbsp;class_getSuperclass(cls2);////&nbsp;&nbsp;NSLog(@&quot;super_cls1&nbsp;=&nbsp;%@&nbsp;,super_cls2&nbsp;=&nbsp;%@&quot;,super_cls1,super_cls2);////&nbsp;&nbsp;p1.name&nbsp;=&nbsp;@&quot;dzb&quot;;//&nbsp;&nbsp;p2.name&nbsp;=&nbsp;@&quot;123&quot;;}-&nbsp;(NSString&nbsp;*)&nbsp;printPersonMethods:(id)obj&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;count&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;*methods&nbsp;=&nbsp;class_copyMethodList([obj&nbsp;class],&amp;count);&nbsp;&nbsp;&nbsp;&nbsp;NSMutableString&nbsp;*methodList&nbsp;=&nbsp;[NSMutableString&nbsp;string];&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:@&quot;[ &quot;];&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&lt;count;&nbsp;i++)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;method&nbsp;=&nbsp;methods[i];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEL&nbsp;sel&nbsp;=&nbsp;method_getName(method);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:@&quot;%@&quot;,NSStringFromSelector(sel)];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:@&quot; &quot;];&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:@&quot;]&quot;];&nbsp;&nbsp;&nbsp;&nbsp;free(methods);&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;methodList;} ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºæ¥ &nbsp;NSKVONotifying_Person å†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ª setName:æ–¹æ³• &nbsp;è¿˜é‡å†™äº† class å’Œ dealloc æ–¹æ³• , _isKVOA, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¤§è‡´çš„å¾—å‡º, p1æ·»åŠ  kVO å runtime åŠ¨æ€çš„ç”Ÿæˆäº†ä¸€ä¸ª &nbsp;NSKVONotifying_Personå­ç±» å¹¶é‡å†™äº† setName æ–¹æ³• ,é‚£ä¹ˆ setName å†…éƒ¨ä¸€å®šæ˜¯åšäº†ä¸€äº›äº‹æƒ…,æ‰ä¼šè§¦å‘ &nbsp;observeValueForKeyPath ç›‘å¬æ–¹æ³•. ç»§ç»­æ¢ç©¶ NSKVONotifying_Person å­ç±» é‡å†™ setName éƒ½åšäº†ä»€ä¹ˆ? å…¶å® setName æ–¹æ³•å†…éƒ¨ æ˜¯è°ƒç”¨äº† Foundation çš„ _NSSetObjectValueAndNotify å‡½æ•° ,åœ¨ _NSSetObjectValueAndNotify å†…éƒ¨ 1é¦–å…ˆä¼šè°ƒç”¨ willChangeValueForKey 2ç„¶åç»™ name å±æ€§èµ‹å€¼ 3 æœ€åè°ƒç”¨ didChangeValueForKey 4æœ€åè°ƒç”¨ observer çš„ observeValueForKeyPath å»å‘Šè¯‰ç›‘å¬å™¨å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜ . ç”±äºè‹¹æœ Foundation æ¡†æ¶æ˜¯ä¸å¼€æºçš„ ,æ‰€ä»¥æˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡é‡å†™Person çš„ &nbsp;willChangeValueForKey &nbsp;å’Œ &nbsp;didChangeValueForKey éªŒè¯æˆ‘ä»¬çš„çŒœæƒ³ . é¦–å…ˆå½“æˆ‘ä»¬æ”¹å˜p1.name çš„å€¼æ—¶ å¹¶ä¸æ˜¯é¦–å…ˆæ‰§è¡Œçš„ setName: è¿™ä¸ªæ–¹æ³• ,è€Œæ˜¯å…ˆè°ƒç”¨äº† &nbsp;willChangeValueForKey &nbsp;å…¶æ¬¡ è°ƒç”¨çˆ¶ç±»çš„ setter æ–¹æ³• å¯¹å±æ€§èµ‹å€¼ ,ç„¶åå†è°ƒç”¨ &nbsp;didChangeValueForKey æ–¹æ³• ,å¹¶åœ¨ didChangeValueForKey å†…éƒ¨ è°ƒç”¨ç›‘å¬å™¨çš„ &nbsp;observeValueForKeyPathæ–¹æ³• å‘Šè¯‰å¤–ç•Œ å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜. è‡³äºé‡å†™äº† dealloc å’Œ class æ–¹æ³• æ˜¯ä¸ºäº†åšä¸€äº› KVO é‡Šæ”¾å†…å­˜ å’Œ éšè—å¤–ç•Œå¯¹äº NSKVONotifying_Person å­ç±»çš„å­˜åœ¨ è¿™å°±æ˜¯æˆ‘ä»¬è°ƒç”¨ [p1 class] å’Œ [p2 class]ç»“æœéƒ½æ˜¾ç¤º Person ç±» ,è®©æˆ‘ä»¬è¯¯ä»¥ä¸º Person æ²¡æœ‰å‘ç”Ÿå˜åŒ– è¡¥å……è¯´æ˜ ,KVC å¯¹å±æ€§èµ‹å€¼æ—¶å€™ æ˜¯ä¼šåœ¨è¿™ä¸ªç±»é‡Œè¾¹ å»æŸ¥æ‰¾ _age &nbsp;isAge setAge setIsAge ç­‰æ–¹æ³•çš„ ,æœ€ç»ˆä¼šè°ƒç”¨å±æ€§çš„ setter æ–¹æ³• ,é‚£ä¹ˆå¦‚æœæ·»åŠ äº† KVO è¿˜æ˜¯ä¼šè¢«è§¦å‘çš„ . ç›¸å è®¾ç½®æˆå‘˜å˜é‡ &nbsp;_age ç”±äºä¸ä¼šè§¦å‘ setter æ–¹æ³• ,å› æ­¤ä¸ä¼šå»è§¦å‘ KVO ç›¸å…³çš„ä»£ç  . &nbsp;æ¨èâ†“â†“â†“&nbsp; é•¿ æŒ‰ å…³ æ³¨ ğŸ‘‰ã€16ä¸ªæŠ€æœ¯å…¬ä¼—å·ã€‘éƒ½åœ¨è¿™é‡Œï¼ æ¶µç›–ï¼šç¨‹åºå‘˜å¤§å’–ã€æºç å…±è¯»ã€ç¨‹åºå‘˜å…±è¯»ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€é»‘å®¢æŠ€æœ¯å’Œç½‘ç»œå®‰å…¨ã€å¤§æ•°æ®ç§‘æŠ€ã€ç¼–ç¨‹å‰ç«¯ã€Javaã€Pythonã€Webç¼–ç¨‹å¼€å‘ã€Androidã€iOSå¼€å‘ã€Linuxã€æ•°æ®åº“ç ”å‘ã€å¹½é»˜ç¨‹åºå‘˜ç­‰ã€‚ ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç‚¹ä¸ª â€œ å¥½çœ‹â€ è¡Œä¸è¡Œ" />
<meta property="og:site_name" content="æœ‰ç»„ç»‡åœ¨ï¼" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-02-05T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"Linuxç¼–ç¨‹ ç‚¹å‡»å³ä¾§å…³æ³¨ï¼Œå…è´¹å…¥é—¨åˆ°ç²¾é€šï¼ ä½œè€…ä¸¨å¤§å…µå¸ƒè±æ©ç‰¹https://www.jianshu.com/p/0aa83ac521ba æœ€è¿‘å°ç¼–å…¬å¸æ‹›è˜ iOS, äºæ˜¯å°ç¼–ä»ç½‘ä¸Šæ‰¾äº†å‡ é“é¢è¯•é¢˜,æ¥è€ƒå¯Ÿå€™é€‰äººiOS å¼€å‘æ–¹é¢çš„æŠ€æœ¯æ°´å¹³,å…¶ä¸­æœ‰ä¸€é“é¢è¯•é¢˜ä¾¿æ˜¯ KVO åº•å±‚å®ç°æ˜¯ä»€ä¹ˆ? å¦‚ä½•æ‰‹åŠ¨å‡ºå‘ KVO? ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ä¼šå‡ºå‘ KVO å—? KVC èµ‹å€¼ä¼šå‡ºå‘ KVO å—? å½“ä½ äº†è§£ KVO å®ç°åŸç†å,è¿™å‡ é“é¢è¯•é¢˜è‡ªç„¶ä¸åœ¨è¯ä¸‹.æ¥ä¸‹æ¥æˆ‘å°†é€šè¿‡ä»£ç å’Œè®²è§£æ¥çª¥æ¢ KVO èƒŒåçš„å¥¥ç§˜. é¦–å…ˆåˆ›å»ºä¸€ä¸ª Person ç±» å†…éƒ¨æœ‰ä¸ª name å±æ€§,ç„¶å åˆ›å»ºp1 å’Œ p2ä¸¤ä¸ªå®ä¾‹å¯¹è±¡,å…¶ä¸­p1æ·»åŠ äº†kvoç›‘å¬,p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬,ç„¶åé‡å†™äº† observeValueForKeyPath æ–¹æ³• ç›‘å¬Person.name å±æ€§å‘ç”Ÿæ”¹å˜æ—¶å€™çš„é€šçŸ¥. ä»æœ¬è´¨ä¸Šæ¥çœ‹ Person ç»™nameèµ‹å€¼çš„æ—¶å€™ è°ƒç”¨çš„æ˜¯ setName æ–¹æ³• ,æ— è®º p1è¿˜æ˜¯p2 è°ƒç”¨çš„ setter æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„,ä¸ºä»€ä¹ˆ p1æ”¹å˜ name å±æ€§å€¼å°±èƒ½æœ‰é€šçŸ¥, p2ç¡®æ²¡æœ‰,è°ƒç”¨çš„ éƒ½æ˜¯åŒä¸€ä¸ª setName:(NSString *)name æ–¹æ³•,åŒºåˆ«æ€ä¹ˆé‚£ä¹ˆå¤§? å°ç¼–çª¥æ¢å°è¯•1 æ¥ä¸‹æ¥å°ç¼–æ‰“å°ä¸‹p1å’Œp2çš„å†…å­˜åœ°å€ çœ‹çœ‹p1å’Œp2å†…å­˜åœ°å€èƒ½ä¸èƒ½ä¸€æ¢ç©¶ç«Ÿ. ä» p1å’Œ p2å†…å­˜åœ°å€ä¸Šä¹Ÿçœ‹ä¸å‡ºæ¥ä»€ä¹ˆä¸œä¸œ. å°ç¼–çª¥æ¢å°è¯•2 æ‰“å° p1å’Œ p2 çš„ class ä¿¡æ¯ what ä»€ä¹ˆ è¾“å‡ºçš„ class éƒ½æ˜¯ Person ç±» ,æ—¢ç„¶åŒä¸€ä¸ªç±» åŒä¸€ä¸ª setter æ–¹æ³•,ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä¸€æ ·å‘¢? å°ç¼–çª¥æ¢å°è¯•3 æ‰“å° object_getClass è¯•è¯•çœ‹ æˆ‘ä»¬éƒ½çŸ¥é“object_getClass(id) æ‰ä¼šè¿”å›è¿™ä¸ªå®ä¾‹å¯¹è±¡çš„çœŸå® class ç±»å‹ ä»€ä¹ˆ , æ·»åŠ  KVO ä¹‹åè¯´å¥½çš„ Person ç±»è·‘å“ªå»äº†, NSKVONotifying_Personæ˜¯ä»€ä¹ˆä¸œä¸œ? ä¸ºäº†è¿›ä¸€æ­¥çª¥æ¢ KVO æ·»åŠ å‰åçš„å˜åŒ– å°ç¼–çª¥æ¢å°è¯•4 æ‰“å° setName æ–¹æ³•å®ç°IMPæŒ‡é’ˆæœ‰æ²¡æœ‰å‘ç”Ÿæ”¹å˜,æˆ‘ä»¬çŸ¥é“åŒä¸€ä¸ªæ–¹æ³•çš„å®ç° IMP åœ°å€æ˜¯ä¸å˜çš„. è¿ setNameæ–¹æ³•éƒ½ä¸ä¸€æ ·äº† , ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿ å°ç¼–ç»å¯¹å¯¹ä¸Šè¾¹çš„ NSKVONotifying_Person å’Œ æ·»åŠ  KVO ä¹‹åçš„ imp æŒ‡é’ˆè¿›è¡Œè¿›ä¸€æ­¥ç ”ç©¶. é¦–å…ˆ åœ¨ lldb ä¸Šè¾“å…¥ imp1å’Œ imp2 å‘ç”Ÿäº† imp1 æ–¹æ³•å®ç°åœ¨ Foundation æ¡†æ¶é‡Œçš„ _NSSetObjectValueAndNotify å‡½æ•°ä¸­ ,è€Œ imp2 åˆ™è°ƒç”¨äº† Person setName æ–¹æ³• ä¹Ÿå°±æ˜¯è¯´æ·»åŠ äº† KVO ä¹‹å p1 ä¿®æ”¹ name å€¼ä¹‹å ä¸å†è°ƒç”¨ Person çš„ setNameæ–¹æ³• ,è€Œ p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬ ä¾ç„¶æ­£å¸¸è°ƒç”¨ setName:æ–¹æ³• ,ç”±æ­¤å¯ä»¥å¾—å‡º p1 æ·»åŠ å®Œ KVO ç›‘å¬å ç³»ç»Ÿä¿®æ”¹äº†é»˜è®¤æ–¹æ³•å®ç°,é‚£ä¹ˆæ—¢ç„¶æ²¡æœ‰è°ƒç”¨ setName: æ–¹æ³• ä¸ºä»€ä¹ˆ p1.name çš„å€¼ä¹Ÿå‘ç”Ÿäº†æ”¹å˜? æ¥ä¸‹æ¥æˆ‘ä»¬å‡†å¤‡å¯¹åˆšæ‰ NSKVONotifying_Person ç±»è¿›è¡Œä¸‹ä¸€æ­¥ç ”ç©¶, NSKVONotifying_Person å’Œ Person æœ‰æ²¡æœ‰å†…åœ¨çš„è”ç³»å‘¢? å°ç¼–çª¥æ¢å°è¯•5 NSKVONotifying_Personå’Œ Person ä¹‹é—´çš„è”ç³»æ—¶ä»€ä¹ˆ é€šè¿‡æ‰“å° NSKVONotifying_Person çš„ superclass &nbsp;å’Œ Person çš„ superclass å¯ä»¥å¾—å‡º, NSKVONotifying_Personæ˜¯ä¸€ä¸ª Person å­ç±»,é‚£ä¹ˆä¸ºä»€ä¹ˆè‹¹æœä¼šåŠ¨æ€åˆ›å»ºè¿™ä¹ˆä¸€ä¸ª å­ç±»å‘¢? NSKVONotifying_Person è¿™ä¸ªå­ç±» è·Ÿ Person å†…éƒ¨æœ‰å“ªäº›ä¸åŒå‘¢ ? è¿™ä¸ªæ—¶å€™ æˆ‘ä»¬å»è¾“å‡ºä¸‹ Person å’Œ NSKVONotifying_Person å†…éƒ¨çš„æ–¹æ³•åˆ—è¡¨ å’Œ å±æ€§åˆ—è¡¨ ,çœ‹çœ‹NSKVONotifying_Person å­ç±»éƒ½æ·»åŠ äº†é‚£äº›æ–¹æ³•å’Œå±æ€§. -&nbsp;(void)viewDidLoad&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;[super&nbsp;viewDidLoad];&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p1&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p2&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å‰:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;&quot;,cls1,cls2);&nbsp;&nbsp;&nbsp;&nbsp;[p1&nbsp;addObserver:self&nbsp;forKeyPath:@&quot;name&quot;&nbsp;options:NSKeyValueObservingOptionNew&nbsp;context:NULL];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);&nbsp;&nbsp;&nbsp;&nbsp;NSString&nbsp;*methodList1&nbsp;=&nbsp;[self&nbsp;printPersonMethods:cls1];&nbsp;&nbsp;&nbsp;&nbsp;NSString&nbsp;*methodList2&nbsp;=&nbsp;[self&nbsp;printPersonMethods:cls2];&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;%@&quot;,methodList1);&nbsp;&nbsp;&nbsp;&nbsp;NSLog(@&quot;%@&quot;,methodList2);//&nbsp;&nbsp;NSLog(@&quot;æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;&quot;,cls1,cls2);//&nbsp;&nbsp;id&nbsp;super_cls1&nbsp;=&nbsp;class_getSuperclass(cls1);//&nbsp;&nbsp;id&nbsp;super_cls2&nbsp;=&nbsp;class_getSuperclass(cls2);////&nbsp;&nbsp;NSLog(@&quot;super_cls1&nbsp;=&nbsp;%@&nbsp;,super_cls2&nbsp;=&nbsp;%@&quot;,super_cls1,super_cls2);////&nbsp;&nbsp;p1.name&nbsp;=&nbsp;@&quot;dzb&quot;;//&nbsp;&nbsp;p2.name&nbsp;=&nbsp;@&quot;123&quot;;}-&nbsp;(NSString&nbsp;*)&nbsp;printPersonMethods:(id)obj&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;count&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;*methods&nbsp;=&nbsp;class_copyMethodList([obj&nbsp;class],&amp;count);&nbsp;&nbsp;&nbsp;&nbsp;NSMutableString&nbsp;*methodList&nbsp;=&nbsp;[NSMutableString&nbsp;string];&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:@&quot;[ &quot;];&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&lt;count;&nbsp;i++)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;method&nbsp;=&nbsp;methods[i];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEL&nbsp;sel&nbsp;=&nbsp;method_getName(method);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:@&quot;%@&quot;,NSStringFromSelector(sel)];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:@&quot; &quot;];&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:@&quot;]&quot;];&nbsp;&nbsp;&nbsp;&nbsp;free(methods);&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;methodList;} ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºæ¥ &nbsp;NSKVONotifying_Person å†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ª setName:æ–¹æ³• &nbsp;è¿˜é‡å†™äº† class å’Œ dealloc æ–¹æ³• , _isKVOA, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¤§è‡´çš„å¾—å‡º, p1æ·»åŠ  kVO å runtime åŠ¨æ€çš„ç”Ÿæˆäº†ä¸€ä¸ª &nbsp;NSKVONotifying_Personå­ç±» å¹¶é‡å†™äº† setName æ–¹æ³• ,é‚£ä¹ˆ setName å†…éƒ¨ä¸€å®šæ˜¯åšäº†ä¸€äº›äº‹æƒ…,æ‰ä¼šè§¦å‘ &nbsp;observeValueForKeyPath ç›‘å¬æ–¹æ³•. ç»§ç»­æ¢ç©¶ NSKVONotifying_Person å­ç±» é‡å†™ setName éƒ½åšäº†ä»€ä¹ˆ? å…¶å® setName æ–¹æ³•å†…éƒ¨ æ˜¯è°ƒç”¨äº† Foundation çš„ _NSSetObjectValueAndNotify å‡½æ•° ,åœ¨ _NSSetObjectValueAndNotify å†…éƒ¨ 1é¦–å…ˆä¼šè°ƒç”¨ willChangeValueForKey 2ç„¶åç»™ name å±æ€§èµ‹å€¼ 3 æœ€åè°ƒç”¨ didChangeValueForKey 4æœ€åè°ƒç”¨ observer çš„ observeValueForKeyPath å»å‘Šè¯‰ç›‘å¬å™¨å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜ . ç”±äºè‹¹æœ Foundation æ¡†æ¶æ˜¯ä¸å¼€æºçš„ ,æ‰€ä»¥æˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡é‡å†™Person çš„ &nbsp;willChangeValueForKey &nbsp;å’Œ &nbsp;didChangeValueForKey éªŒè¯æˆ‘ä»¬çš„çŒœæƒ³ . é¦–å…ˆå½“æˆ‘ä»¬æ”¹å˜p1.name çš„å€¼æ—¶ å¹¶ä¸æ˜¯é¦–å…ˆæ‰§è¡Œçš„ setName: è¿™ä¸ªæ–¹æ³• ,è€Œæ˜¯å…ˆè°ƒç”¨äº† &nbsp;willChangeValueForKey &nbsp;å…¶æ¬¡ è°ƒç”¨çˆ¶ç±»çš„ setter æ–¹æ³• å¯¹å±æ€§èµ‹å€¼ ,ç„¶åå†è°ƒç”¨ &nbsp;didChangeValueForKey æ–¹æ³• ,å¹¶åœ¨ didChangeValueForKey å†…éƒ¨ è°ƒç”¨ç›‘å¬å™¨çš„ &nbsp;observeValueForKeyPathæ–¹æ³• å‘Šè¯‰å¤–ç•Œ å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜. è‡³äºé‡å†™äº† dealloc å’Œ class æ–¹æ³• æ˜¯ä¸ºäº†åšä¸€äº› KVO é‡Šæ”¾å†…å­˜ å’Œ éšè—å¤–ç•Œå¯¹äº NSKVONotifying_Person å­ç±»çš„å­˜åœ¨ è¿™å°±æ˜¯æˆ‘ä»¬è°ƒç”¨ [p1 class] å’Œ [p2 class]ç»“æœéƒ½æ˜¾ç¤º Person ç±» ,è®©æˆ‘ä»¬è¯¯ä»¥ä¸º Person æ²¡æœ‰å‘ç”Ÿå˜åŒ– è¡¥å……è¯´æ˜ ,KVC å¯¹å±æ€§èµ‹å€¼æ—¶å€™ æ˜¯ä¼šåœ¨è¿™ä¸ªç±»é‡Œè¾¹ å»æŸ¥æ‰¾ _age &nbsp;isAge setAge setIsAge ç­‰æ–¹æ³•çš„ ,æœ€ç»ˆä¼šè°ƒç”¨å±æ€§çš„ setter æ–¹æ³• ,é‚£ä¹ˆå¦‚æœæ·»åŠ äº† KVO è¿˜æ˜¯ä¼šè¢«è§¦å‘çš„ . ç›¸å è®¾ç½®æˆå‘˜å˜é‡ &nbsp;_age ç”±äºä¸ä¼šè§¦å‘ setter æ–¹æ³• ,å› æ­¤ä¸ä¼šå»è§¦å‘ KVO ç›¸å…³çš„ä»£ç  . &nbsp;æ¨èâ†“â†“â†“&nbsp; é•¿ æŒ‰ å…³ æ³¨ ğŸ‘‰ã€16ä¸ªæŠ€æœ¯å…¬ä¼—å·ã€‘éƒ½åœ¨è¿™é‡Œï¼ æ¶µç›–ï¼šç¨‹åºå‘˜å¤§å’–ã€æºç å…±è¯»ã€ç¨‹åºå‘˜å…±è¯»ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€é»‘å®¢æŠ€æœ¯å’Œç½‘ç»œå®‰å…¨ã€å¤§æ•°æ®ç§‘æŠ€ã€ç¼–ç¨‹å‰ç«¯ã€Javaã€Pythonã€Webç¼–ç¨‹å¼€å‘ã€Androidã€iOSå¼€å‘ã€Linuxã€æ•°æ®åº“ç ”å‘ã€å¹½é»˜ç¨‹åºå‘˜ç­‰ã€‚ ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç‚¹ä¸ª â€œ å¥½çœ‹â€ è¡Œä¸è¡Œ","@type":"BlogPosting","url":"/2019/02/05/386632979ccda2dde66465513be55be4.html","headline":"iOSçª¥æ¢KVOåº•å±‚å®ç°åŸç†ç¯‡","dateModified":"2019-02-05T00:00:00+08:00","datePublished":"2019-02-05T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2019/02/05/386632979ccda2dde66465513be55be4.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>iOSçª¥æ¢KVOåº•å±‚å®ç°åŸç†ç¯‡</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>æŸšå­ç¤¾åŒº</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div class="htmledit_views" id="content_views"> 
  <div class="rich_media_content" id="js_content"> 
   <p style="text-align:center;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/XUfq62QbuNhyG8Y9IxZUNMLyjv7k7dsq3bia9CRMmdkOM1WyLYEHlib4MFfrqRE97iaUqJ7NwhZEoHu0U8NCXWzsA/640?wx_fmt=gif" alt="640?wx_fmt=gif"></p>
   <p style="min-height:1em;text-align:center;"><a href="https://mp.weixin.qq.com/s?__biz=MzU2MzcxNzgwMg==&amp;mid=2247483650&amp;idx=3&amp;sn=7d8d32410010e2f58a8b0e9b15fa23ec&amp;scene=21#wechat_redirect" rel="nofollow"><span class="js_jump_icon h5_image_link"><img style="letter-spacing:.544px;text-align:justify;color:rgb(62,62,62);width:76px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/XUfq62QbuNiaFZIbV1icByYIGKRlUcFt6IBMGhWJcyxibORgs6MEmSnJlA3ibibR7ibpudwZAbFZdqISttPaQTBkPPtQ/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></span></a></p>
   <a href="https://mp.weixin.qq.com/s?__biz=MzU2MzcxNzgwMg==&amp;mid=2247483650&amp;idx=3&amp;sn=7d8d32410010e2f58a8b0e9b15fa23ec&amp;scene=21#wechat_redirect" rel="nofollow"><span style="font-family:'å®‹ä½“', SimSun;"><strong><span style="letter-spacing:.544px;color:rgb(31,73,125);"><strong>Linuxç¼–ç¨‹</strong></span></strong></span></a>
   <span style="font-family:'é»‘ä½“', SimHei;"><strong><span style="letter-spacing:.544px;color:rgb(31,73,125);"></span></strong><strong><span style="letter-spacing:.544px;color:rgb(31,73,125);"></span></strong><strong><span style="letter-spacing:.544px;color:rgb(31,73,125);"></span></strong></span>
   <a href="https://mp.weixin.qq.com/s?__biz=MzU2MzcxNzgwMg==&amp;mid=2247483650&amp;idx=3&amp;sn=7d8d32410010e2f58a8b0e9b15fa23ec&amp;scene=21#wechat_redirect" rel="nofollow"><span style="letter-spacing:.544px;color:rgb(165,165,165);font-family:'é»‘ä½“', SimHei;"><span>ç‚¹å‡»å³ä¾§å…³æ³¨ï¼Œå…è´¹å…¥é—¨åˆ°ç²¾é€šï¼</span></span></a>
   <a href="https://mp.weixin.qq.com/s?__biz=MzU2MzcxNzgwMg==&amp;mid=2247483650&amp;idx=3&amp;sn=7d8d32410010e2f58a8b0e9b15fa23ec&amp;scene=21#wechat_redirect" rel="nofollow"><span class="js_jump_icon h5_image_link"><img style="width:56px;" title="1081255447.jpg" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/XUfq62QbuNiaFZIbV1icByYIGKRlUcFt6IldAicZsKdD8KXBZkWQz1eHWULt7Sy2XUdKWbFt8oY6f6nL5deCuF9yg/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></span></a>
   <p><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:14px;color:rgb(136,136,136);"><span style="font-size:14px;letter-spacing:1px;line-height:34.1333px;">ä½œè€…ä¸¨å¤§å…µå¸ƒè±æ©ç‰¹</span><br style="color:rgb(74,74,74);font-size:16px;letter-spacing:1px;line-height:34.1333px;"><span style="font-size:14px;letter-spacing:1px;line-height:34.1333px;">https://www.jianshu.com/p/0aa83ac521ba</span></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><span style="color:rgb(74,74,74);font-size:16px;letter-spacing:1px;line-height:34.1333px;"><br></span></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">æœ€è¿‘å°ç¼–å…¬å¸æ‹›è˜ iOS, äºæ˜¯å°ç¼–ä»ç½‘ä¸Šæ‰¾äº†å‡ é“é¢è¯•é¢˜,æ¥è€ƒå¯Ÿå€™é€‰äººiOS å¼€å‘æ–¹é¢çš„æŠ€æœ¯æ°´å¹³,å…¶ä¸­æœ‰ä¸€é“é¢è¯•é¢˜ä¾¿æ˜¯</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br><strong>KVO åº•å±‚å®ç°æ˜¯ä»€ä¹ˆ?</strong></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br><strong>å¦‚ä½•æ‰‹åŠ¨å‡ºå‘ KVO?</strong></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br><strong>ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ä¼šå‡ºå‘ KVO å—?</strong></span></p>
   <p style="letter-spacing:1px;"><strong><span style="font-size:16px;color:rgb(74,74,74);"><br>KVC èµ‹å€¼ä¼šå‡ºå‘ KVO å—?</span></strong></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>å½“ä½ äº†è§£ KVO å®ç°åŸç†å,è¿™å‡ é“é¢è¯•é¢˜è‡ªç„¶ä¸åœ¨è¯ä¸‹.æ¥ä¸‹æ¥æˆ‘å°†é€šè¿‡ä»£ç å’Œè®²è§£æ¥çª¥æ¢ KVO èƒŒåçš„å¥¥ç§˜.</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCAp1O5jt3gDcCib7TjMXovsqVFBAFmGyBdsNiaJ0Ly6oqADNXXJ4Lh0icB2w/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">é¦–å…ˆåˆ›å»ºä¸€ä¸ª Person ç±» å†…éƒ¨æœ‰ä¸ª name å±æ€§,ç„¶å åˆ›å»ºp1 å’Œ p2ä¸¤ä¸ªå®ä¾‹å¯¹è±¡,å…¶ä¸­p1æ·»åŠ äº†kvoç›‘å¬,p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬,ç„¶åé‡å†™äº† observeValueForKeyPath æ–¹æ³• ç›‘å¬Person.name å±æ€§å‘ç”Ÿæ”¹å˜æ—¶å€™çš„é€šçŸ¥.</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApeib0HHYPgsBFnlvRjicz6R51jGE7FSk7Nzrv6awOXNF4uXEvKCYCbibNA/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ä»æœ¬è´¨ä¸Šæ¥çœ‹ Person ç»™nameèµ‹å€¼çš„æ—¶å€™ è°ƒç”¨çš„æ˜¯ setName æ–¹æ³• ,æ— è®º p1è¿˜æ˜¯p2 è°ƒç”¨çš„ setter æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„,ä¸ºä»€ä¹ˆ p1æ”¹å˜ name å±æ€§å€¼å°±èƒ½æœ‰é€šçŸ¥, p2ç¡®æ²¡æœ‰,è°ƒç”¨çš„ éƒ½æ˜¯åŒä¸€ä¸ª setName:(NSString *)name æ–¹æ³•,åŒºåˆ«æ€ä¹ˆé‚£ä¹ˆå¤§?</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><img class="__bg_gif" style="color:rgb(0,128,255);font-family:'å®‹ä½“';letter-spacing:1px;font-size:8px;text-align:center;vertical-align:middle;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/IwiaNBuWUDUw4OUxv50sClowAsFgibBOT8DicW3x9nlUu6buibjSVPyf3vst4EuG4dZOZcB2P62icZnyEMeP8eqoYog/640?wx_fmt=gif" alt="640?wx_fmt=gif"></span><span style="font-size:16px;color:rgb(0,82,255);">å°ç¼–çª¥æ¢å°è¯•1</span></p>
   <p><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">æ¥ä¸‹æ¥å°ç¼–æ‰“å°ä¸‹p1å’Œp2çš„å†…å­˜åœ°å€ çœ‹çœ‹p1å’Œp2å†…å­˜åœ°å€èƒ½ä¸èƒ½ä¸€æ¢ç©¶ç«Ÿ.</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApJu5jsK08eVUMKXviaACCfR382Bk1oqNWpG9dFIfXN3zibwuJQVrg1u5g/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ä» p1å’Œ p2å†…å­˜åœ°å€ä¸Šä¹Ÿçœ‹ä¸å‡ºæ¥ä»€ä¹ˆä¸œä¸œ.</span></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(0,82,255);"><img class="__bg_gif" style="color:rgb(0,128,255);font-family:'å®‹ä½“';letter-spacing:1px;font-size:8px;text-align:center;vertical-align:middle;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/IwiaNBuWUDUw4OUxv50sClowAsFgibBOT8DicW3x9nlUu6buibjSVPyf3vst4EuG4dZOZcB2P62icZnyEMeP8eqoYog/640?wx_fmt=gif" alt="640?wx_fmt=gif">å°ç¼–çª¥æ¢å°è¯•2 æ‰“å° p1å’Œ p2 çš„ class ä¿¡æ¯</span></p>
   <p><br></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApsqhscSbsicJhicrIgadicMcwiaC9wsNmrlRiclav19BT32tlnnse4ST3yMw/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">what ä»€ä¹ˆ è¾“å‡ºçš„ class éƒ½æ˜¯ Person ç±» ,æ—¢ç„¶åŒä¸€ä¸ªç±» åŒä¸€ä¸ª setter æ–¹æ³•,ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä¸€æ ·å‘¢?</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">å°ç¼–çª¥æ¢å°è¯•3 æ‰“å° object_getClass è¯•è¯•çœ‹</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>æˆ‘ä»¬éƒ½çŸ¥é“object_getClass(id) æ‰ä¼šè¿”å›è¿™ä¸ªå®ä¾‹å¯¹è±¡çš„çœŸå® class ç±»å‹</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApDEcHDdwP958WjOrVnloH6yw7FA0IWY57QnJn9e5HIKfMicgoGHzeaIw/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ä»€ä¹ˆ , æ·»åŠ  KVO ä¹‹åè¯´å¥½çš„ Person ç±»è·‘å“ªå»äº†, NSKVONotifying_Personæ˜¯ä»€ä¹ˆä¸œä¸œ?</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ä¸ºäº†è¿›ä¸€æ­¥çª¥æ¢ KVO æ·»åŠ å‰åçš„å˜åŒ–</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>å°ç¼–çª¥æ¢å°è¯•4 æ‰“å° setName æ–¹æ³•å®ç°IMPæŒ‡é’ˆæœ‰æ²¡æœ‰å‘ç”Ÿæ”¹å˜,æˆ‘ä»¬çŸ¥é“åŒä¸€ä¸ªæ–¹æ³•çš„å®ç° IMP åœ°å€æ˜¯ä¸å˜çš„.</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApiajWzjgRwMy3FgzUOXHcajzbmoOeIx0e2Up9mpfQHCkHtpIvkmkTkRw/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">è¿ setNameæ–¹æ³•éƒ½ä¸ä¸€æ ·äº† , ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿ å°ç¼–ç»å¯¹å¯¹ä¸Šè¾¹çš„ NSKVONotifying_Person å’Œ æ·»åŠ  KVO ä¹‹åçš„ imp æŒ‡é’ˆè¿›è¡Œè¿›ä¸€æ­¥ç ”ç©¶.</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">é¦–å…ˆ åœ¨ lldb ä¸Šè¾“å…¥ imp1å’Œ imp2</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApiasOhx0K9WJPlquqPhBns8ZUH5ibJNLaKOym7Auibe4Q93ibozYAMmtpNA/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">å‘ç”Ÿäº† imp1 æ–¹æ³•å®ç°åœ¨ Foundation æ¡†æ¶é‡Œçš„ _NSSetObjectValueAndNotify å‡½æ•°ä¸­ ,è€Œ imp2 åˆ™è°ƒç”¨äº† Person setName æ–¹æ³•</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApX6B2icld0PYy2ibdfia1cE9SedJYdmqQ1vfMS8tpPyWJb3huTfpCzXA0w/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ä¹Ÿå°±æ˜¯è¯´æ·»åŠ äº† KVO ä¹‹å p1 ä¿®æ”¹ name å€¼ä¹‹å ä¸å†è°ƒç”¨ Person çš„ setNameæ–¹æ³• ,è€Œ p2æ²¡æœ‰æ·»åŠ  kvo ç›‘å¬ ä¾ç„¶æ­£å¸¸è°ƒç”¨ setName:æ–¹æ³• ,ç”±æ­¤å¯ä»¥å¾—å‡º p1 æ·»åŠ å®Œ KVO ç›‘å¬å ç³»ç»Ÿä¿®æ”¹äº†é»˜è®¤æ–¹æ³•å®ç°,é‚£ä¹ˆæ—¢ç„¶æ²¡æœ‰è°ƒç”¨ setName: æ–¹æ³• ä¸ºä»€ä¹ˆ p1.name çš„å€¼ä¹Ÿå‘ç”Ÿäº†æ”¹å˜?</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">æ¥ä¸‹æ¥æˆ‘ä»¬å‡†å¤‡å¯¹åˆšæ‰ NSKVONotifying_Person ç±»è¿›è¡Œä¸‹ä¸€æ­¥ç ”ç©¶, NSKVONotifying_Person å’Œ Person æœ‰æ²¡æœ‰å†…åœ¨çš„è”ç³»å‘¢?</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">å°ç¼–çª¥æ¢å°è¯•5 NSKVONotifying_Personå’Œ Person ä¹‹é—´çš„è”ç³»æ—¶ä»€ä¹ˆ</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCAp9ZibHKLc998eicicd5TwAyhlJ4S25Zw06SKkGh3GglN4SibYqoXbkJIicKw/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">é€šè¿‡æ‰“å° NSKVONotifying_Person çš„ superclass &nbsp;å’Œ Person çš„ superclass å¯ä»¥å¾—å‡º, NSKVONotifying_Personæ˜¯ä¸€ä¸ª Person å­ç±»,é‚£ä¹ˆä¸ºä»€ä¹ˆè‹¹æœä¼šåŠ¨æ€åˆ›å»ºè¿™ä¹ˆä¸€ä¸ª å­ç±»å‘¢? NSKVONotifying_Person è¿™ä¸ªå­ç±» è·Ÿ Person å†…éƒ¨æœ‰å“ªäº›ä¸åŒå‘¢ ?</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">è¿™ä¸ªæ—¶å€™ æˆ‘ä»¬å»è¾“å‡ºä¸‹ Person å’Œ NSKVONotifying_Person å†…éƒ¨çš„æ–¹æ³•åˆ—è¡¨ å’Œ å±æ€§åˆ—è¡¨ ,çœ‹çœ‹NSKVONotifying_Person å­ç±»éƒ½æ·»åŠ äº†é‚£äº›æ–¹æ³•å’Œå±æ€§.</span></p>
   <p style="letter-spacing:1px;"><br></p>
   <pre style="font-size:inherit;color:inherit;line-height:inherit;"><code class="hljs objectivec" style="margin-left:2px;line-height:18px;font-size:14px;letter-spacing:0px;font-family:Consolas, Inconsolata, Courier, monospace;color:rgb(169,183,198);background:rgb(40,43,46);">-&nbsp;(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">void</span>)viewDidLoad&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">super</span>&nbsp;viewDidLoad];<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p1&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];<br>&nbsp;&nbsp;&nbsp;&nbsp;Person&nbsp;*p2&nbsp;=&nbsp;[[Person&nbsp;alloc]&nbsp;init];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">id</span>&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">id</span>&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSLog</span>(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@"æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å‰:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;"</span>,cls1,cls2);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;[p1&nbsp;addObserver:<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">self</span>&nbsp;forKeyPath:<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@"name"</span>&nbsp;options:<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSKeyValueObservingOptionNew</span>&nbsp;context:<span class="hljs-literal" style="font-size:inherit;line-height:inherit;color:rgb(174,135,250);">NULL</span>];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls1&nbsp;=&nbsp;object_getClass(p1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cls2&nbsp;=&nbsp;object_getClass(p2);<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSString</span>&nbsp;*methodList1&nbsp;=&nbsp;[<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">self</span>&nbsp;printPersonMethods:cls1];<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSString</span>&nbsp;*methodList2&nbsp;=&nbsp;[<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">self</span>&nbsp;printPersonMethods:cls2];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSLog</span>(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@"%@"</span>,methodList1);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSLog</span>(<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@"%@"</span>,methodList2);<br><br><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//&nbsp;&nbsp;NSLog(@"æ·»åŠ &nbsp;KVO&nbsp;ä¹‹å:&nbsp;cls1&nbsp;=&nbsp;%@&nbsp;&nbsp;cls2&nbsp;=&nbsp;%@&nbsp;",cls1,cls2);</span><br><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//&nbsp;&nbsp;id&nbsp;super_cls1&nbsp;=&nbsp;class_getSuperclass(cls1);</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//&nbsp;&nbsp;id&nbsp;super_cls2&nbsp;=&nbsp;class_getSuperclass(cls2);</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//&nbsp;&nbsp;NSLog(@"super_cls1&nbsp;=&nbsp;%@&nbsp;,super_cls2&nbsp;=&nbsp;%@",super_cls1,super_cls2);</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//&nbsp;&nbsp;p1.name&nbsp;=&nbsp;@"dzb";</span><br><span class="hljs-comment" style="font-size:inherit;line-height:inherit;color:rgb(128,128,128);">//&nbsp;&nbsp;p2.name&nbsp;=&nbsp;@"123";</span><br><br>}<br><br>-&nbsp;(<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSString</span>&nbsp;*)&nbsp;printPersonMethods:(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">id</span>)obj&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">unsigned</span>&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">int</span>&nbsp;count&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(174,135,250);">0</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;*methods&nbsp;=&nbsp;class_copyMethodList([obj&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">class</span>],&amp;count);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSMutableString</span>&nbsp;*methodList&nbsp;=&nbsp;[<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSMutableString</span>&nbsp;string];<br>&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@"[ "</span>];<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">for</span>&nbsp;(<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">int</span>&nbsp;i&nbsp;=&nbsp;<span class="hljs-number" style="font-size:inherit;line-height:inherit;color:rgb(174,135,250);">0</span>;&nbsp;i&lt;count;&nbsp;i++)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;method&nbsp;=&nbsp;methods[i];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEL&nbsp;sel&nbsp;=&nbsp;method_getName(method);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@"%@"</span>,<span class="hljs-built_in" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">NSStringFromSelector</span>(sel)];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendString:<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@" "</span>];<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;[methodList&nbsp;appendFormat:<span class="hljs-string" style="font-size:inherit;line-height:inherit;color:rgb(238,220,112);">@"]"</span>];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;free(methods);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="font-size:inherit;line-height:inherit;color:rgb(248,35,117);">return</span>&nbsp;methodList;<br>}<br></code></pre>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApvPjg85gibXkOib930mgHKvU4nGVUxoHKMqWklKqloT9ZPS2qhs430wOQ/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºæ¥ &nbsp;NSKVONotifying_Person å†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ª setName:æ–¹æ³• &nbsp;è¿˜é‡å†™äº† class å’Œ dealloc æ–¹æ³• , _isKVOA, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¤§è‡´çš„å¾—å‡º, p1æ·»åŠ  kVO å runtime åŠ¨æ€çš„ç”Ÿæˆäº†ä¸€ä¸ª &nbsp;NSKVONotifying_Personå­ç±» å¹¶é‡å†™äº† setName æ–¹æ³• ,é‚£ä¹ˆ setName å†…éƒ¨ä¸€å®šæ˜¯åšäº†ä¸€äº›äº‹æƒ…,æ‰ä¼šè§¦å‘ &nbsp;observeValueForKeyPath ç›‘å¬æ–¹æ³•.</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ç»§ç»­æ¢ç©¶ NSKVONotifying_Person å­ç±» é‡å†™ setName éƒ½åšäº†ä»€ä¹ˆ?</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>å…¶å® setName æ–¹æ³•å†…éƒ¨ æ˜¯è°ƒç”¨äº† Foundation çš„ _NSSetObjectValueAndNotify å‡½æ•° ,åœ¨ _NSSetObjectValueAndNotify å†…éƒ¨</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">1é¦–å…ˆä¼šè°ƒç”¨ willChangeValueForKey</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>2ç„¶åç»™ name å±æ€§èµ‹å€¼</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>3 æœ€åè°ƒç”¨ didChangeValueForKey</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>4æœ€åè°ƒç”¨ observer çš„ observeValueForKeyPath å»å‘Šè¯‰ç›‘å¬å™¨å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜ .</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApqMsohjX0jf4gD7M2sP1RJtAx8mkdCHtIAQj8PId5zXpEMic48WYiaYYQ/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">ç”±äºè‹¹æœ Foundation æ¡†æ¶æ˜¯ä¸å¼€æºçš„ ,æ‰€ä»¥æˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡é‡å†™Person çš„ &nbsp;willChangeValueForKey &nbsp;å’Œ &nbsp;didChangeValueForKey éªŒè¯æˆ‘ä»¬çš„çŒœæƒ³ .</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCAp5pnAIhlA8hZicKQXCEfE1t6jn6pMKeFCYfibibbficXDHPCLwUac4ficjSg/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">é¦–å…ˆå½“æˆ‘ä»¬æ”¹å˜p1.name çš„å€¼æ—¶ å¹¶ä¸æ˜¯é¦–å…ˆæ‰§è¡Œçš„ setName: è¿™ä¸ªæ–¹æ³• ,è€Œæ˜¯å…ˆè°ƒç”¨äº† &nbsp;willChangeValueForKey &nbsp;å…¶æ¬¡ è°ƒç”¨çˆ¶ç±»çš„ setter æ–¹æ³• å¯¹å±æ€§èµ‹å€¼ ,ç„¶åå†è°ƒç”¨ &nbsp;didChangeValueForKey æ–¹æ³• ,å¹¶åœ¨ didChangeValueForKey å†…éƒ¨ è°ƒç”¨ç›‘å¬å™¨çš„ &nbsp;observeValueForKeyPathæ–¹æ³• å‘Šè¯‰å¤–ç•Œ å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜.</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApriaDNnXnhEm91PTyXnjGIYyRiadLocKN8Wic9Y19zug4AKPXr6LcgPURw/640?wx_fmt=other" alt="640?wx_fmt=other"></span></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApibQsiahwFdWLg4bycVejQZf4VkHTMcqsnjcibckgvVib04mUzq1aawibfVA/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">è‡³äºé‡å†™äº† dealloc å’Œ class æ–¹æ³• æ˜¯ä¸ºäº†åšä¸€äº› KVO é‡Šæ”¾å†…å­˜ å’Œ éšè—å¤–ç•Œå¯¹äº NSKVONotifying_Person å­ç±»çš„å­˜åœ¨</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApcrXxCmpnNwlSJACc5ZLbohkjYG7EyfAmeSURHtic6uVHVHJtByu7JaA/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p style="letter-spacing:1px;"><br></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);">è¿™å°±æ˜¯æˆ‘ä»¬è°ƒç”¨ [p1 class] å’Œ [p2 class]ç»“æœéƒ½æ˜¾ç¤º Person ç±» ,è®©æˆ‘ä»¬è¯¯ä»¥ä¸º Person æ²¡æœ‰å‘ç”Ÿå˜åŒ–</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>è¡¥å……è¯´æ˜ ,KVC å¯¹å±æ€§èµ‹å€¼æ—¶å€™ æ˜¯ä¼šåœ¨è¿™ä¸ªç±»é‡Œè¾¹ å»æŸ¥æ‰¾ _age &nbsp;isAge setAge setIsAge ç­‰æ–¹æ³•çš„ ,æœ€ç»ˆä¼šè°ƒç”¨å±æ€§çš„ setter æ–¹æ³• ,é‚£ä¹ˆå¦‚æœæ·»åŠ äº† KVO è¿˜æ˜¯ä¼šè¢«è§¦å‘çš„ .</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br>ç›¸å è®¾ç½®æˆå‘˜å˜é‡ &nbsp;_age ç”±äºä¸ä¼šè§¦å‘ setter æ–¹æ³• ,å› æ­¤ä¸ä¼šå»è§¦å‘ KVO ç›¸å…³çš„ä»£ç  .</span></p>
   <p style="letter-spacing:1px;"><span style="font-size:16px;color:rgb(74,74,74);"><br></span></p>
   <p style="letter-spacing:1px;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz/8RTSPr4mlykolCEiahuWvHr1fxKvmSCApEeibW5LSP3jvVrOiahLPUZrBsiajKZ0JNd6DIGUnTN7lIysWbKWtgVOOg/640?wx_fmt=other" alt="640?wx_fmt=other"></p>
   <p><br></p>
   <p style="text-align:center;letter-spacing:1.5px;"><span style="color:rgb(255,255,255);"><strong><span style="font-size:20px;">&nbsp;æ¨èâ†“â†“â†“&nbsp;</span></strong></span></p>
   <img style="vertical-align:middle;width:313px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/IwiaNBuWUDUzX3vMCt57DzWD1FUkicYK3C3VObzhyt4YU3rXujLwMXHoHqpB6B72h44DNib9J9jbQHk3giaxAeABWg/640?wx_fmt=png" alt="640?wx_fmt=png">
   <p><strong>é•¿</strong></p>
   <p><strong>æŒ‰</strong></p>
   <p><strong>å…³</strong></p>
   <p><strong>æ³¨</strong></p>
   <p style="letter-spacing:0px;"><strong><span style="font-size:18px;">ğŸ‘‰</span></strong><span style="font-size:17px;"><strong>ã€</strong></span><a href="https://mp.weixin.qq.com/s?__biz=MzUzMDc0NzU4Nw==&amp;mid=2247483768&amp;idx=1&amp;sn=4ef4f1510616baa395c507e32bb439d7&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;color:rgb(255,79,121);font-size:17px;"><span style="color:rgb(255,79,121);font-size:17px;"><strong>16ä¸ªæŠ€æœ¯å…¬ä¼—å·</strong></span></a><span style="font-size:17px;"><strong>ã€‘éƒ½åœ¨è¿™é‡Œï¼</strong></span></p>
   <p><span style="color:rgb(136,136,136);font-size:15px;">æ¶µç›–ï¼šç¨‹åºå‘˜å¤§å’–ã€æºç å…±è¯»ã€ç¨‹åºå‘˜å…±è¯»ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€é»‘å®¢æŠ€æœ¯å’Œç½‘ç»œå®‰å…¨ã€å¤§æ•°æ®ç§‘æŠ€ã€ç¼–ç¨‹å‰ç«¯ã€Javaã€Pythonã€Webç¼–ç¨‹å¼€å‘ã€Androidã€iOSå¼€å‘ã€Linuxã€æ•°æ®åº“ç ”å‘ã€å¹½é»˜ç¨‹åºå‘˜ç­‰ã€‚</span></p>
   <img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/ol72Wnba7fLkfGhCjKwHfZOmHMkVTIomtmHARHGo86u52ZIGicxfPPFBQ85dBUWf3trqDHPUuN7E2e26DpvfJdQ/640?wx_fmt=png" alt="640?wx_fmt=png">ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç‚¹ä¸ª â€œ
   <strong><span style="color:rgb(0,112,192);">å¥½çœ‹</span></strong>â€ è¡Œä¸è¡Œ
  </div> 
 </div> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- è‡ªå®šä¹‰å¹¿å‘Š -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">æ›´å¤šç²¾å½©å†…å®¹</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">å›é¦–é¡µ</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
