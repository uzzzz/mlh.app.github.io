<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>【许晓笛】开发第一个 EOS 智能合约 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="【许晓笛】开发第一个 EOS 智能合约" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="稍微了解 EOS 系统，你就会知道 EOS 的智能合约基于 WebAssembly(WASM) 技术，这种技术在性能和跨平台兼容性之间取得了很好的平衡，通过将原始代码编译成字节码，使得代码可以在多种平台的 WASM 虚拟机（或者叫解释器）中执行。得到了苹果和谷歌等科技巨头的支持，被誉为下一代互联网前端技术。目前的 WebAssembly 技术支持 C/C++ 语言，并开发了 JavaScript 接口，并被 Chrome、Edge、Safari、Firefox 等几乎所有的主流浏览器支持。 因为使用了 WebAssembly，目前的 EOS 智能合约只支持 C/C++ 语言，简单的智能合约由 3 种文件组成：.hpp文件、.cpp文件、.abi 文件。其中 hpp 为 C++ 头文件，一般用来定义类及其成员变量与成员函数。cpp 为 C++ 文件，用来实现 hpp 中声明的成员函数，实现智能合约的业务逻辑。abi(Application Binary Interface) 文件为二进制接口文件，文件格式类似 JSON，用来定义智能合约与 EOS 系统外部交互的数据接口。 如果智能合约的非常简单，只有一个 cpp 文件，可以省略 hpp 文件，将类与成员定义在 cpp 文件中。abi 文件应该由 C++ 程序需要的数据库空间和外部接口生成，不过 EOS 开发了 abi 自动生成工具，可以根据智能合约代码自动生成 abi 文件，减轻了开发工作量。所以最简单的智能合约只需实现 cpp 文件。 Hello 智能合约 一般的操作系统上手时，惯例是编写一个 Hello World 程序，是主动输出一句话。但我们不一样，我们编写的是一个智能合约，智能合约强调的是互动，在 EOS 里叫做 Action，Action 表示别人可以对合约做什么动作，所有智能合约代码都是对 Action 的回应，是被动的。下面就是第一个 Hello 智能合约： hello.cpp： #include &lt;eosiolib/eosio.hpp&gt;#include &lt;eosiolib/print.hpp&gt;using namespace eosio;class hello : public eosio::contract {public:using contract::contract;/// @abi action void hi( account_name user ) { print( &quot;Hello, &quot;, name{user} ); }};EOSIO_ABI( hello, (hi) ) 我们在代码中定义了一个类：hello，这个类名与合约的账户名没关系，类中只有一个简单的方法： void hi( account_name user ) { print( &quot;Hello, &quot;, name{user} ); } 这就是 EOS 智能合约里所谓的&nbsp;Action，我们定义了一个叫 hi 的 Action，参数是另一个账户名，函数体是打印一句话，回应 hello。 也就是说别的账户可以调用这个合约的 hi Action，这个 hello 合约就会打印一句 hello 来回应。 最后一行代码： EOSIO_ABI( hello, (hi) ) EOSIO_ABI&nbsp;是一个宏，将特定类的特定方法暴漏给系统，成为别的账户可以调用的 Action。 编译智能合约 我们使用 eosiocpp 工具将写好的 hello.cpp 编译成为字节码文件(.wast)： $ eosiocpp -o hello.wast hello.cpp 然后使用 eosiocpp 工具自动生成 abi 文件： $ eosiocpp -g hello.abi hello.cppGenerated hello.abi 看一下生成的 abi 文件内容： {&quot;____comment&quot;: &quot;This file was generated by eosio-abigen. DO NOT EDIT - 2018-04-16T13:37:55&quot;,&quot;types&quot;: [],&quot;structs&quot;: [{&quot;name&quot;: &quot;hi&quot;,&quot;base&quot;: &quot;&quot;,&quot;fields&quot;: [{&quot;name&quot;: &quot;user&quot;,&quot;type&quot;: &quot;account_name&quot; } ] } ],&quot;actions&quot;: [{&quot;name&quot;: &quot;hi&quot;,&quot;type&quot;: &quot;hi&quot;,&quot;ricardian_contract&quot;: &quot;# CONTRACT FOR hello::hi## ACTION NAME: hi\n ### Parameters### Parameters\nInput paramters:Input paramters:\n \n * `user` (string to include in the output)* `user` (string to include in the output)\n \n Implied parameters: Implied parameters: \n \n * `account_name` (name of the party invoking and signing the contract)* `account_name` (name of the party invoking and signing the contract)\n \n ### Intent### Intent\n INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.\n \n ### Term### Term\n TERM. This Contract expires at the conclusion of code execution.TERM. This Contract expires at the conclusion of code execution.\n&quot; } ],&quot;tables&quot;: [],&quot;ricardian_clauses&quot;: [ ... ... ... ]} 我们省略了&nbsp;ricardian_clauses&nbsp;，也就是李嘉图条款部分(李嘉图合约指的是人与机器都能读懂的合同，EOS 最近才将其加入智能合约中)。我们看到 abi 文件中已经声明了&nbsp;hi&nbsp;这个&nbsp;Action，并说明了这个&nbsp;Action&nbsp;的李嘉图合约，大概意思是本合约的输入为一串字符（user），本合约意图是打印输出，没有其他效果。 上传智能合约 上传智能合约之前，我们要先给智能合约建立一个账户 EOS 里账户和智能合约是一一对应的。使用 EOS 的 cleos 命令行工具创建账户： $ cleos create account eosio hello.code EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 命令中，hello.code&nbsp;就是这个智能合约的账户名，EOS系统的账户名要求 12 字符以内。后面两个公钥是在本地测试网络中有建立账户权限的公钥（对应本地测试网络中的 eosio 账户）。 然后就可以上传智能合约了： $ cleos set contract hello.code ../hello -p hello.code 使用智能合约 我们使用&nbsp;user&nbsp;账户调用&nbsp;hello.code&nbsp;的&nbsp;hi&nbsp;Action: $ cleos push action hello.code hi &#39;[&quot;user&quot;]&#39; -p user hello.code&nbsp;表示执行 hello.code 合约，hi&nbsp;表示执行合约里的 hi Action，&#39;[&quot;user&quot;]&#39;&nbsp;是根据 abi 写的传入参数，&nbsp;-p&nbsp;参数表示使用哪个账户的权限 (permission)。 以下是系统回应： executed transaction: 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857 244 bytes 1000 cycles# hello.code &lt;= hello.code::hi {&quot;user&quot;:&quot;user&quot;}&gt;&gt; Hello, user 说明执行了&nbsp;hello.code&nbsp;合约的&nbsp;hi&nbsp;Action，并且系统输出为&nbsp;Hello, user,智能合约成功对 Action 进行了回应。 End&nbsp; End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 阅读更多" />
<meta property="og:description" content="稍微了解 EOS 系统，你就会知道 EOS 的智能合约基于 WebAssembly(WASM) 技术，这种技术在性能和跨平台兼容性之间取得了很好的平衡，通过将原始代码编译成字节码，使得代码可以在多种平台的 WASM 虚拟机（或者叫解释器）中执行。得到了苹果和谷歌等科技巨头的支持，被誉为下一代互联网前端技术。目前的 WebAssembly 技术支持 C/C++ 语言，并开发了 JavaScript 接口，并被 Chrome、Edge、Safari、Firefox 等几乎所有的主流浏览器支持。 因为使用了 WebAssembly，目前的 EOS 智能合约只支持 C/C++ 语言，简单的智能合约由 3 种文件组成：.hpp文件、.cpp文件、.abi 文件。其中 hpp 为 C++ 头文件，一般用来定义类及其成员变量与成员函数。cpp 为 C++ 文件，用来实现 hpp 中声明的成员函数，实现智能合约的业务逻辑。abi(Application Binary Interface) 文件为二进制接口文件，文件格式类似 JSON，用来定义智能合约与 EOS 系统外部交互的数据接口。 如果智能合约的非常简单，只有一个 cpp 文件，可以省略 hpp 文件，将类与成员定义在 cpp 文件中。abi 文件应该由 C++ 程序需要的数据库空间和外部接口生成，不过 EOS 开发了 abi 自动生成工具，可以根据智能合约代码自动生成 abi 文件，减轻了开发工作量。所以最简单的智能合约只需实现 cpp 文件。 Hello 智能合约 一般的操作系统上手时，惯例是编写一个 Hello World 程序，是主动输出一句话。但我们不一样，我们编写的是一个智能合约，智能合约强调的是互动，在 EOS 里叫做 Action，Action 表示别人可以对合约做什么动作，所有智能合约代码都是对 Action 的回应，是被动的。下面就是第一个 Hello 智能合约： hello.cpp： #include &lt;eosiolib/eosio.hpp&gt;#include &lt;eosiolib/print.hpp&gt;using namespace eosio;class hello : public eosio::contract {public:using contract::contract;/// @abi action void hi( account_name user ) { print( &quot;Hello, &quot;, name{user} ); }};EOSIO_ABI( hello, (hi) ) 我们在代码中定义了一个类：hello，这个类名与合约的账户名没关系，类中只有一个简单的方法： void hi( account_name user ) { print( &quot;Hello, &quot;, name{user} ); } 这就是 EOS 智能合约里所谓的&nbsp;Action，我们定义了一个叫 hi 的 Action，参数是另一个账户名，函数体是打印一句话，回应 hello。 也就是说别的账户可以调用这个合约的 hi Action，这个 hello 合约就会打印一句 hello 来回应。 最后一行代码： EOSIO_ABI( hello, (hi) ) EOSIO_ABI&nbsp;是一个宏，将特定类的特定方法暴漏给系统，成为别的账户可以调用的 Action。 编译智能合约 我们使用 eosiocpp 工具将写好的 hello.cpp 编译成为字节码文件(.wast)： $ eosiocpp -o hello.wast hello.cpp 然后使用 eosiocpp 工具自动生成 abi 文件： $ eosiocpp -g hello.abi hello.cppGenerated hello.abi 看一下生成的 abi 文件内容： {&quot;____comment&quot;: &quot;This file was generated by eosio-abigen. DO NOT EDIT - 2018-04-16T13:37:55&quot;,&quot;types&quot;: [],&quot;structs&quot;: [{&quot;name&quot;: &quot;hi&quot;,&quot;base&quot;: &quot;&quot;,&quot;fields&quot;: [{&quot;name&quot;: &quot;user&quot;,&quot;type&quot;: &quot;account_name&quot; } ] } ],&quot;actions&quot;: [{&quot;name&quot;: &quot;hi&quot;,&quot;type&quot;: &quot;hi&quot;,&quot;ricardian_contract&quot;: &quot;# CONTRACT FOR hello::hi## ACTION NAME: hi\n ### Parameters### Parameters\nInput paramters:Input paramters:\n \n * `user` (string to include in the output)* `user` (string to include in the output)\n \n Implied parameters: Implied parameters: \n \n * `account_name` (name of the party invoking and signing the contract)* `account_name` (name of the party invoking and signing the contract)\n \n ### Intent### Intent\n INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.\n \n ### Term### Term\n TERM. This Contract expires at the conclusion of code execution.TERM. This Contract expires at the conclusion of code execution.\n&quot; } ],&quot;tables&quot;: [],&quot;ricardian_clauses&quot;: [ ... ... ... ]} 我们省略了&nbsp;ricardian_clauses&nbsp;，也就是李嘉图条款部分(李嘉图合约指的是人与机器都能读懂的合同，EOS 最近才将其加入智能合约中)。我们看到 abi 文件中已经声明了&nbsp;hi&nbsp;这个&nbsp;Action，并说明了这个&nbsp;Action&nbsp;的李嘉图合约，大概意思是本合约的输入为一串字符（user），本合约意图是打印输出，没有其他效果。 上传智能合约 上传智能合约之前，我们要先给智能合约建立一个账户 EOS 里账户和智能合约是一一对应的。使用 EOS 的 cleos 命令行工具创建账户： $ cleos create account eosio hello.code EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 命令中，hello.code&nbsp;就是这个智能合约的账户名，EOS系统的账户名要求 12 字符以内。后面两个公钥是在本地测试网络中有建立账户权限的公钥（对应本地测试网络中的 eosio 账户）。 然后就可以上传智能合约了： $ cleos set contract hello.code ../hello -p hello.code 使用智能合约 我们使用&nbsp;user&nbsp;账户调用&nbsp;hello.code&nbsp;的&nbsp;hi&nbsp;Action: $ cleos push action hello.code hi &#39;[&quot;user&quot;]&#39; -p user hello.code&nbsp;表示执行 hello.code 合约，hi&nbsp;表示执行合约里的 hi Action，&#39;[&quot;user&quot;]&#39;&nbsp;是根据 abi 写的传入参数，&nbsp;-p&nbsp;参数表示使用哪个账户的权限 (permission)。 以下是系统回应： executed transaction: 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857 244 bytes 1000 cycles# hello.code &lt;= hello.code::hi {&quot;user&quot;:&quot;user&quot;}&gt;&gt; Hello, user 说明执行了&nbsp;hello.code&nbsp;合约的&nbsp;hi&nbsp;Action，并且系统输出为&nbsp;Hello, user,智能合约成功对 Action 进行了回应。 End&nbsp; End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-24T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"稍微了解 EOS 系统，你就会知道 EOS 的智能合约基于 WebAssembly(WASM) 技术，这种技术在性能和跨平台兼容性之间取得了很好的平衡，通过将原始代码编译成字节码，使得代码可以在多种平台的 WASM 虚拟机（或者叫解释器）中执行。得到了苹果和谷歌等科技巨头的支持，被誉为下一代互联网前端技术。目前的 WebAssembly 技术支持 C/C++ 语言，并开发了 JavaScript 接口，并被 Chrome、Edge、Safari、Firefox 等几乎所有的主流浏览器支持。 因为使用了 WebAssembly，目前的 EOS 智能合约只支持 C/C++ 语言，简单的智能合约由 3 种文件组成：.hpp文件、.cpp文件、.abi 文件。其中 hpp 为 C++ 头文件，一般用来定义类及其成员变量与成员函数。cpp 为 C++ 文件，用来实现 hpp 中声明的成员函数，实现智能合约的业务逻辑。abi(Application Binary Interface) 文件为二进制接口文件，文件格式类似 JSON，用来定义智能合约与 EOS 系统外部交互的数据接口。 如果智能合约的非常简单，只有一个 cpp 文件，可以省略 hpp 文件，将类与成员定义在 cpp 文件中。abi 文件应该由 C++ 程序需要的数据库空间和外部接口生成，不过 EOS 开发了 abi 自动生成工具，可以根据智能合约代码自动生成 abi 文件，减轻了开发工作量。所以最简单的智能合约只需实现 cpp 文件。 Hello 智能合约 一般的操作系统上手时，惯例是编写一个 Hello World 程序，是主动输出一句话。但我们不一样，我们编写的是一个智能合约，智能合约强调的是互动，在 EOS 里叫做 Action，Action 表示别人可以对合约做什么动作，所有智能合约代码都是对 Action 的回应，是被动的。下面就是第一个 Hello 智能合约： hello.cpp： #include &lt;eosiolib/eosio.hpp&gt;#include &lt;eosiolib/print.hpp&gt;using namespace eosio;class hello : public eosio::contract {public:using contract::contract;/// @abi action void hi( account_name user ) { print( &quot;Hello, &quot;, name{user} ); }};EOSIO_ABI( hello, (hi) ) 我们在代码中定义了一个类：hello，这个类名与合约的账户名没关系，类中只有一个简单的方法： void hi( account_name user ) { print( &quot;Hello, &quot;, name{user} ); } 这就是 EOS 智能合约里所谓的&nbsp;Action，我们定义了一个叫 hi 的 Action，参数是另一个账户名，函数体是打印一句话，回应 hello。 也就是说别的账户可以调用这个合约的 hi Action，这个 hello 合约就会打印一句 hello 来回应。 最后一行代码： EOSIO_ABI( hello, (hi) ) EOSIO_ABI&nbsp;是一个宏，将特定类的特定方法暴漏给系统，成为别的账户可以调用的 Action。 编译智能合约 我们使用 eosiocpp 工具将写好的 hello.cpp 编译成为字节码文件(.wast)： $ eosiocpp -o hello.wast hello.cpp 然后使用 eosiocpp 工具自动生成 abi 文件： $ eosiocpp -g hello.abi hello.cppGenerated hello.abi 看一下生成的 abi 文件内容： {&quot;____comment&quot;: &quot;This file was generated by eosio-abigen. DO NOT EDIT - 2018-04-16T13:37:55&quot;,&quot;types&quot;: [],&quot;structs&quot;: [{&quot;name&quot;: &quot;hi&quot;,&quot;base&quot;: &quot;&quot;,&quot;fields&quot;: [{&quot;name&quot;: &quot;user&quot;,&quot;type&quot;: &quot;account_name&quot; } ] } ],&quot;actions&quot;: [{&quot;name&quot;: &quot;hi&quot;,&quot;type&quot;: &quot;hi&quot;,&quot;ricardian_contract&quot;: &quot;# CONTRACT FOR hello::hi## ACTION NAME: hi\\n ### Parameters### Parameters\\nInput paramters:Input paramters:\\n \\n * `user` (string to include in the output)* `user` (string to include in the output)\\n \\n Implied parameters: Implied parameters: \\n \\n * `account_name` (name of the party invoking and signing the contract)* `account_name` (name of the party invoking and signing the contract)\\n \\n ### Intent### Intent\\n INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.\\n \\n ### Term### Term\\n TERM. This Contract expires at the conclusion of code execution.TERM. This Contract expires at the conclusion of code execution.\\n&quot; } ],&quot;tables&quot;: [],&quot;ricardian_clauses&quot;: [ ... ... ... ]} 我们省略了&nbsp;ricardian_clauses&nbsp;，也就是李嘉图条款部分(李嘉图合约指的是人与机器都能读懂的合同，EOS 最近才将其加入智能合约中)。我们看到 abi 文件中已经声明了&nbsp;hi&nbsp;这个&nbsp;Action，并说明了这个&nbsp;Action&nbsp;的李嘉图合约，大概意思是本合约的输入为一串字符（user），本合约意图是打印输出，没有其他效果。 上传智能合约 上传智能合约之前，我们要先给智能合约建立一个账户 EOS 里账户和智能合约是一一对应的。使用 EOS 的 cleos 命令行工具创建账户： $ cleos create account eosio hello.code EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 命令中，hello.code&nbsp;就是这个智能合约的账户名，EOS系统的账户名要求 12 字符以内。后面两个公钥是在本地测试网络中有建立账户权限的公钥（对应本地测试网络中的 eosio 账户）。 然后就可以上传智能合约了： $ cleos set contract hello.code ../hello -p hello.code 使用智能合约 我们使用&nbsp;user&nbsp;账户调用&nbsp;hello.code&nbsp;的&nbsp;hi&nbsp;Action: $ cleos push action hello.code hi &#39;[&quot;user&quot;]&#39; -p user hello.code&nbsp;表示执行 hello.code 合约，hi&nbsp;表示执行合约里的 hi Action，&#39;[&quot;user&quot;]&#39;&nbsp;是根据 abi 写的传入参数，&nbsp;-p&nbsp;参数表示使用哪个账户的权限 (permission)。 以下是系统回应： executed transaction: 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857 244 bytes 1000 cycles# hello.code &lt;= hello.code::hi {&quot;user&quot;:&quot;user&quot;}&gt;&gt; Hello, user 说明执行了&nbsp;hello.code&nbsp;合约的&nbsp;hi&nbsp;Action，并且系统输出为&nbsp;Hello, user,智能合约成功对 Action 进行了回应。 End&nbsp; End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 阅读更多","@type":"BlogPosting","url":"/2018/04/24/28c90eaabb6a3c76c0dfd2fb1bf703c5.html","headline":"【许晓笛】开发第一个 EOS 智能合约","dateModified":"2018-04-24T00:00:00+08:00","datePublished":"2018-04-24T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/04/24/28c90eaabb6a3c76c0dfd2fb1bf703c5.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>【许晓笛】开发第一个 EOS 智能合约</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p style="color:rgb(75,75,75);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;background-color:rgb(255,255,255);"></p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">稍微了解 EOS 系统，你就会知道 EOS 的智能合约基于 WebAssembly(WASM) 技术，这种技术在性能和跨平台兼容性之间取得了很好的平衡，通过将原始代码编译成字节码，使得代码可以在多种平台的 WASM 虚拟机（或者叫解释器）中执行。得到了苹果和谷歌等科技巨头的支持，被誉为下一代互联网前端技术。目前的 WebAssembly 技术支持 C/C++ 语言，并开发了 JavaScript 接口，并被 Chrome、Edge、Safari、Firefox 等几乎所有的主流浏览器支持。</p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">因为使用了 WebAssembly，目前的 EOS 智能合约只支持 C/C++ 语言，简单的智能合约由 3 种文件组成：.hpp文件、.cpp文件、.abi 文件。其中 hpp 为 C++ 头文件，一般用来定义类及其成员变量与成员函数。cpp 为 C++ 文件，用来实现 hpp 中声明的成员函数，实现智能合约的业务逻辑。abi(Application Binary Interface) 文件为二进制接口文件，文件格式类似 JSON，用来定义智能合约与 EOS 系统外部交互的数据接口。</p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">如果智能合约的非常简单，只有一个 cpp 文件，可以省略 hpp 文件，将类与成员定义在 cpp 文件中。abi 文件应该由 C++ 程序需要的数据库空间和外部接口生成，不过 EOS 开发了 abi 自动生成工具，可以根据智能合约代码自动生成 abi 文件，减轻了开发工作量。所以最简单的智能合约只需实现 cpp 文件。</p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180521154440780?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l1YW5mYW5neXVhbl9ibG9jaw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <h3 style="font-size:1.3em;color:rgb(255,255,255);line-height:inherit;letter-spacing:2px;background-color:rgb(63,81,181);border-left:10px solid rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><span style="color:inherit;line-height:inherit;">Hello 智能合约</span></h3>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">一般的操作系统上手时，惯例是编写一个 Hello World 程序，是主动输出一句话。但我们不一样，我们编写的是一个智能合约，智能合约强调的是互动，在 EOS 里叫做 Action，Action 表示别人可以对合约做什么动作，所有智能合约代码都是对 Action 的回应，是被动的。下面就是第一个 Hello 智能合约：</p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">hello.cpp：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="cpp language-cpp hljs" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;"><span class="hljs-meta" style="color:rgb(91,218,237);line-height:inherit;">#<span class="hljs-meta-keyword" style="color:inherit;line-height:inherit;">include</span> <span class="hljs-meta-string" style="color:inherit;line-height:inherit;">&lt;eosiolib/eosio.hpp&gt;</span></span><br style="color:inherit;line-height:inherit;"><span class="hljs-meta" style="color:rgb(91,218,237);line-height:inherit;">#<span class="hljs-meta-keyword" style="color:inherit;line-height:inherit;">include</span> <span class="hljs-meta-string" style="color:inherit;line-height:inherit;">&lt;eosiolib/print.hpp&gt;</span></span><br style="color:inherit;line-height:inherit;"><span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">using</span> <span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">namespace</span> eosio;<br style="color:inherit;line-height:inherit;"><br style="color:inherit;line-height:inherit;"><span class="hljs-class" style="color:inherit;line-height:inherit;"><span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">class</span> <span class="hljs-title" style="color:rgb(165,218,45);line-height:inherit;">hello</span> :</span> <span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">public</span> eosio::contract {<br style="color:inherit;line-height:inherit;"><span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">public</span>:<br style="color:inherit;line-height:inherit;"><span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">using</span> contract::contract;<br style="color:inherit;line-height:inherit;"><br style="color:inherit;line-height:inherit;"><span class="hljs-comment" style="color:rgb(128,128,128);line-height:inherit;">/// @abi action </span><br style="color:inherit;line-height:inherit;"><span class="hljs-function" style="color:rgb(248,35,117);line-height:inherit;"><span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">void</span> <span class="hljs-title" style="color:rgb(165,218,45);line-height:inherit;">hi</span><span class="hljs-params" style="color:rgb(255,152,35);line-height:inherit;">( account_name user )</span> </span>{<br style="color:inherit;line-height:inherit;">         print( <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"Hello, "</span>, name{user} );<br style="color:inherit;line-height:inherit;">      }<br style="color:inherit;line-height:inherit;">};<br style="color:inherit;line-height:inherit;"><br style="color:inherit;line-height:inherit;">EOSIO_ABI( hello, (hi) )<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">我们在代码中定义了一个类：hello，这个类名与合约的账户名没关系，类中只有一个简单的方法：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="cpp language-cpp hljs" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;"><span class="hljs-function" style="color:rgb(248,35,117);line-height:inherit;"><span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">void</span> <span class="hljs-title" style="color:rgb(165,218,45);line-height:inherit;">hi</span><span class="hljs-params" style="color:rgb(255,152,35);line-height:inherit;">( account_name user )</span> </span>{<br style="color:inherit;line-height:inherit;">         print( <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"Hello, "</span>, name{user} );<br style="color:inherit;line-height:inherit;">      }<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">这就是 EOS 智能合约里所谓的<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">Action</code>，我们定义了一个叫 hi 的 Action，参数是另一个账户名，函数体是打印一句话，回应 hello。 也就是说别的账户可以调用这个合约的 hi Action，这个 hello 合约就会打印一句 hello 来回应。</p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">最后一行代码：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="cpp language-cpp hljs" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;">EOSIO_ABI( hello, (hi) )<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);"><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">EOSIO_ABI</code><span>&nbsp;</span>是一个宏，将特定类的特定方法暴漏给系统，成为别的账户可以调用的 Action。</p>
  <h3 style="font-size:1.3em;color:rgb(255,255,255);line-height:inherit;letter-spacing:2px;background-color:rgb(63,81,181);border-left:10px solid rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><span style="color:inherit;line-height:inherit;">编译智能合约</span></h3>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">我们使用 eosiocpp 工具将写好的 hello.cpp 编译成为字节码文件(.wast)：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="hljs ruby" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;">$ eosiocpp -o hello.wast hello.cpp<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">然后使用 eosiocpp 工具自动生成 abi 文件：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="hljs ruby" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;">$ eosiocpp -g hello.abi hello.cpp<br style="color:inherit;line-height:inherit;">Generated hello.abi<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">看一下生成的 abi 文件内容：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="js language-js hljs javascript" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;">{<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"____comment"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"This file was generated by eosio-abigen. DO NOT EDIT - 2018-04-16T13:37:55"</span>,<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"types"</span>: [],<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"structs"</span>: [{<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"name"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"hi"</span>,<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"base"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">""</span>,<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"fields"</span>: [{<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"name"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"user"</span>,<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"type"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"account_name"</span><br style="color:inherit;line-height:inherit;">        }<br style="color:inherit;line-height:inherit;">      ]<br style="color:inherit;line-height:inherit;">    }<br style="color:inherit;line-height:inherit;">  ],<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"actions"</span>: [{<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"name"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"hi"</span>,<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"type"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"hi"</span>,<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"ricardian_contract"</span>: <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"# CONTRACT FOR hello::hi## ACTION NAME: hi\n <br style="color:inherit;line-height:inherit;"> ### Parameters### Parameters\nInput paramters:Input paramters:\n <br style="color:inherit;line-height:inherit;"> \n <br style="color:inherit;line-height:inherit;"> * `user` (string to include in the output)* `user` (string to include in the output)\n<br style="color:inherit;line-height:inherit;"> \n <br style="color:inherit;line-height:inherit;"> Implied parameters: Implied parameters: \n <br style="color:inherit;line-height:inherit;"> \n <br style="color:inherit;line-height:inherit;"> * `account_name` (name of the party invoking and signing the contract)* `account_name` (name of the party invoking and signing the contract)\n <br style="color:inherit;line-height:inherit;"> \n <br style="color:inherit;line-height:inherit;"> ### Intent### Intent\n <br style="color:inherit;line-height:inherit;"> INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.INTENT. The intention of the author and the invoker of this contract is to print output. It shall have no other effect.\n <br style="color:inherit;line-height:inherit;"> \n <br style="color:inherit;line-height:inherit;"> ### Term### Term\n <br style="color:inherit;line-height:inherit;"> TERM. This Contract expires at the conclusion of code execution.TERM. This Contract expires at the conclusion of code execution.\n"</span> <br style="color:inherit;line-height:inherit;">    }<br style="color:inherit;line-height:inherit;">  ],<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"tables"</span>: [],<br style="color:inherit;line-height:inherit;"><span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"ricardian_clauses"</span>: [<br style="color:inherit;line-height:inherit;"><br style="color:inherit;line-height:inherit;">   ...<br style="color:inherit;line-height:inherit;">   ...<br style="color:inherit;line-height:inherit;">   ...<br style="color:inherit;line-height:inherit;"><br style="color:inherit;line-height:inherit;">  ]<br style="color:inherit;line-height:inherit;">}<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">我们省略了<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">ricardian_clauses</code><span>&nbsp;</span>，也就是李嘉图条款部分(李嘉图合约指的是人与机器都能读懂的合同，EOS 最近才将其加入智能合约中)。我们看到 abi 文件中已经声明了<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hi</code><span>&nbsp;</span>这个<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">Action</code>，并说明了这个<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">Action</code><span>&nbsp;</span>的李嘉图合约，大概意思是本合约的输入为一串字符（user），本合约意图是打印输出，没有其他效果。</p>
  <h3 style="font-size:1.3em;color:rgb(255,255,255);line-height:inherit;letter-spacing:2px;background-color:rgb(63,81,181);border-left:10px solid rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><span style="color:inherit;line-height:inherit;">上传智能合约</span></h3>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">上传智能合约之前，我们要先给智能合约建立一个账户 EOS 里账户和智能合约是一一对应的。使用 EOS 的 cleos 命令行工具创建账户：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="hljs sql" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;">$ cleos <span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">create</span> <span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">account</span> eosio hello.code EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4 EOS7ijWCBmoXBi3CgtK7DJxentZZeTkeUnaSDvyro9dq7Sd1C3dC4<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">命令中，<code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hello.code</code><span>&nbsp;</span>就是这个智能合约的账户名，EOS系统的账户名要求 12 字符以内。后面两个公钥是在本地测试网络中有建立账户权限的公钥（对应本地测试网络中的 eosio 账户）。</p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">然后就可以上传智能合约了：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="hljs shell" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;"><span class="hljs-meta" style="color:rgb(91,218,237);line-height:inherit;">$</span><span class="bash" style="color:inherit;line-height:inherit;"> cleos <span class="hljs-built_in" style="color:rgb(248,35,117);line-height:inherit;">set</span> contract hello.code ../hello -p hello.code</span><br style="color:inherit;line-height:inherit;"></code></pre>
  <h3 style="font-size:1.3em;color:rgb(255,255,255);line-height:inherit;letter-spacing:2px;background-color:rgb(63,81,181);border-left:10px solid rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><span style="color:inherit;line-height:inherit;">使用智能合约</span></h3>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">我们使用<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">user</code><span>&nbsp;</span>账户调用<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hello.code</code><span>&nbsp;</span>的<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hi</code><span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">Action</code>:</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="hljs perl" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;">$ cleos <span class="hljs-keyword" style="color:rgb(248,35,117);line-height:inherit;">push</span> action hello.code hi <span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">'["user"]'</span> -p user<br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);"><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hello.code</code><span>&nbsp;</span>表示执行 hello.code 合约，<code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hi</code><span>&nbsp;</span>表示执行合约里的 hi Action，<code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">'["user"]'</code><span>&nbsp;</span>是根据 abi 写的传入参数，<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">-p</code><span>&nbsp;</span>参数表示使用哪个账户的权限 (permission)。</p>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">以下是系统回应：</p>
  <pre style="font-size:16px;color:rgb(62,62,62);line-height:inherit;background-color:rgb(255,255,255);"><code class="hljs shell" style="color:rgb(169,183,198);line-height:18px;background-color:rgb(40,43,46);letter-spacing:0px;">executed transaction: 4c10c1426c16b1656e802f3302677594731b380b18a44851d38e8b5275072857  244 bytes  1000 cycles<br style="color:inherit;line-height:inherit;"><span class="hljs-meta" style="color:rgb(91,218,237);line-height:inherit;">#</span><span class="bash" style="color:inherit;line-height:inherit;"> hello.code &lt;= hello.code::hi {<span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"user"</span>:<span class="hljs-string" style="color:rgb(238,220,112);line-height:inherit;">"user"</span>}</span><br style="color:inherit;line-height:inherit;"><span class="hljs-meta" style="color:rgb(91,218,237);line-height:inherit;">&gt;</span><span class="bash" style="color:inherit;line-height:inherit;">&gt; Hello, user</span><br style="color:inherit;line-height:inherit;"></code></pre>
  <p style="color:rgb(62,62,62);line-height:inherit;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;background-color:rgb(255,255,255);">说明执行了<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hello.code</code><span>&nbsp;</span>合约的<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">hi</code><span>&nbsp;</span>Action，并且系统输出为<span>&nbsp;</span><code style="color:rgb(233,105,0);line-height:inherit;background:rgb(248,248,248);">Hello, user</code>,智能合约成功对 Action 进行了回应。</p>
  <p style="font-weight:bold;min-height:1em;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;clear:both;"><span style="font-size:14px;">End&nbsp;<img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="background-color:rgb(255,255,255);border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="background-color:rgb(255,255,255);border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"></span></p>
  <br style="color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
  <p style="color:rgb(86,86,86);line-height:30px;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;"><span style="letter-spacing:.544px;background-color:rgb(255,255,255);color:rgb(75,75,75);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:13px;"><span></span></span></p>
  <br>
  <br>
  <p style="font-weight:bold;min-height:1em;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;clear:both;"><span style="font-size:14px;">End&nbsp;<img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="background-color:rgb(255,255,255);border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="background-color:rgb(255,255,255);border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"></span></p>
  <br style="color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
  <p style="color:rgb(86,86,86);line-height:30px;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;"><span class="token p" style="color:rgb(90,90,90);font-family:'PingFang SC', 'Hiragino Sans GB', Arial, 'Microsoft YaHei', Roboto, Noto, 'Helvetica Neue', sans-serif;background-color:rgb(241,241,241);"></span><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;</span><br style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">许晓笛老师的CSDN学院视频专栏&nbsp;</span><a href="https://edu.csdn.net/lecturer/2008" rel="nofollow" style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">https://edu.csdn.net/lecturer/2008</a><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">&nbsp;</span><br style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">郭金宏老师的csdn学院视频专栏：</span><a href="https://edu.csdn.net/lecturer/2214" rel="nofollow" style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">https://edu.csdn.net/lecturer/2214</a></p>
  <div style="color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;text-align:center;"></div>
  <br>
  <div>
   <p style="font-weight:bold;min-height:1em;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;clear:both;"><span style="font-size:14px;">End&nbsp;<img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="background-color:rgb(255,255,255);border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="background-color:rgb(255,255,255);border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"></span></p>
   <br style="color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;"><span class="token p" style="color:rgb(90,90,90);font-family:'PingFang SC', 'Hiragino Sans GB', Arial, 'Microsoft YaHei', Roboto, Noto, 'Helvetica Neue', sans-serif;background-color:rgb(241,241,241);"></span><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;</span><br style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">许晓笛老师的CSDN学院视频专栏&nbsp;</span><a href="https://edu.csdn.net/lecturer/2008" rel="nofollow" style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">https://edu.csdn.net/lecturer/2008</a><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">&nbsp;</span><br style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">郭金宏老师的csdn学院视频专栏：</span><a href="https://edu.csdn.net/lecturer/2214" rel="nofollow" style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">https://edu.csdn.net/lecturer/2214</a></p>
  </div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/yuanfangyuan_block/article/details/80067584,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/yuanfangyuan_block/article/details/80067584,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
