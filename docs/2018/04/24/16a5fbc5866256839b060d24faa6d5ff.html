<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>深入以太坊智能合约 ABI | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="深入以太坊智能合约 ABI" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="开发 DApp 时要调用在区块链上的以太坊智能合约，就需要智能合约的 ABI。本文希望更多了解 ABI，如为什么需要 ABI？如何解读 Ethereum 的智能合约 ABI？以及如何取得合约的 ABI？ 数字猫合约 ABI ABI（Application Binary Interface） 如果理解 API 就很容易了解 ABI。简单来说，API 是程序与程序间互动的接口。这个接口包含程序提供外界存取所需的 functions、variables 等。ABI 也是程序间互动的接口，但程序是被编译后的 binary code。所以同样的接口，但传递的是 binary 格式的信息。所以 ABI 就要描述如何 decode/encode 程序间传递的 binary 信息。下图以 Linux 为例，描述 Linux 中 API、ABI 和程序的关系。 Linux API and ABI 编译和部署智能合约 在 Ethereum 智能合约可以被大家使用前，必须先被部署到区块链上。 从智能合约的代码到使用智能合约，大概包含几个步骤： 编写智能合约的代码（一般是用 Solidity 写） 编译智能合约的代码变成可在 EVM 上执行的 bytecode（binary code）。同时可以通过编译取得智能合约的 ABI 部署智能合约，实际上是把 bytecode 存储在链上（通过一个transaction），并取得一个专属于这个合约的地址 如果要写个程序调用这个智能合约，就要把信息发送到这个合约的地址（一样的也是通过一个 transaction）。Ethereum 节点会根据输入的信息，选择要执行合约中的哪一个 function 和要输入的参数 而要如何知道這这个智能合约提供哪些 function 以及应该要传入什么样的参数呢？这些信息就是记录在智能合约的 ABI！ Ethereum 智能合约 ABI Ethereum 智能合约 ABI 用一个 array 表示，其中会包含数个用 JSON 格式表示的 Function 或 Event。根据最新的 Solidity 文件： Function 共有 7 个参数： name：a string，function 名称 type：a string，&quot;function&quot;, &quot;constructor&quot;, or &quot;fallback&quot; inputs：an array，function 输入的参数，包含： name：a string，参数名 type：a string，参数的 data type(e.g. uint256) components：an array，如果输入的参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的参数类型 outputs：an array，function 的返回值，和&nbsp;inputs&nbsp;使用相同表示方式。如果沒有返回值可忽略，值为&nbsp;[] payable：true，function 是否可收 Ether，预设为&nbsp;false constant：true，function 是否会改写区块链状态，反之为&nbsp;false stateMutability：a string，其值可能为以下其中之一：&quot;pure&quot;（不会读写区块链状态）、&quot;view&quot;（只读不写区块链状态）、&quot;payable&quot; and &quot;nonpayable&quot;（会改区块链状态，且如可收 Ether 为 &quot;payable&quot;，反之为 &quot;nonpayable&quot;） 仔细看会发现&nbsp;payable&nbsp;和&nbsp;constant&nbsp;这两个参数所描述的內容，似乎已包含在&nbsp;stateMutability&nbsp;中。 事实也确实是这样的，在&nbsp;Solidity v0.4.16&nbsp;中把&nbsp;constant&nbsp;这个修饰function 的 key words 分成：&nbsp;view（neither reads from nor writes to the state）和&nbsp;pure（does not modify the state），并从 v0.4.17 开始 Type Checker 会强制检查。constant&nbsp;改为只用来修饰不能被修改的 variable。并在 ABI 中加入&nbsp;stateMutability&nbsp;这个参数统一表示，payable&nbsp;和&nbsp;constant&nbsp;目前保留是为了向后兼容。这个改动详细的內容和讨论可参考：https://github.com/ethereum/solidity/issues/992 Event 共有 4 个参数： name: a string，event 的名称 type: a string，always &quot;event&quot; inputs: an array，输入参数，包含： name: a string，参数名称 type: a string，参数的 data type(e.g. uint256) components: an array，如果输入参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的信息类型 indexed:&nbsp;true，如果这个参数被定义为 indexed ，反之为&nbsp;false anonymous:&nbsp;true，如果 event 被定义为 anonymous 更新智能合约状态需要发送 transaction，transaction 需要等待验证，所以更新合约状态是非同步的，无法马上取得返回值。使用 Event 可以在状态更新成功后，将相关信息记录到 Log，并让监听这个 Event 的 DApp 或任何应用这个接口的程序收到通知。每笔 transaction 都有对应的 Log。 所以简单来说，Event 可用來：1. 取得 function 更新合约状态的返回值 2. 也可作为合约另外的存储空间。 Event 的参数分为：有&nbsp;indexed，和其他没有&nbsp;indexed&nbsp;的。有&nbsp;indexed&nbsp;的参数可以使用 filter，例如同一个 Event，我可以选择只监听从特定 address 发出来的交易。每笔 Log 的信息同样分为两个部分：Topics（长度最多为 4 的 array） 和 Data。有&nbsp;indexed&nbsp;的参数会存储存在 Log 的 Topics，其他的存在 Data。如果定义为&nbsp;anonymous，就不会产生以下示例中的 Topics[0]，其值为 Event signature 的 hash，作为這個 Event 的 ID。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Event event Set(address indexed _from, uint value) 用一个简单的智能合约举个例子 这个智能合约包含： data：一个可修改的 state variable，会自动产生一个只能读取的&nbsp;data()&nbsp;function set()：一个修改&nbsp;data&nbsp;值的 function Set()：一个在每次修写&nbsp;data&nbsp;时记录 Log 的 event 智能合约 Source Code： pragma solidity ^0.4.20; contract SimpleStorage { uint public data; event Set(address indexed _from, uint value); function set(uint x) public { data = x; Set(msg.sender, x); } } 智能合约 ABI： [{ &quot;constant&quot;: true, &quot;inputs&quot;: [], &quot;name&quot;: &quot;data&quot;, &quot;outputs&quot;: [{&quot;name&quot;: &quot;&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;payable&quot;: false, &quot;stateMutabㄒility&quot;: &quot;view&quot;, &quot;type&quot;: &quot;function&quot; }, { &quot;anonymous&quot;: false, &quot;inputs&quot;: [{&quot;indexed&quot;: true,&quot;name&quot;: &quot;_from&quot;,&quot;type&quot;: &quot;address&quot;},{&quot;indexed&quot;: false,&quot;name&quot;: &quot;value&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;name&quot;: &quot;Set&quot;, &quot;type&quot;: &quot;event&quot; }, { &quot;constant&quot;: false, &quot;inputs&quot;: [{&quot;name&quot;: &quot;x&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;name&quot;: &quot;set&quot;, &quot;outputs&quot;: [], &quot;payable&quot;: false, &quot;stateMutability&quot;: &quot;nonpayable&quot;, &quot;type&quot;: &quot;function&quot; }] 取得 Ethereum 智能合约 ABI Solidity Compiler 可以用 Solidity Compiler 取得合约 ABI，我使用 JavaScript 版本的 Compiler 为例。 安装： npm install solc -g 取得合约 ABI： solcjs simpleStorage.sol --abi 会生成一个 simpleStorage_sol_SimpleStorage.abi 文件，里面就是合约ABI 內容。 也可以取得合约的 binary code： solcjs your_contract.sol --bin Remix 同样的使用 Solidity Compiler，也可以用 Remix。在合约的 Details 可以看到完整的 ABI。可以在 Settings 中指定 Compiler 版本。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Remix Etherscan 许多知名合约会把合约 source code 放上 Etherscan 做验证，可以同时看到h 合约ABI。 Etherscan 另外 Etherscan 提供&nbsp;API，可用来取得经过验证的合约 ABI。 顺便安利两个区块链、以太坊开发DApp的实战教程：1. 适合区块链新手的以太坊DApp开发：http://xc.hubwiz.com/course/5a952991adb3847553d205d12. 用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台:http://xc.hubwiz.com/course/5abbb7acc02e6b6a59171dd6 阅读更多" />
<meta property="og:description" content="开发 DApp 时要调用在区块链上的以太坊智能合约，就需要智能合约的 ABI。本文希望更多了解 ABI，如为什么需要 ABI？如何解读 Ethereum 的智能合约 ABI？以及如何取得合约的 ABI？ 数字猫合约 ABI ABI（Application Binary Interface） 如果理解 API 就很容易了解 ABI。简单来说，API 是程序与程序间互动的接口。这个接口包含程序提供外界存取所需的 functions、variables 等。ABI 也是程序间互动的接口，但程序是被编译后的 binary code。所以同样的接口，但传递的是 binary 格式的信息。所以 ABI 就要描述如何 decode/encode 程序间传递的 binary 信息。下图以 Linux 为例，描述 Linux 中 API、ABI 和程序的关系。 Linux API and ABI 编译和部署智能合约 在 Ethereum 智能合约可以被大家使用前，必须先被部署到区块链上。 从智能合约的代码到使用智能合约，大概包含几个步骤： 编写智能合约的代码（一般是用 Solidity 写） 编译智能合约的代码变成可在 EVM 上执行的 bytecode（binary code）。同时可以通过编译取得智能合约的 ABI 部署智能合约，实际上是把 bytecode 存储在链上（通过一个transaction），并取得一个专属于这个合约的地址 如果要写个程序调用这个智能合约，就要把信息发送到这个合约的地址（一样的也是通过一个 transaction）。Ethereum 节点会根据输入的信息，选择要执行合约中的哪一个 function 和要输入的参数 而要如何知道這这个智能合约提供哪些 function 以及应该要传入什么样的参数呢？这些信息就是记录在智能合约的 ABI！ Ethereum 智能合约 ABI Ethereum 智能合约 ABI 用一个 array 表示，其中会包含数个用 JSON 格式表示的 Function 或 Event。根据最新的 Solidity 文件： Function 共有 7 个参数： name：a string，function 名称 type：a string，&quot;function&quot;, &quot;constructor&quot;, or &quot;fallback&quot; inputs：an array，function 输入的参数，包含： name：a string，参数名 type：a string，参数的 data type(e.g. uint256) components：an array，如果输入的参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的参数类型 outputs：an array，function 的返回值，和&nbsp;inputs&nbsp;使用相同表示方式。如果沒有返回值可忽略，值为&nbsp;[] payable：true，function 是否可收 Ether，预设为&nbsp;false constant：true，function 是否会改写区块链状态，反之为&nbsp;false stateMutability：a string，其值可能为以下其中之一：&quot;pure&quot;（不会读写区块链状态）、&quot;view&quot;（只读不写区块链状态）、&quot;payable&quot; and &quot;nonpayable&quot;（会改区块链状态，且如可收 Ether 为 &quot;payable&quot;，反之为 &quot;nonpayable&quot;） 仔细看会发现&nbsp;payable&nbsp;和&nbsp;constant&nbsp;这两个参数所描述的內容，似乎已包含在&nbsp;stateMutability&nbsp;中。 事实也确实是这样的，在&nbsp;Solidity v0.4.16&nbsp;中把&nbsp;constant&nbsp;这个修饰function 的 key words 分成：&nbsp;view（neither reads from nor writes to the state）和&nbsp;pure（does not modify the state），并从 v0.4.17 开始 Type Checker 会强制检查。constant&nbsp;改为只用来修饰不能被修改的 variable。并在 ABI 中加入&nbsp;stateMutability&nbsp;这个参数统一表示，payable&nbsp;和&nbsp;constant&nbsp;目前保留是为了向后兼容。这个改动详细的內容和讨论可参考：https://github.com/ethereum/solidity/issues/992 Event 共有 4 个参数： name: a string，event 的名称 type: a string，always &quot;event&quot; inputs: an array，输入参数，包含： name: a string，参数名称 type: a string，参数的 data type(e.g. uint256) components: an array，如果输入参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的信息类型 indexed:&nbsp;true，如果这个参数被定义为 indexed ，反之为&nbsp;false anonymous:&nbsp;true，如果 event 被定义为 anonymous 更新智能合约状态需要发送 transaction，transaction 需要等待验证，所以更新合约状态是非同步的，无法马上取得返回值。使用 Event 可以在状态更新成功后，将相关信息记录到 Log，并让监听这个 Event 的 DApp 或任何应用这个接口的程序收到通知。每笔 transaction 都有对应的 Log。 所以简单来说，Event 可用來：1. 取得 function 更新合约状态的返回值 2. 也可作为合约另外的存储空间。 Event 的参数分为：有&nbsp;indexed，和其他没有&nbsp;indexed&nbsp;的。有&nbsp;indexed&nbsp;的参数可以使用 filter，例如同一个 Event，我可以选择只监听从特定 address 发出来的交易。每笔 Log 的信息同样分为两个部分：Topics（长度最多为 4 的 array） 和 Data。有&nbsp;indexed&nbsp;的参数会存储存在 Log 的 Topics，其他的存在 Data。如果定义为&nbsp;anonymous，就不会产生以下示例中的 Topics[0]，其值为 Event signature 的 hash，作为這個 Event 的 ID。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Event event Set(address indexed _from, uint value) 用一个简单的智能合约举个例子 这个智能合约包含： data：一个可修改的 state variable，会自动产生一个只能读取的&nbsp;data()&nbsp;function set()：一个修改&nbsp;data&nbsp;值的 function Set()：一个在每次修写&nbsp;data&nbsp;时记录 Log 的 event 智能合约 Source Code： pragma solidity ^0.4.20; contract SimpleStorage { uint public data; event Set(address indexed _from, uint value); function set(uint x) public { data = x; Set(msg.sender, x); } } 智能合约 ABI： [{ &quot;constant&quot;: true, &quot;inputs&quot;: [], &quot;name&quot;: &quot;data&quot;, &quot;outputs&quot;: [{&quot;name&quot;: &quot;&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;payable&quot;: false, &quot;stateMutabㄒility&quot;: &quot;view&quot;, &quot;type&quot;: &quot;function&quot; }, { &quot;anonymous&quot;: false, &quot;inputs&quot;: [{&quot;indexed&quot;: true,&quot;name&quot;: &quot;_from&quot;,&quot;type&quot;: &quot;address&quot;},{&quot;indexed&quot;: false,&quot;name&quot;: &quot;value&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;name&quot;: &quot;Set&quot;, &quot;type&quot;: &quot;event&quot; }, { &quot;constant&quot;: false, &quot;inputs&quot;: [{&quot;name&quot;: &quot;x&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;name&quot;: &quot;set&quot;, &quot;outputs&quot;: [], &quot;payable&quot;: false, &quot;stateMutability&quot;: &quot;nonpayable&quot;, &quot;type&quot;: &quot;function&quot; }] 取得 Ethereum 智能合约 ABI Solidity Compiler 可以用 Solidity Compiler 取得合约 ABI，我使用 JavaScript 版本的 Compiler 为例。 安装： npm install solc -g 取得合约 ABI： solcjs simpleStorage.sol --abi 会生成一个 simpleStorage_sol_SimpleStorage.abi 文件，里面就是合约ABI 內容。 也可以取得合约的 binary code： solcjs your_contract.sol --bin Remix 同样的使用 Solidity Compiler，也可以用 Remix。在合约的 Details 可以看到完整的 ABI。可以在 Settings 中指定 Compiler 版本。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Remix Etherscan 许多知名合约会把合约 source code 放上 Etherscan 做验证，可以同时看到h 合约ABI。 Etherscan 另外 Etherscan 提供&nbsp;API，可用来取得经过验证的合约 ABI。 顺便安利两个区块链、以太坊开发DApp的实战教程：1. 适合区块链新手的以太坊DApp开发：http://xc.hubwiz.com/course/5a952991adb3847553d205d12. 用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台:http://xc.hubwiz.com/course/5abbb7acc02e6b6a59171dd6 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/04/24/16a5fbc5866256839b060d24faa6d5ff.html" />
<meta property="og:url" content="https://mlh.app/2018/04/24/16a5fbc5866256839b060d24faa6d5ff.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-24T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"开发 DApp 时要调用在区块链上的以太坊智能合约，就需要智能合约的 ABI。本文希望更多了解 ABI，如为什么需要 ABI？如何解读 Ethereum 的智能合约 ABI？以及如何取得合约的 ABI？ 数字猫合约 ABI ABI（Application Binary Interface） 如果理解 API 就很容易了解 ABI。简单来说，API 是程序与程序间互动的接口。这个接口包含程序提供外界存取所需的 functions、variables 等。ABI 也是程序间互动的接口，但程序是被编译后的 binary code。所以同样的接口，但传递的是 binary 格式的信息。所以 ABI 就要描述如何 decode/encode 程序间传递的 binary 信息。下图以 Linux 为例，描述 Linux 中 API、ABI 和程序的关系。 Linux API and ABI 编译和部署智能合约 在 Ethereum 智能合约可以被大家使用前，必须先被部署到区块链上。 从智能合约的代码到使用智能合约，大概包含几个步骤： 编写智能合约的代码（一般是用 Solidity 写） 编译智能合约的代码变成可在 EVM 上执行的 bytecode（binary code）。同时可以通过编译取得智能合约的 ABI 部署智能合约，实际上是把 bytecode 存储在链上（通过一个transaction），并取得一个专属于这个合约的地址 如果要写个程序调用这个智能合约，就要把信息发送到这个合约的地址（一样的也是通过一个 transaction）。Ethereum 节点会根据输入的信息，选择要执行合约中的哪一个 function 和要输入的参数 而要如何知道這这个智能合约提供哪些 function 以及应该要传入什么样的参数呢？这些信息就是记录在智能合约的 ABI！ Ethereum 智能合约 ABI Ethereum 智能合约 ABI 用一个 array 表示，其中会包含数个用 JSON 格式表示的 Function 或 Event。根据最新的 Solidity 文件： Function 共有 7 个参数： name：a string，function 名称 type：a string，&quot;function&quot;, &quot;constructor&quot;, or &quot;fallback&quot; inputs：an array，function 输入的参数，包含： name：a string，参数名 type：a string，参数的 data type(e.g. uint256) components：an array，如果输入的参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的参数类型 outputs：an array，function 的返回值，和&nbsp;inputs&nbsp;使用相同表示方式。如果沒有返回值可忽略，值为&nbsp;[] payable：true，function 是否可收 Ether，预设为&nbsp;false constant：true，function 是否会改写区块链状态，反之为&nbsp;false stateMutability：a string，其值可能为以下其中之一：&quot;pure&quot;（不会读写区块链状态）、&quot;view&quot;（只读不写区块链状态）、&quot;payable&quot; and &quot;nonpayable&quot;（会改区块链状态，且如可收 Ether 为 &quot;payable&quot;，反之为 &quot;nonpayable&quot;） 仔细看会发现&nbsp;payable&nbsp;和&nbsp;constant&nbsp;这两个参数所描述的內容，似乎已包含在&nbsp;stateMutability&nbsp;中。 事实也确实是这样的，在&nbsp;Solidity v0.4.16&nbsp;中把&nbsp;constant&nbsp;这个修饰function 的 key words 分成：&nbsp;view（neither reads from nor writes to the state）和&nbsp;pure（does not modify the state），并从 v0.4.17 开始 Type Checker 会强制检查。constant&nbsp;改为只用来修饰不能被修改的 variable。并在 ABI 中加入&nbsp;stateMutability&nbsp;这个参数统一表示，payable&nbsp;和&nbsp;constant&nbsp;目前保留是为了向后兼容。这个改动详细的內容和讨论可参考：https://github.com/ethereum/solidity/issues/992 Event 共有 4 个参数： name: a string，event 的名称 type: a string，always &quot;event&quot; inputs: an array，输入参数，包含： name: a string，参数名称 type: a string，参数的 data type(e.g. uint256) components: an array，如果输入参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的信息类型 indexed:&nbsp;true，如果这个参数被定义为 indexed ，反之为&nbsp;false anonymous:&nbsp;true，如果 event 被定义为 anonymous 更新智能合约状态需要发送 transaction，transaction 需要等待验证，所以更新合约状态是非同步的，无法马上取得返回值。使用 Event 可以在状态更新成功后，将相关信息记录到 Log，并让监听这个 Event 的 DApp 或任何应用这个接口的程序收到通知。每笔 transaction 都有对应的 Log。 所以简单来说，Event 可用來：1. 取得 function 更新合约状态的返回值 2. 也可作为合约另外的存储空间。 Event 的参数分为：有&nbsp;indexed，和其他没有&nbsp;indexed&nbsp;的。有&nbsp;indexed&nbsp;的参数可以使用 filter，例如同一个 Event，我可以选择只监听从特定 address 发出来的交易。每笔 Log 的信息同样分为两个部分：Topics（长度最多为 4 的 array） 和 Data。有&nbsp;indexed&nbsp;的参数会存储存在 Log 的 Topics，其他的存在 Data。如果定义为&nbsp;anonymous，就不会产生以下示例中的 Topics[0]，其值为 Event signature 的 hash，作为這個 Event 的 ID。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Event event Set(address indexed _from, uint value) 用一个简单的智能合约举个例子 这个智能合约包含： data：一个可修改的 state variable，会自动产生一个只能读取的&nbsp;data()&nbsp;function set()：一个修改&nbsp;data&nbsp;值的 function Set()：一个在每次修写&nbsp;data&nbsp;时记录 Log 的 event 智能合约 Source Code： pragma solidity ^0.4.20; contract SimpleStorage { uint public data; event Set(address indexed _from, uint value); function set(uint x) public { data = x; Set(msg.sender, x); } } 智能合约 ABI： [{ &quot;constant&quot;: true, &quot;inputs&quot;: [], &quot;name&quot;: &quot;data&quot;, &quot;outputs&quot;: [{&quot;name&quot;: &quot;&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;payable&quot;: false, &quot;stateMutabㄒility&quot;: &quot;view&quot;, &quot;type&quot;: &quot;function&quot; }, { &quot;anonymous&quot;: false, &quot;inputs&quot;: [{&quot;indexed&quot;: true,&quot;name&quot;: &quot;_from&quot;,&quot;type&quot;: &quot;address&quot;},{&quot;indexed&quot;: false,&quot;name&quot;: &quot;value&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;name&quot;: &quot;Set&quot;, &quot;type&quot;: &quot;event&quot; }, { &quot;constant&quot;: false, &quot;inputs&quot;: [{&quot;name&quot;: &quot;x&quot;,&quot;type&quot;: &quot;uint256&quot;}], &quot;name&quot;: &quot;set&quot;, &quot;outputs&quot;: [], &quot;payable&quot;: false, &quot;stateMutability&quot;: &quot;nonpayable&quot;, &quot;type&quot;: &quot;function&quot; }] 取得 Ethereum 智能合约 ABI Solidity Compiler 可以用 Solidity Compiler 取得合约 ABI，我使用 JavaScript 版本的 Compiler 为例。 安装： npm install solc -g 取得合约 ABI： solcjs simpleStorage.sol --abi 会生成一个 simpleStorage_sol_SimpleStorage.abi 文件，里面就是合约ABI 內容。 也可以取得合约的 binary code： solcjs your_contract.sol --bin Remix 同样的使用 Solidity Compiler，也可以用 Remix。在合约的 Details 可以看到完整的 ABI。可以在 Settings 中指定 Compiler 版本。 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Remix Etherscan 许多知名合约会把合约 source code 放上 Etherscan 做验证，可以同时看到h 合约ABI。 Etherscan 另外 Etherscan 提供&nbsp;API，可用来取得经过验证的合约 ABI。 顺便安利两个区块链、以太坊开发DApp的实战教程：1. 适合区块链新手的以太坊DApp开发：http://xc.hubwiz.com/course/5a952991adb3847553d205d12. 用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台:http://xc.hubwiz.com/course/5abbb7acc02e6b6a59171dd6 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/04/24/16a5fbc5866256839b060d24faa6d5ff.html","headline":"深入以太坊智能合约 ABI","dateModified":"2018-04-24T00:00:00+08:00","datePublished":"2018-04-24T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/04/24/16a5fbc5866256839b060d24faa6d5ff.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>深入以太坊智能合约 ABI</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p>开发 DApp 时要调用在区块链上的以太坊智能合约，就需要智能合约的 ABI。本文希望更多了解 ABI，如为什么需要 ABI？如何解读 Ethereum 的智能合约 ABI？以及如何取得合约的 ABI？<br></p>
  <p><img src="https://upload-images.jianshu.io/upload_images/11831773-f937422962fc1f94.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="" style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;text-align:center;background-color:rgb(255,255,255);border:0px;vertical-align:middle;"></p>
  <div class="image-package" style="width:700px;margin-left:-40px;text-align:center;color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">
   <div class="image-caption" style="min-width:20%;min-height:22px;border-bottom:1px solid rgb(217,217,217);font-size:14px;color:rgb(150,150,150);line-height:1.7;">
    数字猫合约 ABI
   </div>
  </div>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><span style="font-size:22px;font-weight:bold;">ABI（Application Binary Interface）</span></p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">如果理解 API 就很容易了解 ABI。简单来说，API 是程序与程序间互动的接口。这个接口包含程序提供外界存取所需的 functions、variables 等。ABI 也是程序间互动的接口，但程序是被编译后的 binary code。所以同样的接口，但传递的是 binary 格式的信息。所以 ABI 就要描述如何 decode/encode 程序间传递的 binary 信息。下图以 Linux 为例，描述 Linux 中 API、ABI 和程序的关系。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><img src="https://upload-images.jianshu.io/upload_images/11831773-d07312035b86a7df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="" style="background-color:transparent;text-align:center;border:0px;vertical-align:middle;"></p>
  <div class="image-package" style="width:700px;margin-left:-40px;text-align:center;color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">
   <div class="image-caption" style="min-width:20%;min-height:22px;border-bottom:1px solid rgb(217,217,217);font-size:14px;color:rgb(150,150,150);line-height:1.7;">
    Linux API and ABI
   </div>
  </div>
  <h3 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">编译和部署智能合约</h3>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">在 Ethereum 智能合约可以被大家使用前，必须先被部署到区块链上。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">从智能合约的代码到使用智能合约，大概包含几个步骤：</p>
  <ol style="margin-left:20px;color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">
   <li style="line-height:30px;">编写智能合约的代码（一般是用 Solidity 写）</li>
   <li style="line-height:30px;">编译智能合约的代码变成可在 EVM 上执行的 bytecode（binary code）。同时可以通过编译取得智能合约的 ABI</li>
   <li style="line-height:30px;">部署智能合约，实际上是把 bytecode 存储在链上（通过一个transaction），并取得一个专属于这个合约的地址</li>
   <li style="line-height:30px;">如果要写个程序调用这个智能合约，就要把信息发送到这个合约的地址（一样的也是通过一个 transaction）。Ethereum 节点会根据输入的信息，选择要执行合约中的哪一个 function 和要输入的参数</li>
  </ol>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">而要如何知道這这个智能合约提供哪些 function 以及应该要传入什么样的参数呢？这些信息就是记录在智能合约的 ABI！</p>
  <h3 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">Ethereum 智能合约 ABI</h3>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">Ethereum 智能合约 ABI 用一个 array 表示，其中会包含数个用 JSON 格式表示的 Function 或 Event。根据最新的 Solidity 文件：</p>
  <h4 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">Function</h4>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">共有 7 个参数：</p>
  <ol style="margin-left:20px;color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">name</code>：a string，function 名称</p></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">type</code>：a string，"function", "constructor", or "fallback"</p></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">inputs</code>：an array，function 输入的参数，包含：</p>
    <ul style="margin-left:20px;">
     <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">name</code>：a string，参数名</p></li>
     <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">type</code>：a string，参数的 data type(e.g. uint256)</p></li>
     <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">components</code>：an array，如果输入的参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的参数类型</p></li>
    </ul></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">outputs</code>：an array，function 的返回值，和&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">inputs</code>&nbsp;使用相同表示方式。如果沒有返回值可忽略，值为&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">[]</code></p></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">payable</code>：<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">true</code>，function 是否可收 Ether，预设为&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">false</code></p></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">constant</code>：<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">true</code>，function 是否会改写区块链状态，反之为&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">false</code></p></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">stateMutability</code>：a string，其值可能为以下其中之一："pure"（不会读写区块链状态）、"view"（只读不写区块链状态）、"payable" and "nonpayable"（会改区块链状态，且如可收 Ether 为 "payable"，反之为 "nonpayable"）</p></li>
  </ol>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">仔细看会发现&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">payable</code>&nbsp;和&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">constant</code>&nbsp;这两个参数所描述的內容，似乎已包含在&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">stateMutability</code>&nbsp;中。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">事实也确实是这样的，在&nbsp;<a href="https://link.jianshu.com/?t=https%3A%2F%2Fgithub.com%2Fethereum%2Fsolidity%2Freleases" rel="nofollow" style="background-color:transparent;color:rgb(49,148,208);">Solidity v0.4.16</a>&nbsp;中把&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">constant</code>&nbsp;这个修饰function 的 key words 分成：&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">view</code>（neither reads from nor writes to the state）和&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">pure</code>（does not modify the state），并从 v0.4.17 开始 Type Checker 会强制检查。<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">constant</code>&nbsp;改为只用来修饰不能被修改的 variable。并在 ABI 中加入&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">stateMutability</code>&nbsp;这个参数统一表示，<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">payable</code>&nbsp;和&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">constant</code>&nbsp;目前保留是为了向后兼容。这个改动详细的內容和讨论可参考：<br><a href="https://link.jianshu.com/?t=https%3A%2F%2Fgithub.com%2Fethereum%2Fsolidity%2Fissues%2F992" rel="nofollow" style="background-color:transparent;color:rgb(49,148,208);">https://github.com/ethereum/solidity/issues/992</a></p>
  <h4 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">Event</h4>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">共有 4 个参数：</p>
  <ol style="margin-left:20px;color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">name</code>: a string，event 的名称</p></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">type</code>: a string，always "event"</p></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">inputs</code>: an array，输入参数，包含：</p>
    <ul style="margin-left:20px;">
     <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">name</code>: a string，参数名称</p></li>
     <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">type</code>: a string，参数的 data type(e.g. uint256)</p></li>
     <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">components</code>: an array，如果输入参数是 tuple(struct) type 才会有这个参数。描述 struct 中包含的信息类型</p></li>
     <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">indexed</code>:&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">true</code>，如果这个参数被定义为 indexed ，反之为&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">false</code></p></li>
    </ul></li>
   <li style="line-height:30px;"><p><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">anonymous</code>:&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">true</code>，如果 event 被定义为 anonymous</p></li>
  </ol>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">更新智能合约状态需要发送 transaction，transaction 需要等待验证，所以更新合约状态是非同步的，无法马上取得返回值。使用 Event 可以在状态更新成功后，将相关信息记录到 Log，并让监听这个 Event 的 DApp 或任何应用这个接口的程序收到通知。每笔 transaction 都有对应的 Log。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">所以简单来说，Event 可用來：1. 取得 function 更新合约状态的返回值 2. 也可作为合约另外的存储空间。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">Event 的参数分为：有&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">indexed</code>，和其他没有&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">indexed</code>&nbsp;的。有&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">indexed</code>&nbsp;的参数可以使用 filter，例如同一个 Event，我可以选择只监听从特定 address 发出来的交易。每笔 Log 的信息同样分为两个部分：Topics（长度最多为 4 的 array） 和 Data。有&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">indexed</code>&nbsp;的参数会存储存在 Log 的 Topics，其他的存在 Data。如果定义为&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">anonymous</code>，就不会产生以下示例中的 Topics[0]，其值为 Event signature 的 hash，作为這個 Event 的 ID。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><img src="https://upload-images.jianshu.io/upload_images/11831773-fb419508dfc0d2bc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="" style="background-color:transparent;text-align:center;border:0px;vertical-align:middle;"></p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><span style="background-color:transparent;text-align:center;color:rgb(150,150,150);font-size:14px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Event</span></p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">event Set(address indexed _from, uint value)</code></p>
  <h3 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">用一个简单的智能合约举个例子</h3>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">这个智能合约包含：</p>
  <ul style="margin-left:20px;color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">
   <li style="line-height:30px;"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">data</code>：一个可修改的 state variable，会自动产生一个只能读取的&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">data()</code>&nbsp;function</li>
   <li style="line-height:30px;"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">set()</code>：一个修改&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">data</code>&nbsp;值的 function</li>
   <li style="line-height:30px;"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">Set()</code>：一个在每次修写&nbsp;<code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">data</code>&nbsp;时记录 Log 的 event</li>
  </ul>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">智能合约 Source Code：</p>
  <pre><code class="language-javascript"><code class="javascript" style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;color:rgb(101,123,131);background-color:transparent;border:none;">pragma solidity ^<span class="hljs-number" style="color:rgb(42,161,152);">0.4</span><span class="hljs-number" style="color:rgb(42,161,152);">.20</span>; contract SimpleStorage { uint public data; event <span class="hljs-built_in" style="color:rgb(38,139,210);">Set</span>(address indexed _from, uint value); <span class="hljs-function"><span class="hljs-keyword" style="color:rgb(133,153,0);">function</span> <span class="hljs-title" style="color:rgb(38,139,210);">set</span>(<span class="hljs-params">uint x</span>) <span class="hljs-title" style="color:rgb(38,139,210);">public</span> </span>{ data = x; <span class="hljs-built_in" style="color:rgb(38,139,210);">Set</span>(msg.sender, x); } } </code></code></pre>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">智能合约 ABI：</p>
  <pre class="hljs json" style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:13px;line-height:1.42857;color:rgb(101,123,131);background-color:rgb(246,246,246);border:1px solid rgb(204,204,204);"><code class="json" style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:12px;color:rgb(101,123,131);background-color:transparent;border:none;">[{
        <span class="hljs-attr">"constant"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">"inputs"</span>: [],
        <span class="hljs-attr">"name"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"data"</span>,
        <span class="hljs-attr">"outputs"</span>: [{<span class="hljs-attr">"name"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">""</span>,<span class="hljs-attr">"type"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"uint256"</span>}],
        <span class="hljs-attr">"payable"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"stateMutabㄒility"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"view"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"function"</span>
    },
    {
        <span class="hljs-attr">"anonymous"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"inputs"</span>: [{<span class="hljs-attr">"indexed"</span>: <span class="hljs-literal">true</span>,<span class="hljs-attr">"name"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"_from"</span>,<span class="hljs-attr">"type"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"address"</span>},{<span class="hljs-attr">"indexed"</span>: <span class="hljs-literal">false</span>,<span class="hljs-attr">"name"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"value"</span>,<span class="hljs-attr">"type"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"uint256"</span>}],
        <span class="hljs-attr">"name"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"Set"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"event"</span>
    },
    {
        <span class="hljs-attr">"constant"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"inputs"</span>: [{<span class="hljs-attr">"name"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"x"</span>,<span class="hljs-attr">"type"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"uint256"</span>}],
        <span class="hljs-attr">"name"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"set"</span>,
        <span class="hljs-attr">"outputs"</span>: [],
        <span class="hljs-attr">"payable"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"stateMutability"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"nonpayable"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string" style="color:rgb(42,161,152);">"function"</span>
}]
</code></pre>
  <h3 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">取得 Ethereum 智能合约 ABI</h3>
  <h4 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">Solidity Compiler</h4>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">可以用 Solidity Compiler 取得合约 ABI，我使用 JavaScript 版本的 Compiler 为例。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">安装：</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">npm install solc -g</code></p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">取得合约 ABI：</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">solcjs simpleStorage.sol --abi</code></p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">会生成一个 simpleStorage_sol_SimpleStorage.abi 文件，里面就是合约ABI 內容。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">也可以取得合约的 binary code：</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(101,123,131);background-color:rgb(246,246,246);border:none;">solcjs your_contract.sol --bin</code></p>
  <h4 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">Remix</h4>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">同样的使用 Solidity Compiler，也可以用 Remix。在合约的 Details 可以看到完整的 ABI。可以在 Settings 中指定 Compiler 版本。</p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><img src="https://upload-images.jianshu.io/upload_images/11831773-4f94ee9fce3e3906.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt="" style="background-color:transparent;text-align:center;border:0px;vertical-align:middle;"></p>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><span style="background-color:transparent;text-align:center;color:rgb(150,150,150);font-size:14px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Remix</span></p>
  <h4 style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;line-height:1.7;color:rgb(47,47,47);background-color:rgb(255,255,255);">Etherscan</h4>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">许多知名合约会把合约 source code 放上 Etherscan 做验证，可以同时看到h 合约ABI。</p>
  <div class="image-package" style="width:700px;margin-left:-40px;text-align:center;color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">
   <div class="image-container" style="background-color:transparent;">
    <div class="image-view" style="width:700px;">
     <img src="https://upload-images.jianshu.io/upload_images/11831773-6cd385bc69aca28c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" style="border:0px;vertical-align:middle;" alt="">
    </div>
   </div>
   <div class="image-caption" style="min-width:20%;min-height:22px;border-bottom:1px solid rgb(217,217,217);font-size:14px;color:rgb(150,150,150);line-height:1.7;">
    Etherscan
   </div>
  </div>
  <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">另外 Etherscan 提供&nbsp;<a href="https://link.jianshu.com/?t=https%3A%2F%2Fetherscan.io%2Fapis%23contracts" rel="nofollow" style="background-color:transparent;color:rgb(49,148,208);">API</a>，可用来取得经过验证的合约 ABI。</p>
  <div>
   <p style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);">顺便安利两个区块链、以太坊开发DApp的实战教程：<br>1. 适合区块链新手的以太坊DApp开发：<br><span style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><a href="http://xc.hubwiz.com/course/5a952991adb3847553d205d1?affid=20180424csdnw" rel="nofollow">http://xc.hubwiz.com/course/5a952991adb3847553d205d1</a></span><br>2. 用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台:<br><span style="color:rgb(47,47,47);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;background-color:rgb(255,255,255);"><a href="http://xc.hubwiz.com/course/5abbb7acc02e6b6a59171dd6/?affid=20180424csdnw" rel="nofollow">http://xc.hubwiz.com/course/5abbb7acc02e6b6a59171dd6</a></span><br></p>
  </div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mongo_node/article/details/80060683,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mongo_node/article/details/80060683,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
