<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>多节点FastCoin山寨币的搭建 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="多节点FastCoin山寨币的搭建" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="这篇文章给出了Fastcoin多节点环境的搭建文档，FastCoin是一个由@harrywu修改BitCoin源代码产生的一个简单的山寨币。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。 1 FastCoin简介 FastCoin是一个由@harrywu修改BitCoin源代码产生的一个简单的山寨币。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。 2 系统环境 该文档的采用了两个节点进行测试，两个节点的系统环境如下： OS: Ubuntu Linux Kernel: Linux 4.4.0 Memory: 1G gcc Version: 5.4.0 g++ Version: 5.4.0 3 安装准备 该文档采用两个节点对FastCoin山寨币进行搭建，两个节点做同样的配置。 3.1 获取FastCoin源码 git clone https://github.com/imharrywu/fastcoin.git 3.2 安装项目构建依赖 sudo apt-get install build-essential libtool autotools-dev autoconf pkg-config libssl-dev 3.3 安装Berkeley DB 4.8 cd fastcoin/ BITCOIN_ROOT=$(pwd) # 选择 Berkeley DB安装路径，此处为fastcoin子目录下 BDB_PREFIX=&quot;${BITCOIN_ROOT}/db4&quot; mkdir -p $BDB_PREFIX # 获取源码 wget &#39;http://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz&#39; # 校验 echo &#39;12edc0df75bf9abd7f82f821795bcee50f42cb2e5f76a6a281b85732798364ef db-4.8.30.NC.tar.gz&#39; | sha256sum -c # 输出结应该为： -&gt; db-4.8.30.NC.tar.gz: OK # 解压 tar -xzvf db-4.8.30.NC.tar.gz # 构建安装 cd db-4.8.30.NC/build_unix/ ../dist/configure --enable-cxx --disable-shared --with-pic --prefix=$BDB_PREFIX make install 3.4 安装Boost sudo apt-get install libboost-all-dev 3.5 安装miniupnp wget http://miniupnp.tuxfamily.org/files/download.php?file=miniupnpc-1.6.20120410.tar.gz tar -xzvf miniupnpc-1.6.20120410.tar.gz cd miniupnpc-1.6 make sudo make install 也可以使用Ubuntu源进行安装： sudo apt-get install libminiupnpc-dev 4 搭建过程 4.1 编译源码 ./autogen.sh ./configure --with-miniupnpc --without-gui --enable-upnp-default LDFLAGS=&quot;-L${BDB_PREFIX}/lib/&quot; CPPFLAGS=&quot;-I${BDB_PREFIX}/include/&quot; --enable-wallet make make install 编译安装之后，在src目录下会生成相应的二进制文件，主要用到的二进制文件有： bitcoind：fastcoin主程序 bitcoin-cli：fastcoin RPC控制台程序 如果在编译过程中遭遇如下报错信息，详见【6.1 Boost依赖库引起的报错】： /usr/include/boost/variant/get.hpp:178:5: error: invalid application of &#39;sizeof&#39; to incomplete type &#39;boost::STATIC_ASSERTION_FAILURE&lt;false&gt;&#39; BOOST_STATIC_ASSERT_MSG( ^ Makefile:3654: recipe for target &#39;libbitcoin_server_a-rpcrawtransaction.o&#39; failed make[2]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error 1 4.2 相关configuration参数 --without-gui：不使用GUI，如果需要图形化界面，详见【6.6 图形化界面钱包的构建】 --enable-wallet:启用钱包（不启用钱包--disable-wallet也可以进行挖矿，如果不启用钱包，则无需安装Berkeley DB） --enable-debug:启用debug模式 --enable-tests:对测试程序进行编译 CPPFLAGS、LDFLAGS：指定Berkeley DB的路径 5 FastCoin测试 5.1 FastCoin配置文件 vi ~/.fastcoin/fastcoin.conf 在fastcoin.conf文件中添加如下配置信息： # 用户名 rpcuser=user # 密码 rpcpassword=password daemon=1 txindex=1 server=1 5.2 启动bitcoind 在其中一个节点中执行： cd fastcoin/src ./bincoind -gen=1 -reindex -checkpoints=0 另一个节点执行： ./bincoind -gen=1 -reindex -checkpoints=0 -addnode=&quot;另一个节点的IP，例：192.169.1.233&quot; 5.3 bitcoind相关启动参数 -rpcuser=：指定用户名 -rpcpassword=：指定密码 -daemon=：bitcoind作为daemon进程在后台运行 -gen=：生成山寨币（挖矿） -addnode=：添加节点 -reindex：bitcoind启动时从当前blk000??.dat文件中的index重建区块链 -server：启用RPC服务器 5.4 bitcoin-cli 使用./bitcoin-cli &lt;parameters&gt;可以查看当前区块链、网络、钱包等信息。 相关参数有： == Blockchain == getbestblockhash getblock &quot;hash&quot; ( verbose ) getblockchaininfo getblockcount getblockhash index getchaintips getdifficulty getmempoolinfo getrawmempool ( verbose ) gettxout &quot;txid&quot; n ( includemempool ) gettxoutsetinfo verifychain ( checklevel numblocks ) == Control == getinfo help ( &quot;command&quot; ) stop == Generating == getgenerate setgenerate generate ( genproclimit ) == Mining == getblocktemplate ( &quot;jsonrequestobject&quot; ) getmininginfo getnetworkhashps ( blocks height ) prioritisetransaction &lt;txid&gt; &lt;priority delta&gt; &lt;fee delta&gt; submitblock &quot;hexdata&quot; ( &quot;jsonparametersobject&quot; ) == Network == addnode &quot;node&quot; &quot;add|remove|onetry&quot; getaddednodeinfo dns ( &quot;node&quot; ) getconnectioncount getnettotals getnetworkinfo getpeerinfo ping == Rawtransactions == createrawtransaction [{&quot;txid&quot;:&quot;id&quot;,&quot;vout&quot;:n},...] {&quot;address&quot;:amount,...} decoderawtransaction &quot;hexstring&quot; decodescript &quot;hex&quot; getrawtransaction &quot;txid&quot; ( verbose ) sendrawtransaction &quot;hexstring&quot; ( allowhighfees ) signrawtransaction &quot;hexstring&quot; ( [{&quot;txid&quot;:&quot;id&quot;,&quot;vout&quot;:n,&quot;scriptPubKey&quot;:&quot;hex&quot;,&quot;redeemScript&quot;:&quot;hex&quot;},...] [&quot;privatekey1&quot;,...] sighashtype ) == Util == createmultisig nrequired [&quot;key&quot;,...] estimatefee nblocks estimatepriority nblocks validateaddress &quot;fastcoinaddress&quot; verifymessage &quot;fastcoinaddress&quot; &quot;signature&quot; &quot;message&quot; == Wallet == addmultisigaddress nrequired [&quot;key&quot;,...] ( &quot;account&quot; ) backupwallet &quot;destination&quot; dumpprivkey &quot;fastcoinaddress&quot; dumpwallet &quot;filename&quot; encryptwallet &quot;passphrase&quot; getaccount &quot;fastcoinaddress&quot; getaccountaddress &quot;account&quot; getaddressesbyaccount &quot;account&quot; getbalance ( &quot;account&quot; minconf includeWatchonly ) getnewaddress ( &quot;account&quot; ) getrawchangeaddress getreceivedbyaccount &quot;account&quot; ( minconf ) getreceivedbyaddress &quot;fastcoinaddress&quot; ( minconf ) gettransaction &quot;txid&quot; ( includeWatchonly ) getunconfirmedbalance getwalletinfo importaddress &quot;address&quot; ( &quot;label&quot; rescan ) importprivkey &quot;fastcoinprivkey&quot; ( &quot;label&quot; rescan ) importwallet &quot;filename&quot; keypoolrefill ( newsize ) listaccounts ( minconf includeWatchonly) listaddressgroupings listlockunspent listreceivedbyaccount ( minconf includeempty includeWatchonly) listreceivedbyaddress ( minconf includeempty includeWatchonly) listsinceblock ( &quot;blockhash&quot; target-confirmations includeWatchonly) listtransactions ( &quot;account&quot; count from includeWatchonly) listunspent ( minconf maxconf [&quot;address&quot;,...] ) lockunspent unlock [{&quot;txid&quot;:&quot;txid&quot;,&quot;vout&quot;:n},...] move &quot;fromaccount&quot; &quot;toaccount&quot; amount ( minconf &quot;comment&quot; ) sendfrom &quot;fromaccount&quot; &quot;tofastcoinaddress&quot; amount ( minconf &quot;comment&quot; &quot;comment-to&quot; ) sendmany &quot;fromaccount&quot; {&quot;address&quot;:amount,...} ( minconf &quot;comment&quot; ) sendtoaddress &quot;fastcoinaddress&quot; amount ( &quot;comment&quot; &quot;comment-to&quot; ) setaccount &quot;fastcoinaddress&quot; &quot;account&quot; settxfee amount signmessage &quot;fastcoinaddress&quot; &quot;message&quot; 具体的RPC调用可以参考BitCoin RPC API文档。 6 注意事项 6.1 Boost依赖库引起的报错 如果在编译FastCoin源码过程中遭遇如下报错信息，则需要我们对FastCoin源码进行修改： /usr/include/boost/variant/get.hpp:178:5: error: invalid application of &#39;sizeof&#39; to incomplete type &#39;boost::STATIC_ASSERTION_FAILURE&lt;false&gt;&#39; BOOST_STATIC_ASSERT_MSG( ^ Makefile:3654: recipe for target &#39;libbitcoin_server_a-rpcrawtransaction.o&#39; failed make[2]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error 1 将src/rpcrawtransaction.c文件中的第288行： const CScriptID&amp; hash = boost::get&lt;const CScriptID&amp;&gt;(address); 修改为： const CScriptID&amp; hash = boost::get&lt;CScriptID&gt;(address); 6.2 Berkeley DB安装问题 如果不想对Berkeley DB的源码进行编译安装，还可以直接采用Debian源进行安装： sudo add-apt-repository ppa:bitcoin/bitcoin sudo apt-get update sudo apt-get install libdb4.8-dev libdb4.8++-dev 6.3 nTXConfirmTarget参数 该参数是确认目标值，用于计算矿工费用，默认值为1，适用于双节点的系统，如需对该参数进行修改。可以在执行./bitcoind时添加参数-txconfirmtarget=number进行配置。 6.4 txindex参数问题 如果在~/.fastcoin/fastcoin.conf配置文件中添加了txindex参数，则需要在启动bitcoind时添加启动参数—reindex。 6.5 图形化界面钱包的构建 如需使用图形化界面的钱包，需要安装QT并且在./congfiguration时不使用--without-gui选项，FastCoin默认使用QT4： sudo apt-get install libqt4-dev libprotobuf-dev protobuf-compiler 如需使用QT5，需要采用--with-gui=qt5选项，并安装QT5： sudo apt-get install libqt5gui5 libqt5core5a libqt5dbus5 qttools5-dev qttools5-dev-tools libprotobuf-dev protobuf-compiler 本文的版权归作者 罗远航 所有，采用 Attribution-NonCommercial 3.0 License。任何人可以进行转载、分享，但不可在未经允许的情况下用于商业用途；转载请注明出处。感谢配合！ 阅读更多" />
<meta property="og:description" content="这篇文章给出了Fastcoin多节点环境的搭建文档，FastCoin是一个由@harrywu修改BitCoin源代码产生的一个简单的山寨币。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。 1 FastCoin简介 FastCoin是一个由@harrywu修改BitCoin源代码产生的一个简单的山寨币。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。 2 系统环境 该文档的采用了两个节点进行测试，两个节点的系统环境如下： OS: Ubuntu Linux Kernel: Linux 4.4.0 Memory: 1G gcc Version: 5.4.0 g++ Version: 5.4.0 3 安装准备 该文档采用两个节点对FastCoin山寨币进行搭建，两个节点做同样的配置。 3.1 获取FastCoin源码 git clone https://github.com/imharrywu/fastcoin.git 3.2 安装项目构建依赖 sudo apt-get install build-essential libtool autotools-dev autoconf pkg-config libssl-dev 3.3 安装Berkeley DB 4.8 cd fastcoin/ BITCOIN_ROOT=$(pwd) # 选择 Berkeley DB安装路径，此处为fastcoin子目录下 BDB_PREFIX=&quot;${BITCOIN_ROOT}/db4&quot; mkdir -p $BDB_PREFIX # 获取源码 wget &#39;http://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz&#39; # 校验 echo &#39;12edc0df75bf9abd7f82f821795bcee50f42cb2e5f76a6a281b85732798364ef db-4.8.30.NC.tar.gz&#39; | sha256sum -c # 输出结应该为： -&gt; db-4.8.30.NC.tar.gz: OK # 解压 tar -xzvf db-4.8.30.NC.tar.gz # 构建安装 cd db-4.8.30.NC/build_unix/ ../dist/configure --enable-cxx --disable-shared --with-pic --prefix=$BDB_PREFIX make install 3.4 安装Boost sudo apt-get install libboost-all-dev 3.5 安装miniupnp wget http://miniupnp.tuxfamily.org/files/download.php?file=miniupnpc-1.6.20120410.tar.gz tar -xzvf miniupnpc-1.6.20120410.tar.gz cd miniupnpc-1.6 make sudo make install 也可以使用Ubuntu源进行安装： sudo apt-get install libminiupnpc-dev 4 搭建过程 4.1 编译源码 ./autogen.sh ./configure --with-miniupnpc --without-gui --enable-upnp-default LDFLAGS=&quot;-L${BDB_PREFIX}/lib/&quot; CPPFLAGS=&quot;-I${BDB_PREFIX}/include/&quot; --enable-wallet make make install 编译安装之后，在src目录下会生成相应的二进制文件，主要用到的二进制文件有： bitcoind：fastcoin主程序 bitcoin-cli：fastcoin RPC控制台程序 如果在编译过程中遭遇如下报错信息，详见【6.1 Boost依赖库引起的报错】： /usr/include/boost/variant/get.hpp:178:5: error: invalid application of &#39;sizeof&#39; to incomplete type &#39;boost::STATIC_ASSERTION_FAILURE&lt;false&gt;&#39; BOOST_STATIC_ASSERT_MSG( ^ Makefile:3654: recipe for target &#39;libbitcoin_server_a-rpcrawtransaction.o&#39; failed make[2]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error 1 4.2 相关configuration参数 --without-gui：不使用GUI，如果需要图形化界面，详见【6.6 图形化界面钱包的构建】 --enable-wallet:启用钱包（不启用钱包--disable-wallet也可以进行挖矿，如果不启用钱包，则无需安装Berkeley DB） --enable-debug:启用debug模式 --enable-tests:对测试程序进行编译 CPPFLAGS、LDFLAGS：指定Berkeley DB的路径 5 FastCoin测试 5.1 FastCoin配置文件 vi ~/.fastcoin/fastcoin.conf 在fastcoin.conf文件中添加如下配置信息： # 用户名 rpcuser=user # 密码 rpcpassword=password daemon=1 txindex=1 server=1 5.2 启动bitcoind 在其中一个节点中执行： cd fastcoin/src ./bincoind -gen=1 -reindex -checkpoints=0 另一个节点执行： ./bincoind -gen=1 -reindex -checkpoints=0 -addnode=&quot;另一个节点的IP，例：192.169.1.233&quot; 5.3 bitcoind相关启动参数 -rpcuser=：指定用户名 -rpcpassword=：指定密码 -daemon=：bitcoind作为daemon进程在后台运行 -gen=：生成山寨币（挖矿） -addnode=：添加节点 -reindex：bitcoind启动时从当前blk000??.dat文件中的index重建区块链 -server：启用RPC服务器 5.4 bitcoin-cli 使用./bitcoin-cli &lt;parameters&gt;可以查看当前区块链、网络、钱包等信息。 相关参数有： == Blockchain == getbestblockhash getblock &quot;hash&quot; ( verbose ) getblockchaininfo getblockcount getblockhash index getchaintips getdifficulty getmempoolinfo getrawmempool ( verbose ) gettxout &quot;txid&quot; n ( includemempool ) gettxoutsetinfo verifychain ( checklevel numblocks ) == Control == getinfo help ( &quot;command&quot; ) stop == Generating == getgenerate setgenerate generate ( genproclimit ) == Mining == getblocktemplate ( &quot;jsonrequestobject&quot; ) getmininginfo getnetworkhashps ( blocks height ) prioritisetransaction &lt;txid&gt; &lt;priority delta&gt; &lt;fee delta&gt; submitblock &quot;hexdata&quot; ( &quot;jsonparametersobject&quot; ) == Network == addnode &quot;node&quot; &quot;add|remove|onetry&quot; getaddednodeinfo dns ( &quot;node&quot; ) getconnectioncount getnettotals getnetworkinfo getpeerinfo ping == Rawtransactions == createrawtransaction [{&quot;txid&quot;:&quot;id&quot;,&quot;vout&quot;:n},...] {&quot;address&quot;:amount,...} decoderawtransaction &quot;hexstring&quot; decodescript &quot;hex&quot; getrawtransaction &quot;txid&quot; ( verbose ) sendrawtransaction &quot;hexstring&quot; ( allowhighfees ) signrawtransaction &quot;hexstring&quot; ( [{&quot;txid&quot;:&quot;id&quot;,&quot;vout&quot;:n,&quot;scriptPubKey&quot;:&quot;hex&quot;,&quot;redeemScript&quot;:&quot;hex&quot;},...] [&quot;privatekey1&quot;,...] sighashtype ) == Util == createmultisig nrequired [&quot;key&quot;,...] estimatefee nblocks estimatepriority nblocks validateaddress &quot;fastcoinaddress&quot; verifymessage &quot;fastcoinaddress&quot; &quot;signature&quot; &quot;message&quot; == Wallet == addmultisigaddress nrequired [&quot;key&quot;,...] ( &quot;account&quot; ) backupwallet &quot;destination&quot; dumpprivkey &quot;fastcoinaddress&quot; dumpwallet &quot;filename&quot; encryptwallet &quot;passphrase&quot; getaccount &quot;fastcoinaddress&quot; getaccountaddress &quot;account&quot; getaddressesbyaccount &quot;account&quot; getbalance ( &quot;account&quot; minconf includeWatchonly ) getnewaddress ( &quot;account&quot; ) getrawchangeaddress getreceivedbyaccount &quot;account&quot; ( minconf ) getreceivedbyaddress &quot;fastcoinaddress&quot; ( minconf ) gettransaction &quot;txid&quot; ( includeWatchonly ) getunconfirmedbalance getwalletinfo importaddress &quot;address&quot; ( &quot;label&quot; rescan ) importprivkey &quot;fastcoinprivkey&quot; ( &quot;label&quot; rescan ) importwallet &quot;filename&quot; keypoolrefill ( newsize ) listaccounts ( minconf includeWatchonly) listaddressgroupings listlockunspent listreceivedbyaccount ( minconf includeempty includeWatchonly) listreceivedbyaddress ( minconf includeempty includeWatchonly) listsinceblock ( &quot;blockhash&quot; target-confirmations includeWatchonly) listtransactions ( &quot;account&quot; count from includeWatchonly) listunspent ( minconf maxconf [&quot;address&quot;,...] ) lockunspent unlock [{&quot;txid&quot;:&quot;txid&quot;,&quot;vout&quot;:n},...] move &quot;fromaccount&quot; &quot;toaccount&quot; amount ( minconf &quot;comment&quot; ) sendfrom &quot;fromaccount&quot; &quot;tofastcoinaddress&quot; amount ( minconf &quot;comment&quot; &quot;comment-to&quot; ) sendmany &quot;fromaccount&quot; {&quot;address&quot;:amount,...} ( minconf &quot;comment&quot; ) sendtoaddress &quot;fastcoinaddress&quot; amount ( &quot;comment&quot; &quot;comment-to&quot; ) setaccount &quot;fastcoinaddress&quot; &quot;account&quot; settxfee amount signmessage &quot;fastcoinaddress&quot; &quot;message&quot; 具体的RPC调用可以参考BitCoin RPC API文档。 6 注意事项 6.1 Boost依赖库引起的报错 如果在编译FastCoin源码过程中遭遇如下报错信息，则需要我们对FastCoin源码进行修改： /usr/include/boost/variant/get.hpp:178:5: error: invalid application of &#39;sizeof&#39; to incomplete type &#39;boost::STATIC_ASSERTION_FAILURE&lt;false&gt;&#39; BOOST_STATIC_ASSERT_MSG( ^ Makefile:3654: recipe for target &#39;libbitcoin_server_a-rpcrawtransaction.o&#39; failed make[2]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error 1 将src/rpcrawtransaction.c文件中的第288行： const CScriptID&amp; hash = boost::get&lt;const CScriptID&amp;&gt;(address); 修改为： const CScriptID&amp; hash = boost::get&lt;CScriptID&gt;(address); 6.2 Berkeley DB安装问题 如果不想对Berkeley DB的源码进行编译安装，还可以直接采用Debian源进行安装： sudo add-apt-repository ppa:bitcoin/bitcoin sudo apt-get update sudo apt-get install libdb4.8-dev libdb4.8++-dev 6.3 nTXConfirmTarget参数 该参数是确认目标值，用于计算矿工费用，默认值为1，适用于双节点的系统，如需对该参数进行修改。可以在执行./bitcoind时添加参数-txconfirmtarget=number进行配置。 6.4 txindex参数问题 如果在~/.fastcoin/fastcoin.conf配置文件中添加了txindex参数，则需要在启动bitcoind时添加启动参数—reindex。 6.5 图形化界面钱包的构建 如需使用图形化界面的钱包，需要安装QT并且在./congfiguration时不使用--without-gui选项，FastCoin默认使用QT4： sudo apt-get install libqt4-dev libprotobuf-dev protobuf-compiler 如需使用QT5，需要采用--with-gui=qt5选项，并安装QT5： sudo apt-get install libqt5gui5 libqt5core5a libqt5dbus5 qttools5-dev qttools5-dev-tools libprotobuf-dev protobuf-compiler 本文的版权归作者 罗远航 所有，采用 Attribution-NonCommercial 3.0 License。任何人可以进行转载、分享，但不可在未经允许的情况下用于商业用途；转载请注明出处。感谢配合！ 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/04/10/b6a5152dc71e5731d4457c6d3e2b03f8.html" />
<meta property="og:url" content="https://mlh.app/2018/04/10/b6a5152dc71e5731d4457c6d3e2b03f8.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-10T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"这篇文章给出了Fastcoin多节点环境的搭建文档，FastCoin是一个由@harrywu修改BitCoin源代码产生的一个简单的山寨币。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。 1 FastCoin简介 FastCoin是一个由@harrywu修改BitCoin源代码产生的一个简单的山寨币。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。 2 系统环境 该文档的采用了两个节点进行测试，两个节点的系统环境如下： OS: Ubuntu Linux Kernel: Linux 4.4.0 Memory: 1G gcc Version: 5.4.0 g++ Version: 5.4.0 3 安装准备 该文档采用两个节点对FastCoin山寨币进行搭建，两个节点做同样的配置。 3.1 获取FastCoin源码 git clone https://github.com/imharrywu/fastcoin.git 3.2 安装项目构建依赖 sudo apt-get install build-essential libtool autotools-dev autoconf pkg-config libssl-dev 3.3 安装Berkeley DB 4.8 cd fastcoin/ BITCOIN_ROOT=$(pwd) # 选择 Berkeley DB安装路径，此处为fastcoin子目录下 BDB_PREFIX=&quot;${BITCOIN_ROOT}/db4&quot; mkdir -p $BDB_PREFIX # 获取源码 wget &#39;http://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz&#39; # 校验 echo &#39;12edc0df75bf9abd7f82f821795bcee50f42cb2e5f76a6a281b85732798364ef db-4.8.30.NC.tar.gz&#39; | sha256sum -c # 输出结应该为： -&gt; db-4.8.30.NC.tar.gz: OK # 解压 tar -xzvf db-4.8.30.NC.tar.gz # 构建安装 cd db-4.8.30.NC/build_unix/ ../dist/configure --enable-cxx --disable-shared --with-pic --prefix=$BDB_PREFIX make install 3.4 安装Boost sudo apt-get install libboost-all-dev 3.5 安装miniupnp wget http://miniupnp.tuxfamily.org/files/download.php?file=miniupnpc-1.6.20120410.tar.gz tar -xzvf miniupnpc-1.6.20120410.tar.gz cd miniupnpc-1.6 make sudo make install 也可以使用Ubuntu源进行安装： sudo apt-get install libminiupnpc-dev 4 搭建过程 4.1 编译源码 ./autogen.sh ./configure --with-miniupnpc --without-gui --enable-upnp-default LDFLAGS=&quot;-L${BDB_PREFIX}/lib/&quot; CPPFLAGS=&quot;-I${BDB_PREFIX}/include/&quot; --enable-wallet make make install 编译安装之后，在src目录下会生成相应的二进制文件，主要用到的二进制文件有： bitcoind：fastcoin主程序 bitcoin-cli：fastcoin RPC控制台程序 如果在编译过程中遭遇如下报错信息，详见【6.1 Boost依赖库引起的报错】： /usr/include/boost/variant/get.hpp:178:5: error: invalid application of &#39;sizeof&#39; to incomplete type &#39;boost::STATIC_ASSERTION_FAILURE&lt;false&gt;&#39; BOOST_STATIC_ASSERT_MSG( ^ Makefile:3654: recipe for target &#39;libbitcoin_server_a-rpcrawtransaction.o&#39; failed make[2]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error 1 4.2 相关configuration参数 --without-gui：不使用GUI，如果需要图形化界面，详见【6.6 图形化界面钱包的构建】 --enable-wallet:启用钱包（不启用钱包--disable-wallet也可以进行挖矿，如果不启用钱包，则无需安装Berkeley DB） --enable-debug:启用debug模式 --enable-tests:对测试程序进行编译 CPPFLAGS、LDFLAGS：指定Berkeley DB的路径 5 FastCoin测试 5.1 FastCoin配置文件 vi ~/.fastcoin/fastcoin.conf 在fastcoin.conf文件中添加如下配置信息： # 用户名 rpcuser=user # 密码 rpcpassword=password daemon=1 txindex=1 server=1 5.2 启动bitcoind 在其中一个节点中执行： cd fastcoin/src ./bincoind -gen=1 -reindex -checkpoints=0 另一个节点执行： ./bincoind -gen=1 -reindex -checkpoints=0 -addnode=&quot;另一个节点的IP，例：192.169.1.233&quot; 5.3 bitcoind相关启动参数 -rpcuser=：指定用户名 -rpcpassword=：指定密码 -daemon=：bitcoind作为daemon进程在后台运行 -gen=：生成山寨币（挖矿） -addnode=：添加节点 -reindex：bitcoind启动时从当前blk000??.dat文件中的index重建区块链 -server：启用RPC服务器 5.4 bitcoin-cli 使用./bitcoin-cli &lt;parameters&gt;可以查看当前区块链、网络、钱包等信息。 相关参数有： == Blockchain == getbestblockhash getblock &quot;hash&quot; ( verbose ) getblockchaininfo getblockcount getblockhash index getchaintips getdifficulty getmempoolinfo getrawmempool ( verbose ) gettxout &quot;txid&quot; n ( includemempool ) gettxoutsetinfo verifychain ( checklevel numblocks ) == Control == getinfo help ( &quot;command&quot; ) stop == Generating == getgenerate setgenerate generate ( genproclimit ) == Mining == getblocktemplate ( &quot;jsonrequestobject&quot; ) getmininginfo getnetworkhashps ( blocks height ) prioritisetransaction &lt;txid&gt; &lt;priority delta&gt; &lt;fee delta&gt; submitblock &quot;hexdata&quot; ( &quot;jsonparametersobject&quot; ) == Network == addnode &quot;node&quot; &quot;add|remove|onetry&quot; getaddednodeinfo dns ( &quot;node&quot; ) getconnectioncount getnettotals getnetworkinfo getpeerinfo ping == Rawtransactions == createrawtransaction [{&quot;txid&quot;:&quot;id&quot;,&quot;vout&quot;:n},...] {&quot;address&quot;:amount,...} decoderawtransaction &quot;hexstring&quot; decodescript &quot;hex&quot; getrawtransaction &quot;txid&quot; ( verbose ) sendrawtransaction &quot;hexstring&quot; ( allowhighfees ) signrawtransaction &quot;hexstring&quot; ( [{&quot;txid&quot;:&quot;id&quot;,&quot;vout&quot;:n,&quot;scriptPubKey&quot;:&quot;hex&quot;,&quot;redeemScript&quot;:&quot;hex&quot;},...] [&quot;privatekey1&quot;,...] sighashtype ) == Util == createmultisig nrequired [&quot;key&quot;,...] estimatefee nblocks estimatepriority nblocks validateaddress &quot;fastcoinaddress&quot; verifymessage &quot;fastcoinaddress&quot; &quot;signature&quot; &quot;message&quot; == Wallet == addmultisigaddress nrequired [&quot;key&quot;,...] ( &quot;account&quot; ) backupwallet &quot;destination&quot; dumpprivkey &quot;fastcoinaddress&quot; dumpwallet &quot;filename&quot; encryptwallet &quot;passphrase&quot; getaccount &quot;fastcoinaddress&quot; getaccountaddress &quot;account&quot; getaddressesbyaccount &quot;account&quot; getbalance ( &quot;account&quot; minconf includeWatchonly ) getnewaddress ( &quot;account&quot; ) getrawchangeaddress getreceivedbyaccount &quot;account&quot; ( minconf ) getreceivedbyaddress &quot;fastcoinaddress&quot; ( minconf ) gettransaction &quot;txid&quot; ( includeWatchonly ) getunconfirmedbalance getwalletinfo importaddress &quot;address&quot; ( &quot;label&quot; rescan ) importprivkey &quot;fastcoinprivkey&quot; ( &quot;label&quot; rescan ) importwallet &quot;filename&quot; keypoolrefill ( newsize ) listaccounts ( minconf includeWatchonly) listaddressgroupings listlockunspent listreceivedbyaccount ( minconf includeempty includeWatchonly) listreceivedbyaddress ( minconf includeempty includeWatchonly) listsinceblock ( &quot;blockhash&quot; target-confirmations includeWatchonly) listtransactions ( &quot;account&quot; count from includeWatchonly) listunspent ( minconf maxconf [&quot;address&quot;,...] ) lockunspent unlock [{&quot;txid&quot;:&quot;txid&quot;,&quot;vout&quot;:n},...] move &quot;fromaccount&quot; &quot;toaccount&quot; amount ( minconf &quot;comment&quot; ) sendfrom &quot;fromaccount&quot; &quot;tofastcoinaddress&quot; amount ( minconf &quot;comment&quot; &quot;comment-to&quot; ) sendmany &quot;fromaccount&quot; {&quot;address&quot;:amount,...} ( minconf &quot;comment&quot; ) sendtoaddress &quot;fastcoinaddress&quot; amount ( &quot;comment&quot; &quot;comment-to&quot; ) setaccount &quot;fastcoinaddress&quot; &quot;account&quot; settxfee amount signmessage &quot;fastcoinaddress&quot; &quot;message&quot; 具体的RPC调用可以参考BitCoin RPC API文档。 6 注意事项 6.1 Boost依赖库引起的报错 如果在编译FastCoin源码过程中遭遇如下报错信息，则需要我们对FastCoin源码进行修改： /usr/include/boost/variant/get.hpp:178:5: error: invalid application of &#39;sizeof&#39; to incomplete type &#39;boost::STATIC_ASSERTION_FAILURE&lt;false&gt;&#39; BOOST_STATIC_ASSERT_MSG( ^ Makefile:3654: recipe for target &#39;libbitcoin_server_a-rpcrawtransaction.o&#39; failed make[2]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error 1 将src/rpcrawtransaction.c文件中的第288行： const CScriptID&amp; hash = boost::get&lt;const CScriptID&amp;&gt;(address); 修改为： const CScriptID&amp; hash = boost::get&lt;CScriptID&gt;(address); 6.2 Berkeley DB安装问题 如果不想对Berkeley DB的源码进行编译安装，还可以直接采用Debian源进行安装： sudo add-apt-repository ppa:bitcoin/bitcoin sudo apt-get update sudo apt-get install libdb4.8-dev libdb4.8++-dev 6.3 nTXConfirmTarget参数 该参数是确认目标值，用于计算矿工费用，默认值为1，适用于双节点的系统，如需对该参数进行修改。可以在执行./bitcoind时添加参数-txconfirmtarget=number进行配置。 6.4 txindex参数问题 如果在~/.fastcoin/fastcoin.conf配置文件中添加了txindex参数，则需要在启动bitcoind时添加启动参数—reindex。 6.5 图形化界面钱包的构建 如需使用图形化界面的钱包，需要安装QT并且在./congfiguration时不使用--without-gui选项，FastCoin默认使用QT4： sudo apt-get install libqt4-dev libprotobuf-dev protobuf-compiler 如需使用QT5，需要采用--with-gui=qt5选项，并安装QT5： sudo apt-get install libqt5gui5 libqt5core5a libqt5dbus5 qttools5-dev qttools5-dev-tools libprotobuf-dev protobuf-compiler 本文的版权归作者 罗远航 所有，采用 Attribution-NonCommercial 3.0 License。任何人可以进行转载、分享，但不可在未经允许的情况下用于商业用途；转载请注明出处。感谢配合！ 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/04/10/b6a5152dc71e5731d4457c6d3e2b03f8.html","headline":"多节点FastCoin山寨币的搭建","dateModified":"2018-04-10T00:00:00+08:00","datePublished":"2018-04-10T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/04/10/b6a5152dc71e5731d4457c6d3e2b03f8.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>多节点FastCoin山寨币的搭建</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <blockquote> 
   <p>这篇文章给出了Fastcoin多节点环境的搭建文档，FastCoin是一个由<a href="https://github.com/imharrywu/fastcoin" rel="nofollow">@harrywu</a>修改<a href="https://github.com/bitcoin/bitcoin" rel="nofollow">BitCoin源代码</a>产生的一个简单的山寨币。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。</p> 
  </blockquote> 
  <!-- more --> 
  <h1 id="1-fastcoin简介">1 FastCoin简介</h1> 
  <p>FastCoin是一个由<a href="https://github.com/imharrywu/fastcoin" rel="nofollow">@harrywu</a>修改<a href="https://github.com/bitcoin/bitcoin" rel="nofollow">BitCoin源代码</a>产生的一个简单的<a href="https://blog.csdn.net/hacode/article/details/40422535" rel="nofollow">山寨币</a>。该山寨币在原有BitCoin源码基础上，对BitCoin相关网络参数、创世块信息、工作量机制等进行了修改，从而构建出了一个简单的山寨币系统，该系统加快了原有的挖矿速度，能够更方便的进行区块链开发的相关测试。</p> 
  <h1 id="2-系统环境">2 系统环境</h1> 
  <p>该文档的采用了两个节点进行测试，两个节点的系统环境如下：</p> 
  <pre class="prettyprint"><code class=" hljs mathematica">OS: Ubuntu
Linux Kernel: Linux <span class="hljs-number">4.4</span><span class="hljs-number">.0</span>
Memory: <span class="hljs-number">1</span>G
gcc <span class="hljs-keyword">Version</span>: <span class="hljs-number">5.4</span><span class="hljs-number">.0</span>
g++ <span class="hljs-keyword">Version</span>: <span class="hljs-number">5.4</span><span class="hljs-number">.0</span></code></pre> 
  <h1 id="3-安装准备">3 安装准备</h1> 
  <p>该文档采用两个节点对FastCoin山寨币进行搭建，两个节点做同样的配置。</p> 
  <h2 id="31-获取fastcoin源码">3.1 获取FastCoin源码</h2> 
  <pre class="prettyprint"><code class="language-bash hljs ">git clone https://github.com/imharrywu/fastcoin.git</code></pre> 
  <h2 id="32-安装项目构建依赖">3.2 安装项目构建依赖</h2> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> apt-get install build-essential libtool autotools-dev autoconf pkg-config libssl-dev</code></pre> 
  <h2 id="33-安装berkeley-db-48">3.3 安装Berkeley DB 4.8</h2> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">cd</span> fastcoin/
BITCOIN_ROOT=$(<span class="hljs-built_in">pwd</span>)

<span class="hljs-comment"># 选择 Berkeley DB安装路径，此处为fastcoin子目录下</span>
BDB_PREFIX=<span class="hljs-string">"<span class="hljs-variable">${BITCOIN_ROOT}</span>/db4"</span>
mkdir -p <span class="hljs-variable">$BDB_PREFIX</span>

<span class="hljs-comment"># 获取源码</span>
wget <span class="hljs-string">'http://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz'</span>

<span class="hljs-comment"># 校验</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'12edc0df75bf9abd7f82f821795bcee50f42cb2e5f76a6a281b85732798364ef db-4.8.30.NC.tar.gz'</span> | sha256sum -c

<span class="hljs-comment"># 输出结应该为： -&gt; db-4.8.30.NC.tar.gz: OK</span>

<span class="hljs-comment"># 解压</span>
tar -xzvf db-<span class="hljs-number">4.8</span>.<span class="hljs-number">30</span>.NC.tar.gz

<span class="hljs-comment"># 构建安装</span>
<span class="hljs-built_in">cd</span> db-<span class="hljs-number">4.8</span>.<span class="hljs-number">30</span>.NC/build_unix/
../dist/configure --enable-cxx --disable-shared --with-pic --prefix=<span class="hljs-variable">$BDB_PREFIX</span>
make install</code></pre> 
  <h2 id="34-安装boost">3.4 安装Boost</h2> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> apt-get install libboost-all-dev</code></pre> 
  <h2 id="35-安装miniupnp">3.5 安装miniupnp</h2> 
  <pre class="prettyprint"><code class="language-bash hljs ">wget http://miniupnp.tuxfamily.org/files/download.php?file=miniupnpc-<span class="hljs-number">1.6</span>.<span class="hljs-number">20120410</span>.tar.gz
tar -xzvf miniupnpc-<span class="hljs-number">1.6</span>.<span class="hljs-number">20120410</span>.tar.gz
<span class="hljs-built_in">cd</span> miniupnpc-<span class="hljs-number">1.6</span>
make
<span class="hljs-built_in">sudo</span> make install</code></pre> 
  <p>也可以使用Ubuntu源进行安装：</p> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> apt-get install libminiupnpc-dev</code></pre> 
  <h1 id="4-搭建过程">4 搭建过程</h1> 
  <h2 id="41-编译源码">4.1 编译源码</h2> 
  <pre class="prettyprint"><code class="language-bash hljs ">./autogen.sh
./configure --with-miniupnpc --without-gui --enable-upnp-default LDFLAGS=<span class="hljs-string">"-L<span class="hljs-variable">${BDB_PREFIX}</span>/lib/"</span> CPPFLAGS=<span class="hljs-string">"-I<span class="hljs-variable">${BDB_PREFIX}</span>/include/"</span> --enable-wallet
make
make install</code></pre> 
  <p>编译安装之后，在<code>src</code>目录下会生成相应的二进制文件，主要用到的二进制文件有：</p> 
  <ul> 
   <li>bitcoind：fastcoin主程序</li> 
   <li>bitcoin-cli：fastcoin RPC控制台程序</li> 
  </ul> 
  <p><em>如果在编译过程中遭遇如下报错信息，详见【6.1 Boost依赖库引起的报错】：</em></p> 
  <pre class="prettyprint"><code class="language-bash hljs ">/usr/include/boost/variant/get.hpp:<span class="hljs-number">178</span>:<span class="hljs-number">5</span>: error: invalid application of <span class="hljs-string">'sizeof'</span> to incomplete <span class="hljs-built_in">type</span> <span class="hljs-string">'boost::STATIC_ASSERTION_FAILURE&lt;false&gt;'</span>
     BOOST_STATIC_ASSERT_MSG(
     ^
Makefile:<span class="hljs-number">3654</span>: recipe <span class="hljs-keyword">for</span> target <span class="hljs-string">'libbitcoin_server_a-rpcrawtransaction.o'</span> failed
make[<span class="hljs-number">2</span>]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error <span class="hljs-number">1</span></code></pre> 
  <h2 id="42-相关configuration参数">4.2 相关configuration参数</h2> 
  <ul> 
   <li><code>--without-gui</code>：不使用GUI，如果需要图形化界面，详见【6.6 图形化界面钱包的构建】</li> 
   <li><code>--enable-wallet:</code>启用钱包（不启用钱包<code>--disable-wallet</code>也可以进行挖矿，如果不启用钱包，则无需安装Berkeley DB）</li> 
   <li><code>--enable-debug:</code>启用debug模式</li> 
   <li><code>--enable-tests:</code>对测试程序进行编译</li> 
   <li><code>CPPFLAGS</code>、<code>LDFLAGS</code>：指定Berkeley DB的路径</li> 
  </ul> 
  <h1 id="5-fastcoin测试">5 FastCoin测试</h1> 
  <h2 id="51-fastcoin配置文件">5.1 FastCoin配置文件</h2> 
  <pre class="prettyprint"><code class="language-bash hljs ">vi ~/.fastcoin/fastcoin.conf</code></pre> 
  <p>在<code>fastcoin.conf</code>文件中添加如下配置信息：</p> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-comment"># 用户名</span>
rpcuser=user
<span class="hljs-comment"># 密码</span>
rpcpassword=password

daemon=<span class="hljs-number">1</span>
txindex=<span class="hljs-number">1</span>
server=<span class="hljs-number">1</span></code></pre> 
  <h2 id="52-启动bitcoind">5.2 启动bitcoind</h2> 
  <p>在其中一个节点中执行：</p> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">cd</span> fastcoin/src
./bincoind -gen=<span class="hljs-number">1</span> -reindex -checkpoints=<span class="hljs-number">0</span></code></pre> 
  <p>另一个节点执行：</p> 
  <pre class="prettyprint"><code class="language-bash hljs ">./bincoind -gen=<span class="hljs-number">1</span> -reindex -checkpoints=<span class="hljs-number">0</span> -addnode=<span class="hljs-string">"另一个节点的IP，例：192.169.1.233"</span></code></pre> 
  <h2 id="53-bitcoind相关启动参数">5.3 bitcoind相关启动参数</h2> 
  <ul> 
   <li><code>-rpcuser=</code>：指定用户名</li> 
   <li><code>-rpcpassword=</code>：指定密码</li> 
   <li><code>-daemon=</code>：bitcoind作为daemon进程在后台运行</li> 
   <li><code>-gen=</code>：生成山寨币（挖矿）</li> 
   <li><code>-addnode=</code>：添加节点</li> 
   <li><code>-reindex</code>：bitcoind启动时从当前<code>blk000??.dat</code>文件中的index重建区块链</li> 
   <li><code>-server</code>：启用RPC服务器</li> 
  </ul> 
  <h2 id="54-bitcoin-cli">5.4 bitcoin-cli</h2> 
  <p>使用<code>./bitcoin-cli &lt;parameters&gt;</code>可以查看当前区块链、网络、钱包等信息。</p> 
  <p>相关参数有：</p> 
  <pre class="prettyprint"><code class=" hljs r">== Blockchain ==
getbestblockhash
getblock <span class="hljs-string">"hash"</span> ( verbose )
getblockchaininfo
getblockcount
getblockhash index
getchaintips
getdifficulty
getmempoolinfo
getrawmempool ( verbose )
gettxout <span class="hljs-string">"txid"</span> n ( includemempool )
gettxoutsetinfo
verifychain ( checklevel numblocks )

== Control ==
getinfo
help ( <span class="hljs-string">"command"</span> )
<span class="hljs-keyword">stop</span>

== Generating ==
getgenerate
setgenerate generate ( genproclimit )

== Mining ==
getblocktemplate ( <span class="hljs-string">"jsonrequestobject"</span> )
getmininginfo
getnetworkhashps ( blocks height )
prioritisetransaction &lt;txid&gt; &lt;priority delta&gt; &lt;fee delta&gt;
submitblock <span class="hljs-string">"hexdata"</span> ( <span class="hljs-string">"jsonparametersobject"</span> )

== Network ==
addnode <span class="hljs-string">"node"</span> <span class="hljs-string">"add|remove|onetry"</span>
getaddednodeinfo dns ( <span class="hljs-string">"node"</span> )
getconnectioncount
getnettotals
getnetworkinfo
getpeerinfo
ping

== Rawtransactions ==
createrawtransaction [{<span class="hljs-string">"txid"</span>:<span class="hljs-string">"id"</span>,<span class="hljs-string">"vout"</span>:n},<span class="hljs-keyword">...</span>] {<span class="hljs-string">"address"</span>:amount,<span class="hljs-keyword">...</span>}
decoderawtransaction <span class="hljs-string">"hexstring"</span>
decodescript <span class="hljs-string">"hex"</span>
getrawtransaction <span class="hljs-string">"txid"</span> ( verbose )
sendrawtransaction <span class="hljs-string">"hexstring"</span> ( allowhighfees )
signrawtransaction <span class="hljs-string">"hexstring"</span> ( [{<span class="hljs-string">"txid"</span>:<span class="hljs-string">"id"</span>,<span class="hljs-string">"vout"</span>:n,<span class="hljs-string">"scriptPubKey"</span>:<span class="hljs-string">"hex"</span>,<span class="hljs-string">"redeemScript"</span>:<span class="hljs-string">"hex"</span>},<span class="hljs-keyword">...</span>] [<span class="hljs-string">"privatekey1"</span>,<span class="hljs-keyword">...</span>] sighashtype )

== Util ==
createmultisig nrequired [<span class="hljs-string">"key"</span>,<span class="hljs-keyword">...</span>]
estimatefee nblocks
estimatepriority nblocks
validateaddress <span class="hljs-string">"fastcoinaddress"</span>
verifymessage <span class="hljs-string">"fastcoinaddress"</span> <span class="hljs-string">"signature"</span> <span class="hljs-string">"message"</span>

== Wallet ==
addmultisigaddress nrequired [<span class="hljs-string">"key"</span>,<span class="hljs-keyword">...</span>] ( <span class="hljs-string">"account"</span> )
backupwallet <span class="hljs-string">"destination"</span>
dumpprivkey <span class="hljs-string">"fastcoinaddress"</span>
dumpwallet <span class="hljs-string">"filename"</span>
encryptwallet <span class="hljs-string">"passphrase"</span>
getaccount <span class="hljs-string">"fastcoinaddress"</span>
getaccountaddress <span class="hljs-string">"account"</span>
getaddressesbyaccount <span class="hljs-string">"account"</span>
getbalance ( <span class="hljs-string">"account"</span> minconf includeWatchonly )
getnewaddress ( <span class="hljs-string">"account"</span> )
getrawchangeaddress
getreceivedbyaccount <span class="hljs-string">"account"</span> ( minconf )
getreceivedbyaddress <span class="hljs-string">"fastcoinaddress"</span> ( minconf )
gettransaction <span class="hljs-string">"txid"</span> ( includeWatchonly )
getunconfirmedbalance
getwalletinfo
importaddress <span class="hljs-string">"address"</span> ( <span class="hljs-string">"label"</span> rescan )
importprivkey <span class="hljs-string">"fastcoinprivkey"</span> ( <span class="hljs-string">"label"</span> rescan )
importwallet <span class="hljs-string">"filename"</span>
keypoolrefill ( newsize )
listaccounts ( minconf includeWatchonly)
listaddressgroupings
listlockunspent
listreceivedbyaccount ( minconf includeempty includeWatchonly)
listreceivedbyaddress ( minconf includeempty includeWatchonly)
listsinceblock ( <span class="hljs-string">"blockhash"</span> target-confirmations includeWatchonly)
listtransactions ( <span class="hljs-string">"account"</span> count from includeWatchonly)
listunspent ( minconf maxconf  [<span class="hljs-string">"address"</span>,<span class="hljs-keyword">...</span>] )
lockunspent unlock [{<span class="hljs-string">"txid"</span>:<span class="hljs-string">"txid"</span>,<span class="hljs-string">"vout"</span>:n},<span class="hljs-keyword">...</span>]
move <span class="hljs-string">"fromaccount"</span> <span class="hljs-string">"toaccount"</span> amount ( minconf <span class="hljs-string">"comment"</span> )
sendfrom <span class="hljs-string">"fromaccount"</span> <span class="hljs-string">"tofastcoinaddress"</span> amount ( minconf <span class="hljs-string">"comment"</span> <span class="hljs-string">"comment-to"</span> )
sendmany <span class="hljs-string">"fromaccount"</span> {<span class="hljs-string">"address"</span>:amount,<span class="hljs-keyword">...</span>} ( minconf <span class="hljs-string">"comment"</span> )
sendtoaddress <span class="hljs-string">"fastcoinaddress"</span> amount ( <span class="hljs-string">"comment"</span> <span class="hljs-string">"comment-to"</span> )
setaccount <span class="hljs-string">"fastcoinaddress"</span> <span class="hljs-string">"account"</span>
settxfee amount
signmessage <span class="hljs-string">"fastcoinaddress"</span> <span class="hljs-string">"message"</span></code></pre> 
  <p>具体的RPC调用可以参考<a href="http://chainquery.com/bitcoin-api" rel="nofollow">BitCoin RPC API文档</a>。</p> 
  <h1 id="6-注意事项">6 注意事项</h1> 
  <h2 id="61-boost依赖库引起的报错">6.1 Boost依赖库引起的报错</h2> 
  <p>如果在编译FastCoin源码过程中遭遇如下报错信息，则需要我们对FastCoin源码进行修改：</p> 
  <pre class="prettyprint"><code class="language-bash hljs ">/usr/include/boost/variant/get.hpp:<span class="hljs-number">178</span>:<span class="hljs-number">5</span>: error: invalid application of <span class="hljs-string">'sizeof'</span> to incomplete <span class="hljs-built_in">type</span> <span class="hljs-string">'boost::STATIC_ASSERTION_FAILURE&lt;false&gt;'</span>
     BOOST_STATIC_ASSERT_MSG(
     ^
Makefile:<span class="hljs-number">3654</span>: recipe <span class="hljs-keyword">for</span> target <span class="hljs-string">'libbitcoin_server_a-rpcrawtransaction.o'</span> failed
make[<span class="hljs-number">2</span>]: *** [libbitcoin_server_a-rpcrawtransaction.o] Error <span class="hljs-number">1</span></code></pre> 
  <p>将<code>src/rpcrawtransaction.c</code>文件中的第288行：</p> 
  <pre class="prettyprint"><code class="language-c hljs "><span class="hljs-keyword">const</span> CScriptID&amp; hash = boost::get&lt;<span class="hljs-keyword">const</span> CScriptID&amp;&gt;(address);</code></pre> 
  <p>修改为：</p> 
  <pre class="prettyprint"><code class="language-c hljs "><span class="hljs-keyword">const</span> CScriptID&amp; hash = boost::get&lt;CScriptID&gt;(address);</code></pre> 
  <h2 id="62-berkeley-db安装问题">6.2 Berkeley DB安装问题</h2> 
  <p>如果不想对Berkeley DB的源码进行编译安装，还可以直接采用Debian源进行安装：</p> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> add-apt-repository ppa:bitcoin/bitcoin
<span class="hljs-built_in">sudo</span> apt-get update
<span class="hljs-built_in">sudo</span> apt-get install libdb4.<span class="hljs-number">8</span>-dev libdb4.<span class="hljs-number">8</span>++-dev</code></pre> 
  <h2 id="63-ntxconfirmtarget参数">6.3 nTXConfirmTarget参数</h2> 
  <p>该参数是确认目标值，用于计算矿工费用，默认值为1，适用于双节点的系统，如需对该参数进行修改。可以在执行<code>./bitcoind</code>时添加参数<code>-txconfirmtarget=number</code>进行配置。</p> 
  <h2 id="64-txindex参数问题">6.4 txindex参数问题</h2> 
  <p>如果在<code>~/.fastcoin/fastcoin.conf</code>配置文件中添加了<code>txindex</code>参数，则需要在启动<code>bitcoind</code>时添加启动参数<code>—reindex</code>。</p> 
  <h2 id="65-图形化界面钱包的构建">6.5 图形化界面钱包的构建</h2> 
  <p>如需使用图形化界面的钱包，需要安装QT并且在<code>./congfiguration</code>时不使用<code>--without-gui</code>选项，FastCoin默认使用QT4：</p> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> apt-get install libqt4-dev libprotobuf-dev protobuf-compiler</code></pre> 
  <p>如需使用QT5，需要采用<code>--with-gui=qt5</code>选项，并安装QT5：</p> 
  <pre class="prettyprint"><code class="language-bash hljs "><span class="hljs-built_in">sudo</span> apt-get install libqt5gui5 libqt5core5a libqt5dbus5 qttools5-dev qttools5-dev-tools libprotobuf-dev protobuf-compiler</code></pre> 
  <hr> 
  <blockquote> 
   <p>本文的版权归作者 <a href="http://blog.luoyuanhang.com" rel="nofollow">罗远航</a> 所有，采用 <a href="http://creativecommons.org/licenses/by-nc/3.0/" rel="nofollow">Attribution-NonCommercial 3.0 License</a>。任何人可以进行转载、分享，但不可在未经允许的情况下用于商业用途；转载请注明出处。感谢配合！</p> 
  </blockquote> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/luoyhang003/article/details/79877741,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/luoyhang003/article/details/79877741,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
