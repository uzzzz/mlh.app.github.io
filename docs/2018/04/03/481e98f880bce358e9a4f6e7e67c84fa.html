<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>FISCO-BCOS环境搭建(三)创建普通节点 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="FISCO-BCOS环境搭建(三)创建普通节点" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="普通节点是区块链中除创世节点外的其它节点。 同一条链中的所有节点共用相同的genesis.json和相同的根证书ca.crt。 创建普通节点的步骤与创建创世节点的步骤类似。普通节点不需要再修改genesis.json和ca.crt，直接复制创世节点的genesis.json和ca.crt到节点的相应路径下即可。 5.1 创建节点环境 假定节点目录为/mydata/nodedata-2/，创建节点环境如下： #创建目录结构 mkdir -p /mydata/nodedata-2/ mkdir -p /mydata/nodedata-2/data/ #存放节点的各种文件 mkdir -p /mydata/nodedata-2/log/ #存放日志 mkdir -p /mydata/nodedata-2/keystore/ #存放账户秘钥 #拷贝创世节点相关文件 cd /mydata/nodedata-1/ cp genesis.json config.json log.conf start.sh stop.sh /mydata/nodedata-2/ 5.2 配置节点身份NodeId 同样需要为普通节点分配NodeId。NodeId唯一标识了区块链中的某个节点，在节点启动前必须进行配置。 5.2.1 配置cryptomod.json文件 在cryptomod.json文件中配置NodeId生成路径： cd /mydata/FISCO-BCOS/ vim cryptomod.json 此处将rlpcreatepath配置为/mydata/nodedata-2/data/network.rlp。配置后的cryptomod.json如下： { &quot;cryptomod&quot;:&quot;0&quot;, &quot;rlpcreatepath&quot;:&quot;/mydata/nodedata-2/data/network.rlp&quot;, &quot;datakeycreatepath&quot;:&quot;&quot;, &quot;keycenterurl&quot;:&quot;&quot;, &quot;superkey&quot;:&quot;&quot; } cryptomod.json其它字段说明请参看附录：11.2 cryptomod.json说明 5.2.2 生成节点身份文件 用上述修改好的cryptomod.json文件生成节点身份文件，生成路径为cryptomod.json中配置的路径。 fisco-bcos --gennetworkrlp cryptomod.json #需要一段时间 ls /mydata/nodedata-2/data/ 可看到节点身份文件（network.rlp和network.rlp.pub）生成到了/mydata/nodedata-2/data/下。 其中network.rlp是节点身份的私钥二进制文件。network.rlp.pub是节点身份的NodeId文件。 network.rlp network.rlp.pub 5.2.3 配置节点NodeId （1）查看NodeId cd /mydata/nodedata-2/data/ cat network.rlp.pub 得到如下类似的NodeId b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8 （2）修改config.json 在NodeextraInfo字段中追加新的节点信息。 vim /mydata/nodedata-2/config.json 追加后，config.json中的NodeextraInfo字段如下。新追加的内容要与现有的内容有区别，Nodeid为刚生成的NodeId，Port是p2pport端口，Idx为上一条记录加1。注意，若新部署的节点在另外一台机器上，则需要将NodeextraInfo中其它节点的Peerip改成其它节点对应的机器IP，让新部署的节点能够找到其它机器上的节点。 &quot;NodeextraInfo&quot;:[ { &quot;Nodeid&quot;:&quot;24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56&quot;, &quot;Nodedesc&quot;: &quot;node1&quot;, &quot;Agencyinfo&quot;: &quot;node1&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30303, &quot;Idx&quot;:0 }, { &quot;Nodeid&quot;:&quot;b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8&quot;, &quot;Nodedesc&quot;: &quot;node2&quot;, &quot;Agencyinfo&quot;: &quot;node2&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30403, &quot;Idx&quot;:1 } ] 5.3 配置证书 区块链节点间的通信需要证书的认证。在节点运行前，需要为节点配置证书。其中ca.crt是整个区块链的根证书公钥，所有节点共用。 5.3.1 配置根证书 一条链上的所有区块链节点都共用一个根证书ca.crt。直接从创世节点目录拷贝。 cp /mydata/nodedata-1/data/ca.crt /mydata/nodedata-2/data/ 5.3.2 生成节点证书 生成普通节点证书（server.key、server.crt）的步骤与创世节点相同。在生成前，需要把生成脚本和根证书私钥（ca.key）配置到data目录下。 cd /mydata/nodedata-2/data/ cp /mydata/nodedata-1/data/ca.key . #假设根证书私钥放在node1的data目录下 cp /mydata/nodedata-1/data/genkey.sh . 用根证书公私钥生成节点证书公私钥（server.key、server.crt） ./genkey.sh server ./ca.key ./ca.crt 365 #生成server证书有效期为365天 生成后，此时目录下应存在下述文件： ca.crt network.rlp network.rlp.pub server.crt server.key 注意，ca.key在生成了节点证书后，应立即删除。 5.4 配置相关配置文件 普通节点的启动依赖三个配置文件： 创世块文件：genesis.json（与创世节点相同，直接复制，无需修改） 节点配置文件：config.json 日志配置文件：log.conf 5.4.1 配置config.json（节点配置文件） config.json中可配置节点的各种信息，包括网络地址，文件目录，节点身份等。 vim /mydata/nodedata-2/config.json 配置本节点的信息，主要修改字段，注意与NodeextraInfo中的内容对应： 网络连接相关：listenip、rpcport、p2pport、channelPort 目录相关：wallet、keystoredir、datadir、logconf 节点身份相关：NodeextraInfo中的Nodeid、Nodedesc、Agencyinfo、Peerip、Identitytype、Port、Idx（与网络连接相关对应上） config.json其它字段说明请参看附录：11.4 config.json说明 配置好的config.json如下： { &quot;sealEngine&quot;: &quot;PBFT&quot;, &quot;systemproxyaddress&quot;:&quot;0x919868496524eedc26dbb81915fa1547a20f8998&quot;, &quot;listenip&quot;:&quot;0.0.0.0&quot;, &quot;cryptomod&quot;:&quot;0&quot;, &quot;ssl&quot;:&quot;0&quot;, &quot;rpcport&quot;: &quot;8546&quot;, &quot;p2pport&quot;: &quot;30403&quot;, &quot;channelPort&quot;: &quot;30404&quot;, &quot;wallet&quot;:&quot;/mydata/nodedata-2/keys.info&quot;, &quot;keystoredir&quot;:&quot;/mydata/nodedata-2/keystore/&quot;, &quot;datadir&quot;:&quot;/mydata/nodedata-2/data/&quot;, &quot;vm&quot;:&quot;interpreter&quot;, &quot;networkid&quot;:&quot;12345&quot;, &quot;logverbosity&quot;:&quot;4&quot;, &quot;coverlog&quot;:&quot;OFF&quot;, &quot;eventlog&quot;:&quot;ON&quot;, &quot;statlog&quot;:&quot;OFF&quot;, &quot;logconf&quot;:&quot;/mydata/nodedata-2/log.conf&quot;, &quot;params&quot;: { &quot;accountStartNonce&quot;: &quot;0x0&quot;, &quot;maximumExtraDataSize&quot;: &quot;0x0&quot;, &quot;tieBreakingGas&quot;: false, &quot;blockReward&quot;: &quot;0x0&quot;, &quot;networkID&quot; : &quot;0x0&quot; }, &quot;NodeextraInfo&quot;:[ { &quot;Nodeid&quot;:&quot;24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56&quot;, &quot;Nodedesc&quot;: &quot;node1&quot;, &quot;Agencyinfo&quot;: &quot;node1&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30303, &quot;Idx&quot;:0 }, { &quot;Nodeid&quot;:&quot;b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8&quot;, &quot;Nodedesc&quot;: &quot;node2&quot;, &quot;Agencyinfo&quot;: &quot;node2&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30403, &quot;Idx&quot;:1 } ] } 5.4.2 配置log.conf（日志配置文件） log.conf中配置节点日志生成的格式和路径。 vim /mydata/nodedata-2/log.conf 主要配置日志文件的生成路径，配置好的log.conf 如下： * GLOBAL: ENABLED = true TO_FILE = true TO_STANDARD_OUTPUT = false FORMAT = &quot;%level|%datetime{%Y-%M-%d %H:%m:%s:%g}|%msg&quot; FILENAME = &quot;/mydata/nodedata-2/log/log_%datetime{%Y%M%d%H}.log&quot; MILLISECONDS_WIDTH = 3 PERFORMANCE_TRACKING = false MAX_LOG_FILE_SIZE = 209715200 ## 200MB - Comment starts with two hashes (##) LOG_FLUSH_THRESHOLD = 100 ## Flush after every 100 logs * TRACE: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/trace_log_%datetime{%Y%M%d%H}.log&quot; * DEBUG: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/debug_log_%datetime{%Y%M%d%H}.log&quot; * FATAL: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/fatal_log_%datetime{%Y%M%d%H}.log&quot; * ERROR: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/error_log_%datetime{%Y%M%d%H}.log&quot; * WARNING: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/warn_log_%datetime{%Y%M%d%H}.log&quot; * INFO: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/info_log_%datetime{%Y%M%d%H}.log&quot; * VERBOSE: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/verbose_log_%datetime{%Y%M%d%H}.log&quot; log.conf其它字段说明请参看附录：11.5 log.conf说明 5.5 启动节点 节点的启动依赖下列文件，在启动前，请确认文件已经正确的配置： 证书文件（/mydata/nodedata-2/data）：ca.crt、network.rlp、network.rlp.pub、server.crt、server.key 配置文件（/mydata/nodedata-2/）：genesis.json、config.json、log.conf 启动普通节点，此时普通节点未被注册到区块链中，启动时只能看到进程，不能刷出打包信息。要让此节点正确的运行，请进入环境搭建(四)多节点组网 。 cd /mydata/nodedata-2/ chmod +x *.sh ./start.sh #此时节点未被注册到区块链中，等待10秒，不会刷出打包信息 ctrl-c 退出 ps -ef |grep fisco-bcos #可查看到节点进程存在 可看到进程已经在运行 app 9656 1 4 16:10 ? 00:00:01 fisco-bcos --genesis /mydata/nodedata-2/genesis.json --config /mydata/nodedata-2/config.json 关闭节点，待注册后再重启 ./stop.sh 阅读更多" />
<meta property="og:description" content="普通节点是区块链中除创世节点外的其它节点。 同一条链中的所有节点共用相同的genesis.json和相同的根证书ca.crt。 创建普通节点的步骤与创建创世节点的步骤类似。普通节点不需要再修改genesis.json和ca.crt，直接复制创世节点的genesis.json和ca.crt到节点的相应路径下即可。 5.1 创建节点环境 假定节点目录为/mydata/nodedata-2/，创建节点环境如下： #创建目录结构 mkdir -p /mydata/nodedata-2/ mkdir -p /mydata/nodedata-2/data/ #存放节点的各种文件 mkdir -p /mydata/nodedata-2/log/ #存放日志 mkdir -p /mydata/nodedata-2/keystore/ #存放账户秘钥 #拷贝创世节点相关文件 cd /mydata/nodedata-1/ cp genesis.json config.json log.conf start.sh stop.sh /mydata/nodedata-2/ 5.2 配置节点身份NodeId 同样需要为普通节点分配NodeId。NodeId唯一标识了区块链中的某个节点，在节点启动前必须进行配置。 5.2.1 配置cryptomod.json文件 在cryptomod.json文件中配置NodeId生成路径： cd /mydata/FISCO-BCOS/ vim cryptomod.json 此处将rlpcreatepath配置为/mydata/nodedata-2/data/network.rlp。配置后的cryptomod.json如下： { &quot;cryptomod&quot;:&quot;0&quot;, &quot;rlpcreatepath&quot;:&quot;/mydata/nodedata-2/data/network.rlp&quot;, &quot;datakeycreatepath&quot;:&quot;&quot;, &quot;keycenterurl&quot;:&quot;&quot;, &quot;superkey&quot;:&quot;&quot; } cryptomod.json其它字段说明请参看附录：11.2 cryptomod.json说明 5.2.2 生成节点身份文件 用上述修改好的cryptomod.json文件生成节点身份文件，生成路径为cryptomod.json中配置的路径。 fisco-bcos --gennetworkrlp cryptomod.json #需要一段时间 ls /mydata/nodedata-2/data/ 可看到节点身份文件（network.rlp和network.rlp.pub）生成到了/mydata/nodedata-2/data/下。 其中network.rlp是节点身份的私钥二进制文件。network.rlp.pub是节点身份的NodeId文件。 network.rlp network.rlp.pub 5.2.3 配置节点NodeId （1）查看NodeId cd /mydata/nodedata-2/data/ cat network.rlp.pub 得到如下类似的NodeId b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8 （2）修改config.json 在NodeextraInfo字段中追加新的节点信息。 vim /mydata/nodedata-2/config.json 追加后，config.json中的NodeextraInfo字段如下。新追加的内容要与现有的内容有区别，Nodeid为刚生成的NodeId，Port是p2pport端口，Idx为上一条记录加1。注意，若新部署的节点在另外一台机器上，则需要将NodeextraInfo中其它节点的Peerip改成其它节点对应的机器IP，让新部署的节点能够找到其它机器上的节点。 &quot;NodeextraInfo&quot;:[ { &quot;Nodeid&quot;:&quot;24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56&quot;, &quot;Nodedesc&quot;: &quot;node1&quot;, &quot;Agencyinfo&quot;: &quot;node1&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30303, &quot;Idx&quot;:0 }, { &quot;Nodeid&quot;:&quot;b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8&quot;, &quot;Nodedesc&quot;: &quot;node2&quot;, &quot;Agencyinfo&quot;: &quot;node2&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30403, &quot;Idx&quot;:1 } ] 5.3 配置证书 区块链节点间的通信需要证书的认证。在节点运行前，需要为节点配置证书。其中ca.crt是整个区块链的根证书公钥，所有节点共用。 5.3.1 配置根证书 一条链上的所有区块链节点都共用一个根证书ca.crt。直接从创世节点目录拷贝。 cp /mydata/nodedata-1/data/ca.crt /mydata/nodedata-2/data/ 5.3.2 生成节点证书 生成普通节点证书（server.key、server.crt）的步骤与创世节点相同。在生成前，需要把生成脚本和根证书私钥（ca.key）配置到data目录下。 cd /mydata/nodedata-2/data/ cp /mydata/nodedata-1/data/ca.key . #假设根证书私钥放在node1的data目录下 cp /mydata/nodedata-1/data/genkey.sh . 用根证书公私钥生成节点证书公私钥（server.key、server.crt） ./genkey.sh server ./ca.key ./ca.crt 365 #生成server证书有效期为365天 生成后，此时目录下应存在下述文件： ca.crt network.rlp network.rlp.pub server.crt server.key 注意，ca.key在生成了节点证书后，应立即删除。 5.4 配置相关配置文件 普通节点的启动依赖三个配置文件： 创世块文件：genesis.json（与创世节点相同，直接复制，无需修改） 节点配置文件：config.json 日志配置文件：log.conf 5.4.1 配置config.json（节点配置文件） config.json中可配置节点的各种信息，包括网络地址，文件目录，节点身份等。 vim /mydata/nodedata-2/config.json 配置本节点的信息，主要修改字段，注意与NodeextraInfo中的内容对应： 网络连接相关：listenip、rpcport、p2pport、channelPort 目录相关：wallet、keystoredir、datadir、logconf 节点身份相关：NodeextraInfo中的Nodeid、Nodedesc、Agencyinfo、Peerip、Identitytype、Port、Idx（与网络连接相关对应上） config.json其它字段说明请参看附录：11.4 config.json说明 配置好的config.json如下： { &quot;sealEngine&quot;: &quot;PBFT&quot;, &quot;systemproxyaddress&quot;:&quot;0x919868496524eedc26dbb81915fa1547a20f8998&quot;, &quot;listenip&quot;:&quot;0.0.0.0&quot;, &quot;cryptomod&quot;:&quot;0&quot;, &quot;ssl&quot;:&quot;0&quot;, &quot;rpcport&quot;: &quot;8546&quot;, &quot;p2pport&quot;: &quot;30403&quot;, &quot;channelPort&quot;: &quot;30404&quot;, &quot;wallet&quot;:&quot;/mydata/nodedata-2/keys.info&quot;, &quot;keystoredir&quot;:&quot;/mydata/nodedata-2/keystore/&quot;, &quot;datadir&quot;:&quot;/mydata/nodedata-2/data/&quot;, &quot;vm&quot;:&quot;interpreter&quot;, &quot;networkid&quot;:&quot;12345&quot;, &quot;logverbosity&quot;:&quot;4&quot;, &quot;coverlog&quot;:&quot;OFF&quot;, &quot;eventlog&quot;:&quot;ON&quot;, &quot;statlog&quot;:&quot;OFF&quot;, &quot;logconf&quot;:&quot;/mydata/nodedata-2/log.conf&quot;, &quot;params&quot;: { &quot;accountStartNonce&quot;: &quot;0x0&quot;, &quot;maximumExtraDataSize&quot;: &quot;0x0&quot;, &quot;tieBreakingGas&quot;: false, &quot;blockReward&quot;: &quot;0x0&quot;, &quot;networkID&quot; : &quot;0x0&quot; }, &quot;NodeextraInfo&quot;:[ { &quot;Nodeid&quot;:&quot;24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56&quot;, &quot;Nodedesc&quot;: &quot;node1&quot;, &quot;Agencyinfo&quot;: &quot;node1&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30303, &quot;Idx&quot;:0 }, { &quot;Nodeid&quot;:&quot;b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8&quot;, &quot;Nodedesc&quot;: &quot;node2&quot;, &quot;Agencyinfo&quot;: &quot;node2&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30403, &quot;Idx&quot;:1 } ] } 5.4.2 配置log.conf（日志配置文件） log.conf中配置节点日志生成的格式和路径。 vim /mydata/nodedata-2/log.conf 主要配置日志文件的生成路径，配置好的log.conf 如下： * GLOBAL: ENABLED = true TO_FILE = true TO_STANDARD_OUTPUT = false FORMAT = &quot;%level|%datetime{%Y-%M-%d %H:%m:%s:%g}|%msg&quot; FILENAME = &quot;/mydata/nodedata-2/log/log_%datetime{%Y%M%d%H}.log&quot; MILLISECONDS_WIDTH = 3 PERFORMANCE_TRACKING = false MAX_LOG_FILE_SIZE = 209715200 ## 200MB - Comment starts with two hashes (##) LOG_FLUSH_THRESHOLD = 100 ## Flush after every 100 logs * TRACE: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/trace_log_%datetime{%Y%M%d%H}.log&quot; * DEBUG: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/debug_log_%datetime{%Y%M%d%H}.log&quot; * FATAL: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/fatal_log_%datetime{%Y%M%d%H}.log&quot; * ERROR: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/error_log_%datetime{%Y%M%d%H}.log&quot; * WARNING: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/warn_log_%datetime{%Y%M%d%H}.log&quot; * INFO: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/info_log_%datetime{%Y%M%d%H}.log&quot; * VERBOSE: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/verbose_log_%datetime{%Y%M%d%H}.log&quot; log.conf其它字段说明请参看附录：11.5 log.conf说明 5.5 启动节点 节点的启动依赖下列文件，在启动前，请确认文件已经正确的配置： 证书文件（/mydata/nodedata-2/data）：ca.crt、network.rlp、network.rlp.pub、server.crt、server.key 配置文件（/mydata/nodedata-2/）：genesis.json、config.json、log.conf 启动普通节点，此时普通节点未被注册到区块链中，启动时只能看到进程，不能刷出打包信息。要让此节点正确的运行，请进入环境搭建(四)多节点组网 。 cd /mydata/nodedata-2/ chmod +x *.sh ./start.sh #此时节点未被注册到区块链中，等待10秒，不会刷出打包信息 ctrl-c 退出 ps -ef |grep fisco-bcos #可查看到节点进程存在 可看到进程已经在运行 app 9656 1 4 16:10 ? 00:00:01 fisco-bcos --genesis /mydata/nodedata-2/genesis.json --config /mydata/nodedata-2/config.json 关闭节点，待注册后再重启 ./stop.sh 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/04/03/481e98f880bce358e9a4f6e7e67c84fa.html" />
<meta property="og:url" content="https://mlh.app/2018/04/03/481e98f880bce358e9a4f6e7e67c84fa.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-03T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"普通节点是区块链中除创世节点外的其它节点。 同一条链中的所有节点共用相同的genesis.json和相同的根证书ca.crt。 创建普通节点的步骤与创建创世节点的步骤类似。普通节点不需要再修改genesis.json和ca.crt，直接复制创世节点的genesis.json和ca.crt到节点的相应路径下即可。 5.1 创建节点环境 假定节点目录为/mydata/nodedata-2/，创建节点环境如下： #创建目录结构 mkdir -p /mydata/nodedata-2/ mkdir -p /mydata/nodedata-2/data/ #存放节点的各种文件 mkdir -p /mydata/nodedata-2/log/ #存放日志 mkdir -p /mydata/nodedata-2/keystore/ #存放账户秘钥 #拷贝创世节点相关文件 cd /mydata/nodedata-1/ cp genesis.json config.json log.conf start.sh stop.sh /mydata/nodedata-2/ 5.2 配置节点身份NodeId 同样需要为普通节点分配NodeId。NodeId唯一标识了区块链中的某个节点，在节点启动前必须进行配置。 5.2.1 配置cryptomod.json文件 在cryptomod.json文件中配置NodeId生成路径： cd /mydata/FISCO-BCOS/ vim cryptomod.json 此处将rlpcreatepath配置为/mydata/nodedata-2/data/network.rlp。配置后的cryptomod.json如下： { &quot;cryptomod&quot;:&quot;0&quot;, &quot;rlpcreatepath&quot;:&quot;/mydata/nodedata-2/data/network.rlp&quot;, &quot;datakeycreatepath&quot;:&quot;&quot;, &quot;keycenterurl&quot;:&quot;&quot;, &quot;superkey&quot;:&quot;&quot; } cryptomod.json其它字段说明请参看附录：11.2 cryptomod.json说明 5.2.2 生成节点身份文件 用上述修改好的cryptomod.json文件生成节点身份文件，生成路径为cryptomod.json中配置的路径。 fisco-bcos --gennetworkrlp cryptomod.json #需要一段时间 ls /mydata/nodedata-2/data/ 可看到节点身份文件（network.rlp和network.rlp.pub）生成到了/mydata/nodedata-2/data/下。 其中network.rlp是节点身份的私钥二进制文件。network.rlp.pub是节点身份的NodeId文件。 network.rlp network.rlp.pub 5.2.3 配置节点NodeId （1）查看NodeId cd /mydata/nodedata-2/data/ cat network.rlp.pub 得到如下类似的NodeId b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8 （2）修改config.json 在NodeextraInfo字段中追加新的节点信息。 vim /mydata/nodedata-2/config.json 追加后，config.json中的NodeextraInfo字段如下。新追加的内容要与现有的内容有区别，Nodeid为刚生成的NodeId，Port是p2pport端口，Idx为上一条记录加1。注意，若新部署的节点在另外一台机器上，则需要将NodeextraInfo中其它节点的Peerip改成其它节点对应的机器IP，让新部署的节点能够找到其它机器上的节点。 &quot;NodeextraInfo&quot;:[ { &quot;Nodeid&quot;:&quot;24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56&quot;, &quot;Nodedesc&quot;: &quot;node1&quot;, &quot;Agencyinfo&quot;: &quot;node1&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30303, &quot;Idx&quot;:0 }, { &quot;Nodeid&quot;:&quot;b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8&quot;, &quot;Nodedesc&quot;: &quot;node2&quot;, &quot;Agencyinfo&quot;: &quot;node2&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30403, &quot;Idx&quot;:1 } ] 5.3 配置证书 区块链节点间的通信需要证书的认证。在节点运行前，需要为节点配置证书。其中ca.crt是整个区块链的根证书公钥，所有节点共用。 5.3.1 配置根证书 一条链上的所有区块链节点都共用一个根证书ca.crt。直接从创世节点目录拷贝。 cp /mydata/nodedata-1/data/ca.crt /mydata/nodedata-2/data/ 5.3.2 生成节点证书 生成普通节点证书（server.key、server.crt）的步骤与创世节点相同。在生成前，需要把生成脚本和根证书私钥（ca.key）配置到data目录下。 cd /mydata/nodedata-2/data/ cp /mydata/nodedata-1/data/ca.key . #假设根证书私钥放在node1的data目录下 cp /mydata/nodedata-1/data/genkey.sh . 用根证书公私钥生成节点证书公私钥（server.key、server.crt） ./genkey.sh server ./ca.key ./ca.crt 365 #生成server证书有效期为365天 生成后，此时目录下应存在下述文件： ca.crt network.rlp network.rlp.pub server.crt server.key 注意，ca.key在生成了节点证书后，应立即删除。 5.4 配置相关配置文件 普通节点的启动依赖三个配置文件： 创世块文件：genesis.json（与创世节点相同，直接复制，无需修改） 节点配置文件：config.json 日志配置文件：log.conf 5.4.1 配置config.json（节点配置文件） config.json中可配置节点的各种信息，包括网络地址，文件目录，节点身份等。 vim /mydata/nodedata-2/config.json 配置本节点的信息，主要修改字段，注意与NodeextraInfo中的内容对应： 网络连接相关：listenip、rpcport、p2pport、channelPort 目录相关：wallet、keystoredir、datadir、logconf 节点身份相关：NodeextraInfo中的Nodeid、Nodedesc、Agencyinfo、Peerip、Identitytype、Port、Idx（与网络连接相关对应上） config.json其它字段说明请参看附录：11.4 config.json说明 配置好的config.json如下： { &quot;sealEngine&quot;: &quot;PBFT&quot;, &quot;systemproxyaddress&quot;:&quot;0x919868496524eedc26dbb81915fa1547a20f8998&quot;, &quot;listenip&quot;:&quot;0.0.0.0&quot;, &quot;cryptomod&quot;:&quot;0&quot;, &quot;ssl&quot;:&quot;0&quot;, &quot;rpcport&quot;: &quot;8546&quot;, &quot;p2pport&quot;: &quot;30403&quot;, &quot;channelPort&quot;: &quot;30404&quot;, &quot;wallet&quot;:&quot;/mydata/nodedata-2/keys.info&quot;, &quot;keystoredir&quot;:&quot;/mydata/nodedata-2/keystore/&quot;, &quot;datadir&quot;:&quot;/mydata/nodedata-2/data/&quot;, &quot;vm&quot;:&quot;interpreter&quot;, &quot;networkid&quot;:&quot;12345&quot;, &quot;logverbosity&quot;:&quot;4&quot;, &quot;coverlog&quot;:&quot;OFF&quot;, &quot;eventlog&quot;:&quot;ON&quot;, &quot;statlog&quot;:&quot;OFF&quot;, &quot;logconf&quot;:&quot;/mydata/nodedata-2/log.conf&quot;, &quot;params&quot;: { &quot;accountStartNonce&quot;: &quot;0x0&quot;, &quot;maximumExtraDataSize&quot;: &quot;0x0&quot;, &quot;tieBreakingGas&quot;: false, &quot;blockReward&quot;: &quot;0x0&quot;, &quot;networkID&quot; : &quot;0x0&quot; }, &quot;NodeextraInfo&quot;:[ { &quot;Nodeid&quot;:&quot;24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56&quot;, &quot;Nodedesc&quot;: &quot;node1&quot;, &quot;Agencyinfo&quot;: &quot;node1&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30303, &quot;Idx&quot;:0 }, { &quot;Nodeid&quot;:&quot;b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8&quot;, &quot;Nodedesc&quot;: &quot;node2&quot;, &quot;Agencyinfo&quot;: &quot;node2&quot;, &quot;Peerip&quot;: &quot;0.0.0.0&quot;, &quot;Identitytype&quot;: 1, &quot;Port&quot;:30403, &quot;Idx&quot;:1 } ] } 5.4.2 配置log.conf（日志配置文件） log.conf中配置节点日志生成的格式和路径。 vim /mydata/nodedata-2/log.conf 主要配置日志文件的生成路径，配置好的log.conf 如下： * GLOBAL: ENABLED = true TO_FILE = true TO_STANDARD_OUTPUT = false FORMAT = &quot;%level|%datetime{%Y-%M-%d %H:%m:%s:%g}|%msg&quot; FILENAME = &quot;/mydata/nodedata-2/log/log_%datetime{%Y%M%d%H}.log&quot; MILLISECONDS_WIDTH = 3 PERFORMANCE_TRACKING = false MAX_LOG_FILE_SIZE = 209715200 ## 200MB - Comment starts with two hashes (##) LOG_FLUSH_THRESHOLD = 100 ## Flush after every 100 logs * TRACE: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/trace_log_%datetime{%Y%M%d%H}.log&quot; * DEBUG: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/debug_log_%datetime{%Y%M%d%H}.log&quot; * FATAL: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/fatal_log_%datetime{%Y%M%d%H}.log&quot; * ERROR: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/error_log_%datetime{%Y%M%d%H}.log&quot; * WARNING: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/warn_log_%datetime{%Y%M%d%H}.log&quot; * INFO: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/info_log_%datetime{%Y%M%d%H}.log&quot; * VERBOSE: ENABLED = true FILENAME = &quot;/mydata/nodedata-2/log/verbose_log_%datetime{%Y%M%d%H}.log&quot; log.conf其它字段说明请参看附录：11.5 log.conf说明 5.5 启动节点 节点的启动依赖下列文件，在启动前，请确认文件已经正确的配置： 证书文件（/mydata/nodedata-2/data）：ca.crt、network.rlp、network.rlp.pub、server.crt、server.key 配置文件（/mydata/nodedata-2/）：genesis.json、config.json、log.conf 启动普通节点，此时普通节点未被注册到区块链中，启动时只能看到进程，不能刷出打包信息。要让此节点正确的运行，请进入环境搭建(四)多节点组网 。 cd /mydata/nodedata-2/ chmod +x *.sh ./start.sh #此时节点未被注册到区块链中，等待10秒，不会刷出打包信息 ctrl-c 退出 ps -ef |grep fisco-bcos #可查看到节点进程存在 可看到进程已经在运行 app 9656 1 4 16:10 ? 00:00:01 fisco-bcos --genesis /mydata/nodedata-2/genesis.json --config /mydata/nodedata-2/config.json 关闭节点，待注册后再重启 ./stop.sh 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/04/03/481e98f880bce358e9a4f6e7e67c84fa.html","headline":"FISCO-BCOS环境搭建(三)创建普通节点","dateModified":"2018-04-03T00:00:00+08:00","datePublished":"2018-04-03T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/04/03/481e98f880bce358e9a4f6e7e67c84fa.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>FISCO-BCOS环境搭建(三)创建普通节点</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">普通节点是区块链中除创世节点外的其它节点。</p>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">同一条链中的所有节点共用相同的genesis.json和相同的根证书ca.crt。</p>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">创建普通节点的步骤与创建创世节点的步骤类似。普通节点不需要再修改genesis.json和ca.crt，直接复制创世节点的genesis.json和ca.crt到节点的相应路径下即可。</p>
  <h3 style="font-size:1.25em;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#51-%E5%88%9B%E5%BB%BA%E8%8A%82%E7%82%B9%E7%8E%AF%E5%A2%83" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.1 创建节点环境</h3>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>假定节点目录为/mydata/nodedata-2/，创建节点环境如下：</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);"><span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>创建目录结构</span>
mkdir -p /mydata/nodedata-2/
mkdir -p /mydata/nodedata-2/data/ <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>存放节点的各种文件</span>
mkdir -p /mydata/nodedata-2/log/ <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>存放日志</span>
mkdir -p /mydata/nodedata-2/keystore/ <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>存放账户秘钥</span>

<span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>拷贝创世节点相关文件</span>
<span class="pl-c1" style="color:rgb(0,92,197);">cd</span> /mydata/nodedata-1/ 
cp genesis.json config.json log.conf start.sh stop.sh /mydata/nodedata-2/</pre>
  </div>
  <h3 style="font-size:1.25em;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#52--%E9%85%8D%E7%BD%AE%E8%8A%82%E7%82%B9%E8%BA%AB%E4%BB%BDnodeid" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.2 配置节点身份NodeId</h3>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">同样需要为普通节点分配NodeId。NodeId唯一标识了区块链中的某个节点，在节点启动前必须进行配置。</p>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#521-%E9%85%8D%E7%BD%AEcryptomodjson%E6%96%87%E4%BB%B6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.2.1 配置cryptomod.json文件</h4>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>在cryptomod.json文件中配置NodeId生成路径：</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);"><span class="pl-c1" style="color:rgb(0,92,197);">cd</span> /mydata/FISCO-BCOS/ 
vim cryptomod.json</pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>此处将rlpcreatepath配置为/mydata/nodedata-2/data/network.rlp。配置后的cryptomod.json如下：</p>
  </blockquote>
  <pre lang="log" style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);color:rgb(36,41,46);" xml:lang="log"><code style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;background:transparent;border:0px;line-height:inherit;">{
	"cryptomod":"0",
	"rlpcreatepath":"/mydata/nodedata-2/data/network.rlp",
	"datakeycreatepath":"",
	"keycenterurl":"",
	"superkey":""
}
</code></pre>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">cryptomod.json其它字段说明请参看附录：11.2 cryptomod.json说明</p>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#522-%E7%94%9F%E6%88%90%E8%8A%82%E7%82%B9%E8%BA%AB%E4%BB%BD%E6%96%87%E4%BB%B6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.2.2 生成节点身份文件</h4>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>用上述修改好的cryptomod.json文件生成节点身份文件，生成路径为cryptomod.json中配置的路径。</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">fisco-bcos --gennetworkrlp  cryptomod.json <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>需要一段时间</span>
ls /mydata/nodedata-2/data/</pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>可看到节点身份文件（network.rlp和network.rlp.pub）生成到了/mydata/nodedata-2/data/下。</p>
   <p>其中network.rlp是节点身份的私钥二进制文件。network.rlp.pub是节点身份的NodeId文件。</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">network.rlp  network.rlp.pub</pre>
  </div>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#523-%E9%85%8D%E7%BD%AE%E8%8A%82%E7%82%B9nodeid" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.2.3 配置节点NodeId</h4>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">（1）查看NodeId</p>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);"><span class="pl-c1" style="color:rgb(0,92,197);">cd</span> /mydata/nodedata-2/data/
cat network.rlp.pub</pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>得到如下类似的NodeId</p>
  </blockquote>
  <pre lang="log" style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);color:rgb(36,41,46);" xml:lang="log"><code style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;background:transparent;border:0px;line-height:inherit;">b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8
</code></pre>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">（2）修改config.json</p>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>在NodeextraInfo字段中追加新的节点信息。</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">vim /mydata/nodedata-2/config.json</pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>追加后，config.json中的NodeextraInfo字段如下。新追加的内容要与现有的内容有区别，Nodeid为刚生成的NodeId，Port是p2pport端口，Idx为上一条记录加1。注意，若新部署的节点在另外一台机器上，则需要将NodeextraInfo中其它节点的Peerip改成其它节点对应的机器IP，让新部署的节点能够找到其它机器上的节点。</p>
  </blockquote>
  <pre lang="log" style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);color:rgb(36,41,46);" xml:lang="log"><code style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;background:transparent;border:0px;line-height:inherit;">"NodeextraInfo":[
    {
	    "Nodeid":"24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56",
	    "Nodedesc": "node1",
	    "Agencyinfo": "node1",
	    "Peerip": "0.0.0.0",
	    "Identitytype": 1,
	    "Port":30303,
	    "Idx":0
    },
    {
	    "Nodeid":"b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8",
	    "Nodedesc": "node2",
	    "Agencyinfo": "node2",
	    "Peerip": "0.0.0.0",
	    "Identitytype": 1,
	    "Port":30403,
	    "Idx":1
    }
]
</code></pre>
  <h3 style="font-size:1.25em;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#53-%E9%85%8D%E7%BD%AE%E8%AF%81%E4%B9%A6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.3 配置证书</h3>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">区块链节点间的通信需要证书的认证。在节点运行前，需要为节点配置证书。其中ca.crt是整个区块链的根证书公钥，所有节点共用。</p>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#531-%E9%85%8D%E7%BD%AE%E6%A0%B9%E8%AF%81%E4%B9%A6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.3.1 配置根证书</h4>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>一条链上的所有区块链节点都共用一个根证书ca.crt。直接从创世节点目录拷贝。</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">cp /mydata/nodedata-1/data/ca.crt /mydata/nodedata-2/data/</pre>
  </div>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#532-%E7%94%9F%E6%88%90%E8%8A%82%E7%82%B9%E8%AF%81%E4%B9%A6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.3.2 生成节点证书</h4>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>生成普通节点证书（server.key、server.crt）的步骤与创世节点相同。在生成前，需要把生成脚本和根证书私钥（ca.key）配置到data目录下。</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);"><span class="pl-c1" style="color:rgb(0,92,197);">cd</span> /mydata/nodedata-2/data/
cp /mydata/nodedata-1/data/ca.key <span class="pl-c1" style="color:rgb(0,92,197);">.</span> <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>假设根证书私钥放在node1的data目录下</span>
cp /mydata/nodedata-1/data/genkey.sh <span class="pl-c1" style="color:rgb(0,92,197);">.</span></pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>用根证书公私钥生成节点证书公私钥（server.key、server.crt）</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">./genkey.sh server ./ca.key ./ca.crt 365 <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>生成server证书有效期为365天</span></pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>生成后，此时目录下应存在下述文件：</p>
  </blockquote>
  <pre lang="log" style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);color:rgb(36,41,46);" xml:lang="log"><code style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;background:transparent;border:0px;line-height:inherit;">ca.crt  network.rlp  network.rlp.pub  server.crt  server.key
</code></pre>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>注意，ca.key在生成了节点证书后，应立即删除。</p>
  </blockquote>
  <h3 style="font-size:1.25em;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#54-%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.4 配置相关配置文件</h3>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">普通节点的启动依赖三个配置文件：</p>
  <ul style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <li>创世块文件：genesis.json（与创世节点相同，直接复制，无需修改）</li>
   <li>节点配置文件：config.json</li>
   <li>日志配置文件：log.conf</li>
  </ul>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#541-%E9%85%8D%E7%BD%AEconfigjson%E8%8A%82%E7%82%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.4.1 配置config.json（节点配置文件）</h4>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">config.json中可配置节点的各种信息，包括网络地址，文件目录，节点身份等。</p>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">vim /mydata/nodedata-2/config.json</pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>配置本节点的信息，主要修改字段，注意与NodeextraInfo中的内容对应：</p>
   <ul>
    <li>网络连接相关：listenip、rpcport、p2pport、channelPort</li>
    <li>目录相关：wallet、keystoredir、datadir、logconf</li>
    <li>节点身份相关：NodeextraInfo中的Nodeid、Nodedesc、Agencyinfo、Peerip、Identitytype、Port、Idx（与网络连接相关对应上）</li>
   </ul>
  </blockquote>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">config.json其它字段说明请参看附录：11.4 config.json说明</p>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>配置好的config.json如下：</p>
  </blockquote>
  <pre lang="log" style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);color:rgb(36,41,46);" xml:lang="log"><code style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;background:transparent;border:0px;line-height:inherit;">{
        "sealEngine": "PBFT",
        "systemproxyaddress":"0x919868496524eedc26dbb81915fa1547a20f8998",
        "listenip":"0.0.0.0",
        "cryptomod":"0",
        "ssl":"0",
        "rpcport": "8546",
        "p2pport": "30403",
        "channelPort": "30404",
        "wallet":"/mydata/nodedata-2/keys.info",
        "keystoredir":"/mydata/nodedata-2/keystore/",
        "datadir":"/mydata/nodedata-2/data/",
        "vm":"interpreter",
        "networkid":"12345",
        "logverbosity":"4",
        "coverlog":"OFF",
        "eventlog":"ON",
        "statlog":"OFF",
        "logconf":"/mydata/nodedata-2/log.conf",
        "params": {
                "accountStartNonce": "0x0",
                "maximumExtraDataSize": "0x0",
                "tieBreakingGas": false,
                "blockReward": "0x0",
                "networkID" : "0x0"
        },
        "NodeextraInfo":[
                {
                "Nodeid":"24b98c6532ff05c2e9e637b3362ee4328c228fb4f6262c1c751f51952012cd68da2cbd8655de5072e49b950a503326942297cfaa9ca919b369be4359b4dccd56",
                "Nodedesc": "node1",
                "Agencyinfo": "node1",
                "Peerip": "0.0.0.0",
                "Identitytype": 1,
                "Port":30303,
                "Idx":0
                },
                {
                "Nodeid":"b5adf6440bb0fe7c337eccfda9259985ee42c1c94e0d357e813f905b6c0fa2049d45170b78367649dd0b8b5954ee919bf50c1398a373ca777e6329bd0c4b82e8",
                "Nodedesc": "node2",
                "Agencyinfo": "node2",
                "Peerip": "0.0.0.0",
                "Identitytype": 1,
                "Port":30403,
                "Idx":1
                }
        ]
}
</code></pre>
  <h4 style="font-size:16px;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#542-%E9%85%8D%E7%BD%AElogconf%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.4.2 配置log.conf（日志配置文件）</h4>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">log.conf中配置节点日志生成的格式和路径。</p>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">vim /mydata/nodedata-2/log.conf </pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>主要配置日志文件的生成路径，配置好的log.conf 如下：</p>
  </blockquote>
  <pre lang="log" style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);color:rgb(36,41,46);" xml:lang="log"><code style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;background:transparent;border:0px;line-height:inherit;">* GLOBAL:
    ENABLED                 =   true
    TO_FILE                 =   true
    TO_STANDARD_OUTPUT      =   false
    FORMAT                  =   "%level|%datetime{%Y-%M-%d %H:%m:%s:%g}|%msg"
    FILENAME                =   "/mydata/nodedata-2/log/log_%datetime{%Y%M%d%H}.log"
    MILLISECONDS_WIDTH      =   3
    PERFORMANCE_TRACKING    =   false
    MAX_LOG_FILE_SIZE       =   209715200 ## 200MB - Comment starts with two hashes (##)
    LOG_FLUSH_THRESHOLD     =   100  ## Flush after every 100 logs

* TRACE:
    ENABLED                 =   true
    FILENAME                =   "/mydata/nodedata-2/log/trace_log_%datetime{%Y%M%d%H}.log"

* DEBUG:
    ENABLED                 =   true
    FILENAME                =   "/mydata/nodedata-2/log/debug_log_%datetime{%Y%M%d%H}.log"

* FATAL:
    ENABLED                 =   true
    FILENAME                =   "/mydata/nodedata-2/log/fatal_log_%datetime{%Y%M%d%H}.log"

* ERROR:
    ENABLED                 =   true
    FILENAME                =   "/mydata/nodedata-2/log/error_log_%datetime{%Y%M%d%H}.log"

* WARNING:
     ENABLED                 =   true
     FILENAME                =   "/mydata/nodedata-2/log/warn_log_%datetime{%Y%M%d%H}.log"

* INFO:
    ENABLED                 =   true
    FILENAME                =   "/mydata/nodedata-2/log/info_log_%datetime{%Y%M%d%H}.log"

* VERBOSE:
    ENABLED                 =   true
    FILENAME                =   "/mydata/nodedata-2/log/verbose_log_%datetime{%Y%M%d%H}.log"
</code></pre>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">log.conf其它字段说明请参看附录：11.5 log.conf说明</p>
  <h3 style="font-size:1.25em;line-height:1.25;color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';"><a class="anchor" href="https://github.com/FISCO-BCOS/FISCO-BCOS/tree/master/doc/manual#55-%E5%90%AF%E5%8A%A8%E8%8A%82%E7%82%B9" rel="nofollow" style="color:rgb(3,102,214);margin-left:-20px;line-height:1;"></a>5.5 启动节点</h3>
  <p style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">节点的启动依赖下列文件，在启动前，请确认文件已经正确的配置：</p>
  <ul style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <li>证书文件（/mydata/nodedata-2/data）：ca.crt、network.rlp、network.rlp.pub、server.crt、server.key</li>
   <li>配置文件（/mydata/nodedata-2/）：genesis.json、config.json、log.conf</li>
  </ul>
  <blockquote style="border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p><span style="color:#ff0000;">启动普通节点，此时<span style="font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">普通</span>节点未被注册到区块链中，启动时只能看到进程，不能刷出打包信息。要让此节点正确的运行，请进入环境搭建(四)多节点组网 </span><span style="color:#6a737d;">。</span></p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);"><span class="pl-c1" style="color:rgb(0,92,197);">cd</span> /mydata/nodedata-2/
chmod +x <span class="pl-k" style="color:rgb(215,58,73);">*</span>.sh
./start.sh <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>此时节点未被注册到区块链中，等待10秒，不会刷出打包信息</span>
ctrl-c 退出
ps -ef <span class="pl-k" style="color:rgb(215,58,73);">|</span>grep fisco-bcos <span class="pl-c" style="color:rgb(106,115,125);"><span class="pl-c">#</span>可查看到节点进程存在</span></pre>
  </div>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>可看到进程已经在运行</p>
  </blockquote>
  <pre lang="log" style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);color:rgb(36,41,46);" xml:lang="log"><code style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;background:transparent;border:0px;line-height:inherit;">app  9656     1  4 16:10 ?        00:00:01 fisco-bcos --genesis /mydata/nodedata-2/genesis.json --config /mydata/nodedata-2/config.json
</code></pre>
  <blockquote style="color:rgb(106,115,125);border-left:.25em solid rgb(223,226,229);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <p>关闭节点，待注册后再重启</p>
  </blockquote>
  <div class="highlight highlight-source-shell" style="color:rgb(36,41,46);font-family:'-apple-system', BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
   <pre style="font-family:'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;font-size:13.6px;line-height:1.45;background-color:rgb(246,248,250);">./stop.sh </pre>
  </div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/h363659487/article/details/79798121,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/h363659487/article/details/79798121,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
