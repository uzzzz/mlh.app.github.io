<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>使用 Go-Ethereum 1.7.2搭建以太坊私有链 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="使用 Go-Ethereum 1.7.2搭建以太坊私有链" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1、什么是Ethereum(以太坊) 　　以太坊（Ethereum）并不是一个机构，而是一款能够在区块链上实现智能合约、开源的底层系统，以太坊从诞生到2017年5月，短短3年半时间，全球已有200多个以太坊应用诞生。以太坊是一个平台和一种编程语言，使开发人员能够建立和发布下一代分布式应用。 以太坊可以用来编程，分散，担保和交易任何事物：投票，域名，金融交易所，众筹，公司管理， 合同和大部分的协议，知识产权，还有得益于硬件集成的智能资产。 　　以太坊的白皮书：https://github.com/ethereum/wiki/wiki/White-Paper 1.2、以太坊的几个基本概念： 　　以太坊简单来说就是区块链与智能合约的结合，是基于solidity语言实现的。在以太坊中，智能合约也有一个帐户地址。 EVM 　　以太坊虚拟机（EVM）是以太坊中智能合约的运行环境。它不仅被沙箱封装起来，事实上它被完全隔离，运行在EVM内部的代码不能接触到网络、文件系统或者其它进程。甚至智能合约之间也只有有限的调用。 Accounts 　　以太坊中有两类账户，它们共用同一个地址空间。外部账户，该类账户被公钥-私钥对控制。合约账户，该类账户被存储在账户中的代码控制。 外部账户的地址是由公钥决定的，合约账户的地址是在创建合约时确定的。 　　每个账户都有一个以太币余额（单位是“Wei”），该账户余额可以通过向它发送带有以太币的交易来改变。 Transactions 　　每一笔交易都是一条信息，可以通过交易，将余额从一个帐户发至另一个帐户。 Gas 　　每一笔交易需要支付一定的gas。gas price是由创建者设置的，调用合约的发送账户需要交易费用 = gas price * gas amount。 1.3、以太坊周边的常用工具 Go-Ethereum Browser-solidity Mist TestRPC 2、什么是 Go-Ethereum？ 　　Go-Ethereum是由以太坊基金会提供的官方客户端软件。它是用Go编程语言编写的，简称Geth。其中以下几个组件是值得了解的： Geth 客户端 　　当你开始这个客户程序，它连接到其他客户端（也称为节点）的网络下载同步区块。它将不断地与其他节点进行通信来保持它的副本是最新的。它还具有挖掘区块并将交易添加到块链的能力，验证并执行区块中的交易。它还可以充当服务器，您可以通过RPC来访问暴露的API接口。 Geth 终端 　　这是一个命令行工具，可以让您连接到正在运行的节点，并执行各种操作，如创建和管理帐户，查询区块链，签署并将交易提交给区块链等等。更多介绍&nbsp;点击这里 3、Go-Ethereum的开源地址在哪里？ 　　https://github.com/ethereum/go-ethereum 4、如何安装Go-Ethereum 1.7.2 　　本文中使用的方法是通过Git下载源码，本地编译Go-Ethereum 1.7.2 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum git checkout v1.7.2 make geth make all 　　查看安装好的geth版本号 ➜ /Users/lion &gt;geth version Geth Version: 1.7.2-stable Git Commit: 1db4ecdc0b9e828ff65777fb466fc7c1d04e0de9 Architecture: amd64 Protocol Versions: [63 62] Network Id: 1 Go Version: go1.9.1 Operating System: darwin GOPATH=/Users/lion/my_project/_golang GOROOT=/usr/local/Cellar/go/1.9.1/libexec 5、开始创建以太坊私有链 5.1、初始化一个创世区块 　　初始化创世区块时，要先创建一个genesis.json文件，内容如下： 　　genesis.json： { &quot;config&quot;: { &quot;chainId&quot;: 10, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot; : {}, } 参数名称 参数描述 mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase 矿工的账号，随便填 timestamp 设置创世块的时间戳 parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 extraData 附加信息，随便填，可以填你的个性信息 gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 　　 　　接下来，我们使用geth init ./genesis.json --datadir &quot;./chain&quot;命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在chain目录中： ➜ /Users/lion/my_project/_eth/test &gt;geth init ./genesis.json --datadir &quot;./chain&quot; WARN [10-22|14:49:09] No etherbase set and no accounts found as default INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 　　 5.2、启用私有链 　　使用以下命令，启用私有链： geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log 　　　　启动后的效果如下： ➜ /Users/lion/my_project/_eth/test &gt;geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log Welcome to the Geth JavaScript console! instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 &gt; 参数名称 参数描述 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在Geth中执行命令 nodiscover 私有链地址，不会被网上看到 　　 　　在当前目录执行tail -f eth_output.log，可以看到输出日志。 ➜ /Users/lion/my_project/_eth/test &gt;tail -f eth_output.log INFO [10-22|14:50:04] Bloom-bin upgrade completed elapsed=149.285µs INFO [10-22|14:50:04] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [10-22|14:50:04] Database conversion successful INFO [10-22|14:50:04] Loaded most recent local header number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local full block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local fast block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Starting P2P networking INFO [10-22|14:50:04] RLPx listener up self=&quot;enode://bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0&quot; INFO [10-22|14:50:04] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc INFO [10-22|14:50:05] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(10.0.0.1) 后面章节中的命令，都是在启动私有链后的Geth javascript console中操作 　　 5.2.1、帐户的添加和查看 　　查看帐户，可以看到当前帐户是空的 &gt; web3.eth.accounts [] 　　　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码 &gt; web3.personal.newAccount(&quot;123456&quot;) &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; 其中返回的0xbe323cc4fde114269a9513a27d3e985f82b9e25d是帐户，123456是帐户的密码 　　　　第二种方法是先创建账户，然后输入密码 &gt; web3.personal.newAccount() Passphrase: Repeat passphrase: &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; 　　　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了 &gt; web3.eth.accounts [&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;, &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;] 　　 5.2.2、开始挖矿和停止挖矿 　　挖矿执行以下命令： &gt; miner.start(1) 　　　　执行以后，通过刚才查看日志的方法tail -f eth_output.log,能够看到类似下面的日志，说明挖矿已经在进行. INFO [10-22|15:01:32] Commit new mining work number=70 txs=0 uncles=0 elapsed=2.000s INFO [10-22|15:01:34] Successfully sealed new block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] block reached canonical chain number=65 hash=3f6d16…586aba INFO [10-22|15:01:34] mined potential block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] Commit new mining work number=71 txs=0 uncles=0 elapsed=163.977µs INFO [10-22|15:01:34] Successfully sealed new block number=71 hash=f84b8a…7468e1 INFO [10-22|15:01:34] block reached canonical chain number=66 hash=6ca3b9…e959e8 INFO [10-22|15:01:34] mined potential block number=71 hash=f84b8a…7468e1 挖矿会默认保存到创建的第一个帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d中。block number=66，说明我们已经创建了66个区块在以太坊官方的网络上，平均每15秒产生一个区块 　　停止挖矿执行以下命令： &gt; miner.stop() 停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 　　 5.2.3、查看帐户余额 　　查看帐户余额的方法如下： &gt; web3.eth.getBalance(&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;) 1.245e+21 &gt; web3.eth.getBalance(&quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;) 0 　　　　每次记一长串的地址很麻烦，我们可以通过设置变量来acc0表示帐户10xbe323cc4fde114269a9513a27d3e985f82b9e25d,acc1表示帐户20x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70. &gt; acc0 = web3.eth.accounts[0] &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; &gt; acc1 = web3.eth.accounts[1] &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; &gt; web3.eth.getBalance(acc0) 1.245e+21 &gt; web3.eth.getBalance(acc1) 0 ## 使用这个方法可以查看格式化的以太币 &gt; web3.fromWei(web3.eth.getBalance(acc0)) 1245 以太币最小的单位是wei（18个0） 　　　　因为geth javascript console是基于javascript的，所以也可以创建js函数，查看所有帐户余额 &gt; function checkAllBalances() { var totalBal = 0; for (var acctNum in eth.accounts) { var acct = eth.accounts[acctNum]; var acctBal = web3.fromWei(eth.getBalance(acct), &quot;ether&quot;); totalBal += parseFloat(acctBal); console.log(&quot; eth.accounts[&quot; + acctNum + &quot;]: \t&quot; + acct + &quot; \tbalance: &quot; + acctBal + &quot; ether&quot;); } console.log(&quot; Total balance: &quot; + totalBal + &quot; ether&quot;); }; &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether 如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript(&#39;/path/script/here.js&#39;) 　　 5.2.4、转帐操作 　　从帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d转3个以太币到0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70,如果不指定单位ether，默认转的是wei。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) Error: authentication needed: password or unlock at web3.js:3104:20 at web3.js:6191:15 at web3.js:5004:36 at &lt;anonymous&gt;:1:1 当直接执行此方法时会抛出异常，显示帐号被锁 　　　　解锁转帐帐户 &gt; web3.personal.unlockAccount(acc0,&quot;123456&quot;) true 　　　　解锁完成之后，即可执行转账操作。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) &quot;0x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056&quot; 　　　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。 &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether undefined &gt; miner.start() null &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1257 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 3 ether Total balance: 1260 ether undefined &gt; miner.stop() true 阅读更多" />
<meta property="og:description" content="1、什么是Ethereum(以太坊) 　　以太坊（Ethereum）并不是一个机构，而是一款能够在区块链上实现智能合约、开源的底层系统，以太坊从诞生到2017年5月，短短3年半时间，全球已有200多个以太坊应用诞生。以太坊是一个平台和一种编程语言，使开发人员能够建立和发布下一代分布式应用。 以太坊可以用来编程，分散，担保和交易任何事物：投票，域名，金融交易所，众筹，公司管理， 合同和大部分的协议，知识产权，还有得益于硬件集成的智能资产。 　　以太坊的白皮书：https://github.com/ethereum/wiki/wiki/White-Paper 1.2、以太坊的几个基本概念： 　　以太坊简单来说就是区块链与智能合约的结合，是基于solidity语言实现的。在以太坊中，智能合约也有一个帐户地址。 EVM 　　以太坊虚拟机（EVM）是以太坊中智能合约的运行环境。它不仅被沙箱封装起来，事实上它被完全隔离，运行在EVM内部的代码不能接触到网络、文件系统或者其它进程。甚至智能合约之间也只有有限的调用。 Accounts 　　以太坊中有两类账户，它们共用同一个地址空间。外部账户，该类账户被公钥-私钥对控制。合约账户，该类账户被存储在账户中的代码控制。 外部账户的地址是由公钥决定的，合约账户的地址是在创建合约时确定的。 　　每个账户都有一个以太币余额（单位是“Wei”），该账户余额可以通过向它发送带有以太币的交易来改变。 Transactions 　　每一笔交易都是一条信息，可以通过交易，将余额从一个帐户发至另一个帐户。 Gas 　　每一笔交易需要支付一定的gas。gas price是由创建者设置的，调用合约的发送账户需要交易费用 = gas price * gas amount。 1.3、以太坊周边的常用工具 Go-Ethereum Browser-solidity Mist TestRPC 2、什么是 Go-Ethereum？ 　　Go-Ethereum是由以太坊基金会提供的官方客户端软件。它是用Go编程语言编写的，简称Geth。其中以下几个组件是值得了解的： Geth 客户端 　　当你开始这个客户程序，它连接到其他客户端（也称为节点）的网络下载同步区块。它将不断地与其他节点进行通信来保持它的副本是最新的。它还具有挖掘区块并将交易添加到块链的能力，验证并执行区块中的交易。它还可以充当服务器，您可以通过RPC来访问暴露的API接口。 Geth 终端 　　这是一个命令行工具，可以让您连接到正在运行的节点，并执行各种操作，如创建和管理帐户，查询区块链，签署并将交易提交给区块链等等。更多介绍&nbsp;点击这里 3、Go-Ethereum的开源地址在哪里？ 　　https://github.com/ethereum/go-ethereum 4、如何安装Go-Ethereum 1.7.2 　　本文中使用的方法是通过Git下载源码，本地编译Go-Ethereum 1.7.2 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum git checkout v1.7.2 make geth make all 　　查看安装好的geth版本号 ➜ /Users/lion &gt;geth version Geth Version: 1.7.2-stable Git Commit: 1db4ecdc0b9e828ff65777fb466fc7c1d04e0de9 Architecture: amd64 Protocol Versions: [63 62] Network Id: 1 Go Version: go1.9.1 Operating System: darwin GOPATH=/Users/lion/my_project/_golang GOROOT=/usr/local/Cellar/go/1.9.1/libexec 5、开始创建以太坊私有链 5.1、初始化一个创世区块 　　初始化创世区块时，要先创建一个genesis.json文件，内容如下： 　　genesis.json： { &quot;config&quot;: { &quot;chainId&quot;: 10, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot; : {}, } 参数名称 参数描述 mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase 矿工的账号，随便填 timestamp 设置创世块的时间戳 parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 extraData 附加信息，随便填，可以填你的个性信息 gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 　　 　　接下来，我们使用geth init ./genesis.json --datadir &quot;./chain&quot;命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在chain目录中： ➜ /Users/lion/my_project/_eth/test &gt;geth init ./genesis.json --datadir &quot;./chain&quot; WARN [10-22|14:49:09] No etherbase set and no accounts found as default INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 　　 5.2、启用私有链 　　使用以下命令，启用私有链： geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log 　　　　启动后的效果如下： ➜ /Users/lion/my_project/_eth/test &gt;geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log Welcome to the Geth JavaScript console! instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 &gt; 参数名称 参数描述 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在Geth中执行命令 nodiscover 私有链地址，不会被网上看到 　　 　　在当前目录执行tail -f eth_output.log，可以看到输出日志。 ➜ /Users/lion/my_project/_eth/test &gt;tail -f eth_output.log INFO [10-22|14:50:04] Bloom-bin upgrade completed elapsed=149.285µs INFO [10-22|14:50:04] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [10-22|14:50:04] Database conversion successful INFO [10-22|14:50:04] Loaded most recent local header number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local full block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local fast block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Starting P2P networking INFO [10-22|14:50:04] RLPx listener up self=&quot;enode://bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0&quot; INFO [10-22|14:50:04] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc INFO [10-22|14:50:05] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(10.0.0.1) 后面章节中的命令，都是在启动私有链后的Geth javascript console中操作 　　 5.2.1、帐户的添加和查看 　　查看帐户，可以看到当前帐户是空的 &gt; web3.eth.accounts [] 　　　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码 &gt; web3.personal.newAccount(&quot;123456&quot;) &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; 其中返回的0xbe323cc4fde114269a9513a27d3e985f82b9e25d是帐户，123456是帐户的密码 　　　　第二种方法是先创建账户，然后输入密码 &gt; web3.personal.newAccount() Passphrase: Repeat passphrase: &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; 　　　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了 &gt; web3.eth.accounts [&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;, &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;] 　　 5.2.2、开始挖矿和停止挖矿 　　挖矿执行以下命令： &gt; miner.start(1) 　　　　执行以后，通过刚才查看日志的方法tail -f eth_output.log,能够看到类似下面的日志，说明挖矿已经在进行. INFO [10-22|15:01:32] Commit new mining work number=70 txs=0 uncles=0 elapsed=2.000s INFO [10-22|15:01:34] Successfully sealed new block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] block reached canonical chain number=65 hash=3f6d16…586aba INFO [10-22|15:01:34] mined potential block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] Commit new mining work number=71 txs=0 uncles=0 elapsed=163.977µs INFO [10-22|15:01:34] Successfully sealed new block number=71 hash=f84b8a…7468e1 INFO [10-22|15:01:34] block reached canonical chain number=66 hash=6ca3b9…e959e8 INFO [10-22|15:01:34] mined potential block number=71 hash=f84b8a…7468e1 挖矿会默认保存到创建的第一个帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d中。block number=66，说明我们已经创建了66个区块在以太坊官方的网络上，平均每15秒产生一个区块 　　停止挖矿执行以下命令： &gt; miner.stop() 停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 　　 5.2.3、查看帐户余额 　　查看帐户余额的方法如下： &gt; web3.eth.getBalance(&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;) 1.245e+21 &gt; web3.eth.getBalance(&quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;) 0 　　　　每次记一长串的地址很麻烦，我们可以通过设置变量来acc0表示帐户10xbe323cc4fde114269a9513a27d3e985f82b9e25d,acc1表示帐户20x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70. &gt; acc0 = web3.eth.accounts[0] &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; &gt; acc1 = web3.eth.accounts[1] &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; &gt; web3.eth.getBalance(acc0) 1.245e+21 &gt; web3.eth.getBalance(acc1) 0 ## 使用这个方法可以查看格式化的以太币 &gt; web3.fromWei(web3.eth.getBalance(acc0)) 1245 以太币最小的单位是wei（18个0） 　　　　因为geth javascript console是基于javascript的，所以也可以创建js函数，查看所有帐户余额 &gt; function checkAllBalances() { var totalBal = 0; for (var acctNum in eth.accounts) { var acct = eth.accounts[acctNum]; var acctBal = web3.fromWei(eth.getBalance(acct), &quot;ether&quot;); totalBal += parseFloat(acctBal); console.log(&quot; eth.accounts[&quot; + acctNum + &quot;]: \t&quot; + acct + &quot; \tbalance: &quot; + acctBal + &quot; ether&quot;); } console.log(&quot; Total balance: &quot; + totalBal + &quot; ether&quot;); }; &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether 如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript(&#39;/path/script/here.js&#39;) 　　 5.2.4、转帐操作 　　从帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d转3个以太币到0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70,如果不指定单位ether，默认转的是wei。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) Error: authentication needed: password or unlock at web3.js:3104:20 at web3.js:6191:15 at web3.js:5004:36 at &lt;anonymous&gt;:1:1 当直接执行此方法时会抛出异常，显示帐号被锁 　　　　解锁转帐帐户 &gt; web3.personal.unlockAccount(acc0,&quot;123456&quot;) true 　　　　解锁完成之后，即可执行转账操作。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) &quot;0x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056&quot; 　　　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。 &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether undefined &gt; miner.start() null &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1257 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 3 ether Total balance: 1260 ether undefined &gt; miner.stop() true 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/04/27/0b78a665a2f3ab8d1d66fb006da87ea4.html" />
<meta property="og:url" content="https://mlh.app/2018/04/27/0b78a665a2f3ab8d1d66fb006da87ea4.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-27T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1、什么是Ethereum(以太坊) 　　以太坊（Ethereum）并不是一个机构，而是一款能够在区块链上实现智能合约、开源的底层系统，以太坊从诞生到2017年5月，短短3年半时间，全球已有200多个以太坊应用诞生。以太坊是一个平台和一种编程语言，使开发人员能够建立和发布下一代分布式应用。 以太坊可以用来编程，分散，担保和交易任何事物：投票，域名，金融交易所，众筹，公司管理， 合同和大部分的协议，知识产权，还有得益于硬件集成的智能资产。 　　以太坊的白皮书：https://github.com/ethereum/wiki/wiki/White-Paper 1.2、以太坊的几个基本概念： 　　以太坊简单来说就是区块链与智能合约的结合，是基于solidity语言实现的。在以太坊中，智能合约也有一个帐户地址。 EVM 　　以太坊虚拟机（EVM）是以太坊中智能合约的运行环境。它不仅被沙箱封装起来，事实上它被完全隔离，运行在EVM内部的代码不能接触到网络、文件系统或者其它进程。甚至智能合约之间也只有有限的调用。 Accounts 　　以太坊中有两类账户，它们共用同一个地址空间。外部账户，该类账户被公钥-私钥对控制。合约账户，该类账户被存储在账户中的代码控制。 外部账户的地址是由公钥决定的，合约账户的地址是在创建合约时确定的。 　　每个账户都有一个以太币余额（单位是“Wei”），该账户余额可以通过向它发送带有以太币的交易来改变。 Transactions 　　每一笔交易都是一条信息，可以通过交易，将余额从一个帐户发至另一个帐户。 Gas 　　每一笔交易需要支付一定的gas。gas price是由创建者设置的，调用合约的发送账户需要交易费用 = gas price * gas amount。 1.3、以太坊周边的常用工具 Go-Ethereum Browser-solidity Mist TestRPC 2、什么是 Go-Ethereum？ 　　Go-Ethereum是由以太坊基金会提供的官方客户端软件。它是用Go编程语言编写的，简称Geth。其中以下几个组件是值得了解的： Geth 客户端 　　当你开始这个客户程序，它连接到其他客户端（也称为节点）的网络下载同步区块。它将不断地与其他节点进行通信来保持它的副本是最新的。它还具有挖掘区块并将交易添加到块链的能力，验证并执行区块中的交易。它还可以充当服务器，您可以通过RPC来访问暴露的API接口。 Geth 终端 　　这是一个命令行工具，可以让您连接到正在运行的节点，并执行各种操作，如创建和管理帐户，查询区块链，签署并将交易提交给区块链等等。更多介绍&nbsp;点击这里 3、Go-Ethereum的开源地址在哪里？ 　　https://github.com/ethereum/go-ethereum 4、如何安装Go-Ethereum 1.7.2 　　本文中使用的方法是通过Git下载源码，本地编译Go-Ethereum 1.7.2 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum git checkout v1.7.2 make geth make all 　　查看安装好的geth版本号 ➜ /Users/lion &gt;geth version Geth Version: 1.7.2-stable Git Commit: 1db4ecdc0b9e828ff65777fb466fc7c1d04e0de9 Architecture: amd64 Protocol Versions: [63 62] Network Id: 1 Go Version: go1.9.1 Operating System: darwin GOPATH=/Users/lion/my_project/_golang GOROOT=/usr/local/Cellar/go/1.9.1/libexec 5、开始创建以太坊私有链 5.1、初始化一个创世区块 　　初始化创世区块时，要先创建一个genesis.json文件，内容如下： 　　genesis.json： { &quot;config&quot;: { &quot;chainId&quot;: 10, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot;, &quot;alloc&quot; : {}, } 参数名称 参数描述 mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase 矿工的账号，随便填 timestamp 设置创世块的时间戳 parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 extraData 附加信息，随便填，可以填你的个性信息 gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 　　 　　接下来，我们使用geth init ./genesis.json --datadir &quot;./chain&quot;命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在chain目录中： ➜ /Users/lion/my_project/_eth/test &gt;geth init ./genesis.json --datadir &quot;./chain&quot; WARN [10-22|14:49:09] No etherbase set and no accounts found as default INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 　　 5.2、启用私有链 　　使用以下命令，启用私有链： geth \\ --datadir &quot;./chain&quot; \\ --nodiscover \\ console 2&gt;&gt;eth_output.log 　　　　启动后的效果如下： ➜ /Users/lion/my_project/_eth/test &gt;geth \\ --datadir &quot;./chain&quot; \\ --nodiscover \\ console 2&gt;&gt;eth_output.log Welcome to the Geth JavaScript console! instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 &gt; 参数名称 参数描述 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在Geth中执行命令 nodiscover 私有链地址，不会被网上看到 　　 　　在当前目录执行tail -f eth_output.log，可以看到输出日志。 ➜ /Users/lion/my_project/_eth/test &gt;tail -f eth_output.log INFO [10-22|14:50:04] Bloom-bin upgrade completed elapsed=149.285µs INFO [10-22|14:50:04] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [10-22|14:50:04] Database conversion successful INFO [10-22|14:50:04] Loaded most recent local header number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local full block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local fast block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Starting P2P networking INFO [10-22|14:50:04] RLPx listener up self=&quot;enode://bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0&quot; INFO [10-22|14:50:04] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc INFO [10-22|14:50:05] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(10.0.0.1) 后面章节中的命令，都是在启动私有链后的Geth javascript console中操作 　　 5.2.1、帐户的添加和查看 　　查看帐户，可以看到当前帐户是空的 &gt; web3.eth.accounts [] 　　　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码 &gt; web3.personal.newAccount(&quot;123456&quot;) &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; 其中返回的0xbe323cc4fde114269a9513a27d3e985f82b9e25d是帐户，123456是帐户的密码 　　　　第二种方法是先创建账户，然后输入密码 &gt; web3.personal.newAccount() Passphrase: Repeat passphrase: &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; 　　　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了 &gt; web3.eth.accounts [&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;, &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;] 　　 5.2.2、开始挖矿和停止挖矿 　　挖矿执行以下命令： &gt; miner.start(1) 　　　　执行以后，通过刚才查看日志的方法tail -f eth_output.log,能够看到类似下面的日志，说明挖矿已经在进行. INFO [10-22|15:01:32] Commit new mining work number=70 txs=0 uncles=0 elapsed=2.000s INFO [10-22|15:01:34] Successfully sealed new block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] block reached canonical chain number=65 hash=3f6d16…586aba INFO [10-22|15:01:34] mined potential block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] Commit new mining work number=71 txs=0 uncles=0 elapsed=163.977µs INFO [10-22|15:01:34] Successfully sealed new block number=71 hash=f84b8a…7468e1 INFO [10-22|15:01:34] block reached canonical chain number=66 hash=6ca3b9…e959e8 INFO [10-22|15:01:34] mined potential block number=71 hash=f84b8a…7468e1 挖矿会默认保存到创建的第一个帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d中。block number=66，说明我们已经创建了66个区块在以太坊官方的网络上，平均每15秒产生一个区块 　　停止挖矿执行以下命令： &gt; miner.stop() 停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 　　 5.2.3、查看帐户余额 　　查看帐户余额的方法如下： &gt; web3.eth.getBalance(&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;) 1.245e+21 &gt; web3.eth.getBalance(&quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;) 0 　　　　每次记一长串的地址很麻烦，我们可以通过设置变量来acc0表示帐户10xbe323cc4fde114269a9513a27d3e985f82b9e25d,acc1表示帐户20x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70. &gt; acc0 = web3.eth.accounts[0] &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; &gt; acc1 = web3.eth.accounts[1] &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; &gt; web3.eth.getBalance(acc0) 1.245e+21 &gt; web3.eth.getBalance(acc1) 0 ## 使用这个方法可以查看格式化的以太币 &gt; web3.fromWei(web3.eth.getBalance(acc0)) 1245 以太币最小的单位是wei（18个0） 　　　　因为geth javascript console是基于javascript的，所以也可以创建js函数，查看所有帐户余额 &gt; function checkAllBalances() { var totalBal = 0; for (var acctNum in eth.accounts) { var acct = eth.accounts[acctNum]; var acctBal = web3.fromWei(eth.getBalance(acct), &quot;ether&quot;); totalBal += parseFloat(acctBal); console.log(&quot; eth.accounts[&quot; + acctNum + &quot;]: \\t&quot; + acct + &quot; \\tbalance: &quot; + acctBal + &quot; ether&quot;); } console.log(&quot; Total balance: &quot; + totalBal + &quot; ether&quot;); }; &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether 如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript(&#39;/path/script/here.js&#39;) 　　 5.2.4、转帐操作 　　从帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d转3个以太币到0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70,如果不指定单位ether，默认转的是wei。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) Error: authentication needed: password or unlock at web3.js:3104:20 at web3.js:6191:15 at web3.js:5004:36 at &lt;anonymous&gt;:1:1 当直接执行此方法时会抛出异常，显示帐号被锁 　　　　解锁转帐帐户 &gt; web3.personal.unlockAccount(acc0,&quot;123456&quot;) true 　　　　解锁完成之后，即可执行转账操作。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) &quot;0x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056&quot; 　　　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。 &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether undefined &gt; miner.start() null &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1257 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 3 ether Total balance: 1260 ether undefined &gt; miner.stop() true 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/04/27/0b78a665a2f3ab8d1d66fb006da87ea4.html","headline":"使用 Go-Ethereum 1.7.2搭建以太坊私有链","dateModified":"2018-04-27T00:00:00+08:00","datePublished":"2018-04-27T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/04/27/0b78a665a2f3ab8d1d66fb006da87ea4.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>使用 Go-Ethereum 1.7.2搭建以太坊私有链</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h1 style="line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>1、什么是Ethereum(以太坊)</span></h1>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　以太坊（Ethereum）并不是一个机构，而是一款能够在区块链上实现智能合约、开源的底层系统，以太坊从诞生到2017年5月，短短3年半时间，全球已有200多个以太坊应用诞生。以太坊是一个平台和一种编程语言，使开发人员能够建立和发布下一代分布式应用。 以太坊可以用来编程，分散，担保和交易任何事物：投票，域名，金融交易所，众筹，公司管理， 合同和大部分的协议，知识产权，还有得益于硬件集成的智能资产。</p>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　以太坊的白皮书：https://github.com/ethereum/wiki/wiki/White-Paper</p>
  <h2 style="font-size:13px;line-height:23px;background:rgb(43,102,0);color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;"><span>1.2、以太坊的几个基本概念：</span></h2>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　以太坊简单来说就是区块链与智能合约的结合，是基于<code>solidity</code>语言实现的。在以太坊中，智能合约也有一个帐户地址。</p>
  <ul style="margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;">EVM</li>
  </ul>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　以太坊虚拟机（EVM）是以太坊中智能合约的运行环境。它不仅被沙箱封装起来，事实上它被完全隔离，运行在EVM内部的代码不能接触到网络、文件系统或者其它进程。甚至智能合约之间也只有有限的调用。</p>
  <ul style="margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;">Accounts</li>
  </ul>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　以太坊中有两类账户，它们共用同一个地址空间。外部账户，该类账户被公钥-私钥对控制。合约账户，该类账户被存储在账户中的代码控制。 外部账户的地址是由公钥决定的，合约账户的地址是在创建合约时确定的。</p>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　每个账户都有一个以太币余额（单位是“Wei”），该账户余额可以通过向它发送带有以太币的交易来改变。</p>
  <ul style="margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;">Transactions</li>
  </ul>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　每一笔交易都是一条信息，可以通过交易，将余额从一个帐户发至另一个帐户。</p>
  <ul style="margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;">Gas</li>
  </ul>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　每一笔交易需要支付一定的<code>gas</code>。<code>gas price</code>是由创建者设置的，调用合约的发送账户需要交易费用 = gas price * gas amount。</p>
  <h2 style="font-size:13px;line-height:23px;background:rgb(43,102,0);color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;"><span>1.3、以太坊周边的常用工具</span></h2>
  <ul style="margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;"><a href="https://mshk.top/2017/11/go-ethereum-1-7-2/" rel="nofollow" style="color:rgb(0,0,0);">Go-Ethereum</a></li>
   <li style="margin-left:0px;"><a href="https://mshk.top/2017/11/browser-solidity-go-ethereum-1-7-2/" rel="nofollow" style="color:rgb(0,0,0);">Browser-solidity</a></li>
   <li style="margin-left:0px;">Mist</li>
   <li style="margin-left:0px;">TestRPC</li>
  </ul>
  <h1 style="line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>2、什么是 Go-Ethereum？</span></h1>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<code>Go-Ethereum</code>是由以太坊基金会提供的官方客户端软件。它是用Go编程语言编写的，简称<code>Geth</code>。其中以下几个组件是值得了解的：</p>
  <ul style="margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;">Geth 客户端</li>
  </ul>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　当你开始这个客户程序，它连接到其他客户端（也称为节点）的网络下载同步区块。它将不断地与其他节点进行通信来保持它的副本是最新的。它还具有挖掘区块并将交易添加到块链的能力，验证并执行区块中的交易。它还可以充当服务器，您可以通过RPC来访问暴露的API接口。</p>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);"><img src="https://img.mshk.top/2017-10/browser-solidity-5.png-2?imageView2/0/format/webp" alt="mshk.top" style="border:none;"></p>
  <ul style="margin-left:40px;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;">Geth 终端</li>
  </ul>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　这是一个命令行工具，可以让您连接到正在运行的节点，并执行各种操作，如创建和管理帐户，查询区块链，签署并将交易提交给区块链等等。更多介绍&nbsp;<a href="https://github.com/ethereum/go-ethereum/wiki/geth" rel="nofollow" style="color:rgb(0,0,0);">点击这里</a></p>
  <h1 style="line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>3、Go-Ethereum的开源地址在哪里？</span></h1>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　https://github.com/ethereum/go-ethereum</p>
  <h1 style="line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>4、如何安装Go-Ethereum 1.7.2</span></h1>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　本文中使用的方法是通过<code>Git</code>下载源码，本地编译<code>Go-Ethereum 1.7.2</code></p>
  <pre class="line-numbers prism-highlight language-bash" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-bash"><span class="token function">git clone https://github.com/ethereum/go-ethereum.git <span class="token function">cd go-ethereum <span class="token function">git checkout v1.7.2 <span class="token function">make geth <span class="token function">make all </span></span></span></span></span></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　查看安装好的<code>geth</code>版本号</p>
  <pre class="line-numbers prism-highlight language-bash" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-bash">➜ /Users/lion <span class="token operator">&gt;geth version Geth Version: 1.7.2-stable Git Commit: 1db4ecdc0b9e828ff65777fb466fc7c1d04e0de9 Architecture: amd64 Protocol Versions: <span class="token punctuation">[63 62<span class="token punctuation">] Network Id: 1 Go Version: go1.9.1 Operating System: darwin GOPATH<span class="token operator">=/Users/lion/my_project/_golang GOROOT<span class="token operator">=/usr/local/Cellar/go/1.9.1/libexec </span></span></span></span></span></code></pre>
  <h1 style="line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>5、开始创建以太坊私有链</span></h1>
  <h2 style="font-size:13px;line-height:23px;background:rgb(43,102,0);color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;"><span>5.1、初始化一个创世区块</span></h2>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　初始化创世区块时，要先创建一个<code>genesis.json</code>文件，内容如下：</p>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　genesis.json：</p>
  <pre class="line-numbers prism-highlight language-json" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-json"><span class="token punctuation">{ <span class="token property">"config"<span class="token operator">: <span class="token punctuation">{ <span class="token property">"chainId"<span class="token operator">: <span class="token number">10<span class="token punctuation">, <span class="token property">"homesteadBlock"<span class="token operator">: <span class="token number">0<span class="token punctuation">, <span class="token property">"eip155Block"<span class="token operator">: <span class="token number">0<span class="token punctuation">, <span class="token property">"eip158Block"<span class="token operator">: <span class="token number">0 <span class="token punctuation">}<span class="token punctuation">, <span class="token property">"coinbase" <span class="token operator">: <span class="token string">"0x0000000000000000000000000000000000000000"<span class="token punctuation">, <span class="token property">"difficulty" <span class="token operator">: <span class="token string">"0x20000"<span class="token punctuation">, <span class="token property">"extraData" <span class="token operator">: <span class="token string">""<span class="token punctuation">, <span class="token property">"gasLimit" <span class="token operator">: <span class="token string">"0x2fefd8"<span class="token punctuation">, <span class="token property">"nonce" <span class="token operator">: <span class="token string">"0x0000000000000042"<span class="token punctuation">, <span class="token property">"mixhash" <span class="token operator">: <span class="token string">"0x0000000000000000000000000000000000000000000000000000000000000000"<span class="token punctuation">, <span class="token property">"parentHash" <span class="token operator">: <span class="token string">"0x0000000000000000000000000000000000000000000000000000000000000000"<span class="token punctuation">, <span class="token property">"timestamp" <span class="token operator">: <span class="token string">"0x00"<span class="token punctuation">, <span class="token property">"alloc" <span class="token operator">: <span class="token punctuation">{<span class="token punctuation">}<span class="token punctuation">, <span class="token punctuation">} </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
  <table style="border-spacing:0px;border:1px solid #C0C0C0;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <thead>
    <tr>
     <th style="border-color:#C0C0C0;border-collapse:collapse;">参数名称</th>
     <th style="border-color:#C0C0C0;border-collapse:collapse;">参数描述</th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">mixhash</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">nonce</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">difficulty</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">alloc</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">coinbase</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">矿工的账号，随便填</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">timestamp</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">设置创世块的时间戳</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">parentHash</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">上一个区块的hash值，因为是创世块，所以这个值是0</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">extraData</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">附加信息，随便填，可以填你的个性信息</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">gasLimit</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。</td>
    </tr>
   </tbody>
  </table>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　</p>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　接下来，我们使用<code>geth init ./genesis.json --datadir "./chain"</code>命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在<code>chain</code>目录中：</p>
  <pre class="line-numbers prism-highlight language-bash" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-bash">➜ /Users/lion/my_project/_eth/test <span class="token operator">&gt;geth init ./genesis.json --datadir <span class="token string">"./chain" WARN <span class="token punctuation">[10-22<span class="token operator">|14:49:09<span class="token punctuation">] No etherbase <span class="token keyword">set and no accounts found as default INFO <span class="token punctuation">[10-22<span class="token operator">|14:49:09<span class="token punctuation">] Allocated cache and <span class="token function">file handles database<span class="token operator">=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache<span class="token operator">=16 handles<span class="token operator">=16 INFO <span class="token punctuation">[10-22<span class="token operator">|14:49:09<span class="token punctuation">] Writing custom genesis block INFO <span class="token punctuation">[10-22<span class="token operator">|14:49:09<span class="token punctuation">] Successfully wrote genesis state database<span class="token operator">=chaindata hash<span class="token operator">=5e1fc7…d790e0 INFO <span class="token punctuation">[10-22<span class="token operator">|14:49:09<span class="token punctuation">] Allocated cache and <span class="token function">file handles database<span class="token operator">=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache<span class="token operator">=16 handles<span class="token operator">=16 INFO <span class="token punctuation">[10-22<span class="token operator">|14:49:09<span class="token punctuation">] Writing custom genesis block INFO <span class="token punctuation">[10-22<span class="token operator">|14:49:09<span class="token punctuation">] Successfully wrote genesis state database<span class="token operator">=lightchaindata hash<span class="token operator">=5e1fc7…d790e0 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　</p>
  <h2 style="font-size:13px;line-height:23px;background:rgb(43,102,0);color:rgb(255,255,255);font-family:'微软雅黑', '宋体', '黑体', Arial;"><span>5.2、启用私有链</span></h2>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　使用以下命令，启用私有链：</p>
  <pre class="line-numbers prism-highlight language-bash" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-bash">geth \
  --datadir <span class="token string">"./chain" \ --nodiscover \ console 2<span class="token operator">&gt;&gt;eth_output.log </span></span></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　启动后的效果如下：</p>
  <pre class="line-numbers prism-highlight language-bash" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-bash">➜ /Users/lion/my_project/_eth/test <span class="token operator">&gt;geth \ --datadir <span class="token string">"./chain" \ --nodiscover \ console 2<span class="token operator">&gt;&gt;eth_output.log Welcome to the Geth JavaScript console<span class="token operator">! instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 <span class="token operator">&gt; </span></span></span></span></span></code></pre>
  <table style="border-spacing:0px;border:1px solid #C0C0C0;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <thead>
    <tr>
     <th style="border-color:#C0C0C0;border-collapse:collapse;">参数名称</th>
     <th style="border-color:#C0C0C0;border-collapse:collapse;">参数描述</th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">datadir</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">设置当前区块链网络数据存放的位置</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">console</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">启动命令行模式，可以在Geth中执行命令</td>
    </tr>
    <tr>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">nodiscover</td>
     <td style="border-color:#C0C0C0;border-collapse:collapse;">私有链地址，不会被网上看到</td>
    </tr>
   </tbody>
  </table>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　</p>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　在当前目录执行<code>tail -f eth_output.log</code>，可以看到输出日志。</p>
  <pre class="line-numbers prism-highlight language-bash" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-bash">➜ /Users/lion/my_project/_eth/test <span class="token operator">&gt;tail -f eth_output.log INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] Bloom-bin upgrade completed elapsed<span class="token operator">=149.285µs INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] Initialising Ethereum protocol versions<span class="token operator">=<span class="token string">"[63 62]" network<span class="token operator">=1 INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] Database conversion successful INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] Loaded <span class="token function">most recent local header number<span class="token operator">=0 hash<span class="token operator">=5e1fc7…d790e0 td<span class="token operator">=131072 INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] Loaded <span class="token function">most recent local full block number<span class="token operator">=0 hash<span class="token operator">=5e1fc7…d790e0 td<span class="token operator">=131072 INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] Loaded <span class="token function">most recent local fast block number<span class="token operator">=0 hash<span class="token operator">=5e1fc7…d790e0 td<span class="token operator">=131072 INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] Starting P2P networking INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] RLPx listener up self<span class="token operator">=<span class="token string">"enode://bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0" INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:04<span class="token punctuation">] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc INFO <span class="token punctuation">[10-22<span class="token operator">|14:50:05<span class="token punctuation">] Mapped network port proto<span class="token operator">=tcp extport<span class="token operator">=30303 intport<span class="token operator">=30303 interface<span class="token operator">=NAT-PMP<span class="token punctuation">(10.0.0.1<span class="token punctuation">) </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
  <blockquote style="background:rgb(255,255,255) none;border-top:none;border-right:none;border-bottom:none;border-left:5px solid rgb(221,221,221);color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(119,119,119);">后面章节中的命令，都是在启动私有链后的<code>Geth javascript console</code>中操作</p>
  </blockquote>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　</p>
  <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>5.2.1、帐户的添加和查看</span></h3>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　查看帐户，可以看到当前帐户是空的</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.accounts <span class="token punctuation">[<span class="token punctuation">] </span></span></span></span></span></code></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.personal<span class="token punctuation">.<span class="token function">newAccount<span class="token punctuation">(<span class="token string">"123456"<span class="token punctuation">) <span class="token string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d" </span></span></span></span></span></span></span></span></code></code></pre>
  <blockquote style="background:rgb(255,255,255) none;border-top:none;border-right:none;border-bottom:none;border-left:5px solid rgb(221,221,221);color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(119,119,119);">其中返回的<code>0xbe323cc4fde114269a9513a27d3e985f82b9e25d</code>是帐户，<code>123456</code>是帐户的密码</p>
  </blockquote>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　第二种方法是先创建账户，然后输入密码</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.personal<span class="token punctuation">.<span class="token function">newAccount<span class="token punctuation">(<span class="token punctuation">) Passphrase<span class="token punctuation">: Repeat passphrase<span class="token punctuation">: <span class="token string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70" </span></span></span></span></span></span></span></span></span></code></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.accounts <span class="token punctuation">[<span class="token string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d"<span class="token punctuation">, <span class="token string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70"<span class="token punctuation">] </span></span></span></span></span></span></span></span></code></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　</p>
  <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>5.2.2、开始挖矿和停止挖矿</span></h3>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　挖矿执行以下命令：</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; miner<span class="token punctuation">.<span class="token function">start<span class="token punctuation">(<span class="token number">1<span class="token punctuation">) </span></span></span></span></span></span></code></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　执行以后，通过刚才查看日志的方法<code>tail -f eth_output.log</code>,能够看到类似下面的日志，说明挖矿已经在进行.</p>
  <pre class="line-numbers prism-highlight language-bash" style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"><code class="language-bash">INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:32<span class="token punctuation">] Commit new mining work number<span class="token operator">=70 txs<span class="token operator">=0 uncles<span class="token operator">=0 elapsed<span class="token operator">=2.000s INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:34<span class="token punctuation">] Successfully sealed new block number<span class="token operator">=70 hash<span class="token operator">=a0cfd2…f99c06 INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:34<span class="token punctuation">] block reached canonical chain number<span class="token operator">=65 hash<span class="token operator">=3f6d16…586aba INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:34<span class="token punctuation">] mined potential block number<span class="token operator">=70 hash<span class="token operator">=a0cfd2…f99c06 INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:34<span class="token punctuation">] Commit new mining work number<span class="token operator">=71 txs<span class="token operator">=0 uncles<span class="token operator">=0 elapsed<span class="token operator">=163.977µs INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:34<span class="token punctuation">] Successfully sealed new block number<span class="token operator">=71 hash<span class="token operator">=f84b8a…7468e1 INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:34<span class="token punctuation">] block reached canonical chain number<span class="token operator">=66 hash<span class="token operator">=6ca3b9…e959e8 INFO <span class="token punctuation">[10-22<span class="token operator">|15:01:34<span class="token punctuation">] mined potential block number<span class="token operator">=71 hash<span class="token operator">=f84b8a…7468e1 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
  <blockquote style="background:rgb(255,255,255) none;border-top:none;border-right:none;border-bottom:none;border-left:5px solid rgb(221,221,221);color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(119,119,119);">挖矿会默认保存到创建的第一个帐户<code>0xbe323cc4fde114269a9513a27d3e985f82b9e25d</code>中。<br>block number=66，说明我们已经创建了66个区块<br>在以太坊官方的网络上，平均每15秒产生一个区块</p>
  </blockquote>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　停止挖矿执行以下命令：</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; miner<span class="token punctuation">.<span class="token function">stop<span class="token punctuation">(<span class="token punctuation">) </span></span></span></span></span></code></code></pre>
  <blockquote style="background:rgb(255,255,255) none;border-top:none;border-right:none;border-bottom:none;border-left:5px solid rgb(221,221,221);color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(119,119,119);">停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。</p>
  </blockquote>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　</p>
  <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>5.2.3、查看帐户余额</span></h3>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　查看帐户余额的方法如下：</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.<span class="token function">getBalance<span class="token punctuation">(<span class="token string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d"<span class="token punctuation">) <span class="token number">1.245e+21 <span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.<span class="token function">getBalance<span class="token punctuation">(<span class="token string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70"<span class="token punctuation">) <span class="token number">0 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　每次记一长串的地址很麻烦，我们可以通过设置变量来<code>acc0</code>表示帐户1<code>0xbe323cc4fde114269a9513a27d3e985f82b9e25d</code>,<code>acc1</code>表示帐户2<code>0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70</code>.</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; acc0 <span class="token operator">= web3<span class="token punctuation">.eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">0<span class="token punctuation">] <span class="token string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d" <span class="token operator">&gt; acc1 <span class="token operator">= web3<span class="token punctuation">.eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">1<span class="token punctuation">] <span class="token string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70" <span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.<span class="token function">getBalance<span class="token punctuation">(acc0<span class="token punctuation">) <span class="token number">1.245e+21 <span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.<span class="token function">getBalance<span class="token punctuation">(acc1<span class="token punctuation">) <span class="token number">0 ## 使用这个方法可以查看格式化的以太币 <span class="token operator">&gt; web3<span class="token punctuation">.<span class="token function">fromWei<span class="token punctuation">(web3<span class="token punctuation">.eth<span class="token punctuation">.<span class="token function">getBalance<span class="token punctuation">(acc0<span class="token punctuation">)<span class="token punctuation">) <span class="token number">1245 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
  <blockquote style="background:rgb(255,255,255) none;border-top:none;border-right:none;border-bottom:none;border-left:5px solid rgb(221,221,221);color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(119,119,119);">以太币最小的单位是wei（18个0）</p>
  </blockquote>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　因为<code>geth javascript console</code>是基于javascript的，所以也可以创建js函数，查看所有帐户余额</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; <span class="token keyword">function <span class="token function">checkAllBalances<span class="token punctuation">(<span class="token punctuation">) <span class="token punctuation">{ <span class="token keyword">var totalBal <span class="token operator">= <span class="token number">0<span class="token punctuation">; <span class="token keyword">for <span class="token punctuation">(<span class="token keyword">var acctNum <span class="token keyword">in eth<span class="token punctuation">.accounts<span class="token punctuation">) <span class="token punctuation">{ <span class="token keyword">var acct <span class="token operator">= eth<span class="token punctuation">.accounts<span class="token punctuation">[acctNum<span class="token punctuation">]<span class="token punctuation">; <span class="token keyword">var acctBal <span class="token operator">= web3<span class="token punctuation">.<span class="token function">fromWei<span class="token punctuation">(eth<span class="token punctuation">.<span class="token function">getBalance<span class="token punctuation">(acct<span class="token punctuation">)<span class="token punctuation">, <span class="token string">"ether"<span class="token punctuation">)<span class="token punctuation">; totalBal <span class="token operator">+<span class="token operator">= <span class="token function">parseFloat<span class="token punctuation">(acctBal<span class="token punctuation">)<span class="token punctuation">; console<span class="token punctuation">.<span class="token function">log<span class="token punctuation">(<span class="token string">" eth.accounts[" <span class="token operator">+ acctNum <span class="token operator">+ <span class="token string">"]: \t" <span class="token operator">+ acct <span class="token operator">+ <span class="token string">" \tbalance: " <span class="token operator">+ acctBal <span class="token operator">+ <span class="token string">" ether"<span class="token punctuation">)<span class="token punctuation">; <span class="token punctuation">} console<span class="token punctuation">.<span class="token function">log<span class="token punctuation">(<span class="token string">" Total balance: " <span class="token operator">+ totalBal <span class="token operator">+ <span class="token string">" ether"<span class="token punctuation">)<span class="token punctuation">; <span class="token punctuation">}<span class="token punctuation">; <span class="token operator">&gt; <span class="token function">checkAllBalances<span class="token punctuation">(<span class="token punctuation">) eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">0<span class="token punctuation">]<span class="token punctuation">: <span class="token number">0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance<span class="token punctuation">: <span class="token number">1245 ether eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">1<span class="token punctuation">]<span class="token punctuation">: <span class="token number">0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance<span class="token punctuation">: <span class="token number">0 ether Total balance<span class="token punctuation">: <span class="token number">1245 ether </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
  <blockquote style="background:rgb(255,255,255) none;border-top:none;border-right:none;border-bottom:none;border-left:5px solid rgb(221,221,221);color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(119,119,119);">如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript('/path/script/here.js')</p>
  </blockquote>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　</p>
  <h3 style="font-size:16px;line-height:1.5;color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);"><span>5.2.4、转帐操作</span></h3>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　从帐户<code>0xbe323cc4fde114269a9513a27d3e985f82b9e25d</code>转3个以太币到<code>0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70</code>,如果不指定单位ether，默认转的是wei。</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.<span class="token function">sendTransaction<span class="token punctuation">(<span class="token punctuation">{<span class="token keyword">from<span class="token punctuation">:acc0<span class="token punctuation">,to<span class="token punctuation">:acc1<span class="token punctuation">,value<span class="token punctuation">:web3<span class="token punctuation">.<span class="token function">toWei<span class="token punctuation">(<span class="token number">3<span class="token punctuation">,<span class="token string">"ether"<span class="token punctuation">)<span class="token punctuation">}<span class="token punctuation">) Error<span class="token punctuation">: authentication needed<span class="token punctuation">: password or unlock at web3<span class="token punctuation">.js<span class="token punctuation">:<span class="token number">3104<span class="token punctuation">:<span class="token number">20 at web3<span class="token punctuation">.js<span class="token punctuation">:<span class="token number">6191<span class="token punctuation">:<span class="token number">15 at web3<span class="token punctuation">.js<span class="token punctuation">:<span class="token number">5004<span class="token punctuation">:<span class="token number">36 at <span class="token operator">&lt;anonymous<span class="token operator">&gt;<span class="token punctuation">:<span class="token number">1<span class="token punctuation">:<span class="token number">1 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
  <blockquote style="background:rgb(255,255,255) none;border-top:none;border-right:none;border-bottom:none;border-left:5px solid rgb(221,221,221);color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;">
   <p style="color:rgb(119,119,119);">当直接执行此方法时会抛出异常，显示帐号被锁</p>
  </blockquote>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　解锁转帐帐户</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.personal<span class="token punctuation">.<span class="token function">unlockAccount<span class="token punctuation">(acc0<span class="token punctuation">,<span class="token string">"123456"<span class="token punctuation">) <span class="token boolean">true </span></span></span></span></span></span></span></span></span></code></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　解锁完成之后，即可执行转账操作。</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; web3<span class="token punctuation">.eth<span class="token punctuation">.<span class="token function">sendTransaction<span class="token punctuation">(<span class="token punctuation">{<span class="token keyword">from<span class="token punctuation">:acc0<span class="token punctuation">,to<span class="token punctuation">:acc1<span class="token punctuation">,value<span class="token punctuation">:web3<span class="token punctuation">.<span class="token function">toWei<span class="token punctuation">(<span class="token number">3<span class="token punctuation">,<span class="token string">"ether"<span class="token punctuation">)<span class="token punctuation">}<span class="token punctuation">) <span class="token string">"0x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056" </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
  <p style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;background-color:rgb(255,255,255);">　　<br>　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。</p>
  <pre><code class="language-javascript"><code class="language-javascript"><span class="token operator">&gt; <span class="token function">checkAllBalances<span class="token punctuation">(<span class="token punctuation">) eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">0<span class="token punctuation">]<span class="token punctuation">: <span class="token number">0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance<span class="token punctuation">: <span class="token number">1245 ether eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">1<span class="token punctuation">]<span class="token punctuation">: <span class="token number">0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance<span class="token punctuation">: <span class="token number">0 ether Total balance<span class="token punctuation">: <span class="token number">1245 ether undefined <span class="token operator">&gt; miner<span class="token punctuation">.<span class="token function">start<span class="token punctuation">(<span class="token punctuation">) <span class="token keyword">null <span class="token operator">&gt; <span class="token function">checkAllBalances<span class="token punctuation">(<span class="token punctuation">) eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">0<span class="token punctuation">]<span class="token punctuation">: <span class="token number">0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance<span class="token punctuation">: <span class="token number">1257 ether eth<span class="token punctuation">.accounts<span class="token punctuation">[<span class="token number">1<span class="token punctuation">]<span class="token punctuation">: <span class="token number">0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance<span class="token punctuation">: <span class="token number">3 ether Total balance<span class="token punctuation">: <span class="token number">1260 ether undefined <span class="token operator">&gt; miner<span class="token punctuation">.<span class="token function">stop<span class="token punctuation">(<span class="token punctuation">) <span class="token boolean">true</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/kwame211/article/details/80105836,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/kwame211/article/details/80105836,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
