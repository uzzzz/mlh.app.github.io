<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>IOTA的底层架构Tangle的双花攻击与比特币的双花攻击之间的联系 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="IOTA的底层架构Tangle的双花攻击与比特币的双花攻击之间的联系" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="白皮书 双花攻击 Tangle白皮书讲述了两种双花攻击方式： 寄生链攻击 大权重区块攻击 过程如下： 攻击者付钱购买商品，然后商家等待该交易累积足够的权重，则给攻击者发货 攻击者在付钱的同时，开始在暗地里用自己的算力来支持双花交易，待商家发货的时候且确认自己在tips选择规则上有优势时，广播支持双花交易的寄生链/大权重双花交易 根据tips选择的规则，攻击者拥有优势，则双花交易的寄生链/大权重双花交易会被后面新来的交易所引用（支持），那么双花交易被全网认可，而原交易失效。最终，商户没收到钱，但把商品发给交易者了。 寄生链攻击 思考寄生链的问题本质上是思考，网络认可的主链的标准是怎么样的？ 平等对待所有的tips，即每个tips被选择的概率相同 最长链上的tips更应该被选择 但上述两个标准都不能解决寄生链问题，对于寄生链，可以在末端无成本地添加任意个数的tips，同时寄生链可以弄得任意长。 而Tangle在解决这个问题得过程中，网络认可得主链标准为累计算力，即如果tips支持得链路累计的算力越大，这条链路更值得支持。这一点体现在游走算法中。 游走算法 考虑累计权重在[W, 2W]之间的交易，W是一个足够大的值 从步骤1中的交易中随机选择N个交易，分别作为N次游走的起点 每次游走从x-&gt;y，从高累计权重走到tips。若x-&gt;y为可能，则说明y支持x。转移概率( H i H_i Hi​为交易i的累计权重)如下： P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 必存在最先到达tip的两条路径，选择该两条路径对应的两个tips作为新交易支持的对象（注：必须舍弃路径太短，太快的结果，因为很有可能是Lazy Tips，下文会说明） 游走算法解决了寄生链的问题 在主网和寄生链分叉的地方，随机游走需要选择下一站，是主网的交易y1还是寄生链的交易y2。已知 H y 1 &amp;gt; H y 2 H_{y1}&amp;gt;H_{y2} Hy1​&gt;Hy2​，所以 H x − H y 1 &amp;lt; H x − H y 2 H_x-H_{y1}&amp;lt;H_x-H_{y2} Hx​−Hy1​&lt;Hx​−Hy2​，通过exp放大差异，所以 e x p ( − a ( H x − H y 1 ) ) &amp;gt; &amp;gt; e x p ( − a ( H x − H y 2 ) ) exp(-a(H_x-H_{y1}))&amp;gt;&amp;gt;exp(-a(H_x-H_{y2})) exp(−a(Hx​−Hy1​))&gt;&gt;exp(−a(Hx​−Hy2​))，所以寄生链被选择的概率很小。 P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 游走算法同时解决了Lazy Tips问题 在Tangle中每笔交易在发出时理论上要选择2个tips（tip指的是在交易发起者视野中从未被人支持过的交易）去支持的，但支持的过程需要验证整个交易流的合法性，比较浪费时间。 因此，有的交易的发起者会选择两个累计权重足够大的交易进行支持（Tangle不能强制让你去支持tips，因为网络是异步的，不能确认交易发起者的视野）。因为累计权重大的交易已经被网络很大程度确认了，就不需要浪费时间确认其合法性，但这样不利于整个网络（累计权重轻的tips总需要有人去验证确认）。这些直接支持“老交易”的新交易成为Lazy Tips。 游走算法必须保证这些Lazy Tips不会被游走算法所选择，即不能平等对待这些Tips。 同上“游走算法解决了寄生链的问题”， P ( x − &amp;gt; y l a z y ) &amp;lt; &amp;lt; P ( x − &amp;gt; y n o r m a l ) P(x-&amp;gt;y_{lazy}) &amp;lt;&amp;lt; P(x-&amp;gt;y_{normal}) P(x−&gt;ylazy​)&lt;&lt;P(x−&gt;ynormal​) a的取值 a的取值决定了 H x H_x Hx​与 H y H_y Hy​差异的放大程度 P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 当a足够大时，游走路径变得不那么随机。此时若 H y 1 H_{y1} Hy1​稍稍大于 H y 2 H_{y2} Hy2​，但因为a的放大作用，最后游走时以绝对的概率选择y1，这不是我们想要的。为什么？想象以下，在某个时刻的每笔交易选择tips的过程中，游走的路径都一样。首先这笔交易两个都引用了相同的tips，然后再同一时刻不同交易都引用了相同的tips，那么tips的数量会很多很多（消除了一个，新增了约为 λ \lambda λ那么多个），tips的数量不收敛是个很大的问题 关于游走算法的其他问题 会不会存在这样的问题，交易为了自己的交易第一次被确认快一些，可能会分析整个Dag，得到tip被选中的概率分布，然后选择概率最大的tip。首先，如果每个人都这么做就会发生类似a取值太大的问题。 然而，怎么去避免这个问题，可以改变游走的方式，让路径可以以一定概率向上回溯。然后，怎么才算解决了这个问题呢？当你要统计某个时刻的tips的分布所需要的时间远大于游走所需要的时间，那么当统计完分布后，tips的情况已经改变了，因为同一时刻的采用游走的交易已经接入了，形成的新的tips。 大权重区块攻击 寄生链的问题采用了累计权重为标准进行tips的选择。但是，我们有没有想过累计权重这个东西是否靠谱，引申到权重是否靠谱？ 在比特币采用的是最长链标准，即一个交易被越多的区块所引用，那么这个交易被回滚的概率就会越小。所以，比特币中有六区块确认说法。 然后，在Tangle中我们采用累计权重的标准。那么同理，一个交易的累计权重越大，那么其越难被回滚吗？一个很反直觉的结果，就是不是这样的。这里用到的是大权重攻击，下面回从数学上分析，为什么其结果与比特币的不同。 引入数学基础 泊松分布 P ( N ( t ) = n ) = ( λ t ) n e x p ( − λ t ) n ! P(N(t) = n)=\frac{(\lambda t)^{n}exp(-\lambda t)}{n!} P(N(t)=n)=n!(λt)nexp(−λt)​ 上述公示表述的是N(t)服从参数为 λ t \lambda t λt的泊松分布，物理意义为，在时间t的到来了n个客人的概率，而期望为 λ t \lambda t λt与方差为 λ t \lambda t λt，即单位时间流入的客人数为 λ \lambda λ。 指数分布 P ( X ≤ t ) = 1 − P ( N ( t ) = 0 ) = 1 − e x p ( − λ t ) P(X \leq t)=1-P(N(t)=0)=1-exp(-\lambda t) P(X≤t)=1−P(N(t)=0)=1−exp(−λt) 上述公式表述的是在时间t内有客人流入的概率。该分布概率密度指的是在时刻t流入一个客人的概率密度，为上述公式的导数。服从参数为 λ \lambda λ指数分布，期望(有1个客人流入的时间)为 1 λ \frac{1}{\lambda} λ1​与方差为 1 λ 2 \frac{1}{{\lambda}^2} λ21​。 伽马分布 P ( X 1 + X 2 + . . . + X n ≤ t ) = 1 − ∑ i = 0 n − 1 P ( N ( t ) = i ) = 1 − ∑ i = 0 n − 1 ( λ t ) i e x p ( − λ t ) i ! P(X_1+X_2+...+X_n \leq t) = 1-\sum_{i=0}^{n-1}P(N(t)=i)\\=1 - \sum_{i=0}^{n-1}\frac{(\lambda t)^{i}exp(-\lambda t)}{i!} P(X1​+X2​+...+Xn​≤t)=1−i=0∑n−1​P(N(t)=i)=1−i=0∑n−1​i!(λt)iexp(−λt)​ 上述公式表述的是在时间t内有至少n个客人流入的概率。该分布概率密度服从参数为 ( n , λ ) (n, \lambda) (n,λ)的伽马分布，我们可以看出指数分布服从 ( 1 , λ ) (1, \lambda) (1,λ)的伽马分布。期望（有n个客人流入的时间）为 n λ \frac{n}{\lambda} λn​与方差为 n λ 2 \frac{n}{{\lambda}^2} λ2n​。 大权重区块攻击成功的概率 假设用二进制： μ \mu μ为攻击者算力， λ \lambda λ为正常算力 一个难度为 n 0 n_0 n0​的区块相当于工作量为 2 n 0 2^{n_0} 2n0​一个难度为 n 0 n_0 n0​的区块相当于工作量为 2 n 0 2^{n_0} 2n0​。 攻击者挖到至少一个难度为 n 0 n_0 n0​的区块所用的期望时间取 2 n 0 μ \frac{2^{n_0}}{\mu} μ2n0​​ 攻击者挖到至少一个难度为 n 0 n_0 n0​的区块所用的时间服从参数为 μ 2 n 0 \frac{\mu}{2^{n_0}} 2n0​μ​的指数分布 怎么定义攻击成功？就是商家在交易的累计难度为 n 0 n_0 n0​时（时间为 t 0 t_0 t0​），攻击者能够产生难度不小于 n 0 n_0 n0​的区块。其中 W n 0 W^{n_0} Wn0​为攻击者生成难度为 n 0 n_0 n0​所需要的时间。我们可以计算攻击成功的概率： E ( t 0 ) = 2 n 0 λ ( 1 ) E(t_0)=\frac{2^{n_0}}{\lambda} \qquad (1) E(t0​)=λ2n0​​(1) P ( W n 0 &amp;lt; t 0 ) = 1 − e x p ( − t 0 μ 2 − n 0 ) ( 2 ) P(W^{n_0}&amp;lt;t_0)=1-exp(-t_0 \mu2^{-n_0})\qquad (2) P(Wn0​&lt;t0​)=1−exp(−t0​μ2−n0​)(2) 我们采用 t 0 t_0 t0​为其期望，即把(1)带入(2)得到 P ( W n 0 &amp;lt; t 0 ) = 1 − e x p ( − μ λ ) ≈ μ λ ( 3 ) P(W^{n_0}&amp;lt;t_0)=1-exp(-\frac{\mu}{\lambda})\approx\frac{\mu}{\lambda}\qquad (3) P(Wn0​&lt;t0​)=1−exp(−λμ​)≈λμ​(3) 分析(3)我们可以得知攻击成功的概率只与(攻击者算力/诚实者算力)有关，与等待时常 t 0 t_0 t0​和累计难度 2 n 0 2^{n_0} 2n0​都没有关系。这说明了什么？不像比特币你等待越久，越多的区块支持你，你的交易越难被回滚。在Tangle中，无论你的累计难度有多高等待时常有多长，都不代表你交易被回滚的概率越小，这个概率时常数，只与算力比有关。 因此，Tangle需要限制某个区块的难度大小，这样相当于退化到比特币的模型，攻击者最好的方法都是一直生产上线难度的区块。 比特币模型到底有什么不同 在比特币双花攻击成功概率一文的分析方法是和白皮书的方法同出一源，可能看不出端倪，我们现在从另外的角度审视比特币。 上面大区块攻击的分析中，相当于分析比特币双花攻击成功概率一文中的第二部分，即直接考虑谁的累计难度大，而没有考虑第一部分中攻击者累计权重小但最后能追上诚实者的概率。所以对于比特币我们也直接分析第二部分。 其实比特币的n确认机制相当于，诚实算力生产了n个区块，而攻击者（算力小于诚实者）也生产了n个区块的概率会差不多指数下降，所以等的n越大，那么就越安全。 这里设 n 0 n_0 n0​为比特币区块的难度要求，商家采用 n n n确认机制，共用时也是 t 0 t_0 t0​，则被攻击成功的概率为 P ( W 1 n 0 + W 2 n 0 + . . . + W n n 0 &amp;lt; t 0 ) P(W_{1}^{n_0} + W_{2}^{n_0}+...+W_{n}^{n_0}&amp;lt;t_0) P(W1n0​​+W2n0​​+...+Wnn0​​&lt;t0​)，满足参数为 ( n , μ 2 n 0 ) (n,\frac{\mu}{2^{n_0}}) (n,2n0​μ​)的伽马分布，所以攻击成功的概率为 P ( 攻 击 成 功 ) = 1 − ∑ i = 0 n − 1 ( μ 2 n 0 t 0 ) i e x p ( − μ 2 n 0 t 0 ) i ! P(攻击成功)=1 - \sum_{i=0}^{n-1}\frac{(\frac{\mu}{2^{n_0}} t_0)^{i}exp(-\frac{\mu}{2^{n_0}} t_0)}{i!} P(攻击成功)=1−i=0∑n−1​i!(2n0​μ​t0​)iexp(−2n0​μ​t0​)​ 同理因为 E ( t 0 ) = n 2 n 0 λ E(t_0)=n\frac{2^{n_0}}{\lambda} E(t0​)=nλ2n0​​，取 t 0 t_0 t0​为其期望，所以 P ( 攻 击 成 功 ) = 1 − ∑ i = 0 n − 1 ( μ λ n ) i e x p ( − μ λ n ) i ! P(攻击成功)=1 - \sum_{i=0}^{n-1}\frac{(\frac{\mu}{\lambda} n)^{i}exp(-\frac{\mu}{\lambda} n)}{i!} P(攻击成功)=1−i=0∑n−1​i!(λμ​n)iexp(−λμ​n)​ 下面截图为z确认 P ( 攻 击 成 功 ) P(攻击成功) P(攻击成功)的值，可以看出随着z的增大，攻击成功的概率几乎是指数下降的。 分析 综上，我们可以思考本质的问题是什么，其实就是靠累计得到的难度是线性的，而只挖一个难度大的可以抵消这种线性累计（这个跟指数分布这个东西有关）。所以，只要限制好大区块的大小，理论上tangle也是能够获得类似比特币的安全性。" />
<meta property="og:description" content="白皮书 双花攻击 Tangle白皮书讲述了两种双花攻击方式： 寄生链攻击 大权重区块攻击 过程如下： 攻击者付钱购买商品，然后商家等待该交易累积足够的权重，则给攻击者发货 攻击者在付钱的同时，开始在暗地里用自己的算力来支持双花交易，待商家发货的时候且确认自己在tips选择规则上有优势时，广播支持双花交易的寄生链/大权重双花交易 根据tips选择的规则，攻击者拥有优势，则双花交易的寄生链/大权重双花交易会被后面新来的交易所引用（支持），那么双花交易被全网认可，而原交易失效。最终，商户没收到钱，但把商品发给交易者了。 寄生链攻击 思考寄生链的问题本质上是思考，网络认可的主链的标准是怎么样的？ 平等对待所有的tips，即每个tips被选择的概率相同 最长链上的tips更应该被选择 但上述两个标准都不能解决寄生链问题，对于寄生链，可以在末端无成本地添加任意个数的tips，同时寄生链可以弄得任意长。 而Tangle在解决这个问题得过程中，网络认可得主链标准为累计算力，即如果tips支持得链路累计的算力越大，这条链路更值得支持。这一点体现在游走算法中。 游走算法 考虑累计权重在[W, 2W]之间的交易，W是一个足够大的值 从步骤1中的交易中随机选择N个交易，分别作为N次游走的起点 每次游走从x-&gt;y，从高累计权重走到tips。若x-&gt;y为可能，则说明y支持x。转移概率( H i H_i Hi​为交易i的累计权重)如下： P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 必存在最先到达tip的两条路径，选择该两条路径对应的两个tips作为新交易支持的对象（注：必须舍弃路径太短，太快的结果，因为很有可能是Lazy Tips，下文会说明） 游走算法解决了寄生链的问题 在主网和寄生链分叉的地方，随机游走需要选择下一站，是主网的交易y1还是寄生链的交易y2。已知 H y 1 &amp;gt; H y 2 H_{y1}&amp;gt;H_{y2} Hy1​&gt;Hy2​，所以 H x − H y 1 &amp;lt; H x − H y 2 H_x-H_{y1}&amp;lt;H_x-H_{y2} Hx​−Hy1​&lt;Hx​−Hy2​，通过exp放大差异，所以 e x p ( − a ( H x − H y 1 ) ) &amp;gt; &amp;gt; e x p ( − a ( H x − H y 2 ) ) exp(-a(H_x-H_{y1}))&amp;gt;&amp;gt;exp(-a(H_x-H_{y2})) exp(−a(Hx​−Hy1​))&gt;&gt;exp(−a(Hx​−Hy2​))，所以寄生链被选择的概率很小。 P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 游走算法同时解决了Lazy Tips问题 在Tangle中每笔交易在发出时理论上要选择2个tips（tip指的是在交易发起者视野中从未被人支持过的交易）去支持的，但支持的过程需要验证整个交易流的合法性，比较浪费时间。 因此，有的交易的发起者会选择两个累计权重足够大的交易进行支持（Tangle不能强制让你去支持tips，因为网络是异步的，不能确认交易发起者的视野）。因为累计权重大的交易已经被网络很大程度确认了，就不需要浪费时间确认其合法性，但这样不利于整个网络（累计权重轻的tips总需要有人去验证确认）。这些直接支持“老交易”的新交易成为Lazy Tips。 游走算法必须保证这些Lazy Tips不会被游走算法所选择，即不能平等对待这些Tips。 同上“游走算法解决了寄生链的问题”， P ( x − &amp;gt; y l a z y ) &amp;lt; &amp;lt; P ( x − &amp;gt; y n o r m a l ) P(x-&amp;gt;y_{lazy}) &amp;lt;&amp;lt; P(x-&amp;gt;y_{normal}) P(x−&gt;ylazy​)&lt;&lt;P(x−&gt;ynormal​) a的取值 a的取值决定了 H x H_x Hx​与 H y H_y Hy​差异的放大程度 P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 当a足够大时，游走路径变得不那么随机。此时若 H y 1 H_{y1} Hy1​稍稍大于 H y 2 H_{y2} Hy2​，但因为a的放大作用，最后游走时以绝对的概率选择y1，这不是我们想要的。为什么？想象以下，在某个时刻的每笔交易选择tips的过程中，游走的路径都一样。首先这笔交易两个都引用了相同的tips，然后再同一时刻不同交易都引用了相同的tips，那么tips的数量会很多很多（消除了一个，新增了约为 λ \lambda λ那么多个），tips的数量不收敛是个很大的问题 关于游走算法的其他问题 会不会存在这样的问题，交易为了自己的交易第一次被确认快一些，可能会分析整个Dag，得到tip被选中的概率分布，然后选择概率最大的tip。首先，如果每个人都这么做就会发生类似a取值太大的问题。 然而，怎么去避免这个问题，可以改变游走的方式，让路径可以以一定概率向上回溯。然后，怎么才算解决了这个问题呢？当你要统计某个时刻的tips的分布所需要的时间远大于游走所需要的时间，那么当统计完分布后，tips的情况已经改变了，因为同一时刻的采用游走的交易已经接入了，形成的新的tips。 大权重区块攻击 寄生链的问题采用了累计权重为标准进行tips的选择。但是，我们有没有想过累计权重这个东西是否靠谱，引申到权重是否靠谱？ 在比特币采用的是最长链标准，即一个交易被越多的区块所引用，那么这个交易被回滚的概率就会越小。所以，比特币中有六区块确认说法。 然后，在Tangle中我们采用累计权重的标准。那么同理，一个交易的累计权重越大，那么其越难被回滚吗？一个很反直觉的结果，就是不是这样的。这里用到的是大权重攻击，下面回从数学上分析，为什么其结果与比特币的不同。 引入数学基础 泊松分布 P ( N ( t ) = n ) = ( λ t ) n e x p ( − λ t ) n ! P(N(t) = n)=\frac{(\lambda t)^{n}exp(-\lambda t)}{n!} P(N(t)=n)=n!(λt)nexp(−λt)​ 上述公示表述的是N(t)服从参数为 λ t \lambda t λt的泊松分布，物理意义为，在时间t的到来了n个客人的概率，而期望为 λ t \lambda t λt与方差为 λ t \lambda t λt，即单位时间流入的客人数为 λ \lambda λ。 指数分布 P ( X ≤ t ) = 1 − P ( N ( t ) = 0 ) = 1 − e x p ( − λ t ) P(X \leq t)=1-P(N(t)=0)=1-exp(-\lambda t) P(X≤t)=1−P(N(t)=0)=1−exp(−λt) 上述公式表述的是在时间t内有客人流入的概率。该分布概率密度指的是在时刻t流入一个客人的概率密度，为上述公式的导数。服从参数为 λ \lambda λ指数分布，期望(有1个客人流入的时间)为 1 λ \frac{1}{\lambda} λ1​与方差为 1 λ 2 \frac{1}{{\lambda}^2} λ21​。 伽马分布 P ( X 1 + X 2 + . . . + X n ≤ t ) = 1 − ∑ i = 0 n − 1 P ( N ( t ) = i ) = 1 − ∑ i = 0 n − 1 ( λ t ) i e x p ( − λ t ) i ! P(X_1+X_2+...+X_n \leq t) = 1-\sum_{i=0}^{n-1}P(N(t)=i)\\=1 - \sum_{i=0}^{n-1}\frac{(\lambda t)^{i}exp(-\lambda t)}{i!} P(X1​+X2​+...+Xn​≤t)=1−i=0∑n−1​P(N(t)=i)=1−i=0∑n−1​i!(λt)iexp(−λt)​ 上述公式表述的是在时间t内有至少n个客人流入的概率。该分布概率密度服从参数为 ( n , λ ) (n, \lambda) (n,λ)的伽马分布，我们可以看出指数分布服从 ( 1 , λ ) (1, \lambda) (1,λ)的伽马分布。期望（有n个客人流入的时间）为 n λ \frac{n}{\lambda} λn​与方差为 n λ 2 \frac{n}{{\lambda}^2} λ2n​。 大权重区块攻击成功的概率 假设用二进制： μ \mu μ为攻击者算力， λ \lambda λ为正常算力 一个难度为 n 0 n_0 n0​的区块相当于工作量为 2 n 0 2^{n_0} 2n0​一个难度为 n 0 n_0 n0​的区块相当于工作量为 2 n 0 2^{n_0} 2n0​。 攻击者挖到至少一个难度为 n 0 n_0 n0​的区块所用的期望时间取 2 n 0 μ \frac{2^{n_0}}{\mu} μ2n0​​ 攻击者挖到至少一个难度为 n 0 n_0 n0​的区块所用的时间服从参数为 μ 2 n 0 \frac{\mu}{2^{n_0}} 2n0​μ​的指数分布 怎么定义攻击成功？就是商家在交易的累计难度为 n 0 n_0 n0​时（时间为 t 0 t_0 t0​），攻击者能够产生难度不小于 n 0 n_0 n0​的区块。其中 W n 0 W^{n_0} Wn0​为攻击者生成难度为 n 0 n_0 n0​所需要的时间。我们可以计算攻击成功的概率： E ( t 0 ) = 2 n 0 λ ( 1 ) E(t_0)=\frac{2^{n_0}}{\lambda} \qquad (1) E(t0​)=λ2n0​​(1) P ( W n 0 &amp;lt; t 0 ) = 1 − e x p ( − t 0 μ 2 − n 0 ) ( 2 ) P(W^{n_0}&amp;lt;t_0)=1-exp(-t_0 \mu2^{-n_0})\qquad (2) P(Wn0​&lt;t0​)=1−exp(−t0​μ2−n0​)(2) 我们采用 t 0 t_0 t0​为其期望，即把(1)带入(2)得到 P ( W n 0 &amp;lt; t 0 ) = 1 − e x p ( − μ λ ) ≈ μ λ ( 3 ) P(W^{n_0}&amp;lt;t_0)=1-exp(-\frac{\mu}{\lambda})\approx\frac{\mu}{\lambda}\qquad (3) P(Wn0​&lt;t0​)=1−exp(−λμ​)≈λμ​(3) 分析(3)我们可以得知攻击成功的概率只与(攻击者算力/诚实者算力)有关，与等待时常 t 0 t_0 t0​和累计难度 2 n 0 2^{n_0} 2n0​都没有关系。这说明了什么？不像比特币你等待越久，越多的区块支持你，你的交易越难被回滚。在Tangle中，无论你的累计难度有多高等待时常有多长，都不代表你交易被回滚的概率越小，这个概率时常数，只与算力比有关。 因此，Tangle需要限制某个区块的难度大小，这样相当于退化到比特币的模型，攻击者最好的方法都是一直生产上线难度的区块。 比特币模型到底有什么不同 在比特币双花攻击成功概率一文的分析方法是和白皮书的方法同出一源，可能看不出端倪，我们现在从另外的角度审视比特币。 上面大区块攻击的分析中，相当于分析比特币双花攻击成功概率一文中的第二部分，即直接考虑谁的累计难度大，而没有考虑第一部分中攻击者累计权重小但最后能追上诚实者的概率。所以对于比特币我们也直接分析第二部分。 其实比特币的n确认机制相当于，诚实算力生产了n个区块，而攻击者（算力小于诚实者）也生产了n个区块的概率会差不多指数下降，所以等的n越大，那么就越安全。 这里设 n 0 n_0 n0​为比特币区块的难度要求，商家采用 n n n确认机制，共用时也是 t 0 t_0 t0​，则被攻击成功的概率为 P ( W 1 n 0 + W 2 n 0 + . . . + W n n 0 &amp;lt; t 0 ) P(W_{1}^{n_0} + W_{2}^{n_0}+...+W_{n}^{n_0}&amp;lt;t_0) P(W1n0​​+W2n0​​+...+Wnn0​​&lt;t0​)，满足参数为 ( n , μ 2 n 0 ) (n,\frac{\mu}{2^{n_0}}) (n,2n0​μ​)的伽马分布，所以攻击成功的概率为 P ( 攻 击 成 功 ) = 1 − ∑ i = 0 n − 1 ( μ 2 n 0 t 0 ) i e x p ( − μ 2 n 0 t 0 ) i ! P(攻击成功)=1 - \sum_{i=0}^{n-1}\frac{(\frac{\mu}{2^{n_0}} t_0)^{i}exp(-\frac{\mu}{2^{n_0}} t_0)}{i!} P(攻击成功)=1−i=0∑n−1​i!(2n0​μ​t0​)iexp(−2n0​μ​t0​)​ 同理因为 E ( t 0 ) = n 2 n 0 λ E(t_0)=n\frac{2^{n_0}}{\lambda} E(t0​)=nλ2n0​​，取 t 0 t_0 t0​为其期望，所以 P ( 攻 击 成 功 ) = 1 − ∑ i = 0 n − 1 ( μ λ n ) i e x p ( − μ λ n ) i ! P(攻击成功)=1 - \sum_{i=0}^{n-1}\frac{(\frac{\mu}{\lambda} n)^{i}exp(-\frac{\mu}{\lambda} n)}{i!} P(攻击成功)=1−i=0∑n−1​i!(λμ​n)iexp(−λμ​n)​ 下面截图为z确认 P ( 攻 击 成 功 ) P(攻击成功) P(攻击成功)的值，可以看出随着z的增大，攻击成功的概率几乎是指数下降的。 分析 综上，我们可以思考本质的问题是什么，其实就是靠累计得到的难度是线性的，而只挖一个难度大的可以抵消这种线性累计（这个跟指数分布这个东西有关）。所以，只要限制好大区块的大小，理论上tangle也是能够获得类似比特币的安全性。" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-23T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"白皮书 双花攻击 Tangle白皮书讲述了两种双花攻击方式： 寄生链攻击 大权重区块攻击 过程如下： 攻击者付钱购买商品，然后商家等待该交易累积足够的权重，则给攻击者发货 攻击者在付钱的同时，开始在暗地里用自己的算力来支持双花交易，待商家发货的时候且确认自己在tips选择规则上有优势时，广播支持双花交易的寄生链/大权重双花交易 根据tips选择的规则，攻击者拥有优势，则双花交易的寄生链/大权重双花交易会被后面新来的交易所引用（支持），那么双花交易被全网认可，而原交易失效。最终，商户没收到钱，但把商品发给交易者了。 寄生链攻击 思考寄生链的问题本质上是思考，网络认可的主链的标准是怎么样的？ 平等对待所有的tips，即每个tips被选择的概率相同 最长链上的tips更应该被选择 但上述两个标准都不能解决寄生链问题，对于寄生链，可以在末端无成本地添加任意个数的tips，同时寄生链可以弄得任意长。 而Tangle在解决这个问题得过程中，网络认可得主链标准为累计算力，即如果tips支持得链路累计的算力越大，这条链路更值得支持。这一点体现在游走算法中。 游走算法 考虑累计权重在[W, 2W]之间的交易，W是一个足够大的值 从步骤1中的交易中随机选择N个交易，分别作为N次游走的起点 每次游走从x-&gt;y，从高累计权重走到tips。若x-&gt;y为可能，则说明y支持x。转移概率( H i H_i Hi​为交易i的累计权重)如下： P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \\frac{exp(-a(H_x-H_y))}{\\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 必存在最先到达tip的两条路径，选择该两条路径对应的两个tips作为新交易支持的对象（注：必须舍弃路径太短，太快的结果，因为很有可能是Lazy Tips，下文会说明） 游走算法解决了寄生链的问题 在主网和寄生链分叉的地方，随机游走需要选择下一站，是主网的交易y1还是寄生链的交易y2。已知 H y 1 &amp;gt; H y 2 H_{y1}&amp;gt;H_{y2} Hy1​&gt;Hy2​，所以 H x − H y 1 &amp;lt; H x − H y 2 H_x-H_{y1}&amp;lt;H_x-H_{y2} Hx​−Hy1​&lt;Hx​−Hy2​，通过exp放大差异，所以 e x p ( − a ( H x − H y 1 ) ) &amp;gt; &amp;gt; e x p ( − a ( H x − H y 2 ) ) exp(-a(H_x-H_{y1}))&amp;gt;&amp;gt;exp(-a(H_x-H_{y2})) exp(−a(Hx​−Hy1​))&gt;&gt;exp(−a(Hx​−Hy2​))，所以寄生链被选择的概率很小。 P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \\frac{exp(-a(H_x-H_y))}{\\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 游走算法同时解决了Lazy Tips问题 在Tangle中每笔交易在发出时理论上要选择2个tips（tip指的是在交易发起者视野中从未被人支持过的交易）去支持的，但支持的过程需要验证整个交易流的合法性，比较浪费时间。 因此，有的交易的发起者会选择两个累计权重足够大的交易进行支持（Tangle不能强制让你去支持tips，因为网络是异步的，不能确认交易发起者的视野）。因为累计权重大的交易已经被网络很大程度确认了，就不需要浪费时间确认其合法性，但这样不利于整个网络（累计权重轻的tips总需要有人去验证确认）。这些直接支持“老交易”的新交易成为Lazy Tips。 游走算法必须保证这些Lazy Tips不会被游走算法所选择，即不能平等对待这些Tips。 同上“游走算法解决了寄生链的问题”， P ( x − &amp;gt; y l a z y ) &amp;lt; &amp;lt; P ( x − &amp;gt; y n o r m a l ) P(x-&amp;gt;y_{lazy}) &amp;lt;&amp;lt; P(x-&amp;gt;y_{normal}) P(x−&gt;ylazy​)&lt;&lt;P(x−&gt;ynormal​) a的取值 a的取值决定了 H x H_x Hx​与 H y H_y Hy​差异的放大程度 P ( x − &amp;gt; y ) = e x p ( − a ( H x − H y ) ) ∑ z : x − &amp;gt; z e x p ( − a ( H x − H y ) ) P(x-&amp;gt;y) = \\frac{exp(-a(H_x-H_y))}{\\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}} P(x−&gt;y)=∑z:x−&gt;z​exp(−a(Hx​−Hy​))exp(−a(Hx​−Hy​))​ 当a足够大时，游走路径变得不那么随机。此时若 H y 1 H_{y1} Hy1​稍稍大于 H y 2 H_{y2} Hy2​，但因为a的放大作用，最后游走时以绝对的概率选择y1，这不是我们想要的。为什么？想象以下，在某个时刻的每笔交易选择tips的过程中，游走的路径都一样。首先这笔交易两个都引用了相同的tips，然后再同一时刻不同交易都引用了相同的tips，那么tips的数量会很多很多（消除了一个，新增了约为 λ \\lambda λ那么多个），tips的数量不收敛是个很大的问题 关于游走算法的其他问题 会不会存在这样的问题，交易为了自己的交易第一次被确认快一些，可能会分析整个Dag，得到tip被选中的概率分布，然后选择概率最大的tip。首先，如果每个人都这么做就会发生类似a取值太大的问题。 然而，怎么去避免这个问题，可以改变游走的方式，让路径可以以一定概率向上回溯。然后，怎么才算解决了这个问题呢？当你要统计某个时刻的tips的分布所需要的时间远大于游走所需要的时间，那么当统计完分布后，tips的情况已经改变了，因为同一时刻的采用游走的交易已经接入了，形成的新的tips。 大权重区块攻击 寄生链的问题采用了累计权重为标准进行tips的选择。但是，我们有没有想过累计权重这个东西是否靠谱，引申到权重是否靠谱？ 在比特币采用的是最长链标准，即一个交易被越多的区块所引用，那么这个交易被回滚的概率就会越小。所以，比特币中有六区块确认说法。 然后，在Tangle中我们采用累计权重的标准。那么同理，一个交易的累计权重越大，那么其越难被回滚吗？一个很反直觉的结果，就是不是这样的。这里用到的是大权重攻击，下面回从数学上分析，为什么其结果与比特币的不同。 引入数学基础 泊松分布 P ( N ( t ) = n ) = ( λ t ) n e x p ( − λ t ) n ! P(N(t) = n)=\\frac{(\\lambda t)^{n}exp(-\\lambda t)}{n!} P(N(t)=n)=n!(λt)nexp(−λt)​ 上述公示表述的是N(t)服从参数为 λ t \\lambda t λt的泊松分布，物理意义为，在时间t的到来了n个客人的概率，而期望为 λ t \\lambda t λt与方差为 λ t \\lambda t λt，即单位时间流入的客人数为 λ \\lambda λ。 指数分布 P ( X ≤ t ) = 1 − P ( N ( t ) = 0 ) = 1 − e x p ( − λ t ) P(X \\leq t)=1-P(N(t)=0)=1-exp(-\\lambda t) P(X≤t)=1−P(N(t)=0)=1−exp(−λt) 上述公式表述的是在时间t内有客人流入的概率。该分布概率密度指的是在时刻t流入一个客人的概率密度，为上述公式的导数。服从参数为 λ \\lambda λ指数分布，期望(有1个客人流入的时间)为 1 λ \\frac{1}{\\lambda} λ1​与方差为 1 λ 2 \\frac{1}{{\\lambda}^2} λ21​。 伽马分布 P ( X 1 + X 2 + . . . + X n ≤ t ) = 1 − ∑ i = 0 n − 1 P ( N ( t ) = i ) = 1 − ∑ i = 0 n − 1 ( λ t ) i e x p ( − λ t ) i ! P(X_1+X_2+...+X_n \\leq t) = 1-\\sum_{i=0}^{n-1}P(N(t)=i)\\\\=1 - \\sum_{i=0}^{n-1}\\frac{(\\lambda t)^{i}exp(-\\lambda t)}{i!} P(X1​+X2​+...+Xn​≤t)=1−i=0∑n−1​P(N(t)=i)=1−i=0∑n−1​i!(λt)iexp(−λt)​ 上述公式表述的是在时间t内有至少n个客人流入的概率。该分布概率密度服从参数为 ( n , λ ) (n, \\lambda) (n,λ)的伽马分布，我们可以看出指数分布服从 ( 1 , λ ) (1, \\lambda) (1,λ)的伽马分布。期望（有n个客人流入的时间）为 n λ \\frac{n}{\\lambda} λn​与方差为 n λ 2 \\frac{n}{{\\lambda}^2} λ2n​。 大权重区块攻击成功的概率 假设用二进制： μ \\mu μ为攻击者算力， λ \\lambda λ为正常算力 一个难度为 n 0 n_0 n0​的区块相当于工作量为 2 n 0 2^{n_0} 2n0​一个难度为 n 0 n_0 n0​的区块相当于工作量为 2 n 0 2^{n_0} 2n0​。 攻击者挖到至少一个难度为 n 0 n_0 n0​的区块所用的期望时间取 2 n 0 μ \\frac{2^{n_0}}{\\mu} μ2n0​​ 攻击者挖到至少一个难度为 n 0 n_0 n0​的区块所用的时间服从参数为 μ 2 n 0 \\frac{\\mu}{2^{n_0}} 2n0​μ​的指数分布 怎么定义攻击成功？就是商家在交易的累计难度为 n 0 n_0 n0​时（时间为 t 0 t_0 t0​），攻击者能够产生难度不小于 n 0 n_0 n0​的区块。其中 W n 0 W^{n_0} Wn0​为攻击者生成难度为 n 0 n_0 n0​所需要的时间。我们可以计算攻击成功的概率： E ( t 0 ) = 2 n 0 λ ( 1 ) E(t_0)=\\frac{2^{n_0}}{\\lambda} \\qquad (1) E(t0​)=λ2n0​​(1) P ( W n 0 &amp;lt; t 0 ) = 1 − e x p ( − t 0 μ 2 − n 0 ) ( 2 ) P(W^{n_0}&amp;lt;t_0)=1-exp(-t_0 \\mu2^{-n_0})\\qquad (2) P(Wn0​&lt;t0​)=1−exp(−t0​μ2−n0​)(2) 我们采用 t 0 t_0 t0​为其期望，即把(1)带入(2)得到 P ( W n 0 &amp;lt; t 0 ) = 1 − e x p ( − μ λ ) ≈ μ λ ( 3 ) P(W^{n_0}&amp;lt;t_0)=1-exp(-\\frac{\\mu}{\\lambda})\\approx\\frac{\\mu}{\\lambda}\\qquad (3) P(Wn0​&lt;t0​)=1−exp(−λμ​)≈λμ​(3) 分析(3)我们可以得知攻击成功的概率只与(攻击者算力/诚实者算力)有关，与等待时常 t 0 t_0 t0​和累计难度 2 n 0 2^{n_0} 2n0​都没有关系。这说明了什么？不像比特币你等待越久，越多的区块支持你，你的交易越难被回滚。在Tangle中，无论你的累计难度有多高等待时常有多长，都不代表你交易被回滚的概率越小，这个概率时常数，只与算力比有关。 因此，Tangle需要限制某个区块的难度大小，这样相当于退化到比特币的模型，攻击者最好的方法都是一直生产上线难度的区块。 比特币模型到底有什么不同 在比特币双花攻击成功概率一文的分析方法是和白皮书的方法同出一源，可能看不出端倪，我们现在从另外的角度审视比特币。 上面大区块攻击的分析中，相当于分析比特币双花攻击成功概率一文中的第二部分，即直接考虑谁的累计难度大，而没有考虑第一部分中攻击者累计权重小但最后能追上诚实者的概率。所以对于比特币我们也直接分析第二部分。 其实比特币的n确认机制相当于，诚实算力生产了n个区块，而攻击者（算力小于诚实者）也生产了n个区块的概率会差不多指数下降，所以等的n越大，那么就越安全。 这里设 n 0 n_0 n0​为比特币区块的难度要求，商家采用 n n n确认机制，共用时也是 t 0 t_0 t0​，则被攻击成功的概率为 P ( W 1 n 0 + W 2 n 0 + . . . + W n n 0 &amp;lt; t 0 ) P(W_{1}^{n_0} + W_{2}^{n_0}+...+W_{n}^{n_0}&amp;lt;t_0) P(W1n0​​+W2n0​​+...+Wnn0​​&lt;t0​)，满足参数为 ( n , μ 2 n 0 ) (n,\\frac{\\mu}{2^{n_0}}) (n,2n0​μ​)的伽马分布，所以攻击成功的概率为 P ( 攻 击 成 功 ) = 1 − ∑ i = 0 n − 1 ( μ 2 n 0 t 0 ) i e x p ( − μ 2 n 0 t 0 ) i ! P(攻击成功)=1 - \\sum_{i=0}^{n-1}\\frac{(\\frac{\\mu}{2^{n_0}} t_0)^{i}exp(-\\frac{\\mu}{2^{n_0}} t_0)}{i!} P(攻击成功)=1−i=0∑n−1​i!(2n0​μ​t0​)iexp(−2n0​μ​t0​)​ 同理因为 E ( t 0 ) = n 2 n 0 λ E(t_0)=n\\frac{2^{n_0}}{\\lambda} E(t0​)=nλ2n0​​，取 t 0 t_0 t0​为其期望，所以 P ( 攻 击 成 功 ) = 1 − ∑ i = 0 n − 1 ( μ λ n ) i e x p ( − μ λ n ) i ! P(攻击成功)=1 - \\sum_{i=0}^{n-1}\\frac{(\\frac{\\mu}{\\lambda} n)^{i}exp(-\\frac{\\mu}{\\lambda} n)}{i!} P(攻击成功)=1−i=0∑n−1​i!(λμ​n)iexp(−λμ​n)​ 下面截图为z确认 P ( 攻 击 成 功 ) P(攻击成功) P(攻击成功)的值，可以看出随着z的增大，攻击成功的概率几乎是指数下降的。 分析 综上，我们可以思考本质的问题是什么，其实就是靠累计得到的难度是线性的，而只挖一个难度大的可以抵消这种线性累计（这个跟指数分布这个东西有关）。所以，只要限制好大区块的大小，理论上tangle也是能够获得类似比特币的安全性。","@type":"BlogPosting","url":"/2018/12/23/cab4fc8fe13f4935ce3355e5750ffb8c.html","headline":"IOTA的底层架构Tangle的双花攻击与比特币的双花攻击之间的联系","dateModified":"2018-12-23T00:00:00+08:00","datePublished":"2018-12-23T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/12/23/cab4fc8fe13f4935ce3355e5750ffb8c.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>IOTA的底层架构Tangle的双花攻击与比特币的双花攻击之间的联系</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p><a href="https://assets.ctfassets.net/r1dr6vzfxhev/2t4uxvsIqk0EUau6g2sw0g/45eae33637ca92f85dd9f4a3a218e1ec/iota1_4_3.pdf" rel="nofollow">白皮书</a></p> 
  <h2><a id="_1"></a>双花攻击</h2> 
  <p>Tangle白皮书讲述了两种<strong>双花攻击</strong>方式：</p> 
  <ul> 
   <li>寄生链攻击</li> 
   <li>大权重区块攻击</li> 
  </ul> 
  <p>过程如下：</p> 
  <ol> 
   <li>攻击者付钱购买商品，然后商家等待该交易累积足够的权重，则给攻击者发货</li> 
   <li>攻击者在付钱的同时，开始在暗地里用自己的算力来支持双花交易，<strong>待商家发货的时候</strong>且<strong>确认自己在tips选择规则上有优势时</strong>，广播支持双花交易的寄生链/大权重双花交易</li> 
   <li>根据tips选择的规则，攻击者拥有优势，则双花交易的寄生链/大权重双花交易会被后面新来的交易所引用（支持），那么<strong>双花交易</strong>被全网认可，而<strong>原交易</strong>失效。最终，商户没收到钱，但把商品发给交易者了。</li> 
  </ol> 
  <h2><a id="_11"></a>寄生链攻击</h2> 
  <p><img src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/20181220165541694.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phc29uX2N1aWppYWh1aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <p>思考寄生链的问题本质上是思考，网络认可的主链的标准是怎么样的？</p> 
  <ul> 
   <li>平等对待所有的tips，即每个tips被选择的概率相同</li> 
   <li>最长链上的tips更应该被选择</li> 
  </ul> 
  <p>但上述两个标准都不能解决<strong>寄生链问题</strong>，对于寄生链，可以在末端无成本地添加任意个数的tips，同时寄生链可以弄得任意长。</p> 
  <p>而Tangle在解决这个问题得过程中，网络认可得主链标准为累计算力，即<strong>如果tips支持得链路累计的算力越大，这条链路更值得支持</strong>。这一点体现在游走算法中。</p> 
  <h3><a id="_22"></a>游走算法</h3> 
  <ol> 
   <li>考虑累计权重在[W, 2W]之间的交易，W是一个足够大的值</li> 
   <li>从步骤1中的交易中随机选择N个交易，分别作为N次游走的起点</li> 
   <li>每次游走从x-&gt;y，从高累计权重走到tips。若x-&gt;y为可能，则说明y支持x。转移概率(<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            H
           </mi>
           <mi>
            i
           </mi>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          H_i
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.311664em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为交易i的累计权重)如下：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            P
           </mi>
           <mo>
            (
           </mo>
           <mi>
            x
           </mi>
           <mo>
            −
           </mo>
           <mo>
            &amp;gt;
           </mo>
           <mi>
            y
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mfrac>
            <mrow>
             <mi>
              e
             </mi>
             <mi>
              x
             </mi>
             <mi>
              p
             </mi>
             <mo>
              (
             </mo>
             <mo>
              −
             </mo>
             <mi>
              a
             </mi>
             <mo>
              (
             </mo>
             <msub>
              <mi>
               H
              </mi>
              <mi>
               x
              </mi>
             </msub>
             <mo>
              −
             </mo>
             <msub>
              <mi>
               H
              </mi>
              <mi>
               y
              </mi>
             </msub>
             <mo>
              )
             </mo>
             <mo>
              )
             </mo>
            </mrow>
            <mrow>
             <munder>
              <mo>
               ∑
              </mo>
              <mrow>
               <mi>
                z
               </mi>
               <mo>
                :
               </mo>
               <mi>
                x
               </mi>
               <mo>
                −
               </mo>
               <mo>
                &amp;gt;
               </mo>
               <mi>
                z
               </mi>
              </mrow>
             </munder>
             <mrow>
              <mi>
               e
              </mi>
              <mi>
               x
              </mi>
              <mi>
               p
              </mi>
              <mo>
               (
              </mo>
              <mo>
               −
              </mo>
              <mi>
               a
              </mi>
              <mo>
               (
              </mo>
              <msub>
               <mi>
                H
               </mi>
               <mi>
                x
               </mi>
              </msub>
              <mo>
               −
              </mo>
              <msub>
               <mi>
                H
               </mi>
               <mi>
                y
               </mi>
              </msub>
              <mo>
               )
              </mo>
              <mo>
               )
              </mo>
             </mrow>
            </mrow>
           </mfrac>
          </mrow>
          <annotation encoding="application/x-tex">
           P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}}
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.47104em; vertical-align: -1.04404em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.108621em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span><span class="mrel mtight">:</span><span class="mord mathit mtight">x</span><span class="mord mtight">−</span><span class="mrel mtight">&gt;</span><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.358041em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.04404em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></li> 
   <li>必存在最先到达tip的两条路径，选择该两条路径对应的两个tips作为新交易支持的对象（注：必须舍弃路径太短，太快的结果，因为很有可能是Lazy Tips，下文会说明）</li> 
  </ol> 
  <h3><a id="_29"></a>游走算法解决了寄生链的问题</h3> 
  <p>在主网和寄生链分叉的地方，随机游走需要选择下一站，是主网的交易y1还是寄生链的交易y2。已知<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            1
           </mn>
          </mrow>
         </msub>
         <mo>
          &amp;gt;
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            2
           </mn>
          </mrow>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         H_{y1}&amp;gt;H_{y2}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，所以<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           H
          </mi>
          <mi>
           x
          </mi>
         </msub>
         <mo>
          −
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            1
           </mn>
          </mrow>
         </msub>
         <mo>
          &amp;lt;
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mi>
           x
          </mi>
         </msub>
         <mo>
          −
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            2
           </mn>
          </mrow>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         H_x-H_{y1}&amp;lt;H_x-H_{y2}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，通过exp放大差异，所以<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mo>
          (
         </mo>
         <mo>
          −
         </mo>
         <mi>
          a
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mi>
           x
          </mi>
         </msub>
         <mo>
          −
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            1
           </mn>
          </mrow>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          )
         </mo>
         <mo>
          &amp;gt;
         </mo>
         <mo>
          &amp;gt;
         </mo>
         <mi>
          e
         </mi>
         <mi>
          x
         </mi>
         <mi>
          p
         </mi>
         <mo>
          (
         </mo>
         <mo>
          −
         </mo>
         <mi>
          a
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mi>
           x
          </mi>
         </msub>
         <mo>
          −
         </mo>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            2
           </mn>
          </mrow>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         exp(-a(H_x-H_{y1}))&amp;gt;&amp;gt;exp(-a(H_x-H_{y2}))
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span>，所以寄生链被选择的概率很小。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           (
          </mo>
          <mi>
           x
          </mi>
          <mo>
           −
          </mo>
          <mo>
           &amp;gt;
          </mo>
          <mi>
           y
          </mi>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mfrac>
           <mrow>
            <mi>
             e
            </mi>
            <mi>
             x
            </mi>
            <mi>
             p
            </mi>
            <mo>
             (
            </mo>
            <mo>
             −
            </mo>
            <mi>
             a
            </mi>
            <mo>
             (
            </mo>
            <msub>
             <mi>
              H
             </mi>
             <mi>
              x
             </mi>
            </msub>
            <mo>
             −
            </mo>
            <msub>
             <mi>
              H
             </mi>
             <mi>
              y
             </mi>
            </msub>
            <mo>
             )
            </mo>
            <mo>
             )
            </mo>
           </mrow>
           <mrow>
            <munder>
             <mo>
              ∑
             </mo>
             <mrow>
              <mi>
               z
              </mi>
              <mo>
               :
              </mo>
              <mi>
               x
              </mi>
              <mo>
               −
              </mo>
              <mo>
               &amp;gt;
              </mo>
              <mi>
               z
              </mi>
             </mrow>
            </munder>
            <mrow>
             <mi>
              e
             </mi>
             <mi>
              x
             </mi>
             <mi>
              p
             </mi>
             <mo>
              (
             </mo>
             <mo>
              −
             </mo>
             <mi>
              a
             </mi>
             <mo>
              (
             </mo>
             <msub>
              <mi>
               H
              </mi>
              <mi>
               x
              </mi>
             </msub>
             <mo>
              −
             </mo>
             <msub>
              <mi>
               H
              </mi>
              <mi>
               y
              </mi>
             </msub>
             <mo>
              )
             </mo>
             <mo>
              )
             </mo>
            </mrow>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.47104em; vertical-align: -1.04404em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.108621em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span><span class="mrel mtight">:</span><span class="mord mathit mtight">x</span><span class="mord mtight">−</span><span class="mrel mtight">&gt;</span><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.358041em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.04404em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
  <h3><a id="Lazy_Tips_33"></a>游走算法同时解决了Lazy Tips问题</h3> 
  <p>在Tangle中每笔交易在发出时理论上要选择2个tips（tip指的是在交易发起者视野中从未被人支持过的交易）去支持的，但支持的过程需要验证整个交易流的合法性，比较浪费时间。</p> 
  <p>因此，有的交易的发起者会选择两个累计权重足够大的交易进行支持（Tangle不能强制让你去支持tips，因为网络是异步的，不能确认交易发起者的视野）。因为累计权重大的交易已经被网络很大程度确认了，就不需要浪费时间确认其合法性，但这样不利于整个网络（累计权重轻的tips总需要有人去验证确认）。<strong>这些直接支持“老交易”的新交易成为Lazy Tips。</strong></p> 
  <p>游走算法必须保证这些Lazy Tips不会被游走算法所选择，即不能平等对待这些Tips。</p> 
  <p>同上“游走算法解决了寄生链的问题”，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mo>
          (
         </mo>
         <mi>
          x
         </mi>
         <mo>
          −
         </mo>
         <mo>
          &amp;gt;
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mrow>
           <mi>
            l
           </mi>
           <mi>
            a
           </mi>
           <mi>
            z
           </mi>
           <mi>
            y
           </mi>
          </mrow>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          &amp;lt;
         </mo>
         <mo>
          &amp;lt;
         </mo>
         <mi>
          P
         </mi>
         <mo>
          (
         </mo>
         <mi>
          x
         </mi>
         <mo>
          −
         </mo>
         <mo>
          &amp;gt;
         </mo>
         <msub>
          <mi>
           y
          </mi>
          <mrow>
           <mi>
            n
           </mi>
           <mi>
            o
           </mi>
           <mi>
            r
           </mi>
           <mi>
            m
           </mi>
           <mi>
            a
           </mi>
           <mi>
            l
           </mi>
          </mrow>
         </msub>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         P(x-&amp;gt;y_{lazy}) &amp;lt;&amp;lt; P(x-&amp;gt;y_{normal})
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.03611em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.01968em;">l</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: -0.03588em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mord mathit mtight">o</span><span class="mord mathit mtight" style="margin-right: 0.02778em;">r</span><span class="mord mathit mtight">m</span><span class="mord mathit mtight">a</span><span class="mord mathit mtight" style="margin-right: 0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p> 
  <h3><a id="a_42"></a>a的取值</h3> 
  <p>a的取值决定了<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           H
          </mi>
          <mi>
           x
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         H_x
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>与<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           H
          </mi>
          <mi>
           y
          </mi>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         H_y
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>差异的放大程度<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           (
          </mo>
          <mi>
           x
          </mi>
          <mo>
           −
          </mo>
          <mo>
           &amp;gt;
          </mo>
          <mi>
           y
          </mi>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mfrac>
           <mrow>
            <mi>
             e
            </mi>
            <mi>
             x
            </mi>
            <mi>
             p
            </mi>
            <mo>
             (
            </mo>
            <mo>
             −
            </mo>
            <mi>
             a
            </mi>
            <mo>
             (
            </mo>
            <msub>
             <mi>
              H
             </mi>
             <mi>
              x
             </mi>
            </msub>
            <mo>
             −
            </mo>
            <msub>
             <mi>
              H
             </mi>
             <mi>
              y
             </mi>
            </msub>
            <mo>
             )
            </mo>
            <mo>
             )
            </mo>
           </mrow>
           <mrow>
            <munder>
             <mo>
              ∑
             </mo>
             <mrow>
              <mi>
               z
              </mi>
              <mo>
               :
              </mo>
              <mi>
               x
              </mi>
              <mo>
               −
              </mo>
              <mo>
               &amp;gt;
              </mo>
              <mi>
               z
              </mi>
             </mrow>
            </munder>
            <mrow>
             <mi>
              e
             </mi>
             <mi>
              x
             </mi>
             <mi>
              p
             </mi>
             <mo>
              (
             </mo>
             <mo>
              −
             </mo>
             <mi>
              a
             </mi>
             <mo>
              (
             </mo>
             <msub>
              <mi>
               H
              </mi>
              <mi>
               x
              </mi>
             </msub>
             <mo>
              −
             </mo>
             <msub>
              <mi>
               H
              </mi>
              <mi>
               y
              </mi>
             </msub>
             <mo>
              )
             </mo>
             <mo>
              )
             </mo>
            </mrow>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          P(x-&amp;gt;y) = \frac{exp(-a(H_x-H_y))}{\sum_{z:x-&amp;gt;z}{exp(-a(H_x-H_y))}}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.47104em; vertical-align: -1.04404em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: -5e-06em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.108621em;"><span class="" style="top: -2.40029em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span><span class="mrel mtight">:</span><span class="mord mathit mtight">x</span><span class="mord mtight">−</span><span class="mrel mtight">&gt;</span><span class="mord mathit mtight" style="margin-right: 0.04398em;">z</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.358041em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.04404em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
  <p>当a足够大时，游走路径变得不那么随机。此时若<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            1
           </mn>
          </mrow>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         H_{y1}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>稍稍大于<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           H
          </mi>
          <mrow>
           <mi>
            y
           </mi>
           <mn>
            2
           </mn>
          </mrow>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         H_{y2}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.969438em; vertical-align: -0.286108em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.08125em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right: 0.03588em;">y</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，但因为a的放大作用，最后游走时以绝对的概率选择y1，这不是我们想要的。为什么？想象以下，在某个时刻的每笔交易选择tips的过程中，游走的路径都一样。首先这笔交易两个都引用了相同的tips，然后再同一时刻不同交易都引用了相同的tips，那么tips的数量会很多很多（消除了一个，新增了约为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          λ
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         \lambda
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">λ</span></span></span></span></span>那么多个），tips的数量不收敛是个很大的问题</p> 
  <h3><a id="_48"></a>关于游走算法的其他问题</h3> 
  <p>会不会存在这样的问题，交易为了自己的交易第一次被确认快一些，可能会分析整个Dag，得到tip被选中的概率分布，然后选择概率最大的tip。首先，如果每个人都这么做就会发生类似a取值太大的问题。</p> 
  <p>然而，怎么去避免这个问题，可以改变游走的方式，让路径可以以一定概率向上回溯。然后，怎么才算解决了这个问题呢？当你要统计某个时刻的tips的分布所需要的时间远大于游走所需要的时间，那么当统计完分布后，tips的情况已经改变了，因为同一时刻的采用游走的交易已经接入了，形成的新的tips。</p> 
  <h2><a id="_53"></a>大权重区块攻击</h2> 
  <p>寄生链的问题采用了<strong>累计权重</strong>为标准进行tips的选择。但是，我们有没有想过累计权重这个东西是否靠谱，引申到<strong>权重是否靠谱？</strong></p> 
  <p>在比特币采用的是最长链标准，即一个交易被越多的区块所引用，那么这个交易被回滚的概率就会越小。所以，比特币中有<strong>六区块确认</strong>说法。</p> 
  <p>然后，在Tangle中我们采用累计权重的标准。那么同理，一个交易的累计权重越大，那么其越难被回滚吗？一个很反直觉的结果，就是不是这样的。这里用到的是大权重攻击，下面回从数学上分析，为什么其结果与比特币的不同。</p> 
  <p><img src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/20181223160955883.JPG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phc29uX2N1aWppYWh1aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h3><a id="_63"></a>引入数学基础</h3> 
  <ul> 
   <li>泊松分布<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            P
           </mi>
           <mo>
            (
           </mo>
           <mi>
            N
           </mi>
           <mo>
            (
           </mo>
           <mi>
            t
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mi>
            n
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mfrac>
            <mrow>
             <mo>
              (
             </mo>
             <mi>
              λ
             </mi>
             <mi>
              t
             </mi>
             <msup>
              <mo>
               )
              </mo>
              <mi>
               n
              </mi>
             </msup>
             <mi>
              e
             </mi>
             <mi>
              x
             </mi>
             <mi>
              p
             </mi>
             <mo>
              (
             </mo>
             <mo>
              −
             </mo>
             <mi>
              λ
             </mi>
             <mi>
              t
             </mi>
             <mo>
              )
             </mo>
            </mrow>
            <mrow>
             <mi>
              n
             </mi>
             <mo>
              !
             </mo>
            </mrow>
           </mfrac>
          </mrow>
          <annotation encoding="application/x-tex">
           P(N(t) = n)=\frac{(\lambda t)^{n}exp(-\lambda t)}{n!}
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.113em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">n</span><span class="mclose">!</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathit">λ</span><span class="mord mathit">t</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">λ</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 上述公示表述的是N(t)服从参数为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           λ
          </mi>
          <mi>
           t
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          \lambda t
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">λ</span><span class="mord mathit">t</span></span></span></span></span>的泊松分布，物理意义为，在时间t的到来了n个客人的概率，而期望为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           λ
          </mi>
          <mi>
           t
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          \lambda t
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">λ</span><span class="mord mathit">t</span></span></span></span></span>与方差为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           λ
          </mi>
          <mi>
           t
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          \lambda t
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">λ</span><span class="mord mathit">t</span></span></span></span></span>，即单位时间流入的客人数为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           λ
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          \lambda
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">λ</span></span></span></span></span>。</li> 
   <li>指数分布<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            P
           </mi>
           <mo>
            (
           </mo>
           <mi>
            X
           </mi>
           <mo>
            ≤
           </mo>
           <mi>
            t
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mn>
            1
           </mn>
           <mo>
            −
           </mo>
           <mi>
            P
           </mi>
           <mo>
            (
           </mo>
           <mi>
            N
           </mi>
           <mo>
            (
           </mo>
           <mi>
            t
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mn>
            0
           </mn>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mn>
            1
           </mn>
           <mo>
            −
           </mo>
           <mi>
            e
           </mi>
           <mi>
            x
           </mi>
           <mi>
            p
           </mi>
           <mo>
            (
           </mo>
           <mo>
            −
           </mo>
           <mi>
            λ
           </mi>
           <mi>
            t
           </mi>
           <mo>
            )
           </mo>
          </mrow>
          <annotation encoding="application/x-tex">
           P(X \leq t)=1-P(N(t)=0)=1-exp(-\lambda t)
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.07847em;">X</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">λ</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span></span><br> 上述公式表述的是在时间t内有客人流入的概率。该分布概率密度指的是在时刻t流入一个客人的概率密度，为上述公式的导数。服从参数为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           λ
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          \lambda
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">λ</span></span></span></span></span>指数分布，期望(有1个客人流入的时间)为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mfrac>
           <mn>
            1
           </mn>
           <mi>
            λ
           </mi>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          \frac{1}{\lambda}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">λ</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>与方差为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mfrac>
           <mn>
            1
           </mn>
           <msup>
            <mi>
             λ
            </mi>
            <mn>
             2
            </mn>
           </msup>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          \frac{1}{{\lambda}^2}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.19011em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.845108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">λ</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.746314em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>。</li> 
   <li><a href="https://en.wikipedia.org/wiki/Gamma_distribution" rel="nofollow">伽马分布</a><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
        <math>
         <semantics>
          <mrow>
           <mi>
            P
           </mi>
           <mo>
            (
           </mo>
           <msub>
            <mi>
             X
            </mi>
            <mn>
             1
            </mn>
           </msub>
           <mo>
            +
           </mo>
           <msub>
            <mi>
             X
            </mi>
            <mn>
             2
            </mn>
           </msub>
           <mo>
            +
           </mo>
           <mi mathvariant="normal">
            .
           </mi>
           <mi mathvariant="normal">
            .
           </mi>
           <mi mathvariant="normal">
            .
           </mi>
           <mo>
            +
           </mo>
           <msub>
            <mi>
             X
            </mi>
            <mi>
             n
            </mi>
           </msub>
           <mo>
            ≤
           </mo>
           <mi>
            t
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mn>
            1
           </mn>
           <mo>
            −
           </mo>
           <munderover>
            <mo>
             ∑
            </mo>
            <mrow>
             <mi>
              i
             </mi>
             <mo>
              =
             </mo>
             <mn>
              0
             </mn>
            </mrow>
            <mrow>
             <mi>
              n
             </mi>
             <mo>
              −
             </mo>
             <mn>
              1
             </mn>
            </mrow>
           </munderover>
           <mi>
            P
           </mi>
           <mo>
            (
           </mo>
           <mi>
            N
           </mi>
           <mo>
            (
           </mo>
           <mi>
            t
           </mi>
           <mo>
            )
           </mo>
           <mo>
            =
           </mo>
           <mi>
            i
           </mi>
           <mo>
            )
           </mo>
           <mspace linebreak="newline"></mspace>
           <mo>
            =
           </mo>
           <mn>
            1
           </mn>
           <mo>
            −
           </mo>
           <munderover>
            <mo>
             ∑
            </mo>
            <mrow>
             <mi>
              i
             </mi>
             <mo>
              =
             </mo>
             <mn>
              0
             </mn>
            </mrow>
            <mrow>
             <mi>
              n
             </mi>
             <mo>
              −
             </mo>
             <mn>
              1
             </mn>
            </mrow>
           </munderover>
           <mfrac>
            <mrow>
             <mo>
              (
             </mo>
             <mi>
              λ
             </mi>
             <mi>
              t
             </mi>
             <msup>
              <mo>
               )
              </mo>
              <mi>
               i
              </mi>
             </msup>
             <mi>
              e
             </mi>
             <mi>
              x
             </mi>
             <mi>
              p
             </mi>
             <mo>
              (
             </mo>
             <mo>
              −
             </mo>
             <mi>
              λ
             </mi>
             <mi>
              t
             </mi>
             <mo>
              )
             </mo>
            </mrow>
            <mrow>
             <mi>
              i
             </mi>
             <mo>
              !
             </mo>
            </mrow>
           </mfrac>
          </mrow>
          <annotation encoding="application/x-tex">
           P(X_1+X_2+...+X_n \leq t) = 1-\sum_{i=0}^{n-1}P(N(t)=i)\\=1 - \sum_{i=0}^{n-1}\frac{(\lambda t)^{i}exp(-\lambda t)}{i!}
          </annotation>
         </semantics>
        </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.07847em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 3.07878em; vertical-align: -1.27767em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.80111em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit">i</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 3.07878em; vertical-align: -1.27767em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.80111em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.50166em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">i</span><span class="mclose">!</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathit">λ</span><span class="mord mathit">t</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.824664em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span></span></span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathit">λ</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 上述公式表述的是在时间t内有至少<strong>n个客人</strong>流入的概率。该分布概率密度服从参数为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mo>
           (
          </mo>
          <mi>
           n
          </mi>
          <mo separator="true">
           ,
          </mo>
          <mi>
           λ
          </mi>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          (n, \lambda)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">λ</span><span class="mclose">)</span></span></span></span></span>的伽马分布，我们可以看出指数分布服从<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mo>
           (
          </mo>
          <mn>
           1
          </mn>
          <mo separator="true">
           ,
          </mo>
          <mi>
           λ
          </mi>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          (1, \lambda)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathit">λ</span><span class="mclose">)</span></span></span></span></span>的伽马分布。期望（有n个客人流入的时间）为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mfrac>
           <mi>
            n
           </mi>
           <mi>
            λ
           </mi>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          \frac{n}{\lambda}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.04039em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.695392em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">λ</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>与方差为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mfrac>
           <mi>
            n
           </mi>
           <msup>
            <mi>
             λ
            </mi>
            <mn>
             2
            </mn>
           </msup>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          \frac{n}{{\lambda}^2}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.04039em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.695392em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">λ</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.746314em;"><span class="" style="top: -2.786em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>。</li> 
  </ul> 
  <h3><a id="_75"></a>大权重区块攻击成功的概率</h3> 
  <p>假设用二进制：</p> 
  <ol> 
   <li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           μ
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          \mu
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathit">μ</span></span></span></span></span>为攻击者算力，<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           λ
          </mi>
         </mrow>
         <annotation encoding="application/x-tex">
          \lambda
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathit">λ</span></span></span></span></span>为正常算力</li> 
   <li>一个难度为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          n_0
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的区块相当于工作量为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msup>
           <mn>
            2
           </mn>
           <msub>
            <mi>
             n
            </mi>
            <mn>
             0
            </mn>
           </msub>
          </msup>
         </mrow>
         <annotation encoding="application/x-tex">
          2^{n_0}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.664392em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>一个难度为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          n_0
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的区块相当于工作量为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msup>
           <mn>
            2
           </mn>
           <msub>
            <mi>
             n
            </mi>
            <mn>
             0
            </mn>
           </msub>
          </msup>
         </mrow>
         <annotation encoding="application/x-tex">
          2^{n_0}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.664392em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>。</li> 
   <li>攻击者挖到至少一个难度为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          n_0
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的区块所用的期望时间取<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mfrac>
           <msup>
            <mn>
             2
            </mn>
            <msub>
             <mi>
              n
             </mi>
             <mn>
              0
             </mn>
            </msub>
           </msup>
           <mi>
            μ
           </mi>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          \frac{2^{n_0}}{\mu}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.39209em; vertical-align: -0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.91098em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">μ</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.738543em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">0</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.481108em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li> 
   <li>攻击者挖到至少一个难度为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          n_0
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的区块所用的时间服从参数为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mfrac>
           <mi>
            μ
           </mi>
           <msup>
            <mn>
             2
            </mn>
            <msub>
             <mi>
              n
             </mi>
             <mn>
              0
             </mn>
            </msub>
           </msup>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          \frac{\mu}{2^{n_0}}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0925em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7475em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.629321em;"><span class="" style="top: -2.82178em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">0</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.44611em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>的指数分布</li> 
  </ol> 
  <p>怎么定义攻击成功？就是商家在交易的累计难度为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           n
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         n_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>时（时间为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           t
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         t_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>），攻击者能够产生难度不小于<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           n
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         n_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>的区块。其中<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msup>
          <mi>
           W
          </mi>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </msup>
        </mrow>
        <annotation encoding="application/x-tex">
         W^{n_0}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>为攻击者生成难度为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           n
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         n_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>所需要的时间。我们可以计算攻击成功的概率：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           E
          </mi>
          <mo>
           (
          </mo>
          <msub>
           <mi>
            t
           </mi>
           <mn>
            0
           </mn>
          </msub>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mfrac>
           <msup>
            <mn>
             2
            </mn>
            <msub>
             <mi>
              n
             </mi>
             <mn>
              0
             </mn>
            </msub>
           </msup>
           <mi>
            λ
           </mi>
          </mfrac>
          <mspace width="2em"></mspace>
          <mo>
           (
          </mo>
          <mn>
           1
          </mn>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          E(t_0)=\frac{2^{n_0}}{\lambda} \qquad (1)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.02739em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.34139em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">λ</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></span><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           (
          </mo>
          <msup>
           <mi>
            W
           </mi>
           <msub>
            <mi>
             n
            </mi>
            <mn>
             0
            </mn>
           </msub>
          </msup>
          <mo>
           &amp;lt;
          </mo>
          <msub>
           <mi>
            t
           </mi>
           <mn>
            0
           </mn>
          </msub>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mn>
           1
          </mn>
          <mo>
           −
          </mo>
          <mi>
           e
          </mi>
          <mi>
           x
          </mi>
          <mi>
           p
          </mi>
          <mo>
           (
          </mo>
          <mo>
           −
          </mo>
          <msub>
           <mi>
            t
           </mi>
           <mn>
            0
           </mn>
          </msub>
          <mi>
           μ
          </mi>
          <msup>
           <mn>
            2
           </mn>
           <mrow>
            <mo>
             −
            </mo>
            <msub>
             <mi>
              n
             </mi>
             <mn>
              0
             </mn>
            </msub>
           </mrow>
          </msup>
          <mo>
           )
          </mo>
          <mspace width="2em"></mspace>
          <mo>
           (
          </mo>
          <mn>
           2
          </mn>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          P(W^{n_0}&amp;lt;t_0)=1-exp(-t_0 \mu2^{-n_0})\qquad (2)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.714392em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.07133em; vertical-align: -0.25em;"></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathit">μ</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.821331em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 2em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span></span><br> 我们采用<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           t
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         t_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为其期望，即把(1)带入(2)得到<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           (
          </mo>
          <msup>
           <mi>
            W
           </mi>
           <msub>
            <mi>
             n
            </mi>
            <mn>
             0
            </mn>
           </msub>
          </msup>
          <mo>
           &amp;lt;
          </mo>
          <msub>
           <mi>
            t
           </mi>
           <mn>
            0
           </mn>
          </msub>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mn>
           1
          </mn>
          <mo>
           −
          </mo>
          <mi>
           e
          </mi>
          <mi>
           x
          </mi>
          <mi>
           p
          </mi>
          <mo>
           (
          </mo>
          <mo>
           −
          </mo>
          <mfrac>
           <mi>
            μ
           </mi>
           <mi>
            λ
           </mi>
          </mfrac>
          <mo>
           )
          </mo>
          <mo>
           ≈
          </mo>
          <mfrac>
           <mi>
            μ
           </mi>
           <mi>
            λ
           </mi>
          </mfrac>
          <mspace width="2em"></mspace>
          <mo>
           (
          </mo>
          <mn>
           3
          </mn>
          <mo>
           )
          </mo>
         </mrow>
         <annotation encoding="application/x-tex">
          P(W^{n_0}&amp;lt;t_0)=1-exp(-\frac{\mu}{\lambda})\approx\frac{\mu}{\lambda}\qquad (3)
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.714392em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.79356em; vertical-align: -0.686em;"></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10756em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">λ</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">μ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.79356em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10756em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">λ</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">μ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 2em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span></span></span></p> 
  <p>分析(3)我们可以得知<strong>攻击成功的概率只与(攻击者算力/诚实者算力)有关，与等待时常<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            t
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </mrow>
         <annotation encoding="application/x-tex">
          t_0
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和累计难度<span class="katex--inline"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msup>
           <mn>
            2
           </mn>
           <msub>
            <mi>
             n
            </mi>
            <mn>
             0
            </mn>
           </msub>
          </msup>
         </mrow>
         <annotation encoding="application/x-tex">
          2^{n_0}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.664392em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>都没有关系</strong>。这说明了什么？不像比特币你等待越久，越多的区块支持你，你的交易越难被回滚。在Tangle中，无论你的累计难度有多高等待时常有多长，都不代表你交易被回滚的概率越小，这个概率时常数，只与算力比有关。</p> 
  <p>因此，Tangle需要限制某个区块的难度大小，这样相当于退化到比特币的模型，攻击者最好的方法都是一直生产上线难度的区块。</p> 
  <h3><a id="_92"></a>比特币模型到底有什么不同</h3> 
  <p>在<a href="https://blog.csdn.net/jason_cuijiahui/article/details/85047527" rel="nofollow">比特币双花攻击成功概率</a>一文的分析方法是和白皮书的方法同出一源，可能看不出端倪，我们现在从另外的角度审视比特币。</p> 
  <p>上面大区块攻击的分析中，相当于分析<a href="https://blog.csdn.net/jason_cuijiahui/article/details/85047527" rel="nofollow">比特币双花攻击成功概率</a>一文中的第二部分，即直接考虑谁的累计难度大，而没有考虑第一部分中攻击者累计权重小但最后能追上诚实者的概率。所以对于比特币我们也直接分析第二部分。</p> 
  <p>其实比特币的n确认机制相当于，诚实算力生产了n个区块，而攻击者（算力小于诚实者）也生产了n个区块的概率会差不多指数下降，所以等的n越大，那么就越安全。</p> 
  <p>这里设<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           n
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         n_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为比特币区块的难度要求，商家采用<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          n
         </mi>
        </mrow>
        <annotation encoding="application/x-tex">
         n
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathit">n</span></span></span></span></span>确认机制，共用时也是<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           t
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         t_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，则被攻击成功的概率为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mo>
          (
         </mo>
         <msubsup>
          <mi>
           W
          </mi>
          <mn>
           1
          </mn>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </msubsup>
         <mo>
          +
         </mo>
         <msubsup>
          <mi>
           W
          </mi>
          <mn>
           2
          </mn>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </msubsup>
         <mo>
          +
         </mo>
         <mi mathvariant="normal">
          .
         </mi>
         <mi mathvariant="normal">
          .
         </mi>
         <mi mathvariant="normal">
          .
         </mi>
         <mo>
          +
         </mo>
         <msubsup>
          <mi>
           W
          </mi>
          <mi>
           n
          </mi>
          <msub>
           <mi>
            n
           </mi>
           <mn>
            0
           </mn>
          </msub>
         </msubsup>
         <mo>
          &amp;lt;
         </mo>
         <msub>
          <mi>
           t
          </mi>
          <mn>
           0
          </mn>
         </msub>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         P(W_{1}^{n_0} + W_{2}^{n_0}+...+W_{n}^{n_0}&amp;lt;t_0)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.01631em; vertical-align: -0.266308em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.746292em;"><span class="" style="top: -2.43369em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span><span class="" style="top: -3.1449em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.266308em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.0126em; vertical-align: -0.266308em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.746292em;"><span class="" style="top: -2.43369em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span class="" style="top: -3.1449em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.266308em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.93033em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -2.453em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.317314em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，满足参数为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mo>
          (
         </mo>
         <mi>
          n
         </mi>
         <mo separator="true">
          ,
         </mo>
         <mfrac>
          <mi>
           μ
          </mi>
          <msup>
           <mn>
            2
           </mn>
           <msub>
            <mi>
             n
            </mi>
            <mn>
             0
            </mn>
           </msub>
          </msup>
         </mfrac>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         (n,\frac{\mu}{2^{n_0}})
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.095em; vertical-align: -0.345em;"></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7475em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.629321em;"><span class="" style="top: -2.82178em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">0</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.44611em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span>的伽马分布，所以攻击成功的概率为<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           (
          </mo>
          <mi mathvariant="normal">
           攻
          </mi>
          <mi mathvariant="normal">
           击
          </mi>
          <mi mathvariant="normal">
           成
          </mi>
          <mi mathvariant="normal">
           功
          </mi>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mn>
           1
          </mn>
          <mo>
           −
          </mo>
          <munderover>
           <mo>
            ∑
           </mo>
           <mrow>
            <mi>
             i
            </mi>
            <mo>
             =
            </mo>
            <mn>
             0
            </mn>
           </mrow>
           <mrow>
            <mi>
             n
            </mi>
            <mo>
             −
            </mo>
            <mn>
             1
            </mn>
           </mrow>
          </munderover>
          <mfrac>
           <mrow>
            <mo>
             (
            </mo>
            <mfrac>
             <mi>
              μ
             </mi>
             <msup>
              <mn>
               2
              </mn>
              <msub>
               <mi>
                n
               </mi>
               <mn>
                0
               </mn>
              </msub>
             </msup>
            </mfrac>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              0
             </mn>
            </msub>
            <msup>
             <mo>
              )
             </mo>
             <mi>
              i
             </mi>
            </msup>
            <mi>
             e
            </mi>
            <mi>
             x
            </mi>
            <mi>
             p
            </mi>
            <mo>
             (
            </mo>
            <mo>
             −
            </mo>
            <mfrac>
             <mi>
              μ
             </mi>
             <msup>
              <mn>
               2
              </mn>
              <msub>
               <mi>
                n
               </mi>
               <mn>
                0
               </mn>
              </msub>
             </msup>
            </mfrac>
            <msub>
             <mi>
              t
             </mi>
             <mn>
              0
             </mn>
            </msub>
            <mo>
             )
            </mo>
           </mrow>
           <mrow>
            <mi>
             i
            </mi>
            <mo>
             !
            </mo>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          P(攻击成功)=1 - \sum_{i=0}^{n-1}\frac{(\frac{\mu}{2^{n_0}} t_0)^{i}exp(-\frac{\mu}{2^{n_0}} t_0)}{i!} 
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord cjk_fallback">攻</span><span class="mord cjk_fallback">击</span><span class="mord cjk_fallback">成</span><span class="mord cjk_fallback">功</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 3.07878em; vertical-align: -1.27767em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.80111em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.55966em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">i</span><span class="mclose">!</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.735em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7475em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.629321em;"><span class="" style="top: -2.82178em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">0</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.44611em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.824664em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span></span></span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7475em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.629321em;"><span class="" style="top: -2.82178em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">0</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.44611em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
  <p>同理因为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          E
         </mi>
         <mo>
          (
         </mo>
         <msub>
          <mi>
           t
          </mi>
          <mn>
           0
          </mn>
         </msub>
         <mo>
          )
         </mo>
         <mo>
          =
         </mo>
         <mi>
          n
         </mi>
         <mfrac>
          <msup>
           <mn>
            2
           </mn>
           <msub>
            <mi>
             n
            </mi>
            <mn>
             0
            </mn>
           </msub>
          </msup>
          <mi>
           λ
          </mi>
         </mfrac>
        </mrow>
        <annotation encoding="application/x-tex">
         E(t_0)=n\frac{2^{n_0}}{\lambda}
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.25598em; vertical-align: -0.345em;"></span><span class="mord mathit">n</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.91098em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">λ</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.738543em;"><span class="" style="top: -2.931em; margin-right: 0.0714286em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3448em; margin-left: 0em; margin-right: 0.1em;"><span class="pstrut" style="height: 2.64444em;"></span><span class="mord mtight">0</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.29964em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>，取<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           t
          </mi>
          <mn>
           0
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         t_0
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>为其期望，所以<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <mi>
           P
          </mi>
          <mo>
           (
          </mo>
          <mi mathvariant="normal">
           攻
          </mi>
          <mi mathvariant="normal">
           击
          </mi>
          <mi mathvariant="normal">
           成
          </mi>
          <mi mathvariant="normal">
           功
          </mi>
          <mo>
           )
          </mo>
          <mo>
           =
          </mo>
          <mn>
           1
          </mn>
          <mo>
           −
          </mo>
          <munderover>
           <mo>
            ∑
           </mo>
           <mrow>
            <mi>
             i
            </mi>
            <mo>
             =
            </mo>
            <mn>
             0
            </mn>
           </mrow>
           <mrow>
            <mi>
             n
            </mi>
            <mo>
             −
            </mo>
            <mn>
             1
            </mn>
           </mrow>
          </munderover>
          <mfrac>
           <mrow>
            <mo>
             (
            </mo>
            <mfrac>
             <mi>
              μ
             </mi>
             <mi>
              λ
             </mi>
            </mfrac>
            <mi>
             n
            </mi>
            <msup>
             <mo>
              )
             </mo>
             <mi>
              i
             </mi>
            </msup>
            <mi>
             e
            </mi>
            <mi>
             x
            </mi>
            <mi>
             p
            </mi>
            <mo>
             (
            </mo>
            <mo>
             −
            </mo>
            <mfrac>
             <mi>
              μ
             </mi>
             <mi>
              λ
             </mi>
            </mfrac>
            <mi>
             n
            </mi>
            <mo>
             )
            </mo>
           </mrow>
           <mrow>
            <mi>
             i
            </mi>
            <mo>
             !
            </mo>
           </mrow>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          P(攻击成功)=1 - \sum_{i=0}^{n-1}\frac{(\frac{\mu}{\lambda} n)^{i}exp(-\frac{\mu}{\lambda} n)}{i!} 
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord cjk_fallback">攻</span><span class="mord cjk_fallback">击</span><span class="mord cjk_fallback">成</span><span class="mord cjk_fallback">功</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 3.07878em; vertical-align: -1.27767em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.80111em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.55966em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">i</span><span class="mclose">!</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.735em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7475em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">λ</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.44611em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathit">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.824664em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span></span></span></span></span></span></span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.7475em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">λ</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.44611em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
  <p>下面截图为z确认<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <mi>
          P
         </mi>
         <mo>
          (
         </mo>
         <mi mathvariant="normal">
          攻
         </mi>
         <mi mathvariant="normal">
          击
         </mi>
         <mi mathvariant="normal">
          成
         </mi>
         <mi mathvariant="normal">
          功
         </mi>
         <mo>
          )
         </mo>
        </mrow>
        <annotation encoding="application/x-tex">
         P(攻击成功)
        </annotation>
       </semantics>
      </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.13889em;">P</span><span class="mopen">(</span><span class="mord cjk_fallback">攻</span><span class="mord cjk_fallback">击</span><span class="mord cjk_fallback">成</span><span class="mord cjk_fallback">功</span><span class="mclose">)</span></span></span></span></span>的值，可以看出随着z的增大，攻击成功的概率几乎是指数下降的。<br> <img src="https://blog.uzzz.org.cn/_p?https://img-blog.csdnimg.cn/2018122318224635.JPG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phc29uX2N1aWppYWh1aQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> 
  <h3><a id="_108"></a>分析</h3> 
  <p>综上，我们可以思考本质的问题是什么，其实就是靠累计得到的难度是线性的，而只挖一个难度大的可以抵消这种线性累计（这个跟指数分布这个东西有关）。所以，只要限制好大区块的大小，理论上tangle也是能够获得类似比特币的安全性。</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-7b4cdcb592.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
