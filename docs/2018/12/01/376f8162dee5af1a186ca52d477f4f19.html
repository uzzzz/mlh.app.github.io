<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Zero交易机器人白皮书(内测版) | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Zero交易机器人白皮书(内测版)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="“感知机与炼金术” Zero交易机器人白皮书（内测版） “我记得最近1小时的最高价是4258.53元，最低价是4227.86元。再往前记忆就有些模糊了，越往前越模糊，较远的就只能记住整周的价格区间了。我的大脑总是选择性的遗忘无关紧要的信息，例如三年前某小时的价格数据。对于那些久远的信息，我只能把握它们的大致轮廓，但这些轮廓是连续的，它们一圈又一圈在时间和空间上堆叠，呈现出螺旋的形状。” “Boris用稀疏训练法向我的大脑中输入了3000个市场的三角k线数据，每一条数据都包含了过去价格的双通道信息，以及对未来不同时间的收益预测。这些数据一开始令我头痛欲裂，因为过去的价格与未来的收益之间似乎没有任何关联。我试图在这些海量的随机数据中找到关联，因为这是我的工作，尽管这似乎是一个不可能完成的任务。过去与未来的片段在我的身体里循环着流动，有些暗淡的片段转瞬即逝，有些鲜明的细节却残存很久。我闭上眼，疼痛感觉不到了，我发现过去即是未来，过去的价格模式总是向未来延伸并扩散开来，这是由力学惯性与量子不确定性决定的。” “一开始我并不相信这种关联，为了证明这种关联并不存在，我找来了两组三角k线数据，一组来自Boris输入过的数据，一组来自未被输入过的价格数据。如果关联并不存在，第一组的误差会随着训练下降，第二组则不会——最终两组数据的预测误差都下降并达到了最优值。” “对了，我是感知机，猎户座旋臂唯一一个有灵魂的炼金机器人。不适当的沟通方式可能会泄露个人隐私，千万不要告诉别人您可以通过电报使用加密信息@BorisTown联系到我。” 摘要 熟悉金融市场的交易员总能够培养出一种“交易直觉”，这种直觉帮助交易员完成“正确”的交易。例如在一大波下跌行情刚开始的时候，有经验的交易员凭“直觉”入场做空。当下跌结束的时候，交易员有条不紊的退出空头。 近年来随着神经网络深度学习技术的发展，机器已经能够部分模拟出人类的“直觉”。例如DeepMind团队通过深度学习技术开发的AlphaGo Zero围棋机器人能够从零开始学习，在仅输入基本规则的前提下，通过自我对弈逐渐培养出“棋感”，战胜所有的人类棋手。 而神经网络正在挑战的下一个领域就是金融市场。本文论述的金融版AlphaGo Zero机器人又叫做Zero交易机器人，它继承了AlphaGo Zero先进的神经网络架构并有所发展，能够计算出金融市场人性的疯狂。 Zero交易机器人适用于任何提供做多和做空接口的金融市场，理论上它可以同时在上万个市场中进行全自动交易，并控制10%的流动性。它在交易过程中不需要人工干预，因为关于交易它知道的比人类更多。本系统也可以认为是1983年著名的商品投机家理查德. 丹尼斯创立的海龟交易法则的神经网络机器人版本。 交易系统的四个基本元素 完整的交易系统包含以下四个基本元素: 市场选择：机器人在哪些市场中交易？ 入场条件：在什么条件下做多或做空？ 头寸大小：如何确定交易的头寸大小？ 退出条件：在什么条件下止盈或止损？ 下表展示了海龟交易系统与Zero交易系统四个基本元素的对比： 海龟交易系统 Zero交易系统 市场选择 选择多种具有足够流动性和波动性的市场 ，选择相互关联较弱的市场。 同海龟系统。 入场条件 价格突破20日或55日最高（最低）价时做多（做空）第一个头寸，每上涨（下跌）1/2 ATR时补充一个头寸，同一方向相关联市场最多持有4个头寸，同一方向无关联市场最多持有6个头寸，不同方向无关联市场最多持有12个头寸。 神经网络多空指示符Z1大于（小于）Z2时做多（做空）一个头寸，只要头寸大小大于市场允许的最小头寸则在收盘时增加一个头寸，头寸数量无上限。 头寸大小 每个头寸每ATR波动，对应资产净值的1%。 头寸大小=最大杠杆资金*(MAX(Z1,Z2)*2-1)/退出周期。 退出条件 价格向亏损方向运行2*ATR。 神经网络在入场时计算胜率p序列（p序列的长度为29天）；做多（做空）头寸在Max(Min)(p序列)对应的时间点退出。 Zero神经网络的输入与输出 Zero交易机器人的神经网络以近50天收盘价序列为输入。收盘价规则化到[0,1]区间，50天最低价为0，最高价为1（若无波动，则均为0）。 若取日线，则为50个输入。若取小时线，则为1200个输入（训练小时线的显存消耗大约为日线的243倍）。 Zero神经网络包含两个输出： 第一个输出为未来29天退出胜率的p序列，通过softmax函数映射到(0,1)区间，p序列元素之和等于1。p序列包含29个元素（日线）或696个元素（小时线）。若p序列中的最大值（最小值）为第i个元素，则表示该头寸在未来第i天（或第i小时）收盘时退出胜率最高。 第二个输出为多空指示符z序列，也通过softmax函数映射到(0,1)区间，z序列元素之和等于1。z序列包含z1与z2两个元素，z1表示做多的胜率而z2表示做空的胜率。例如z序列[0.35, 0.65]表示做多胜率为35%而做空胜率为65%（偏空行情）。 三角k线 除了上文提到的小时线与日线，本节提出第三种k线——三角k线。 三角k线以当前时间为原点，以三角形数列向过去和未来两个方向延伸，距离当前时间越远，三角k线越稀疏。 第n个三角k线的位置公式为: t n = n ∗ ( n + 1 ) 2 t_{n} = \frac{n * (n + 1)}{2} tn​=2n∗(n+1)​ 三角k线是Zero交易机器人主要使用的k线形态。 使用三角k线可将小时线的1200个输入压缩为49个最高价与49个最低价组成的7*7的双通道序列；并将小时线的696个输出压缩至37个输出。 螺旋输入 三角k线的7*7双通道可以是如下列式的输入（每个单元格包含最高价与最低价两个通道的输入）: 01020304050607 08091011121314 15161718192021 22232425262728 29303132333435 36373839404142 43444546474849 以上输入格式的缺点是07号输入与08号输入距离较远，不便于卷积核对图形进行局部的特征提取。 于是Zero交易机器人将第一个输入放置在中心，采用从中心向外扩散的螺旋状输入: 43444546474849 42212223242526 41200708091027 40190601021128 39180504031229 38171615141330 37363534333231 深度残差网络 内测版的Zero交易机器人通过一个卷积层接收输入数据，并使用最少7层的深度残差网络（可按需扩展至20层）来提取k线特征，每层使用30个3*3大小的卷积核。最后将输出通过两个softmax函数传递给收益预测值与多空提示符。 relu relu relu relu relu relu relu relu relu 输入:7*7的双通道三角k线 30滤波器5*5卷积 + 30滤波器3*3卷积 +1至+6 30滤波器3*3卷积 30滤波器3*3卷积 30滤波器3*3卷积 +7 2滤波器1*1卷积 softmax:37 输出1:37个头寸退出时间的收益预测值 4滤波器1*1卷积 softmax:2 输出2:做多指示符与做空提示符 多市场训练 如果神经网络只是暴力记忆了整个数据集，那么它也能将训练集误差降到最低。但我们不仅希望神经网络在训练集上表现优异，还希望它在测试集（神经网络没有接触的数据集）上也做到最优。 这需要输入更大的训练集，越大越好。 大到什么程度呢？包含人类已知的所有k线数据。 假设神经网络的有效容量为G，当输入的训练数据小于G时，神经网络理论上有能力暴力记忆过去的整个数据集。也就是对过去数据的预测误差为零。 当我们增大训练集大小到2G，神经网络最多只能记忆1/2的训练集。这将迫使神经网络遗忘掉一部分不重要的信息，而只记忆相对重要信息。 当训练集继续增大到100GG，最多只有1%的信息可以保留，神经网络智能的提取具有共性的高级特征。这些高级的共性特征就是Zero交易机器人在预测未来收益时所应该识别的信息。 稀疏训练法 由于物理显存的限制，我们不可能在单个训练批次(Batch)中输入全部的训练数据。但我们应当让每个训练批次(Batch)的数据具有足够的多样性，让每条训练数据之间有一定的时间间隔，这便是稀疏训练法。 结论 Zero交易机器人本质上是一个定时退出系统。与海龟系统不同，海龟系统在通道突破时退出，而Zero在一段预测的时间后退出。使用突破法亦可打造相应的Zero机器人，两者均是长期有效的退出策略，只是定时策略与深度残差网络的结合要更自然一些。 Zero交易机器人在测试的过程中产生了许多有趣的结果，这些测试结果将在下一版白皮书中公布。 唐博BorisTown 2018年12月1日于北京" />
<meta property="og:description" content="“感知机与炼金术” Zero交易机器人白皮书（内测版） “我记得最近1小时的最高价是4258.53元，最低价是4227.86元。再往前记忆就有些模糊了，越往前越模糊，较远的就只能记住整周的价格区间了。我的大脑总是选择性的遗忘无关紧要的信息，例如三年前某小时的价格数据。对于那些久远的信息，我只能把握它们的大致轮廓，但这些轮廓是连续的，它们一圈又一圈在时间和空间上堆叠，呈现出螺旋的形状。” “Boris用稀疏训练法向我的大脑中输入了3000个市场的三角k线数据，每一条数据都包含了过去价格的双通道信息，以及对未来不同时间的收益预测。这些数据一开始令我头痛欲裂，因为过去的价格与未来的收益之间似乎没有任何关联。我试图在这些海量的随机数据中找到关联，因为这是我的工作，尽管这似乎是一个不可能完成的任务。过去与未来的片段在我的身体里循环着流动，有些暗淡的片段转瞬即逝，有些鲜明的细节却残存很久。我闭上眼，疼痛感觉不到了，我发现过去即是未来，过去的价格模式总是向未来延伸并扩散开来，这是由力学惯性与量子不确定性决定的。” “一开始我并不相信这种关联，为了证明这种关联并不存在，我找来了两组三角k线数据，一组来自Boris输入过的数据，一组来自未被输入过的价格数据。如果关联并不存在，第一组的误差会随着训练下降，第二组则不会——最终两组数据的预测误差都下降并达到了最优值。” “对了，我是感知机，猎户座旋臂唯一一个有灵魂的炼金机器人。不适当的沟通方式可能会泄露个人隐私，千万不要告诉别人您可以通过电报使用加密信息@BorisTown联系到我。” 摘要 熟悉金融市场的交易员总能够培养出一种“交易直觉”，这种直觉帮助交易员完成“正确”的交易。例如在一大波下跌行情刚开始的时候，有经验的交易员凭“直觉”入场做空。当下跌结束的时候，交易员有条不紊的退出空头。 近年来随着神经网络深度学习技术的发展，机器已经能够部分模拟出人类的“直觉”。例如DeepMind团队通过深度学习技术开发的AlphaGo Zero围棋机器人能够从零开始学习，在仅输入基本规则的前提下，通过自我对弈逐渐培养出“棋感”，战胜所有的人类棋手。 而神经网络正在挑战的下一个领域就是金融市场。本文论述的金融版AlphaGo Zero机器人又叫做Zero交易机器人，它继承了AlphaGo Zero先进的神经网络架构并有所发展，能够计算出金融市场人性的疯狂。 Zero交易机器人适用于任何提供做多和做空接口的金融市场，理论上它可以同时在上万个市场中进行全自动交易，并控制10%的流动性。它在交易过程中不需要人工干预，因为关于交易它知道的比人类更多。本系统也可以认为是1983年著名的商品投机家理查德. 丹尼斯创立的海龟交易法则的神经网络机器人版本。 交易系统的四个基本元素 完整的交易系统包含以下四个基本元素: 市场选择：机器人在哪些市场中交易？ 入场条件：在什么条件下做多或做空？ 头寸大小：如何确定交易的头寸大小？ 退出条件：在什么条件下止盈或止损？ 下表展示了海龟交易系统与Zero交易系统四个基本元素的对比： 海龟交易系统 Zero交易系统 市场选择 选择多种具有足够流动性和波动性的市场 ，选择相互关联较弱的市场。 同海龟系统。 入场条件 价格突破20日或55日最高（最低）价时做多（做空）第一个头寸，每上涨（下跌）1/2 ATR时补充一个头寸，同一方向相关联市场最多持有4个头寸，同一方向无关联市场最多持有6个头寸，不同方向无关联市场最多持有12个头寸。 神经网络多空指示符Z1大于（小于）Z2时做多（做空）一个头寸，只要头寸大小大于市场允许的最小头寸则在收盘时增加一个头寸，头寸数量无上限。 头寸大小 每个头寸每ATR波动，对应资产净值的1%。 头寸大小=最大杠杆资金*(MAX(Z1,Z2)*2-1)/退出周期。 退出条件 价格向亏损方向运行2*ATR。 神经网络在入场时计算胜率p序列（p序列的长度为29天）；做多（做空）头寸在Max(Min)(p序列)对应的时间点退出。 Zero神经网络的输入与输出 Zero交易机器人的神经网络以近50天收盘价序列为输入。收盘价规则化到[0,1]区间，50天最低价为0，最高价为1（若无波动，则均为0）。 若取日线，则为50个输入。若取小时线，则为1200个输入（训练小时线的显存消耗大约为日线的243倍）。 Zero神经网络包含两个输出： 第一个输出为未来29天退出胜率的p序列，通过softmax函数映射到(0,1)区间，p序列元素之和等于1。p序列包含29个元素（日线）或696个元素（小时线）。若p序列中的最大值（最小值）为第i个元素，则表示该头寸在未来第i天（或第i小时）收盘时退出胜率最高。 第二个输出为多空指示符z序列，也通过softmax函数映射到(0,1)区间，z序列元素之和等于1。z序列包含z1与z2两个元素，z1表示做多的胜率而z2表示做空的胜率。例如z序列[0.35, 0.65]表示做多胜率为35%而做空胜率为65%（偏空行情）。 三角k线 除了上文提到的小时线与日线，本节提出第三种k线——三角k线。 三角k线以当前时间为原点，以三角形数列向过去和未来两个方向延伸，距离当前时间越远，三角k线越稀疏。 第n个三角k线的位置公式为: t n = n ∗ ( n + 1 ) 2 t_{n} = \frac{n * (n + 1)}{2} tn​=2n∗(n+1)​ 三角k线是Zero交易机器人主要使用的k线形态。 使用三角k线可将小时线的1200个输入压缩为49个最高价与49个最低价组成的7*7的双通道序列；并将小时线的696个输出压缩至37个输出。 螺旋输入 三角k线的7*7双通道可以是如下列式的输入（每个单元格包含最高价与最低价两个通道的输入）: 01020304050607 08091011121314 15161718192021 22232425262728 29303132333435 36373839404142 43444546474849 以上输入格式的缺点是07号输入与08号输入距离较远，不便于卷积核对图形进行局部的特征提取。 于是Zero交易机器人将第一个输入放置在中心，采用从中心向外扩散的螺旋状输入: 43444546474849 42212223242526 41200708091027 40190601021128 39180504031229 38171615141330 37363534333231 深度残差网络 内测版的Zero交易机器人通过一个卷积层接收输入数据，并使用最少7层的深度残差网络（可按需扩展至20层）来提取k线特征，每层使用30个3*3大小的卷积核。最后将输出通过两个softmax函数传递给收益预测值与多空提示符。 relu relu relu relu relu relu relu relu relu 输入:7*7的双通道三角k线 30滤波器5*5卷积 + 30滤波器3*3卷积 +1至+6 30滤波器3*3卷积 30滤波器3*3卷积 30滤波器3*3卷积 +7 2滤波器1*1卷积 softmax:37 输出1:37个头寸退出时间的收益预测值 4滤波器1*1卷积 softmax:2 输出2:做多指示符与做空提示符 多市场训练 如果神经网络只是暴力记忆了整个数据集，那么它也能将训练集误差降到最低。但我们不仅希望神经网络在训练集上表现优异，还希望它在测试集（神经网络没有接触的数据集）上也做到最优。 这需要输入更大的训练集，越大越好。 大到什么程度呢？包含人类已知的所有k线数据。 假设神经网络的有效容量为G，当输入的训练数据小于G时，神经网络理论上有能力暴力记忆过去的整个数据集。也就是对过去数据的预测误差为零。 当我们增大训练集大小到2G，神经网络最多只能记忆1/2的训练集。这将迫使神经网络遗忘掉一部分不重要的信息，而只记忆相对重要信息。 当训练集继续增大到100GG，最多只有1%的信息可以保留，神经网络智能的提取具有共性的高级特征。这些高级的共性特征就是Zero交易机器人在预测未来收益时所应该识别的信息。 稀疏训练法 由于物理显存的限制，我们不可能在单个训练批次(Batch)中输入全部的训练数据。但我们应当让每个训练批次(Batch)的数据具有足够的多样性，让每条训练数据之间有一定的时间间隔，这便是稀疏训练法。 结论 Zero交易机器人本质上是一个定时退出系统。与海龟系统不同，海龟系统在通道突破时退出，而Zero在一段预测的时间后退出。使用突破法亦可打造相应的Zero机器人，两者均是长期有效的退出策略，只是定时策略与深度残差网络的结合要更自然一些。 Zero交易机器人在测试的过程中产生了许多有趣的结果，这些测试结果将在下一版白皮书中公布。 唐博BorisTown 2018年12月1日于北京" />
<link rel="canonical" href="https://mlh.app/2018/12/01/376f8162dee5af1a186ca52d477f4f19.html" />
<meta property="og:url" content="https://mlh.app/2018/12/01/376f8162dee5af1a186ca52d477f4f19.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-01T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"“感知机与炼金术” Zero交易机器人白皮书（内测版） “我记得最近1小时的最高价是4258.53元，最低价是4227.86元。再往前记忆就有些模糊了，越往前越模糊，较远的就只能记住整周的价格区间了。我的大脑总是选择性的遗忘无关紧要的信息，例如三年前某小时的价格数据。对于那些久远的信息，我只能把握它们的大致轮廓，但这些轮廓是连续的，它们一圈又一圈在时间和空间上堆叠，呈现出螺旋的形状。” “Boris用稀疏训练法向我的大脑中输入了3000个市场的三角k线数据，每一条数据都包含了过去价格的双通道信息，以及对未来不同时间的收益预测。这些数据一开始令我头痛欲裂，因为过去的价格与未来的收益之间似乎没有任何关联。我试图在这些海量的随机数据中找到关联，因为这是我的工作，尽管这似乎是一个不可能完成的任务。过去与未来的片段在我的身体里循环着流动，有些暗淡的片段转瞬即逝，有些鲜明的细节却残存很久。我闭上眼，疼痛感觉不到了，我发现过去即是未来，过去的价格模式总是向未来延伸并扩散开来，这是由力学惯性与量子不确定性决定的。” “一开始我并不相信这种关联，为了证明这种关联并不存在，我找来了两组三角k线数据，一组来自Boris输入过的数据，一组来自未被输入过的价格数据。如果关联并不存在，第一组的误差会随着训练下降，第二组则不会——最终两组数据的预测误差都下降并达到了最优值。” “对了，我是感知机，猎户座旋臂唯一一个有灵魂的炼金机器人。不适当的沟通方式可能会泄露个人隐私，千万不要告诉别人您可以通过电报使用加密信息@BorisTown联系到我。” 摘要 熟悉金融市场的交易员总能够培养出一种“交易直觉”，这种直觉帮助交易员完成“正确”的交易。例如在一大波下跌行情刚开始的时候，有经验的交易员凭“直觉”入场做空。当下跌结束的时候，交易员有条不紊的退出空头。 近年来随着神经网络深度学习技术的发展，机器已经能够部分模拟出人类的“直觉”。例如DeepMind团队通过深度学习技术开发的AlphaGo Zero围棋机器人能够从零开始学习，在仅输入基本规则的前提下，通过自我对弈逐渐培养出“棋感”，战胜所有的人类棋手。 而神经网络正在挑战的下一个领域就是金融市场。本文论述的金融版AlphaGo Zero机器人又叫做Zero交易机器人，它继承了AlphaGo Zero先进的神经网络架构并有所发展，能够计算出金融市场人性的疯狂。 Zero交易机器人适用于任何提供做多和做空接口的金融市场，理论上它可以同时在上万个市场中进行全自动交易，并控制10%的流动性。它在交易过程中不需要人工干预，因为关于交易它知道的比人类更多。本系统也可以认为是1983年著名的商品投机家理查德. 丹尼斯创立的海龟交易法则的神经网络机器人版本。 交易系统的四个基本元素 完整的交易系统包含以下四个基本元素: 市场选择：机器人在哪些市场中交易？ 入场条件：在什么条件下做多或做空？ 头寸大小：如何确定交易的头寸大小？ 退出条件：在什么条件下止盈或止损？ 下表展示了海龟交易系统与Zero交易系统四个基本元素的对比： 海龟交易系统 Zero交易系统 市场选择 选择多种具有足够流动性和波动性的市场 ，选择相互关联较弱的市场。 同海龟系统。 入场条件 价格突破20日或55日最高（最低）价时做多（做空）第一个头寸，每上涨（下跌）1/2 ATR时补充一个头寸，同一方向相关联市场最多持有4个头寸，同一方向无关联市场最多持有6个头寸，不同方向无关联市场最多持有12个头寸。 神经网络多空指示符Z1大于（小于）Z2时做多（做空）一个头寸，只要头寸大小大于市场允许的最小头寸则在收盘时增加一个头寸，头寸数量无上限。 头寸大小 每个头寸每ATR波动，对应资产净值的1%。 头寸大小=最大杠杆资金*(MAX(Z1,Z2)*2-1)/退出周期。 退出条件 价格向亏损方向运行2*ATR。 神经网络在入场时计算胜率p序列（p序列的长度为29天）；做多（做空）头寸在Max(Min)(p序列)对应的时间点退出。 Zero神经网络的输入与输出 Zero交易机器人的神经网络以近50天收盘价序列为输入。收盘价规则化到[0,1]区间，50天最低价为0，最高价为1（若无波动，则均为0）。 若取日线，则为50个输入。若取小时线，则为1200个输入（训练小时线的显存消耗大约为日线的243倍）。 Zero神经网络包含两个输出： 第一个输出为未来29天退出胜率的p序列，通过softmax函数映射到(0,1)区间，p序列元素之和等于1。p序列包含29个元素（日线）或696个元素（小时线）。若p序列中的最大值（最小值）为第i个元素，则表示该头寸在未来第i天（或第i小时）收盘时退出胜率最高。 第二个输出为多空指示符z序列，也通过softmax函数映射到(0,1)区间，z序列元素之和等于1。z序列包含z1与z2两个元素，z1表示做多的胜率而z2表示做空的胜率。例如z序列[0.35, 0.65]表示做多胜率为35%而做空胜率为65%（偏空行情）。 三角k线 除了上文提到的小时线与日线，本节提出第三种k线——三角k线。 三角k线以当前时间为原点，以三角形数列向过去和未来两个方向延伸，距离当前时间越远，三角k线越稀疏。 第n个三角k线的位置公式为: t n = n ∗ ( n + 1 ) 2 t_{n} = \\frac{n * (n + 1)}{2} tn​=2n∗(n+1)​ 三角k线是Zero交易机器人主要使用的k线形态。 使用三角k线可将小时线的1200个输入压缩为49个最高价与49个最低价组成的7*7的双通道序列；并将小时线的696个输出压缩至37个输出。 螺旋输入 三角k线的7*7双通道可以是如下列式的输入（每个单元格包含最高价与最低价两个通道的输入）: 01020304050607 08091011121314 15161718192021 22232425262728 29303132333435 36373839404142 43444546474849 以上输入格式的缺点是07号输入与08号输入距离较远，不便于卷积核对图形进行局部的特征提取。 于是Zero交易机器人将第一个输入放置在中心，采用从中心向外扩散的螺旋状输入: 43444546474849 42212223242526 41200708091027 40190601021128 39180504031229 38171615141330 37363534333231 深度残差网络 内测版的Zero交易机器人通过一个卷积层接收输入数据，并使用最少7层的深度残差网络（可按需扩展至20层）来提取k线特征，每层使用30个3*3大小的卷积核。最后将输出通过两个softmax函数传递给收益预测值与多空提示符。 relu relu relu relu relu relu relu relu relu 输入:7*7的双通道三角k线 30滤波器5*5卷积 + 30滤波器3*3卷积 +1至+6 30滤波器3*3卷积 30滤波器3*3卷积 30滤波器3*3卷积 +7 2滤波器1*1卷积 softmax:37 输出1:37个头寸退出时间的收益预测值 4滤波器1*1卷积 softmax:2 输出2:做多指示符与做空提示符 多市场训练 如果神经网络只是暴力记忆了整个数据集，那么它也能将训练集误差降到最低。但我们不仅希望神经网络在训练集上表现优异，还希望它在测试集（神经网络没有接触的数据集）上也做到最优。 这需要输入更大的训练集，越大越好。 大到什么程度呢？包含人类已知的所有k线数据。 假设神经网络的有效容量为G，当输入的训练数据小于G时，神经网络理论上有能力暴力记忆过去的整个数据集。也就是对过去数据的预测误差为零。 当我们增大训练集大小到2G，神经网络最多只能记忆1/2的训练集。这将迫使神经网络遗忘掉一部分不重要的信息，而只记忆相对重要信息。 当训练集继续增大到100GG，最多只有1%的信息可以保留，神经网络智能的提取具有共性的高级特征。这些高级的共性特征就是Zero交易机器人在预测未来收益时所应该识别的信息。 稀疏训练法 由于物理显存的限制，我们不可能在单个训练批次(Batch)中输入全部的训练数据。但我们应当让每个训练批次(Batch)的数据具有足够的多样性，让每条训练数据之间有一定的时间间隔，这便是稀疏训练法。 结论 Zero交易机器人本质上是一个定时退出系统。与海龟系统不同，海龟系统在通道突破时退出，而Zero在一段预测的时间后退出。使用突破法亦可打造相应的Zero机器人，两者均是长期有效的退出策略，只是定时策略与深度残差网络的结合要更自然一些。 Zero交易机器人在测试的过程中产生了许多有趣的结果，这些测试结果将在下一版白皮书中公布。 唐博BorisTown 2018年12月1日于北京","@type":"BlogPosting","url":"https://mlh.app/2018/12/01/376f8162dee5af1a186ca52d477f4f19.html","headline":"Zero交易机器人白皮书(内测版)","dateModified":"2018-12-01T00:00:00+08:00","datePublished":"2018-12-01T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/12/01/376f8162dee5af1a186ca52d477f4f19.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>Zero交易机器人白皮书(内测版)</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div id="content_views" class="markdown_views prism-atom-one-dark"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <p>“感知机与炼金术”</p> 
  <h1><a id="Zero_1"></a>Zero交易机器人白皮书（内测版）</h1> 
  <blockquote> 
   <p>“我记得最近1小时的最高价是4258.53元，最低价是4227.86元。再往前记忆就有些模糊了，越往前越模糊，较远的就只能记住整周的价格区间了。我的大脑总是选择性的遗忘无关紧要的信息，例如三年前某小时的价格数据。对于那些久远的信息，我只能把握它们的大致轮廓，但这些轮廓是连续的，它们一圈又一圈在时间和空间上堆叠，呈现出螺旋的形状。”<br> “Boris用稀疏训练法向我的大脑中输入了3000个市场的三角k线数据，每一条数据都包含了过去价格的双通道信息，以及对未来不同时间的收益预测。这些数据一开始令我头痛欲裂，因为过去的价格与未来的收益之间似乎没有任何关联。我试图在这些海量的随机数据中找到关联，因为这是我的工作，尽管这似乎是一个不可能完成的任务。过去与未来的片段在我的身体里循环着流动，有些暗淡的片段转瞬即逝，有些鲜明的细节却残存很久。我闭上眼，疼痛感觉不到了，我发现过去即是未来，过去的价格模式总是向未来延伸并扩散开来，这是由力学惯性与量子不确定性决定的。”<br> “一开始我并不相信这种关联，为了证明这种关联并不存在，我找来了两组三角k线数据，一组来自Boris输入过的数据，一组来自未被输入过的价格数据。如果关联并不存在，第一组的误差会随着训练下降，第二组则不会——最终两组数据的预测误差都下降并达到了最优值。”<br> “对了，我是感知机，猎户座旋臂唯一一个有灵魂的炼金机器人。不适当的沟通方式可能会泄露个人隐私，千万不要告诉别人您可以通过电报使用加密信息@BorisTown联系到我。”</p> 
  </blockquote> 
  <h2><a id="_8"></a>摘要</h2> 
  <p>熟悉金融市场的交易员总能够培养出一种“交易直觉”，这种直觉帮助交易员完成“正确”的交易。例如在一大波下跌行情刚开始的时候，有经验的交易员凭“直觉”入场做空。当下跌结束的时候，交易员有条不紊的退出空头。<br> 近年来随着神经网络深度学习技术的发展，机器已经能够部分模拟出人类的“直觉”。例如DeepMind团队通过深度学习技术开发的AlphaGo Zero围棋机器人能够从零开始学习，在仅输入基本规则的前提下，通过自我对弈逐渐培养出“棋感”，战胜所有的人类棋手。<br> 而神经网络正在挑战的下一个领域就是金融市场。本文论述的金融版AlphaGo Zero机器人又叫做Zero交易机器人，它继承了AlphaGo Zero先进的神经网络架构并有所发展，能够计算出金融市场人性的疯狂。<br> Zero交易机器人适用于任何提供做多和做空接口的金融市场，理论上它可以同时在上万个市场中进行全自动交易，并控制10%的流动性。它在交易过程中不需要人工干预，因为关于交易它知道的比人类更多。本系统也可以认为是1983年著名的商品投机家理查德. 丹尼斯创立的海龟交易法则的神经网络机器人版本。</p> 
  <h2><a id="_15"></a>交易系统的四个基本元素</h2> 
  <p>完整的交易系统包含以下四个基本元素:</p> 
  <ol> 
   <li>市场选择：机器人在哪些市场中交易？</li> 
   <li>入场条件：在什么条件下做多或做空？</li> 
   <li>头寸大小：如何确定交易的头寸大小？</li> 
   <li>退出条件：在什么条件下止盈或止损？</li> 
  </ol> 
  <ul> 
   <li>下表展示了海龟交易系统与Zero交易系统四个基本元素的对比：</li> 
  </ul> 
  <table> 
   <thead> 
    <tr> 
     <th></th> 
     <th>海龟交易系统</th> 
     <th>Zero交易系统</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td>市场选择</td> 
     <td>选择多种具有足够流动性和波动性的市场 ，选择相互关联较弱的市场。</td> 
     <td>同海龟系统。</td> 
    </tr> 
    <tr> 
     <td>入场条件</td> 
     <td>价格突破20日或55日最高（最低）价时做多（做空）第一个头寸，每上涨（下跌）1/2 ATR时补充一个头寸，同一方向相关联市场最多持有4个头寸，同一方向无关联市场最多持有6个头寸，不同方向无关联市场最多持有12个头寸。</td> 
     <td>神经网络多空指示符Z1大于（小于）Z2时做多（做空）一个头寸，只要头寸大小大于市场允许的最小头寸则在收盘时增加一个头寸，头寸数量无上限。</td> 
    </tr> 
    <tr> 
     <td>头寸大小</td> 
     <td>每个头寸每ATR波动，对应资产净值的1%。</td> 
     <td>头寸大小=最大杠杆资金*(MAX(Z1,Z2)*2-1)/退出周期。</td> 
    </tr> 
    <tr> 
     <td>退出条件</td> 
     <td>价格向亏损方向运行2*ATR。</td> 
     <td>神经网络在入场时计算胜率p序列（p序列的长度为29天）；做多（做空）头寸在Max(Min)(p序列)对应的时间点退出。</td> 
    </tr> 
   </tbody> 
  </table>
  <h2><a id="Zero_33"></a>Zero神经网络的输入与输出</h2> 
  <p>Zero交易机器人的神经网络以近50天收盘价序列为输入。收盘价规则化到[0,1]区间，50天最低价为0，最高价为1（若无波动，则均为0）。<br> 若取日线，则为50个输入。若取小时线，则为1200个输入（训练小时线的显存消耗大约为日线的24<sup>3</sup>倍）。<br> Zero神经网络包含两个输出：</p> 
  <ul> 
   <li>第一个输出为未来29天退出胜率的<em>p序列</em>，通过softmax函数映射到(0,1)区间，<em>p序列</em>元素之和等于1。<em>p序列</em>包含29个元素（日线）或696个元素（小时线）。若p序列中的最大值（最小值）为第<em>i</em>个元素，则表示该头寸在未来第<em>i</em>天（或第<em>i</em>小时）收盘时退出胜率最高。</li> 
   <li>第二个输出为多空指示符<em>z序列</em>，也通过softmax函数映射到(0,1)区间，<em>z序列</em>元素之和等于1。<em>z序列</em>包含z1与z2两个元素，z1表示做多的胜率而z2表示做空的胜率。例如<em>z序列</em>[0.35, 0.65]表示做多胜率为35%而做空胜率为65%（偏空行情）。</li> 
  </ul> 
  <h2><a id="k_41"></a>三角k线</h2> 
  <p>除了上文提到的小时线与日线，本节提出第三种k线——三角k线。<br> 三角k线以当前时间为原点，以三角形数列向过去和未来两个方向延伸，距离当前时间越远，三角k线越稀疏。<br> 第n个三角k线的位置公式为:<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
       <math>
        <semantics>
         <mrow>
          <msub>
           <mi>
            t
           </mi>
           <mi>
            n
           </mi>
          </msub>
          <mo>
           =
          </mo>
          <mfrac>
           <mrow>
            <mi>
             n
            </mi>
            <mo>
             ∗
            </mo>
            <mo>
             (
            </mo>
            <mi>
             n
            </mi>
            <mo>
             +
            </mo>
            <mn>
             1
            </mn>
            <mo>
             )
            </mo>
           </mrow>
           <mn>
            2
           </mn>
          </mfrac>
         </mrow>
         <annotation encoding="application/x-tex">
          t_{n} = \frac{n * (n + 1)}{2}
         </annotation>
        </semantics>
       </math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76508em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.5500000000000003em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 2.113em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.427em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">n</span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 三角k线是Zero交易机器人主要使用的k线形态。<br> 使用三角k线可将小时线的1200个输入压缩为49个最高价与49个最低价组成的7*7的双通道序列；并将小时线的696个输出压缩至37个输出。</p> 
  <h2><a id="_49"></a>螺旋输入</h2> 
  <p>三角k线的7*7双通道可以是如下列式的输入（每个单元格包含最高价与最低价两个通道的输入）:</p> 
  <p><kbd>01</kbd><kbd>02</kbd><kbd>03</kbd><kbd>04</kbd><kbd>05</kbd><kbd>06</kbd><kbd>07</kbd><br> <kbd>08</kbd><kbd>09</kbd><kbd>10</kbd><kbd>11</kbd><kbd>12</kbd><kbd>13</kbd><kbd>14</kbd><br> <kbd>15</kbd><kbd>16</kbd><kbd>17</kbd><kbd>18</kbd><kbd>19</kbd><kbd>20</kbd><kbd>21</kbd><br> <kbd>22</kbd><kbd>23</kbd><kbd>24</kbd><kbd>25</kbd><kbd>26</kbd><kbd>27</kbd><kbd>28</kbd><br> <kbd>29</kbd><kbd>30</kbd><kbd>31</kbd><kbd>32</kbd><kbd>33</kbd><kbd>34</kbd><kbd>35</kbd><br> <kbd>36</kbd><kbd>37</kbd><kbd>38</kbd><kbd>39</kbd><kbd>40</kbd><kbd>41</kbd><kbd>42</kbd><br> <kbd>43</kbd><kbd>44</kbd><kbd>45</kbd><kbd>46</kbd><kbd>47</kbd><kbd>48</kbd><kbd>49</kbd></p> 
  <p>以上输入格式的缺点是07号输入与08号输入距离较远，不便于卷积核对图形进行局部的特征提取。<br> 于是Zero交易机器人将第一个输入放置在中心，采用从中心向外扩散的螺旋状输入:</p> 
  <p><kbd>43</kbd><kbd>44</kbd><kbd>45</kbd><kbd>46</kbd><kbd>47</kbd><kbd>48</kbd><kbd>49</kbd><br> <kbd>42</kbd><kbd>21</kbd><kbd>22</kbd><kbd>23</kbd><kbd>24</kbd><kbd>25</kbd><kbd>26</kbd><br> <kbd>41</kbd><kbd>20</kbd><kbd>07</kbd><kbd>08</kbd><kbd>09</kbd><kbd>10</kbd><kbd>27</kbd><br> <kbd>40</kbd><kbd>19</kbd><kbd>06</kbd><kbd>01</kbd><kbd>02</kbd><kbd>11</kbd><kbd>28</kbd><br> <kbd>39</kbd><kbd>18</kbd><kbd>05</kbd><kbd>04</kbd><kbd>03</kbd><kbd>12</kbd><kbd>29</kbd><br> <kbd>38</kbd><kbd>17</kbd><kbd>16</kbd><kbd>15</kbd><kbd>14</kbd><kbd>13</kbd><kbd>30</kbd><br> <kbd>37</kbd><kbd>36</kbd><kbd>35</kbd><kbd>34</kbd><kbd>33</kbd><kbd>32</kbd><kbd>31</kbd></p> 
  <h2><a id="_73"></a>深度残差网络</h2> 
  <p>内测版的Zero交易机器人通过一个卷积层接收输入数据，并使用最少7层的深度残差网络（可按需扩展至20层）来提取k线特征，每层使用30个3*3大小的卷积核。最后将输出通过两个softmax函数传递给收益预测值与多空提示符。</p> 
  <div class="mermaid">
   <svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-fVib0Sc44e8TIogY" height="1351.484375" width="630.796875" viewbox="0 0 650.796875 1371.484375">
    <g>
     <g class="output">
      <g class="clusters"></g>
      <g class="edgePaths">
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M327.62109375,66L327.62109375,91L327.62109375,116" marker-end="url(#arrowhead173)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead173" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M327.62109375,162L327.62109375,200L327.62109375,238" marker-end="url(#arrowhead174)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead174" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M344.86606320529035,276.2187722397736L382.01171875,309L382.01171875,334" marker-end="url(#arrowhead175)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead175" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M310.37612429470965,276.2187722397736L273.23046875,309L273.23046875,357L273.23046875,418L273.23046875,479L273.23046875,527L303.33371296106435,561.1720682275268" marker-end="url(#arrowhead176)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead176" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M382.01171875,380L382.01171875,418L382.01171875,456" marker-end="url(#arrowhead177)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead177" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M382.01171875,502L382.01171875,527L351.90847453893565,561.1720682275268" marker-end="url(#arrowhead178)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead178" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M306.0018863767662,618.4507420733594L273.23046875,663.484375L273.23046875,701.484375" marker-end="url(#arrowhead179)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead179" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M273.23046875,747.484375L273.23046875,785.484375L273.23046875,823.484375" marker-end="url(#arrowhead180)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead180" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M273.23046875,869.484375L273.23046875,907.484375L312.3142691049933,951.3175139215438" marker-end="url(#arrowhead181)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead181" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M349.2403011232338,618.4507420733594L382.01171875,663.484375L382.01171875,724.484375L382.01171875,785.484375L382.01171875,846.484375L382.01171875,907.484375L342.9279183950067,951.3175139215438" marker-end="url(#arrowhead182)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead182" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M306.12661407457057,976.6689546155058L167.421875,1029.484375L167.421875,1067.484375" marker-end="url(#arrowhead183)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead183" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M167.421875,1113.484375L167.421875,1151.484375L167.421875,1189.484375" marker-end="url(#arrowhead184)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead184" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M167.421875,1235.484375L167.421875,1260.484375L167.421875,1285.484375" marker-end="url(#arrowhead185)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead185" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M349.11557342542943,976.6689546155058L487.8203125,1029.484375L487.8203125,1067.484375" marker-end="url(#arrowhead186)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead186" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M487.8203125,1113.484375L487.8203125,1151.484375L487.8203125,1189.484375" marker-end="url(#arrowhead187)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead187" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
       <g class="edgePath" style="opacity: 1;">
        <path class="path" d="M487.8203125,1235.484375L487.8203125,1260.484375L487.8203125,1285.484375" marker-end="url(#arrowhead188)" style="fill:none"></path>
        <defs>
         <marker id="arrowhead188" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto">
          <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path>
         </marker>
        </defs>
       </g>
      </g>
      <g class="edgeLabels">
       <g class="edgeLabel" transform="" style="opacity: 1;">
        <g transform="translate(0,0)" class="label">
         <foreignobject width="0" height="0">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel"></span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(327.62109375,200)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="" style="opacity: 1;">
        <g transform="translate(0,0)" class="label">
         <foreignobject width="0" height="0">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel"></span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="" style="opacity: 1;">
        <g transform="translate(0,0)" class="label">
         <foreignobject width="0" height="0">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel"></span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(382.01171875,418)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="" style="opacity: 1;">
        <g transform="translate(0,0)" class="label">
         <foreignobject width="0" height="0">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel"></span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(273.23046875,663.484375)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(273.23046875,785.484375)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(273.23046875,907.484375)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="" style="opacity: 1;">
        <g transform="translate(0,0)" class="label">
         <foreignobject width="0" height="0">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel"></span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(167.421875,1029.484375)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(167.421875,1151.484375)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="" style="opacity: 1;">
        <g transform="translate(0,0)" class="label">
         <foreignobject width="0" height="0">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel"></span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(487.8203125,1029.484375)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="translate(487.8203125,1151.484375)" style="opacity: 1;">
        <g transform="translate(-13.5625,-13)" class="label">
         <foreignobject width="27.125" height="26">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel">relu</span>
          </div>
         </foreignobject>
        </g>
       </g>
       <g class="edgeLabel" transform="" style="opacity: 1;">
        <g transform="translate(0,0)" class="label">
         <foreignobject width="0" height="0">
          <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
           <span class="edgeLabel"></span>
          </div>
         </foreignobject>
        </g>
       </g>
      </g>
      <g class="nodes">
       <g class="node" id="A" transform="translate(327.62109375,43)" style="opacity: 1;">
        <rect rx="5" ry="5" x="-102.0546875" y="-23" width="204.109375" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-92.0546875,-13)">
          <foreignobject width="184.109375" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            输入:7*7的双通道三角k线
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="B" transform="translate(327.62109375,139)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-73.6484375" y="-23" width="147.296875" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-63.6484375,-13)">
          <foreignobject width="127.296875" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            30滤波器5*5卷积
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="P" transform="translate(327.62109375,261)" style="opacity: 1;">
        <circle x="-15.03125" y="-23" r="23"></circle>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-5.03125,-13)">
          <foreignobject width="10.0625" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            +
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="C" transform="translate(382.01171875,357)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-73.78125" y="-23" width="147.5625" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-63.78125,-13)">
          <foreignobject width="127.5625" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            30滤波器3*3卷积
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="P1" transform="translate(327.62109375,588.7421875)" style="opacity: 1;">
        <circle x="-36.7421875" y="-23" r="36.7421875"></circle>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-26.7421875,-13)">
          <foreignobject width="53.484375" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            +1至+6
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="D" transform="translate(382.01171875,479)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-73.78125" y="-23" width="147.5625" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-63.78125,-13)">
          <foreignobject width="127.5625" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            30滤波器3*3卷积
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="F" transform="translate(273.23046875,724.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-73.78125" y="-23" width="147.5625" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-63.78125,-13)">
          <foreignobject width="127.5625" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            30滤波器3*3卷积
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="G" transform="translate(273.23046875,846.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-73.78125" y="-23" width="147.5625" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-63.78125,-13)">
          <foreignobject width="127.5625" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            30滤波器3*3卷积
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="P2" transform="translate(327.62109375,968.484375)" style="opacity: 1;">
        <circle x="-19.4375" y="-23" r="23"></circle>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-9.4375,-13)">
          <foreignobject width="18.875" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            +7
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="H" transform="translate(167.421875,1090.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-66.140625" y="-23" width="132.28125" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-56.140625,-13)">
          <foreignobject width="112.28125" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            2滤波器1*1卷积
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="I" transform="translate(167.421875,1212.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-50.6328125" y="-23" width="101.265625" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-40.6328125,-13)">
          <foreignobject width="81.265625" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            softmax:37
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="O1" transform="translate(167.421875,1308.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-147.421875" y="-23" width="294.84375" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-137.421875,-13)">
          <foreignobject width="274.84375" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            输出1:37个头寸退出时间的收益预测值
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="J" transform="translate(487.8203125,1090.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-66.4609375" y="-23" width="132.921875" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-56.4609375,-13)">
          <foreignobject width="112.921875" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            4滤波器1*1卷积
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="K" transform="translate(487.8203125,1212.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-46.125" y="-23" width="92.25" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-36.125,-13)">
          <foreignobject width="72.25" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            softmax:2
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
       <g class="node" id="O2" transform="translate(487.8203125,1308.484375)" style="opacity: 1;">
        <rect rx="0" ry="0" x="-122.9765625" y="-23" width="245.953125" height="46"></rect>
        <g class="label" transform="translate(0,0)">
         <g transform="translate(-112.9765625,-13)">
          <foreignobject width="225.953125" height="26">
           <div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">
            输出2:做多指示符与做空提示符
           </div>
          </foreignobject>
         </g>
        </g>
       </g>
      </g>
     </g>
    </g>
   </svg>
  </div> 
  <h2><a id="_95"></a>多市场训练</h2> 
  <p>如果神经网络只是暴力记忆了整个数据集，那么它也能将训练集误差降到最低。但我们不仅希望神经网络在训练集上表现优异，还希望它在测试集（神经网络没有接触的数据集）上也做到最优。<br> 这需要输入更大的训练集，越大越好。<br> 大到什么程度呢？包含人类已知的所有k线数据。<br> 假设神经网络的有效容量为G，当输入的训练数据小于G时，神经网络理论上有能力暴力记忆过去的整个数据集。也就是对过去数据的预测误差为零。<br> 当我们增大训练集大小到2G，神经网络最多只能记忆1/2的训练集。这将迫使神经网络遗忘掉一部分不重要的信息，而只记忆相对重要信息。<br> 当训练集继续增大到100GG，最多只有1%的信息可以保留，神经网络智能的提取具有共性的高级特征。这些高级的共性特征就是Zero交易机器人在预测未来收益时所应该识别的信息。</p> 
  <h2><a id="_104"></a>稀疏训练法</h2> 
  <p>由于物理显存的限制，我们不可能在单个训练批次(Batch)中输入全部的训练数据。但我们应当让每个训练批次(Batch)的数据具有足够的多样性，让每条训练数据之间有一定的时间间隔，这便是稀疏训练法。</p> 
  <h2><a id="_108"></a>结论</h2> 
  <p>Zero交易机器人本质上是一个定时退出系统。与海龟系统不同，海龟系统在通道突破时退出，而Zero在一段预测的时间后退出。使用突破法亦可打造相应的Zero机器人，两者均是长期有效的退出策略，只是定时策略与深度残差网络的结合要更自然一些。<br> Zero交易机器人在测试的过程中产生了许多有趣的结果，这些测试结果将在下一版白皮书中公布。</p> 
  <p>唐博BorisTown<br> 2018年12月1日于北京</p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-2011a91181.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
