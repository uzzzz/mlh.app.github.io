<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>EOS实战（三）RPC接口（使用RPC的接口转账） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="EOS实战（三）RPC接口（使用RPC的接口转账）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1. 前言 前面我们使用cleos完成过转账的功能，这篇文章我们尝试使用RPC API的方式进行转账。在测试网络/主网络转账EOS，在测试网络转账代币。 官方文档：https://github.com/EOSBlock/EOS-Tutorials/blob/master/EN/transfer-tokens-using-RPC.md 2. 大致流程 使用RPC API转账的流程如下： abi_json_to_bin 将转账信息由json格式序列化为bin格式字符串 get_info 获取当前最新的区块编号 get_block 根据区块编号获取区块详情 get_required_keys(可省略) 传入当前拥有的公钥、bin字符串，区块等信息，筛选出签署交易需要的公钥 sign_transaction 传入上面获取的相关参数，通过钱包中私钥对交易进行签署 push_transaction 根据第五步获取的签名信息，将交易提交到区块链上 3. 详细流程 3.1 在测试网络转账EOS 3.1.1 查看余额 先查看两个交易账号的EOS余额： api http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance params {&quot;code&quot;:&quot;eosio.token&quot;, &quot;account&quot;:&quot;testnetyy111&quot;, &quot;symbol&quot;:&quot;eos&quot;} {&quot;code&quot;:&quot;eosio.token&quot;, &quot;account&quot;:&quot;testneths111&quot;, &quot;symbol&quot;:&quot;eos&quot;} return testnetyy111 [ &quot;9641.6587 EOS&quot; ] testneths111 [ &quot;0.0000 EOS&quot; ] 3.1.2 将交易信息由JSON格式序列化为BIN格式字符串 从testnetyy111转100 EOS给testneths111： api http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin params {&quot;code&quot;:&quot;eosio.token&quot;,&quot;action&quot;:&quot;transfer&quot;,&quot;args&quot;:{&quot;from&quot;:&quot;testnetyy111&quot;,&quot;to&quot;:&quot;testneths111&quot;,&quot;quantity&quot;:&quot;100.0000 EOS&quot;, &quot;memo&quot;:&quot;hi there&quot;}} return { &quot;binargs&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } 获取到binargs 3.1.3 获取当前最新的区块编号 api http://jungle.cryptolions.io:18888/v1/chain/get_info params 无 return { &quot;server_version&quot;: &quot;cc9decff&quot;, &quot;chain_id&quot;: &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot;, &quot;head_block_num&quot;: 13800828, &quot;last_irreversible_block_num&quot;: 13800496, &quot;last_irreversible_block_id&quot;: &quot;00d29430d9809c633ddf3cc5c01613b58105394502e9846515c87274765c6d05&quot;, &quot;head_block_id&quot;: &quot;00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b&quot;, &quot;head_block_time&quot;: &quot;2018-09-11T05:39:10.000&quot;, &quot;head_block_producer&quot;: &quot;lioninjungle&quot;, &quot;virtual_block_cpu_limit&quot;: 200000000, &quot;virtual_block_net_limit&quot;: 1048576000, &quot;block_cpu_limit&quot;: 199900, &quot;block_net_limit&quot;: 1048576, &quot;server_version_string&quot;: &quot;v1.2.4-dirty&quot; } 获取到head_block_num 3.1.4 根据区块编号获取区块详情 api http://jungle.cryptolions.io:18888/v1/chain/get_block params {&quot;block_num_or_id&quot;:&quot;13800828&quot;} return { &quot;timestamp&quot;: &quot;2018-09-11T05:39:10.000&quot;, &quot;producer&quot;: &quot;lioninjungle&quot;, &quot;confirmed&quot;: 0, &quot;previous&quot;: &quot;00d2957b0e343f2ffa7640591ac1f27ed0ac89d2869e0a9c0576f065a31ee1cc&quot;, &quot;transaction_mroot&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;action_mroot&quot;: &quot;22546c1e4c12d53a55c60d0ccb7196baa0afb05993612d2cf0591d7bf8fd8d34&quot;, &quot;schedule_version&quot;: 219, &quot;new_producers&quot;: null, &quot;header_extensions&quot;: [], &quot;producer_signature&quot;: &quot;SIG_K1_KXFvmHtXMnDhp8V7CpHuGoYch3whWorL2Fr7nArevzTmC2tXsKRXHCkHiF9myRpbbx3cTShba64jWveKATr49k3Bonp7aw&quot;, &quot;transactions&quot;: [], &quot;block_extensions&quot;: [], &quot;id&quot;: &quot;00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b&quot;, &quot;block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965 } 获取到timestamp 和ref_block_prefix 3.1.5 筛选出签署交易需要的公钥 钱包中可能有很多公钥存在，调用此方法可以筛选出完成此次交易需要的公钥。如果已明确应该使用的公钥，那可以省略此方法。 首先调用API打开并解锁钱包，然后获取所有的公钥。这部分内容在EOS开发(八)RPC API都有使用介绍。 参数说明： available_keys 钱包中的公钥 account 合约名称。这里是转账EOS，使用的是eosio.token actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 name 调用的合约方法。这里调用的是转账方法transfer expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix api http://jungle.cryptolions.io:18888/v1/chain/get_required_keys params { &quot;available_keys&quot;: [ &quot;EOS6cnhSLTn4eSUEqS4nC8frYTsVsjeH2M3hos1TUeCgme2Yim5Q5&quot;, &quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;, &quot;EOS7RkP6aevKjN1CiKSqo44Gi1HhPYBczGFgSduBXBD7uHUFhg2qC&quot;, &quot;EOS7sGb8DfutGgpuMmnDhG1d2stVETfpkrHQ6HhVRJJaPXRqLay2E&quot; ], &quot;transaction&quot;: { &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot;, &quot;name&quot;: &quot;transfer&quot; } ], &quot;context_free_actions&quot;: [ ], &quot;context_free_data&quot;: [ ], &quot;delay_sec&quot;: 0, &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;max_kcpu_usage&quot;: 0, &quot;max_net_usage_words&quot;: 0, &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;signatures&quot;: [ ] } } return { &quot;required_keys&quot;: [ &quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot; ] } 获取到实际需要的公钥EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 3.1.6 签署交易 参数说明： ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 account 合约名称。这里是转账EOS，使用的是eosio.token name 调用的合约方法。这里调用的是转账方法transfer actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 签署此交易的公钥。实际上是由钱包中对应的私钥来签 038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca 链id。注明当前处于主网/测试网/私有网络。这里显示的为测试网络 api http://127.0.0.1:8888/v1/wallet/sign_transaction params [{ &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;actions&quot;: [{ &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [{ &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; }], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }], &quot;signatures&quot;: [] }, [&quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;], &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot; ] return { &quot;expiration&quot;: &quot;2018-09-11T05:59:10&quot;, &quot;ref_block_num&quot;: 38268, &quot;ref_block_prefix&quot;: 171729965, &quot;max_net_usage_words&quot;: 0, &quot;max_cpu_usage_ms&quot;: 0, &quot;delay_sec&quot;: 0, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } ], &quot;transaction_extensions&quot;: [], &quot;signatures&quot;: [ &quot;SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF&quot; ], &quot;context_free_data&quot;: [] } 获取到signatures 3.1.7 提交交易 参数说明： expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix account 合约名称。这里是转账EOS，使用的是eosio.token name 调用的合约方法。这里调用的是转账方法transfer actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 signatures 签署交易后生成的签名字符串 api http://jungle.cryptolions.io:18888/v1/chain/push_transaction params { &quot;compression&quot;: &quot;none&quot;, &quot;transaction&quot;: { &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } ], &quot;transaction_extensions&quot;: [] }, &quot;signatures&quot;: [ &quot;SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF&quot; ] } return { &quot;transaction_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;processed&quot;: { &quot;id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;receipt&quot;: { &quot;status&quot;: &quot;executed&quot;, &quot;cpu_usage_us&quot;: 1537, &quot;net_usage_words&quot;: 17 }, &quot;elapsed&quot;: 1537, &quot;net_usage&quot;: 136, &quot;scheduled&quot;: false, &quot;action_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;eosio.token&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142292, &quot;recv_sequence&quot;: 1716642, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 37 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 942, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testnetyy111&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142293, &quot;recv_sequence&quot;: 16, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 38 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 100, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [] }, { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testneths111&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142294, &quot;recv_sequence&quot;: 7, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 39 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 23, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [] } ] } ], &quot;except&quot;: null } } 3.1.8 查询转账完成后的余额 testnetyy111 &quot;9541.6587 EOS&quot; testneths111 &quot;100.0000 EOS&quot; 3.2 在测试网络转账代币 3.2.1 先查询余额 api http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance params {&quot;code&quot;:&quot;testnetyy111&quot;, &quot;account&quot;:&quot;testnetyy111&quot;, &quot;symbol&quot;:&quot;ray&quot;} {&quot;code&quot;:&quot;testnetyy111&quot;, &quot;account&quot;:&quot;testneths111&quot;, &quot;symbol&quot;:&quot;ray&quot;} return testnetyy111 [ &quot;99999800.0000 RAY&quot; ] testneths111 [ &quot;200.0000 RAY&quot; ] 3.2.2 将交易信息由JSON格式序列化为BIN格式字符串 从testnetyy111转100 RAY给testneths111： api http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin params {&quot;code&quot;:&quot;testnetyy111&quot;,&quot;action&quot;:&quot;transfer&quot;,&quot;args&quot;:{&quot;from&quot;:&quot;testnetyy111&quot;,&quot;to&quot;:&quot;testneths111&quot;,&quot;quantity&quot;:&quot;100.0000 RAY&quot;, &quot;memo&quot;:&quot;hello there&quot;}} return { &quot;binargs&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } 3.2.3 获取当前最新的区块编号 api http://jungle.cryptolions.io:18888/v1/chain/get_info params 无 return { &quot;server_version&quot;: &quot;cc9decff&quot;, &quot;chain_id&quot;: &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot;, &quot;head_block_num&quot;: 13807658, &quot;last_irreversible_block_num&quot;: 13807329, &quot;last_irreversible_block_id&quot;: &quot;00d2aee1e209a3a21f0c1bf3a9b3b79322c27cb48353d9e28f17286b0daaa58b&quot;, &quot;head_block_id&quot;: &quot;00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6&quot;, &quot;head_block_time&quot;: &quot;2018-09-11T06:36:50.000&quot;, &quot;head_block_producer&quot;: &quot;astraealions&quot;, &quot;virtual_block_cpu_limit&quot;: 200000000, &quot;virtual_block_net_limit&quot;: 1048576000, &quot;block_cpu_limit&quot;: 199900, &quot;block_net_limit&quot;: 1048576, &quot;server_version_string&quot;: &quot;v1.2.4-dirty&quot; } 3.2.4 根据区块编号获取区块详情 api http://jungle.cryptolions.io:18888/v1/chain/get_block params {&quot;block_num_or_id&quot;:&quot;13807658&quot;} return { &quot;timestamp&quot;: &quot;2018-09-11T06:36:50.000&quot;, &quot;producer&quot;: &quot;astraealions&quot;, &quot;confirmed&quot;: 0, &quot;previous&quot;: &quot;00d2b029ac9a6eb269c6ea4f8bb3f2961d948f1f0ca3cd0cc4640ceadc95d37b&quot;, &quot;transaction_mroot&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;action_mroot&quot;: &quot;0b1b4f510e0cdd272052fe0f3f9b1e74c7c6f83253409d943c3394eefbb7762e&quot;, &quot;schedule_version&quot;: 219, &quot;new_producers&quot;: null, &quot;header_extensions&quot;: [], &quot;producer_signature&quot;: &quot;SIG_K1_KZZ4giS7WxbSt3i6rcdZqgBWGzpE9XXq8A88kkSDDt9s8MbB2Vs1VEdMDoGYAeqTVUqX25xszU2cBwfHkbEvooPnZSm5FR&quot;, &quot;transactions&quot;: [], &quot;block_extensions&quot;: [], &quot;id&quot;: &quot;00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6&quot;, &quot;block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556 } 3.2.5 筛选出签署交易需要的公钥 这里省略这一步了，因为我们明确知道需要的公钥为EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 3.2.6 签署交易 这里的参数account变为testnetyy111，因为其是代币合约 api http://127.0.0.1:8888/v1/wallet/sign_transaction params [{ &quot;ref_block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556, &quot;expiration&quot;: &quot;2018-09-11T06:56:50.000&quot;, &quot;actions&quot;: [{ &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [{ &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; }], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }], &quot;signatures&quot;: [] }, [&quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;], &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot; ] return { &quot;expiration&quot;: &quot;2018-09-11T06:56:50&quot;, &quot;ref_block_num&quot;: 45098, &quot;ref_block_prefix&quot;: 1761773556, &quot;max_net_usage_words&quot;: 0, &quot;max_cpu_usage_ms&quot;: 0, &quot;delay_sec&quot;: 0, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } ], &quot;transaction_extensions&quot;: [], &quot;signatures&quot;: [ &quot;SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX&quot; ], &quot;context_free_data&quot;: [] } 3.2.7 提交交易 api http://jungle.cryptolions.io:18888/v1/chain/push_transaction params { &quot;compression&quot;: &quot;none&quot;, &quot;transaction&quot;: { &quot;expiration&quot;: &quot;2018-09-11T06:56:50.000&quot;, &quot;ref_block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } ], &quot;transaction_extensions&quot;: [] }, &quot;signatures&quot;: [ &quot;SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX&quot; ] } return { &quot;transaction_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;processed&quot;: { &quot;id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;receipt&quot;: { &quot;status&quot;: &quot;executed&quot;, &quot;cpu_usage_us&quot;: 1176, &quot;net_usage_words&quot;: 17 }, &quot;elapsed&quot;: 1176, &quot;net_usage&quot;: 136, &quot;scheduled&quot;: false, &quot;action_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testnetyy111&quot;, &quot;act_digest&quot;: &quot;28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e&quot;, &quot;global_sequence&quot;: 32149270, &quot;recv_sequence&quot;: 17, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 40 ] ], &quot;code_sequence&quot;: 1, &quot;abi_sequence&quot;: 1 }, &quot;act&quot;: { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 RAY&quot;, &quot;memo&quot;: &quot;hello there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }, &quot;elapsed&quot;: 782, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;inline_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testneths111&quot;, &quot;act_digest&quot;: &quot;28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e&quot;, &quot;global_sequence&quot;: 32149271, &quot;recv_sequence&quot;: 8, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 41 ] ], &quot;code_sequence&quot;: 1, &quot;abi_sequence&quot;: 1 }, &quot;act&quot;: { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 RAY&quot;, &quot;memo&quot;: &quot;hello there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }, &quot;elapsed&quot;: 14, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;inline_traces&quot;: [] } ] } ], &quot;except&quot;: null } } 3.2.8 查询转账完成后的余额 testnetyy111 &quot;99999700.0000 RAY&quot; testneths111 &quot;300.0000 RAY&quot; &nbsp; 阅读更多" />
<meta property="og:description" content="1. 前言 前面我们使用cleos完成过转账的功能，这篇文章我们尝试使用RPC API的方式进行转账。在测试网络/主网络转账EOS，在测试网络转账代币。 官方文档：https://github.com/EOSBlock/EOS-Tutorials/blob/master/EN/transfer-tokens-using-RPC.md 2. 大致流程 使用RPC API转账的流程如下： abi_json_to_bin 将转账信息由json格式序列化为bin格式字符串 get_info 获取当前最新的区块编号 get_block 根据区块编号获取区块详情 get_required_keys(可省略) 传入当前拥有的公钥、bin字符串，区块等信息，筛选出签署交易需要的公钥 sign_transaction 传入上面获取的相关参数，通过钱包中私钥对交易进行签署 push_transaction 根据第五步获取的签名信息，将交易提交到区块链上 3. 详细流程 3.1 在测试网络转账EOS 3.1.1 查看余额 先查看两个交易账号的EOS余额： api http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance params {&quot;code&quot;:&quot;eosio.token&quot;, &quot;account&quot;:&quot;testnetyy111&quot;, &quot;symbol&quot;:&quot;eos&quot;} {&quot;code&quot;:&quot;eosio.token&quot;, &quot;account&quot;:&quot;testneths111&quot;, &quot;symbol&quot;:&quot;eos&quot;} return testnetyy111 [ &quot;9641.6587 EOS&quot; ] testneths111 [ &quot;0.0000 EOS&quot; ] 3.1.2 将交易信息由JSON格式序列化为BIN格式字符串 从testnetyy111转100 EOS给testneths111： api http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin params {&quot;code&quot;:&quot;eosio.token&quot;,&quot;action&quot;:&quot;transfer&quot;,&quot;args&quot;:{&quot;from&quot;:&quot;testnetyy111&quot;,&quot;to&quot;:&quot;testneths111&quot;,&quot;quantity&quot;:&quot;100.0000 EOS&quot;, &quot;memo&quot;:&quot;hi there&quot;}} return { &quot;binargs&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } 获取到binargs 3.1.3 获取当前最新的区块编号 api http://jungle.cryptolions.io:18888/v1/chain/get_info params 无 return { &quot;server_version&quot;: &quot;cc9decff&quot;, &quot;chain_id&quot;: &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot;, &quot;head_block_num&quot;: 13800828, &quot;last_irreversible_block_num&quot;: 13800496, &quot;last_irreversible_block_id&quot;: &quot;00d29430d9809c633ddf3cc5c01613b58105394502e9846515c87274765c6d05&quot;, &quot;head_block_id&quot;: &quot;00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b&quot;, &quot;head_block_time&quot;: &quot;2018-09-11T05:39:10.000&quot;, &quot;head_block_producer&quot;: &quot;lioninjungle&quot;, &quot;virtual_block_cpu_limit&quot;: 200000000, &quot;virtual_block_net_limit&quot;: 1048576000, &quot;block_cpu_limit&quot;: 199900, &quot;block_net_limit&quot;: 1048576, &quot;server_version_string&quot;: &quot;v1.2.4-dirty&quot; } 获取到head_block_num 3.1.4 根据区块编号获取区块详情 api http://jungle.cryptolions.io:18888/v1/chain/get_block params {&quot;block_num_or_id&quot;:&quot;13800828&quot;} return { &quot;timestamp&quot;: &quot;2018-09-11T05:39:10.000&quot;, &quot;producer&quot;: &quot;lioninjungle&quot;, &quot;confirmed&quot;: 0, &quot;previous&quot;: &quot;00d2957b0e343f2ffa7640591ac1f27ed0ac89d2869e0a9c0576f065a31ee1cc&quot;, &quot;transaction_mroot&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;action_mroot&quot;: &quot;22546c1e4c12d53a55c60d0ccb7196baa0afb05993612d2cf0591d7bf8fd8d34&quot;, &quot;schedule_version&quot;: 219, &quot;new_producers&quot;: null, &quot;header_extensions&quot;: [], &quot;producer_signature&quot;: &quot;SIG_K1_KXFvmHtXMnDhp8V7CpHuGoYch3whWorL2Fr7nArevzTmC2tXsKRXHCkHiF9myRpbbx3cTShba64jWveKATr49k3Bonp7aw&quot;, &quot;transactions&quot;: [], &quot;block_extensions&quot;: [], &quot;id&quot;: &quot;00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b&quot;, &quot;block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965 } 获取到timestamp 和ref_block_prefix 3.1.5 筛选出签署交易需要的公钥 钱包中可能有很多公钥存在，调用此方法可以筛选出完成此次交易需要的公钥。如果已明确应该使用的公钥，那可以省略此方法。 首先调用API打开并解锁钱包，然后获取所有的公钥。这部分内容在EOS开发(八)RPC API都有使用介绍。 参数说明： available_keys 钱包中的公钥 account 合约名称。这里是转账EOS，使用的是eosio.token actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 name 调用的合约方法。这里调用的是转账方法transfer expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix api http://jungle.cryptolions.io:18888/v1/chain/get_required_keys params { &quot;available_keys&quot;: [ &quot;EOS6cnhSLTn4eSUEqS4nC8frYTsVsjeH2M3hos1TUeCgme2Yim5Q5&quot;, &quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;, &quot;EOS7RkP6aevKjN1CiKSqo44Gi1HhPYBczGFgSduBXBD7uHUFhg2qC&quot;, &quot;EOS7sGb8DfutGgpuMmnDhG1d2stVETfpkrHQ6HhVRJJaPXRqLay2E&quot; ], &quot;transaction&quot;: { &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot;, &quot;name&quot;: &quot;transfer&quot; } ], &quot;context_free_actions&quot;: [ ], &quot;context_free_data&quot;: [ ], &quot;delay_sec&quot;: 0, &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;max_kcpu_usage&quot;: 0, &quot;max_net_usage_words&quot;: 0, &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;signatures&quot;: [ ] } } return { &quot;required_keys&quot;: [ &quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot; ] } 获取到实际需要的公钥EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 3.1.6 签署交易 参数说明： ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 account 合约名称。这里是转账EOS，使用的是eosio.token name 调用的合约方法。这里调用的是转账方法transfer actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 签署此交易的公钥。实际上是由钱包中对应的私钥来签 038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca 链id。注明当前处于主网/测试网/私有网络。这里显示的为测试网络 api http://127.0.0.1:8888/v1/wallet/sign_transaction params [{ &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;actions&quot;: [{ &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [{ &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; }], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }], &quot;signatures&quot;: [] }, [&quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;], &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot; ] return { &quot;expiration&quot;: &quot;2018-09-11T05:59:10&quot;, &quot;ref_block_num&quot;: 38268, &quot;ref_block_prefix&quot;: 171729965, &quot;max_net_usage_words&quot;: 0, &quot;max_cpu_usage_ms&quot;: 0, &quot;delay_sec&quot;: 0, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } ], &quot;transaction_extensions&quot;: [], &quot;signatures&quot;: [ &quot;SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF&quot; ], &quot;context_free_data&quot;: [] } 获取到signatures 3.1.7 提交交易 参数说明： expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix account 合约名称。这里是转账EOS，使用的是eosio.token name 调用的合约方法。这里调用的是转账方法transfer actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 signatures 签署交易后生成的签名字符串 api http://jungle.cryptolions.io:18888/v1/chain/push_transaction params { &quot;compression&quot;: &quot;none&quot;, &quot;transaction&quot;: { &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } ], &quot;transaction_extensions&quot;: [] }, &quot;signatures&quot;: [ &quot;SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF&quot; ] } return { &quot;transaction_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;processed&quot;: { &quot;id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;receipt&quot;: { &quot;status&quot;: &quot;executed&quot;, &quot;cpu_usage_us&quot;: 1537, &quot;net_usage_words&quot;: 17 }, &quot;elapsed&quot;: 1537, &quot;net_usage&quot;: 136, &quot;scheduled&quot;: false, &quot;action_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;eosio.token&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142292, &quot;recv_sequence&quot;: 1716642, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 37 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 942, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testnetyy111&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142293, &quot;recv_sequence&quot;: 16, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 38 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 100, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [] }, { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testneths111&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142294, &quot;recv_sequence&quot;: 7, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 39 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 23, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [] } ] } ], &quot;except&quot;: null } } 3.1.8 查询转账完成后的余额 testnetyy111 &quot;9541.6587 EOS&quot; testneths111 &quot;100.0000 EOS&quot; 3.2 在测试网络转账代币 3.2.1 先查询余额 api http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance params {&quot;code&quot;:&quot;testnetyy111&quot;, &quot;account&quot;:&quot;testnetyy111&quot;, &quot;symbol&quot;:&quot;ray&quot;} {&quot;code&quot;:&quot;testnetyy111&quot;, &quot;account&quot;:&quot;testneths111&quot;, &quot;symbol&quot;:&quot;ray&quot;} return testnetyy111 [ &quot;99999800.0000 RAY&quot; ] testneths111 [ &quot;200.0000 RAY&quot; ] 3.2.2 将交易信息由JSON格式序列化为BIN格式字符串 从testnetyy111转100 RAY给testneths111： api http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin params {&quot;code&quot;:&quot;testnetyy111&quot;,&quot;action&quot;:&quot;transfer&quot;,&quot;args&quot;:{&quot;from&quot;:&quot;testnetyy111&quot;,&quot;to&quot;:&quot;testneths111&quot;,&quot;quantity&quot;:&quot;100.0000 RAY&quot;, &quot;memo&quot;:&quot;hello there&quot;}} return { &quot;binargs&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } 3.2.3 获取当前最新的区块编号 api http://jungle.cryptolions.io:18888/v1/chain/get_info params 无 return { &quot;server_version&quot;: &quot;cc9decff&quot;, &quot;chain_id&quot;: &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot;, &quot;head_block_num&quot;: 13807658, &quot;last_irreversible_block_num&quot;: 13807329, &quot;last_irreversible_block_id&quot;: &quot;00d2aee1e209a3a21f0c1bf3a9b3b79322c27cb48353d9e28f17286b0daaa58b&quot;, &quot;head_block_id&quot;: &quot;00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6&quot;, &quot;head_block_time&quot;: &quot;2018-09-11T06:36:50.000&quot;, &quot;head_block_producer&quot;: &quot;astraealions&quot;, &quot;virtual_block_cpu_limit&quot;: 200000000, &quot;virtual_block_net_limit&quot;: 1048576000, &quot;block_cpu_limit&quot;: 199900, &quot;block_net_limit&quot;: 1048576, &quot;server_version_string&quot;: &quot;v1.2.4-dirty&quot; } 3.2.4 根据区块编号获取区块详情 api http://jungle.cryptolions.io:18888/v1/chain/get_block params {&quot;block_num_or_id&quot;:&quot;13807658&quot;} return { &quot;timestamp&quot;: &quot;2018-09-11T06:36:50.000&quot;, &quot;producer&quot;: &quot;astraealions&quot;, &quot;confirmed&quot;: 0, &quot;previous&quot;: &quot;00d2b029ac9a6eb269c6ea4f8bb3f2961d948f1f0ca3cd0cc4640ceadc95d37b&quot;, &quot;transaction_mroot&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;action_mroot&quot;: &quot;0b1b4f510e0cdd272052fe0f3f9b1e74c7c6f83253409d943c3394eefbb7762e&quot;, &quot;schedule_version&quot;: 219, &quot;new_producers&quot;: null, &quot;header_extensions&quot;: [], &quot;producer_signature&quot;: &quot;SIG_K1_KZZ4giS7WxbSt3i6rcdZqgBWGzpE9XXq8A88kkSDDt9s8MbB2Vs1VEdMDoGYAeqTVUqX25xszU2cBwfHkbEvooPnZSm5FR&quot;, &quot;transactions&quot;: [], &quot;block_extensions&quot;: [], &quot;id&quot;: &quot;00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6&quot;, &quot;block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556 } 3.2.5 筛选出签署交易需要的公钥 这里省略这一步了，因为我们明确知道需要的公钥为EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 3.2.6 签署交易 这里的参数account变为testnetyy111，因为其是代币合约 api http://127.0.0.1:8888/v1/wallet/sign_transaction params [{ &quot;ref_block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556, &quot;expiration&quot;: &quot;2018-09-11T06:56:50.000&quot;, &quot;actions&quot;: [{ &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [{ &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; }], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }], &quot;signatures&quot;: [] }, [&quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;], &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot; ] return { &quot;expiration&quot;: &quot;2018-09-11T06:56:50&quot;, &quot;ref_block_num&quot;: 45098, &quot;ref_block_prefix&quot;: 1761773556, &quot;max_net_usage_words&quot;: 0, &quot;max_cpu_usage_ms&quot;: 0, &quot;delay_sec&quot;: 0, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } ], &quot;transaction_extensions&quot;: [], &quot;signatures&quot;: [ &quot;SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX&quot; ], &quot;context_free_data&quot;: [] } 3.2.7 提交交易 api http://jungle.cryptolions.io:18888/v1/chain/push_transaction params { &quot;compression&quot;: &quot;none&quot;, &quot;transaction&quot;: { &quot;expiration&quot;: &quot;2018-09-11T06:56:50.000&quot;, &quot;ref_block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } ], &quot;transaction_extensions&quot;: [] }, &quot;signatures&quot;: [ &quot;SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX&quot; ] } return { &quot;transaction_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;processed&quot;: { &quot;id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;receipt&quot;: { &quot;status&quot;: &quot;executed&quot;, &quot;cpu_usage_us&quot;: 1176, &quot;net_usage_words&quot;: 17 }, &quot;elapsed&quot;: 1176, &quot;net_usage&quot;: 136, &quot;scheduled&quot;: false, &quot;action_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testnetyy111&quot;, &quot;act_digest&quot;: &quot;28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e&quot;, &quot;global_sequence&quot;: 32149270, &quot;recv_sequence&quot;: 17, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 40 ] ], &quot;code_sequence&quot;: 1, &quot;abi_sequence&quot;: 1 }, &quot;act&quot;: { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 RAY&quot;, &quot;memo&quot;: &quot;hello there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }, &quot;elapsed&quot;: 782, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;inline_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testneths111&quot;, &quot;act_digest&quot;: &quot;28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e&quot;, &quot;global_sequence&quot;: 32149271, &quot;recv_sequence&quot;: 8, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 41 ] ], &quot;code_sequence&quot;: 1, &quot;abi_sequence&quot;: 1 }, &quot;act&quot;: { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 RAY&quot;, &quot;memo&quot;: &quot;hello there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }, &quot;elapsed&quot;: 14, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;inline_traces&quot;: [] } ] } ], &quot;except&quot;: null } } 3.2.8 查询转账完成后的余额 testnetyy111 &quot;99999700.0000 RAY&quot; testneths111 &quot;300.0000 RAY&quot; &nbsp; 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/10/27/5e40562a21e4fa251439c127b36a32e8.html" />
<meta property="og:url" content="https://mlh.app/2018/10/27/5e40562a21e4fa251439c127b36a32e8.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-10-27T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1. 前言 前面我们使用cleos完成过转账的功能，这篇文章我们尝试使用RPC API的方式进行转账。在测试网络/主网络转账EOS，在测试网络转账代币。 官方文档：https://github.com/EOSBlock/EOS-Tutorials/blob/master/EN/transfer-tokens-using-RPC.md 2. 大致流程 使用RPC API转账的流程如下： abi_json_to_bin 将转账信息由json格式序列化为bin格式字符串 get_info 获取当前最新的区块编号 get_block 根据区块编号获取区块详情 get_required_keys(可省略) 传入当前拥有的公钥、bin字符串，区块等信息，筛选出签署交易需要的公钥 sign_transaction 传入上面获取的相关参数，通过钱包中私钥对交易进行签署 push_transaction 根据第五步获取的签名信息，将交易提交到区块链上 3. 详细流程 3.1 在测试网络转账EOS 3.1.1 查看余额 先查看两个交易账号的EOS余额： api http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance params {&quot;code&quot;:&quot;eosio.token&quot;, &quot;account&quot;:&quot;testnetyy111&quot;, &quot;symbol&quot;:&quot;eos&quot;} {&quot;code&quot;:&quot;eosio.token&quot;, &quot;account&quot;:&quot;testneths111&quot;, &quot;symbol&quot;:&quot;eos&quot;} return testnetyy111 [ &quot;9641.6587 EOS&quot; ] testneths111 [ &quot;0.0000 EOS&quot; ] 3.1.2 将交易信息由JSON格式序列化为BIN格式字符串 从testnetyy111转100 EOS给testneths111： api http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin params {&quot;code&quot;:&quot;eosio.token&quot;,&quot;action&quot;:&quot;transfer&quot;,&quot;args&quot;:{&quot;from&quot;:&quot;testnetyy111&quot;,&quot;to&quot;:&quot;testneths111&quot;,&quot;quantity&quot;:&quot;100.0000 EOS&quot;, &quot;memo&quot;:&quot;hi there&quot;}} return { &quot;binargs&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } 获取到binargs 3.1.3 获取当前最新的区块编号 api http://jungle.cryptolions.io:18888/v1/chain/get_info params 无 return { &quot;server_version&quot;: &quot;cc9decff&quot;, &quot;chain_id&quot;: &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot;, &quot;head_block_num&quot;: 13800828, &quot;last_irreversible_block_num&quot;: 13800496, &quot;last_irreversible_block_id&quot;: &quot;00d29430d9809c633ddf3cc5c01613b58105394502e9846515c87274765c6d05&quot;, &quot;head_block_id&quot;: &quot;00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b&quot;, &quot;head_block_time&quot;: &quot;2018-09-11T05:39:10.000&quot;, &quot;head_block_producer&quot;: &quot;lioninjungle&quot;, &quot;virtual_block_cpu_limit&quot;: 200000000, &quot;virtual_block_net_limit&quot;: 1048576000, &quot;block_cpu_limit&quot;: 199900, &quot;block_net_limit&quot;: 1048576, &quot;server_version_string&quot;: &quot;v1.2.4-dirty&quot; } 获取到head_block_num 3.1.4 根据区块编号获取区块详情 api http://jungle.cryptolions.io:18888/v1/chain/get_block params {&quot;block_num_or_id&quot;:&quot;13800828&quot;} return { &quot;timestamp&quot;: &quot;2018-09-11T05:39:10.000&quot;, &quot;producer&quot;: &quot;lioninjungle&quot;, &quot;confirmed&quot;: 0, &quot;previous&quot;: &quot;00d2957b0e343f2ffa7640591ac1f27ed0ac89d2869e0a9c0576f065a31ee1cc&quot;, &quot;transaction_mroot&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;action_mroot&quot;: &quot;22546c1e4c12d53a55c60d0ccb7196baa0afb05993612d2cf0591d7bf8fd8d34&quot;, &quot;schedule_version&quot;: 219, &quot;new_producers&quot;: null, &quot;header_extensions&quot;: [], &quot;producer_signature&quot;: &quot;SIG_K1_KXFvmHtXMnDhp8V7CpHuGoYch3whWorL2Fr7nArevzTmC2tXsKRXHCkHiF9myRpbbx3cTShba64jWveKATr49k3Bonp7aw&quot;, &quot;transactions&quot;: [], &quot;block_extensions&quot;: [], &quot;id&quot;: &quot;00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b&quot;, &quot;block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965 } 获取到timestamp 和ref_block_prefix 3.1.5 筛选出签署交易需要的公钥 钱包中可能有很多公钥存在，调用此方法可以筛选出完成此次交易需要的公钥。如果已明确应该使用的公钥，那可以省略此方法。 首先调用API打开并解锁钱包，然后获取所有的公钥。这部分内容在EOS开发(八)RPC API都有使用介绍。 参数说明： available_keys 钱包中的公钥 account 合约名称。这里是转账EOS，使用的是eosio.token actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 name 调用的合约方法。这里调用的是转账方法transfer expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix api http://jungle.cryptolions.io:18888/v1/chain/get_required_keys params { &quot;available_keys&quot;: [ &quot;EOS6cnhSLTn4eSUEqS4nC8frYTsVsjeH2M3hos1TUeCgme2Yim5Q5&quot;, &quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;, &quot;EOS7RkP6aevKjN1CiKSqo44Gi1HhPYBczGFgSduBXBD7uHUFhg2qC&quot;, &quot;EOS7sGb8DfutGgpuMmnDhG1d2stVETfpkrHQ6HhVRJJaPXRqLay2E&quot; ], &quot;transaction&quot;: { &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot;, &quot;name&quot;: &quot;transfer&quot; } ], &quot;context_free_actions&quot;: [ ], &quot;context_free_data&quot;: [ ], &quot;delay_sec&quot;: 0, &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;max_kcpu_usage&quot;: 0, &quot;max_net_usage_words&quot;: 0, &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;signatures&quot;: [ ] } } return { &quot;required_keys&quot;: [ &quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot; ] } 获取到实际需要的公钥EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 3.1.6 签署交易 参数说明： ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 account 合约名称。这里是转账EOS，使用的是eosio.token name 调用的合约方法。这里调用的是转账方法transfer actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 签署此交易的公钥。实际上是由钱包中对应的私钥来签 038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca 链id。注明当前处于主网/测试网/私有网络。这里显示的为测试网络 api http://127.0.0.1:8888/v1/wallet/sign_transaction params [{ &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;actions&quot;: [{ &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [{ &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; }], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }], &quot;signatures&quot;: [] }, [&quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;], &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot; ] return { &quot;expiration&quot;: &quot;2018-09-11T05:59:10&quot;, &quot;ref_block_num&quot;: 38268, &quot;ref_block_prefix&quot;: 171729965, &quot;max_net_usage_words&quot;: 0, &quot;max_cpu_usage_ms&quot;: 0, &quot;delay_sec&quot;: 0, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } ], &quot;transaction_extensions&quot;: [], &quot;signatures&quot;: [ &quot;SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF&quot; ], &quot;context_free_data&quot;: [] } 获取到signatures 3.1.7 提交交易 参数说明： expiration 过期时间。这里将timestamp加上了20分钟。可以根据需要来增加时长 ref_block_num 前面获取的最新区块号 ref_block_prefix 前面获取的ref_block_prefix account 合约名称。这里是转账EOS，使用的是eosio.token name 调用的合约方法。这里调用的是转账方法transfer actor 调用者。这里相当于转账方 permission 使用的权限类型 data 之前生成的bin字符串 signatures 签署交易后生成的签名字符串 api http://jungle.cryptolions.io:18888/v1/chain/push_transaction params { &quot;compression&quot;: &quot;none&quot;, &quot;transaction&quot;: { &quot;expiration&quot;: &quot;2018-09-11T05:59:10.000&quot;, &quot;ref_block_num&quot;: 13800828, &quot;ref_block_prefix&quot;: 171729965, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; } ], &quot;transaction_extensions&quot;: [] }, &quot;signatures&quot;: [ &quot;SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF&quot; ] } return { &quot;transaction_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;processed&quot;: { &quot;id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;receipt&quot;: { &quot;status&quot;: &quot;executed&quot;, &quot;cpu_usage_us&quot;: 1537, &quot;net_usage_words&quot;: 17 }, &quot;elapsed&quot;: 1537, &quot;net_usage&quot;: 136, &quot;scheduled&quot;: false, &quot;action_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;eosio.token&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142292, &quot;recv_sequence&quot;: 1716642, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 37 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 942, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testnetyy111&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142293, &quot;recv_sequence&quot;: 16, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 38 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 100, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [] }, { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testneths111&quot;, &quot;act_digest&quot;: &quot;45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e&quot;, &quot;global_sequence&quot;: 32142294, &quot;recv_sequence&quot;: 7, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 39 ] ], &quot;code_sequence&quot;: 3, &quot;abi_sequence&quot;: 3 }, &quot;act&quot;: { &quot;account&quot;: &quot;eosio.token&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 EOS&quot;, &quot;memo&quot;: &quot;hi there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265&quot; }, &quot;elapsed&quot;: 23, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc&quot;, &quot;inline_traces&quot;: [] } ] } ], &quot;except&quot;: null } } 3.1.8 查询转账完成后的余额 testnetyy111 &quot;9541.6587 EOS&quot; testneths111 &quot;100.0000 EOS&quot; 3.2 在测试网络转账代币 3.2.1 先查询余额 api http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance params {&quot;code&quot;:&quot;testnetyy111&quot;, &quot;account&quot;:&quot;testnetyy111&quot;, &quot;symbol&quot;:&quot;ray&quot;} {&quot;code&quot;:&quot;testnetyy111&quot;, &quot;account&quot;:&quot;testneths111&quot;, &quot;symbol&quot;:&quot;ray&quot;} return testnetyy111 [ &quot;99999800.0000 RAY&quot; ] testneths111 [ &quot;200.0000 RAY&quot; ] 3.2.2 将交易信息由JSON格式序列化为BIN格式字符串 从testnetyy111转100 RAY给testneths111： api http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin params {&quot;code&quot;:&quot;testnetyy111&quot;,&quot;action&quot;:&quot;transfer&quot;,&quot;args&quot;:{&quot;from&quot;:&quot;testnetyy111&quot;,&quot;to&quot;:&quot;testneths111&quot;,&quot;quantity&quot;:&quot;100.0000 RAY&quot;, &quot;memo&quot;:&quot;hello there&quot;}} return { &quot;binargs&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } 3.2.3 获取当前最新的区块编号 api http://jungle.cryptolions.io:18888/v1/chain/get_info params 无 return { &quot;server_version&quot;: &quot;cc9decff&quot;, &quot;chain_id&quot;: &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot;, &quot;head_block_num&quot;: 13807658, &quot;last_irreversible_block_num&quot;: 13807329, &quot;last_irreversible_block_id&quot;: &quot;00d2aee1e209a3a21f0c1bf3a9b3b79322c27cb48353d9e28f17286b0daaa58b&quot;, &quot;head_block_id&quot;: &quot;00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6&quot;, &quot;head_block_time&quot;: &quot;2018-09-11T06:36:50.000&quot;, &quot;head_block_producer&quot;: &quot;astraealions&quot;, &quot;virtual_block_cpu_limit&quot;: 200000000, &quot;virtual_block_net_limit&quot;: 1048576000, &quot;block_cpu_limit&quot;: 199900, &quot;block_net_limit&quot;: 1048576, &quot;server_version_string&quot;: &quot;v1.2.4-dirty&quot; } 3.2.4 根据区块编号获取区块详情 api http://jungle.cryptolions.io:18888/v1/chain/get_block params {&quot;block_num_or_id&quot;:&quot;13807658&quot;} return { &quot;timestamp&quot;: &quot;2018-09-11T06:36:50.000&quot;, &quot;producer&quot;: &quot;astraealions&quot;, &quot;confirmed&quot;: 0, &quot;previous&quot;: &quot;00d2b029ac9a6eb269c6ea4f8bb3f2961d948f1f0ca3cd0cc4640ceadc95d37b&quot;, &quot;transaction_mroot&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;action_mroot&quot;: &quot;0b1b4f510e0cdd272052fe0f3f9b1e74c7c6f83253409d943c3394eefbb7762e&quot;, &quot;schedule_version&quot;: 219, &quot;new_producers&quot;: null, &quot;header_extensions&quot;: [], &quot;producer_signature&quot;: &quot;SIG_K1_KZZ4giS7WxbSt3i6rcdZqgBWGzpE9XXq8A88kkSDDt9s8MbB2Vs1VEdMDoGYAeqTVUqX25xszU2cBwfHkbEvooPnZSm5FR&quot;, &quot;transactions&quot;: [], &quot;block_extensions&quot;: [], &quot;id&quot;: &quot;00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6&quot;, &quot;block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556 } 3.2.5 筛选出签署交易需要的公钥 这里省略这一步了，因为我们明确知道需要的公钥为EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc 3.2.6 签署交易 这里的参数account变为testnetyy111，因为其是代币合约 api http://127.0.0.1:8888/v1/wallet/sign_transaction params [{ &quot;ref_block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556, &quot;expiration&quot;: &quot;2018-09-11T06:56:50.000&quot;, &quot;actions&quot;: [{ &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [{ &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; }], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }], &quot;signatures&quot;: [] }, [&quot;EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc&quot;], &quot;038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca&quot; ] return { &quot;expiration&quot;: &quot;2018-09-11T06:56:50&quot;, &quot;ref_block_num&quot;: 45098, &quot;ref_block_prefix&quot;: 1761773556, &quot;max_net_usage_words&quot;: 0, &quot;max_cpu_usage_ms&quot;: 0, &quot;delay_sec&quot;: 0, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } ], &quot;transaction_extensions&quot;: [], &quot;signatures&quot;: [ &quot;SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX&quot; ], &quot;context_free_data&quot;: [] } 3.2.7 提交交易 api http://jungle.cryptolions.io:18888/v1/chain/push_transaction params { &quot;compression&quot;: &quot;none&quot;, &quot;transaction&quot;: { &quot;expiration&quot;: &quot;2018-09-11T06:56:50.000&quot;, &quot;ref_block_num&quot;: 13807658, &quot;ref_block_prefix&quot;: 1761773556, &quot;context_free_actions&quot;: [], &quot;actions&quot;: [ { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; } ], &quot;transaction_extensions&quot;: [] }, &quot;signatures&quot;: [ &quot;SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX&quot; ] } return { &quot;transaction_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;processed&quot;: { &quot;id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;receipt&quot;: { &quot;status&quot;: &quot;executed&quot;, &quot;cpu_usage_us&quot;: 1176, &quot;net_usage_words&quot;: 17 }, &quot;elapsed&quot;: 1176, &quot;net_usage&quot;: 136, &quot;scheduled&quot;: false, &quot;action_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testnetyy111&quot;, &quot;act_digest&quot;: &quot;28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e&quot;, &quot;global_sequence&quot;: 32149270, &quot;recv_sequence&quot;: 17, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 40 ] ], &quot;code_sequence&quot;: 1, &quot;abi_sequence&quot;: 1 }, &quot;act&quot;: { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 RAY&quot;, &quot;memo&quot;: &quot;hello there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }, &quot;elapsed&quot;: 782, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;inline_traces&quot;: [ { &quot;receipt&quot;: { &quot;receiver&quot;: &quot;testneths111&quot;, &quot;act_digest&quot;: &quot;28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e&quot;, &quot;global_sequence&quot;: 32149271, &quot;recv_sequence&quot;: 8, &quot;auth_sequence&quot;: [ [ &quot;testnetyy111&quot;, 41 ] ], &quot;code_sequence&quot;: 1, &quot;abi_sequence&quot;: 1 }, &quot;act&quot;: { &quot;account&quot;: &quot;testnetyy111&quot;, &quot;name&quot;: &quot;transfer&quot;, &quot;authorization&quot;: [ { &quot;actor&quot;: &quot;testnetyy111&quot;, &quot;permission&quot;: &quot;active&quot; } ], &quot;data&quot;: { &quot;from&quot;: &quot;testnetyy111&quot;, &quot;to&quot;: &quot;testneths111&quot;, &quot;quantity&quot;: &quot;100.0000 RAY&quot;, &quot;memo&quot;: &quot;hello there&quot; }, &quot;hex_data&quot;: &quot;1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265&quot; }, &quot;elapsed&quot;: 14, &quot;cpu_usage&quot;: 0, &quot;console&quot;: &quot;&quot;, &quot;total_cpu_usage&quot;: 0, &quot;trx_id&quot;: &quot;27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b&quot;, &quot;inline_traces&quot;: [] } ] } ], &quot;except&quot;: null } } 3.2.8 查询转账完成后的余额 testnetyy111 &quot;99999700.0000 RAY&quot; testneths111 &quot;300.0000 RAY&quot; &nbsp; 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/10/27/5e40562a21e4fa251439c127b36a32e8.html","headline":"EOS实战（三）RPC接口（使用RPC的接口转账）","dateModified":"2018-10-27T00:00:00+08:00","datePublished":"2018-10-27T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/10/27/5e40562a21e4fa251439c127b36a32e8.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>EOS实战（三）RPC接口（使用RPC的接口转账）</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css"> 
 <div class="htmledit_views" id="content_views"> 
  <h1>1. 前言</h1> 
  <p>前面我们使用<code>cleos</code>完成过转账的功能，这篇文章我们尝试使用RPC API的方式进行转账。在测试网络/主网络转账EOS，在测试网络转账代币。</p> 
  <p>官方文档：<a href="https://github.com/EOSBlock/EOS-Tutorials/blob/master/EN/transfer-tokens-using-RPC.md" rel="nofollow">https://github.com/EOSBlock/EOS-Tutorials/blob/master/EN/transfer-tokens-using-RPC.md</a></p> 
  <h1>2. 大致流程</h1> 
  <p>使用RPC API转账的流程如下：</p> 
  <ol>
   <li> <p><code>abi_json_to_bin</code> 将转账信息由<code>json</code>格式序列化为<code>bin</code>格式字符串</p> </li> 
   <li> <p><code>get_info</code> 获取当前最新的区块编号</p> </li> 
   <li> <p><code>get_block</code> 根据区块编号获取区块详情</p> </li> 
   <li> <p><code>get_required_keys</code>(可省略) 传入当前拥有的公钥、<code>bin</code>字符串，区块等信息，筛选出签署交易需要的公钥</p> </li> 
   <li> <p><code>sign_transaction</code> 传入上面获取的相关参数，通过钱包中私钥对交易进行签署</p> </li> 
   <li> <p><code>push_transaction</code> 根据第五步获取的签名信息，将交易提交到区块链上</p> </li> 
  </ol>
  <h1>3. 详细流程</h1> 
  <h2>3.1 在测试网络转账EOS</h2> 
  <h3>3.1.1 查看余额</h3> 
  <p>先查看两个交易账号的EOS余额：</p> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance

params
{"code":"eosio.token", "account":"testnetyy111", "symbol":"eos"}
{"code":"eosio.token", "account":"testneths111", "symbol":"eos"}

return

testnetyy111
[
    "9641.6587 EOS"
]
testneths111
[
    "0.0000 EOS"
]
</code></pre> 
  <h3>3.1.2 将交易信息由JSON格式序列化为BIN格式字符串</h3> 
  <p>从<code>testnetyy111</code>转<code>100</code> EOS给<code>testneths111</code>：</p> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin

params
{"code":"eosio.token","action":"transfer","args":{"from":"testnetyy111","to":"testneths111","quantity":"100.0000 EOS", "memo":"hi there"}}

return
{
    "binargs": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265"
}
</code></pre> 
  <p>获取到<code>binargs</code></p> 
  <h3>3.1.3 获取当前最新的区块编号</h3> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/get_info

params
无

return
{
    "server_version": "cc9decff",
    "chain_id": "038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca",
    "head_block_num": 13800828,
    "last_irreversible_block_num": 13800496,
    "last_irreversible_block_id": "00d29430d9809c633ddf3cc5c01613b58105394502e9846515c87274765c6d05",
    "head_block_id": "00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b",
    "head_block_time": "2018-09-11T05:39:10.000",
    "head_block_producer": "lioninjungle",
    "virtual_block_cpu_limit": 200000000,
    "virtual_block_net_limit": 1048576000,
    "block_cpu_limit": 199900,
    "block_net_limit": 1048576,
    "server_version_string": "v1.2.4-dirty"
}
</code></pre> 
  <p>获取到<code>head_block_num</code></p> 
  <h3>3.1.4 根据区块编号获取区块详情</h3> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/get_block

params
{"block_num_or_id":"13800828"}

return
{
    "timestamp": "2018-09-11T05:39:10.000",
    "producer": "lioninjungle",
    "confirmed": 0,
    "previous": "00d2957b0e343f2ffa7640591ac1f27ed0ac89d2869e0a9c0576f065a31ee1cc",
    "transaction_mroot": "0000000000000000000000000000000000000000000000000000000000000000",
    "action_mroot": "22546c1e4c12d53a55c60d0ccb7196baa0afb05993612d2cf0591d7bf8fd8d34",
    "schedule_version": 219,
    "new_producers": null,
    "header_extensions": [],
    "producer_signature": "SIG_K1_KXFvmHtXMnDhp8V7CpHuGoYch3whWorL2Fr7nArevzTmC2tXsKRXHCkHiF9myRpbbx3cTShba64jWveKATr49k3Bonp7aw",
    "transactions": [],
    "block_extensions": [],
    "id": "00d2957ccb42d63c2d643c0a1b0b98da69c462b94a62ed434a0e565035bab90b",
    "block_num": 13800828,
    "ref_block_prefix": 171729965
}
</code></pre> 
  <p>获取到<code>timestamp</code> 和<code>ref_block_prefix</code></p> 
  <h3>3.1.5 筛选出签署交易需要的公钥</h3> 
  <p>钱包中可能有很多公钥存在，调用此方法可以筛选出完成此次交易需要的公钥。如果已明确应该使用的公钥，那可以<code>省略</code>此方法。</p> 
  <p>首先调用API打开并解锁钱包，然后获取所有的公钥。这部分内容在<a href="https://www.jianshu.com/p/3c9cb9bc6fd6" rel="nofollow">EOS开发(八)RPC API</a>都有使用介绍。</p> 
  <p>参数说明：</p> 
  <ul>
   <li> <p><code>available_keys</code> 钱包中的公钥</p> </li> 
   <li> <p><code>account</code> 合约名称。这里是转账EOS，使用的是<code>eosio.token</code></p> </li> 
   <li> <p><code>actor</code> 调用者。这里相当于转账方</p> </li> 
   <li> <p><code>permission</code> 使用的权限类型</p> </li> 
   <li> <p><code>data</code> 之前生成的<code>bin</code>字符串</p> </li> 
   <li> <p><code>name</code> 调用的合约方法。这里调用的是转账方法<code>transfer</code></p> </li> 
   <li> <p><code>expiration</code> 过期时间。这里将<code>timestamp</code>加上了20分钟。可以根据需要来增加时长</p> </li> 
   <li> <p><code>ref_block_num</code> 前面获取的最新区块号</p> </li> 
   <li> <p><code>ref_block_prefix</code> 前面获取的<code>ref_block_prefix</code></p> </li> 
  </ul>
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/get_required_keys

params
{
    "available_keys": [
        "EOS6cnhSLTn4eSUEqS4nC8frYTsVsjeH2M3hos1TUeCgme2Yim5Q5",
        "EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc",
        "EOS7RkP6aevKjN1CiKSqo44Gi1HhPYBczGFgSduBXBD7uHUFhg2qC",
        "EOS7sGb8DfutGgpuMmnDhG1d2stVETfpkrHQ6HhVRJJaPXRqLay2E"
    ],
    "transaction": {
        "actions": [
            {
                "account": "eosio.token",
                "authorization": [
                    {
                        "actor": "testnetyy111",
                        "permission": "active"
                    }
                ],
                "data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265",
                "name": "transfer"
            }
        ],
        "context_free_actions": [
        ],
        "context_free_data": [
        ],
        "delay_sec": 0,
        "expiration": "2018-09-11T05:59:10.000",
        "max_kcpu_usage": 0,
        "max_net_usage_words": 0,
        "ref_block_num": 13800828,
        "ref_block_prefix": 171729965,
        "signatures": [
        ]
    }
}

return
{
    "required_keys": [
        "EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc"
    ]
}
</code></pre> 
  <p>获取到实际需要的公钥<code>EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc</code></p> 
  <h3>3.1.6 签署交易</h3> 
  <p>参数说明：</p> 
  <ul>
   <li> <p><code>ref_block_num</code> 前面获取的最新区块号</p> </li> 
   <li> <p><code>ref_block_prefix</code> 前面获取的<code>ref_block_prefix</code></p> </li> 
   <li> <p><code>expiration</code> 过期时间。这里将<code>timestamp</code>加上了20分钟。可以根据需要来增加时长</p> </li> 
   <li> <p><code>account</code> 合约名称。这里是转账EOS，使用的是<code>eosio.token</code></p> </li> 
   <li> <p><code>name</code> 调用的合约方法。这里调用的是转账方法<code>transfer</code></p> </li> 
   <li> <p><code>actor</code> 调用者。这里相当于转账方</p> </li> 
   <li> <p><code>permission</code> 使用的权限类型</p> </li> 
   <li> <p><code>data</code> 之前生成的<code>bin</code>字符串</p> </li> 
   <li> <p><code>EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc</code> 签署此交易的公钥。实际上是由钱包中对应的私钥来签</p> </li> 
   <li> <p><code>038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca</code> 链id。注明当前处于主网/测试网/私有网络。这里显示的为测试网络</p> </li> 
  </ul>
  <pre class="has">
<code>api
http://127.0.0.1:8888/v1/wallet/sign_transaction

params
[{
        "ref_block_num": 13800828,
        "ref_block_prefix": 171729965,
        "expiration": "2018-09-11T05:59:10.000",
        "actions": [{
            "account": "eosio.token",
            "name": "transfer",
            "authorization": [{
                "actor": "testnetyy111",
                "permission": "active"
            }],
            "data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265"
        }],
        "signatures": []
    },
    ["EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc"], "038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca"
]

return
{
    "expiration": "2018-09-11T05:59:10",
    "ref_block_num": 38268,
    "ref_block_prefix": 171729965,
    "max_net_usage_words": 0,
    "max_cpu_usage_ms": 0,
    "delay_sec": 0,
    "context_free_actions": [],
    "actions": [
        {
            "account": "eosio.token",
            "name": "transfer",
            "authorization": [
                {
                    "actor": "testnetyy111",
                    "permission": "active"
                }
            ],
            "data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265"
        }
    ],
    "transaction_extensions": [],
    "signatures": [
        "SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF"
    ],
    "context_free_data": []
}
</code></pre> 
  <p>获取到<code>signatures</code></p> 
  <h3>3.1.7 提交交易</h3> 
  <p>参数说明：</p> 
  <ul>
   <li> <p><code>expiration</code> 过期时间。这里将<code>timestamp</code>加上了20分钟。可以根据需要来增加时长</p> </li> 
   <li> <p><code>ref_block_num</code> 前面获取的最新区块号</p> </li> 
   <li> <p><code>ref_block_prefix</code> 前面获取的<code>ref_block_prefix</code></p> </li> 
   <li> <p><code>account</code> 合约名称。这里是转账EOS，使用的是<code>eosio.token</code></p> </li> 
   <li> <p><code>name</code> 调用的合约方法。这里调用的是转账方法<code>transfer</code></p> </li> 
   <li> <p><code>actor</code> 调用者。这里相当于转账方</p> </li> 
   <li> <p><code>permission</code> 使用的权限类型</p> </li> 
   <li> <p><code>data</code> 之前生成的<code>bin</code>字符串</p> </li> 
   <li> <p><code>signatures</code> 签署交易后生成的签名字符串</p> </li> 
  </ul>
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/push_transaction

params
{
  "compression": "none",
  "transaction": {
    "expiration": "2018-09-11T05:59:10.000",
    "ref_block_num": 13800828,
    "ref_block_prefix": 171729965,
    "context_free_actions": [],
    "actions": [
        {
            "account": "eosio.token",
            "name": "transfer",
            "authorization": [
                {
                    "actor": "testnetyy111",
                    "permission": "active"
                }
            ],
            "data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265"
        }
    ],
    "transaction_extensions": []
  },
  "signatures": [
        "SIG_K1_K9eDsXiqEMkJs8wPwEjiN6hL1h2Bm3gGQtUheidFczWNdBmDF24AUuPmiosi9CwtEW3jPFPao7HYWLJ63ic3TggjnoKtJF"
   ]
}

return
{
    "transaction_id": "4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc",
    "processed": {
        "id": "4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc",
        "receipt": {
            "status": "executed",
            "cpu_usage_us": 1537,
            "net_usage_words": 17
        },
        "elapsed": 1537,
        "net_usage": 136,
        "scheduled": false,
        "action_traces": [
            {
                "receipt": {
                    "receiver": "eosio.token",
                    "act_digest": "45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e",
                    "global_sequence": 32142292,
                    "recv_sequence": 1716642,
                    "auth_sequence": [
                        [
                            "testnetyy111",
                            37
                        ]
                    ],
                    "code_sequence": 3,
                    "abi_sequence": 3
                },
                "act": {
                    "account": "eosio.token",
                    "name": "transfer",
                    "authorization": [
                        {
                            "actor": "testnetyy111",
                            "permission": "active"
                        }
                    ],
                    "data": {
                        "from": "testnetyy111",
                        "to": "testneths111",
                        "quantity": "100.0000 EOS",
                        "memo": "hi there"
                    },
                    "hex_data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265"
                },
                "elapsed": 942,
                "cpu_usage": 0,
                "console": "",
                "total_cpu_usage": 0,
                "trx_id": "4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc",
                "inline_traces": [
                    {
                        "receipt": {
                            "receiver": "testnetyy111",
                            "act_digest": "45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e",
                            "global_sequence": 32142293,
                            "recv_sequence": 16,
                            "auth_sequence": [
                                [
                                    "testnetyy111",
                                    38
                                ]
                            ],
                            "code_sequence": 3,
                            "abi_sequence": 3
                        },
                        "act": {
                            "account": "eosio.token",
                            "name": "transfer",
                            "authorization": [
                                {
                                    "actor": "testnetyy111",
                                    "permission": "active"
                                }
                            ],
                            "data": {
                                "from": "testnetyy111",
                                "to": "testneths111",
                                "quantity": "100.0000 EOS",
                                "memo": "hi there"
                            },
                            "hex_data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265"
                        },
                        "elapsed": 100,
                        "cpu_usage": 0,
                        "console": "",
                        "total_cpu_usage": 0,
                        "trx_id": "4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc",
                        "inline_traces": []
                    },
                    {
                        "receipt": {
                            "receiver": "testneths111",
                            "act_digest": "45d232c72b5ca003627bc411ff9881286fd411239ceac528b98e6fb33a50919e",
                            "global_sequence": 32142294,
                            "recv_sequence": 7,
                            "auth_sequence": [
                                [
                                    "testnetyy111",
                                    39
                                ]
                            ],
                            "code_sequence": 3,
                            "abi_sequence": 3
                        },
                        "act": {
                            "account": "eosio.token",
                            "name": "transfer",
                            "authorization": [
                                {
                                    "actor": "testnetyy111",
                                    "permission": "active"
                                }
                            ],
                            "data": {
                                "from": "testnetyy111",
                                "to": "testneths111",
                                "quantity": "100.0000 EOS",
                                "memo": "hi there"
                            },
                            "hex_data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004454f5300000000086869207468657265"
                        },
                        "elapsed": 23,
                        "cpu_usage": 0,
                        "console": "",
                        "total_cpu_usage": 0,
                        "trx_id": "4efb2687ef59c9a677da68264eb409d71aca66d7e3df4b35ee34f59e13783ffc",
                        "inline_traces": []
                    }
                ]
            }
        ],
        "except": null
    }
}
</code></pre> 
  <h3>3.1.8 查询转账完成后的余额</h3> 
  <pre class="has">
<code>testnetyy111  "9541.6587 EOS"
testneths111  "100.0000 EOS"
</code></pre> 
  <h2>3.2 在测试网络转账代币</h2> 
  <h3>3.2.1 先查询余额</h3> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/get_currency_balance

params
{"code":"testnetyy111", "account":"testnetyy111", "symbol":"ray"}
{"code":"testnetyy111", "account":"testneths111", "symbol":"ray"}

return

testnetyy111
[
    "99999800.0000 RAY"
]
testneths111
[
    "200.0000 RAY"
]
</code></pre> 
  <h3>3.2.2 将交易信息由JSON格式序列化为BIN格式字符串</h3> 
  <p>从<code>testnetyy111</code>转<code>100</code> RAY给<code>testneths111</code>：</p> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/abi_json_to_bin

params
{"code":"testnetyy111","action":"transfer","args":{"from":"testnetyy111","to":"testneths111","quantity":"100.0000 RAY", "memo":"hello there"}}

return
{
    "binargs": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265"
}
</code></pre> 
  <h3>3.2.3 获取当前最新的区块编号</h3> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/get_info

params
无

return
{
    "server_version": "cc9decff",
    "chain_id": "038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca",
    "head_block_num": 13807658,
    "last_irreversible_block_num": 13807329,
    "last_irreversible_block_id": "00d2aee1e209a3a21f0c1bf3a9b3b79322c27cb48353d9e28f17286b0daaa58b",
    "head_block_id": "00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6",
    "head_block_time": "2018-09-11T06:36:50.000",
    "head_block_producer": "astraealions",
    "virtual_block_cpu_limit": 200000000,
    "virtual_block_net_limit": 1048576000,
    "block_cpu_limit": 199900,
    "block_net_limit": 1048576,
    "server_version_string": "v1.2.4-dirty"
}
</code></pre> 
  <h3>3.2.4 根据区块编号获取区块详情</h3> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/get_block

params
{"block_num_or_id":"13807658"}

return
{
    "timestamp": "2018-09-11T06:36:50.000",
    "producer": "astraealions",
    "confirmed": 0,
    "previous": "00d2b029ac9a6eb269c6ea4f8bb3f2961d948f1f0ca3cd0cc4640ceadc95d37b",
    "transaction_mroot": "0000000000000000000000000000000000000000000000000000000000000000",
    "action_mroot": "0b1b4f510e0cdd272052fe0f3f9b1e74c7c6f83253409d943c3394eefbb7762e",
    "schedule_version": 219,
    "new_producers": null,
    "header_extensions": [],
    "producer_signature": "SIG_K1_KZZ4giS7WxbSt3i6rcdZqgBWGzpE9XXq8A88kkSDDt9s8MbB2Vs1VEdMDoGYAeqTVUqX25xszU2cBwfHkbEvooPnZSm5FR",
    "transactions": [],
    "block_extensions": [],
    "id": "00d2b02afdedb3e0f487026946a7a56be8f331aecebb8b04faff03cf566a0fb6",
    "block_num": 13807658,
    "ref_block_prefix": 1761773556
}
</code></pre> 
  <h3>3.2.5 筛选出签署交易需要的公钥</h3> 
  <p>这里省略这一步了，因为我们明确知道需要的公钥为<code>EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc</code></p> 
  <h3>3.2.6 签署交易</h3> 
  <blockquote> 
   <p>这里的参数<code>account</code>变为<code>testnetyy111</code>，因为其是代币合约</p> 
  </blockquote> 
  <pre class="has">
<code>api
http://127.0.0.1:8888/v1/wallet/sign_transaction

params
[{
        "ref_block_num": 13807658,
        "ref_block_prefix": 1761773556,
        "expiration": "2018-09-11T06:56:50.000",
        "actions": [{
            "account": "testnetyy111",
            "name": "transfer",
            "authorization": [{
                "actor": "testnetyy111",
                "permission": "active"
            }],
            "data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265"
        }],
        "signatures": []
    },
    ["EOS6Z7mUQeFC2cQTT3xMyZh2wsLQoHih1bTMgRhr3dbichprTi7Rc"], "038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca"
]

return
{
    "expiration": "2018-09-11T06:56:50",
    "ref_block_num": 45098,
    "ref_block_prefix": 1761773556,
    "max_net_usage_words": 0,
    "max_cpu_usage_ms": 0,
    "delay_sec": 0,
    "context_free_actions": [],
    "actions": [
        {
            "account": "testnetyy111",
            "name": "transfer",
            "authorization": [
                {
                    "actor": "testnetyy111",
                    "permission": "active"
                }
            ],
            "data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265"
        }
    ],
    "transaction_extensions": [],
    "signatures": [
        "SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX"
    ],
    "context_free_data": []
}
</code></pre> 
  <h3>3.2.7 提交交易</h3> 
  <pre class="has">
<code>api
http://jungle.cryptolions.io:18888/v1/chain/push_transaction

params
{
  "compression": "none",
  "transaction": {
    "expiration": "2018-09-11T06:56:50.000",
    "ref_block_num": 13807658,
    "ref_block_prefix": 1761773556,
    "context_free_actions": [],
    "actions": [
        {
            "account": "testnetyy111",
            "name": "transfer",
            "authorization": [
                {
                    "actor": "testnetyy111",
                    "permission": "active"
                }
            ],
            "data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265"
        }
    ],
    "transaction_extensions": []
  },
  "signatures": [
        "SIG_K1_KXFAydwhD6u74pxQcTakiGCjtSuUw9PBsFb7ETxh1ULqjFkXqfyaoL34TkEmZi7iBTgUQZqUJRcVYYkrLWZxbVybRUArNX"
   ]
}

return
{
    "transaction_id": "27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b",
    "processed": {
        "id": "27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b",
        "receipt": {
            "status": "executed",
            "cpu_usage_us": 1176,
            "net_usage_words": 17
        },
        "elapsed": 1176,
        "net_usage": 136,
        "scheduled": false,
        "action_traces": [
            {
                "receipt": {
                    "receiver": "testnetyy111",
                    "act_digest": "28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e",
                    "global_sequence": 32149270,
                    "recv_sequence": 17,
                    "auth_sequence": [
                        [
                            "testnetyy111",
                            40
                        ]
                    ],
                    "code_sequence": 1,
                    "abi_sequence": 1
                },
                "act": {
                    "account": "testnetyy111",
                    "name": "transfer",
                    "authorization": [
                        {
                            "actor": "testnetyy111",
                            "permission": "active"
                        }
                    ],
                    "data": {
                        "from": "testnetyy111",
                        "to": "testneths111",
                        "quantity": "100.0000 RAY",
                        "memo": "hello there"
                    },
                    "hex_data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265"
                },
                "elapsed": 782,
                "cpu_usage": 0,
                "console": "",
                "total_cpu_usage": 0,
                "trx_id": "27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b",
                "inline_traces": [
                    {
                        "receipt": {
                            "receiver": "testneths111",
                            "act_digest": "28d41460e20878bc412281b80c4d46ce174a4a48e8c7caf9ef28a13383e72d9e",
                            "global_sequence": 32149271,
                            "recv_sequence": 8,
                            "auth_sequence": [
                                [
                                    "testnetyy111",
                                    41
                                ]
                            ],
                            "code_sequence": 1,
                            "abi_sequence": 1
                        },
                        "act": {
                            "account": "testnetyy111",
                            "name": "transfer",
                            "authorization": [
                                {
                                    "actor": "testnetyy111",
                                    "permission": "active"
                                }
                            ],
                            "data": {
                                "from": "testnetyy111",
                                "to": "testneths111",
                                "quantity": "100.0000 RAY",
                                "memo": "hello there"
                            },
                            "hex_data": "1042f03eab99b1ca1042c02dab99b1ca40420f000000000004524159000000000b68656c6c6f207468657265"
                        },
                        "elapsed": 14,
                        "cpu_usage": 0,
                        "console": "",
                        "total_cpu_usage": 0,
                        "trx_id": "27c120548fee4e0ca31bc779ba85eb61ea4a2c5204043b696800d6cdb11da48b",
                        "inline_traces": []
                    }
                ]
            }
        ],
        "except": null
    }
}
</code></pre> 
  <h3>3.2.8 查询转账完成后的余额</h3> 
  <pre class="has">
<code>testnetyy111 "99999700.0000 RAY"
testneths111 "300.0000 RAY"
</code></pre> 
  <h2>&nbsp;</h2> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/akai9898/article/details/83447788,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/akai9898/article/details/83447788,&quot;}">阅读更多</a> 
</div> 
<script>
						(function(){
							function setArticleH(btnReadmore,posi){
								var winH = $(window).height();
								var articleBox = $("div.article_content");
								var artH = articleBox.height();
								if(artH > winH*posi){
									articleBox.css({
										'height':winH*posi+'px',
										'overflow':'hidden'
									})
									btnReadmore.click(function(){
										articleBox.removeAttr("style");
										$(this).parent().remove();
									})
								}else{
									btnReadmore.parent().remove();
								}
							}
							var btnReadmore = $("#btn-readmore");
							if(btnReadmore.length>0){
								if(currentUserName){
									setArticleH(btnReadmore,3);
								}else{
									setArticleH(btnReadmore,1.2);
								}
							}
						})()
					</script>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
