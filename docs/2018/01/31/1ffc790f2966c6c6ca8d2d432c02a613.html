<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>虚拟货币山寨币开发流程 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="虚拟货币山寨币开发流程" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Key: altcoin generate, make altcoin, bitcoin, coingen 关键字： 制作山寨币，山寨币，比特币 &nbsp; 源代码地址： https://github.com/imharrywu/fastcoin &nbsp; 程序猿朋友可以自己动手编译生成安装包，有问题可以直接微信公众号“”AI快递“”(注明：csdn)，也欢迎程序猿朋友PullRequest给我，只有知识共享才能促进比特币的繁荣。 &nbsp; 可以支持任何算法（sha256，scrypt，x11，x13，nist，grostel，以及这些算法的串联）和参数定制。 &nbsp; 目前预先内置了比特币的SHA256和莱特币的scypt，以及SHA3-256(KECCAK)。 &nbsp; 在线编译目前提供三种安装包： 1，linux/unix的daemon程序（带钱包功能） 2，Mac钱包安装包&nbsp; 3，windows钱包安装包 &nbsp; &nbsp; 1、 &nbsp;截图预览 (1) 安装图1 （2）安装图2 （3）安装图3 （4）安装图4 （5）安装图5 &nbsp; （6）概览图 已经挖到3个block 奖励了300个FTC （7）交易记录图 （8）点击显示交易细节 显示为挖矿所得 并且还没有确认 （9）版权页 （10）调试窗口 &nbsp; （11）显示已经连接的p2p网络节点 一个在虚拟机里面运行的节点 &nbsp; （12）2个节点构成的p2p通信网络 &nbsp; 2、 山寨币修改步骤： （1）迁出最新的比特币源代码 比特币官方代码:&nbsp;https://github.com/bitcoin/bitcoin 山寨币代码地址（紧跟bitcoin更新）:https://github.com/imharrywu/fastcoin git clone&nbsp;https://github.com/imharrywu/fastcoin&nbsp; &nbsp; 一下修改都是一些代码片段，请用eclipse打开迁出的代码，对照查看。 &nbsp; （2）修改创世块 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Build&nbsp;the&nbsp;genesis&nbsp;block.&nbsp;Note&nbsp;that&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;genesis&nbsp;coinbase&nbsp;cannot&nbsp; &nbsp;*&nbsp;be&nbsp;spent&nbsp;as&nbsp;it&nbsp;did&nbsp;not&nbsp;originally&nbsp;exist&nbsp;in&nbsp;the&nbsp;database.&nbsp; &nbsp;*&nbsp;&nbsp; &nbsp;*&nbsp;CBlock(hash=000000000019d6,&nbsp;ver=1,&nbsp;hashPrevBlock=00000000000000,&nbsp;hashMerkleRoot=4a5e1e,&nbsp;nTime=1231006505,&nbsp;nBits=1d00ffff,&nbsp;nNonce=2083236893,&nbsp;vtx=1)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;CTransaction(hash=4a5e1e,&nbsp;ver=1,&nbsp;vin.size=1,&nbsp;vout.size=1,&nbsp;nLockTime=0)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxIn(COutPoint(000000,&nbsp;-1),&nbsp;coinbase&nbsp;04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxOut(nValue=50.00000000,&nbsp;scriptPubKey=0x5F1DF16B2B704C8A578D0B)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;vMerkleTree:&nbsp;4a5e1e&nbsp; &nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp; //&nbsp;HarryWu,&nbsp;generate&nbsp;genesis&nbsp;block&nbsp;by&nbsp;genesis.py&nbsp;as&nbsp;following:&nbsp;&nbsp; //&nbsp;&nbsp; //&nbsp;localhost&nbsp;genesis&nbsp;#&nbsp;python&nbsp;genesis.py&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-t&nbsp;$(date&nbsp;+%s)&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-z&nbsp;&quot;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&quot;&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-a&nbsp;SHA256&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-p&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-v&nbsp;10000000000&nbsp;&nbsp; //&nbsp;Raw&nbsp;block&nbsp;data:&nbsp;04ffff001d01043b7368616e676861692073746f636b20696e64657820636c6f73656420617420323334332e35372c206f6e203234746820536570742e2c2032303134&nbsp;&nbsp; //&nbsp;algorithm:&nbsp;SHA256&nbsp;&nbsp; //&nbsp;merkle&nbsp;hash:&nbsp;1c395aad7fab156523a095a869d3fcdf3249a8a97c8d7337adb4f33d826da32b&nbsp;&nbsp; //&nbsp;pszTimestamp:&nbsp;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&nbsp;&nbsp; //&nbsp;pubkey:&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&nbsp;&nbsp; //&nbsp;time:&nbsp;1411650667&nbsp;&nbsp; //&nbsp;bits:&nbsp;0x1d00ffff&nbsp;&nbsp; //&nbsp;Searching&nbsp;for&nbsp;genesis&nbsp;hash..&nbsp;&nbsp; //&nbsp;&nbsp; //&nbsp;nonce:&nbsp;1456993276&nbsp;&nbsp; //&nbsp;genesis&nbsp;hash:&nbsp;000000004df0288b461e17d9a20e557fd296861c604f1944eb9e2cca866af0a5&nbsp;&nbsp; &nbsp;&nbsp; const&nbsp;char*&nbsp;pszTimestamp&nbsp;=&nbsp;&quot;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&quot;;&nbsp;&nbsp; CMutableTransaction&nbsp;txNew;&nbsp;&nbsp; txNew.vin.resize(1);&nbsp;&nbsp; txNew.vout.resize(1);&nbsp;&nbsp; txNew.vin[0].scriptSig&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;0x1d00ffff&nbsp;&lt;&lt;&nbsp;CScriptNum(4)&nbsp;&lt;&lt;&nbsp;vector&lt;unsigned&nbsp;char&gt;((const&nbsp;unsigned&nbsp;char*)pszTimestamp,&nbsp;(const&nbsp;unsigned&nbsp;char*)pszTimestamp&nbsp;+&nbsp;strlen(pszTimestamp));&nbsp;&nbsp; txNew.vout[0].nValue&nbsp;=&nbsp;nGenesisSubsidy&nbsp;*&nbsp;COIN;&nbsp;&nbsp; txNew.vout[0].scriptPubKey&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;ParseHex(&quot;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&quot;)&nbsp;&lt;&lt;&nbsp;OP_CHECKSIG;&nbsp;&nbsp; genesis.vtx.push_back(txNew);&nbsp;&nbsp; genesis.hashPrevBlock&nbsp;=&nbsp;0;&nbsp;&nbsp; genesis.hashMerkleRoot&nbsp;=&nbsp;genesis.BuildMerkleTree();&nbsp;&nbsp; genesis.nVersion&nbsp;=&nbsp;1;&nbsp;&nbsp; genesis.nTime&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1411666331;&nbsp;&nbsp; genesis.nBits&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0x1d00ffff;&nbsp;&nbsp; genesis.nNonce&nbsp;&nbsp;&nbsp;=&nbsp;2056985438;&nbsp;&nbsp; &nbsp;&nbsp; hashGenesisBlock&nbsp;=&nbsp;genesis.GetHash();&nbsp;&nbsp; assert(hashGenesisBlock&nbsp;==&nbsp;uint256(&quot;0x0000000061b1aca334b059920fed7bace2336ea4d23d63428c7aee04da49e942&quot;));&nbsp;&nbsp; assert(genesis.hashMerkleRoot&nbsp;==&nbsp;uint256(&quot;0x7bf229f629a6666596c1ce57117c28d1d29299e8a5303347929bd70847c49adb&quot;));&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （3）修改网络协议魔数 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; 0xgoodcafe(好咖啡的意思），大家可以自己选择，但是也有一些基本建议，看上面那个英文注释就好了，就是和某些常用的字符集可用字段不要冲突。 &nbsp; 另外：对应的修改TESTNET和REGTESTNET的参数 &nbsp; （4）修改地址前缀 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;//&nbsp;F&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;//&nbsp;T&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;//&nbsp;7&nbsp;prefix&nbsp;&nbsp; base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp; base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp; 有一个wiki的对照表可以用来悬在公钥和脚本地址的前缀，但是这个表不使用私钥等（因为长度不一样，规律不一样）。 &nbsp; &nbsp; （5）修改网络端口 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp; 修改了nDefaultPort=9999，比特币默认是8333 &nbsp; 另外同时修改一下TESTNET和REGTESTNET的端口配置，一般加10000和20000即可 &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Testnet&nbsp;(v3)&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;CTestNetParams&nbsp;:&nbsp;public&nbsp;CMainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CTestNetParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::TESTNET;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;test&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0xC0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x1d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;045d2d29beffb0a0cbea44f266286ff8b1d11c035538fbb4dadcf6b4073b08f318afea74f01d5a3782e72a22273fb01ab40e99d93adff488236585cc8031323e7c&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;19999;&nbsp;&nbsp; &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Regression&nbsp;test&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;CRegTestParams&nbsp;:&nbsp;public&nbsp;CTestNetParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CRegTestParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::REGTEST;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;regtest&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x0b;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0xad;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;29999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;1;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （6）修改种子网络连接参数 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy //vSeeds.push_back(CDNSSeedData(&quot;bitcoin.sipa.be&quot;,&nbsp;&quot;seed.bitcoin.sipa.be&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bluematt.me&quot;,&nbsp;&quot;dnsseed.bluematt.me&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;dashjr.org&quot;,&nbsp;&quot;dnsseed.bitcoin.dashjr.org&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bitcoinstats.com&quot;,&nbsp;&quot;seed.bitcoinstats.com&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bitnodes.io&quot;,&nbsp;&quot;seed.bitnodes.io&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;xf2.org&quot;,&nbsp;&quot;bitseed.xf2.org&quot;));&nbsp;&nbsp; &nbsp;&nbsp; base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;//&nbsp;F&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;//&nbsp;T&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;//&nbsp;7&nbsp;prefix&nbsp;&nbsp; base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp; base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp; &nbsp;&nbsp; //convertSeed6(vFixedSeeds,&nbsp;pnSeed6_main,&nbsp;ARRAYLEN(pnSeed6_main));&nbsp;&nbsp; &nbsp; &nbsp; 如果你有7x24在线的服务器运行节点，那么请在这里加入他们的地址，可以是dns也可以是ip地址（v4，v6，--enable-ipv6）。 如果没有的话，可以考虑和我一样暂时注释掉，在运行时候指定连接参数-addnoe=123.123.123.123 或者-dns -addnode=mynode.domain.com 对应的修改一下TESTNET和REGTESTNET的网络节点地址。 &nbsp; （7）修改工作量机制 源文件 miner.cpp 比特币在函数ScanHash（）里面搜索随机数， &nbsp; [cpp]&nbsp;view plain&nbsp;copy //&nbsp;&nbsp; //&nbsp;ScanHash&nbsp;scans&nbsp;nonces&nbsp;looking&nbsp;for&nbsp;a&nbsp;hash&nbsp;with&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits.&nbsp;&nbsp; //&nbsp;The&nbsp;nonce&nbsp;is&nbsp;usually&nbsp;preserved&nbsp;between&nbsp;calls,&nbsp;but&nbsp;periodically&nbsp;or&nbsp;if&nbsp;the&nbsp;&nbsp; //&nbsp;nonce&nbsp;is&nbsp;0xffff0000&nbsp;or&nbsp;above,&nbsp;the&nbsp;block&nbsp;is&nbsp;rebuilt&nbsp;and&nbsp;nNonce&nbsp;starts&nbsp;over&nbsp;at&nbsp;&nbsp; //&nbsp;zero.&nbsp;&nbsp; //&nbsp;&nbsp; bool&nbsp;static&nbsp;ScanHash(const&nbsp;CBlockHeader&nbsp;*pblock,&nbsp;uint32_t&amp;&nbsp;nNonce,&nbsp;uint256&nbsp;*phash)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//CHash256&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//ss&nbsp;&lt;&lt;&nbsp;*pblock;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(true)&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNonce++;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;last&nbsp;4&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;(the&nbsp;nonce)&nbsp;to&nbsp;a&nbsp;copy&nbsp;of&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;double-SHA256&nbsp;state,&nbsp;and&nbsp;compute&nbsp;the&nbsp;result.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//CHash256(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)phash);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*phash&nbsp;=&nbsp;pblock-&gt;ComputePowHash(nNonce);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Return&nbsp;the&nbsp;nonce&nbsp;if&nbsp;the&nbsp;hash&nbsp;has&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;caller&nbsp;will&nbsp;check&nbsp;if&nbsp;it&nbsp;has&nbsp;enough&nbsp;to&nbsp;reach&nbsp;the&nbsp;target&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(((uint16_t*)phash)[15]&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;nothing&nbsp;found&nbsp;after&nbsp;trying&nbsp;for&nbsp;a&nbsp;while,&nbsp;return&nbsp;-1&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((nNonce&nbsp;&amp;&nbsp;0xffff)&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((nNonce&nbsp;&amp;&nbsp;0xfff)&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boost::this_thread::interruption_point();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; }&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 在函数BitcoinMiner()里面创建新的block，设定时间戳(扰动1)，获取mempool里面的最新交易(扰动2)，调用ScanHash()搜索随机数(扰动3），直到找到满足条件的hash。 另外比特币的工作量证明的hash同时用作这个block的索引，litecoin里面这2个概念是区分的对待的(sha256的hash作为索引，scrypt出来的pow hash作为工作量证明)。 注意：设置独立挖矿的条件(chainparams.cpp里面设置) &nbsp; [cpp]&nbsp;view plain&nbsp;copy fMiningRequiresPeers&nbsp;=&nbsp;!true;&nbsp;//&nbsp;See&nbsp;BitcoinMiner()&nbsp;for&nbsp;details.&nbsp;&nbsp; 挖矿代码： &nbsp; &nbsp; [cpp]&nbsp;view plain&nbsp;copy void&nbsp;static&nbsp;BitcoinMiner(CWallet&nbsp;*pwallet)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;FastCoinMiner&nbsp;started\n&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;SetThreadPriority(THREAD_PRIORITY_LOWEST);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;RenameThread(&quot;fastcoin-miner&quot;);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Each&nbsp;thread&nbsp;has&nbsp;its&nbsp;own&nbsp;key&nbsp;and&nbsp;counter&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CReserveKey&nbsp;reservekey(pwallet);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nExtraNonce&nbsp;=&nbsp;0;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(true)&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Params().MiningRequiresPeers())&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Busy-wait&nbsp;for&nbsp;the&nbsp;network&nbsp;to&nbsp;come&nbsp;online&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;waste&nbsp;time&nbsp;mining&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;on&nbsp;an&nbsp;obsolete&nbsp;chain.&nbsp;In&nbsp;regtest&nbsp;mode&nbsp;we&nbsp;expect&nbsp;to&nbsp;fly&nbsp;solo.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(vNodes.empty())&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MilliSleep(1000);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Create&nbsp;new&nbsp;block&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nTransactionsUpdatedLast&nbsp;=&nbsp;mempool.GetTransactionsUpdated();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlockIndex*&nbsp;pindexPrev&nbsp;=&nbsp;chainActive.Tip();&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_ptr&lt;CBlockTemplate&gt;&nbsp;pblocktemplate(CreateNewBlockWithKey(reservekey));&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!pblocktemplate.get())&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;Error&nbsp;in&nbsp;FastCoinMiner:&nbsp;Keypool&nbsp;ran&nbsp;out,&nbsp;please&nbsp;call&nbsp;keypoolrefill&nbsp;before&nbsp;restarting&nbsp;the&nbsp;mining&nbsp;thread\n&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlock&nbsp;*pblock&nbsp;=&nbsp;&amp;pblocktemplate-&gt;block;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IncrementExtraNonce(pblock,&nbsp;pindexPrev,&nbsp;nExtraNonce);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;Running&nbsp;FastCoinMiner&nbsp;with&nbsp;%u&nbsp;transactions&nbsp;in&nbsp;block&nbsp;(%u&nbsp;bytes)\n&quot;,&nbsp;pblock-&gt;vtx.size(),&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::GetSerializeSize(*pblock,&nbsp;SER_NETWORK,&nbsp;PROTOCOL_VERSION));&nbsp;&nbsp; 博主稍作修改，设置了几个预置的hash算法（sha256，scrypt，keccak（即SHA3))，可以通过block的版本号区分，那么在scanhash里面调用ComputePowHash的时候，可以选择不同的pow算法，甚至你可以把这些算法串联起来，以增加算法被破解的方攻击性。 &nbsp; 看代码吧： &nbsp; [cpp]&nbsp;view plain&nbsp;copy uint256&nbsp;CBlockHeader::ComputePowHash(uint32_t&nbsp;nNonce)&nbsp;const&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;1&nbsp;||&nbsp;nVersion&nbsp;==&nbsp;2){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;SHA256+SHA256&nbsp;to&nbsp;make&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow&nbsp;hasher;&nbsp;//&nbsp;TODO:&nbsp;Create&nbsp;a&nbsp;new&nbsp;PowHasher&nbsp;named&nbsp;CPowHash256&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;3){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Scrypt&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;4){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Scrypt+SHA256&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;5){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Keccak(1088,512,256)&nbsp;or&nbsp;Known&nbsp;as&nbsp;SHA3-256(fips202draft)&nbsp;Pow&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Abort,&nbsp;unknown&nbsp;block&nbsp;version.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(false);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;~(uint256)0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; }&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （8）修改奖励机制 参考9.3 8.1) 修改挖矿奖励的成熟时间 源代码：main.h &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp;Coinbase&nbsp;transaction&nbsp;outputs&nbsp;can&nbsp;only&nbsp;be&nbsp;spent&nbsp;after&nbsp;this&nbsp;number&nbsp;of&nbsp;new&nbsp;blocks&nbsp;(network&nbsp;rule)&nbsp;*/&nbsp;&nbsp; static&nbsp;const&nbsp;int&nbsp;COINBASE_MATURITY&nbsp;=&nbsp;14;&nbsp;&nbsp; &nbsp; &nbsp; 8.2) 修改交易确认块数推荐值 源代码&nbsp;qt/transactionrecord.h &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp;UI&nbsp;model&nbsp;for&nbsp;a&nbsp;transaction.&nbsp;A&nbsp;core&nbsp;transaction&nbsp;can&nbsp;be&nbsp;represented&nbsp;by&nbsp;multiple&nbsp;UI&nbsp;transactions&nbsp;if&nbsp;it&nbsp;has&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;multiple&nbsp;outputs.&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;TransactionRecord&nbsp;&nbsp; {&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;Type&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generated,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToAddress,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToOther,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvWithAddress,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvFromOther,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToSelf&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;Number&nbsp;of&nbsp;confirmation&nbsp;recommended&nbsp;for&nbsp;accepting&nbsp;a&nbsp;transaction&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;int&nbsp;RecommendedNumConfirmations&nbsp;=&nbsp;2;&nbsp;&nbsp; &nbsp; &nbsp; （9）修改难度配置 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nSubsidyHalvingInterval&nbsp;=&nbsp;210000;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nEnforceBlockUpgradeMajority&nbsp;=&nbsp;750;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nRejectBlockOutdatedMajority&nbsp;=&nbsp;950;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nToCheckBlockUpgradeMajority&nbsp;=&nbsp;1000;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nMinerThreads&nbsp;=&nbsp;1;&nbsp;//&nbsp;0&nbsp;for&nbsp;all&nbsp;available&nbsp;cpus.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetTimespan&nbsp;=&nbsp;60&nbsp;*&nbsp;60;&nbsp;//&nbsp;re-targeting&nbsp;every&nbsp;one&nbsp;hour&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetSpacing&nbsp;=&nbsp;1&nbsp;*&nbsp;60;&nbsp;&nbsp;//&nbsp;do&nbsp;new&nbsp;pow&nbsp;every&nbsp;1&nbsp;minutes.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nGenesisSubsidy&nbsp;=&nbsp;100;&nbsp;&nbsp; &nbsp; &nbsp; a) bnProofOfWorkLimit=~uint256(0) &gt;&gt; 32; 是一个大整数（256bit）表示，前面32个位数是0，这个参数表示全网允许的最小难度，低于这个难度的block是不会被挖掘的。 &nbsp; b) nGenesisSubsidy = 100; 初始津贴，比特币的第一个块的奖励是50个btc。 &nbsp; c) nSubsidyHavlingInterval = 210000;&nbsp; 这个参数决定了多少个block以后比特币的奖励（补贴，挖矿奖励)会减半。这个参数结合初始奖励（比如比特币50）基本可以估算全网总的货币产量（比如比特币的2100万），这个初始津贴也是可以配置的，如2）所示。比如比特币，一个等比数列求和公式就可以计算货币总量 50(1/(1 - 0.5))*210000=2100万btc。 上面2个参数在查询区块奖励的时候用到，请查看main.cpp 的 GetBlockValue(height, fees)找到细节 &nbsp; [cpp]&nbsp;view plain&nbsp;copy CAmount&nbsp;GetBlockValue(int&nbsp;nHeight,&nbsp;const&nbsp;CAmount&amp;&nbsp;nFees)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CAmount&nbsp;nSubsidy&nbsp;=&nbsp;Params().GenesisSubsidy()&nbsp;*&nbsp;COIN;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;halvings&nbsp;=&nbsp;nHeight&nbsp;/&nbsp;Params().SubsidyHalvingInterval();&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Force&nbsp;block&nbsp;reward&nbsp;to&nbsp;zero&nbsp;when&nbsp;right&nbsp;shift&nbsp;is&nbsp;undefined.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(halvings&nbsp;&gt;=&nbsp;64)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nFees;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Subsidy&nbsp;is&nbsp;cut&nbsp;in&nbsp;half&nbsp;every&nbsp;210,000&nbsp;blocks&nbsp;which&nbsp;will&nbsp;occur&nbsp;approximately&nbsp;every&nbsp;4&nbsp;years.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;nSubsidy&nbsp;&gt;&gt;=&nbsp;halvings;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nSubsidy&nbsp;+&nbsp;nFees;&nbsp;&nbsp; }&nbsp;&nbsp; 很多山寨比也是在这里修改货币分布的，比如 nHeight==1 的时候，奖励1000万个，其他块都不予奖励，这个即使预挖模式了吧。 &nbsp; 另外，关于货币分布，这里satoshi同学可能已经考虑很多，他为什么设置到很多年以后才矿源枯竭，为什么采取递减的方式，可能都是出于保护区块链的目的（timestampserver）。 d）难度调节周期 nTargetTimespan = 60 * 60; // re-targeting every one hour, 60 blocks nTargetSpacing = 1 * 60; &nbsp;// expect 1 block/minute 这里的设置是60分钟（3600秒, 因为预期60秒钟1个block，那么就是60个blocks计算新难度，否则使用上一个block的难度），重新评估难度，下一个块的挖掘可能就要使用新的难度设置了。 。 比特币的调节周期是 2周/每10分钟，也就是 2 * 7 * 24 * 6 = 2016 参考：http://bitcoindifficulty.com/blog/ https://en.bitcoin.it/wiki/Difficulty &nbsp; (10) 修改checkpoints检查 &nbsp; (11) 修改界面 &nbsp; github地址 &nbsp; TODO: 1）模板化的山寨币生成，可配置修改部分通过宏或者变量提取出来，用脚本批量替换修改。 2）矿池搭建与节点测试&nbsp;P2pool&nbsp; &amp;Poclbm 3）移动支付和网页支付 4）应用生态 5）交易备注 6）复杂交易应用(脚本，非标准交易） &nbsp; 备注： 1）记得加上-checkpoints=0 参数启动，否则，会导致daemon报错，“FastCoin is downloading blocks...” &nbsp; 阅读更多 登录后自动展开" />
<meta property="og:description" content="Key: altcoin generate, make altcoin, bitcoin, coingen 关键字： 制作山寨币，山寨币，比特币 &nbsp; 源代码地址： https://github.com/imharrywu/fastcoin &nbsp; 程序猿朋友可以自己动手编译生成安装包，有问题可以直接微信公众号“”AI快递“”(注明：csdn)，也欢迎程序猿朋友PullRequest给我，只有知识共享才能促进比特币的繁荣。 &nbsp; 可以支持任何算法（sha256，scrypt，x11，x13，nist，grostel，以及这些算法的串联）和参数定制。 &nbsp; 目前预先内置了比特币的SHA256和莱特币的scypt，以及SHA3-256(KECCAK)。 &nbsp; 在线编译目前提供三种安装包： 1，linux/unix的daemon程序（带钱包功能） 2，Mac钱包安装包&nbsp; 3，windows钱包安装包 &nbsp; &nbsp; 1、 &nbsp;截图预览 (1) 安装图1 （2）安装图2 （3）安装图3 （4）安装图4 （5）安装图5 &nbsp; （6）概览图 已经挖到3个block 奖励了300个FTC （7）交易记录图 （8）点击显示交易细节 显示为挖矿所得 并且还没有确认 （9）版权页 （10）调试窗口 &nbsp; （11）显示已经连接的p2p网络节点 一个在虚拟机里面运行的节点 &nbsp; （12）2个节点构成的p2p通信网络 &nbsp; 2、 山寨币修改步骤： （1）迁出最新的比特币源代码 比特币官方代码:&nbsp;https://github.com/bitcoin/bitcoin 山寨币代码地址（紧跟bitcoin更新）:https://github.com/imharrywu/fastcoin git clone&nbsp;https://github.com/imharrywu/fastcoin&nbsp; &nbsp; 一下修改都是一些代码片段，请用eclipse打开迁出的代码，对照查看。 &nbsp; （2）修改创世块 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Build&nbsp;the&nbsp;genesis&nbsp;block.&nbsp;Note&nbsp;that&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;genesis&nbsp;coinbase&nbsp;cannot&nbsp; &nbsp;*&nbsp;be&nbsp;spent&nbsp;as&nbsp;it&nbsp;did&nbsp;not&nbsp;originally&nbsp;exist&nbsp;in&nbsp;the&nbsp;database.&nbsp; &nbsp;*&nbsp;&nbsp; &nbsp;*&nbsp;CBlock(hash=000000000019d6,&nbsp;ver=1,&nbsp;hashPrevBlock=00000000000000,&nbsp;hashMerkleRoot=4a5e1e,&nbsp;nTime=1231006505,&nbsp;nBits=1d00ffff,&nbsp;nNonce=2083236893,&nbsp;vtx=1)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;CTransaction(hash=4a5e1e,&nbsp;ver=1,&nbsp;vin.size=1,&nbsp;vout.size=1,&nbsp;nLockTime=0)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxIn(COutPoint(000000,&nbsp;-1),&nbsp;coinbase&nbsp;04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxOut(nValue=50.00000000,&nbsp;scriptPubKey=0x5F1DF16B2B704C8A578D0B)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;vMerkleTree:&nbsp;4a5e1e&nbsp; &nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp; //&nbsp;HarryWu,&nbsp;generate&nbsp;genesis&nbsp;block&nbsp;by&nbsp;genesis.py&nbsp;as&nbsp;following:&nbsp;&nbsp; //&nbsp;&nbsp; //&nbsp;localhost&nbsp;genesis&nbsp;#&nbsp;python&nbsp;genesis.py&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-t&nbsp;$(date&nbsp;+%s)&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-z&nbsp;&quot;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&quot;&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-a&nbsp;SHA256&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-p&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&nbsp;\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-v&nbsp;10000000000&nbsp;&nbsp; //&nbsp;Raw&nbsp;block&nbsp;data:&nbsp;04ffff001d01043b7368616e676861692073746f636b20696e64657820636c6f73656420617420323334332e35372c206f6e203234746820536570742e2c2032303134&nbsp;&nbsp; //&nbsp;algorithm:&nbsp;SHA256&nbsp;&nbsp; //&nbsp;merkle&nbsp;hash:&nbsp;1c395aad7fab156523a095a869d3fcdf3249a8a97c8d7337adb4f33d826da32b&nbsp;&nbsp; //&nbsp;pszTimestamp:&nbsp;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&nbsp;&nbsp; //&nbsp;pubkey:&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&nbsp;&nbsp; //&nbsp;time:&nbsp;1411650667&nbsp;&nbsp; //&nbsp;bits:&nbsp;0x1d00ffff&nbsp;&nbsp; //&nbsp;Searching&nbsp;for&nbsp;genesis&nbsp;hash..&nbsp;&nbsp; //&nbsp;&nbsp; //&nbsp;nonce:&nbsp;1456993276&nbsp;&nbsp; //&nbsp;genesis&nbsp;hash:&nbsp;000000004df0288b461e17d9a20e557fd296861c604f1944eb9e2cca866af0a5&nbsp;&nbsp; &nbsp;&nbsp; const&nbsp;char*&nbsp;pszTimestamp&nbsp;=&nbsp;&quot;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&quot;;&nbsp;&nbsp; CMutableTransaction&nbsp;txNew;&nbsp;&nbsp; txNew.vin.resize(1);&nbsp;&nbsp; txNew.vout.resize(1);&nbsp;&nbsp; txNew.vin[0].scriptSig&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;0x1d00ffff&nbsp;&lt;&lt;&nbsp;CScriptNum(4)&nbsp;&lt;&lt;&nbsp;vector&lt;unsigned&nbsp;char&gt;((const&nbsp;unsigned&nbsp;char*)pszTimestamp,&nbsp;(const&nbsp;unsigned&nbsp;char*)pszTimestamp&nbsp;+&nbsp;strlen(pszTimestamp));&nbsp;&nbsp; txNew.vout[0].nValue&nbsp;=&nbsp;nGenesisSubsidy&nbsp;*&nbsp;COIN;&nbsp;&nbsp; txNew.vout[0].scriptPubKey&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;ParseHex(&quot;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&quot;)&nbsp;&lt;&lt;&nbsp;OP_CHECKSIG;&nbsp;&nbsp; genesis.vtx.push_back(txNew);&nbsp;&nbsp; genesis.hashPrevBlock&nbsp;=&nbsp;0;&nbsp;&nbsp; genesis.hashMerkleRoot&nbsp;=&nbsp;genesis.BuildMerkleTree();&nbsp;&nbsp; genesis.nVersion&nbsp;=&nbsp;1;&nbsp;&nbsp; genesis.nTime&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1411666331;&nbsp;&nbsp; genesis.nBits&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0x1d00ffff;&nbsp;&nbsp; genesis.nNonce&nbsp;&nbsp;&nbsp;=&nbsp;2056985438;&nbsp;&nbsp; &nbsp;&nbsp; hashGenesisBlock&nbsp;=&nbsp;genesis.GetHash();&nbsp;&nbsp; assert(hashGenesisBlock&nbsp;==&nbsp;uint256(&quot;0x0000000061b1aca334b059920fed7bace2336ea4d23d63428c7aee04da49e942&quot;));&nbsp;&nbsp; assert(genesis.hashMerkleRoot&nbsp;==&nbsp;uint256(&quot;0x7bf229f629a6666596c1ce57117c28d1d29299e8a5303347929bd70847c49adb&quot;));&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （3）修改网络协议魔数 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; 0xgoodcafe(好咖啡的意思），大家可以自己选择，但是也有一些基本建议，看上面那个英文注释就好了，就是和某些常用的字符集可用字段不要冲突。 &nbsp; 另外：对应的修改TESTNET和REGTESTNET的参数 &nbsp; （4）修改地址前缀 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;//&nbsp;F&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;//&nbsp;T&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;//&nbsp;7&nbsp;prefix&nbsp;&nbsp; base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp; base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp; 有一个wiki的对照表可以用来悬在公钥和脚本地址的前缀，但是这个表不使用私钥等（因为长度不一样，规律不一样）。 &nbsp; &nbsp; （5）修改网络端口 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp; 修改了nDefaultPort=9999，比特币默认是8333 &nbsp; 另外同时修改一下TESTNET和REGTESTNET的端口配置，一般加10000和20000即可 &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Testnet&nbsp;(v3)&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;CTestNetParams&nbsp;:&nbsp;public&nbsp;CMainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CTestNetParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::TESTNET;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;test&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0xC0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x1d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;045d2d29beffb0a0cbea44f266286ff8b1d11c035538fbb4dadcf6b4073b08f318afea74f01d5a3782e72a22273fb01ab40e99d93adff488236585cc8031323e7c&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;19999;&nbsp;&nbsp; &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Regression&nbsp;test&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;CRegTestParams&nbsp;:&nbsp;public&nbsp;CTestNetParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CRegTestParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::REGTEST;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;regtest&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x0b;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0xad;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;29999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;1;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （6）修改种子网络连接参数 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy //vSeeds.push_back(CDNSSeedData(&quot;bitcoin.sipa.be&quot;,&nbsp;&quot;seed.bitcoin.sipa.be&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bluematt.me&quot;,&nbsp;&quot;dnsseed.bluematt.me&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;dashjr.org&quot;,&nbsp;&quot;dnsseed.bitcoin.dashjr.org&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bitcoinstats.com&quot;,&nbsp;&quot;seed.bitcoinstats.com&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bitnodes.io&quot;,&nbsp;&quot;seed.bitnodes.io&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;xf2.org&quot;,&nbsp;&quot;bitseed.xf2.org&quot;));&nbsp;&nbsp; &nbsp;&nbsp; base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;//&nbsp;F&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;//&nbsp;T&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;//&nbsp;7&nbsp;prefix&nbsp;&nbsp; base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp; base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp; &nbsp;&nbsp; //convertSeed6(vFixedSeeds,&nbsp;pnSeed6_main,&nbsp;ARRAYLEN(pnSeed6_main));&nbsp;&nbsp; &nbsp; &nbsp; 如果你有7x24在线的服务器运行节点，那么请在这里加入他们的地址，可以是dns也可以是ip地址（v4，v6，--enable-ipv6）。 如果没有的话，可以考虑和我一样暂时注释掉，在运行时候指定连接参数-addnoe=123.123.123.123 或者-dns -addnode=mynode.domain.com 对应的修改一下TESTNET和REGTESTNET的网络节点地址。 &nbsp; （7）修改工作量机制 源文件 miner.cpp 比特币在函数ScanHash（）里面搜索随机数， &nbsp; [cpp]&nbsp;view plain&nbsp;copy //&nbsp;&nbsp; //&nbsp;ScanHash&nbsp;scans&nbsp;nonces&nbsp;looking&nbsp;for&nbsp;a&nbsp;hash&nbsp;with&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits.&nbsp;&nbsp; //&nbsp;The&nbsp;nonce&nbsp;is&nbsp;usually&nbsp;preserved&nbsp;between&nbsp;calls,&nbsp;but&nbsp;periodically&nbsp;or&nbsp;if&nbsp;the&nbsp;&nbsp; //&nbsp;nonce&nbsp;is&nbsp;0xffff0000&nbsp;or&nbsp;above,&nbsp;the&nbsp;block&nbsp;is&nbsp;rebuilt&nbsp;and&nbsp;nNonce&nbsp;starts&nbsp;over&nbsp;at&nbsp;&nbsp; //&nbsp;zero.&nbsp;&nbsp; //&nbsp;&nbsp; bool&nbsp;static&nbsp;ScanHash(const&nbsp;CBlockHeader&nbsp;*pblock,&nbsp;uint32_t&amp;&nbsp;nNonce,&nbsp;uint256&nbsp;*phash)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//CHash256&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//ss&nbsp;&lt;&lt;&nbsp;*pblock;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(true)&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNonce++;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;last&nbsp;4&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;(the&nbsp;nonce)&nbsp;to&nbsp;a&nbsp;copy&nbsp;of&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;double-SHA256&nbsp;state,&nbsp;and&nbsp;compute&nbsp;the&nbsp;result.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//CHash256(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)phash);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*phash&nbsp;=&nbsp;pblock-&gt;ComputePowHash(nNonce);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Return&nbsp;the&nbsp;nonce&nbsp;if&nbsp;the&nbsp;hash&nbsp;has&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;caller&nbsp;will&nbsp;check&nbsp;if&nbsp;it&nbsp;has&nbsp;enough&nbsp;to&nbsp;reach&nbsp;the&nbsp;target&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(((uint16_t*)phash)[15]&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;nothing&nbsp;found&nbsp;after&nbsp;trying&nbsp;for&nbsp;a&nbsp;while,&nbsp;return&nbsp;-1&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((nNonce&nbsp;&amp;&nbsp;0xffff)&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((nNonce&nbsp;&amp;&nbsp;0xfff)&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boost::this_thread::interruption_point();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; }&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 在函数BitcoinMiner()里面创建新的block，设定时间戳(扰动1)，获取mempool里面的最新交易(扰动2)，调用ScanHash()搜索随机数(扰动3），直到找到满足条件的hash。 另外比特币的工作量证明的hash同时用作这个block的索引，litecoin里面这2个概念是区分的对待的(sha256的hash作为索引，scrypt出来的pow hash作为工作量证明)。 注意：设置独立挖矿的条件(chainparams.cpp里面设置) &nbsp; [cpp]&nbsp;view plain&nbsp;copy fMiningRequiresPeers&nbsp;=&nbsp;!true;&nbsp;//&nbsp;See&nbsp;BitcoinMiner()&nbsp;for&nbsp;details.&nbsp;&nbsp; 挖矿代码： &nbsp; &nbsp; [cpp]&nbsp;view plain&nbsp;copy void&nbsp;static&nbsp;BitcoinMiner(CWallet&nbsp;*pwallet)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;FastCoinMiner&nbsp;started\n&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;SetThreadPriority(THREAD_PRIORITY_LOWEST);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;RenameThread(&quot;fastcoin-miner&quot;);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Each&nbsp;thread&nbsp;has&nbsp;its&nbsp;own&nbsp;key&nbsp;and&nbsp;counter&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CReserveKey&nbsp;reservekey(pwallet);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nExtraNonce&nbsp;=&nbsp;0;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(true)&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Params().MiningRequiresPeers())&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Busy-wait&nbsp;for&nbsp;the&nbsp;network&nbsp;to&nbsp;come&nbsp;online&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;waste&nbsp;time&nbsp;mining&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;on&nbsp;an&nbsp;obsolete&nbsp;chain.&nbsp;In&nbsp;regtest&nbsp;mode&nbsp;we&nbsp;expect&nbsp;to&nbsp;fly&nbsp;solo.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(vNodes.empty())&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MilliSleep(1000);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Create&nbsp;new&nbsp;block&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nTransactionsUpdatedLast&nbsp;=&nbsp;mempool.GetTransactionsUpdated();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlockIndex*&nbsp;pindexPrev&nbsp;=&nbsp;chainActive.Tip();&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_ptr&lt;CBlockTemplate&gt;&nbsp;pblocktemplate(CreateNewBlockWithKey(reservekey));&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!pblocktemplate.get())&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;Error&nbsp;in&nbsp;FastCoinMiner:&nbsp;Keypool&nbsp;ran&nbsp;out,&nbsp;please&nbsp;call&nbsp;keypoolrefill&nbsp;before&nbsp;restarting&nbsp;the&nbsp;mining&nbsp;thread\n&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlock&nbsp;*pblock&nbsp;=&nbsp;&amp;pblocktemplate-&gt;block;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IncrementExtraNonce(pblock,&nbsp;pindexPrev,&nbsp;nExtraNonce);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;Running&nbsp;FastCoinMiner&nbsp;with&nbsp;%u&nbsp;transactions&nbsp;in&nbsp;block&nbsp;(%u&nbsp;bytes)\n&quot;,&nbsp;pblock-&gt;vtx.size(),&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::GetSerializeSize(*pblock,&nbsp;SER_NETWORK,&nbsp;PROTOCOL_VERSION));&nbsp;&nbsp; 博主稍作修改，设置了几个预置的hash算法（sha256，scrypt，keccak（即SHA3))，可以通过block的版本号区分，那么在scanhash里面调用ComputePowHash的时候，可以选择不同的pow算法，甚至你可以把这些算法串联起来，以增加算法被破解的方攻击性。 &nbsp; 看代码吧： &nbsp; [cpp]&nbsp;view plain&nbsp;copy uint256&nbsp;CBlockHeader::ComputePowHash(uint32_t&nbsp;nNonce)&nbsp;const&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;1&nbsp;||&nbsp;nVersion&nbsp;==&nbsp;2){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;SHA256+SHA256&nbsp;to&nbsp;make&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow&nbsp;hasher;&nbsp;//&nbsp;TODO:&nbsp;Create&nbsp;a&nbsp;new&nbsp;PowHasher&nbsp;named&nbsp;CPowHash256&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;3){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Scrypt&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;4){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Scrypt+SHA256&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;5){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Keccak(1088,512,256)&nbsp;or&nbsp;Known&nbsp;as&nbsp;SHA3-256(fips202draft)&nbsp;Pow&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Abort,&nbsp;unknown&nbsp;block&nbsp;version.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(false);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;~(uint256)0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; }&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （8）修改奖励机制 参考9.3 8.1) 修改挖矿奖励的成熟时间 源代码：main.h &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp;Coinbase&nbsp;transaction&nbsp;outputs&nbsp;can&nbsp;only&nbsp;be&nbsp;spent&nbsp;after&nbsp;this&nbsp;number&nbsp;of&nbsp;new&nbsp;blocks&nbsp;(network&nbsp;rule)&nbsp;*/&nbsp;&nbsp; static&nbsp;const&nbsp;int&nbsp;COINBASE_MATURITY&nbsp;=&nbsp;14;&nbsp;&nbsp; &nbsp; &nbsp; 8.2) 修改交易确认块数推荐值 源代码&nbsp;qt/transactionrecord.h &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp;UI&nbsp;model&nbsp;for&nbsp;a&nbsp;transaction.&nbsp;A&nbsp;core&nbsp;transaction&nbsp;can&nbsp;be&nbsp;represented&nbsp;by&nbsp;multiple&nbsp;UI&nbsp;transactions&nbsp;if&nbsp;it&nbsp;has&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;multiple&nbsp;outputs.&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;TransactionRecord&nbsp;&nbsp; {&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;Type&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generated,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToAddress,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToOther,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvWithAddress,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvFromOther,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToSelf&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;Number&nbsp;of&nbsp;confirmation&nbsp;recommended&nbsp;for&nbsp;accepting&nbsp;a&nbsp;transaction&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;int&nbsp;RecommendedNumConfirmations&nbsp;=&nbsp;2;&nbsp;&nbsp; &nbsp; &nbsp; （9）修改难度配置 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nSubsidyHalvingInterval&nbsp;=&nbsp;210000;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nEnforceBlockUpgradeMajority&nbsp;=&nbsp;750;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nRejectBlockOutdatedMajority&nbsp;=&nbsp;950;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nToCheckBlockUpgradeMajority&nbsp;=&nbsp;1000;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nMinerThreads&nbsp;=&nbsp;1;&nbsp;//&nbsp;0&nbsp;for&nbsp;all&nbsp;available&nbsp;cpus.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetTimespan&nbsp;=&nbsp;60&nbsp;*&nbsp;60;&nbsp;//&nbsp;re-targeting&nbsp;every&nbsp;one&nbsp;hour&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetSpacing&nbsp;=&nbsp;1&nbsp;*&nbsp;60;&nbsp;&nbsp;//&nbsp;do&nbsp;new&nbsp;pow&nbsp;every&nbsp;1&nbsp;minutes.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nGenesisSubsidy&nbsp;=&nbsp;100;&nbsp;&nbsp; &nbsp; &nbsp; a) bnProofOfWorkLimit=~uint256(0) &gt;&gt; 32; 是一个大整数（256bit）表示，前面32个位数是0，这个参数表示全网允许的最小难度，低于这个难度的block是不会被挖掘的。 &nbsp; b) nGenesisSubsidy = 100; 初始津贴，比特币的第一个块的奖励是50个btc。 &nbsp; c) nSubsidyHavlingInterval = 210000;&nbsp; 这个参数决定了多少个block以后比特币的奖励（补贴，挖矿奖励)会减半。这个参数结合初始奖励（比如比特币50）基本可以估算全网总的货币产量（比如比特币的2100万），这个初始津贴也是可以配置的，如2）所示。比如比特币，一个等比数列求和公式就可以计算货币总量 50(1/(1 - 0.5))*210000=2100万btc。 上面2个参数在查询区块奖励的时候用到，请查看main.cpp 的 GetBlockValue(height, fees)找到细节 &nbsp; [cpp]&nbsp;view plain&nbsp;copy CAmount&nbsp;GetBlockValue(int&nbsp;nHeight,&nbsp;const&nbsp;CAmount&amp;&nbsp;nFees)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CAmount&nbsp;nSubsidy&nbsp;=&nbsp;Params().GenesisSubsidy()&nbsp;*&nbsp;COIN;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;halvings&nbsp;=&nbsp;nHeight&nbsp;/&nbsp;Params().SubsidyHalvingInterval();&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Force&nbsp;block&nbsp;reward&nbsp;to&nbsp;zero&nbsp;when&nbsp;right&nbsp;shift&nbsp;is&nbsp;undefined.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(halvings&nbsp;&gt;=&nbsp;64)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nFees;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Subsidy&nbsp;is&nbsp;cut&nbsp;in&nbsp;half&nbsp;every&nbsp;210,000&nbsp;blocks&nbsp;which&nbsp;will&nbsp;occur&nbsp;approximately&nbsp;every&nbsp;4&nbsp;years.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;nSubsidy&nbsp;&gt;&gt;=&nbsp;halvings;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nSubsidy&nbsp;+&nbsp;nFees;&nbsp;&nbsp; }&nbsp;&nbsp; 很多山寨比也是在这里修改货币分布的，比如 nHeight==1 的时候，奖励1000万个，其他块都不予奖励，这个即使预挖模式了吧。 &nbsp; 另外，关于货币分布，这里satoshi同学可能已经考虑很多，他为什么设置到很多年以后才矿源枯竭，为什么采取递减的方式，可能都是出于保护区块链的目的（timestampserver）。 d）难度调节周期 nTargetTimespan = 60 * 60; // re-targeting every one hour, 60 blocks nTargetSpacing = 1 * 60; &nbsp;// expect 1 block/minute 这里的设置是60分钟（3600秒, 因为预期60秒钟1个block，那么就是60个blocks计算新难度，否则使用上一个block的难度），重新评估难度，下一个块的挖掘可能就要使用新的难度设置了。 。 比特币的调节周期是 2周/每10分钟，也就是 2 * 7 * 24 * 6 = 2016 参考：http://bitcoindifficulty.com/blog/ https://en.bitcoin.it/wiki/Difficulty &nbsp; (10) 修改checkpoints检查 &nbsp; (11) 修改界面 &nbsp; github地址 &nbsp; TODO: 1）模板化的山寨币生成，可配置修改部分通过宏或者变量提取出来，用脚本批量替换修改。 2）矿池搭建与节点测试&nbsp;P2pool&nbsp; &amp;Poclbm 3）移动支付和网页支付 4）应用生态 5）交易备注 6）复杂交易应用(脚本，非标准交易） &nbsp; 备注： 1）记得加上-checkpoints=0 参数启动，否则，会导致daemon报错，“FastCoin is downloading blocks...” &nbsp; 阅读更多 登录后自动展开" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-01-31T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"Key: altcoin generate, make altcoin, bitcoin, coingen 关键字： 制作山寨币，山寨币，比特币 &nbsp; 源代码地址： https://github.com/imharrywu/fastcoin &nbsp; 程序猿朋友可以自己动手编译生成安装包，有问题可以直接微信公众号“”AI快递“”(注明：csdn)，也欢迎程序猿朋友PullRequest给我，只有知识共享才能促进比特币的繁荣。 &nbsp; 可以支持任何算法（sha256，scrypt，x11，x13，nist，grostel，以及这些算法的串联）和参数定制。 &nbsp; 目前预先内置了比特币的SHA256和莱特币的scypt，以及SHA3-256(KECCAK)。 &nbsp; 在线编译目前提供三种安装包： 1，linux/unix的daemon程序（带钱包功能） 2，Mac钱包安装包&nbsp; 3，windows钱包安装包 &nbsp; &nbsp; 1、 &nbsp;截图预览 (1) 安装图1 （2）安装图2 （3）安装图3 （4）安装图4 （5）安装图5 &nbsp; （6）概览图 已经挖到3个block 奖励了300个FTC （7）交易记录图 （8）点击显示交易细节 显示为挖矿所得 并且还没有确认 （9）版权页 （10）调试窗口 &nbsp; （11）显示已经连接的p2p网络节点 一个在虚拟机里面运行的节点 &nbsp; （12）2个节点构成的p2p通信网络 &nbsp; 2、 山寨币修改步骤： （1）迁出最新的比特币源代码 比特币官方代码:&nbsp;https://github.com/bitcoin/bitcoin 山寨币代码地址（紧跟bitcoin更新）:https://github.com/imharrywu/fastcoin git clone&nbsp;https://github.com/imharrywu/fastcoin&nbsp; &nbsp; 一下修改都是一些代码片段，请用eclipse打开迁出的代码，对照查看。 &nbsp; （2）修改创世块 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Build&nbsp;the&nbsp;genesis&nbsp;block.&nbsp;Note&nbsp;that&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;genesis&nbsp;coinbase&nbsp;cannot&nbsp; &nbsp;*&nbsp;be&nbsp;spent&nbsp;as&nbsp;it&nbsp;did&nbsp;not&nbsp;originally&nbsp;exist&nbsp;in&nbsp;the&nbsp;database.&nbsp; &nbsp;*&nbsp;&nbsp; &nbsp;*&nbsp;CBlock(hash=000000000019d6,&nbsp;ver=1,&nbsp;hashPrevBlock=00000000000000,&nbsp;hashMerkleRoot=4a5e1e,&nbsp;nTime=1231006505,&nbsp;nBits=1d00ffff,&nbsp;nNonce=2083236893,&nbsp;vtx=1)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;CTransaction(hash=4a5e1e,&nbsp;ver=1,&nbsp;vin.size=1,&nbsp;vout.size=1,&nbsp;nLockTime=0)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxIn(COutPoint(000000,&nbsp;-1),&nbsp;coinbase&nbsp;04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxOut(nValue=50.00000000,&nbsp;scriptPubKey=0x5F1DF16B2B704C8A578D0B)&nbsp; &nbsp;*&nbsp;&nbsp;&nbsp;vMerkleTree:&nbsp;4a5e1e&nbsp; &nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp; //&nbsp;HarryWu,&nbsp;generate&nbsp;genesis&nbsp;block&nbsp;by&nbsp;genesis.py&nbsp;as&nbsp;following:&nbsp;&nbsp; //&nbsp;&nbsp; //&nbsp;localhost&nbsp;genesis&nbsp;#&nbsp;python&nbsp;genesis.py&nbsp;\\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-t&nbsp;$(date&nbsp;+%s)&nbsp;\\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-z&nbsp;&quot;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&quot;&nbsp;\\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-a&nbsp;SHA256&nbsp;\\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-p&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&nbsp;\\&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-v&nbsp;10000000000&nbsp;&nbsp; //&nbsp;Raw&nbsp;block&nbsp;data:&nbsp;04ffff001d01043b7368616e676861692073746f636b20696e64657820636c6f73656420617420323334332e35372c206f6e203234746820536570742e2c2032303134&nbsp;&nbsp; //&nbsp;algorithm:&nbsp;SHA256&nbsp;&nbsp; //&nbsp;merkle&nbsp;hash:&nbsp;1c395aad7fab156523a095a869d3fcdf3249a8a97c8d7337adb4f33d826da32b&nbsp;&nbsp; //&nbsp;pszTimestamp:&nbsp;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&nbsp;&nbsp; //&nbsp;pubkey:&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&nbsp;&nbsp; //&nbsp;time:&nbsp;1411650667&nbsp;&nbsp; //&nbsp;bits:&nbsp;0x1d00ffff&nbsp;&nbsp; //&nbsp;Searching&nbsp;for&nbsp;genesis&nbsp;hash..&nbsp;&nbsp; //&nbsp;&nbsp; //&nbsp;nonce:&nbsp;1456993276&nbsp;&nbsp; //&nbsp;genesis&nbsp;hash:&nbsp;000000004df0288b461e17d9a20e557fd296861c604f1944eb9e2cca866af0a5&nbsp;&nbsp; &nbsp;&nbsp; const&nbsp;char*&nbsp;pszTimestamp&nbsp;=&nbsp;&quot;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014&quot;;&nbsp;&nbsp; CMutableTransaction&nbsp;txNew;&nbsp;&nbsp; txNew.vin.resize(1);&nbsp;&nbsp; txNew.vout.resize(1);&nbsp;&nbsp; txNew.vin[0].scriptSig&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;0x1d00ffff&nbsp;&lt;&lt;&nbsp;CScriptNum(4)&nbsp;&lt;&lt;&nbsp;vector&lt;unsigned&nbsp;char&gt;((const&nbsp;unsigned&nbsp;char*)pszTimestamp,&nbsp;(const&nbsp;unsigned&nbsp;char*)pszTimestamp&nbsp;+&nbsp;strlen(pszTimestamp));&nbsp;&nbsp; txNew.vout[0].nValue&nbsp;=&nbsp;nGenesisSubsidy&nbsp;*&nbsp;COIN;&nbsp;&nbsp; txNew.vout[0].scriptPubKey&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;ParseHex(&quot;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&quot;)&nbsp;&lt;&lt;&nbsp;OP_CHECKSIG;&nbsp;&nbsp; genesis.vtx.push_back(txNew);&nbsp;&nbsp; genesis.hashPrevBlock&nbsp;=&nbsp;0;&nbsp;&nbsp; genesis.hashMerkleRoot&nbsp;=&nbsp;genesis.BuildMerkleTree();&nbsp;&nbsp; genesis.nVersion&nbsp;=&nbsp;1;&nbsp;&nbsp; genesis.nTime&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1411666331;&nbsp;&nbsp; genesis.nBits&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0x1d00ffff;&nbsp;&nbsp; genesis.nNonce&nbsp;&nbsp;&nbsp;=&nbsp;2056985438;&nbsp;&nbsp; &nbsp;&nbsp; hashGenesisBlock&nbsp;=&nbsp;genesis.GetHash();&nbsp;&nbsp; assert(hashGenesisBlock&nbsp;==&nbsp;uint256(&quot;0x0000000061b1aca334b059920fed7bace2336ea4d23d63428c7aee04da49e942&quot;));&nbsp;&nbsp; assert(genesis.hashMerkleRoot&nbsp;==&nbsp;uint256(&quot;0x7bf229f629a6666596c1ce57117c28d1d29299e8a5303347929bd70847c49adb&quot;));&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （3）修改网络协议魔数 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; 0xgoodcafe(好咖啡的意思），大家可以自己选择，但是也有一些基本建议，看上面那个英文注释就好了，就是和某些常用的字符集可用字段不要冲突。 &nbsp; 另外：对应的修改TESTNET和REGTESTNET的参数 &nbsp; （4）修改地址前缀 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;//&nbsp;F&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;//&nbsp;T&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;//&nbsp;7&nbsp;prefix&nbsp;&nbsp; base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp; base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp; 有一个wiki的对照表可以用来悬在公钥和脚本地址的前缀，但是这个表不使用私钥等（因为长度不一样，规律不一样）。 &nbsp; &nbsp; （5）修改网络端口 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp; 修改了nDefaultPort=9999，比特币默认是8333 &nbsp; 另外同时修改一下TESTNET和REGTESTNET的端口配置，一般加10000和20000即可 &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Testnet&nbsp;(v3)&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;CTestNetParams&nbsp;:&nbsp;public&nbsp;CMainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CTestNetParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::TESTNET;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;test&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0xC0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x1d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;045d2d29beffb0a0cbea44f266286ff8b1d11c035538fbb4dadcf6b4073b08f318afea74f01d5a3782e72a22273fb01ab40e99d93adff488236585cc8031323e7c&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;19999;&nbsp;&nbsp; &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp; &nbsp;*&nbsp;Regression&nbsp;test&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;CRegTestParams&nbsp;:&nbsp;public&nbsp;CTestNetParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CRegTestParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::REGTEST;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;regtest&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x0b;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0xad;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;29999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;1;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （6）修改种子网络连接参数 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy //vSeeds.push_back(CDNSSeedData(&quot;bitcoin.sipa.be&quot;,&nbsp;&quot;seed.bitcoin.sipa.be&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bluematt.me&quot;,&nbsp;&quot;dnsseed.bluematt.me&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;dashjr.org&quot;,&nbsp;&quot;dnsseed.bitcoin.dashjr.org&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bitcoinstats.com&quot;,&nbsp;&quot;seed.bitcoinstats.com&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;bitnodes.io&quot;,&nbsp;&quot;seed.bitnodes.io&quot;));&nbsp;&nbsp; //vSeeds.push_back(CDNSSeedData(&quot;xf2.org&quot;,&nbsp;&quot;bitseed.xf2.org&quot;));&nbsp;&nbsp; &nbsp;&nbsp; base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;//&nbsp;F&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;//&nbsp;T&nbsp;prefix&nbsp;&nbsp; base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;//&nbsp;7&nbsp;prefix&nbsp;&nbsp; base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp; base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp; &nbsp;&nbsp; //convertSeed6(vFixedSeeds,&nbsp;pnSeed6_main,&nbsp;ARRAYLEN(pnSeed6_main));&nbsp;&nbsp; &nbsp; &nbsp; 如果你有7x24在线的服务器运行节点，那么请在这里加入他们的地址，可以是dns也可以是ip地址（v4，v6，--enable-ipv6）。 如果没有的话，可以考虑和我一样暂时注释掉，在运行时候指定连接参数-addnoe=123.123.123.123 或者-dns -addnode=mynode.domain.com 对应的修改一下TESTNET和REGTESTNET的网络节点地址。 &nbsp; （7）修改工作量机制 源文件 miner.cpp 比特币在函数ScanHash（）里面搜索随机数， &nbsp; [cpp]&nbsp;view plain&nbsp;copy //&nbsp;&nbsp; //&nbsp;ScanHash&nbsp;scans&nbsp;nonces&nbsp;looking&nbsp;for&nbsp;a&nbsp;hash&nbsp;with&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits.&nbsp;&nbsp; //&nbsp;The&nbsp;nonce&nbsp;is&nbsp;usually&nbsp;preserved&nbsp;between&nbsp;calls,&nbsp;but&nbsp;periodically&nbsp;or&nbsp;if&nbsp;the&nbsp;&nbsp; //&nbsp;nonce&nbsp;is&nbsp;0xffff0000&nbsp;or&nbsp;above,&nbsp;the&nbsp;block&nbsp;is&nbsp;rebuilt&nbsp;and&nbsp;nNonce&nbsp;starts&nbsp;over&nbsp;at&nbsp;&nbsp; //&nbsp;zero.&nbsp;&nbsp; //&nbsp;&nbsp; bool&nbsp;static&nbsp;ScanHash(const&nbsp;CBlockHeader&nbsp;*pblock,&nbsp;uint32_t&amp;&nbsp;nNonce,&nbsp;uint256&nbsp;*phash)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//CHash256&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//ss&nbsp;&lt;&lt;&nbsp;*pblock;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(true)&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNonce++;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;last&nbsp;4&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;(the&nbsp;nonce)&nbsp;to&nbsp;a&nbsp;copy&nbsp;of&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;the&nbsp;double-SHA256&nbsp;state,&nbsp;and&nbsp;compute&nbsp;the&nbsp;result.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//CHash256(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)phash);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*phash&nbsp;=&nbsp;pblock-&gt;ComputePowHash(nNonce);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Return&nbsp;the&nbsp;nonce&nbsp;if&nbsp;the&nbsp;hash&nbsp;has&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;caller&nbsp;will&nbsp;check&nbsp;if&nbsp;it&nbsp;has&nbsp;enough&nbsp;to&nbsp;reach&nbsp;the&nbsp;target&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(((uint16_t*)phash)[15]&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;nothing&nbsp;found&nbsp;after&nbsp;trying&nbsp;for&nbsp;a&nbsp;while,&nbsp;return&nbsp;-1&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((nNonce&nbsp;&amp;&nbsp;0xffff)&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((nNonce&nbsp;&amp;&nbsp;0xfff)&nbsp;==&nbsp;0)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boost::this_thread::interruption_point();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; }&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 在函数BitcoinMiner()里面创建新的block，设定时间戳(扰动1)，获取mempool里面的最新交易(扰动2)，调用ScanHash()搜索随机数(扰动3），直到找到满足条件的hash。 另外比特币的工作量证明的hash同时用作这个block的索引，litecoin里面这2个概念是区分的对待的(sha256的hash作为索引，scrypt出来的pow hash作为工作量证明)。 注意：设置独立挖矿的条件(chainparams.cpp里面设置) &nbsp; [cpp]&nbsp;view plain&nbsp;copy fMiningRequiresPeers&nbsp;=&nbsp;!true;&nbsp;//&nbsp;See&nbsp;BitcoinMiner()&nbsp;for&nbsp;details.&nbsp;&nbsp; 挖矿代码： &nbsp; &nbsp; [cpp]&nbsp;view plain&nbsp;copy void&nbsp;static&nbsp;BitcoinMiner(CWallet&nbsp;*pwallet)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;FastCoinMiner&nbsp;started\\n&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;SetThreadPriority(THREAD_PRIORITY_LOWEST);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;RenameThread(&quot;fastcoin-miner&quot;);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Each&nbsp;thread&nbsp;has&nbsp;its&nbsp;own&nbsp;key&nbsp;and&nbsp;counter&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CReserveKey&nbsp;reservekey(pwallet);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nExtraNonce&nbsp;=&nbsp;0;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(true)&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Params().MiningRequiresPeers())&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Busy-wait&nbsp;for&nbsp;the&nbsp;network&nbsp;to&nbsp;come&nbsp;online&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;waste&nbsp;time&nbsp;mining&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;on&nbsp;an&nbsp;obsolete&nbsp;chain.&nbsp;In&nbsp;regtest&nbsp;mode&nbsp;we&nbsp;expect&nbsp;to&nbsp;fly&nbsp;solo.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(vNodes.empty())&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MilliSleep(1000);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Create&nbsp;new&nbsp;block&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;int&nbsp;nTransactionsUpdatedLast&nbsp;=&nbsp;mempool.GetTransactionsUpdated();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlockIndex*&nbsp;pindexPrev&nbsp;=&nbsp;chainActive.Tip();&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_ptr&lt;CBlockTemplate&gt;&nbsp;pblocktemplate(CreateNewBlockWithKey(reservekey));&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!pblocktemplate.get())&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;Error&nbsp;in&nbsp;FastCoinMiner:&nbsp;Keypool&nbsp;ran&nbsp;out,&nbsp;please&nbsp;call&nbsp;keypoolrefill&nbsp;before&nbsp;restarting&nbsp;the&nbsp;mining&nbsp;thread\\n&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlock&nbsp;*pblock&nbsp;=&nbsp;&amp;pblocktemplate-&gt;block;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IncrementExtraNonce(pblock,&nbsp;pindexPrev,&nbsp;nExtraNonce);&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(&quot;Running&nbsp;FastCoinMiner&nbsp;with&nbsp;%u&nbsp;transactions&nbsp;in&nbsp;block&nbsp;(%u&nbsp;bytes)\\n&quot;,&nbsp;pblock-&gt;vtx.size(),&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::GetSerializeSize(*pblock,&nbsp;SER_NETWORK,&nbsp;PROTOCOL_VERSION));&nbsp;&nbsp; 博主稍作修改，设置了几个预置的hash算法（sha256，scrypt，keccak（即SHA3))，可以通过block的版本号区分，那么在scanhash里面调用ComputePowHash的时候，可以选择不同的pow算法，甚至你可以把这些算法串联起来，以增加算法被破解的方攻击性。 &nbsp; 看代码吧： &nbsp; [cpp]&nbsp;view plain&nbsp;copy uint256&nbsp;CBlockHeader::ComputePowHash(uint32_t&nbsp;nNonce)&nbsp;const&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;1&nbsp;||&nbsp;nVersion&nbsp;==&nbsp;2){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;SHA256+SHA256&nbsp;to&nbsp;make&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow&nbsp;hasher;&nbsp;//&nbsp;TODO:&nbsp;Create&nbsp;a&nbsp;new&nbsp;PowHasher&nbsp;named&nbsp;CPowHash256&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;3){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Scrypt&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;4){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Scrypt+SHA256&nbsp;PoW&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if&nbsp;(nVersion&nbsp;==&nbsp;5){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Keccak(1088,512,256)&nbsp;or&nbsp;Known&nbsp;as&nbsp;SHA3-256(fips202draft)&nbsp;Pow&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256&nbsp;hasher;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*this;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)&amp;powHash);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;powHash;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Abort,&nbsp;unknown&nbsp;block&nbsp;version.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(false);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;~(uint256)0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp; }&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; （8）修改奖励机制 参考9.3 8.1) 修改挖矿奖励的成熟时间 源代码：main.h &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp;Coinbase&nbsp;transaction&nbsp;outputs&nbsp;can&nbsp;only&nbsp;be&nbsp;spent&nbsp;after&nbsp;this&nbsp;number&nbsp;of&nbsp;new&nbsp;blocks&nbsp;(network&nbsp;rule)&nbsp;*/&nbsp;&nbsp; static&nbsp;const&nbsp;int&nbsp;COINBASE_MATURITY&nbsp;=&nbsp;14;&nbsp;&nbsp; &nbsp; &nbsp; 8.2) 修改交易确认块数推荐值 源代码&nbsp;qt/transactionrecord.h &nbsp; [cpp]&nbsp;view plain&nbsp;copy /**&nbsp;UI&nbsp;model&nbsp;for&nbsp;a&nbsp;transaction.&nbsp;A&nbsp;core&nbsp;transaction&nbsp;can&nbsp;be&nbsp;represented&nbsp;by&nbsp;multiple&nbsp;UI&nbsp;transactions&nbsp;if&nbsp;it&nbsp;has&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;multiple&nbsp;outputs.&nbsp; &nbsp;*/&nbsp;&nbsp; class&nbsp;TransactionRecord&nbsp;&nbsp; {&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;enum&nbsp;Type&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generated,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToAddress,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToOther,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvWithAddress,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvFromOther,&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToSelf&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;Number&nbsp;of&nbsp;confirmation&nbsp;recommended&nbsp;for&nbsp;accepting&nbsp;a&nbsp;transaction&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;int&nbsp;RecommendedNumConfirmations&nbsp;=&nbsp;2;&nbsp;&nbsp; &nbsp; &nbsp; （9）修改难度配置 源文件&nbsp;chainparams.cpp &nbsp; [cpp]&nbsp;view plain&nbsp;copy class&nbsp;CMainParams&nbsp;:&nbsp;public&nbsp;CChainParams&nbsp;{&nbsp;&nbsp; public:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;&quot;main&quot;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(&quot;04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85&quot;);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nSubsidyHalvingInterval&nbsp;=&nbsp;210000;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nEnforceBlockUpgradeMajority&nbsp;=&nbsp;750;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nRejectBlockOutdatedMajority&nbsp;=&nbsp;950;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nToCheckBlockUpgradeMajority&nbsp;=&nbsp;1000;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nMinerThreads&nbsp;=&nbsp;1;&nbsp;//&nbsp;0&nbsp;for&nbsp;all&nbsp;available&nbsp;cpus.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetTimespan&nbsp;=&nbsp;60&nbsp;*&nbsp;60;&nbsp;//&nbsp;re-targeting&nbsp;every&nbsp;one&nbsp;hour&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetSpacing&nbsp;=&nbsp;1&nbsp;*&nbsp;60;&nbsp;&nbsp;//&nbsp;do&nbsp;new&nbsp;pow&nbsp;every&nbsp;1&nbsp;minutes.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nGenesisSubsidy&nbsp;=&nbsp;100;&nbsp;&nbsp; &nbsp; &nbsp; a) bnProofOfWorkLimit=~uint256(0) &gt;&gt; 32; 是一个大整数（256bit）表示，前面32个位数是0，这个参数表示全网允许的最小难度，低于这个难度的block是不会被挖掘的。 &nbsp; b) nGenesisSubsidy = 100; 初始津贴，比特币的第一个块的奖励是50个btc。 &nbsp; c) nSubsidyHavlingInterval = 210000;&nbsp; 这个参数决定了多少个block以后比特币的奖励（补贴，挖矿奖励)会减半。这个参数结合初始奖励（比如比特币50）基本可以估算全网总的货币产量（比如比特币的2100万），这个初始津贴也是可以配置的，如2）所示。比如比特币，一个等比数列求和公式就可以计算货币总量 50(1/(1 - 0.5))*210000=2100万btc。 上面2个参数在查询区块奖励的时候用到，请查看main.cpp 的 GetBlockValue(height, fees)找到细节 &nbsp; [cpp]&nbsp;view plain&nbsp;copy CAmount&nbsp;GetBlockValue(int&nbsp;nHeight,&nbsp;const&nbsp;CAmount&amp;&nbsp;nFees)&nbsp;&nbsp; {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;CAmount&nbsp;nSubsidy&nbsp;=&nbsp;Params().GenesisSubsidy()&nbsp;*&nbsp;COIN;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;halvings&nbsp;=&nbsp;nHeight&nbsp;/&nbsp;Params().SubsidyHalvingInterval();&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Force&nbsp;block&nbsp;reward&nbsp;to&nbsp;zero&nbsp;when&nbsp;right&nbsp;shift&nbsp;is&nbsp;undefined.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(halvings&nbsp;&gt;=&nbsp;64)&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nFees;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Subsidy&nbsp;is&nbsp;cut&nbsp;in&nbsp;half&nbsp;every&nbsp;210,000&nbsp;blocks&nbsp;which&nbsp;will&nbsp;occur&nbsp;approximately&nbsp;every&nbsp;4&nbsp;years.&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;nSubsidy&nbsp;&gt;&gt;=&nbsp;halvings;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nSubsidy&nbsp;+&nbsp;nFees;&nbsp;&nbsp; }&nbsp;&nbsp; 很多山寨比也是在这里修改货币分布的，比如 nHeight==1 的时候，奖励1000万个，其他块都不予奖励，这个即使预挖模式了吧。 &nbsp; 另外，关于货币分布，这里satoshi同学可能已经考虑很多，他为什么设置到很多年以后才矿源枯竭，为什么采取递减的方式，可能都是出于保护区块链的目的（timestampserver）。 d）难度调节周期 nTargetTimespan = 60 * 60; // re-targeting every one hour, 60 blocks nTargetSpacing = 1 * 60; &nbsp;// expect 1 block/minute 这里的设置是60分钟（3600秒, 因为预期60秒钟1个block，那么就是60个blocks计算新难度，否则使用上一个block的难度），重新评估难度，下一个块的挖掘可能就要使用新的难度设置了。 。 比特币的调节周期是 2周/每10分钟，也就是 2 * 7 * 24 * 6 = 2016 参考：http://bitcoindifficulty.com/blog/ https://en.bitcoin.it/wiki/Difficulty &nbsp; (10) 修改checkpoints检查 &nbsp; (11) 修改界面 &nbsp; github地址 &nbsp; TODO: 1）模板化的山寨币生成，可配置修改部分通过宏或者变量提取出来，用脚本批量替换修改。 2）矿池搭建与节点测试&nbsp;P2pool&nbsp; &amp;Poclbm 3）移动支付和网页支付 4）应用生态 5）交易备注 6）复杂交易应用(脚本，非标准交易） &nbsp; 备注： 1）记得加上-checkpoints=0 参数启动，否则，会导致daemon报错，“FastCoin is downloading blocks...” &nbsp; 阅读更多 登录后自动展开","@type":"BlogPosting","url":"/2018/01/31/1ffc790f2966c6c6ca8d2d432c02a613.html","headline":"虚拟货币山寨币开发流程","dateModified":"2018-01-31T00:00:00+08:00","datePublished":"2018-01-31T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/01/31/1ffc790f2966c6c6ca8d2d432c02a613.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>虚拟货币山寨币开发流程</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p>Key:</p> 
  <p>altcoin generate, make altcoin, bitcoin, coingen</p> 
  <p>关键字：</p> 
  <p>制作山寨币，山寨币，比特币</p> 
  <p>&nbsp;</p> 
  <p>源代码地址：</p> 
  <p><a href="https://github.com/imharrywu/fastcoin" rel="nofollow">https://github.com/imharrywu/fastcoin</a></p> 
  <p>&nbsp;</p> 
  <p>程序猿朋友可以自己动手编译生成安装包，有问题可以直接微信公众号“<span style="color:#86ca5e;">”</span><span style="color:#3399ea;">AI快递“</span><span style="color:#86ca5e;">”</span><strong>(注明：csdn)</strong>，也欢迎程序猿朋友PullRequest给我，只有知识共享才能促进比特币的繁荣。</p> 
  <p>&nbsp;</p> 
  <p>可以支持任何算法（sha256，scrypt，x11，x13，nist，grostel，以及这些算法的串联）和参数定制。</p> 
  <p>&nbsp;</p> 
  <p>目前预先内置了<strong>比特币的SHA256</strong>和<strong>莱特币的scypt，以及SHA3-256(KECCAK)</strong>。</p> 
  <p>&nbsp;</p> 
  <p>在线编译目前提供三种安装包：</p> 
  <p>1，linux/unix的daemon程序（带钱包功能）</p> 
  <p>2，Mac钱包安装包&nbsp;</p> 
  <p>3，windows钱包安装包</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h1><a name="t0"></a>1、 &nbsp;截图预览</h1> 
  <h2><a name="t1"></a>(1) 安装图1</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031093947904?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t2"></a>（2）安装图2</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094003832?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t3"></a>（3）安装图3</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094007732?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t4"></a>（4）安装图4</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094105109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t5"></a>（5）安装图5</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094015797?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <p>&nbsp;</p> 
  <h2><a name="t6"></a>（6）概览图 已经挖到3个block 奖励了300个FTC</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094019276?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t7"></a>（7）交易记录图</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094024080?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t8"></a>（8）点击显示交易细节 显示为挖矿所得 并且还没有确认</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094027996?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t9"></a>（9）版权页</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094032583?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <h2><a name="t10"></a>（10）调试窗口</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094129828?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <p>&nbsp;</p> 
  <h2><a name="t11"></a>（11）显示已经连接的p2p网络节点 一个在虚拟机里面运行的节点</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094038916?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <p>&nbsp;</p> 
  <h2><a name="t12"></a>（12）2个节点构成的p2p通信网络</h2> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20141031094136125?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGFjb2Rl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p> 
  <p>&nbsp;</p> 
  <h1><a name="t13"></a>2、 山寨币修改步骤：</h1> 
  <h2><a name="t14"></a>（1）迁出最新的比特币源代码</h2> 
  <p>比特币官方代码:&nbsp;<a href="https://github.com/bitcoin/bitcoin" rel="nofollow">https://github.com/bitcoin/bitcoin</a></p> 
  <p>山寨币代码地址（紧跟bitcoin更新）:<a href="https://github.com/imharrywu/fastcoin" rel="nofollow">https://github.com/imharrywu/fastcoin</a></p> 
  <p>git clone&nbsp;<a href="https://github.com/imharrywu/fastcoin" rel="nofollow">https://github.com/imharrywu/fastcoin</a>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>一下修改都是一些代码片段，请用eclipse打开迁出的代码，对照查看。</p> 
  <p>&nbsp;</p> 
  <h2><a name="t15"></a>（2）修改创世块</h2> 
  <p>源文件<strong>&nbsp;chainparams.cpp</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><span style="color:#008200;">/**</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;Build&nbsp;the&nbsp;genesis&nbsp;block.&nbsp;Note&nbsp;that&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;genesis&nbsp;coinbase&nbsp;cannot</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;be&nbsp;spent&nbsp;as&nbsp;it&nbsp;did&nbsp;not&nbsp;originally&nbsp;exist&nbsp;in&nbsp;the&nbsp;database.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;CBlock(hash=000000000019d6,&nbsp;ver=1,&nbsp;hashPrevBlock=00000000000000,&nbsp;hashMerkleRoot=4a5e1e,&nbsp;nTime=1231006505,&nbsp;nBits=1d00ffff,&nbsp;nNonce=2083236893,&nbsp;vtx=1)</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;&nbsp;&nbsp;CTransaction(hash=4a5e1e,&nbsp;ver=1,&nbsp;vin.size=1,&nbsp;vout.size=1,&nbsp;nLockTime=0)</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxIn(COutPoint(000000,&nbsp;-1),&nbsp;coinbase&nbsp;04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73)</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CTxOut(nValue=50.00000000,&nbsp;scriptPubKey=0x5F1DF16B2B704C8A578D0B)</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;&nbsp;&nbsp;vMerkleTree:&nbsp;4a5e1e</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;HarryWu,&nbsp;generate&nbsp;genesis&nbsp;block&nbsp;by&nbsp;genesis.py&nbsp;as&nbsp;following:</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;localhost&nbsp;genesis&nbsp;#&nbsp;python&nbsp;genesis.py&nbsp;\</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-t&nbsp;$(date&nbsp;+%s)&nbsp;\</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-z&nbsp;"shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014"&nbsp;\</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-a&nbsp;SHA256&nbsp;\</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-p&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc&nbsp;\</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-v&nbsp;10000000000</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;Raw&nbsp;block&nbsp;data:&nbsp;04ffff001d01043b7368616e676861692073746f636b20696e64657820636c6f73656420617420323334332e35372c206f6e203234746820536570742e2c2032303134</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;algorithm:&nbsp;SHA256</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;merkle&nbsp;hash:&nbsp;1c395aad7fab156523a095a869d3fcdf3249a8a97c8d7337adb4f33d826da32b</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;pszTimestamp:&nbsp;shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;pubkey:&nbsp;049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;time:&nbsp;1411650667</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;bits:&nbsp;0x1d00ffff</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;Searching&nbsp;for&nbsp;genesis&nbsp;hash..</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;nonce:&nbsp;1456993276</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;genesis&nbsp;hash:&nbsp;000000004df0288b461e17d9a20e557fd296861c604f1944eb9e2cca866af0a5</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>const</strong>&nbsp;<strong>char</strong>*&nbsp;pszTimestamp&nbsp;=&nbsp;<span style="color:#0000ff;">"shanghai&nbsp;stock&nbsp;index&nbsp;closed&nbsp;at&nbsp;2343.57,&nbsp;on&nbsp;24th&nbsp;Sept.,&nbsp;2014"</span>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">CMutableTransaction&nbsp;txNew;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">txNew.vin.resize(1);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">txNew.vout.resize(1);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">txNew.vin[0].scriptSig&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;0x1d00ffff&nbsp;&lt;&lt;&nbsp;CScriptNum(4)&nbsp;&lt;&lt;&nbsp;vector&lt;unsigned&nbsp;<strong>char</strong>&gt;((<strong>const</strong>&nbsp;unsigned&nbsp;<strong>char</strong>*)pszTimestamp,&nbsp;(<strong>const</strong>&nbsp;unsigned&nbsp;<strong>char</strong>*)pszTimestamp&nbsp;+&nbsp;strlen(pszTimestamp));&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">txNew.vout[0].nValue&nbsp;=&nbsp;nGenesisSubsidy&nbsp;*&nbsp;COIN;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">txNew.vout[0].scriptPubKey&nbsp;=&nbsp;CScript()&nbsp;&lt;&lt;&nbsp;ParseHex(<span style="color:#0000ff;">"049e02fa9aa3c19a3b112a58bab503c5caf797972f5cfe1006275aa5485a01b48f9f648bc5380ee1e82dc6f474c8e0f7e2f6bbd0de9355f92496e3ea327ccb19cc"</span>)&nbsp;&lt;&lt;&nbsp;OP_CHECKSIG;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">genesis.vtx.push_back(txNew);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">genesis.hashPrevBlock&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">genesis.hashMerkleRoot&nbsp;=&nbsp;genesis.BuildMerkleTree();&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">genesis.nVersion&nbsp;=&nbsp;1;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">genesis.nTime&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1411666331;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">genesis.nBits&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0x1d00ffff;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">genesis.nNonce&nbsp;&nbsp;&nbsp;=&nbsp;2056985438;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">hashGenesisBlock&nbsp;=&nbsp;genesis.GetHash();&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">assert(hashGenesisBlock&nbsp;==&nbsp;uint256(<span style="color:#0000ff;">"0x0000000061b1aca334b059920fed7bace2336ea4d23d63428c7aee04da49e942"</span>));&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">assert(genesis.hashMerkleRoot&nbsp;==&nbsp;uint256(<span style="color:#0000ff;">"0x7bf229f629a6666596c1ce57117c28d1d29299e8a5303347929bd70847c49adb"</span>));&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h2><a name="t16"></a>（3）修改网络协议魔数</h2> 
  <p>源文件<strong>&nbsp;chainparams.cpp</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><strong>class</strong>&nbsp;CMainParams&nbsp;:&nbsp;<strong>public</strong>&nbsp;CChainParams&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>public</strong>:&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;<span style="color:#0000ff;">"main"</span>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**&nbsp;</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
  </ol>
  <p><br><span style="color:#454545;">0xgoodcafe(好咖啡的意思），大家可以自己选择，但是也有一些基本</span><span style="color:#454545;">建议</span><span style="color:#454545;">，看上面那个英文注释就好了，就是和某些常用的字符集可用字段不要冲突。</span></p> 
  <p>&nbsp;</p> 
  <p>另外：对应的修改TESTNET和REGTESTNET的参数</p> 
  <p>&nbsp;</p> 
  <h2><a name="t17"></a>（4）修改地址前缀</h2> 
  <p>源文件<strong>&nbsp;chainparams.cpp</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;">base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;<span style="color:#008200;">//&nbsp;F&nbsp;prefix</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;<span style="color:#008200;">//&nbsp;T&nbsp;prefix</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;<span style="color:#008200;">//&nbsp;7&nbsp;prefix</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp;</span></li> 
  </ol>
  <p><br><span style="color:#454545;">有一个</span><a href="https://en.bitcoin.it/wiki/List_of_address_prefixes" rel="nofollow">wiki</a><span style="color:#454545;">的对照表可以用来悬在公钥和脚本地址的前缀，但是这个表不使用私钥等（因为长度不一样，规律不一样）。</span></p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h2><a name="t18"></a>（5）修改网络端口</h2> 
  <p>源文件<strong>&nbsp;chainparams.cpp</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><strong>class</strong>&nbsp;CMainParams&nbsp;:&nbsp;<strong>public</strong>&nbsp;CChainParams&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>public</strong>:&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;<span style="color:#0000ff;">"main"</span>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**&nbsp;</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(<span style="color:#0000ff;">"04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85"</span>);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp;</span></li> 
  </ol>
  <p><br><span style="color:#454545;">修改了nDefaultPort=9999，比特币默认是8333</span></p> 
  <p>&nbsp;</p> 
  <p>另外同时修改一下TESTNET和REGTESTNET的端口配置，一般加10000和20000即可</p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><span style="color:#008200;">/**</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;Testnet&nbsp;(v3)</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>class</strong>&nbsp;CTestNetParams&nbsp;:&nbsp;<strong>public</strong>&nbsp;CMainParams&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>public</strong>:&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;CTestNetParams()&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::TESTNET;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;<span style="color:#0000ff;">"test"</span>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0xC0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x1d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(<span style="color:#0000ff;">"045d2d29beffb0a0cbea44f266286ff8b1d11c035538fbb4dadcf6b4073b08f318afea74f01d5a3782e72a22273fb01ab40e99d93adff488236585cc8031323e7c"</span>);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;19999;&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><span style="color:#008200;">/**</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*&nbsp;Regression&nbsp;test</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>class</strong>&nbsp;CRegTestParams&nbsp;:&nbsp;<strong>public</strong>&nbsp;CTestNetParams&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>public</strong>:&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;CRegTestParams()&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::REGTEST;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;<span style="color:#0000ff;">"regtest"</span>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x0b;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0xad;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;29999;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;1;&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h2><a name="t19"></a>（6）修改种子网络连接参数</h2> 
  <p>源文件<strong>&nbsp;chainparams.cpp</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><span style="color:#008200;">//vSeeds.push_back(CDNSSeedData("bitcoin.sipa.be",&nbsp;"seed.bitcoin.sipa.be"));</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//vSeeds.push_back(CDNSSeedData("bluematt.me",&nbsp;"dnsseed.bluematt.me"));</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//vSeeds.push_back(CDNSSeedData("dashjr.org",&nbsp;"dnsseed.bitcoin.dashjr.org"));</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//vSeeds.push_back(CDNSSeedData("bitcoinstats.com",&nbsp;"seed.bitcoinstats.com"));</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//vSeeds.push_back(CDNSSeedData("bitnodes.io",&nbsp;"seed.bitnodes.io"));</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//vSeeds.push_back(CDNSSeedData("xf2.org",&nbsp;"bitseed.xf2.org"));</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[PUBKEY_ADDRESS]&nbsp;=&nbsp;list_of(35);&nbsp;<span style="color:#008200;">//&nbsp;F&nbsp;prefix</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[SCRIPT_ADDRESS]&nbsp;=&nbsp;list_of(65);&nbsp;<span style="color:#008200;">//&nbsp;T&nbsp;prefix</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[SECRET_KEY]&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list_of(45);&nbsp;<span style="color:#008200;">//&nbsp;7&nbsp;prefix</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[EXT_PUBLIC_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x35);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">base58Prefixes[EXT_SECRET_KEY]&nbsp;=&nbsp;list_of(0x04)(0x88)(0xEE)(0x45);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//convertSeed6(vFixedSeeds,&nbsp;pnSeed6_main,&nbsp;ARRAYLEN(pnSeed6_main));</span>&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p><span style="color:#454545;">如果你有7x24在线的服务器运行节点，那么请在这里加入他们的地址，可以是dns也可以是ip地址（v4，v6，--enable-ipv6）。</span></p> 
  <p>如果没有的话，可以考虑和我一样<strong>暂时注释掉</strong>，在运行时候指定连接参数-addnoe=123.123.123.123 或者-dns -addnode=mynode.domain.com</p> 
  <p>对应的修改一下TESTNET和REGTESTNET的网络节点地址。<br> &nbsp;</p> 
  <h2><a name="t20"></a>（7）修改工作量机制</h2> 
  <p>源文件 miner.cpp</p> 
  <p>比特币在函数ScanHash（）里面搜索随机数，</p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><span style="color:#008200;">//</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;ScanHash&nbsp;scans&nbsp;nonces&nbsp;looking&nbsp;for&nbsp;a&nbsp;hash&nbsp;with&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;The&nbsp;nonce&nbsp;is&nbsp;usually&nbsp;preserved&nbsp;between&nbsp;calls,&nbsp;but&nbsp;periodically&nbsp;or&nbsp;if&nbsp;the</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;nonce&nbsp;is&nbsp;0xffff0000&nbsp;or&nbsp;above,&nbsp;the&nbsp;block&nbsp;is&nbsp;rebuilt&nbsp;and&nbsp;nNonce&nbsp;starts&nbsp;over&nbsp;at</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//&nbsp;zero.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">//</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>bool</strong>&nbsp;<strong>static</strong>&nbsp;ScanHash(<strong>const</strong>&nbsp;CBlockHeader&nbsp;*pblock,&nbsp;uint32_t&amp;&nbsp;nNonce,&nbsp;uint256&nbsp;*phash)&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//CHash256&nbsp;hasher;</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//ss&nbsp;&lt;&lt;&nbsp;*pblock;</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//assert(ss.size()&nbsp;==&nbsp;80);</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//hasher.Write((unsigned&nbsp;char*)&amp;ss[0],&nbsp;76);</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>while</strong>&nbsp;(<strong>true</strong>)&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nNonce++;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Write&nbsp;the&nbsp;last&nbsp;4&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;(the&nbsp;nonce)&nbsp;to&nbsp;a&nbsp;copy&nbsp;of</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;the&nbsp;double-SHA256&nbsp;state,&nbsp;and&nbsp;compute&nbsp;the&nbsp;result.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//CHash256(hasher).Write((unsigned&nbsp;char*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;char*)phash);</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*phash&nbsp;=&nbsp;pblock-&gt;ComputePowHash(nNonce);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Return&nbsp;the&nbsp;nonce&nbsp;if&nbsp;the&nbsp;hash&nbsp;has&nbsp;at&nbsp;least&nbsp;some&nbsp;zero&nbsp;bits,</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;caller&nbsp;will&nbsp;check&nbsp;if&nbsp;it&nbsp;has&nbsp;enough&nbsp;to&nbsp;reach&nbsp;the&nbsp;target</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>if</strong>&nbsp;(((uint16_t*)phash)[15]&nbsp;==&nbsp;0)&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;<strong>true</strong>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;If&nbsp;nothing&nbsp;found&nbsp;after&nbsp;trying&nbsp;for&nbsp;a&nbsp;while,&nbsp;return&nbsp;-1</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>if</strong>&nbsp;((nNonce&nbsp;&amp;&nbsp;0xffff)&nbsp;==&nbsp;0)&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;<strong>false</strong>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>if</strong>&nbsp;((nNonce&nbsp;&amp;&nbsp;0xfff)&nbsp;==&nbsp;0)&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boost::this_thread::interruption_point();&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">}&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>在函数BitcoinMiner()里面创建新的block，设定时间戳(扰动1)，获取mempool里面的最新交易(扰动2)，调用ScanHash()搜索随机数(扰动3），直到找到满足条件的hash。</p> 
  <p>另外比特币的工作量证明的hash同时用作这个block的索引，litecoin里面这2个概念是区分的对待的(sha256的hash作为索引，scrypt出来的pow hash作为工作量证明)。</p> 
  <p>注意：设置独立挖矿的条件(chainparams.cpp里面设置)</p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;">fMiningRequiresPeers&nbsp;=&nbsp;!<strong>true</strong>;&nbsp;<span style="color:#008200;">//&nbsp;See&nbsp;BitcoinMiner()&nbsp;for&nbsp;details.</span>&nbsp;&nbsp;</span></li> 
  </ol>
  <p><br><span style="color:#454545;">挖矿代码：</span></p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><strong>void</strong>&nbsp;<strong>static</strong>&nbsp;BitcoinMiner(CWallet&nbsp;*pwallet)&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(<span style="color:#0000ff;">"FastCoinMiner&nbsp;started\n"</span>);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;SetThreadPriority(THREAD_PRIORITY_LOWEST);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;RenameThread(<span style="color:#0000ff;">"fastcoin-miner"</span>);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Each&nbsp;thread&nbsp;has&nbsp;its&nbsp;own&nbsp;key&nbsp;and&nbsp;counter</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;CReserveKey&nbsp;reservekey(pwallet);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<strong>int</strong>&nbsp;nExtraNonce&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>try</strong>&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>while</strong>&nbsp;(<strong>true</strong>)&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>if</strong>&nbsp;(Params().MiningRequiresPeers())&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Busy-wait&nbsp;for&nbsp;the&nbsp;network&nbsp;to&nbsp;come&nbsp;online&nbsp;so&nbsp;we&nbsp;don't&nbsp;waste&nbsp;time&nbsp;mining</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;on&nbsp;an&nbsp;obsolete&nbsp;chain.&nbsp;In&nbsp;regtest&nbsp;mode&nbsp;we&nbsp;expect&nbsp;to&nbsp;fly&nbsp;solo.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>while</strong>&nbsp;(vNodes.empty())&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MilliSleep(1000);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Create&nbsp;new&nbsp;block</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<strong>int</strong>&nbsp;nTransactionsUpdatedLast&nbsp;=&nbsp;mempool.GetTransactionsUpdated();&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlockIndex*&nbsp;pindexPrev&nbsp;=&nbsp;chainActive.Tip();&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_ptr&lt;CBlockTemplate&gt;&nbsp;pblocktemplate(CreateNewBlockWithKey(reservekey));&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>if</strong>&nbsp;(!pblocktemplate.get())&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(<span style="color:#0000ff;">"Error&nbsp;in&nbsp;FastCoinMiner:&nbsp;Keypool&nbsp;ran&nbsp;out,&nbsp;please&nbsp;call&nbsp;keypoolrefill&nbsp;before&nbsp;restarting&nbsp;the&nbsp;mining&nbsp;thread\n"</span>);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBlock&nbsp;*pblock&nbsp;=&nbsp;&amp;pblocktemplate-&gt;block;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IncrementExtraNonce(pblock,&nbsp;pindexPrev,&nbsp;nExtraNonce);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LogPrintf(<span style="color:#0000ff;">"Running&nbsp;FastCoinMiner&nbsp;with&nbsp;%u&nbsp;transactions&nbsp;in&nbsp;block&nbsp;(%u&nbsp;bytes)\n"</span>,&nbsp;pblock-&gt;vtx.size(),&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::GetSerializeSize(*pblock,&nbsp;SER_NETWORK,&nbsp;PROTOCOL_VERSION));&nbsp;&nbsp;</span></li> 
  </ol>
  <p><br><span style="color:#454545;">博主稍作修改，设置了几个预置的hash算法（sha256，scrypt，keccak（即SHA3))，可以通过block的版本号区分，那么在scanhash里面调用ComputePowHash的时候，可以选择不同的pow算法，甚至你可以把这些算法串联起来，以增加算法被破解的方攻击性。</span></p> 
  <p>&nbsp;</p> 
  <p>看代码吧：</p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;">uint256&nbsp;CBlockHeader::ComputePowHash(uint32_t&nbsp;nNonce)&nbsp;<strong>const</strong>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>if</strong>&nbsp;(nVersion&nbsp;==&nbsp;1&nbsp;||&nbsp;nVersion&nbsp;==&nbsp;2){&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Use&nbsp;SHA256+SHA256&nbsp;to&nbsp;make&nbsp;PoW</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Write&nbsp;the&nbsp;first&nbsp;76&nbsp;bytes&nbsp;of&nbsp;the&nbsp;block&nbsp;header&nbsp;to&nbsp;a&nbsp;double-SHA256&nbsp;state.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow&nbsp;hasher;&nbsp;<span style="color:#008200;">//&nbsp;TODO:&nbsp;Create&nbsp;a&nbsp;new&nbsp;PowHasher&nbsp;named&nbsp;CPowHash256</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*<strong>this</strong>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;<strong>char</strong>*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDoubleSHA256Pow(hasher).Write((unsigned&nbsp;<strong>char</strong>*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;<strong>char</strong>*)&amp;powHash);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;powHash;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}<strong>else</strong>&nbsp;<strong>if</strong>&nbsp;(nVersion&nbsp;==&nbsp;3){&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Scrypt&nbsp;PoW</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow&nbsp;hasher;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*<strong>this</strong>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;<strong>char</strong>*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CScryptHash256Pow(hasher).Write((unsigned&nbsp;<strong>char</strong>*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;<strong>char</strong>*)&amp;powHash);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;powHash;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}<strong>else</strong>&nbsp;<strong>if</strong>&nbsp;(nVersion&nbsp;==&nbsp;4){&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Scrypt+SHA256&nbsp;PoW</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}<strong>else</strong>&nbsp;<strong>if</strong>&nbsp;(nVersion&nbsp;==&nbsp;5){&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Keccak(1088,512,256)&nbsp;or&nbsp;Known&nbsp;as&nbsp;SHA3-256(fips202draft)&nbsp;Pow</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256&nbsp;hasher;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDataStream&nbsp;ss(SER_NETWORK,&nbsp;PROTOCOL_VERSION);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;&lt;&lt;&nbsp;*<strong>this</strong>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(ss.size()&nbsp;==&nbsp;80);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasher.Write((unsigned&nbsp;<strong>char</strong>*)&amp;ss[0],&nbsp;76);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint256&nbsp;powHash;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CKeccak_256(hasher).Write((unsigned&nbsp;<strong>char</strong>*)&amp;nNonce,&nbsp;4).Finalize((unsigned&nbsp;<strong>char</strong>*)&amp;powHash);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;powHash;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}<strong>else</strong>{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Abort,&nbsp;unknown&nbsp;block&nbsp;version.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(<strong>false</strong>);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;~(uint256)0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">}&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h2><a name="t21"></a>（8）修改奖励机制</h2> 
  <p>参考9.3</p> 
  <h3><a name="t22"></a>8.1) 修改挖矿奖励的成熟时间</h3> 
  <p>源代码：<strong>main.h</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><span style="color:#008200;">/**&nbsp;Coinbase&nbsp;transaction&nbsp;outputs&nbsp;can&nbsp;only&nbsp;be&nbsp;spent&nbsp;after&nbsp;this&nbsp;number&nbsp;of&nbsp;new&nbsp;blocks&nbsp;(network&nbsp;rule)&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>static</strong>&nbsp;<strong>const</strong>&nbsp;<strong>int</strong>&nbsp;COINBASE_MATURITY&nbsp;=&nbsp;14;&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h3><a name="t23"></a>8.2) 修改交易确认块数推荐值</h3> 
  <p>源代码&nbsp;<strong>qt/transactionrecord.h</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><span style="color:#008200;">/**&nbsp;UI&nbsp;model&nbsp;for&nbsp;a&nbsp;transaction.&nbsp;A&nbsp;core&nbsp;transaction&nbsp;can&nbsp;be&nbsp;represented&nbsp;by&nbsp;multiple&nbsp;UI&nbsp;transactions&nbsp;if&nbsp;it&nbsp;has</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;multiple&nbsp;outputs.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>class</strong>&nbsp;TransactionRecord&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>public</strong>:&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>enum</strong>&nbsp;Type&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other,&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generated,&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToAddress,&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToOther,&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvWithAddress,&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RecvFromOther,&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendToSelf&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**&nbsp;Number&nbsp;of&nbsp;confirmation&nbsp;recommended&nbsp;for&nbsp;accepting&nbsp;a&nbsp;transaction&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>static</strong>&nbsp;<strong>const</strong>&nbsp;<strong>int</strong>&nbsp;RecommendedNumConfirmations&nbsp;=&nbsp;2;&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h2><a name="t24"></a>（9）修改难度配置</h2> 
  <p>源文件<strong>&nbsp;chainparams.cpp</strong></p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;"><strong>class</strong>&nbsp;CMainParams&nbsp;:&nbsp;<strong>public</strong>&nbsp;CChainParams&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;"><strong>public</strong>:&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;CMainParams()&nbsp;{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;networkID&nbsp;=&nbsp;CBaseChainParams::MAIN;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strNetworkID&nbsp;=&nbsp;<span style="color:#0000ff;">"main"</span>;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">/**&nbsp;</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;message&nbsp;start&nbsp;string&nbsp;is&nbsp;designed&nbsp;to&nbsp;be&nbsp;unlikely&nbsp;to&nbsp;occur&nbsp;in&nbsp;normal&nbsp;data.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;characters&nbsp;are&nbsp;rarely&nbsp;used&nbsp;upper&nbsp;ASCII,&nbsp;not&nbsp;valid&nbsp;as&nbsp;UTF-8,&nbsp;and&nbsp;produce</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;a&nbsp;large&nbsp;4-byte&nbsp;int&nbsp;at&nbsp;any&nbsp;alignment.</span>&nbsp;</span></li> 
   <li><span style="color:#000000;"><span style="color:#008200;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[0]&nbsp;=&nbsp;0x90;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[1]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[2]&nbsp;=&nbsp;0xf0;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pchMessageStart[3]&nbsp;=&nbsp;0x0d;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vAlertPubKey&nbsp;=&nbsp;ParseHex(<span style="color:#0000ff;">"04e01590abdc5967eb550413fcf04bbd7cead46f13579b58d52ea2f08d71a1a94196c476cd4fa60c30b51737fe3d9c8c88a04a6bec2282ebb1f22286130a153b85"</span>);&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDefaultPort&nbsp;=&nbsp;9999;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bnProofOfWorkLimit&nbsp;=&nbsp;~uint256(0)&nbsp;&gt;&gt;&nbsp;32;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nSubsidyHalvingInterval&nbsp;=&nbsp;210000;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nEnforceBlockUpgradeMajority&nbsp;=&nbsp;750;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nRejectBlockOutdatedMajority&nbsp;=&nbsp;950;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nToCheckBlockUpgradeMajority&nbsp;=&nbsp;1000;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nMinerThreads&nbsp;=&nbsp;1;&nbsp;<span style="color:#008200;">//&nbsp;0&nbsp;for&nbsp;all&nbsp;available&nbsp;cpus.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetTimespan&nbsp;=&nbsp;60&nbsp;*&nbsp;60;&nbsp;<span style="color:#008200;">//&nbsp;re-targeting&nbsp;every&nbsp;one&nbsp;hour</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nTargetSpacing&nbsp;=&nbsp;1&nbsp;*&nbsp;60;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;do&nbsp;new&nbsp;pow&nbsp;every&nbsp;1&nbsp;minutes.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nGenesisSubsidy&nbsp;=&nbsp;100;&nbsp;&nbsp;</span></li> 
  </ol>
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
  <h3><a name="t25"></a>a) bnProofOfWorkLimit=~uint256(0) &gt;&gt; 32;</h3> 
  <p>是一个大整数（256bit）表示，前面32个位数是0，这个参数表示全网允许的最小难度，低于这个难度的block是不会被挖掘的。</p> 
  <p>&nbsp;</p> 
  <h3><a name="t26"></a>b) nGenesisSubsidy = 100;</h3> 
  <p>初始津贴，比特币的第一个块的奖励是50个btc。</p> 
  <p>&nbsp;</p> 
  <h3><a name="t27"></a>c) nSubsidyHavlingInterval = 210000;&nbsp;</h3> 
  <p>这个参数决定了多少个block以后比特币的奖励（补贴，挖矿奖励)会减半。这个参数结合初始奖励（比如比特币50）基本可以估算全网总的货币产量（比如比特币的2100万），这个初始津贴也是可以配置的，如2）所示。比如比特币，一个等比数列求和公式就可以计算货币总量 50(1/(1 - 0.5))*210000=2100万btc。<br> 上面2个参数在查询区块奖励的时候用到，请查看main.cpp 的 GetBlockValue(height, fees)找到细节</p> 
  <p>&nbsp;</p> 
  <p><strong>[cpp]</strong>&nbsp;<a class="ViewSource" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">view plain</a>&nbsp;<a class="CopyToClipboard" href="http://blog.csdn.net/hacode/article/details/40422535#" rel="nofollow">copy</a></p> 
  <ol style="margin-left:45px;">
   <li><span style="color:#000000;">CAmount&nbsp;GetBlockValue(<strong>int</strong>&nbsp;nHeight,&nbsp;<strong>const</strong>&nbsp;CAmount&amp;&nbsp;nFees)&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">{&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;CAmount&nbsp;nSubsidy&nbsp;=&nbsp;Params().GenesisSubsidy()&nbsp;*&nbsp;COIN;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>int</strong>&nbsp;halvings&nbsp;=&nbsp;nHeight&nbsp;/&nbsp;Params().SubsidyHalvingInterval();&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Force&nbsp;block&nbsp;reward&nbsp;to&nbsp;zero&nbsp;when&nbsp;right&nbsp;shift&nbsp;is&nbsp;undefined.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>if</strong>&nbsp;(halvings&nbsp;&gt;=&nbsp;64)&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;nFees;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008200;">//&nbsp;Subsidy&nbsp;is&nbsp;cut&nbsp;in&nbsp;half&nbsp;every&nbsp;210,000&nbsp;blocks&nbsp;which&nbsp;will&nbsp;occur&nbsp;approximately&nbsp;every&nbsp;4&nbsp;years.</span>&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;nSubsidy&nbsp;&gt;&gt;=&nbsp;halvings;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;nSubsidy&nbsp;+&nbsp;nFees;&nbsp;&nbsp;</span></li> 
   <li><span style="color:#000000;">}&nbsp;&nbsp;</span></li> 
  </ol>
  <p><span style="color:#454545;">很多山寨比也是在这里修改货币分布的，比如 nHeight==1 的时候，奖励1000万个，其他块都不予奖励，这个即使预挖模式了吧。</span></p> 
  <p>&nbsp;</p> 
  <p>另外，关于货币分布，这里satoshi同学可能已经考虑很多，他为什么设置到很多年以后才矿源枯竭，为什么采取递减的方式，可能都是出于保护区块链的目的（timestampserver）。</p> 
  <h3><a name="t28"></a>d）难度调节周期</h3> 
  <p>nTargetTimespan = 60 * 60; // re-targeting every one hour, 60 blocks<br> nTargetSpacing = 1 * 60; &nbsp;// expect 1 block/minute<br> 这里的设置是60分钟（3600秒, 因为预期60秒钟1个block，那么就是60个blocks计算新难度，否则使用上一个block的难度），重新评估难度，下一个块的挖掘可能就要使用新的难度设置了。</p> 
  <p>。</p> 
  <p>比特币的调节周期是 2周/每10分钟，也就是 2 * 7 * 24 * 6 = 2016</p> 
  <p>参考：<a href="http://bitcoindifficulty.com/blog/" rel="nofollow">http://bitcoindifficulty.com/blog/</a></p> 
  <p><a href="https://en.bitcoin.it/wiki/Difficulty" rel="nofollow">https://en.bitcoin.it/wiki/Difficulty</a><br> &nbsp;</p> 
  <h2><a name="t29"></a>(10) 修改checkpoints检查</h2> 
  <p>&nbsp;</p> 
  <h2><a name="t30"></a>(11) 修改界面</h2> 
  <p>&nbsp;</p> 
  <p><a href="https://github.com/imharrywu/anycoin" rel="nofollow">github地址</a></p> 
  <p>&nbsp;</p> 
  <p>TODO:</p> 
  <p>1）模板化的山寨币生成，可配置修改部分通过宏或者变量提取出来，用脚本批量替换修改。</p> 
  <p>2）矿池搭建与节点测试&nbsp;<a href="http://p2pool.org/" rel="nofollow">P2pool</a>&nbsp; &amp;<a href="https://en.bitcoin.it/wiki/Poclbm" rel="nofollow">Poclbm</a></p> 
  <p>3）移动支付和网页支付</p> 
  <p>4）应用生态</p> 
  <p>5）交易备注</p> 
  <p>6）复杂交易应用(脚本，非标准交易）</p> 
  <p>&nbsp;</p> 
  <p>备注：</p> 
  <p>1）记得加上-checkpoints=0 参数启动，否则，会导致daemon报错，“FastCoin is downloading blocks...”</p> 
  <p>&nbsp;</p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mjfh095215/article/details/79218359,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mjfh095215/article/details/79218359,&quot;}">阅读更多</a> 
 <a class="btn" href="https://passport.csdn.net/account/login?utm_source=csdn_blog_pc_more_login" target="_self" id="btn-lobinreadmore" data-track-view="{&quot;mod&quot;:&quot;popu_557&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mjfh095215/article/details/79218359,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_557&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mjfh095215/article/details/79218359,&quot;}">登录后自动展开</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
