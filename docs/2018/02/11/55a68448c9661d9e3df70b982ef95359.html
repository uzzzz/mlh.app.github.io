<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>学习区块链（十一）–从拜占庭将军问题谈谈为什么pow是最好的共识机制 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="学习区块链（十一）–从拜占庭将军问题谈谈为什么pow是最好的共识机制" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="这一节，不再去学习如何写代码，而是想聊聊共识机制，我们知道基于区块链技术现在有很多的共识机制，包括不限于POW,POS,DPOS,PBFT……，我先不说为什么我最认可POW，我们先来看看著名的拜占庭将军问题： 拜占庭帝国即中世纪的土耳其，拥有巨大的财富，周围10个邻邦垂诞已久，但拜占庭高墙耸立，固若金汤，没有一个单独的邻邦能够成功入侵。任何单个邻邦入侵的都会失败，同时也有可能自身被其他9个邻邦入侵。拜占庭帝国防御能力如此之强，至少要有十个邻邦中的一半以上同时进攻，才有可能攻破。 然而，如果其中的一个或者几个邻邦本身答应好一起进攻，但实际过程出现背叛，那么入侵者可能都会被歼灭。 于是每一方都小心行事，不敢轻易相信邻国。这就是拜占庭将军问题。 在拜占庭将军问题里，最重要的事情是如何让所有将军达成一致，如果中间出现了被拜占庭帝国收买的将军导致只有半数以下的将军攻打拜占庭，那么基本上这些国家将会灭亡，所以建立信任是攻打拜占庭帝国最关键的一环！ 而这个经典的问题其实在我们现实的生活场景也会经常发生，如果这些将军中出现了叛徒，他们会产生很多坏的作用，如： 叛徒欺骗忠诚的将军自己采取行动 叛徒可能怂恿其它将军行动 叛徒发出干扰指令，迷惑将军使他们感到无所适从 模型假设一：假设只有3个将军A,B,C，假如只有一个人A是叛徒。A告诉B进攻，但告诉C撤退，B告诉C接收A的命令是进攻，而C接收到A的命令是撤退，这时候B和C都会迷惑，B和C都会怀疑对方或者A是叛徒！ 模型假设二：假设只有4个将军A,B,C,D，假如只有一个人A是叛徒。A怎么传达消息都会造成有两个人是一样的消息，另一个人是另外对立的消息！假如A告诉B，C进攻，但告诉D撤退，B从C和D接收的是”A发送给他们的一个是进攻一个是撤退“，C从B和D接收和B的情况一样，那么B认为C和A都是进攻命令，C同理B，所以B和C都会发起进攻，而D也接收到B和C从A接收的信息是进攻，少数服从多数的原则，D也会发起进攻，这样总共有三个人发起进攻，就能保证拿下拜占庭了！ 所以科学家针对拜占庭问题进行研究得出结论：如果将军总数为m，叛徒数量为n,当m&lt;3n+1的时候（即叛徒数量大于或等于总人数的三分之一），拜占庭问题是不能被解决的！，这个时候信任是不能被建立的。 但实际上，可能是所有忠诚的将军永远不知道会有多少叛徒，即使实际上没有叛徒他们也不敢冒险去相信别的将军，他们永远不会把家国的命运赌在那三分之一上！ 到最后这就变成了大家都不进攻的局面！所以如果谁能解决这个信任问题，那么我想十个将军会拿出无数具有异国风情的妹纸来让他拯救一下！ 而解决这个问题的方案在2008年让中本聪找到了，就是区块链技术。 假如10个将军每个人都有一台电脑，区块链在一段时间内只允许一个将军发出信息，这在某种程度上防止了各个将军各说各的进攻方案造成混乱，当然由谁来第一个发出又有最后一个发出呢？ 这个问题问到点子上了，中本聪巧妙的提出了工作量证明（pow），每个将军都必须完成一个10以内加减法后才能发出消息，当某个节点发出统一进攻的消息后，各个节点收到发起者的消息必须签名盖章，确认各自的身份。而中本聪在这里引用现代加密技术为这个信息签名。 这种加密技术——非对称加密完全可以解决古代难以解决的签名问题： 消息传送的私密性 能够确认身份 签名不可伪造、篡改。 非对称加密算法的加密和解密使用不同的两个密钥.这两个密钥就是我们经常听到的公钥和私钥。 非对称加密的作用有两个，一来保护消息的内容，二来让接收方确认发送方的身份 假如将军A想给将军B发送消息，为防止消息泄露，将军A只需要使用B的公钥对信息加密，而B的公钥是公开的，B只需要用只有他自己只的私钥解密即可。 将军B想要在信件上声明自己的身份，他可以自己写一段”签名文本“，并用私钥签名，并广播出去，所有人可以根据B的公钥来验证该签名，确定的B的身份。 由此，一个不可信的分布式网络变成了一个可信的网络，所有的参与者可以在某件事在达成一致。 好，那么网络信任的问题解决了，那么如果10个将军都做出了第一个算术题，谁来第一个发送呢？ 所以中本聪又巧妙的设计了时间戳，每个将军解题的时间盖上了时间戳，第一个解题的人就拥有本轮的发送消息的权利，对应到区块链上就是第一个完成有效计算的矿工的区块是有效的。 那么问题又来了，将军第一个发消息和最后一个发没什么区别，为什么要第一个发呢去做加减法呢？ 中本聪就用比特币来奖励完成计算挖出区块的矿工来激励有人不断的打包区块。同样对将军来说，第一个发消息的人可以获得更多的战利品，可以拯救更多的失足少女。 到这里，我们应该明白了区块链建立信任是可行的，但是必须有激励机制来保证它的稳健运行！所以工作量证明在此时显得非常有意义，挖矿在某种程度上是信任建立的基础，因为建立信任的成本永远不可能是0，除非有天实现了大同社会，否则消耗那些能源来进行挖矿来建立信任完全是不用计较的。 但是有人会说比特币是每四年减半的，代表着以后每个区块挖出来比特币奖励会很少，这可能会导致矿工打包交易的手续费会变高，否则矿工不会有动力去挖区块，参与的人减少，算力减少，区块链的安全不安全了，会承受51%攻击。实际上矿工如果不是诚实挖矿来伪造交易的话，比特币持有人将会对比特币失去信心，只有第一批伪造交易的人会受益，后面伪造交易的矿工获得再多的比特币也没有意义！实际上由于比特币的先发优势，全球的算力已经很分算了，就算是传说掌握了70%算力的中国除非是几大矿池联合才能伪造交易，但是如此劳神费力去让他们已经挖出的很多比特币变得没有意义他们会做吗？而且我们可以等到六个确认之后才确认交易完成，因为六个确认表示伪造者必须成功连续计算出六个区块才能伪造成功！ 所以在我看来pow是目前最合适的共识机制，而在权益证明机制POS中，权益越大的人获得记录权利的概率越高，而记录的人就会有奖励token ，这样一来这些人就会越来越富有，贫富差距就会越来越大。持有token少的人几乎都没有话语权了。 权利掌握在少数人手中，这有违区块链去中心化理念，而在PBFT中，由所有人投票，如果一个没有任何token余额的人想要捣乱，那他几乎是完全没有利益损失。 一直被鼓吹的EOS就是由十几个超级节点来进行公示信息，所以才能达到那么高的tps，那么个人愚见这和中心化的支付宝有何区别，当然支付宝tps可能更高。所以我们不得不承认比pow效率高的去中心化必然没有它高。 安全、去中心化、效率在现在看来是不可能三角，三者只能取其二，而且我们不难发现区块链在某种程度上和互联网互为镜像，我们更不能用互联网思维来看区块链，所以我们也不能说中心化就一定不好，去中心化就一定要吹上天，尺有所长，寸有所短，我们应该辩证且理性的看来这两个领域，让时间说话，二者都必然会在自己适合的领域更好的服务经济、服务整个社会！ 阅读更多" />
<meta property="og:description" content="这一节，不再去学习如何写代码，而是想聊聊共识机制，我们知道基于区块链技术现在有很多的共识机制，包括不限于POW,POS,DPOS,PBFT……，我先不说为什么我最认可POW，我们先来看看著名的拜占庭将军问题： 拜占庭帝国即中世纪的土耳其，拥有巨大的财富，周围10个邻邦垂诞已久，但拜占庭高墙耸立，固若金汤，没有一个单独的邻邦能够成功入侵。任何单个邻邦入侵的都会失败，同时也有可能自身被其他9个邻邦入侵。拜占庭帝国防御能力如此之强，至少要有十个邻邦中的一半以上同时进攻，才有可能攻破。 然而，如果其中的一个或者几个邻邦本身答应好一起进攻，但实际过程出现背叛，那么入侵者可能都会被歼灭。 于是每一方都小心行事，不敢轻易相信邻国。这就是拜占庭将军问题。 在拜占庭将军问题里，最重要的事情是如何让所有将军达成一致，如果中间出现了被拜占庭帝国收买的将军导致只有半数以下的将军攻打拜占庭，那么基本上这些国家将会灭亡，所以建立信任是攻打拜占庭帝国最关键的一环！ 而这个经典的问题其实在我们现实的生活场景也会经常发生，如果这些将军中出现了叛徒，他们会产生很多坏的作用，如： 叛徒欺骗忠诚的将军自己采取行动 叛徒可能怂恿其它将军行动 叛徒发出干扰指令，迷惑将军使他们感到无所适从 模型假设一：假设只有3个将军A,B,C，假如只有一个人A是叛徒。A告诉B进攻，但告诉C撤退，B告诉C接收A的命令是进攻，而C接收到A的命令是撤退，这时候B和C都会迷惑，B和C都会怀疑对方或者A是叛徒！ 模型假设二：假设只有4个将军A,B,C,D，假如只有一个人A是叛徒。A怎么传达消息都会造成有两个人是一样的消息，另一个人是另外对立的消息！假如A告诉B，C进攻，但告诉D撤退，B从C和D接收的是”A发送给他们的一个是进攻一个是撤退“，C从B和D接收和B的情况一样，那么B认为C和A都是进攻命令，C同理B，所以B和C都会发起进攻，而D也接收到B和C从A接收的信息是进攻，少数服从多数的原则，D也会发起进攻，这样总共有三个人发起进攻，就能保证拿下拜占庭了！ 所以科学家针对拜占庭问题进行研究得出结论：如果将军总数为m，叛徒数量为n,当m&lt;3n+1的时候（即叛徒数量大于或等于总人数的三分之一），拜占庭问题是不能被解决的！，这个时候信任是不能被建立的。 但实际上，可能是所有忠诚的将军永远不知道会有多少叛徒，即使实际上没有叛徒他们也不敢冒险去相信别的将军，他们永远不会把家国的命运赌在那三分之一上！ 到最后这就变成了大家都不进攻的局面！所以如果谁能解决这个信任问题，那么我想十个将军会拿出无数具有异国风情的妹纸来让他拯救一下！ 而解决这个问题的方案在2008年让中本聪找到了，就是区块链技术。 假如10个将军每个人都有一台电脑，区块链在一段时间内只允许一个将军发出信息，这在某种程度上防止了各个将军各说各的进攻方案造成混乱，当然由谁来第一个发出又有最后一个发出呢？ 这个问题问到点子上了，中本聪巧妙的提出了工作量证明（pow），每个将军都必须完成一个10以内加减法后才能发出消息，当某个节点发出统一进攻的消息后，各个节点收到发起者的消息必须签名盖章，确认各自的身份。而中本聪在这里引用现代加密技术为这个信息签名。 这种加密技术——非对称加密完全可以解决古代难以解决的签名问题： 消息传送的私密性 能够确认身份 签名不可伪造、篡改。 非对称加密算法的加密和解密使用不同的两个密钥.这两个密钥就是我们经常听到的公钥和私钥。 非对称加密的作用有两个，一来保护消息的内容，二来让接收方确认发送方的身份 假如将军A想给将军B发送消息，为防止消息泄露，将军A只需要使用B的公钥对信息加密，而B的公钥是公开的，B只需要用只有他自己只的私钥解密即可。 将军B想要在信件上声明自己的身份，他可以自己写一段”签名文本“，并用私钥签名，并广播出去，所有人可以根据B的公钥来验证该签名，确定的B的身份。 由此，一个不可信的分布式网络变成了一个可信的网络，所有的参与者可以在某件事在达成一致。 好，那么网络信任的问题解决了，那么如果10个将军都做出了第一个算术题，谁来第一个发送呢？ 所以中本聪又巧妙的设计了时间戳，每个将军解题的时间盖上了时间戳，第一个解题的人就拥有本轮的发送消息的权利，对应到区块链上就是第一个完成有效计算的矿工的区块是有效的。 那么问题又来了，将军第一个发消息和最后一个发没什么区别，为什么要第一个发呢去做加减法呢？ 中本聪就用比特币来奖励完成计算挖出区块的矿工来激励有人不断的打包区块。同样对将军来说，第一个发消息的人可以获得更多的战利品，可以拯救更多的失足少女。 到这里，我们应该明白了区块链建立信任是可行的，但是必须有激励机制来保证它的稳健运行！所以工作量证明在此时显得非常有意义，挖矿在某种程度上是信任建立的基础，因为建立信任的成本永远不可能是0，除非有天实现了大同社会，否则消耗那些能源来进行挖矿来建立信任完全是不用计较的。 但是有人会说比特币是每四年减半的，代表着以后每个区块挖出来比特币奖励会很少，这可能会导致矿工打包交易的手续费会变高，否则矿工不会有动力去挖区块，参与的人减少，算力减少，区块链的安全不安全了，会承受51%攻击。实际上矿工如果不是诚实挖矿来伪造交易的话，比特币持有人将会对比特币失去信心，只有第一批伪造交易的人会受益，后面伪造交易的矿工获得再多的比特币也没有意义！实际上由于比特币的先发优势，全球的算力已经很分算了，就算是传说掌握了70%算力的中国除非是几大矿池联合才能伪造交易，但是如此劳神费力去让他们已经挖出的很多比特币变得没有意义他们会做吗？而且我们可以等到六个确认之后才确认交易完成，因为六个确认表示伪造者必须成功连续计算出六个区块才能伪造成功！ 所以在我看来pow是目前最合适的共识机制，而在权益证明机制POS中，权益越大的人获得记录权利的概率越高，而记录的人就会有奖励token ，这样一来这些人就会越来越富有，贫富差距就会越来越大。持有token少的人几乎都没有话语权了。 权利掌握在少数人手中，这有违区块链去中心化理念，而在PBFT中，由所有人投票，如果一个没有任何token余额的人想要捣乱，那他几乎是完全没有利益损失。 一直被鼓吹的EOS就是由十几个超级节点来进行公示信息，所以才能达到那么高的tps，那么个人愚见这和中心化的支付宝有何区别，当然支付宝tps可能更高。所以我们不得不承认比pow效率高的去中心化必然没有它高。 安全、去中心化、效率在现在看来是不可能三角，三者只能取其二，而且我们不难发现区块链在某种程度上和互联网互为镜像，我们更不能用互联网思维来看区块链，所以我们也不能说中心化就一定不好，去中心化就一定要吹上天，尺有所长，寸有所短，我们应该辩证且理性的看来这两个领域，让时间说话，二者都必然会在自己适合的领域更好的服务经济、服务整个社会！ 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/02/11/55a68448c9661d9e3df70b982ef95359.html" />
<meta property="og:url" content="https://mlh.app/2018/02/11/55a68448c9661d9e3df70b982ef95359.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-02-11T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"这一节，不再去学习如何写代码，而是想聊聊共识机制，我们知道基于区块链技术现在有很多的共识机制，包括不限于POW,POS,DPOS,PBFT……，我先不说为什么我最认可POW，我们先来看看著名的拜占庭将军问题： 拜占庭帝国即中世纪的土耳其，拥有巨大的财富，周围10个邻邦垂诞已久，但拜占庭高墙耸立，固若金汤，没有一个单独的邻邦能够成功入侵。任何单个邻邦入侵的都会失败，同时也有可能自身被其他9个邻邦入侵。拜占庭帝国防御能力如此之强，至少要有十个邻邦中的一半以上同时进攻，才有可能攻破。 然而，如果其中的一个或者几个邻邦本身答应好一起进攻，但实际过程出现背叛，那么入侵者可能都会被歼灭。 于是每一方都小心行事，不敢轻易相信邻国。这就是拜占庭将军问题。 在拜占庭将军问题里，最重要的事情是如何让所有将军达成一致，如果中间出现了被拜占庭帝国收买的将军导致只有半数以下的将军攻打拜占庭，那么基本上这些国家将会灭亡，所以建立信任是攻打拜占庭帝国最关键的一环！ 而这个经典的问题其实在我们现实的生活场景也会经常发生，如果这些将军中出现了叛徒，他们会产生很多坏的作用，如： 叛徒欺骗忠诚的将军自己采取行动 叛徒可能怂恿其它将军行动 叛徒发出干扰指令，迷惑将军使他们感到无所适从 模型假设一：假设只有3个将军A,B,C，假如只有一个人A是叛徒。A告诉B进攻，但告诉C撤退，B告诉C接收A的命令是进攻，而C接收到A的命令是撤退，这时候B和C都会迷惑，B和C都会怀疑对方或者A是叛徒！ 模型假设二：假设只有4个将军A,B,C,D，假如只有一个人A是叛徒。A怎么传达消息都会造成有两个人是一样的消息，另一个人是另外对立的消息！假如A告诉B，C进攻，但告诉D撤退，B从C和D接收的是”A发送给他们的一个是进攻一个是撤退“，C从B和D接收和B的情况一样，那么B认为C和A都是进攻命令，C同理B，所以B和C都会发起进攻，而D也接收到B和C从A接收的信息是进攻，少数服从多数的原则，D也会发起进攻，这样总共有三个人发起进攻，就能保证拿下拜占庭了！ 所以科学家针对拜占庭问题进行研究得出结论：如果将军总数为m，叛徒数量为n,当m&lt;3n+1的时候（即叛徒数量大于或等于总人数的三分之一），拜占庭问题是不能被解决的！，这个时候信任是不能被建立的。 但实际上，可能是所有忠诚的将军永远不知道会有多少叛徒，即使实际上没有叛徒他们也不敢冒险去相信别的将军，他们永远不会把家国的命运赌在那三分之一上！ 到最后这就变成了大家都不进攻的局面！所以如果谁能解决这个信任问题，那么我想十个将军会拿出无数具有异国风情的妹纸来让他拯救一下！ 而解决这个问题的方案在2008年让中本聪找到了，就是区块链技术。 假如10个将军每个人都有一台电脑，区块链在一段时间内只允许一个将军发出信息，这在某种程度上防止了各个将军各说各的进攻方案造成混乱，当然由谁来第一个发出又有最后一个发出呢？ 这个问题问到点子上了，中本聪巧妙的提出了工作量证明（pow），每个将军都必须完成一个10以内加减法后才能发出消息，当某个节点发出统一进攻的消息后，各个节点收到发起者的消息必须签名盖章，确认各自的身份。而中本聪在这里引用现代加密技术为这个信息签名。 这种加密技术——非对称加密完全可以解决古代难以解决的签名问题： 消息传送的私密性 能够确认身份 签名不可伪造、篡改。 非对称加密算法的加密和解密使用不同的两个密钥.这两个密钥就是我们经常听到的公钥和私钥。 非对称加密的作用有两个，一来保护消息的内容，二来让接收方确认发送方的身份 假如将军A想给将军B发送消息，为防止消息泄露，将军A只需要使用B的公钥对信息加密，而B的公钥是公开的，B只需要用只有他自己只的私钥解密即可。 将军B想要在信件上声明自己的身份，他可以自己写一段”签名文本“，并用私钥签名，并广播出去，所有人可以根据B的公钥来验证该签名，确定的B的身份。 由此，一个不可信的分布式网络变成了一个可信的网络，所有的参与者可以在某件事在达成一致。 好，那么网络信任的问题解决了，那么如果10个将军都做出了第一个算术题，谁来第一个发送呢？ 所以中本聪又巧妙的设计了时间戳，每个将军解题的时间盖上了时间戳，第一个解题的人就拥有本轮的发送消息的权利，对应到区块链上就是第一个完成有效计算的矿工的区块是有效的。 那么问题又来了，将军第一个发消息和最后一个发没什么区别，为什么要第一个发呢去做加减法呢？ 中本聪就用比特币来奖励完成计算挖出区块的矿工来激励有人不断的打包区块。同样对将军来说，第一个发消息的人可以获得更多的战利品，可以拯救更多的失足少女。 到这里，我们应该明白了区块链建立信任是可行的，但是必须有激励机制来保证它的稳健运行！所以工作量证明在此时显得非常有意义，挖矿在某种程度上是信任建立的基础，因为建立信任的成本永远不可能是0，除非有天实现了大同社会，否则消耗那些能源来进行挖矿来建立信任完全是不用计较的。 但是有人会说比特币是每四年减半的，代表着以后每个区块挖出来比特币奖励会很少，这可能会导致矿工打包交易的手续费会变高，否则矿工不会有动力去挖区块，参与的人减少，算力减少，区块链的安全不安全了，会承受51%攻击。实际上矿工如果不是诚实挖矿来伪造交易的话，比特币持有人将会对比特币失去信心，只有第一批伪造交易的人会受益，后面伪造交易的矿工获得再多的比特币也没有意义！实际上由于比特币的先发优势，全球的算力已经很分算了，就算是传说掌握了70%算力的中国除非是几大矿池联合才能伪造交易，但是如此劳神费力去让他们已经挖出的很多比特币变得没有意义他们会做吗？而且我们可以等到六个确认之后才确认交易完成，因为六个确认表示伪造者必须成功连续计算出六个区块才能伪造成功！ 所以在我看来pow是目前最合适的共识机制，而在权益证明机制POS中，权益越大的人获得记录权利的概率越高，而记录的人就会有奖励token ，这样一来这些人就会越来越富有，贫富差距就会越来越大。持有token少的人几乎都没有话语权了。 权利掌握在少数人手中，这有违区块链去中心化理念，而在PBFT中，由所有人投票，如果一个没有任何token余额的人想要捣乱，那他几乎是完全没有利益损失。 一直被鼓吹的EOS就是由十几个超级节点来进行公示信息，所以才能达到那么高的tps，那么个人愚见这和中心化的支付宝有何区别，当然支付宝tps可能更高。所以我们不得不承认比pow效率高的去中心化必然没有它高。 安全、去中心化、效率在现在看来是不可能三角，三者只能取其二，而且我们不难发现区块链在某种程度上和互联网互为镜像，我们更不能用互联网思维来看区块链，所以我们也不能说中心化就一定不好，去中心化就一定要吹上天，尺有所长，寸有所短，我们应该辩证且理性的看来这两个领域，让时间说话，二者都必然会在自己适合的领域更好的服务经济、服务整个社会！ 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/02/11/55a68448c9661d9e3df70b982ef95359.html","headline":"学习区块链（十一）–从拜占庭将军问题谈谈为什么pow是最好的共识机制","dateModified":"2018-02-11T00:00:00+08:00","datePublished":"2018-02-11T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/02/11/55a68448c9661d9e3df70b982ef95359.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>学习区块链（十一）--从拜占庭将军问题谈谈为什么pow是最好的共识机制</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>这一节，不再去学习如何写代码，而是想聊聊共识机制，我们知道基于区块链技术现在有很多的共识机制，包括不限于POW,POS,DPOS,PBFT……，我先不说为什么我最认可POW，我们先来看看著名的拜占庭将军问题：</p> 
  <blockquote> 
   <p>拜占庭帝国即中世纪的土耳其，拥有巨大的财富，周围10个邻邦垂诞已久，但拜占庭高墙耸立，固若金汤，没有一个单独的邻邦能够成功入侵。任何单个邻邦入侵的都会失败，同时也有可能自身被其他9个邻邦入侵。拜占庭帝国防御能力如此之强，至少要有十个邻邦中的一半以上同时进攻，才有可能攻破。</p> 
   <p>然而，如果其中的一个或者几个邻邦本身答应好一起进攻，但实际过程出现背叛，那么入侵者可能都会被歼灭。</p> 
   <p>于是每一方都小心行事，不敢轻易相信邻国。这就是拜占庭将军问题。</p> 
  </blockquote> 
  <p>在拜占庭将军问题里，最重要的事情是如何让所有将军达成一致，如果中间出现了被拜占庭帝国收买的将军导致只有半数以下的将军攻打拜占庭，那么基本上这些国家将会灭亡，所以建立信任是攻打拜占庭帝国最关键的一环！</p> 
  <p>而这个经典的问题其实在我们现实的生活场景也会经常发生，如果这些将军中出现了叛徒，他们会产生很多坏的作用，如：</p> 
  <ol> 
   <li>叛徒欺骗忠诚的将军自己采取行动</li> 
   <li>叛徒可能怂恿其它将军行动</li> 
   <li>叛徒发出干扰指令，迷惑将军使他们感到无所适从</li> 
  </ol> 
  <p>模型假设一：假设只有3个将军A,B,C，假如只有一个人A是叛徒。A告诉B进攻，但告诉C撤退，B告诉C接收A的命令是进攻，而C接收到A的命令是撤退，这时候B和C都会迷惑，B和C都会怀疑对方或者A是叛徒！ <br> 模型假设二：假设只有4个将军A,B,C,D，假如只有一个人A是叛徒。A怎么传达消息都会造成有两个人是一样的消息，另一个人是另外对立的消息！假如A告诉B，C进攻，但告诉D撤退，B从C和D接收的是”A发送给他们的一个是进攻一个是撤退“，C从B和D接收和B的情况一样，那么B认为C和A都是进攻命令，C同理B，所以B和C都会发起进攻，而D也接收到B和C从A接收的信息是进攻，少数服从多数的原则，D也会发起进攻，这样总共有三个人发起进攻，就能保证拿下拜占庭了！</p> 
  <p>所以科学家针对拜占庭问题进行研究得出结论：如果将军总数为m，叛徒数量为n,<strong>当m&lt;3n+1的时候（即叛徒数量大于或等于总人数的三分之一），拜占庭问题是不能被解决的！</strong>，这个时候信任是不能被建立的。 <br> 但实际上，可能是所有忠诚的将军永远不知道会有多少叛徒，即使实际上没有叛徒他们也不敢冒险去相信别的将军，他们永远不会把家国的命运赌在那三分之一上！ <br> 到最后这就变成了大家都不进攻的局面！所以如果谁能解决这个信任问题，那么我想十个将军会拿出无数具有异国风情的妹纸来让他拯救一下！</p> 
  <p>而解决这个问题的方案在2008年让中本聪找到了，就是区块链技术。</p> 
  <p>假如10个将军每个人都有一台电脑，区块链在一段时间内只允许一个将军发出信息，这在某种程度上防止了各个将军各说各的进攻方案造成混乱，<font color="red">当然由谁来第一个发出又有最后一个发出呢？</font></p> 
  <p>这个问题问到点子上了，中本聪巧妙的提出了工作量证明（pow），每个将军都必须完成一个10以内加减法后才能发出消息，当某个节点发出统一进攻的消息后，各个节点收到发起者的消息必须签名盖章，确认各自的身份。而中本聪在这里引用现代加密技术为这个信息签名。</p> 
  <p>这种加密技术——非对称加密完全可以解决古代难以解决的签名问题：</p> 
  <p>消息传送的私密性 <br> 能够确认身份 <br> 签名不可伪造、篡改。</p> 
  <p>非对称加密算法的加密和解密使用不同的两个密钥.这两个密钥就是我们经常听到的公钥和私钥。</p> 
  <p><font color="red">非对称加密的作用有两个，一来保护消息的内容，二来让接收方确认发送方的身份</font></p> 
  <p>假如将军A想给将军B发送消息，为防止消息泄露，将军A只需要使用B的公钥对信息加密，而B的公钥是公开的，B只需要用只有他自己只的私钥解密即可。</p> 
  <p>将军B想要在信件上声明自己的身份，他可以自己写一段”签名文本“，并用私钥签名，并广播出去，所有人可以根据B的公钥来验证该签名，确定的B的身份。</p> 
  <p>由此，一个不可信的分布式网络变成了一个可信的网络，所有的参与者可以在某件事在达成一致。</p> 
  <p><font color="red">好，那么网络信任的问题解决了，那么如果10个将军都做出了第一个算术题，谁来第一个发送呢？</font></p> 
  <p>所以中本聪又巧妙的设计了时间戳，每个将军解题的时间盖上了时间戳，第一个解题的人就拥有本轮的发送消息的权利，对应到区块链上就是第一个完成有效计算的矿工的区块是有效的。</p> 
  <p><font color="red">那么问题又来了，将军第一个发消息和最后一个发没什么区别，为什么要第一个发呢去做加减法呢？</font> <br> 中本聪就用比特币来奖励完成计算挖出区块的矿工来激励有人不断的打包区块。同样对将军来说，第一个发消息的人可以获得更多的战利品，可以拯救更多的失足少女。</p> 
  <p>到这里，我们应该明白了区块链建立信任是可行的，但是必须有激励机制来保证它的稳健运行！所以工作量证明在此时显得非常有意义，挖矿在某种程度上是信任建立的基础，因为建立信任的成本永远不可能是0，除非有天实现了大同社会，否则消耗那些能源来进行挖矿来建立信任完全是不用计较的。</p> 
  <p>但是有人会说比特币是每四年减半的，代表着以后每个区块挖出来比特币奖励会很少，这可能会导致矿工打包交易的手续费会变高，否则矿工不会有动力去挖区块，参与的人减少，算力减少，区块链的安全不安全了，会承受51%攻击。实际上矿工如果不是诚实挖矿来伪造交易的话，比特币持有人将会对比特币失去信心，只有第一批伪造交易的人会受益，后面伪造交易的矿工获得再多的比特币也没有意义！实际上由于比特币的先发优势，全球的算力已经很分算了，就算是传说掌握了70%算力的中国除非是几大矿池联合才能伪造交易，但是如此劳神费力去让他们已经挖出的很多比特币变得没有意义他们会做吗？而且我们可以等到六个确认之后才确认交易完成，因为六个确认表示伪造者必须成功连续计算出六个区块才能伪造成功！</p> 
  <p>所以在我看来pow是目前最合适的共识机制，而在权益证明机制POS中，权益越大的人获得记录权利的概率越高，而记录的人就会有奖励token ，这样一来这些人就会越来越富有，贫富差距就会越来越大。持有token少的人几乎都没有话语权了。 <br> 权利掌握在少数人手中，这有违区块链去中心化理念，而在PBFT中，由所有人投票，如果一个没有任何token余额的人想要捣乱，那他几乎是完全没有利益损失。</p> 
  <p>一直被鼓吹的EOS就是由十几个超级节点来进行公示信息，所以才能达到那么高的tps，那么个人愚见这和中心化的支付宝有何区别，当然支付宝tps可能更高。所以我们不得不承认比pow效率高的去中心化必然没有它高。</p> 
  <p><font color="red">安全、去中心化、效率在现在看来是不可能三角，三者只能取其二</font>，而且我们不难发现区块链在某种程度上和互联网互为镜像，我们更不能用互联网思维来看区块链，所以我们也不能说中心化就一定不好，去中心化就一定要吹上天，尺有所长，寸有所短，我们应该辩证且理性的看来这两个领域，让时间说话，二者都必然会在自己适合的领域更好的服务经济、服务整个社会！</p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/sureSand/article/details/79311971,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/sureSand/article/details/79311971,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
