<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>区块链笔记（1）-使用go-ethereum建立私链 geth版本 1.8.1 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="区块链笔记（1）-使用go-ethereum建立私链 geth版本 1.8.1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1、安装go-ethereum客户端 当前版本1.8.1,make之前先安装golang的环境，笔者golang版本1.9.2，ubuntu 17.10 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum make geth 2、初始化 找个地方新建文件genesis.json，下面的内容来自官网，但是chainId不为0，否则出现insufficient funds for gas * price + value { &quot;config&quot;: { &quot;chainId&quot;: 12, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;alloc&quot; : {}, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot; } 在终端使用以下命令进行初始化 geth init ./genesis.json --datadir &quot;./chain&quot; 显示结果 $ geth init ./genesis.json --datadir &#39;./chain&#39; INFO [02-28|10:25:05] Maximum peer count ETH=25 LES=0 total=25 INFO [02-28|10:25:05] Allocated cache and file handles database=E:\\Projects\\Geth\\&#39;\\chain&#39;\\geth\\chaindata cache=16 handles=16 INFO [02-28|10:25:05] Writing custom genesis block INFO [02-28|10:25:05] Persisted trie from memory database nodes=0 size=0.00B time=7.0004ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [02-28|10:25:05] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [02-28|10:25:05] Allocated cache and file handles database=E:\\Projects\\Geth\\&#39;\\chain&#39;\\geth\\lightchaindata cache=16 handles=16 INFO [02-28|10:25:06] Writing custom genesis block INFO [02-28|10:25:06] Persisted trie from memory database nodes=0 size=0.00B time=0s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [02-28|10:25:06] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 3、启用私链 注：下面的命令将把日志输入到eth_output.log,并开启Geth javascript console(后面简称web3 console) geth --networkid 12 --datadir &quot;./chain&quot; --nodiscover console 2&gt;&gt;eth_output.log 参数 参数说明 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在geth里执行命令 nodiscover 关闭p2p网络的自动发现，不会被网上看到 networkid 网络标识，私有链取一个大于4的随意的值 使用下面的命令查看日志 tail -f eth_output.log 内容如下: ~/geth$ tail -f eth_output.log INFO [02-27|22:13:16] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [02-27|22:13:16] Database deduplication successful deduped=0 INFO [02-27|22:13:16] Loaded most recent local header number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Loaded most recent local full block number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Loaded most recent local fast block number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Regenerated local transaction journal transactions=0 accounts=0 INFO [02-27|22:13:16] Starting P2P networking INFO [02-27|22:13:16] RLPx listener up self=&quot;enode://287b1fb473949dbbbb4edc63e92de98b1021b91c50f68b07f75cf47e0f8253e0f439f6f86e7b49fcf760e6f5f24b9938f83156fca8efd1bc74e1bd4f97cf3e6b@[::]:30303?discport=0&quot; INFO [02-27|22:13:16] IPC endpoint opened url=/home/sd/geth/chain/geth.ipc INFO [02-27|22:13:16] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(192.168.31.1) 在web3 console里内置了一些用来操作以太坊的Javascript对象。主要有： eth：包含一些跟操作区块链相关的方法 net：包含以下查看p2p网络状态的方法 admin：包含一些与管理节点相关的方法 miner：包含启动&amp;停止挖矿的一些方法 personal：主要包含一些管理账户的方法 txpool：包含一些查看交易内存池的方法 web3：包含了以上对象，还包含一些单位换算的方法 4、新建帐户 下面的命令不做特殊说明，都是在web3 console里输入 可以用下面命令查看已有帐户 eth.accounts 创建帐户,下面123456是密码，执行2次，建立两个帐户用于后面的转帐 personal.newAccount(&quot;123456&quot;) 会在 datadir（当前文中为./chain）里生成keystore,每个帐户一个文件，内容示例如下 { &quot;address&quot;: &quot;514b18f2054ecd174ef00f79e5e6b6df3ef4494d&quot;, &quot;crypto&quot;: { &quot;cipher&quot;: &quot;aes-128-ctr&quot;, &quot;ciphertext&quot;: &quot;4531f38141f9daaad578c6e00b99f47aa374f36c2a87d0ffbafb1ca0b33f1fe0&quot;, &quot;cipherparams&quot;: { &quot;iv&quot;: &quot;b120f958450c12504c8d54afe170c250&quot; }, &quot;kdf&quot;: &quot;scrypt&quot;, &quot;kdfparams&quot;: { &quot;dklen&quot;: 32, &quot;n&quot;: 262144, &quot;p&quot;: 1, &quot;r&quot;: 8, &quot;salt&quot;: &quot;e0d8f92937268ab78b78a669a66e59d2db5f8562b1fdb3c6cfc60ce95c1bc20f&quot; }, &quot;mac&quot;: &quot;6bf3a5946e638fc4ea2a95c08997380238d1be189eb044fbe68fe58a36d7c6bd&quot; }, &quot;id&quot;: &quot;c30cb668-a8b7-406c-9ac8-eab245dec9c1&quot;, &quot;version&quot;: 3 } 5、挖矿 设置挖矿的帐户（可以跳过，直接start使用第1个帐户挖矿） 使用的命令查看coinbase的账户地址 eth.coinbase 设置coinbase miner.setEtherbase(eth.accounts[0]) 开始挖矿，默认使用第1个帐户挖矿 miner.start() 挖到时，显示内容如下： INFO [02-27|22:26:25] ? block reached canonical chain number=86 hash=164326…acb82f INFO [02-27|22:26:25] ? mined potential block number=91 hash=8f7693…1aa8b9 INFO [02-27|22:26:25] Commit new mining work number=92 txs=0 uncles=0 elapsed=208.882µs INFO [02-27|22:26:27] Successfully sealed new block number=92 hash=efdd93…daae6e 停止挖矿，停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 miner.stop() 查看余额，以太币最小单位是wei(18个0),可以用formWei进行格式化 acc0 = web3.eth.accounts[0] //给帐户取别名 eth.getBalance(acc0) //显示以wei为单位 web3.fromWei(eth.getBalance(acc0)) //显示以ether为单位 可以写javascript脚本，查看所有帐户余额 allBal.js，不支持let等ES5以后的特性 function AllBalance() { var totalBalance = 0 for(var acci in eth.accounts){ var acc = web3.eth.accounts[acci] var balance = web3.fromWei(web3.eth.getBalance(acc)) console.log(&#39;account:&#39;+acc+&#39;\t balance:&#39;+balance+&#39; ether&#39;) totalBalance += parseFloat(balance) } console.log(&#39;total balance: &#39;+totalBalance) } AllBalance() 在web3 console里使用以下命令加载js loadScript(&#39;allBal.js&#39;) 6、转帐 从第1个帐户转3 ether到第2个帐户，在挖矿时，转帐结果才生效 //给账户取个别名 acc0 = web3.eth.accounts[0] acc1 = web3.eth.accounts[1] eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) 如果错误提示：authentication needed:password or unlock 则需要先解锁,从第1帐户转出，因此解锁第1个帐户 personal.unlockAccount(acc0,&quot;123456&quot;) 解锁完成后，再进行转帐 eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) 7、疑问 挖到矿以后，关闭终端，再打开终端，查余额为0？ 阅读更多" />
<meta property="og:description" content="1、安装go-ethereum客户端 当前版本1.8.1,make之前先安装golang的环境，笔者golang版本1.9.2，ubuntu 17.10 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum make geth 2、初始化 找个地方新建文件genesis.json，下面的内容来自官网，但是chainId不为0，否则出现insufficient funds for gas * price + value { &quot;config&quot;: { &quot;chainId&quot;: 12, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;alloc&quot; : {}, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot; } 在终端使用以下命令进行初始化 geth init ./genesis.json --datadir &quot;./chain&quot; 显示结果 $ geth init ./genesis.json --datadir &#39;./chain&#39; INFO [02-28|10:25:05] Maximum peer count ETH=25 LES=0 total=25 INFO [02-28|10:25:05] Allocated cache and file handles database=E:\\Projects\\Geth\\&#39;\\chain&#39;\\geth\\chaindata cache=16 handles=16 INFO [02-28|10:25:05] Writing custom genesis block INFO [02-28|10:25:05] Persisted trie from memory database nodes=0 size=0.00B time=7.0004ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [02-28|10:25:05] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [02-28|10:25:05] Allocated cache and file handles database=E:\\Projects\\Geth\\&#39;\\chain&#39;\\geth\\lightchaindata cache=16 handles=16 INFO [02-28|10:25:06] Writing custom genesis block INFO [02-28|10:25:06] Persisted trie from memory database nodes=0 size=0.00B time=0s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [02-28|10:25:06] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 3、启用私链 注：下面的命令将把日志输入到eth_output.log,并开启Geth javascript console(后面简称web3 console) geth --networkid 12 --datadir &quot;./chain&quot; --nodiscover console 2&gt;&gt;eth_output.log 参数 参数说明 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在geth里执行命令 nodiscover 关闭p2p网络的自动发现，不会被网上看到 networkid 网络标识，私有链取一个大于4的随意的值 使用下面的命令查看日志 tail -f eth_output.log 内容如下: ~/geth$ tail -f eth_output.log INFO [02-27|22:13:16] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [02-27|22:13:16] Database deduplication successful deduped=0 INFO [02-27|22:13:16] Loaded most recent local header number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Loaded most recent local full block number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Loaded most recent local fast block number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Regenerated local transaction journal transactions=0 accounts=0 INFO [02-27|22:13:16] Starting P2P networking INFO [02-27|22:13:16] RLPx listener up self=&quot;enode://287b1fb473949dbbbb4edc63e92de98b1021b91c50f68b07f75cf47e0f8253e0f439f6f86e7b49fcf760e6f5f24b9938f83156fca8efd1bc74e1bd4f97cf3e6b@[::]:30303?discport=0&quot; INFO [02-27|22:13:16] IPC endpoint opened url=/home/sd/geth/chain/geth.ipc INFO [02-27|22:13:16] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(192.168.31.1) 在web3 console里内置了一些用来操作以太坊的Javascript对象。主要有： eth：包含一些跟操作区块链相关的方法 net：包含以下查看p2p网络状态的方法 admin：包含一些与管理节点相关的方法 miner：包含启动&amp;停止挖矿的一些方法 personal：主要包含一些管理账户的方法 txpool：包含一些查看交易内存池的方法 web3：包含了以上对象，还包含一些单位换算的方法 4、新建帐户 下面的命令不做特殊说明，都是在web3 console里输入 可以用下面命令查看已有帐户 eth.accounts 创建帐户,下面123456是密码，执行2次，建立两个帐户用于后面的转帐 personal.newAccount(&quot;123456&quot;) 会在 datadir（当前文中为./chain）里生成keystore,每个帐户一个文件，内容示例如下 { &quot;address&quot;: &quot;514b18f2054ecd174ef00f79e5e6b6df3ef4494d&quot;, &quot;crypto&quot;: { &quot;cipher&quot;: &quot;aes-128-ctr&quot;, &quot;ciphertext&quot;: &quot;4531f38141f9daaad578c6e00b99f47aa374f36c2a87d0ffbafb1ca0b33f1fe0&quot;, &quot;cipherparams&quot;: { &quot;iv&quot;: &quot;b120f958450c12504c8d54afe170c250&quot; }, &quot;kdf&quot;: &quot;scrypt&quot;, &quot;kdfparams&quot;: { &quot;dklen&quot;: 32, &quot;n&quot;: 262144, &quot;p&quot;: 1, &quot;r&quot;: 8, &quot;salt&quot;: &quot;e0d8f92937268ab78b78a669a66e59d2db5f8562b1fdb3c6cfc60ce95c1bc20f&quot; }, &quot;mac&quot;: &quot;6bf3a5946e638fc4ea2a95c08997380238d1be189eb044fbe68fe58a36d7c6bd&quot; }, &quot;id&quot;: &quot;c30cb668-a8b7-406c-9ac8-eab245dec9c1&quot;, &quot;version&quot;: 3 } 5、挖矿 设置挖矿的帐户（可以跳过，直接start使用第1个帐户挖矿） 使用的命令查看coinbase的账户地址 eth.coinbase 设置coinbase miner.setEtherbase(eth.accounts[0]) 开始挖矿，默认使用第1个帐户挖矿 miner.start() 挖到时，显示内容如下： INFO [02-27|22:26:25] ? block reached canonical chain number=86 hash=164326…acb82f INFO [02-27|22:26:25] ? mined potential block number=91 hash=8f7693…1aa8b9 INFO [02-27|22:26:25] Commit new mining work number=92 txs=0 uncles=0 elapsed=208.882µs INFO [02-27|22:26:27] Successfully sealed new block number=92 hash=efdd93…daae6e 停止挖矿，停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 miner.stop() 查看余额，以太币最小单位是wei(18个0),可以用formWei进行格式化 acc0 = web3.eth.accounts[0] //给帐户取别名 eth.getBalance(acc0) //显示以wei为单位 web3.fromWei(eth.getBalance(acc0)) //显示以ether为单位 可以写javascript脚本，查看所有帐户余额 allBal.js，不支持let等ES5以后的特性 function AllBalance() { var totalBalance = 0 for(var acci in eth.accounts){ var acc = web3.eth.accounts[acci] var balance = web3.fromWei(web3.eth.getBalance(acc)) console.log(&#39;account:&#39;+acc+&#39;\t balance:&#39;+balance+&#39; ether&#39;) totalBalance += parseFloat(balance) } console.log(&#39;total balance: &#39;+totalBalance) } AllBalance() 在web3 console里使用以下命令加载js loadScript(&#39;allBal.js&#39;) 6、转帐 从第1个帐户转3 ether到第2个帐户，在挖矿时，转帐结果才生效 //给账户取个别名 acc0 = web3.eth.accounts[0] acc1 = web3.eth.accounts[1] eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) 如果错误提示：authentication needed:password or unlock 则需要先解锁,从第1帐户转出，因此解锁第1个帐户 personal.unlockAccount(acc0,&quot;123456&quot;) 解锁完成后，再进行转帐 eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) 7、疑问 挖到矿以后，关闭终端，再打开终端，查余额为0？ 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/02/28/f5f8c25c2a2f63ea091cb02231a16b7e.html" />
<meta property="og:url" content="https://mlh.app/2018/02/28/f5f8c25c2a2f63ea091cb02231a16b7e.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-02-28T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1、安装go-ethereum客户端 当前版本1.8.1,make之前先安装golang的环境，笔者golang版本1.9.2，ubuntu 17.10 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum make geth 2、初始化 找个地方新建文件genesis.json，下面的内容来自官网，但是chainId不为0，否则出现insufficient funds for gas * price + value { &quot;config&quot;: { &quot;chainId&quot;: 12, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;alloc&quot; : {}, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot; } 在终端使用以下命令进行初始化 geth init ./genesis.json --datadir &quot;./chain&quot; 显示结果 $ geth init ./genesis.json --datadir &#39;./chain&#39; INFO [02-28|10:25:05] Maximum peer count ETH=25 LES=0 total=25 INFO [02-28|10:25:05] Allocated cache and file handles database=E:\\\\Projects\\\\Geth\\\\&#39;\\\\chain&#39;\\\\geth\\\\chaindata cache=16 handles=16 INFO [02-28|10:25:05] Writing custom genesis block INFO [02-28|10:25:05] Persisted trie from memory database nodes=0 size=0.00B time=7.0004ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [02-28|10:25:05] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [02-28|10:25:05] Allocated cache and file handles database=E:\\\\Projects\\\\Geth\\\\&#39;\\\\chain&#39;\\\\geth\\\\lightchaindata cache=16 handles=16 INFO [02-28|10:25:06] Writing custom genesis block INFO [02-28|10:25:06] Persisted trie from memory database nodes=0 size=0.00B time=0s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [02-28|10:25:06] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 3、启用私链 注：下面的命令将把日志输入到eth_output.log,并开启Geth javascript console(后面简称web3 console) geth --networkid 12 --datadir &quot;./chain&quot; --nodiscover console 2&gt;&gt;eth_output.log 参数 参数说明 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在geth里执行命令 nodiscover 关闭p2p网络的自动发现，不会被网上看到 networkid 网络标识，私有链取一个大于4的随意的值 使用下面的命令查看日志 tail -f eth_output.log 内容如下: ~/geth$ tail -f eth_output.log INFO [02-27|22:13:16] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [02-27|22:13:16] Database deduplication successful deduped=0 INFO [02-27|22:13:16] Loaded most recent local header number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Loaded most recent local full block number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Loaded most recent local fast block number=0 hash=7d416a…b75a26 td=65536 INFO [02-27|22:13:16] Regenerated local transaction journal transactions=0 accounts=0 INFO [02-27|22:13:16] Starting P2P networking INFO [02-27|22:13:16] RLPx listener up self=&quot;enode://287b1fb473949dbbbb4edc63e92de98b1021b91c50f68b07f75cf47e0f8253e0f439f6f86e7b49fcf760e6f5f24b9938f83156fca8efd1bc74e1bd4f97cf3e6b@[::]:30303?discport=0&quot; INFO [02-27|22:13:16] IPC endpoint opened url=/home/sd/geth/chain/geth.ipc INFO [02-27|22:13:16] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(192.168.31.1) 在web3 console里内置了一些用来操作以太坊的Javascript对象。主要有： eth：包含一些跟操作区块链相关的方法 net：包含以下查看p2p网络状态的方法 admin：包含一些与管理节点相关的方法 miner：包含启动&amp;停止挖矿的一些方法 personal：主要包含一些管理账户的方法 txpool：包含一些查看交易内存池的方法 web3：包含了以上对象，还包含一些单位换算的方法 4、新建帐户 下面的命令不做特殊说明，都是在web3 console里输入 可以用下面命令查看已有帐户 eth.accounts 创建帐户,下面123456是密码，执行2次，建立两个帐户用于后面的转帐 personal.newAccount(&quot;123456&quot;) 会在 datadir（当前文中为./chain）里生成keystore,每个帐户一个文件，内容示例如下 { &quot;address&quot;: &quot;514b18f2054ecd174ef00f79e5e6b6df3ef4494d&quot;, &quot;crypto&quot;: { &quot;cipher&quot;: &quot;aes-128-ctr&quot;, &quot;ciphertext&quot;: &quot;4531f38141f9daaad578c6e00b99f47aa374f36c2a87d0ffbafb1ca0b33f1fe0&quot;, &quot;cipherparams&quot;: { &quot;iv&quot;: &quot;b120f958450c12504c8d54afe170c250&quot; }, &quot;kdf&quot;: &quot;scrypt&quot;, &quot;kdfparams&quot;: { &quot;dklen&quot;: 32, &quot;n&quot;: 262144, &quot;p&quot;: 1, &quot;r&quot;: 8, &quot;salt&quot;: &quot;e0d8f92937268ab78b78a669a66e59d2db5f8562b1fdb3c6cfc60ce95c1bc20f&quot; }, &quot;mac&quot;: &quot;6bf3a5946e638fc4ea2a95c08997380238d1be189eb044fbe68fe58a36d7c6bd&quot; }, &quot;id&quot;: &quot;c30cb668-a8b7-406c-9ac8-eab245dec9c1&quot;, &quot;version&quot;: 3 } 5、挖矿 设置挖矿的帐户（可以跳过，直接start使用第1个帐户挖矿） 使用的命令查看coinbase的账户地址 eth.coinbase 设置coinbase miner.setEtherbase(eth.accounts[0]) 开始挖矿，默认使用第1个帐户挖矿 miner.start() 挖到时，显示内容如下： INFO [02-27|22:26:25] ? block reached canonical chain number=86 hash=164326…acb82f INFO [02-27|22:26:25] ? mined potential block number=91 hash=8f7693…1aa8b9 INFO [02-27|22:26:25] Commit new mining work number=92 txs=0 uncles=0 elapsed=208.882µs INFO [02-27|22:26:27] Successfully sealed new block number=92 hash=efdd93…daae6e 停止挖矿，停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 miner.stop() 查看余额，以太币最小单位是wei(18个0),可以用formWei进行格式化 acc0 = web3.eth.accounts[0] //给帐户取别名 eth.getBalance(acc0) //显示以wei为单位 web3.fromWei(eth.getBalance(acc0)) //显示以ether为单位 可以写javascript脚本，查看所有帐户余额 allBal.js，不支持let等ES5以后的特性 function AllBalance() { var totalBalance = 0 for(var acci in eth.accounts){ var acc = web3.eth.accounts[acci] var balance = web3.fromWei(web3.eth.getBalance(acc)) console.log(&#39;account:&#39;+acc+&#39;\\t balance:&#39;+balance+&#39; ether&#39;) totalBalance += parseFloat(balance) } console.log(&#39;total balance: &#39;+totalBalance) } AllBalance() 在web3 console里使用以下命令加载js loadScript(&#39;allBal.js&#39;) 6、转帐 从第1个帐户转3 ether到第2个帐户，在挖矿时，转帐结果才生效 //给账户取个别名 acc0 = web3.eth.accounts[0] acc1 = web3.eth.accounts[1] eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) 如果错误提示：authentication needed:password or unlock 则需要先解锁,从第1帐户转出，因此解锁第1个帐户 personal.unlockAccount(acc0,&quot;123456&quot;) 解锁完成后，再进行转帐 eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) 7、疑问 挖到矿以后，关闭终端，再打开终端，查余额为0？ 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/02/28/f5f8c25c2a2f63ea091cb02231a16b7e.html","headline":"区块链笔记（1）-使用go-ethereum建立私链 geth版本 1.8.1","dateModified":"2018-02-28T00:00:00+08:00","datePublished":"2018-02-28T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/02/28/f5f8c25c2a2f63ea091cb02231a16b7e.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>区块链笔记（1）-使用go-ethereum建立私链 geth版本 1.8.1</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <h1 id="1安装go-ethereum客户端">1、安装go-ethereum客户端</h1> 
  <p>当前版本1.8.1,make之前先安装golang的环境，笔者golang版本1.9.2，ubuntu 17.10</p> 
  <pre class="prettyprint"><code class=" hljs go">git clone https:<span class="hljs-comment">//github.com/ethereum/go-ethereum.git</span>
cd  <span class="hljs-keyword">go</span>-ethereum
<span class="hljs-built_in">make</span> geth</code></pre> 
  <h1 id="2初始化">2、初始化</h1> 
  <p>找个地方新建文件genesis.json，下面的内容来自官网，但是chainId不为0，否则出现insufficient funds for gas * price + value</p> 
  <pre class="prettyprint"><code class=" hljs json">{
  "<span class="hljs-attribute">config</span>": <span class="hljs-value">{ "<span class="hljs-attribute">chainId</span>": <span class="hljs-value"><span class="hljs-number">12</span></span>, "<span class="hljs-attribute">homesteadBlock</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>, "<span class="hljs-attribute">eip155Block</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>, "<span class="hljs-attribute">eip158Block</span>": <span class="hljs-value"><span class="hljs-number">0</span> </span>}</span>,
  "<span class="hljs-attribute">alloc</span>"      : <span class="hljs-value">{}</span>,
  "<span class="hljs-attribute">coinbase</span>"   : <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000"</span></span>,
  "<span class="hljs-attribute">difficulty</span>" : <span class="hljs-value"><span class="hljs-string">"0x20000"</span></span>,
  "<span class="hljs-attribute">extraData</span>"  : <span class="hljs-value"><span class="hljs-string">""</span></span>,
  "<span class="hljs-attribute">gasLimit</span>"   : <span class="hljs-value"><span class="hljs-string">"0x2fefd8"</span></span>,
  "<span class="hljs-attribute">nonce</span>"      : <span class="hljs-value"><span class="hljs-string">"0x0000000000000042"</span></span>,
  "<span class="hljs-attribute">mixhash</span>"    : <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
  "<span class="hljs-attribute">parentHash</span>" : <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
  "<span class="hljs-attribute">timestamp</span>"  : <span class="hljs-value"><span class="hljs-string">"0x00"</span> </span>}</code></pre> 
  <p>在终端使用以下命令进行初始化</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">geth init ./genesis<span class="hljs-preprocessor">.json</span> --datadir <span class="hljs-string">"./chain"</span></code></pre> 
  <p>显示结果</p> 
  <pre class="prettyprint"><code class=" hljs tex"><span class="hljs-formula">$ geth init ./genesis.json --datadir './chain' INFO <span class="hljs-special">[</span>02-28|10:25:05<span class="hljs-special">]</span> Maximum peer count ETH=25 LES=0 total=25 INFO <span class="hljs-special">[</span>02-28|10:25:05<span class="hljs-special">]</span> Allocated cache and file handles database=E:<span class="hljs-command">\\</span>Projects<span class="hljs-command">\\</span>Geth<span class="hljs-command">\\</span>'<span class="hljs-command">\\</span>chain'<span class="hljs-command">\\</span>geth<span class="hljs-command">\\</span>chaindata cache=16 handles=16 INFO <span class="hljs-special">[</span>02-28|10:25:05<span class="hljs-special">]</span> Writing custom genesis block INFO <span class="hljs-special">[</span>02-28|10:25:05<span class="hljs-special">]</span> Persisted trie from memory database nodes=0 size=0.00B time=7.0004ms gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO <span class="hljs-special">[</span>02-28|10:25:05<span class="hljs-special">]</span> Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO <span class="hljs-special">[</span>02-28|10:25:05<span class="hljs-special">]</span> Allocated cache and file handles database=E:<span class="hljs-command">\\</span>Projects<span class="hljs-command">\\</span>Geth<span class="hljs-command">\\</span>'<span class="hljs-command">\\</span>chain'<span class="hljs-command">\\</span>geth<span class="hljs-command">\\</span>lightchaindata cache=16 handles=16 INFO <span class="hljs-special">[</span>02-28|10:25:06<span class="hljs-special">]</span> Writing custom genesis block INFO <span class="hljs-special">[</span>02-28|10:25:06<span class="hljs-special">]</span> Persisted trie from memory database nodes=0 size=0.00B time=0s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO <span class="hljs-special">[</span>02-28|10:25:06<span class="hljs-special">]</span> Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 </span></code></pre> 
  <h1 id="3启用私链">3、启用私链</h1> 
  <p>注：下面的命令将把日志输入到eth_output.log,并开启Geth javascript console(后面简称web3 console)</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">networkid</span> <span class="hljs-comment">12</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-comment">"</span><span class="hljs-string">.</span><span class="hljs-comment">/chain"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">nodiscover</span>  <span class="hljs-comment">console</span>  <span class="hljs-comment">2</span>&gt;&gt;<span class="hljs-comment">eth_output</span><span class="hljs-string">.</span><span class="hljs-comment">log</span></code></pre> 
  <table> 
   <thead> 
    <tr> 
     <th align="left">参数</th> 
     <th align="left">参数说明</th> 
    </tr> 
   </thead> 
   <tbody>
    <tr> 
     <td align="left">datadir</td> 
     <td align="left">设置当前区块链网络数据存放的位置</td> 
    </tr> 
    <tr> 
     <td align="left">console</td> 
     <td align="left">启动命令行模式，可以在geth里执行命令</td> 
    </tr> 
    <tr> 
     <td align="left">nodiscover</td> 
     <td align="left">关闭p2p网络的自动发现，不会被网上看到</td> 
    </tr> 
    <tr> 
     <td align="left">networkid</td> 
     <td align="left">网络标识，私有链取一个大于4的随意的值</td> 
    </tr> 
   </tbody>
  </table> 
  <p>使用下面的命令查看日志</p> 
  <pre class="prettyprint"><code class=" hljs lasso">tail <span class="hljs-attribute">-f</span> eth_output<span class="hljs-built_in">.</span><span class="hljs-keyword">log</span></code></pre> 
  <p>内容如下:</p> 
  <pre class="prettyprint"><code class=" hljs 1c">~/geth$ tail -f eth_output.log
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Initialising Ethereum protocol versions="</span>[<span class="hljs-number">63</span> <span class="hljs-number">62</span>]<span class="hljs-string">" network=1</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Database deduplication successful deduped=0</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Loaded most recent local header number=0 hash=7d416a…b75a26 td=65536</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Loaded most recent local full block number=0 hash=7d416a…b75a26 td=65536</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Loaded most recent local fast block number=0 hash=7d416a…b75a26 td=65536</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Regenerated local transaction journal transactions=0 accounts=0</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Starting P2P networking </span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] RLPx listener up self="</span>enode:<span class="hljs-comment">//287b1fb473949dbbbb4edc63e92de98b1021b91c50f68b07f75cf47e0f8253e0f439f6f86e7b49fcf760e6f5f24b9938f83156fca8efd1bc74e1bd4f97cf3e6b@[::]:30303?discport=0"</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] IPC endpoint opened url=/home/sd/geth/chain/geth.ipc</span>
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span><span class="hljs-string">|22:13:16] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(192.168.31.1)</span>
</code></pre> 
  <p>在web3 console里内置了一些用来操作以太坊的Javascript对象。主要有：</p> 
  <ul> 
   <li>eth：包含一些跟操作区块链相关的方法</li> 
   <li>net：包含以下查看p2p网络状态的方法</li> 
   <li>admin：包含一些与管理节点相关的方法</li> 
   <li>miner：包含启动&amp;停止挖矿的一些方法</li> 
   <li>personal：主要包含一些管理账户的方法</li> 
   <li>txpool：包含一些查看交易内存池的方法</li> 
   <li>web3：包含了以上对象，还包含一些单位换算的方法</li> 
  </ul> 
  <h1 id="4新建帐户">4、新建帐户</h1> 
  <p>下面的命令不做特殊说明，都是在web3 console里输入</p> 
  <p>可以用下面命令查看已有帐户</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">eth<span class="hljs-preprocessor">.accounts</span></code></pre> 
  <p>创建帐户,下面123456是密码，执行2次，建立两个帐户用于后面的转帐</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">personal<span class="hljs-preprocessor">.newAccount</span>(<span class="hljs-string">"123456"</span>)</code></pre> 
  <p>会在 datadir（当前文中为./chain）里生成keystore,每个帐户一个文件，内容示例如下 </p> 
  <pre class="prettyprint"><code class=" hljs json">{
    "<span class="hljs-attribute">address</span>": <span class="hljs-value"><span class="hljs-string">"514b18f2054ecd174ef00f79e5e6b6df3ef4494d"</span></span>,
    "<span class="hljs-attribute">crypto</span>": <span class="hljs-value">{ "<span class="hljs-attribute">cipher</span>": <span class="hljs-value"><span class="hljs-string">"aes-128-ctr"</span></span>, "<span class="hljs-attribute">ciphertext</span>": <span class="hljs-value"><span class="hljs-string">"4531f38141f9daaad578c6e00b99f47aa374f36c2a87d0ffbafb1ca0b33f1fe0"</span></span>, "<span class="hljs-attribute">cipherparams</span>": <span class="hljs-value">{ "<span class="hljs-attribute">iv</span>": <span class="hljs-value"><span class="hljs-string">"b120f958450c12504c8d54afe170c250"</span> </span>}</span>, "<span class="hljs-attribute">kdf</span>": <span class="hljs-value"><span class="hljs-string">"scrypt"</span></span>, "<span class="hljs-attribute">kdfparams</span>": <span class="hljs-value">{ "<span class="hljs-attribute">dklen</span>": <span class="hljs-value"><span class="hljs-number">32</span></span>, "<span class="hljs-attribute">n</span>": <span class="hljs-value"><span class="hljs-number">262144</span></span>, "<span class="hljs-attribute">p</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>, "<span class="hljs-attribute">r</span>": <span class="hljs-value"><span class="hljs-number">8</span></span>, "<span class="hljs-attribute">salt</span>": <span class="hljs-value"><span class="hljs-string">"e0d8f92937268ab78b78a669a66e59d2db5f8562b1fdb3c6cfc60ce95c1bc20f"</span> </span>}</span>, "<span class="hljs-attribute">mac</span>": <span class="hljs-value"><span class="hljs-string">"6bf3a5946e638fc4ea2a95c08997380238d1be189eb044fbe68fe58a36d7c6bd"</span> </span>}</span>,
    "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"c30cb668-a8b7-406c-9ac8-eab245dec9c1"</span></span>,
    "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-number">3</span> </span>}</code></pre> 
  <h1 id="5挖矿">5、挖矿</h1> 
  <p>设置挖矿的帐户（可以跳过，直接start使用第1个帐户挖矿） <br> 使用的命令查看coinbase的账户地址</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">eth<span class="hljs-preprocessor">.coinbase</span></code></pre> 
  <p>设置coinbase</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">miner<span class="hljs-preprocessor">.setEtherbase</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])</code></pre> 
  <p>开始挖矿，默认使用第1个帐户挖矿</p> 
  <pre class="prettyprint"><code class=" hljs sql">miner.<span class="hljs-operator"><span class="hljs-keyword">start</span>()</span></code></pre> 
  <p>挖到时，显示内容如下：</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span>|<span class="hljs-number">22</span>:<span class="hljs-number">26</span>:<span class="hljs-number">25</span>] ? block reached canonical chain          <span class="hljs-built_in">number</span>=<span class="hljs-number">86</span> hash=<span class="hljs-number">164326</span>…acb82f
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span>|<span class="hljs-number">22</span>:<span class="hljs-number">26</span>:<span class="hljs-number">25</span>] ? mined potential block                  <span class="hljs-built_in">number</span>=<span class="hljs-number">91</span> hash=<span class="hljs-number">8</span>f7693…<span class="hljs-number">1</span>aa8b9
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span>|<span class="hljs-number">22</span>:<span class="hljs-number">26</span>:<span class="hljs-number">25</span>] Commit <span class="hljs-built_in">new</span> mining work                   <span class="hljs-built_in">number</span>=<span class="hljs-number">92</span> txs=<span class="hljs-number">0</span> uncles=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">208.882</span>µs
INFO [<span class="hljs-number">02</span>-<span class="hljs-number">27</span>|<span class="hljs-number">22</span>:<span class="hljs-number">26</span>:<span class="hljs-number">27</span>] Successfully sealed <span class="hljs-built_in">new</span> block            <span class="hljs-built_in">number</span>=<span class="hljs-number">92</span> hash=efdd93…daae6e</code></pre> 
  <p>停止挖矿，停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。</p> 
  <pre class="prettyprint"><code class=" hljs vbnet">miner.<span class="hljs-keyword">stop</span>()</code></pre> 
  <p>查看余额，以太币最小单位是wei(18个0),可以用formWei进行格式化</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">acc0 = web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>] //给帐户取别名
eth<span class="hljs-preprocessor">.getBalance</span>(acc0)        //显示以wei为单位
web3<span class="hljs-preprocessor">.fromWei</span>(eth<span class="hljs-preprocessor">.getBalance</span>(acc0))  //显示以ether为单位
</code></pre> 
  <p>可以写javascript脚本，查看所有帐户余额 <br> allBal.js，不支持let等ES5以后的特性</p> 
  <pre class="prettyprint"><code class=" hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AllBalance</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> totalBalance = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> acci <span class="hljs-keyword">in</span> eth.accounts){
        <span class="hljs-keyword">var</span> acc = web3.eth.accounts[acci]
        <span class="hljs-keyword">var</span> balance = web3.fromWei(web3.eth.getBalance(acc))
        console.log(<span class="hljs-string">'account:'</span>+acc+<span class="hljs-string">'\t balance:'</span>+balance+<span class="hljs-string">' ether'</span>)
        totalBalance += <span class="hljs-built_in">parseFloat</span>(balance)
    }
    console.log(<span class="hljs-string">'total balance: '</span>+totalBalance)
}
AllBalance()</code></pre> 
  <p>在web3 console里使用以下命令加载js</p> 
  <pre class="prettyprint"><code class=" hljs scss"><span class="hljs-function">loadScript(<span class="hljs-string">'allBal.js'</span>)</span></code></pre> 
  <h1 id="6转帐">6、转帐</h1> 
  <p>从第1个帐户转3 ether到第2个帐户，在挖矿时，转帐结果才生效</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">//给账户取个别名
acc0 = web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>]
acc1 = web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">1</span>]
eth<span class="hljs-preprocessor">.sendTransaction</span>({from:acc0,to:acc1,value:web3<span class="hljs-preprocessor">.toWei</span>(<span class="hljs-number">3</span>,<span class="hljs-string">"ether"</span>)})</code></pre> 
  <p>如果错误提示：authentication needed:password or unlock <br> 则需要先解锁,从第1帐户转出，因此解锁第1个帐户</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">personal<span class="hljs-preprocessor">.unlockAccount</span>(acc0,<span class="hljs-string">"123456"</span>)</code></pre> 
  <p>解锁完成后，再进行转帐</p> 
  <pre class="prettyprint"><code class=" hljs css"><span class="hljs-tag">eth</span><span class="hljs-class">.sendTransaction</span>(<span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">from</span>:<span class="hljs-value">acc0,to:acc1,value:web3.<span class="hljs-function">toWei(<span class="hljs-number">3</span>,<span class="hljs-string">"ether"</span>)</span></span></span></span>})</code></pre> 
  <h1 id="7疑问">7、疑问</h1> 
  <ul> 
   <li>挖到矿以后，关闭终端，再打开终端，查余额为0？</li> 
  </ul> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/lhtzbj12/article/details/79405238,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/lhtzbj12/article/details/79405238,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
