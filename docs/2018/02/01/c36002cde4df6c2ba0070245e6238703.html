<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>比特币、以太坊、Fabric…你知道它们的优缺点吗？不懂的进 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="比特币、以太坊、Fabric…你知道它们的优缺点吗？不懂的进" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Blockchain_lemon/article/details/79236199 本文将对目前市场上几个典型的区块链框架进行横向对比，看看它们都有哪些特点，以及它们之间到底有什么区别。为了保持对比的客观与公正，本文将只针对开源的区块链框架进行讨论。 作者 | 张铮文 时常听人们谈起区块链，从2009年比特币诞生至今，各式各样的区块链系统或基于区块链的应用不断被开发出来，并被应用到大量的场景中，而区块链技术本身也在不停地变化和改进。 区块链又被称为分布式账本，与之对应的则是中心化账本，比如银行。与中心化账本不同的是，分布式账本依靠的是将账本数据冗余存储在所有参与节点中来保证账本的安全性。简单地说，区块链会用到三种底层技术：点对点网络、密码学和分布式一致性算法。而通常，区块链系统还会“免费附赠”一种被称为智能合约的功能。智能合约虽然不是区块链系统的必要组成部分，但由于区块链天生所具备的去中心化特点，使它可以很好地为智能合约提供可信的计算环境。 为了适应不同场景的需求，区块链系统在实际应用的过程中往往会需要进行各种改造，以满足特定业务的要求，比如身份认证、共识机制、密钥管理、吞吐量、响应时间、隐私保护、监管要求等。而实际应用区块链系统的公司往往没有进行这种改造的能力，于是市场上慢慢出现了一些用于定制专用区块链系统的框架，采用这些框架就可以很方便地定制出适用于企业自身业务需求的区块链系统。本文将对目前市场上几个典型的区块链框架进行横向对比。 比特币 比特币（Bitcoin）源自中本聪（Satoshi Nakamoto）在2008年发表的一篇论文《比特币：一种点对点的电子现金系统》（Bitcoin：A Peer-to-PeerElectronic Cash System），文中描述了一种被他称为“比特币”的电子货币及其算法。在之后的几年里，比特币不断成长和成熟，而它的底层技术也逐渐被人们认识并抽象出来，这就是区块链技术。比特币作为区块链的鼻祖，在区块链的大家族中具有举足轻重的地位，基于比特币技术开发出的山寨币（Altcoins）的数量有如天上繁星，难以计数。 中本聪设计比特币的目的，就是希望能够实现一种完全基于点对点网络的电子现金系统，使得在线支付能够直接由一方发起并支付给另外一方，中间不需要通过任何的中介机构。总结来说，他希望比特币能够实现以下这些设计目标： 不需要中央机构就可以发行货币 不需要中介机构就可以支付 保持使用者匿名 交易无法被撤销 从电子现金系统的角度来看，以上这些目标在比特币中基本都得到了实现，但是依然有一些技术问题有待解决，比如延展性攻击、区块容量限制、区块分叉、扩展性等。 在应用场景方面，目前大量的数字货币项目都是基于比特币架构来设计的，此外还有一些比较实际的应用案例，比如彩色币、tØ等。 彩色币（Coloredcoin），通过仔细跟踪一些特定比特币的来龙去脉，可以将它们与其他的比特币区分开来，这些特定的比特币就叫作彩色币。它们具有一些特殊的属性，从而具有与比特币面值无关的价值，利用彩色币的这种特性，开发者可以在比特币网络上创建其他的数字资产。彩色币本身就是比特币，存储和转移不需要第三方，可以利用已经存在的比特币基础网络。 tØ是比特币区块链在金融领域的应用，是美国在线零售商Overstock推出的基于区块链的私有和公有股权交易平台。 以太坊 以太坊（Ethereum）的目标是提供一个带有图灵完备语言的区块链，用这种语言可以创建合约来编写任意状态转换功能。用户只要简单地用几行代码来实现逻辑，就能够创建一个基于区块链的应用程序，并应用于货币以外的场景。以太坊的设计思想是不直接“支持”任何应用，但图灵完备的编程语言意味着理论上任意合约逻辑和任何类型的应用都可以被创建出来。总结来说，以太坊在比特币的功能之外，还有以下几个设计目标： 图灵完备的合约语言 内置的持久化状态存储 目前基于以太坊的合约项目已达到数百个，比较有名的有Augur、TheDAO、Digix、FirstBlood等。 Augur是一个去中心化的预测市场平台，基于以太坊区块链技术。用户可以用数字货币进行预测和下注，依靠群众的智慧来预判事件的发展结果，可以有效地消除对手方风险和服务器的中心化风险。 限于篇幅，基于以太坊智能合约平台的项目就不多介绍了。基于以太坊的代码进行改造的区块链项目也有不少，但几乎都是闭源项目，只能依靠一些公开的特性来推断，所以就不在本文展开讨论了。 Fabric Fabric是由IBM和DAH主导开发的一个区块链框架，是超级帐本的项目成员之一。它的功能与以太坊类似，也是一个分布式的智能合约平台。但与以太坊和比特币不同的是，它从一开始就是一个框架，而不是一个公有链，也没有内置的代币（Token）。 超级账本（Hyperledger）是Linux基金会于2015年发起的推进区块链技术和标准的开源项目，加入成员包括：荷兰银行（ABN AMRO）、埃森哲（Accenture）等十几个不同利益体，目标是让成员共同合作，共建开放平台，满足来自多个不同行业各种用户案例，并简化业务流程。 作为一个区块链框架，Fabric采用了松耦合的设计，将共识机制、身份验证等组件模块化，使之在应用过程中可以方便地根据应用场景来选择相应的模块。除此之外，Fabric还采用了容器技术，将智能合约代码（Chaincode）放在Docker中运行，从而使智能合约可以用几乎任意的高级语言来编写。 以下是Fabric的一些设计目标： 模块化设计，组件可替换 运行于Docker的智能合约 目前已经有不少采用Fabric架构进行开发的概念验证（POC）项目在实施过程中，其中不乏一些金融机构做出的尝试，不过由于项目刚刚起步，还没有比较成熟的落地应用。 Onchain DNA Onchain DNA（Onchain Distributed Networks Architecture），是由总部位于上海的区块链创业公司“分布科技”开发的区块链架构，可以同时支持公有链、联盟链、私有链等不同应用类型和场景，并快速与业务系统集成。分布科技同样也是超级账本的成员之一。 与以太坊、Fabric不同的是，Onchain DNA在系统底层实现了对多种数字资产的支持，用户可以直接在链上创建自己的资产类型，并用智能合约来控制它的发行和交易逻辑。对于绝大部分的区块链应用场景，数字资产是必不可少的，而为每一种数字资产都开发一套基于智能合约的业务流程非常浪费且低效。因此，由区块链底层提供直接的数字资产功能十分必要。而对于那些完全不需要数字资产的应用场景，同样可以基于Onchain DNA提供的智能合约功能来编写任意的自定义逻辑来实现。 Onchain DNA的设计目标主要有以下几点： 多种数字资产的底层支持 图灵完备的智能合约和持久化状态 跨链互操作性 交易的最终性 目前已有不少金融机构采用Onchain DNA架构来进行区块链概念验证产品的开发，如银行、券商、支付、登记结算机构等。除此之外，还有一些已经落地的区块链项目，如小蚁、法链等。 小蚁（Antshares）是一个定位于资产数字化的公有链，将实体世界的资产和权益进行数字化，通过点对点网络进行登记发行、转让交易、清算交割等金融业务的去中心化网络协议。它采用社区化开发的模式，在架构上与Onchain DNA保持一致，从而可以与任何基于Onchain DNA的区块链系统发生跨链互操作。 法链是全球第一个大规模商用的法律存证区块链，一个底层基于Onchain DNA区块链技术，并由多个机构参与建立和运营的证据记录和保存系统。该系统没有中心控制点，且数据一旦录入，单个机构或节点无法篡改，从而满足司法存证的要求。 Corda Corda是由一家总部位于纽约的区块链创业公司R3CEV开发的，由其发起的R3区块链联盟，至今已吸引了数十家巨头银行的参与，其中包括富国银行、美国银行、纽约梅隆银行、花旗银行、德国商业银行、德意志银行、汇丰银行、三菱UFJ金融集团、摩根士丹利、澳大利亚国民银行、加拿大皇家银行、瑞典北欧斯安银行（SEB）、法国兴业银行等。从R3成员的组成上也可以看出，Corda是一款专门用于银行与银行间业务的技术架构。尽管R3声称Corda不是区块链，但它具备区块链的一些重要特性。 Corda由Java和Kotlin开发，并在其各项功能中充分依赖于Java，比如智能合约、数据访问接口等。Corda的设计目标主要是： 没有全局账本 由公证人（Notaries）来解决交易的多重支付问题 只有交易的参与者和公证人才能看到交易 为此，Corda的所有交易都不会向全网进行广播，而且所有的节点都是直接通信，没有P2P网络。这一点导致了其网络规模会被限制在一个较小的规模内，无法形成大规模的联盟链，适用的业务场景比较狭窄。 接下来，我们将针对前文中所提到的这些区块链框架进行一系列的技术对比，并从多个维度展开讨论它们的区别与相似之处。 数字资产 ﻿﻿ 区块链的内置代币通常是一种经济激励模型和防止垃圾交易的手段。比特币天生就有且只有一种内置代币，所以在比特币系统中所有的“交易”本质上都是转账行为，除非通过外部的协议层来给比特币增加额外的数字资产。 以太坊和Onchain DNA具有内置代币，它们的作用除了以上提到的经济激励和防止垃圾交易之外，还为系统内置功能提供了一个收费的渠道。比如以太坊的智能合约运行需要消耗GAS，而Onchain DNA的数字资产创建也需要消耗一定的代币（可选）。 以太坊和Fabric没有内置的多种数字资产支持，而是通过智能合约来实现相应的功能。这种方式的好处在于，系统设计可以做到非常简洁，而且资产的行为可以任意指定，自由度极高。然而这样的设计也会带来一系列的负面影响，比如所有的资产创建者不得不自己编写重复的业务逻辑，而用户也没有办法通过统一的方式去操作自己的资产。 相比之下，Onchain DNA和Corda采用了在底层支持多种数字资产的方式，让资产创建者可以方便地创建自己的资产类型，而用户也可以在同一个客户端中管理所有的资产。对于逻辑更加复杂一点的业务场景来说，他们同样可以利用智能合约来强化资产的功能，或者创建一种与资产无关的业务逻辑。 账户系统 UTXO（Unspent Transaction Output）是这样一种机制：每一枚数字货币都会被登记在一个账户的所有权之下，一枚数字货币有两种状态，即要么还没有被花费，要么已经被花费。当需要使用一枚数字货币的时候，就将它的状态标记为已经花费，并创造一枚新的与之等额的数字货币，将它的所有权登记到新的账户之下。在这个过程中，被标记为已花费的数字货币就被称为交易的输入，而创造出来的新的数字货币被称为交易的输出，在一笔交易中，可以包含多个输入和多个输出，但是输入之和与输出之和必须相等。计算一个账户的余额时，只要将所有登记在该账户下的数字货币的面额相加即可。 比特币和Corda就采用了UTXO这样一种账户机制，而以太坊则采用了更加直观的余额机制：每个账户都有一个状态，状态中直接记录了账户当前的余额，转账的逻辑就是从一个账户中减去一部分金额，并在另一个账户中加上相应的金额，减去的部分和加上的部分必须相等。Onchain DNA在账户机制上同时兼容这两种模式。 那么UTXO模式和余额模式，究竟有什么区别呢？UTXO最大的好处就是，基于UTXO的交易可以并行验证且任意排序，因为所有的UTXO之间都是没有关联的，这对区块链未来的扩展性有很大的帮助，而基于余额的设计就没有这个优势了。反过来，余额设计的优点是设计思想非常简洁和直观，便于程序实现，特别是在智能合约中，要处理UTXO的状态是非常困难的。这也是为什么以智能合约为主要功能的以太坊选择余额设计的原因，而比特币、OnchainDNA、Corda这些以数字资产为核心的架构则更倾向于UTXO设计。 关于身份认证，比特币和以太坊基本没有身份认证的设计，原因很简单，因为这两者的设计思想都是强调隐私和匿名，反对监管和中心化，而身份认证就势必要引入一些中心或者弱化的中心机构。 Fabric、Onchain DNA和Corda不约而同地选择了采用数字证书来对用户身份进行认证，原因在于这三者都有应用于现有金融系统的设计目标，而金融系统必然要考虑合规化并接受监管，此外现有的金融系统已经大范围地采用数字证书方案，这样便可以和区块链系统快速集成。 共识机制 共识机制是分布式系统的核心算法，因为分布式系统的数据分散在各个参与节点中，这些分散的数据必须通过一种算法来保持一致性，否则系统将无法正常工作。与传统的分布式系统不同，区块链是一个去中心化的系统，并且可能会承载大量的金融资产，所以它可能会面临大量的拜占庭故障而非一般性故障，而中心化的分布式系统则很少遇到拜占庭故障。因此，区块链的共识机制与传统的分布式系统存在较大的差异。 ﻿﻿ 比特币和以太坊采用了工作量证明（Proof-of-Work）机制来保证账本数据的一致性。工作量证明同时也是一种代币分发机制，它通过经济激励的方式来鼓励节点参与区块的构造过程，节点在构造区块的时候需要穷举一个随机数以使得区块符合规定的难度要求，一旦区块链出现分叉，诚实的节点将选择工作量较大的链条，而抛弃工作量较小的。由于假设所有节点都是逐利的，而选择工作量较小的链条就会使自己获得的激励无效，所以最终所有的节点都会是诚实的，从而使每个节点的区块链数据都保持一致。 为了维护这样一个工作量证明机制的区块链，需要全网具备较大规模的算力支撑来保证网络的安全性，否则账本数据就有可能被篡改。此外，即使维持较大的算力来保护网络，工作量证明也无法从根本上保证交易的最终性，比如比特币就经常产生孤立区块（Orphaned Block），而包含在孤立区块中的交易就有可能被撤销。因此比特币通常要求用户等待6个区块的确认，即1小时左右的时间，才能在一个可接受的概率上认为交易已经最终完成，而这个概率也并非是最终性的——你永远也不知道暗中是否有一个远超过全网的庞大算力正在试图撤销以前的交易。而为了维护庞大算力而支出的电力成本也是相当可观，因此，以太坊已经在设计从工作量证明机制切换到其他共识机制上的方案。 Fabric和Onchain DNA都设计了基于拜占庭容错（Byzantine Fault Tolerance）模型的共识机制。节点被分为普通节点和记账节点（Validating Peer），只有记账节点才会参与到区块的构造过程，这种角色的分离使得算法的设计者有机会将运行共识算法的节点数量限定在一个可控的规模内。 拜占庭容错模型对网络中的节点做出了假设和要求：如果共识中有f个节点会出现拜占庭故障，那么至少需要3f+1个节点参与共识才能避免网络出现分叉。在这个模型下，每个区块的构造过程都需要至少2f+1个节点的参与才能够完成，而不像工作量证明机制下每个节点都独立构造区块。一旦区块被构造出来，它就无法被撤销，因为2f+1个诚实的记账节点不会在同一高度对两个不同的区块进行签名认证。 相比较而言，工作量证明机制提供了极高的灵活性和可用性，因为每个节点都独立构造区块而几乎不需要其他节点的参与，节点可以随时加入或者退出网络，即使全网只剩下一个节点，网络还是可以继续工作，但是相应的它也失去了交易的最终性；而拜占庭容错的机制则与之相反，牺牲了一定的灵活性和可用性，记账节点必须在线提供服务而不能退出网络，一旦出现1/3的记账节点停机，那么网络将变得不可用，但它保证了交易的最终性。 智能合约 智能合约是1994年由密码学家尼克萨博（Nick Szabo）首次提出的理念，几乎与互联网同龄。智能合约是指能够自动执行合约条款的计算机程序，在比特币出现以前，因为不存在安全可靠的执行环境，智能合约一直不能够应用到现实中。区块链由于其去中心化、公开透明等特性，天生就可以为智能合约提供可信的执行环境。所以，新型的区块链框架几乎都会内置智能合约的功能。 ﻿﻿ 比特币内置了一套基于栈的脚本执行引擎，可以运行一种独有的脚本代码，用于对交易进行简单的有效性验证，比如签名验证和多重签名验证等。比特币这套脚本语言被有意设计成非图灵完备的，足够简单却也足以应对货币转账的各种需求。 以太坊是首个以图灵完备智能合约为主要功能的区块链，用户可以在以太坊的平台上创建自己的合约，而合约的内容可以包含货币转账在内的任意逻辑。合约使用一种名为Solidity的语言来编写，它是以太坊团队开发的专门用于编写智能合约的一种高级语言，语法类似JavaScript，最终被编译成字节码并运行在EVM（Ethereum Virtual Machine）之中。EVM提供了堆栈、内存、存储器等虚拟硬件，以及一套专用的指令集，所有的代码都在沙盒中运行。它提供了合约间相互调用的能力，甚至可以在运行时动态加载其它合约的代码来执行。这种能力使得以太坊的合约具有非常高的灵活性，但也可能会使合约的功能具有不确定性。 与以太坊自己动手开发语言、虚拟机的思路不同，Fabric选择了使用现有的容器技术来支持智能合约功能。Fabric的智能合约理论上可以用任何语言来编写，这一点对开发者相当友好，他们将无需学习新的语言，并且可以复用现有的业务代码和丰富的开发库，并使用自己熟悉的开发工具。相对的，采用Docker的智能合约架构也有大量的问题：首先，它很难对智能合约的执行流程进行控制，从而无法对其功能进行限制；其次，它无法对合约运行所消耗的计算资源进行精确的评估；此外，运行Docker相对而言是极其耗费资源的操作，这就使得难以在移动设备上运行合约；最后，不同节点的硬件配置、合约引用的开发库等，都有可能会使合约的行为具有很强的不确定性。 Onchain DNA采用了AVM（Antshares Virtual Machine）作为其智能合约功能的底层支持。AVM是一个微核心的、平台无关的智能合约执行环境，它提供了一套包含堆栈操作、流程控制、逻辑运算、算数运算、密码学运算、字符串操作、数组操作的指令集，在硬件方面，它只提供了两个计算堆栈。不过，由于它允许区块链的实现者创建自己的虚拟硬件，并以接口的形式开放给智能合约来使用，使得合约可以在运行时取得平台相关的数据、持久化存储以及访问互联网等。虽然这也有可能会使合约的行为具有不确定性，但区块链的实现者可以通过合理编写虚拟硬件来消除这种不确定性。不过，由于目前尚无与AVM配套的编译器和开发环境，这使得基于AVM进行智能合约开发变得相当困难，开发者不得不使用一种类似汇编的语法来进行合约编写，需要较高的技术能力。 Corda的智能合约功能与其自身一样，都是基于JVM（Java Virtual Machine）的。因此，你可以使用任何与JVM兼容的语言来进行开发，比如Java、Kotlin等。不过，它对JVM进行了一定的改造，使得在其上运行的合约脚本具备确定性。开发的过程大致是这样的：使用Java创建一个实现Contract接口的类（Class），并提供一个名为verify的函数（Function）用于对交易进行验证，该函数接受当前的交易作为参数，如果交易验证失败，则抛出异常（Exception），没有异常就表示验证通过。Corda使用JPA（Java Persistence Architecture）来提供持久化功能，支持SQL语句和常用的数据库，不过需要安装相应的插件，并且由于数据仅存放在合约执行者的节点，因此无法进行全局的持久化存储。 扩展性 区块链的数据结构通常是只能追加记录，而不能修改或删除记录，它真实地记录下完整的历史数据，使得新加入的节点有能力对全网的完整交易历史进行验证，而无需信任其它节点。这种特性带来了去中心化的便利性，但也影响了区块链系统的扩展性，因为区块会无休止地增长，直到塞满整个硬盘。所以有必要提供一种空间回收的机制来应对不断增长的数据。 ﻿﻿ 比特币提出了使用默克尔树（Merkle tree）来存放交易散列的方式，当需要回收硬盘空间时，只需将老旧的交易从默克尔树中剔除即可。一个不含交易信息的区块头大小仅有80字节。按照比特币区块生成的速率为每10分钟一个，那么每一年产生的数据约为4.2MB，即使将全部的区块头存储于内存之中都不是问题。 以太坊、Fabric和Onchain DNA在比特币区块压缩的基础上，又采用了状态快照的方式来节约硬盘空间。具体来说，就是在区块头的结构中不但记录了当前区块所有交易的根散列，还记录了当前区块及过去所有区块中的状态根散列。这些状态包括所有的UTXO、账户余额、合约存储等，所以节点只需要保留最新的区块和完整的状态信息即可。 扩展性的另一个重要指标是交易的吞吐量。决定吞吐量的因素有很多种，如网络结构、加密算法、共识机制等，但最重要的还是交易是否可以被并行验证。如果交易可以被并行验证，那么未来就可以通过简单地增加CPU数量来提高吞吐量。 基于UTXO系统的比特币可以很容易地对交易进行并行验证，因为UTXO之间是没有关联的，对任何一个UTXO的状态改变都可以独立进行且与顺序无关；而基于余额的账户系统则不那么容易实现并行，因为可能会同时发生多笔交易对同一个账户进行资产操作，需要进行一些额外的步骤来处理。举个例子，假设账户中的余额为10元，有两笔针对该账户的交易同时发生，第一笔交易在账户中+5元，而第二笔交易在账户中-11元。那么如果先执行第一笔交易，则两笔都能成功，最终余额为4元；如果先执行第二笔交易，那么它会因余额不足而失败，只有第一笔交易会成功，最终余额为15元。 而对交易的并行验证起到决定性作用的，是智能合约是否具备状态持久化的能力。如果一组合约都是无状态的，那么它们就可以按任意的顺序被执行，不会产生任何副作用；相反，如果合约可以对一组状态产生影响，那么按不同的顺序来执行合约产生的结果也会不同。举个例子，一个计算存款利息的合约，它具有两个子功能：存款和利息结算。假设账户中有100元，利率为10%，现在同时发生了两笔交易，第一笔交易的内容是存入100元，第二笔交易的内容是结算利息。假如第一笔交易先执行，那么最终账户的余额是：100+100）*110%=220元；如果第二笔交易先执行，那么账户余额将是：100*110%+100=210元。由此可见，具备状态持久化能力的智能合约是顺序相关的，因此难以并发验证，特别是如果合约之间还可以相互调用的话，情况将会更加复杂。 目前Fabric没有提出什么好的办法来解决这个问题；而Corda则没有这个问题，因为它的交易本身就不会向全网进行广播，所以只要交易参与者和公证人可以验证即可。以太坊和Onchain DNA的方法都是分区，即将各个合约分到不同的逻辑区中，每个区中的合约都顺序执行，而不同的区之间并行执行。以太坊将合约地址的首个字节作为分区依据，由此产生了256个分区，每个合约都在自己的分区中运行，且只能调用与自己相同分区的合约。但这种做法实际上并不能有效地解决问题，因为总有一些通用的底层合约因为被广泛使用，而把大多数的调用者合约聚集在同一个分区中。 Onchain DNA将合约分为功能合约（Function code）和应用合约（Applicationcode）。其中功能合约专门用于提供可复用的功能函数，被其它合约调用，且必须被声明为无状态，这一点消除了绝大部分的合约聚集现象；而只有应用合约可以保存自己的状态，所以在执行应用合约时，对其采用动态分区方案：在合约被执行之前，会先计算出它们的调用树，并将调用树有交集的合约放在同一个分区中执行。 5大项目独有特性 扩展性 幽灵协议是以太坊对现有POW算法的改进，它提出的动机是当前快速确认的区块链因为区块的高作废率而受到的低安全性困扰。因为区块需要花一定时间扩散至全网，如果矿工A挖出了一个区块然后矿工B碰巧在A的区块传播至B之前挖出了另外一个区块，矿工B的区块就会作废并且没有对网络安全作出贡献。如果A是一个拥有全网30%算力的矿池而B拥有10%的算力，A将面临70%的时间都在产生作废区块的风险而B在90%的时间里都在产生作废区块。通过在计算哪条链“最长”的时候把废区块也包含进来，幽灵协议解决了降低网络安全性的第一个问题；这就是说，不仅一个区块的父区块和更早的祖先块，祖先块的作废的后代区块（以太坊术语中称之为“叔区块”）也被加进来以计算哪一个区块拥有最大的工作量证明。以太坊付给以“叔区块”身份为新块确认作出贡献的废区块87.5%的奖励，把它们纳入计算的“侄子区块”将获得奖励的12.5%。计算表明，带有激励的五层幽灵协议即使在出块时间为15s的情况下也实现了95%以上的效率，而拥有25%算力的矿工从中心化得到的益处小于3%。 国密算法 国密算法是由中国国家密码管理局制定的一系列商用密码学算法，其中包括了对称加密算法SM1，椭圆曲线非对称加密算法SM2，杂凑算法SM3等。通常区块链在使用密码学算法时会采用国际标准，如AES、ECDSA、SHA2等。而国内的金融机构在选用密码学方案的时候，通常会考虑国密算法。Onchain DNA提供了可选的密码学模块，针对不同的应用场景可以选择不同密码学标准，解决了安全性和政策性风险。 跨链互操作 目前，区块链技术正处于百花齐放、百家争鸣的时代，各种不同的区块链纷纷涌现出来，区块链之间的互操作性成为了一个非常重要而又迫切的需求。企业用户可能需要在不同的链之间进行业务迁移；普通用户可能需要在不同的链之间进行资产交换；央行的数字法币可能会需要在各个区块链上流通等。Onchain DNA提供了一种跨链互操作协议，通过这种跨链协议，用户可以跨越不同的区块链进行资产交易、合约执行等操作，并保证该操作在各个区块链上的事务一致性。 无链结构 正如Corda在白皮书中所宣称的那样，它没有链式结构，交易也不向全网进行广播，而只在交易的参与者和公证人之间发送。因此，数据只有“需要访问的人”才能访问，避免了隐私泄露的问题。由于没有全局的链式结构，每个节点只存放和自己有关的交易，而无需存放全网的所有交易，大大的节省了空间。 总结 本文从多个维度比较并讨论了当前各个区块链框架的特点和功能，并阐述了它们在各方面的优缺点，以及在应用领域上的适用性和局限性。 比特币虽然是区块链技术的原型，具有非常重要的地位，但由于其技术架构的局限性，如挖矿、非图灵完备等，很难应用到复杂的业务场景中去，但非常适合用于货币发行。 以太坊虽然也采用挖矿的形式，但其幽灵协议提高了挖矿效率，新的共识算法也在开发中。以太坊还开发了较多基于密码学的隐私保护方案，比如环签名混币方案，非常适合于创建去中心化自治组织(Decentralized Autonomous Organization)。 Fabric和Onchain DNA的定位都是企业级区块链解决方案，适合用于定制各种特定业务的联盟链，包括金融领域的应用场景。区别在于Fabric以智能合约为导向，而Onchain DNA则以数字资产为导向；前者更适合开发复杂的自定义业务流程，而后者则更适合于构建以数字资产为核心的金融业务系统或权益登记流转系统，且具有较强的扩展性。 Corda的定位是用于银行间业务的“分布式数据库”，它摒弃了区块和链式结构，更好地把参与者的业务数据区隔开来；但引入了公证人的角色，网络结构较为固定不具灵活性和扩展性，且与现有的银行体系的运作方式差别不大。 注：本文源自张铮文2017年初的一篇技术文章。 作者简介： 张铮文，分布科技CTO &amp; Founder, 小蚁核心开发者。区块链技术和计算机安全专家，CISA信息系统审计师。具备区块链底层协议架构和开发能力，dBFT共识机制的作者，独立原创实现了小蚁全部的核心代码。创立小蚁前，曾在盛大游戏、火币网等公司任职，从事信息安全和数字货币研发工作。 热门文章 对话元道：通证经济需要“互链网”，“互链网”需要细腰 今天，这几位区块链大咖旗帜鲜明地亮出“通证派”，原来这才是他们期盼中的未来交易的模样... 与元道对话三：区块链经济正在进行“动力切换” 锐评：泡沫中的token和被冷落的联盟链 对话元道二：通证视角下的区块链创新路线 听听Vitalik对token设计的看法 了解更多区块链技术及应用内容，敬请关注： 阅读更多" />
<meta property="og:description" content="版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Blockchain_lemon/article/details/79236199 本文将对目前市场上几个典型的区块链框架进行横向对比，看看它们都有哪些特点，以及它们之间到底有什么区别。为了保持对比的客观与公正，本文将只针对开源的区块链框架进行讨论。 作者 | 张铮文 时常听人们谈起区块链，从2009年比特币诞生至今，各式各样的区块链系统或基于区块链的应用不断被开发出来，并被应用到大量的场景中，而区块链技术本身也在不停地变化和改进。 区块链又被称为分布式账本，与之对应的则是中心化账本，比如银行。与中心化账本不同的是，分布式账本依靠的是将账本数据冗余存储在所有参与节点中来保证账本的安全性。简单地说，区块链会用到三种底层技术：点对点网络、密码学和分布式一致性算法。而通常，区块链系统还会“免费附赠”一种被称为智能合约的功能。智能合约虽然不是区块链系统的必要组成部分，但由于区块链天生所具备的去中心化特点，使它可以很好地为智能合约提供可信的计算环境。 为了适应不同场景的需求，区块链系统在实际应用的过程中往往会需要进行各种改造，以满足特定业务的要求，比如身份认证、共识机制、密钥管理、吞吐量、响应时间、隐私保护、监管要求等。而实际应用区块链系统的公司往往没有进行这种改造的能力，于是市场上慢慢出现了一些用于定制专用区块链系统的框架，采用这些框架就可以很方便地定制出适用于企业自身业务需求的区块链系统。本文将对目前市场上几个典型的区块链框架进行横向对比。 比特币 比特币（Bitcoin）源自中本聪（Satoshi Nakamoto）在2008年发表的一篇论文《比特币：一种点对点的电子现金系统》（Bitcoin：A Peer-to-PeerElectronic Cash System），文中描述了一种被他称为“比特币”的电子货币及其算法。在之后的几年里，比特币不断成长和成熟，而它的底层技术也逐渐被人们认识并抽象出来，这就是区块链技术。比特币作为区块链的鼻祖，在区块链的大家族中具有举足轻重的地位，基于比特币技术开发出的山寨币（Altcoins）的数量有如天上繁星，难以计数。 中本聪设计比特币的目的，就是希望能够实现一种完全基于点对点网络的电子现金系统，使得在线支付能够直接由一方发起并支付给另外一方，中间不需要通过任何的中介机构。总结来说，他希望比特币能够实现以下这些设计目标： 不需要中央机构就可以发行货币 不需要中介机构就可以支付 保持使用者匿名 交易无法被撤销 从电子现金系统的角度来看，以上这些目标在比特币中基本都得到了实现，但是依然有一些技术问题有待解决，比如延展性攻击、区块容量限制、区块分叉、扩展性等。 在应用场景方面，目前大量的数字货币项目都是基于比特币架构来设计的，此外还有一些比较实际的应用案例，比如彩色币、tØ等。 彩色币（Coloredcoin），通过仔细跟踪一些特定比特币的来龙去脉，可以将它们与其他的比特币区分开来，这些特定的比特币就叫作彩色币。它们具有一些特殊的属性，从而具有与比特币面值无关的价值，利用彩色币的这种特性，开发者可以在比特币网络上创建其他的数字资产。彩色币本身就是比特币，存储和转移不需要第三方，可以利用已经存在的比特币基础网络。 tØ是比特币区块链在金融领域的应用，是美国在线零售商Overstock推出的基于区块链的私有和公有股权交易平台。 以太坊 以太坊（Ethereum）的目标是提供一个带有图灵完备语言的区块链，用这种语言可以创建合约来编写任意状态转换功能。用户只要简单地用几行代码来实现逻辑，就能够创建一个基于区块链的应用程序，并应用于货币以外的场景。以太坊的设计思想是不直接“支持”任何应用，但图灵完备的编程语言意味着理论上任意合约逻辑和任何类型的应用都可以被创建出来。总结来说，以太坊在比特币的功能之外，还有以下几个设计目标： 图灵完备的合约语言 内置的持久化状态存储 目前基于以太坊的合约项目已达到数百个，比较有名的有Augur、TheDAO、Digix、FirstBlood等。 Augur是一个去中心化的预测市场平台，基于以太坊区块链技术。用户可以用数字货币进行预测和下注，依靠群众的智慧来预判事件的发展结果，可以有效地消除对手方风险和服务器的中心化风险。 限于篇幅，基于以太坊智能合约平台的项目就不多介绍了。基于以太坊的代码进行改造的区块链项目也有不少，但几乎都是闭源项目，只能依靠一些公开的特性来推断，所以就不在本文展开讨论了。 Fabric Fabric是由IBM和DAH主导开发的一个区块链框架，是超级帐本的项目成员之一。它的功能与以太坊类似，也是一个分布式的智能合约平台。但与以太坊和比特币不同的是，它从一开始就是一个框架，而不是一个公有链，也没有内置的代币（Token）。 超级账本（Hyperledger）是Linux基金会于2015年发起的推进区块链技术和标准的开源项目，加入成员包括：荷兰银行（ABN AMRO）、埃森哲（Accenture）等十几个不同利益体，目标是让成员共同合作，共建开放平台，满足来自多个不同行业各种用户案例，并简化业务流程。 作为一个区块链框架，Fabric采用了松耦合的设计，将共识机制、身份验证等组件模块化，使之在应用过程中可以方便地根据应用场景来选择相应的模块。除此之外，Fabric还采用了容器技术，将智能合约代码（Chaincode）放在Docker中运行，从而使智能合约可以用几乎任意的高级语言来编写。 以下是Fabric的一些设计目标： 模块化设计，组件可替换 运行于Docker的智能合约 目前已经有不少采用Fabric架构进行开发的概念验证（POC）项目在实施过程中，其中不乏一些金融机构做出的尝试，不过由于项目刚刚起步，还没有比较成熟的落地应用。 Onchain DNA Onchain DNA（Onchain Distributed Networks Architecture），是由总部位于上海的区块链创业公司“分布科技”开发的区块链架构，可以同时支持公有链、联盟链、私有链等不同应用类型和场景，并快速与业务系统集成。分布科技同样也是超级账本的成员之一。 与以太坊、Fabric不同的是，Onchain DNA在系统底层实现了对多种数字资产的支持，用户可以直接在链上创建自己的资产类型，并用智能合约来控制它的发行和交易逻辑。对于绝大部分的区块链应用场景，数字资产是必不可少的，而为每一种数字资产都开发一套基于智能合约的业务流程非常浪费且低效。因此，由区块链底层提供直接的数字资产功能十分必要。而对于那些完全不需要数字资产的应用场景，同样可以基于Onchain DNA提供的智能合约功能来编写任意的自定义逻辑来实现。 Onchain DNA的设计目标主要有以下几点： 多种数字资产的底层支持 图灵完备的智能合约和持久化状态 跨链互操作性 交易的最终性 目前已有不少金融机构采用Onchain DNA架构来进行区块链概念验证产品的开发，如银行、券商、支付、登记结算机构等。除此之外，还有一些已经落地的区块链项目，如小蚁、法链等。 小蚁（Antshares）是一个定位于资产数字化的公有链，将实体世界的资产和权益进行数字化，通过点对点网络进行登记发行、转让交易、清算交割等金融业务的去中心化网络协议。它采用社区化开发的模式，在架构上与Onchain DNA保持一致，从而可以与任何基于Onchain DNA的区块链系统发生跨链互操作。 法链是全球第一个大规模商用的法律存证区块链，一个底层基于Onchain DNA区块链技术，并由多个机构参与建立和运营的证据记录和保存系统。该系统没有中心控制点，且数据一旦录入，单个机构或节点无法篡改，从而满足司法存证的要求。 Corda Corda是由一家总部位于纽约的区块链创业公司R3CEV开发的，由其发起的R3区块链联盟，至今已吸引了数十家巨头银行的参与，其中包括富国银行、美国银行、纽约梅隆银行、花旗银行、德国商业银行、德意志银行、汇丰银行、三菱UFJ金融集团、摩根士丹利、澳大利亚国民银行、加拿大皇家银行、瑞典北欧斯安银行（SEB）、法国兴业银行等。从R3成员的组成上也可以看出，Corda是一款专门用于银行与银行间业务的技术架构。尽管R3声称Corda不是区块链，但它具备区块链的一些重要特性。 Corda由Java和Kotlin开发，并在其各项功能中充分依赖于Java，比如智能合约、数据访问接口等。Corda的设计目标主要是： 没有全局账本 由公证人（Notaries）来解决交易的多重支付问题 只有交易的参与者和公证人才能看到交易 为此，Corda的所有交易都不会向全网进行广播，而且所有的节点都是直接通信，没有P2P网络。这一点导致了其网络规模会被限制在一个较小的规模内，无法形成大规模的联盟链，适用的业务场景比较狭窄。 接下来，我们将针对前文中所提到的这些区块链框架进行一系列的技术对比，并从多个维度展开讨论它们的区别与相似之处。 数字资产 ﻿﻿ 区块链的内置代币通常是一种经济激励模型和防止垃圾交易的手段。比特币天生就有且只有一种内置代币，所以在比特币系统中所有的“交易”本质上都是转账行为，除非通过外部的协议层来给比特币增加额外的数字资产。 以太坊和Onchain DNA具有内置代币，它们的作用除了以上提到的经济激励和防止垃圾交易之外，还为系统内置功能提供了一个收费的渠道。比如以太坊的智能合约运行需要消耗GAS，而Onchain DNA的数字资产创建也需要消耗一定的代币（可选）。 以太坊和Fabric没有内置的多种数字资产支持，而是通过智能合约来实现相应的功能。这种方式的好处在于，系统设计可以做到非常简洁，而且资产的行为可以任意指定，自由度极高。然而这样的设计也会带来一系列的负面影响，比如所有的资产创建者不得不自己编写重复的业务逻辑，而用户也没有办法通过统一的方式去操作自己的资产。 相比之下，Onchain DNA和Corda采用了在底层支持多种数字资产的方式，让资产创建者可以方便地创建自己的资产类型，而用户也可以在同一个客户端中管理所有的资产。对于逻辑更加复杂一点的业务场景来说，他们同样可以利用智能合约来强化资产的功能，或者创建一种与资产无关的业务逻辑。 账户系统 UTXO（Unspent Transaction Output）是这样一种机制：每一枚数字货币都会被登记在一个账户的所有权之下，一枚数字货币有两种状态，即要么还没有被花费，要么已经被花费。当需要使用一枚数字货币的时候，就将它的状态标记为已经花费，并创造一枚新的与之等额的数字货币，将它的所有权登记到新的账户之下。在这个过程中，被标记为已花费的数字货币就被称为交易的输入，而创造出来的新的数字货币被称为交易的输出，在一笔交易中，可以包含多个输入和多个输出，但是输入之和与输出之和必须相等。计算一个账户的余额时，只要将所有登记在该账户下的数字货币的面额相加即可。 比特币和Corda就采用了UTXO这样一种账户机制，而以太坊则采用了更加直观的余额机制：每个账户都有一个状态，状态中直接记录了账户当前的余额，转账的逻辑就是从一个账户中减去一部分金额，并在另一个账户中加上相应的金额，减去的部分和加上的部分必须相等。Onchain DNA在账户机制上同时兼容这两种模式。 那么UTXO模式和余额模式，究竟有什么区别呢？UTXO最大的好处就是，基于UTXO的交易可以并行验证且任意排序，因为所有的UTXO之间都是没有关联的，这对区块链未来的扩展性有很大的帮助，而基于余额的设计就没有这个优势了。反过来，余额设计的优点是设计思想非常简洁和直观，便于程序实现，特别是在智能合约中，要处理UTXO的状态是非常困难的。这也是为什么以智能合约为主要功能的以太坊选择余额设计的原因，而比特币、OnchainDNA、Corda这些以数字资产为核心的架构则更倾向于UTXO设计。 关于身份认证，比特币和以太坊基本没有身份认证的设计，原因很简单，因为这两者的设计思想都是强调隐私和匿名，反对监管和中心化，而身份认证就势必要引入一些中心或者弱化的中心机构。 Fabric、Onchain DNA和Corda不约而同地选择了采用数字证书来对用户身份进行认证，原因在于这三者都有应用于现有金融系统的设计目标，而金融系统必然要考虑合规化并接受监管，此外现有的金融系统已经大范围地采用数字证书方案，这样便可以和区块链系统快速集成。 共识机制 共识机制是分布式系统的核心算法，因为分布式系统的数据分散在各个参与节点中，这些分散的数据必须通过一种算法来保持一致性，否则系统将无法正常工作。与传统的分布式系统不同，区块链是一个去中心化的系统，并且可能会承载大量的金融资产，所以它可能会面临大量的拜占庭故障而非一般性故障，而中心化的分布式系统则很少遇到拜占庭故障。因此，区块链的共识机制与传统的分布式系统存在较大的差异。 ﻿﻿ 比特币和以太坊采用了工作量证明（Proof-of-Work）机制来保证账本数据的一致性。工作量证明同时也是一种代币分发机制，它通过经济激励的方式来鼓励节点参与区块的构造过程，节点在构造区块的时候需要穷举一个随机数以使得区块符合规定的难度要求，一旦区块链出现分叉，诚实的节点将选择工作量较大的链条，而抛弃工作量较小的。由于假设所有节点都是逐利的，而选择工作量较小的链条就会使自己获得的激励无效，所以最终所有的节点都会是诚实的，从而使每个节点的区块链数据都保持一致。 为了维护这样一个工作量证明机制的区块链，需要全网具备较大规模的算力支撑来保证网络的安全性，否则账本数据就有可能被篡改。此外，即使维持较大的算力来保护网络，工作量证明也无法从根本上保证交易的最终性，比如比特币就经常产生孤立区块（Orphaned Block），而包含在孤立区块中的交易就有可能被撤销。因此比特币通常要求用户等待6个区块的确认，即1小时左右的时间，才能在一个可接受的概率上认为交易已经最终完成，而这个概率也并非是最终性的——你永远也不知道暗中是否有一个远超过全网的庞大算力正在试图撤销以前的交易。而为了维护庞大算力而支出的电力成本也是相当可观，因此，以太坊已经在设计从工作量证明机制切换到其他共识机制上的方案。 Fabric和Onchain DNA都设计了基于拜占庭容错（Byzantine Fault Tolerance）模型的共识机制。节点被分为普通节点和记账节点（Validating Peer），只有记账节点才会参与到区块的构造过程，这种角色的分离使得算法的设计者有机会将运行共识算法的节点数量限定在一个可控的规模内。 拜占庭容错模型对网络中的节点做出了假设和要求：如果共识中有f个节点会出现拜占庭故障，那么至少需要3f+1个节点参与共识才能避免网络出现分叉。在这个模型下，每个区块的构造过程都需要至少2f+1个节点的参与才能够完成，而不像工作量证明机制下每个节点都独立构造区块。一旦区块被构造出来，它就无法被撤销，因为2f+1个诚实的记账节点不会在同一高度对两个不同的区块进行签名认证。 相比较而言，工作量证明机制提供了极高的灵活性和可用性，因为每个节点都独立构造区块而几乎不需要其他节点的参与，节点可以随时加入或者退出网络，即使全网只剩下一个节点，网络还是可以继续工作，但是相应的它也失去了交易的最终性；而拜占庭容错的机制则与之相反，牺牲了一定的灵活性和可用性，记账节点必须在线提供服务而不能退出网络，一旦出现1/3的记账节点停机，那么网络将变得不可用，但它保证了交易的最终性。 智能合约 智能合约是1994年由密码学家尼克萨博（Nick Szabo）首次提出的理念，几乎与互联网同龄。智能合约是指能够自动执行合约条款的计算机程序，在比特币出现以前，因为不存在安全可靠的执行环境，智能合约一直不能够应用到现实中。区块链由于其去中心化、公开透明等特性，天生就可以为智能合约提供可信的执行环境。所以，新型的区块链框架几乎都会内置智能合约的功能。 ﻿﻿ 比特币内置了一套基于栈的脚本执行引擎，可以运行一种独有的脚本代码，用于对交易进行简单的有效性验证，比如签名验证和多重签名验证等。比特币这套脚本语言被有意设计成非图灵完备的，足够简单却也足以应对货币转账的各种需求。 以太坊是首个以图灵完备智能合约为主要功能的区块链，用户可以在以太坊的平台上创建自己的合约，而合约的内容可以包含货币转账在内的任意逻辑。合约使用一种名为Solidity的语言来编写，它是以太坊团队开发的专门用于编写智能合约的一种高级语言，语法类似JavaScript，最终被编译成字节码并运行在EVM（Ethereum Virtual Machine）之中。EVM提供了堆栈、内存、存储器等虚拟硬件，以及一套专用的指令集，所有的代码都在沙盒中运行。它提供了合约间相互调用的能力，甚至可以在运行时动态加载其它合约的代码来执行。这种能力使得以太坊的合约具有非常高的灵活性，但也可能会使合约的功能具有不确定性。 与以太坊自己动手开发语言、虚拟机的思路不同，Fabric选择了使用现有的容器技术来支持智能合约功能。Fabric的智能合约理论上可以用任何语言来编写，这一点对开发者相当友好，他们将无需学习新的语言，并且可以复用现有的业务代码和丰富的开发库，并使用自己熟悉的开发工具。相对的，采用Docker的智能合约架构也有大量的问题：首先，它很难对智能合约的执行流程进行控制，从而无法对其功能进行限制；其次，它无法对合约运行所消耗的计算资源进行精确的评估；此外，运行Docker相对而言是极其耗费资源的操作，这就使得难以在移动设备上运行合约；最后，不同节点的硬件配置、合约引用的开发库等，都有可能会使合约的行为具有很强的不确定性。 Onchain DNA采用了AVM（Antshares Virtual Machine）作为其智能合约功能的底层支持。AVM是一个微核心的、平台无关的智能合约执行环境，它提供了一套包含堆栈操作、流程控制、逻辑运算、算数运算、密码学运算、字符串操作、数组操作的指令集，在硬件方面，它只提供了两个计算堆栈。不过，由于它允许区块链的实现者创建自己的虚拟硬件，并以接口的形式开放给智能合约来使用，使得合约可以在运行时取得平台相关的数据、持久化存储以及访问互联网等。虽然这也有可能会使合约的行为具有不确定性，但区块链的实现者可以通过合理编写虚拟硬件来消除这种不确定性。不过，由于目前尚无与AVM配套的编译器和开发环境，这使得基于AVM进行智能合约开发变得相当困难，开发者不得不使用一种类似汇编的语法来进行合约编写，需要较高的技术能力。 Corda的智能合约功能与其自身一样，都是基于JVM（Java Virtual Machine）的。因此，你可以使用任何与JVM兼容的语言来进行开发，比如Java、Kotlin等。不过，它对JVM进行了一定的改造，使得在其上运行的合约脚本具备确定性。开发的过程大致是这样的：使用Java创建一个实现Contract接口的类（Class），并提供一个名为verify的函数（Function）用于对交易进行验证，该函数接受当前的交易作为参数，如果交易验证失败，则抛出异常（Exception），没有异常就表示验证通过。Corda使用JPA（Java Persistence Architecture）来提供持久化功能，支持SQL语句和常用的数据库，不过需要安装相应的插件，并且由于数据仅存放在合约执行者的节点，因此无法进行全局的持久化存储。 扩展性 区块链的数据结构通常是只能追加记录，而不能修改或删除记录，它真实地记录下完整的历史数据，使得新加入的节点有能力对全网的完整交易历史进行验证，而无需信任其它节点。这种特性带来了去中心化的便利性，但也影响了区块链系统的扩展性，因为区块会无休止地增长，直到塞满整个硬盘。所以有必要提供一种空间回收的机制来应对不断增长的数据。 ﻿﻿ 比特币提出了使用默克尔树（Merkle tree）来存放交易散列的方式，当需要回收硬盘空间时，只需将老旧的交易从默克尔树中剔除即可。一个不含交易信息的区块头大小仅有80字节。按照比特币区块生成的速率为每10分钟一个，那么每一年产生的数据约为4.2MB，即使将全部的区块头存储于内存之中都不是问题。 以太坊、Fabric和Onchain DNA在比特币区块压缩的基础上，又采用了状态快照的方式来节约硬盘空间。具体来说，就是在区块头的结构中不但记录了当前区块所有交易的根散列，还记录了当前区块及过去所有区块中的状态根散列。这些状态包括所有的UTXO、账户余额、合约存储等，所以节点只需要保留最新的区块和完整的状态信息即可。 扩展性的另一个重要指标是交易的吞吐量。决定吞吐量的因素有很多种，如网络结构、加密算法、共识机制等，但最重要的还是交易是否可以被并行验证。如果交易可以被并行验证，那么未来就可以通过简单地增加CPU数量来提高吞吐量。 基于UTXO系统的比特币可以很容易地对交易进行并行验证，因为UTXO之间是没有关联的，对任何一个UTXO的状态改变都可以独立进行且与顺序无关；而基于余额的账户系统则不那么容易实现并行，因为可能会同时发生多笔交易对同一个账户进行资产操作，需要进行一些额外的步骤来处理。举个例子，假设账户中的余额为10元，有两笔针对该账户的交易同时发生，第一笔交易在账户中+5元，而第二笔交易在账户中-11元。那么如果先执行第一笔交易，则两笔都能成功，最终余额为4元；如果先执行第二笔交易，那么它会因余额不足而失败，只有第一笔交易会成功，最终余额为15元。 而对交易的并行验证起到决定性作用的，是智能合约是否具备状态持久化的能力。如果一组合约都是无状态的，那么它们就可以按任意的顺序被执行，不会产生任何副作用；相反，如果合约可以对一组状态产生影响，那么按不同的顺序来执行合约产生的结果也会不同。举个例子，一个计算存款利息的合约，它具有两个子功能：存款和利息结算。假设账户中有100元，利率为10%，现在同时发生了两笔交易，第一笔交易的内容是存入100元，第二笔交易的内容是结算利息。假如第一笔交易先执行，那么最终账户的余额是：100+100）*110%=220元；如果第二笔交易先执行，那么账户余额将是：100*110%+100=210元。由此可见，具备状态持久化能力的智能合约是顺序相关的，因此难以并发验证，特别是如果合约之间还可以相互调用的话，情况将会更加复杂。 目前Fabric没有提出什么好的办法来解决这个问题；而Corda则没有这个问题，因为它的交易本身就不会向全网进行广播，所以只要交易参与者和公证人可以验证即可。以太坊和Onchain DNA的方法都是分区，即将各个合约分到不同的逻辑区中，每个区中的合约都顺序执行，而不同的区之间并行执行。以太坊将合约地址的首个字节作为分区依据，由此产生了256个分区，每个合约都在自己的分区中运行，且只能调用与自己相同分区的合约。但这种做法实际上并不能有效地解决问题，因为总有一些通用的底层合约因为被广泛使用，而把大多数的调用者合约聚集在同一个分区中。 Onchain DNA将合约分为功能合约（Function code）和应用合约（Applicationcode）。其中功能合约专门用于提供可复用的功能函数，被其它合约调用，且必须被声明为无状态，这一点消除了绝大部分的合约聚集现象；而只有应用合约可以保存自己的状态，所以在执行应用合约时，对其采用动态分区方案：在合约被执行之前，会先计算出它们的调用树，并将调用树有交集的合约放在同一个分区中执行。 5大项目独有特性 扩展性 幽灵协议是以太坊对现有POW算法的改进，它提出的动机是当前快速确认的区块链因为区块的高作废率而受到的低安全性困扰。因为区块需要花一定时间扩散至全网，如果矿工A挖出了一个区块然后矿工B碰巧在A的区块传播至B之前挖出了另外一个区块，矿工B的区块就会作废并且没有对网络安全作出贡献。如果A是一个拥有全网30%算力的矿池而B拥有10%的算力，A将面临70%的时间都在产生作废区块的风险而B在90%的时间里都在产生作废区块。通过在计算哪条链“最长”的时候把废区块也包含进来，幽灵协议解决了降低网络安全性的第一个问题；这就是说，不仅一个区块的父区块和更早的祖先块，祖先块的作废的后代区块（以太坊术语中称之为“叔区块”）也被加进来以计算哪一个区块拥有最大的工作量证明。以太坊付给以“叔区块”身份为新块确认作出贡献的废区块87.5%的奖励，把它们纳入计算的“侄子区块”将获得奖励的12.5%。计算表明，带有激励的五层幽灵协议即使在出块时间为15s的情况下也实现了95%以上的效率，而拥有25%算力的矿工从中心化得到的益处小于3%。 国密算法 国密算法是由中国国家密码管理局制定的一系列商用密码学算法，其中包括了对称加密算法SM1，椭圆曲线非对称加密算法SM2，杂凑算法SM3等。通常区块链在使用密码学算法时会采用国际标准，如AES、ECDSA、SHA2等。而国内的金融机构在选用密码学方案的时候，通常会考虑国密算法。Onchain DNA提供了可选的密码学模块，针对不同的应用场景可以选择不同密码学标准，解决了安全性和政策性风险。 跨链互操作 目前，区块链技术正处于百花齐放、百家争鸣的时代，各种不同的区块链纷纷涌现出来，区块链之间的互操作性成为了一个非常重要而又迫切的需求。企业用户可能需要在不同的链之间进行业务迁移；普通用户可能需要在不同的链之间进行资产交换；央行的数字法币可能会需要在各个区块链上流通等。Onchain DNA提供了一种跨链互操作协议，通过这种跨链协议，用户可以跨越不同的区块链进行资产交易、合约执行等操作，并保证该操作在各个区块链上的事务一致性。 无链结构 正如Corda在白皮书中所宣称的那样，它没有链式结构，交易也不向全网进行广播，而只在交易的参与者和公证人之间发送。因此，数据只有“需要访问的人”才能访问，避免了隐私泄露的问题。由于没有全局的链式结构，每个节点只存放和自己有关的交易，而无需存放全网的所有交易，大大的节省了空间。 总结 本文从多个维度比较并讨论了当前各个区块链框架的特点和功能，并阐述了它们在各方面的优缺点，以及在应用领域上的适用性和局限性。 比特币虽然是区块链技术的原型，具有非常重要的地位，但由于其技术架构的局限性，如挖矿、非图灵完备等，很难应用到复杂的业务场景中去，但非常适合用于货币发行。 以太坊虽然也采用挖矿的形式，但其幽灵协议提高了挖矿效率，新的共识算法也在开发中。以太坊还开发了较多基于密码学的隐私保护方案，比如环签名混币方案，非常适合于创建去中心化自治组织(Decentralized Autonomous Organization)。 Fabric和Onchain DNA的定位都是企业级区块链解决方案，适合用于定制各种特定业务的联盟链，包括金融领域的应用场景。区别在于Fabric以智能合约为导向，而Onchain DNA则以数字资产为导向；前者更适合开发复杂的自定义业务流程，而后者则更适合于构建以数字资产为核心的金融业务系统或权益登记流转系统，且具有较强的扩展性。 Corda的定位是用于银行间业务的“分布式数据库”，它摒弃了区块和链式结构，更好地把参与者的业务数据区隔开来；但引入了公证人的角色，网络结构较为固定不具灵活性和扩展性，且与现有的银行体系的运作方式差别不大。 注：本文源自张铮文2017年初的一篇技术文章。 作者简介： 张铮文，分布科技CTO &amp; Founder, 小蚁核心开发者。区块链技术和计算机安全专家，CISA信息系统审计师。具备区块链底层协议架构和开发能力，dBFT共识机制的作者，独立原创实现了小蚁全部的核心代码。创立小蚁前，曾在盛大游戏、火币网等公司任职，从事信息安全和数字货币研发工作。 热门文章 对话元道：通证经济需要“互链网”，“互链网”需要细腰 今天，这几位区块链大咖旗帜鲜明地亮出“通证派”，原来这才是他们期盼中的未来交易的模样... 与元道对话三：区块链经济正在进行“动力切换” 锐评：泡沫中的token和被冷落的联盟链 对话元道二：通证视角下的区块链创新路线 听听Vitalik对token设计的看法 了解更多区块链技术及应用内容，敬请关注： 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/02/01/c36002cde4df6c2ba0070245e6238703.html" />
<meta property="og:url" content="https://mlh.app/2018/02/01/c36002cde4df6c2ba0070245e6238703.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-02-01T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Blockchain_lemon/article/details/79236199 本文将对目前市场上几个典型的区块链框架进行横向对比，看看它们都有哪些特点，以及它们之间到底有什么区别。为了保持对比的客观与公正，本文将只针对开源的区块链框架进行讨论。 作者 | 张铮文 时常听人们谈起区块链，从2009年比特币诞生至今，各式各样的区块链系统或基于区块链的应用不断被开发出来，并被应用到大量的场景中，而区块链技术本身也在不停地变化和改进。 区块链又被称为分布式账本，与之对应的则是中心化账本，比如银行。与中心化账本不同的是，分布式账本依靠的是将账本数据冗余存储在所有参与节点中来保证账本的安全性。简单地说，区块链会用到三种底层技术：点对点网络、密码学和分布式一致性算法。而通常，区块链系统还会“免费附赠”一种被称为智能合约的功能。智能合约虽然不是区块链系统的必要组成部分，但由于区块链天生所具备的去中心化特点，使它可以很好地为智能合约提供可信的计算环境。 为了适应不同场景的需求，区块链系统在实际应用的过程中往往会需要进行各种改造，以满足特定业务的要求，比如身份认证、共识机制、密钥管理、吞吐量、响应时间、隐私保护、监管要求等。而实际应用区块链系统的公司往往没有进行这种改造的能力，于是市场上慢慢出现了一些用于定制专用区块链系统的框架，采用这些框架就可以很方便地定制出适用于企业自身业务需求的区块链系统。本文将对目前市场上几个典型的区块链框架进行横向对比。 比特币 比特币（Bitcoin）源自中本聪（Satoshi Nakamoto）在2008年发表的一篇论文《比特币：一种点对点的电子现金系统》（Bitcoin：A Peer-to-PeerElectronic Cash System），文中描述了一种被他称为“比特币”的电子货币及其算法。在之后的几年里，比特币不断成长和成熟，而它的底层技术也逐渐被人们认识并抽象出来，这就是区块链技术。比特币作为区块链的鼻祖，在区块链的大家族中具有举足轻重的地位，基于比特币技术开发出的山寨币（Altcoins）的数量有如天上繁星，难以计数。 中本聪设计比特币的目的，就是希望能够实现一种完全基于点对点网络的电子现金系统，使得在线支付能够直接由一方发起并支付给另外一方，中间不需要通过任何的中介机构。总结来说，他希望比特币能够实现以下这些设计目标： 不需要中央机构就可以发行货币 不需要中介机构就可以支付 保持使用者匿名 交易无法被撤销 从电子现金系统的角度来看，以上这些目标在比特币中基本都得到了实现，但是依然有一些技术问题有待解决，比如延展性攻击、区块容量限制、区块分叉、扩展性等。 在应用场景方面，目前大量的数字货币项目都是基于比特币架构来设计的，此外还有一些比较实际的应用案例，比如彩色币、tØ等。 彩色币（Coloredcoin），通过仔细跟踪一些特定比特币的来龙去脉，可以将它们与其他的比特币区分开来，这些特定的比特币就叫作彩色币。它们具有一些特殊的属性，从而具有与比特币面值无关的价值，利用彩色币的这种特性，开发者可以在比特币网络上创建其他的数字资产。彩色币本身就是比特币，存储和转移不需要第三方，可以利用已经存在的比特币基础网络。 tØ是比特币区块链在金融领域的应用，是美国在线零售商Overstock推出的基于区块链的私有和公有股权交易平台。 以太坊 以太坊（Ethereum）的目标是提供一个带有图灵完备语言的区块链，用这种语言可以创建合约来编写任意状态转换功能。用户只要简单地用几行代码来实现逻辑，就能够创建一个基于区块链的应用程序，并应用于货币以外的场景。以太坊的设计思想是不直接“支持”任何应用，但图灵完备的编程语言意味着理论上任意合约逻辑和任何类型的应用都可以被创建出来。总结来说，以太坊在比特币的功能之外，还有以下几个设计目标： 图灵完备的合约语言 内置的持久化状态存储 目前基于以太坊的合约项目已达到数百个，比较有名的有Augur、TheDAO、Digix、FirstBlood等。 Augur是一个去中心化的预测市场平台，基于以太坊区块链技术。用户可以用数字货币进行预测和下注，依靠群众的智慧来预判事件的发展结果，可以有效地消除对手方风险和服务器的中心化风险。 限于篇幅，基于以太坊智能合约平台的项目就不多介绍了。基于以太坊的代码进行改造的区块链项目也有不少，但几乎都是闭源项目，只能依靠一些公开的特性来推断，所以就不在本文展开讨论了。 Fabric Fabric是由IBM和DAH主导开发的一个区块链框架，是超级帐本的项目成员之一。它的功能与以太坊类似，也是一个分布式的智能合约平台。但与以太坊和比特币不同的是，它从一开始就是一个框架，而不是一个公有链，也没有内置的代币（Token）。 超级账本（Hyperledger）是Linux基金会于2015年发起的推进区块链技术和标准的开源项目，加入成员包括：荷兰银行（ABN AMRO）、埃森哲（Accenture）等十几个不同利益体，目标是让成员共同合作，共建开放平台，满足来自多个不同行业各种用户案例，并简化业务流程。 作为一个区块链框架，Fabric采用了松耦合的设计，将共识机制、身份验证等组件模块化，使之在应用过程中可以方便地根据应用场景来选择相应的模块。除此之外，Fabric还采用了容器技术，将智能合约代码（Chaincode）放在Docker中运行，从而使智能合约可以用几乎任意的高级语言来编写。 以下是Fabric的一些设计目标： 模块化设计，组件可替换 运行于Docker的智能合约 目前已经有不少采用Fabric架构进行开发的概念验证（POC）项目在实施过程中，其中不乏一些金融机构做出的尝试，不过由于项目刚刚起步，还没有比较成熟的落地应用。 Onchain DNA Onchain DNA（Onchain Distributed Networks Architecture），是由总部位于上海的区块链创业公司“分布科技”开发的区块链架构，可以同时支持公有链、联盟链、私有链等不同应用类型和场景，并快速与业务系统集成。分布科技同样也是超级账本的成员之一。 与以太坊、Fabric不同的是，Onchain DNA在系统底层实现了对多种数字资产的支持，用户可以直接在链上创建自己的资产类型，并用智能合约来控制它的发行和交易逻辑。对于绝大部分的区块链应用场景，数字资产是必不可少的，而为每一种数字资产都开发一套基于智能合约的业务流程非常浪费且低效。因此，由区块链底层提供直接的数字资产功能十分必要。而对于那些完全不需要数字资产的应用场景，同样可以基于Onchain DNA提供的智能合约功能来编写任意的自定义逻辑来实现。 Onchain DNA的设计目标主要有以下几点： 多种数字资产的底层支持 图灵完备的智能合约和持久化状态 跨链互操作性 交易的最终性 目前已有不少金融机构采用Onchain DNA架构来进行区块链概念验证产品的开发，如银行、券商、支付、登记结算机构等。除此之外，还有一些已经落地的区块链项目，如小蚁、法链等。 小蚁（Antshares）是一个定位于资产数字化的公有链，将实体世界的资产和权益进行数字化，通过点对点网络进行登记发行、转让交易、清算交割等金融业务的去中心化网络协议。它采用社区化开发的模式，在架构上与Onchain DNA保持一致，从而可以与任何基于Onchain DNA的区块链系统发生跨链互操作。 法链是全球第一个大规模商用的法律存证区块链，一个底层基于Onchain DNA区块链技术，并由多个机构参与建立和运营的证据记录和保存系统。该系统没有中心控制点，且数据一旦录入，单个机构或节点无法篡改，从而满足司法存证的要求。 Corda Corda是由一家总部位于纽约的区块链创业公司R3CEV开发的，由其发起的R3区块链联盟，至今已吸引了数十家巨头银行的参与，其中包括富国银行、美国银行、纽约梅隆银行、花旗银行、德国商业银行、德意志银行、汇丰银行、三菱UFJ金融集团、摩根士丹利、澳大利亚国民银行、加拿大皇家银行、瑞典北欧斯安银行（SEB）、法国兴业银行等。从R3成员的组成上也可以看出，Corda是一款专门用于银行与银行间业务的技术架构。尽管R3声称Corda不是区块链，但它具备区块链的一些重要特性。 Corda由Java和Kotlin开发，并在其各项功能中充分依赖于Java，比如智能合约、数据访问接口等。Corda的设计目标主要是： 没有全局账本 由公证人（Notaries）来解决交易的多重支付问题 只有交易的参与者和公证人才能看到交易 为此，Corda的所有交易都不会向全网进行广播，而且所有的节点都是直接通信，没有P2P网络。这一点导致了其网络规模会被限制在一个较小的规模内，无法形成大规模的联盟链，适用的业务场景比较狭窄。 接下来，我们将针对前文中所提到的这些区块链框架进行一系列的技术对比，并从多个维度展开讨论它们的区别与相似之处。 数字资产 ﻿﻿ 区块链的内置代币通常是一种经济激励模型和防止垃圾交易的手段。比特币天生就有且只有一种内置代币，所以在比特币系统中所有的“交易”本质上都是转账行为，除非通过外部的协议层来给比特币增加额外的数字资产。 以太坊和Onchain DNA具有内置代币，它们的作用除了以上提到的经济激励和防止垃圾交易之外，还为系统内置功能提供了一个收费的渠道。比如以太坊的智能合约运行需要消耗GAS，而Onchain DNA的数字资产创建也需要消耗一定的代币（可选）。 以太坊和Fabric没有内置的多种数字资产支持，而是通过智能合约来实现相应的功能。这种方式的好处在于，系统设计可以做到非常简洁，而且资产的行为可以任意指定，自由度极高。然而这样的设计也会带来一系列的负面影响，比如所有的资产创建者不得不自己编写重复的业务逻辑，而用户也没有办法通过统一的方式去操作自己的资产。 相比之下，Onchain DNA和Corda采用了在底层支持多种数字资产的方式，让资产创建者可以方便地创建自己的资产类型，而用户也可以在同一个客户端中管理所有的资产。对于逻辑更加复杂一点的业务场景来说，他们同样可以利用智能合约来强化资产的功能，或者创建一种与资产无关的业务逻辑。 账户系统 UTXO（Unspent Transaction Output）是这样一种机制：每一枚数字货币都会被登记在一个账户的所有权之下，一枚数字货币有两种状态，即要么还没有被花费，要么已经被花费。当需要使用一枚数字货币的时候，就将它的状态标记为已经花费，并创造一枚新的与之等额的数字货币，将它的所有权登记到新的账户之下。在这个过程中，被标记为已花费的数字货币就被称为交易的输入，而创造出来的新的数字货币被称为交易的输出，在一笔交易中，可以包含多个输入和多个输出，但是输入之和与输出之和必须相等。计算一个账户的余额时，只要将所有登记在该账户下的数字货币的面额相加即可。 比特币和Corda就采用了UTXO这样一种账户机制，而以太坊则采用了更加直观的余额机制：每个账户都有一个状态，状态中直接记录了账户当前的余额，转账的逻辑就是从一个账户中减去一部分金额，并在另一个账户中加上相应的金额，减去的部分和加上的部分必须相等。Onchain DNA在账户机制上同时兼容这两种模式。 那么UTXO模式和余额模式，究竟有什么区别呢？UTXO最大的好处就是，基于UTXO的交易可以并行验证且任意排序，因为所有的UTXO之间都是没有关联的，这对区块链未来的扩展性有很大的帮助，而基于余额的设计就没有这个优势了。反过来，余额设计的优点是设计思想非常简洁和直观，便于程序实现，特别是在智能合约中，要处理UTXO的状态是非常困难的。这也是为什么以智能合约为主要功能的以太坊选择余额设计的原因，而比特币、OnchainDNA、Corda这些以数字资产为核心的架构则更倾向于UTXO设计。 关于身份认证，比特币和以太坊基本没有身份认证的设计，原因很简单，因为这两者的设计思想都是强调隐私和匿名，反对监管和中心化，而身份认证就势必要引入一些中心或者弱化的中心机构。 Fabric、Onchain DNA和Corda不约而同地选择了采用数字证书来对用户身份进行认证，原因在于这三者都有应用于现有金融系统的设计目标，而金融系统必然要考虑合规化并接受监管，此外现有的金融系统已经大范围地采用数字证书方案，这样便可以和区块链系统快速集成。 共识机制 共识机制是分布式系统的核心算法，因为分布式系统的数据分散在各个参与节点中，这些分散的数据必须通过一种算法来保持一致性，否则系统将无法正常工作。与传统的分布式系统不同，区块链是一个去中心化的系统，并且可能会承载大量的金融资产，所以它可能会面临大量的拜占庭故障而非一般性故障，而中心化的分布式系统则很少遇到拜占庭故障。因此，区块链的共识机制与传统的分布式系统存在较大的差异。 ﻿﻿ 比特币和以太坊采用了工作量证明（Proof-of-Work）机制来保证账本数据的一致性。工作量证明同时也是一种代币分发机制，它通过经济激励的方式来鼓励节点参与区块的构造过程，节点在构造区块的时候需要穷举一个随机数以使得区块符合规定的难度要求，一旦区块链出现分叉，诚实的节点将选择工作量较大的链条，而抛弃工作量较小的。由于假设所有节点都是逐利的，而选择工作量较小的链条就会使自己获得的激励无效，所以最终所有的节点都会是诚实的，从而使每个节点的区块链数据都保持一致。 为了维护这样一个工作量证明机制的区块链，需要全网具备较大规模的算力支撑来保证网络的安全性，否则账本数据就有可能被篡改。此外，即使维持较大的算力来保护网络，工作量证明也无法从根本上保证交易的最终性，比如比特币就经常产生孤立区块（Orphaned Block），而包含在孤立区块中的交易就有可能被撤销。因此比特币通常要求用户等待6个区块的确认，即1小时左右的时间，才能在一个可接受的概率上认为交易已经最终完成，而这个概率也并非是最终性的——你永远也不知道暗中是否有一个远超过全网的庞大算力正在试图撤销以前的交易。而为了维护庞大算力而支出的电力成本也是相当可观，因此，以太坊已经在设计从工作量证明机制切换到其他共识机制上的方案。 Fabric和Onchain DNA都设计了基于拜占庭容错（Byzantine Fault Tolerance）模型的共识机制。节点被分为普通节点和记账节点（Validating Peer），只有记账节点才会参与到区块的构造过程，这种角色的分离使得算法的设计者有机会将运行共识算法的节点数量限定在一个可控的规模内。 拜占庭容错模型对网络中的节点做出了假设和要求：如果共识中有f个节点会出现拜占庭故障，那么至少需要3f+1个节点参与共识才能避免网络出现分叉。在这个模型下，每个区块的构造过程都需要至少2f+1个节点的参与才能够完成，而不像工作量证明机制下每个节点都独立构造区块。一旦区块被构造出来，它就无法被撤销，因为2f+1个诚实的记账节点不会在同一高度对两个不同的区块进行签名认证。 相比较而言，工作量证明机制提供了极高的灵活性和可用性，因为每个节点都独立构造区块而几乎不需要其他节点的参与，节点可以随时加入或者退出网络，即使全网只剩下一个节点，网络还是可以继续工作，但是相应的它也失去了交易的最终性；而拜占庭容错的机制则与之相反，牺牲了一定的灵活性和可用性，记账节点必须在线提供服务而不能退出网络，一旦出现1/3的记账节点停机，那么网络将变得不可用，但它保证了交易的最终性。 智能合约 智能合约是1994年由密码学家尼克萨博（Nick Szabo）首次提出的理念，几乎与互联网同龄。智能合约是指能够自动执行合约条款的计算机程序，在比特币出现以前，因为不存在安全可靠的执行环境，智能合约一直不能够应用到现实中。区块链由于其去中心化、公开透明等特性，天生就可以为智能合约提供可信的执行环境。所以，新型的区块链框架几乎都会内置智能合约的功能。 ﻿﻿ 比特币内置了一套基于栈的脚本执行引擎，可以运行一种独有的脚本代码，用于对交易进行简单的有效性验证，比如签名验证和多重签名验证等。比特币这套脚本语言被有意设计成非图灵完备的，足够简单却也足以应对货币转账的各种需求。 以太坊是首个以图灵完备智能合约为主要功能的区块链，用户可以在以太坊的平台上创建自己的合约，而合约的内容可以包含货币转账在内的任意逻辑。合约使用一种名为Solidity的语言来编写，它是以太坊团队开发的专门用于编写智能合约的一种高级语言，语法类似JavaScript，最终被编译成字节码并运行在EVM（Ethereum Virtual Machine）之中。EVM提供了堆栈、内存、存储器等虚拟硬件，以及一套专用的指令集，所有的代码都在沙盒中运行。它提供了合约间相互调用的能力，甚至可以在运行时动态加载其它合约的代码来执行。这种能力使得以太坊的合约具有非常高的灵活性，但也可能会使合约的功能具有不确定性。 与以太坊自己动手开发语言、虚拟机的思路不同，Fabric选择了使用现有的容器技术来支持智能合约功能。Fabric的智能合约理论上可以用任何语言来编写，这一点对开发者相当友好，他们将无需学习新的语言，并且可以复用现有的业务代码和丰富的开发库，并使用自己熟悉的开发工具。相对的，采用Docker的智能合约架构也有大量的问题：首先，它很难对智能合约的执行流程进行控制，从而无法对其功能进行限制；其次，它无法对合约运行所消耗的计算资源进行精确的评估；此外，运行Docker相对而言是极其耗费资源的操作，这就使得难以在移动设备上运行合约；最后，不同节点的硬件配置、合约引用的开发库等，都有可能会使合约的行为具有很强的不确定性。 Onchain DNA采用了AVM（Antshares Virtual Machine）作为其智能合约功能的底层支持。AVM是一个微核心的、平台无关的智能合约执行环境，它提供了一套包含堆栈操作、流程控制、逻辑运算、算数运算、密码学运算、字符串操作、数组操作的指令集，在硬件方面，它只提供了两个计算堆栈。不过，由于它允许区块链的实现者创建自己的虚拟硬件，并以接口的形式开放给智能合约来使用，使得合约可以在运行时取得平台相关的数据、持久化存储以及访问互联网等。虽然这也有可能会使合约的行为具有不确定性，但区块链的实现者可以通过合理编写虚拟硬件来消除这种不确定性。不过，由于目前尚无与AVM配套的编译器和开发环境，这使得基于AVM进行智能合约开发变得相当困难，开发者不得不使用一种类似汇编的语法来进行合约编写，需要较高的技术能力。 Corda的智能合约功能与其自身一样，都是基于JVM（Java Virtual Machine）的。因此，你可以使用任何与JVM兼容的语言来进行开发，比如Java、Kotlin等。不过，它对JVM进行了一定的改造，使得在其上运行的合约脚本具备确定性。开发的过程大致是这样的：使用Java创建一个实现Contract接口的类（Class），并提供一个名为verify的函数（Function）用于对交易进行验证，该函数接受当前的交易作为参数，如果交易验证失败，则抛出异常（Exception），没有异常就表示验证通过。Corda使用JPA（Java Persistence Architecture）来提供持久化功能，支持SQL语句和常用的数据库，不过需要安装相应的插件，并且由于数据仅存放在合约执行者的节点，因此无法进行全局的持久化存储。 扩展性 区块链的数据结构通常是只能追加记录，而不能修改或删除记录，它真实地记录下完整的历史数据，使得新加入的节点有能力对全网的完整交易历史进行验证，而无需信任其它节点。这种特性带来了去中心化的便利性，但也影响了区块链系统的扩展性，因为区块会无休止地增长，直到塞满整个硬盘。所以有必要提供一种空间回收的机制来应对不断增长的数据。 ﻿﻿ 比特币提出了使用默克尔树（Merkle tree）来存放交易散列的方式，当需要回收硬盘空间时，只需将老旧的交易从默克尔树中剔除即可。一个不含交易信息的区块头大小仅有80字节。按照比特币区块生成的速率为每10分钟一个，那么每一年产生的数据约为4.2MB，即使将全部的区块头存储于内存之中都不是问题。 以太坊、Fabric和Onchain DNA在比特币区块压缩的基础上，又采用了状态快照的方式来节约硬盘空间。具体来说，就是在区块头的结构中不但记录了当前区块所有交易的根散列，还记录了当前区块及过去所有区块中的状态根散列。这些状态包括所有的UTXO、账户余额、合约存储等，所以节点只需要保留最新的区块和完整的状态信息即可。 扩展性的另一个重要指标是交易的吞吐量。决定吞吐量的因素有很多种，如网络结构、加密算法、共识机制等，但最重要的还是交易是否可以被并行验证。如果交易可以被并行验证，那么未来就可以通过简单地增加CPU数量来提高吞吐量。 基于UTXO系统的比特币可以很容易地对交易进行并行验证，因为UTXO之间是没有关联的，对任何一个UTXO的状态改变都可以独立进行且与顺序无关；而基于余额的账户系统则不那么容易实现并行，因为可能会同时发生多笔交易对同一个账户进行资产操作，需要进行一些额外的步骤来处理。举个例子，假设账户中的余额为10元，有两笔针对该账户的交易同时发生，第一笔交易在账户中+5元，而第二笔交易在账户中-11元。那么如果先执行第一笔交易，则两笔都能成功，最终余额为4元；如果先执行第二笔交易，那么它会因余额不足而失败，只有第一笔交易会成功，最终余额为15元。 而对交易的并行验证起到决定性作用的，是智能合约是否具备状态持久化的能力。如果一组合约都是无状态的，那么它们就可以按任意的顺序被执行，不会产生任何副作用；相反，如果合约可以对一组状态产生影响，那么按不同的顺序来执行合约产生的结果也会不同。举个例子，一个计算存款利息的合约，它具有两个子功能：存款和利息结算。假设账户中有100元，利率为10%，现在同时发生了两笔交易，第一笔交易的内容是存入100元，第二笔交易的内容是结算利息。假如第一笔交易先执行，那么最终账户的余额是：100+100）*110%=220元；如果第二笔交易先执行，那么账户余额将是：100*110%+100=210元。由此可见，具备状态持久化能力的智能合约是顺序相关的，因此难以并发验证，特别是如果合约之间还可以相互调用的话，情况将会更加复杂。 目前Fabric没有提出什么好的办法来解决这个问题；而Corda则没有这个问题，因为它的交易本身就不会向全网进行广播，所以只要交易参与者和公证人可以验证即可。以太坊和Onchain DNA的方法都是分区，即将各个合约分到不同的逻辑区中，每个区中的合约都顺序执行，而不同的区之间并行执行。以太坊将合约地址的首个字节作为分区依据，由此产生了256个分区，每个合约都在自己的分区中运行，且只能调用与自己相同分区的合约。但这种做法实际上并不能有效地解决问题，因为总有一些通用的底层合约因为被广泛使用，而把大多数的调用者合约聚集在同一个分区中。 Onchain DNA将合约分为功能合约（Function code）和应用合约（Applicationcode）。其中功能合约专门用于提供可复用的功能函数，被其它合约调用，且必须被声明为无状态，这一点消除了绝大部分的合约聚集现象；而只有应用合约可以保存自己的状态，所以在执行应用合约时，对其采用动态分区方案：在合约被执行之前，会先计算出它们的调用树，并将调用树有交集的合约放在同一个分区中执行。 5大项目独有特性 扩展性 幽灵协议是以太坊对现有POW算法的改进，它提出的动机是当前快速确认的区块链因为区块的高作废率而受到的低安全性困扰。因为区块需要花一定时间扩散至全网，如果矿工A挖出了一个区块然后矿工B碰巧在A的区块传播至B之前挖出了另外一个区块，矿工B的区块就会作废并且没有对网络安全作出贡献。如果A是一个拥有全网30%算力的矿池而B拥有10%的算力，A将面临70%的时间都在产生作废区块的风险而B在90%的时间里都在产生作废区块。通过在计算哪条链“最长”的时候把废区块也包含进来，幽灵协议解决了降低网络安全性的第一个问题；这就是说，不仅一个区块的父区块和更早的祖先块，祖先块的作废的后代区块（以太坊术语中称之为“叔区块”）也被加进来以计算哪一个区块拥有最大的工作量证明。以太坊付给以“叔区块”身份为新块确认作出贡献的废区块87.5%的奖励，把它们纳入计算的“侄子区块”将获得奖励的12.5%。计算表明，带有激励的五层幽灵协议即使在出块时间为15s的情况下也实现了95%以上的效率，而拥有25%算力的矿工从中心化得到的益处小于3%。 国密算法 国密算法是由中国国家密码管理局制定的一系列商用密码学算法，其中包括了对称加密算法SM1，椭圆曲线非对称加密算法SM2，杂凑算法SM3等。通常区块链在使用密码学算法时会采用国际标准，如AES、ECDSA、SHA2等。而国内的金融机构在选用密码学方案的时候，通常会考虑国密算法。Onchain DNA提供了可选的密码学模块，针对不同的应用场景可以选择不同密码学标准，解决了安全性和政策性风险。 跨链互操作 目前，区块链技术正处于百花齐放、百家争鸣的时代，各种不同的区块链纷纷涌现出来，区块链之间的互操作性成为了一个非常重要而又迫切的需求。企业用户可能需要在不同的链之间进行业务迁移；普通用户可能需要在不同的链之间进行资产交换；央行的数字法币可能会需要在各个区块链上流通等。Onchain DNA提供了一种跨链互操作协议，通过这种跨链协议，用户可以跨越不同的区块链进行资产交易、合约执行等操作，并保证该操作在各个区块链上的事务一致性。 无链结构 正如Corda在白皮书中所宣称的那样，它没有链式结构，交易也不向全网进行广播，而只在交易的参与者和公证人之间发送。因此，数据只有“需要访问的人”才能访问，避免了隐私泄露的问题。由于没有全局的链式结构，每个节点只存放和自己有关的交易，而无需存放全网的所有交易，大大的节省了空间。 总结 本文从多个维度比较并讨论了当前各个区块链框架的特点和功能，并阐述了它们在各方面的优缺点，以及在应用领域上的适用性和局限性。 比特币虽然是区块链技术的原型，具有非常重要的地位，但由于其技术架构的局限性，如挖矿、非图灵完备等，很难应用到复杂的业务场景中去，但非常适合用于货币发行。 以太坊虽然也采用挖矿的形式，但其幽灵协议提高了挖矿效率，新的共识算法也在开发中。以太坊还开发了较多基于密码学的隐私保护方案，比如环签名混币方案，非常适合于创建去中心化自治组织(Decentralized Autonomous Organization)。 Fabric和Onchain DNA的定位都是企业级区块链解决方案，适合用于定制各种特定业务的联盟链，包括金融领域的应用场景。区别在于Fabric以智能合约为导向，而Onchain DNA则以数字资产为导向；前者更适合开发复杂的自定义业务流程，而后者则更适合于构建以数字资产为核心的金融业务系统或权益登记流转系统，且具有较强的扩展性。 Corda的定位是用于银行间业务的“分布式数据库”，它摒弃了区块和链式结构，更好地把参与者的业务数据区隔开来；但引入了公证人的角色，网络结构较为固定不具灵活性和扩展性，且与现有的银行体系的运作方式差别不大。 注：本文源自张铮文2017年初的一篇技术文章。 作者简介： 张铮文，分布科技CTO &amp; Founder, 小蚁核心开发者。区块链技术和计算机安全专家，CISA信息系统审计师。具备区块链底层协议架构和开发能力，dBFT共识机制的作者，独立原创实现了小蚁全部的核心代码。创立小蚁前，曾在盛大游戏、火币网等公司任职，从事信息安全和数字货币研发工作。 热门文章 对话元道：通证经济需要“互链网”，“互链网”需要细腰 今天，这几位区块链大咖旗帜鲜明地亮出“通证派”，原来这才是他们期盼中的未来交易的模样... 与元道对话三：区块链经济正在进行“动力切换” 锐评：泡沫中的token和被冷落的联盟链 对话元道二：通证视角下的区块链创新路线 听听Vitalik对token设计的看法 了解更多区块链技术及应用内容，敬请关注： 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/02/01/c36002cde4df6c2ba0070245e6238703.html","headline":"比特币、以太坊、Fabric…你知道它们的优缺点吗？不懂的进","dateModified":"2018-02-01T00:00:00+08:00","datePublished":"2018-02-01T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/02/01/c36002cde4df6c2ba0070245e6238703.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>比特币、以太坊、Fabric…你知道它们的优缺点吗？不懂的进</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="article-copyright">
   版权声明：本文为博主原创文章，未经博主允许不得转载。 https://blog.csdn.net/Blockchain_lemon/article/details/79236199 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css"> 
 <div class="htmledit_views"> 
  <div class="rich_media_content" id="js_content"> 
   <p style="margin-left:8px;text-align:left;line-height:1.75em;"><span></span></p>
   <blockquote>
    <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;color:rgb(0,122,170);">本文将对目前市场上几个典型的区块链框架进行横向对比，看看它们都有哪些特点，以及它们之间到底有什么区别。为了保持对比的客观与公正，本文将只针对开源的区块链框架进行讨论。</span></strong></p>
   </blockquote>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p><img style="visibility:visible !important;" src="https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/trm5VMeFp9mtWEUfzrQBKZ20Dvs4M7icq8icolkATl1EL1KBCG3MCzPIWbCGzicOM3bCFWQk05iavoibt3JhGmKTBUg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1" alt="640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1"></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><strong style="color:rgb(62,62,62);font-size:16px;letter-spacing:.5px;"><span style="font-size:15px;color:rgb(136,136,136);">作者 | 张铮文</span></strong></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="letter-spacing:.5px;font-size:20px;color:rgb(0,122,170);">时</span></strong><span style="font-size:15px;letter-spacing:.5px;">常听人们谈起区块链，从2009年比特币诞生至今，各式各样的区块链系统或基于区块链的应用不断被开发出来，并被应用到大量的场景中，而区块链技术本身也在不停地变化和改进。</span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">区块链又被称为分布式账本，与之对应的则是中心化账本，比如银行。与中心化账本不同的是，分布式账本依靠的是将账本数据冗余存储在所有参与节点中来保证账本的安全性。简单地说，区块链会用到三种底层技术：<strong>点对点网络、密码学和分布式一致性算法</strong>。而通常，区块链系统还会“免费附赠”一种被称为智能合约的功能。智能合约虽然不是区块链系统的必要组成部分，但由于区块链天生所具备的去中心化特点，使它可以很好地为智能合约提供可信的计算环境。</span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">为了适应不同场景的需求，区块链系统在实际应用的过程中往往会需要进行各种改造，以满足特定业务的要求，比如身份认证、共识机制、密钥管理、吞吐量、响应时间、隐私保护、监管要求等。而实际应用区块链系统的公司往往没有进行这种改造的能力，于是市场上慢慢出现了一些用于定制专用区块链系统的框架，采用这些框架就可以很方便地定制出适用于企业自身业务需求的区块链系统。<span style="font-size:15px;letter-spacing:.5px;">本文将对目前市场上几个典型的区块链框架进行横向对比。</span></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>比特币</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">比特币（Bitcoin）源自中本聪（Satoshi Nakamoto）在2008年发表的一篇论文《比特币：一种点对点的电子现金系统》（Bitcoin：A Peer-to-PeerElectronic Cash System），文中描述了一种被他称为“比特币”的电子货币及其算法。在之后的几年里，比特币不断成长和成熟，而它的底层技术也逐渐被人们认识并抽象出来，这就是区块链技术。比特币作为区块链的鼻祖，在区块链的大家族中具有举足轻重的地位，基于比特币技术开发出的山寨币（Altcoins）的数量有如天上繁星，难以计数。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">中本聪设计比特币的目的，就是希望能够实现一种完全基于点对点网络的电子现金系统，使得在线支付能够直接由一方发起并支付给另外一方，中间不需要通过任何的中介机构。总结来说，他希望比特币能够实现以下这些设计目标：</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <ol class="list-paddingleft-2" style="list-style-type:decimal;">
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="font-size:15px;letter-spacing:.5px;">不需要中央机构就可以发行货币</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">不需要中介机构就可以支付</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">保持使用者匿名</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">交易无法被撤销</span></strong></span></p></li>
   </ol>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">从电子现金系统的角度来看，以上这些目标在比特币中基本都得到了实现，但是依然有一些技术问题有待解决，比如延展性攻击、区块容量限制、区块分叉、扩展性等。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">在应用场景方面，目前大量的数字货币项目都是基于比特币架构来设计的</span></strong><span style="font-size:15px;letter-spacing:.5px;">，此外还有一些比较实际的应用案例，比如彩色币、tØ等。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">彩色币（Coloredcoin），通过仔细跟踪一些特定比特币的来龙去脉，可以将它们与其他的比特币区分开来，这些特定的比特币就叫作彩色币。它们具有一些特殊的属性，从而具有与比特币面值无关的价值，利用彩色币的这种特性，开发者可以在比特币网络上创建其他的数字资产。彩色币本身就是比特币，存储和转移不需要第三方，可以利用已经存在的比特币基础网络。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">tØ是比特币区块链在金融领域的应用，是美国在线零售商Overstock推出的基于区块链的私有和公有股权交易平台。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>以太坊</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">以太坊（Ethereum）的目标是提供一个带有图灵完备语言的区块链，用这种语言可以创建合约来编写任意状态转换功能。用户只要简单地用几行代码来实现逻辑，就能够创建一个基于区块链的应用程序，并应用于货币以外的场景。以太坊的设计思想是不直接“支持”任何应用，但图灵完备的编程语言意味着理论上任意合约逻辑和任何类型的应用都可以被创建出来。总结来说，以太坊在比特币的功能之外，还有以下几个设计目标：</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <ol class="list-paddingleft-2" style="list-style-type:decimal;">
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="font-size:15px;letter-spacing:.5px;">图灵完备的合约语言</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">内置的持久化状态存储</span></strong></span></p></li>
   </ol>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">目前基于以太坊的合约项目已达到数百个，比较有名的有Augur、TheDAO、Digix、FirstBlood等</span></strong><span style="font-size:15px;letter-spacing:.5px;">。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Augur是一个去中心化的预测市场平台，基于以太坊区块链技术。用户可以用数字货币进行预测和下注，依靠群众的智慧来预判事件的发展结果，可以有效地消除对手方风险和服务器的中心化风险。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">限于篇幅，基于以太坊智能合约平台的项目就不多介绍了。基于以太坊的代码进行改造的区块链项目也有不少，但几乎都是闭源项目，只能依靠一些公开的特性来推断，所以就不在本文展开讨论了。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>Fabric</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Fabric是由IBM和DAH主导开发的一个区块链框架，是超级帐本的项目成员之一。它的功能与以太坊类似，也是一个分布式的智能合约平台。但与以太坊和比特币不同的是，它从一开始就是一个框架，而不是一个公有链，也没有内置的代币（Token）。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">超级账本（Hyperledger）是Linux基金会于2015年发起的推进区块链技术和标准的开源项目，加入成员包括：荷兰银行（ABN AMRO）、埃森哲（Accenture）等十几个不同利益体，目标是让成员共同合作，共建开放平台，满足来自多个不同行业各种用户案例，并简化业务流程。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">作为一个区块链框架，Fabric采用了松耦合的设计，将共识机制、身份验证等组件模块化，使之在应用过程中可以方便地根据应用场景来选择相应的模块</span></strong><span style="font-size:15px;letter-spacing:.5px;">。除此之外，Fabric还采用了容器技术，将智能合约代码（Chaincode）放在Docker中运行，从而使智能合约可以用几乎任意的高级语言来编写。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">以下是Fabric的一些设计目标：</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <ol class="list-paddingleft-2" style="list-style-type:decimal;">
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="font-size:15px;letter-spacing:.5px;">模块化设计，组件可替换</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">运行于Docker的智能合约</span></strong></span></p></li>
   </ol>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">目前已经有不少采用Fabric架构进行开发的概念验证（POC）项目在实施过程中，其中不乏一些金融机构做出的尝试，不过由于项目刚刚起步，还没有比较成熟的落地应用。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>Onchain DNA</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Onchain DNA（Onchain Distributed Networks Architecture），是由总部位于上海的区块链创业公司“分布科技”开发的区块链架构，可以同时支持公有链、联盟链、私有链等不同应用类型和场景，并快速与业务系统集成。分布科技同样也是超级账本的成员之一。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">与以太坊、Fabric不同的是，Onchain DNA在系统底层实现了对多种数字资产的支持，用户可以直接在链上创建自己的资产类型，并用智能合约来控制它的发行和交易逻辑</span></strong><span style="font-size:15px;letter-spacing:.5px;">。对于绝大部分的区块链应用场景，数字资产是必不可少的，而为每一种数字资产都开发一套基于智能合约的业务流程非常浪费且低效。因此，由区块链底层提供直接的数字资产功能十分必要。而对于那些完全不需要数字资产的应用场景，同样可以基于Onchain DNA提供的智能合约功能来编写任意的自定义逻辑来实现。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Onchain DNA的设计目标主要有以下几点：</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <ol class="list-paddingleft-2" style="list-style-type:decimal;">
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="font-size:15px;letter-spacing:.5px;">多种数字资产的底层支持</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">图灵完备的智能合约和持久化状态</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">跨链互操作性</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">交易的最终性</span></strong></span></p><p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p></li>
   </ol>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">目前已有不少金融机构采用Onchain DNA架构来进行区块链概念验证产品的开发，如银行、券商、支付、登记结算机构等。除此之外，还有一些已经落地的区块链项目，如小蚁、法链等。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">小蚁（Antshares）是一个定位于资产数字化的公有链，将实体世界的资产和权益进行数字化，通过点对点网络进行登记发行、转让交易、清算交割等金融业务的去中心化网络协议。它采用社区化开发的模式，在架构上与Onchain DNA保持一致，从而可以与任何基于Onchain DNA的区块链系统发生跨链互操作。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">法链是全球第一个大规模商用的法律存证区块链，一个底层基于Onchain DNA区块链技术，并由多个机构参与建立和运营的证据记录和保存系统。该系统没有中心控制点，且数据一旦录入，单个机构或节点无法篡改，从而满足司法存证的要求。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>Corda</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Corda是由一家总部位于纽约的区块链创业公司R3CEV开发的，由其发起的R3区块链联盟，至今已吸引了数十家巨头银行的参与，其中包括富国银行、美国银行、纽约梅隆银行、花旗银行、德国商业银行、德意志银行、汇丰银行、三菱UFJ金融集团、摩根士丹利、澳大利亚国民银行、加拿大皇家银行、瑞典北欧斯安银行（SEB）、法国兴业银行等。从R3成员的组成上也可以看出，<strong>Corda是一款专门用于银行与银行间业务的技术架构。尽管R3声称Corda不是区块链，但它具备区块链的一些重要特性。</strong></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Corda由Java和Kotlin开发，并在其各项功能中充分依赖于Java，比如智能合约、数据访问接口等。Corda的设计目标主要是：</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <ol class="list-paddingleft-2" style="list-style-type:decimal;">
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="font-size:15px;letter-spacing:.5px;">没有全局账本</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">由公证人（Notaries）来解决交易的多重支付问题</span></strong></span></p></li>
    <li><p style="line-height:1.75em;"><span style="color:rgb(0,122,170);"><strong><span style="color:rgb(0,122,170);font-size:15px;letter-spacing:.5px;">只有交易的参与者和公证人才能看到交易</span></strong></span></p></li>
   </ol>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">为此，Corda的所有交易都不会向全网进行广播，而且所有的节点都是直接通信，没有P2P网络。这一点导致了其网络规模会被限制在一个较小的规模内，无法形成大规模的联盟链，适用的业务场景比较狭窄。</span></p>
   <p style="line-height:1.75em;"><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">接下来，我们将针对前文中所提到的这些区块链框架进行一系列的技术对比，并从多个维度展开讨论它们的区别与相似之处。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>数字资产</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">﻿</span><img class="gallery-image img_loading" width="471" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/trm5VMeFp9mtWEUfzrQBKZ20Dvs4M7icqOymF4iaeRx72LW4ianBicFz86jFNJKaqDsiaTSM7V637qwDSGUKVo8QW8A/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"><span style="font-size:15px;letter-spacing:.5px;">﻿</span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">区块链的内置代币通常是一种经济激励模型和防止垃圾交易的手段。<strong>比特币天生就有且只有一种内置代币，所以在比特币系统中所有的“交易”本质上都是转账行为</strong>，除非通过外部的协议层来给比特币增加额外的数字资产。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">以太坊和Onchain DNA具有内置代币，它们的作用除了以上提到的经济激励和防止垃圾交易之外，还为系统内置功能提供了一个收费的渠道</span></strong><span style="font-size:15px;letter-spacing:.5px;">。比如以太坊的智能合约运行需要消耗GAS，而Onchain DNA的数字资产创建也需要消耗一定的代币（可选）。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">以太坊和Fabric没有内置的多种数字资产支持，而是通过智能合约来实现相应的功能</span></strong><span style="font-size:15px;letter-spacing:.5px;">。这种方式的好处在于，系统设计可以做到非常简洁，而且资产的行为可以任意指定，自由度极高。然而这样的设计也会带来一系列的负面影响，比如所有的资产创建者不得不自己编写重复的业务逻辑，而用户也没有办法通过统一的方式去操作自己的资产。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">相比之下，Onchain DNA和Corda采用了在底层支持多种数字资产的方式，让资产创建者可以方便地创建自己的资产类型，而用户也可以在同一个客户端中管理所有的资产。对于逻辑更加复杂一点的业务场景来说，他们同样可以利用智能合约来强化资产的功能，或者创建一种与资产无关的业务逻辑。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>账户系统</strong></span></p>
   <p style="line-height:1.75em;"><br></p>
   <p style="line-height:1.75em;"><img class="gallery-image img_loading" width="471" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/trm5VMeFp9mtWEUfzrQBKZ20Dvs4M7icqWNgpRdicvCX4jAQr3TTJzvxDrJo38q3aiabQjBqK4BQdb4DB70aLVRzw/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p style="line-height:1.75em;"><br></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">UTXO（Unspent Transaction Output）是这样一种机制：每一枚数字货币都会被登记在一个账户的所有权之下，一枚数字货币有两种状态，即要么还没有被花费，要么已经被花费。当需要使用一枚数字货币的时候，就将它的状态标记为已经花费，并创造一枚新的与之等额的数字货币，将它的所有权登记到新的账户之下</span></strong><span style="font-size:15px;letter-spacing:.5px;">。在这个过程中，被标记为已花费的数字货币就被称为交易的输入，而创造出来的新的数字货币被称为交易的输出，在一笔交易中，可以包含多个输入和多个输出，但是输入之和与输出之和必须相等。计算一个账户的余额时，只要将所有登记在该账户下的数字货币的面额相加即可。</span></p>
   <p style="line-height:1.75em;"><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">比特币和Corda就采用了UTXO这样一种账户机制，而</span><strong><span style="font-size:15px;letter-spacing:.5px;">以太坊则采用了更加直观的余额机制：每个账户都有一个状态，状态中直接记录了账户当前的余额，转账的逻辑就是从一个账户中减去一部分金额，并在另一个账户中加上相应的金额，减去的部分和加上的部分必须相等</span></strong><span style="font-size:15px;letter-spacing:.5px;">。Onchain DNA在账户机制上同时兼容这两种模式。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">那么UTXO模式和余额模式，究竟有什么区别呢？<strong>UTXO最大的好处就是，基于UTXO的交易可以并行验证且任意排序，因为所有的UTXO之间都是没有关联的，这对区块链未来的扩展性有很大的帮助，而基于余额的设计就没有这个优势了</strong>。反过来，余额设计的优点是设计思想非常简洁和直观，便于程序实现，特别是在智能合约中，要处理UTXO的状态是非常困难的。这也是为什么以智能合约为主要功能的以太坊选择余额设计的原因，而比特币、OnchainDNA、Corda这些以数字资产为核心的架构则更倾向于UTXO设计。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">关于身份认证，比特币和以太坊基本没有身份认证的设计，原因很简单，因为这两者的设计思想都是强调隐私和匿名，反对监管和中心化，而身份认证就势必要引入一些中心或者弱化的中心机构。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Fabric、Onchain DNA和Corda不约而同地选择了采用数字证书来对用户身份进行认证，原因在于这三者都有应用于现有金融系统的设计目标，而金融系统必然要考虑合规化并接受监管，此外现有的金融系统已经大范围地采用数字证书方案，这样便可以和区块链系统快速集成。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>共识机制</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">共识机制是分布式系统的核心算法，因为分布式系统的数据分散在各个参与节点中，这些分散的数据必须通过一种算法来保持一致性，否则系统将无法正常工作。与传统的分布式系统不同，区块链是一个去中心化的系统，并且可能会承载大量的金融资产，所以它可能会面临大量的拜占庭故障而非一般性故障，而中心化的分布式系统则很少遇到拜占庭故障。因此，区块链的共识机制与传统的分布式系统存在较大的差异。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">﻿</span><span style="font-size:15px;letter-spacing:.5px;">﻿</span><img class="gallery-image img_loading" width="471" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/trm5VMeFp9mtWEUfzrQBKZ20Dvs4M7icqDQxaicOSibMaXfBNa2gVH2eHR2IBqoVXlHxDcNvibbmG2iaxicDVNVbgiarA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">比特币和以太坊采用了工作量证明（Proof-of-Work）机制来保证账本数据的一致性。</span></strong><span style="font-size:15px;letter-spacing:.5px;">工作量证明同时也是一种代币分发机制，它通过经济激励的方式来鼓励节点参与区块的构造过程，节点在构造区块的时候需要穷举一个随机数以使得区块符合规定的难度要求，一旦区块链出现分叉，诚实的节点将选择工作量较大的链条，而抛弃工作量较小的。由于假设所有节点都是逐利的，而选择工作量较小的链条就会使自己获得的激励无效，所以最终所有的节点都会是诚实的，从而使每个节点的区块链数据都保持一致。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">为了维护这样一个工作量证明机制的区块链，需要全网具备较大规模的算力支撑来保证网络的安全性，否则账本数据就有可能被篡改。此外，即使维持较大的算力来保护网络，工作量证明也无法从根本上保证交易的最终性，比如比特币就经常产生孤立区块（Orphaned Block），而包含在孤立区块中的交易就有可能被撤销。因此比特币通常要求用户等待6个区块的确认，即1小时左右的时间，才能在一个可接受的概率上认为交易已经最终完成，而这个概率也并非是最终性的——你永远也不知道暗中是否有一个远超过全网的庞大算力正在试图撤销以前的交易。而为了维护庞大算力而支出的电力成本也是相当可观，因此，以太坊已经在设计从工作量证明机制切换到其他共识机制上的方案。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">Fabric和Onchain DNA都设计了基于拜占庭容错</span></strong><span style="font-size:15px;letter-spacing:.5px;">（Byzantine Fault Tolerance）<strong>模型的共识机制</strong>。节点被分为普通节点和记账节点（Validating Peer），只有记账节点才会参与到区块的构造过程，这种角色的分离使得算法的设计者有机会将运行共识算法的节点数量限定在一个可控的规模内。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">拜占庭容错模型对网络中的节点做出了假设和要求：如果共识中有f个节点会出现拜占庭故障，那么至少需要3f+1个节点参与共识才能避免网络出现分叉。在这个模型下，每个区块的构造过程都需要至少2f+1个节点的参与才能够完成，而不像工作量证明机制下每个节点都独立构造区块。一旦区块被构造出来，它就无法被撤销，因为2f+1个诚实的记账节点不会在同一高度对两个不同的区块进行签名认证。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">相比较而言，<strong>工作量证明机制提供了极高的灵活性和可用性，因为每个节点都独立构造区块而几乎不需要其他节点的参与，节点可以随时加入或者退出网络，即使全网只剩下一个节点，网络还是可以继续工作，但是相应的它也失去了交易的最终性；而拜占庭容错的机制则与之相反，牺牲了一定的灵活性和可用性，记账节点必须在线提供服务而不能退出网络，一旦出现1/3的记账节点停机，那么网络将变得不可用，但它保证了交易的最终性</strong>。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;"></span></strong></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><strong><span style="color:#007aaa;">智能合约</span></strong></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">智能合约是1994年由密码学家尼克萨博（Nick Szabo）首次提出的理念，几乎与互联网同龄。智能合约是指能够自动执行合约条款的计算机程序，在比特币出现以前，因为不存在安全可靠的执行环境，智能合约一直不能够应用到现实中。区块链由于其去中心化、公开透明等特性，天生就可以为智能合约提供可信的执行环境。所以，新型的区块链框架几乎都会内置智能合约的功能。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">﻿</span><img class="gallery-image img_loading" width="471" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/trm5VMeFp9mtWEUfzrQBKZ20Dvs4M7icqIVfFeeVhjUia0f7icJNxNwibUrbk2FTZN0LdffpNfVfkP9UhJ0AxVpOHg/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"><span style="font-size:15px;letter-spacing:.5px;">﻿</span></p>
   <p style="line-height:1.75em;"><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">比特币内置了一套基于栈的脚本执行引擎，可以运行一种独有的脚本代码，用于对交易进行简单的有效性验证，比如签名验证和多重签名验证等。<strong>比特币这套脚本语言被有意设计成非图灵完备的，足够简单却也足以应对货币转账的各种需求</strong>。</span><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">以太坊是首个以图灵完备智能合约为主要功能的区块链，用户可以在以太坊的平台上创建自己的合约，而合约的内容可以包含货币转账在内的任意逻辑</span></strong><span style="font-size:15px;letter-spacing:.5px;">。合约使用一种名为Solidity的语言来编写，它是以太坊团队开发的专门用于编写智能合约的一种高级语言，语法类似JavaScript，最终被编译成字节码并运行在EVM（Ethereum Virtual Machine）之中。EVM提供了堆栈、内存、存储器等虚拟硬件，以及一套专用的指令集，所有的代码都在沙盒中运行。它提供了合约间相互调用的能力，甚至可以在运行时动态加载其它合约的代码来执行。这种能力使得以太坊的合约具有非常高的灵活性，但也可能会使合约的功能具有不确定性。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">与以太坊自己动手开发语言、虚拟机的思路不同，<strong>Fabric选择了使用现有的容器技术来支持智能合约功能</strong>。Fabric的智能合约理论上可以用任何语言来编写，这一点对开发者相当友好，他们将无需学习新的语言，并且可以复用现有的业务代码和丰富的开发库，并使用自己熟悉的开发工具。相对的，采用Docker的智能合约架构也有大量的问题：首先，它很难对智能合约的执行流程进行控制，从而无法对其功能进行限制；其次，它无法对合约运行所消耗的计算资源进行精确的评估；此外，运行Docker相对而言是极其耗费资源的操作，这就使得难以在移动设备上运行合约；最后，不同节点的硬件配置、合约引用的开发库等，都有可能会使合约的行为具有很强的不确定性。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">Onchain DNA采用了AVM（Antshares Virtual Machine）作为其智能合约功能的底层支持</span></strong><span style="font-size:15px;letter-spacing:.5px;">。AVM是一个微核心的、平台无关的智能合约执行环境，它提供了一套包含堆栈操作、流程控制、逻辑运算、算数运算、密码学运算、字符串操作、数组操作的指令集，在硬件方面，它只提供了两个计算堆栈。不过，由于它允许区块链的实现者创建自己的虚拟硬件，并以接口的形式开放给智能合约来使用，使得合约可以在运行时取得平台相关的数据、持久化存储以及访问互联网等。虽然这也有可能会使合约的行为具有不确定性，但区块链的实现者可以通过合理编写虚拟硬件来消除这种不确定性。不过，由于目前尚无与AVM配套的编译器和开发环境，这使得基于AVM进行智能合约开发变得相当困难，开发者不得不使用一种类似汇编的语法来进行合约编写，需要较高的技术能力。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">Corda的智能合约功能与其自身一样，都是基于JVM</span></strong><span style="font-size:15px;letter-spacing:.5px;">（Java Virtual Machine）的。因此，你可以使用任何与JVM兼容的语言来进行开发，比如Java、Kotlin等。不过，它对JVM进行了一定的改造，使得在其上运行的合约脚本具备确定性。开发的过程大致是这样的：使用Java创建一个实现Contract接口的类（Class），并提供一个名为verify的函数（Function）用于对交易进行验证，该函数接受当前的交易作为参数，如果交易验证失败，则抛出异常（Exception），没有异常就表示验证通过。Corda使用JPA（Java Persistence Architecture）来提供持久化功能，支持SQL语句和常用的数据库，不过需要安装相应的插件，并且由于数据仅存放在合约执行者的节点，因此无法进行全局的持久化存储。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>扩展性</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">区块链的数据结构通常是只能追加记录，而不能修改或删除记录，它真实地记录下完整的历史数据，使得新加入的节点有能力对全网的完整交易历史进行验证，而无需信任其它节点。这种特性带来了去中心化的便利性，但也影响了区块链系统的扩展性，因为区块会无休止地增长，直到塞满整个硬盘。所以有必要提供一种空间回收的机制来应对不断增长的数据。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">﻿</span><img class="gallery-image img_loading" width="471" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/trm5VMeFp9mtWEUfzrQBKZ20Dvs4M7icqlETaicgPr0GYaRBjH6SDFXoiahQ5vLv6Nr3eJxhOiaK4QE9bja3Bt4LiaQ/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"><span style="font-size:15px;letter-spacing:.5px;">﻿</span></p>
   <p style="line-height:1.75em;"><br></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">比特币提出了使用默克尔树（Merkle tree）来存放交易散列的方式</span></strong><span style="font-size:15px;letter-spacing:.5px;">，当需要回收硬盘空间时，只需将老旧的交易从默克尔树中剔除即可。一个不含交易信息的区块头大小仅有80字节。按照比特币区块生成的速率为每10分钟一个，那么每一年产生的数据约为4.2MB，即使将全部的区块头存储于内存之中都不是问题。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">以太坊、Fabric和Onchain DNA在比特币区块压缩的基础上，又采用了状态快照的方式来节约硬盘空间</span></strong><span style="font-size:15px;letter-spacing:.5px;">。具体来说，就是在区块头的结构中不但记录了当前区块所有交易的根散列，还记录了当前区块及过去所有区块中的状态根散列。这些状态包括所有的UTXO、账户余额、合约存储等，所以节点只需要保留最新的区块和完整的状态信息即可。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">扩展性的另一个重要指标是交易的吞吐量。决定吞吐量的因素有很多种，如网络结构、加密算法、共识机制等，但最重要的还是交易是否可以被并行验证。如果交易可以被并行验证，那么未来就可以通过简单地增加CPU数量来提高吞吐量。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">基于UTXO系统的比特币可以很容易地对交易进行并行验证，因为UTXO之间是没有关联的</span></strong><span style="font-size:15px;letter-spacing:.5px;">，对任何一个UTXO的状态改变都可以独立进行且与顺序无关；而基于余额的账户系统则不那么容易实现并行，因为可能会同时发生多笔交易对同一个账户进行资产操作，需要进行一些额外的步骤来处理。举个例子，假设账户中的余额为10元，有两笔针对该账户的交易同时发生，第一笔交易在账户中+5元，而第二笔交易在账户中-11元。那么如果先执行第一笔交易，则两笔都能成功，最终余额为4元；如果先执行第二笔交易，那么它会因余额不足而失败，只有第一笔交易会成功，最终余额为15元。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">而对交易的并行验证起到决定性作用的，是智能合约是否具备状态持久化的能力。如果一组合约都是无状态的，那么它们就可以按任意的顺序被执行，不会产生任何副作用；相反，如果合约可以对一组状态产生影响，那么按不同的顺序来执行合约产生的结果也会不同。举个例子，一个计算存款利息的合约，它具有两个子功能：存款和利息结算。假设账户中有100元，利率为10%，现在同时发生了两笔交易，第一笔交易的内容是存入100元，第二笔交易的内容是结算利息。假如第一笔交易先执行，那么最终账户的余额是：100+100）*110%=220元；如果第二笔交易先执行，那么账户余额将是：100*110%+100=210元。由此可见，具备状态持久化能力的智能合约是顺序相关的，因此难以并发验证，特别是如果合约之间还可以相互调用的话，情况将会更加复杂。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;">目前Fabric没有提出什么好的办法来解决这个问题；而Corda则没有这个问题，因为它的交易本身就不会向全网进行广播，所以只要交易参与者和公证人可以验证即可。以太坊和Onchain DNA的方法都是分区，即将各个合约分到不同的逻辑区中，每个区中的合约都顺序执行，而不同的区之间并行执行</span></strong><span style="font-size:15px;letter-spacing:.5px;">。以太坊将合约地址的首个字节作为分区依据，由此产生了256个分区，每个合约都在自己的分区中运行，且只能调用与自己相同分区的合约。但这种做法实际上并不能有效地解决问题，因为总有一些通用的底层合约因为被广泛使用，而把大多数的调用者合约聚集在同一个分区中。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Onchain DNA将合约分为功能合约（Function code）和应用合约（Applicationcode）。其中功能合约专门用于提供可复用的功能函数，被其它合约调用，且必须被声明为无状态，这一点消除了绝大部分的合约聚集现象；而只有应用合约可以保存自己的状态，所以在执行应用合约时，对其采用动态分区方案：在合约被执行之前，会先计算出它们的调用树，并将调用树有交集的合约放在同一个分区中执行。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span><br></p>
   <p style="line-height:1.75em;text-align:left;"><strong><span style="font-size:15px;letter-spacing:.5px;">5大项目独有特性</span></strong></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>扩展性</strong></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">幽灵协议是以太坊对现有POW算法的改进，它提出的动机是当前快速确认的区块链因为区块的高作废率而受到的低安全性困扰。因为区块需要花一定时间扩散至全网，如果矿工A挖出了一个区块然后矿工B碰巧在A的区块传播至B之前挖出了另外一个区块，矿工B的区块就会作废并且没有对网络安全作出贡献。如果A是一个拥有全网30%算力的矿池而B拥有10%的算力，A将面临70%的时间都在产生作废区块的风险而B在90%的时间里都在产生作废区块。通过在计算哪条链“最长”的时候把废区块也包含进来，幽灵协议解决了降低网络安全性的第一个问题；这就是说，不仅一个区块的父区块和更早的祖先块，祖先块的作废的后代区块（以太坊术语中称之为“叔区块”）也被加进来以计算哪一个区块拥有最大的工作量证明。以太坊付给以“叔区块”身份为新块确认作出贡献的废区块87.5%的奖励，把它们纳入计算的“侄子区块”将获得奖励的12.5%。计算表明，带有激励的五层幽灵协议即使在出块时间为15s的情况下也实现了95%以上的效率，而拥有25%算力的矿工从中心化得到的益处小于3%。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>国密算法</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">国密算法是由中国国家密码管理局制定的一系列商用密码学算法，其中包括了对称加密算法SM1，椭圆曲线非对称加密算法SM2，杂凑算法SM3等。通常区块链在使用密码学算法时会采用国际标准，如AES、ECDSA、SHA2等。而国内的金融机构在选用密码学方案的时候，通常会考虑国密算法。Onchain DNA提供了可选的密码学模块，针对不同的应用场景可以选择不同密码学标准，解决了安全性和政策性风险。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>跨链互操作</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">目前，区块链技术正处于百花齐放、百家争鸣的时代，各种不同的区块链纷纷涌现出来，区块链之间的互操作性成为了一个非常重要而又迫切的需求。企业用户可能需要在不同的链之间进行业务迁移；普通用户可能需要在不同的链之间进行资产交换；央行的数字法币可能会需要在各个区块链上流通等。Onchain DNA提供了一种跨链互操作协议，通过这种跨链协议，用户可以跨越不同的区块链进行资产交易、合约执行等操作，并保证该操作在各个区块链上的事务一致性。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="color:#007aaa;"><strong>无链结构</strong></span></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">正如Corda在白皮书中所宣称的那样，它没有链式结构，交易也不向全网进行广播，而只在交易的参与者和公证人之间发送。因此，数据只有“需要访问的人”才能访问，避免了隐私泄露的问题。由于没有全局的链式结构，每个节点只存放和自己有关的交易，而无需存放全网的所有交易，大大的节省了空间。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><strong><span style="font-size:15px;letter-spacing:.5px;"></span></strong></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><strong><span style="color:#007aaa;">总结</span></strong></p>
   <p><br></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">本文从多个维度比较并讨论了当前各个区块链框架的特点和功能，并阐述了它们在各方面的优缺点，以及在应用领域上的适用性和局限性。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">比特币虽然是区块链技术的原型，具有非常重要的地位，但由于其技术架构的局限性，如挖矿、非图灵完备等，很难应用到复杂的业务场景中去，但非常适合用于货币发行。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">以太坊虽然也采用挖矿的形式，但其幽灵协议提高了挖矿效率，新的共识算法也在开发中。以太坊还开发了较多基于密码学的隐私保护方案，比如环签名混币方案，非常适合于创建去中心化自治组织(Decentralized Autonomous Organization)。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Fabric和Onchain DNA的定位都是企业级区块链解决方案，适合用于定制各种特定业务的联盟链，包括金融领域的应用场景。区别在于Fabric以智能合约为导向，而Onchain DNA则以数字资产为导向；前者更适合开发复杂的自定义业务流程，而后者则更适合于构建以数字资产为核心的金融业务系统或权益登记流转系统，且具有较强的扩展性。</span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;"><br></span></p>
   <p style="line-height:1.75em;"><span style="font-size:15px;letter-spacing:.5px;">Corda的定位是用于银行间业务的“分布式数据库”，它摒弃了区块和链式结构，更好地把参与者的业务数据区隔开来；但引入了公证人的角色，网络结构较为固定不具灵活性和扩展性，且与现有的银行体系的运作方式差别不大。</span></p>
   <p><br></p>
   <p>注：本文源自张铮文2017年初的一篇技术文章。</p>
   <p><br></p>
   <blockquote>
    <p><span style="color:rgb(136,136,136);">作者简介：</span></p>
    <p><span style="color:rgb(136,136,136);"><br></span></p>
    <p><span style="color:rgb(136,136,136);">张铮文，分布科技CTO &amp; Founder, 小蚁核心开发者。区块链技术和计算机安全专家，CISA信息系统审计师。具备区块链底层协议架构和开发能力，dBFT共识机制的作者，独立原创实现了小蚁全部的核心代码。创立小蚁前，曾在盛大游戏、火币网等公司任职，从事信息安全和数字货币研发工作。</span></p>
   </blockquote>
   <p><br></p>
   <p style="margin-left:8px;min-height:1em;color:rgb(62,62,62);font-size:16px;line-height:1.75em;"><span style="color:rgb(136,136,136);font-size:14px;letter-spacing:.5px;"></span></p>
   <p style="min-height:1em;line-height:22px;font-size:18px;"><span style="letter-spacing:.5px;">热门文章</span></p>
   <p style="min-height:1em;color:rgb(62,62,62);font-size:16px;"><br></p>
   <p style="min-height:1em;color:rgb(62,62,62);font-size:16px;"><br></p>
   <ul class="list-paddingleft-2" style="margin-left:8px;">
    <li><p style="margin-left:8px;min-height:1em;line-height:1.75em;"><a href="http://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247484074&amp;idx=1&amp;sn=3a88bc647c6f7d65afbd1b5e44ca9824&amp;chksm=fc7c5c57cb0bd5414580b744495b05d15dceaa646a6dedc1753d14140ad9ac5ebb00e8f943a1&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;letter-spacing:.5px;"><span>对话元道：通证经济需要“互链网”，“互链网”需要细腰</span></a></p></li>
    <li><p style="margin-left:8px;min-height:1em;line-height:1.75em;"><a href="http://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247484070&amp;idx=1&amp;sn=7efbec2eaa16598e805592942e378c19&amp;chksm=fc7c5c5bcb0bd54da3501517617a4d62e891e2ecf691ebe40f6fa3b557766cef49084122dea3&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;letter-spacing:.5px;"><span>今天，这几位区块链大咖旗帜鲜明地亮出“通证派”，原来这才是他们期盼中的未来交易的模样...</span></a></p></li>
    <li><p style="margin-left:8px;min-height:1em;line-height:1.75em;"><a href="http://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247484051&amp;idx=1&amp;sn=0d7d8e2a4cae402002a2016983adb312&amp;chksm=fc7c5c6ecb0bd57819cc432d1c1d3b259c9962e17616b4778da62b6e077384177b582cbbf395&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;letter-spacing:.5px;"><span>与元道对话三：区块链经济正在进行“动力切换”</span></a><br></p></li>
    <li><p style="margin-left:8px;min-height:1em;line-height:1.75em;"><a href="http://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247484035&amp;idx=1&amp;sn=e590bd609e0890bceebdbc975cac339a&amp;chksm=fc7c5c7ecb0bd56803349d427b63fd5100d9d9d12bf0dcbd5ec39ce3fe7664531e843dad37d1&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;letter-spacing:.5px;"><span>锐评：泡沫中的token和被冷落的联盟链</span></a><br></p></li>
    <li><p style="margin-left:8px;min-height:1em;line-height:1.75em;"><a href="http://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247483992&amp;idx=1&amp;sn=c59d84da9ddc997dcd04b3c68da009fb&amp;chksm=fc7c5ca5cb0bd5b3cfc946587444fe2bb371a563e3a6b94620619d0e6d9ed419fc754ecbb7df&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;letter-spacing:.5px;"><span>对话元道二：通证视角下的区块链创新路线</span></a><br></p></li>
    <li><p style="margin-left:8px;min-height:1em;line-height:1.75em;"><a href="http://mp.weixin.qq.com/s?__biz=MzU2MTE1NDk2Mg==&amp;mid=2247483974&amp;idx=1&amp;sn=53411524d4573a99173c1d19586a41ac&amp;chksm=fc7c5cbbcb0bd5ad2141c0c13c013ec5bfc7640483d7eb3535f849783ff9c1fdbfb1fe2529c6&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration:underline;letter-spacing:.5px;"><span>听听Vitalik对token设计的看法</span></a></p></li>
   </ul>
   <p style="margin-left:8px;min-height:1em;color:rgb(62,62,62);font-size:16px;line-height:1.75em;"><br></p>
   <p style="margin-left:8px;min-height:1em;color:rgb(62,62,62);font-size:16px;line-height:1.75em;"><br></p>
   <p style="margin-left:8px;min-height:1em;color:rgb(62,62,62);font-size:16px;line-height:1.75em;"><img class="__bg_gif" style="margin-left:auto;display:block;visibility:visible !important;" width="22" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/trm5VMeFp9kuuGYcoeg06IYM4TSEE1eCF4aiadptTMnNFDia5JfEBLuUslraYtDcYbKr2b4takjM2MfqeZYcVqkQ/640?wx_fmt=gif" alt="640?wx_fmt=gif"></p>
   <p style="margin-left:8px;min-height:1em;color:rgb(62,62,62);font-size:16px;line-height:1.75em;"><br></p>
   <p style="min-height:1em;color:rgb(62,62,62);font-size:16px;"><br></p>
   <p style="margin-left:8px;min-height:1em;color:rgb(62,62,62);font-size:16px;line-height:1.75em;"><span style="letter-spacing:.5px;"><strong><span style="font-size:14px;color:rgb(0,122,170);">了解更多区块链技术及应用内容，敬请关注：</span></strong></span></p>
   <p style="min-height:1em;color:rgb(62,62,62);font-size:16px;"><br></p>
   <p style="margin-left:8px;min-height:1em;color:rgb(62,62,62);font-size:16px;text-align:center;line-height:1.75em;"><img class="img_loading" style="visibility:visible !important;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/trm5VMeFp9mxakm4VPrgL8icicHWiaqWk0wccvxK7y28BUZtwpHtZLlEjAuvnwzRp3to3EBRSdA9ozn4frxxibwdQQ/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p>
   <p><br></p> 
  </div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Blockchain_lemon/article/details/79236199,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Blockchain_lemon/article/details/79236199,&quot;}">阅读更多</a> 
</div> 
<script>
						(function(){
							function setArticleH(btnReadmore,posi){
								var winH = $(window).height();
								var articleBox = $("div.article_content");
								var artH = articleBox.height();
								if(artH > winH*posi){
									articleBox.css({
										'height':winH*posi+'px',
										'overflow':'hidden'
									})
									btnReadmore.click(function(){
										articleBox.removeAttr("style");
										$(this).parent().remove();
									})
								}else{
									btnReadmore.parent().remove();
								}
							}
							var btnReadmore = $("#btn-readmore");
							if(btnReadmore.length>0){
								if(currentUserName){
									setArticleH(btnReadmore,3);
								}else{
									setArticleH(btnReadmore,1.2);
								}
							}
						})()
					</script>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
