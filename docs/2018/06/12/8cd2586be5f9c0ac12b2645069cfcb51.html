<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>区块链Hyperledger Composer 环境安装 一（整理版） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="区块链Hyperledger Composer 环境安装 一（整理版）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Hyperledger Composer 环境安装 1. 安装基本软件包 **如果使用Linux安装Hyperledger Composer，请注意以下建议： 以普通用户身份登录，而不是root用户。否则后续有很多问题 不要su根。 安装先决条件时，使用curl，然后使用sudo进行解压缩。 以普通用户身份运行prereqs-ubuntu.sh。它可能会提示输入root密码，因为它的某些操作需要以root身份运行。 不要使用npm sudo或suroot来使用它。 避免以root身份全局安装节点。** 如果您在Ubuntu上运行，则可以使用以下命令下载先决条件： 如果您在Ubuntu上运行，则可以使用以下命令下载先决条件： Copy 复制 curl -O https://hyperledger.github.io/composer/latest/prereqs-ubuntu.sh chmod u+x prereqs-ubuntu.sh 接下来运行脚本 - 因为这个脚本在执行过程中使用了sudo，所以会提示您输入密码。 Copy 复制 ./prereqs-ubuntu.sh 2.安装组件 第1步：安装CLI工具 Composer开发人员有几个有用的CLI工具。最重要的是composer-cli，它包含了所有必要的操作，所以我们会先安装它。接下来，我们也会拿起generator-hyperledger-composer，composer-rest-server并Yeoman加上generator-hyperledger-composer。最后3个不是开发环境的核心部分，但如果您遵循教程或开发与您的商业网络交互的应用程序，它们将非常有用，因此我们现在会安装它们。 请注意，您不应该使用su或sudo为以下npm命令。 基本的CLI工具： Copy 复制 npm install -g composer-cli 在您的计算机上运行REST服务器以将您的业务网络公开为RESTful API的实用程序： Copy 复制 npm install -g composer-rest-server 生成应用程序资产的有用工具： Copy 复制 npm install -g generator-hyperledger-composer Yeoman是一种产生应用程序的工具，它利用generator-hyperledger-composer： Copy 复制 npm install -g yo 第2步：安装游乐场 如果您已经在线尝试了Composer，则会看到浏览器应用程序“Playground”。您也可以在您的开发机器上本地运行此功能，为您提供查看和演示业务网络的用户界面。 用于简单编辑和测试的浏览器应用商业网络： Copy 复制 npm install -g composer-playground 第3步：设置您的IDE 虽然浏览器应用程序可用于处理商业网络代码，但大多数用户更喜欢在IDE中工作。我们最喜欢的是VSCode，因为Composer扩展可用。 从此URL安装VSCode：https：//code.visualstudio.com/download 打开VSCode，进入扩展，然后Hyperledger Composer从市场中搜索并安装扩展。 步骤4：安装超级结构结构 此步骤为您提供本地Hyperledger Fabric运行时来部署您的业务网络。 在您选择的目录中（我们将假设~/fabric-dev-servers），获取.tar.gz包含安装Hyperledger Fabric的工具的文件： Copy 复制 mkdir ~/fabric-dev-servers &amp;&amp; cd ~/fabric-dev-servers curl -O https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz tar -xvf fabric-dev-servers.tar.gz zip如果您愿意，也可以使用A ：只需使用上面的代码片段中的命令替换.tar.gz文件fabric-dev-servers.zip并tar -xvf使用该unzip命令即可。 使用刚刚下载并解压缩的脚本下载本地Hyperledger Fabric运行时： Copy 复制 cd ~/fabric-dev-servers ./downloadFabric.sh 恭喜，您现在已经安装了典型开发环境所需的一切。请继续阅读以了解您在此环境中开展并测试区块链商业网络时最常见的一些事情。 控制你的开发环境 启动和停止Hyperledger结构 您可以使用一组脚本来控制运行时间，~/fabric-dev-servers如果您遵循了建议的默认值，那么您将在其中找到这些脚本。 第一次启动一个新的运行时，您需要运行启动脚本，然后生成一个PeerAdmin卡： Copy 复制 cd ~/fabric-dev-servers ./startFabric.sh ./createPeerAdminCard.sh 您可以使用启动和停止运行时~/fabric-dev-servers/stopFabric.sh，然后再次启动它~/fabric-dev-servers/startFabric.sh。 在开发阶段结束时，你运行~/fabric-dev-servers/stopFabric.sh然后~/fabric-dev-servers/teardownFabric.sh。请注意，如果您已经运行了拆卸脚本，那么下次启动运行时，就需要像第一次启动时那样创建一个新的PeerAdmin卡。 本地运行时旨在频繁启动，停止和拆除，以供开发使用。如果您正在寻找具有更持久状态的运行时，则需要在开发环境外部运行一个运行时环境，并将业务网络部署到该环境。这方面的例子包括通过Kubernetes运行它，或者在诸如IBM Cloud之类的托管平台上运行它。 启动网络应用程序（“Playground”） 要启动Web应用程序，请运行： Copy 复制 composer-playground 它通常会自动打开您的浏览器，地址如下：http：// localhost：8080 / login 您应该在Web应用程序的“我的商业网络”屏幕上看到PeerAdmin@hlfv1您使用该createPeerAdminCard脚本创建的卡片：如果您没有看到该卡片，则可能没有正确启动您的运行时间！ 恭喜你，所有组件都在运行，并且在完成开发会话时，你也知道如何停下来并拆除它们。 3.更新开发环境 如果您已经安装了Hyperledger Composer开发工具，并且希望将安装更新到最新版本的Hyperledger Composer，请按照这些说明进行操作。 更新组件 第1步：更新CLI工具 任何正在运行的CLI工具实例都应该在继续之前停止。如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。composer-rest-server如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载所有CLI工具的当前安装版本： Copy 复制 npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer 安装所有CLI工具的最新版本： Copy 复制 npm install -g composer-cli composer-rest-server generator-hyperledger-composer 第2步：更新Playground 如果您在开发机器上安装了浏览器应用程序“Playground”，则还需要进行更新。如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。composer-playground如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载当前安装的浏览器应用程序版本： Copy 复制 npm uninstall -g composer-playground 安装最新版本的浏览器应用程序： Copy 复制 npm install -g composer-playground 恭喜，您已经使用最新版本的开发工具更新了您的开发环境。您现在可以继续使用最新功能和错误修复来开发您的区块链应用程序！ 4. 卸载组件（不需要重新安装跳过这一步） 第1步：卸载CLI工具 任何正在运行的CLI工具实例都应该在继续之前停止。如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。composer-rest-server如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载所有CLI工具的当前安装版本： Copy 复制 npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer 第2步：卸载Playground 如果您在开发计算机上安装了浏览器应用程序“Playground”，则还需要卸载此应用程序。如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。composer-playground如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载当前安装的浏览器应用程序版本： Copy 复制 npm uninstall -g composer-playground 第3步：删除业务网卡存储 商业网卡存储在商业网络卡商店中，默认情况下它是当前用户主目录中的一个目录。删除此目录以删除所有业务网卡。要注意的是，这也将删除存储在商业网络存储卡中的所有身份（公共证书和私钥），因此您可能希望在继续之前对其进行备份！ 删除商业网络卡商店： Copy 复制 rm -rf ~/.composer 步骤4：卸载Hyperledger Fabric 您可以使用一组脚本来控制本地Hyperledger Fabric运行时，~/fabric-dev-servers如果您遵循了建议的默认值，您将在其中找到这些脚本。 停止本地Hyperledger Fabric运行时并删除任何运行时Docker容器或映像： Copy 复制 ~/fabric-dev-servers/stopFabric.sh ~/fabric-dev-servers/teardownFabric.sh 卸载本地Hyperledger Fabric运行时： Copy 复制 rm -rf ~/fabric-dev-servers 恭喜，你已经卸载了你的开发环境。要继续开发区块链应用程序，您需要从头开始安装开发工具。 5. 开发教程 第一步：创建业务网络结构 Hyperledger Composer的关键概念是商业网络定义（BND）。它为您的区块链解决方案定义了数据模型，事务逻辑和访问控制规则。要创建一个BND，我们需要在磁盘上创建一个合适的项目结构。 最简单的入门方法是使用Yeoman生成器创建骨架业务网络。这将创建一个包含业务网络的所有组件的目录。 使用Yeoman创建一个骨架业务网络。此命令将需要业务网络名称，说明，作者姓名，作者电子邮件地址，许可证选择和命名空间。 Copy 复制 yo hyperledger-composer:businessnetwork 如果为root用户安装，此处可能会报错，设置如下 sed -i -e &#39;/rootCheck/d&#39; &quot;${NPM_CONFIG_PREFIX}/lib/node_modules/yo/lib/cli.js&quot; export NPM_CONFIG_PREFIX=$(npm config get prefix)&nbsp; 输入 tutorial-network 网络名称以及所需的描述信息，作者姓名和作者电子邮件。 选择 Apache-2.0 作为许可证。 选择 org.example.mynetwork 作为命名空间。 选择 No 当被问及是否生成一个空网络时。 第二步：定义一个商业网络 业务网络由资产，参与者，交易，访问控制规则以及可选的事件和查询组成。在前面步骤中创建的骨架业务网络中，有一个model（.cto）文件，其中将包含业务网络中所有资产，参与者和事务的类定义。骨架业务网络还包含permissions.acl具有基本访问控制规则的访问控制（）文档，logic.js包含事务处理器功能的脚本（）文件以及package.json包含业务网络元数据的文件。 建模资产，参与者和交易 第一个要更新的文档是model（.cto）文件。该文件使用Hyperledger Composer建模语言编写。模型文件包含每类资产，交易，参与者和事件的定义。它隐含地扩展了建模语言文档中描述的Hyperledger Composer系统模型。 打开 org.example.mynetwork.cto 模型文件。 用以下内容替换内容： Copy 复制 /** * My commodity trading network */ namespace org.example.mynetwork asset Commodity identified by tradingSymbol { o String tradingSymbol o String description o String mainExchange o Double quantity --&gt; Trader owner } participant Trader identified by tradeId { o String tradeId o String firstName o String lastName } transaction Trade { --&gt; Commodity commodity --&gt; Trader newOwner } 保存您的更改org.example.mynetwork.cto。 添加JavaScript事务逻辑 在模型文件中，Trade定义了事务，指定与资产和参与者的关系。事务处理函数文件包含执行模型文件中定义的事务的JavaScript逻辑。 该Trade交易旨在简单地接受Commodity正在交易的资产的标识符以及Trader要设置为新所有者的参与者的标识符。 打开 logic.js 脚本文件。 用以下内容替换内容： Copy 复制 /** * Track the trade of a commodity from one trader to another * @param {org.example.mynetwork.Trade} trade - the trade to be processed * @transaction */ async function tradeCommodity(trade) { trade.commodity.owner = trade.newOwner; let assetRegistry = await getAssetRegistry(&#39;org.example.mynetwork.Commodity&#39;); await assetRegistry.update(trade.commodity); } 保存您的更改logic.js。 添加访问控制 替换文件中的以下访问控制规则 permissions.acl ： Copy 复制 /** * Access control rules for tutorial-network */ rule Default { description: &quot;Allow all participants access to all resources&quot; participant: &quot;ANY&quot; operation: ALL resource: &quot;org.example.mynetwork.*&quot; action: ALLOW } rule SystemACL { description: &quot;System ACL to permit all access&quot; participant: &quot;ANY&quot; operation: ALL resource: &quot;org.hyperledger.composer.system.**&quot; action: ALLOW } 保存您的更改permissions.acl。 第三步：生成业务网络存档 现在已经定义了业务网络，它必须打包到可部署的业务网络存档（.bna）文件中。 使用命令行，导航到 tutorial-network 目录。 从tutorial-network目录中运行以下命令： Copy 复制 composer archive create -t dir -n . 该命令运行后，tutorial-network@0.0.1.bna在该tutorial-network目录中创建了一个调用的业务网络存档文件。 第四步：部署业务网络 创建.bna文件后，业务网络可以部署到Hyperledger Fabric实例。通常情况下，来自Fabric管理员的信息需要创建一个PeerAdmin身份，具有将链接代码安装到对等体的权限以及在composerchannel通道上启动链接代码的权限。但是，作为开发环境安装的一部分，PeerAdmin已经创建了一个身份。 业务网络安装完成后，网络就可以启动。为了最佳实践，应该创建一个新的标识以在部署后管理业务网络。这个身份被称为网络管理员。 检索正确的凭证 一个PeerAdmin有正确的凭据业务网络卡已为开发环境安装的一部分创建的。 部署业务网络 将业务网络部署到Hyperledger Fabric需要在对等设备上安装Hyperledger Composer业务网络，然后才能启动业务网络，并且必须创建新参与者，身份和关联卡才能成为网络管理员。最后，必须导入网络管理员业务网卡才能使用，然后可以ping通网络以检查它是否正在响应。 要从目录安装业务网络tutorial-network，请运行以下命令： Copy 复制 composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna 该composer network install命令需要一个PeerAdmin业务网卡（在这种情况下，预先创建并导入一个网卡）以及.bna定义业务网络的文件路径。 要启动业务网络，请运行以下命令： Copy 复制 composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card 该composer network start命令需要企业网卡，以及业务网络的管理员身份名称，业务网络的名称和版本以及要创建的文件的名称，以准备将其导入为业务网卡。 要将网络管理员标识导入为可用的业务网卡，请运行以下命令： Copy 复制 composer card import --file networkadmin.card 该composer card import命令需要指定的文件名composer network start来创建卡片。 要检查业务网络是否已成功部署，请运行以下命令以ping网络： Copy 复制 composer network ping --card admin@tutorial-network 该composer network ping命令需要使用企业网卡来识别要ping的网络。 第五步：生成REST服务器 Hyperledger Composer可以基于业务网络生成定制的REST API。为了开发Web应用程序，REST API提供了一个有用的语言无关抽象层。 要创建REST API，请导航到 tutorial-network 目录并运行以下命令： Copy 复制 composer-rest-server 输入 admin@tutorial-network 作为名片。 选择 决不询问是否在生成的API中使用名称空间时使用名称空间。 选择 没有 当被问及是否保护生成的API。 选择 是 当被问及是否启用事件发布时。 选择 没有 当被问及是否启用TLS安全。 Enter the name of the business network card to use: admin@tutorial-networkSpecify if you want namespaces in the generated REST API: never use namespacesSpecify if you want to use an API key to secure the REST API: NoSpecify if you want to enable authentication for the REST API using Passport: NoSpecify if you want to enable event publication over WebSockets: YesSpecify if you want to enable TLS security for the REST API: No 生成的API连接到部署的区块链和业务网络。 第六步：生成一个应用程序 Hyperledger Composer还可以生成针对REST API运行的Angular 4应用程序。 要创建您的Angular 4应用程序，请导航至 tutorial-network 目录并运行以下命令： Copy 复制 yo hyperledger-composer:angular 选择 是 当被要求连接到运行业务网络时。 输入标准package.json问题（项目名称，说明，作者姓名，作者电子邮件，许可证） 输入 admin@tutorial-network 为商业网卡。 选择连接到现有的REST API 输入 http://localhost 为REST服务器地址。 输入 3000 用于服务器端口。 选择名称空间不被使用 npm install 可能会报错 npm ERR! Unexpected end of JSON input while parsing near &#39;...m&quot;:&quot;&gt;=3&quot;},&quot;_hasShrink&#39; 设置淘宝镜像npm config set registry https://registry.npm.taobao.orgnpm cache clear --force再npm install 然后，Angular generator将为该项目创建脚手架并安装所有依赖项。要运行该应用程序，请导航到您的角度项目目录并运行 npm start 。这将引发一个针对您的REST API运行的Angular 4应用程序 http://localhost:4200 。 查看生成的API 启动浏览器并转到给定的URL（http：//0.0.0.0:3000/explorer）。你会看到类似这样的屏幕。 阅读更多" />
<meta property="og:description" content="Hyperledger Composer 环境安装 1. 安装基本软件包 **如果使用Linux安装Hyperledger Composer，请注意以下建议： 以普通用户身份登录，而不是root用户。否则后续有很多问题 不要su根。 安装先决条件时，使用curl，然后使用sudo进行解压缩。 以普通用户身份运行prereqs-ubuntu.sh。它可能会提示输入root密码，因为它的某些操作需要以root身份运行。 不要使用npm sudo或suroot来使用它。 避免以root身份全局安装节点。** 如果您在Ubuntu上运行，则可以使用以下命令下载先决条件： 如果您在Ubuntu上运行，则可以使用以下命令下载先决条件： Copy 复制 curl -O https://hyperledger.github.io/composer/latest/prereqs-ubuntu.sh chmod u+x prereqs-ubuntu.sh 接下来运行脚本 - 因为这个脚本在执行过程中使用了sudo，所以会提示您输入密码。 Copy 复制 ./prereqs-ubuntu.sh 2.安装组件 第1步：安装CLI工具 Composer开发人员有几个有用的CLI工具。最重要的是composer-cli，它包含了所有必要的操作，所以我们会先安装它。接下来，我们也会拿起generator-hyperledger-composer，composer-rest-server并Yeoman加上generator-hyperledger-composer。最后3个不是开发环境的核心部分，但如果您遵循教程或开发与您的商业网络交互的应用程序，它们将非常有用，因此我们现在会安装它们。 请注意，您不应该使用su或sudo为以下npm命令。 基本的CLI工具： Copy 复制 npm install -g composer-cli 在您的计算机上运行REST服务器以将您的业务网络公开为RESTful API的实用程序： Copy 复制 npm install -g composer-rest-server 生成应用程序资产的有用工具： Copy 复制 npm install -g generator-hyperledger-composer Yeoman是一种产生应用程序的工具，它利用generator-hyperledger-composer： Copy 复制 npm install -g yo 第2步：安装游乐场 如果您已经在线尝试了Composer，则会看到浏览器应用程序“Playground”。您也可以在您的开发机器上本地运行此功能，为您提供查看和演示业务网络的用户界面。 用于简单编辑和测试的浏览器应用商业网络： Copy 复制 npm install -g composer-playground 第3步：设置您的IDE 虽然浏览器应用程序可用于处理商业网络代码，但大多数用户更喜欢在IDE中工作。我们最喜欢的是VSCode，因为Composer扩展可用。 从此URL安装VSCode：https：//code.visualstudio.com/download 打开VSCode，进入扩展，然后Hyperledger Composer从市场中搜索并安装扩展。 步骤4：安装超级结构结构 此步骤为您提供本地Hyperledger Fabric运行时来部署您的业务网络。 在您选择的目录中（我们将假设~/fabric-dev-servers），获取.tar.gz包含安装Hyperledger Fabric的工具的文件： Copy 复制 mkdir ~/fabric-dev-servers &amp;&amp; cd ~/fabric-dev-servers curl -O https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz tar -xvf fabric-dev-servers.tar.gz zip如果您愿意，也可以使用A ：只需使用上面的代码片段中的命令替换.tar.gz文件fabric-dev-servers.zip并tar -xvf使用该unzip命令即可。 使用刚刚下载并解压缩的脚本下载本地Hyperledger Fabric运行时： Copy 复制 cd ~/fabric-dev-servers ./downloadFabric.sh 恭喜，您现在已经安装了典型开发环境所需的一切。请继续阅读以了解您在此环境中开展并测试区块链商业网络时最常见的一些事情。 控制你的开发环境 启动和停止Hyperledger结构 您可以使用一组脚本来控制运行时间，~/fabric-dev-servers如果您遵循了建议的默认值，那么您将在其中找到这些脚本。 第一次启动一个新的运行时，您需要运行启动脚本，然后生成一个PeerAdmin卡： Copy 复制 cd ~/fabric-dev-servers ./startFabric.sh ./createPeerAdminCard.sh 您可以使用启动和停止运行时~/fabric-dev-servers/stopFabric.sh，然后再次启动它~/fabric-dev-servers/startFabric.sh。 在开发阶段结束时，你运行~/fabric-dev-servers/stopFabric.sh然后~/fabric-dev-servers/teardownFabric.sh。请注意，如果您已经运行了拆卸脚本，那么下次启动运行时，就需要像第一次启动时那样创建一个新的PeerAdmin卡。 本地运行时旨在频繁启动，停止和拆除，以供开发使用。如果您正在寻找具有更持久状态的运行时，则需要在开发环境外部运行一个运行时环境，并将业务网络部署到该环境。这方面的例子包括通过Kubernetes运行它，或者在诸如IBM Cloud之类的托管平台上运行它。 启动网络应用程序（“Playground”） 要启动Web应用程序，请运行： Copy 复制 composer-playground 它通常会自动打开您的浏览器，地址如下：http：// localhost：8080 / login 您应该在Web应用程序的“我的商业网络”屏幕上看到PeerAdmin@hlfv1您使用该createPeerAdminCard脚本创建的卡片：如果您没有看到该卡片，则可能没有正确启动您的运行时间！ 恭喜你，所有组件都在运行，并且在完成开发会话时，你也知道如何停下来并拆除它们。 3.更新开发环境 如果您已经安装了Hyperledger Composer开发工具，并且希望将安装更新到最新版本的Hyperledger Composer，请按照这些说明进行操作。 更新组件 第1步：更新CLI工具 任何正在运行的CLI工具实例都应该在继续之前停止。如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。composer-rest-server如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载所有CLI工具的当前安装版本： Copy 复制 npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer 安装所有CLI工具的最新版本： Copy 复制 npm install -g composer-cli composer-rest-server generator-hyperledger-composer 第2步：更新Playground 如果您在开发机器上安装了浏览器应用程序“Playground”，则还需要进行更新。如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。composer-playground如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载当前安装的浏览器应用程序版本： Copy 复制 npm uninstall -g composer-playground 安装最新版本的浏览器应用程序： Copy 复制 npm install -g composer-playground 恭喜，您已经使用最新版本的开发工具更新了您的开发环境。您现在可以继续使用最新功能和错误修复来开发您的区块链应用程序！ 4. 卸载组件（不需要重新安装跳过这一步） 第1步：卸载CLI工具 任何正在运行的CLI工具实例都应该在继续之前停止。如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。composer-rest-server如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载所有CLI工具的当前安装版本： Copy 复制 npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer 第2步：卸载Playground 如果您在开发计算机上安装了浏览器应用程序“Playground”，则还需要卸载此应用程序。如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。composer-playground如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载当前安装的浏览器应用程序版本： Copy 复制 npm uninstall -g composer-playground 第3步：删除业务网卡存储 商业网卡存储在商业网络卡商店中，默认情况下它是当前用户主目录中的一个目录。删除此目录以删除所有业务网卡。要注意的是，这也将删除存储在商业网络存储卡中的所有身份（公共证书和私钥），因此您可能希望在继续之前对其进行备份！ 删除商业网络卡商店： Copy 复制 rm -rf ~/.composer 步骤4：卸载Hyperledger Fabric 您可以使用一组脚本来控制本地Hyperledger Fabric运行时，~/fabric-dev-servers如果您遵循了建议的默认值，您将在其中找到这些脚本。 停止本地Hyperledger Fabric运行时并删除任何运行时Docker容器或映像： Copy 复制 ~/fabric-dev-servers/stopFabric.sh ~/fabric-dev-servers/teardownFabric.sh 卸载本地Hyperledger Fabric运行时： Copy 复制 rm -rf ~/fabric-dev-servers 恭喜，你已经卸载了你的开发环境。要继续开发区块链应用程序，您需要从头开始安装开发工具。 5. 开发教程 第一步：创建业务网络结构 Hyperledger Composer的关键概念是商业网络定义（BND）。它为您的区块链解决方案定义了数据模型，事务逻辑和访问控制规则。要创建一个BND，我们需要在磁盘上创建一个合适的项目结构。 最简单的入门方法是使用Yeoman生成器创建骨架业务网络。这将创建一个包含业务网络的所有组件的目录。 使用Yeoman创建一个骨架业务网络。此命令将需要业务网络名称，说明，作者姓名，作者电子邮件地址，许可证选择和命名空间。 Copy 复制 yo hyperledger-composer:businessnetwork 如果为root用户安装，此处可能会报错，设置如下 sed -i -e &#39;/rootCheck/d&#39; &quot;${NPM_CONFIG_PREFIX}/lib/node_modules/yo/lib/cli.js&quot; export NPM_CONFIG_PREFIX=$(npm config get prefix)&nbsp; 输入 tutorial-network 网络名称以及所需的描述信息，作者姓名和作者电子邮件。 选择 Apache-2.0 作为许可证。 选择 org.example.mynetwork 作为命名空间。 选择 No 当被问及是否生成一个空网络时。 第二步：定义一个商业网络 业务网络由资产，参与者，交易，访问控制规则以及可选的事件和查询组成。在前面步骤中创建的骨架业务网络中，有一个model（.cto）文件，其中将包含业务网络中所有资产，参与者和事务的类定义。骨架业务网络还包含permissions.acl具有基本访问控制规则的访问控制（）文档，logic.js包含事务处理器功能的脚本（）文件以及package.json包含业务网络元数据的文件。 建模资产，参与者和交易 第一个要更新的文档是model（.cto）文件。该文件使用Hyperledger Composer建模语言编写。模型文件包含每类资产，交易，参与者和事件的定义。它隐含地扩展了建模语言文档中描述的Hyperledger Composer系统模型。 打开 org.example.mynetwork.cto 模型文件。 用以下内容替换内容： Copy 复制 /** * My commodity trading network */ namespace org.example.mynetwork asset Commodity identified by tradingSymbol { o String tradingSymbol o String description o String mainExchange o Double quantity --&gt; Trader owner } participant Trader identified by tradeId { o String tradeId o String firstName o String lastName } transaction Trade { --&gt; Commodity commodity --&gt; Trader newOwner } 保存您的更改org.example.mynetwork.cto。 添加JavaScript事务逻辑 在模型文件中，Trade定义了事务，指定与资产和参与者的关系。事务处理函数文件包含执行模型文件中定义的事务的JavaScript逻辑。 该Trade交易旨在简单地接受Commodity正在交易的资产的标识符以及Trader要设置为新所有者的参与者的标识符。 打开 logic.js 脚本文件。 用以下内容替换内容： Copy 复制 /** * Track the trade of a commodity from one trader to another * @param {org.example.mynetwork.Trade} trade - the trade to be processed * @transaction */ async function tradeCommodity(trade) { trade.commodity.owner = trade.newOwner; let assetRegistry = await getAssetRegistry(&#39;org.example.mynetwork.Commodity&#39;); await assetRegistry.update(trade.commodity); } 保存您的更改logic.js。 添加访问控制 替换文件中的以下访问控制规则 permissions.acl ： Copy 复制 /** * Access control rules for tutorial-network */ rule Default { description: &quot;Allow all participants access to all resources&quot; participant: &quot;ANY&quot; operation: ALL resource: &quot;org.example.mynetwork.*&quot; action: ALLOW } rule SystemACL { description: &quot;System ACL to permit all access&quot; participant: &quot;ANY&quot; operation: ALL resource: &quot;org.hyperledger.composer.system.**&quot; action: ALLOW } 保存您的更改permissions.acl。 第三步：生成业务网络存档 现在已经定义了业务网络，它必须打包到可部署的业务网络存档（.bna）文件中。 使用命令行，导航到 tutorial-network 目录。 从tutorial-network目录中运行以下命令： Copy 复制 composer archive create -t dir -n . 该命令运行后，tutorial-network@0.0.1.bna在该tutorial-network目录中创建了一个调用的业务网络存档文件。 第四步：部署业务网络 创建.bna文件后，业务网络可以部署到Hyperledger Fabric实例。通常情况下，来自Fabric管理员的信息需要创建一个PeerAdmin身份，具有将链接代码安装到对等体的权限以及在composerchannel通道上启动链接代码的权限。但是，作为开发环境安装的一部分，PeerAdmin已经创建了一个身份。 业务网络安装完成后，网络就可以启动。为了最佳实践，应该创建一个新的标识以在部署后管理业务网络。这个身份被称为网络管理员。 检索正确的凭证 一个PeerAdmin有正确的凭据业务网络卡已为开发环境安装的一部分创建的。 部署业务网络 将业务网络部署到Hyperledger Fabric需要在对等设备上安装Hyperledger Composer业务网络，然后才能启动业务网络，并且必须创建新参与者，身份和关联卡才能成为网络管理员。最后，必须导入网络管理员业务网卡才能使用，然后可以ping通网络以检查它是否正在响应。 要从目录安装业务网络tutorial-network，请运行以下命令： Copy 复制 composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna 该composer network install命令需要一个PeerAdmin业务网卡（在这种情况下，预先创建并导入一个网卡）以及.bna定义业务网络的文件路径。 要启动业务网络，请运行以下命令： Copy 复制 composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card 该composer network start命令需要企业网卡，以及业务网络的管理员身份名称，业务网络的名称和版本以及要创建的文件的名称，以准备将其导入为业务网卡。 要将网络管理员标识导入为可用的业务网卡，请运行以下命令： Copy 复制 composer card import --file networkadmin.card 该composer card import命令需要指定的文件名composer network start来创建卡片。 要检查业务网络是否已成功部署，请运行以下命令以ping网络： Copy 复制 composer network ping --card admin@tutorial-network 该composer network ping命令需要使用企业网卡来识别要ping的网络。 第五步：生成REST服务器 Hyperledger Composer可以基于业务网络生成定制的REST API。为了开发Web应用程序，REST API提供了一个有用的语言无关抽象层。 要创建REST API，请导航到 tutorial-network 目录并运行以下命令： Copy 复制 composer-rest-server 输入 admin@tutorial-network 作为名片。 选择 决不询问是否在生成的API中使用名称空间时使用名称空间。 选择 没有 当被问及是否保护生成的API。 选择 是 当被问及是否启用事件发布时。 选择 没有 当被问及是否启用TLS安全。 Enter the name of the business network card to use: admin@tutorial-networkSpecify if you want namespaces in the generated REST API: never use namespacesSpecify if you want to use an API key to secure the REST API: NoSpecify if you want to enable authentication for the REST API using Passport: NoSpecify if you want to enable event publication over WebSockets: YesSpecify if you want to enable TLS security for the REST API: No 生成的API连接到部署的区块链和业务网络。 第六步：生成一个应用程序 Hyperledger Composer还可以生成针对REST API运行的Angular 4应用程序。 要创建您的Angular 4应用程序，请导航至 tutorial-network 目录并运行以下命令： Copy 复制 yo hyperledger-composer:angular 选择 是 当被要求连接到运行业务网络时。 输入标准package.json问题（项目名称，说明，作者姓名，作者电子邮件，许可证） 输入 admin@tutorial-network 为商业网卡。 选择连接到现有的REST API 输入 http://localhost 为REST服务器地址。 输入 3000 用于服务器端口。 选择名称空间不被使用 npm install 可能会报错 npm ERR! Unexpected end of JSON input while parsing near &#39;...m&quot;:&quot;&gt;=3&quot;},&quot;_hasShrink&#39; 设置淘宝镜像npm config set registry https://registry.npm.taobao.orgnpm cache clear --force再npm install 然后，Angular generator将为该项目创建脚手架并安装所有依赖项。要运行该应用程序，请导航到您的角度项目目录并运行 npm start 。这将引发一个针对您的REST API运行的Angular 4应用程序 http://localhost:4200 。 查看生成的API 启动浏览器并转到给定的URL（http：//0.0.0.0:3000/explorer）。你会看到类似这样的屏幕。 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/06/12/8cd2586be5f9c0ac12b2645069cfcb51.html" />
<meta property="og:url" content="https://mlh.app/2018/06/12/8cd2586be5f9c0ac12b2645069cfcb51.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-12T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"Hyperledger Composer 环境安装 1. 安装基本软件包 **如果使用Linux安装Hyperledger Composer，请注意以下建议： 以普通用户身份登录，而不是root用户。否则后续有很多问题 不要su根。 安装先决条件时，使用curl，然后使用sudo进行解压缩。 以普通用户身份运行prereqs-ubuntu.sh。它可能会提示输入root密码，因为它的某些操作需要以root身份运行。 不要使用npm sudo或suroot来使用它。 避免以root身份全局安装节点。** 如果您在Ubuntu上运行，则可以使用以下命令下载先决条件： 如果您在Ubuntu上运行，则可以使用以下命令下载先决条件： Copy 复制 curl -O https://hyperledger.github.io/composer/latest/prereqs-ubuntu.sh chmod u+x prereqs-ubuntu.sh 接下来运行脚本 - 因为这个脚本在执行过程中使用了sudo，所以会提示您输入密码。 Copy 复制 ./prereqs-ubuntu.sh 2.安装组件 第1步：安装CLI工具 Composer开发人员有几个有用的CLI工具。最重要的是composer-cli，它包含了所有必要的操作，所以我们会先安装它。接下来，我们也会拿起generator-hyperledger-composer，composer-rest-server并Yeoman加上generator-hyperledger-composer。最后3个不是开发环境的核心部分，但如果您遵循教程或开发与您的商业网络交互的应用程序，它们将非常有用，因此我们现在会安装它们。 请注意，您不应该使用su或sudo为以下npm命令。 基本的CLI工具： Copy 复制 npm install -g composer-cli 在您的计算机上运行REST服务器以将您的业务网络公开为RESTful API的实用程序： Copy 复制 npm install -g composer-rest-server 生成应用程序资产的有用工具： Copy 复制 npm install -g generator-hyperledger-composer Yeoman是一种产生应用程序的工具，它利用generator-hyperledger-composer： Copy 复制 npm install -g yo 第2步：安装游乐场 如果您已经在线尝试了Composer，则会看到浏览器应用程序“Playground”。您也可以在您的开发机器上本地运行此功能，为您提供查看和演示业务网络的用户界面。 用于简单编辑和测试的浏览器应用商业网络： Copy 复制 npm install -g composer-playground 第3步：设置您的IDE 虽然浏览器应用程序可用于处理商业网络代码，但大多数用户更喜欢在IDE中工作。我们最喜欢的是VSCode，因为Composer扩展可用。 从此URL安装VSCode：https：//code.visualstudio.com/download 打开VSCode，进入扩展，然后Hyperledger Composer从市场中搜索并安装扩展。 步骤4：安装超级结构结构 此步骤为您提供本地Hyperledger Fabric运行时来部署您的业务网络。 在您选择的目录中（我们将假设~/fabric-dev-servers），获取.tar.gz包含安装Hyperledger Fabric的工具的文件： Copy 复制 mkdir ~/fabric-dev-servers &amp;&amp; cd ~/fabric-dev-servers curl -O https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz tar -xvf fabric-dev-servers.tar.gz zip如果您愿意，也可以使用A ：只需使用上面的代码片段中的命令替换.tar.gz文件fabric-dev-servers.zip并tar -xvf使用该unzip命令即可。 使用刚刚下载并解压缩的脚本下载本地Hyperledger Fabric运行时： Copy 复制 cd ~/fabric-dev-servers ./downloadFabric.sh 恭喜，您现在已经安装了典型开发环境所需的一切。请继续阅读以了解您在此环境中开展并测试区块链商业网络时最常见的一些事情。 控制你的开发环境 启动和停止Hyperledger结构 您可以使用一组脚本来控制运行时间，~/fabric-dev-servers如果您遵循了建议的默认值，那么您将在其中找到这些脚本。 第一次启动一个新的运行时，您需要运行启动脚本，然后生成一个PeerAdmin卡： Copy 复制 cd ~/fabric-dev-servers ./startFabric.sh ./createPeerAdminCard.sh 您可以使用启动和停止运行时~/fabric-dev-servers/stopFabric.sh，然后再次启动它~/fabric-dev-servers/startFabric.sh。 在开发阶段结束时，你运行~/fabric-dev-servers/stopFabric.sh然后~/fabric-dev-servers/teardownFabric.sh。请注意，如果您已经运行了拆卸脚本，那么下次启动运行时，就需要像第一次启动时那样创建一个新的PeerAdmin卡。 本地运行时旨在频繁启动，停止和拆除，以供开发使用。如果您正在寻找具有更持久状态的运行时，则需要在开发环境外部运行一个运行时环境，并将业务网络部署到该环境。这方面的例子包括通过Kubernetes运行它，或者在诸如IBM Cloud之类的托管平台上运行它。 启动网络应用程序（“Playground”） 要启动Web应用程序，请运行： Copy 复制 composer-playground 它通常会自动打开您的浏览器，地址如下：http：// localhost：8080 / login 您应该在Web应用程序的“我的商业网络”屏幕上看到PeerAdmin@hlfv1您使用该createPeerAdminCard脚本创建的卡片：如果您没有看到该卡片，则可能没有正确启动您的运行时间！ 恭喜你，所有组件都在运行，并且在完成开发会话时，你也知道如何停下来并拆除它们。 3.更新开发环境 如果您已经安装了Hyperledger Composer开发工具，并且希望将安装更新到最新版本的Hyperledger Composer，请按照这些说明进行操作。 更新组件 第1步：更新CLI工具 任何正在运行的CLI工具实例都应该在继续之前停止。如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。composer-rest-server如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载所有CLI工具的当前安装版本： Copy 复制 npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer 安装所有CLI工具的最新版本： Copy 复制 npm install -g composer-cli composer-rest-server generator-hyperledger-composer 第2步：更新Playground 如果您在开发机器上安装了浏览器应用程序“Playground”，则还需要进行更新。如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。composer-playground如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载当前安装的浏览器应用程序版本： Copy 复制 npm uninstall -g composer-playground 安装最新版本的浏览器应用程序： Copy 复制 npm install -g composer-playground 恭喜，您已经使用最新版本的开发工具更新了您的开发环境。您现在可以继续使用最新功能和错误修复来开发您的区块链应用程序！ 4. 卸载组件（不需要重新安装跳过这一步） 第1步：卸载CLI工具 任何正在运行的CLI工具实例都应该在继续之前停止。如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。composer-rest-server如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载所有CLI工具的当前安装版本： Copy 复制 npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer 第2步：卸载Playground 如果您在开发计算机上安装了浏览器应用程序“Playground”，则还需要卸载此应用程序。如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。composer-playground如果您不确定是否有任何正在运行的实例，则可以查找该进程。 卸载当前安装的浏览器应用程序版本： Copy 复制 npm uninstall -g composer-playground 第3步：删除业务网卡存储 商业网卡存储在商业网络卡商店中，默认情况下它是当前用户主目录中的一个目录。删除此目录以删除所有业务网卡。要注意的是，这也将删除存储在商业网络存储卡中的所有身份（公共证书和私钥），因此您可能希望在继续之前对其进行备份！ 删除商业网络卡商店： Copy 复制 rm -rf ~/.composer 步骤4：卸载Hyperledger Fabric 您可以使用一组脚本来控制本地Hyperledger Fabric运行时，~/fabric-dev-servers如果您遵循了建议的默认值，您将在其中找到这些脚本。 停止本地Hyperledger Fabric运行时并删除任何运行时Docker容器或映像： Copy 复制 ~/fabric-dev-servers/stopFabric.sh ~/fabric-dev-servers/teardownFabric.sh 卸载本地Hyperledger Fabric运行时： Copy 复制 rm -rf ~/fabric-dev-servers 恭喜，你已经卸载了你的开发环境。要继续开发区块链应用程序，您需要从头开始安装开发工具。 5. 开发教程 第一步：创建业务网络结构 Hyperledger Composer的关键概念是商业网络定义（BND）。它为您的区块链解决方案定义了数据模型，事务逻辑和访问控制规则。要创建一个BND，我们需要在磁盘上创建一个合适的项目结构。 最简单的入门方法是使用Yeoman生成器创建骨架业务网络。这将创建一个包含业务网络的所有组件的目录。 使用Yeoman创建一个骨架业务网络。此命令将需要业务网络名称，说明，作者姓名，作者电子邮件地址，许可证选择和命名空间。 Copy 复制 yo hyperledger-composer:businessnetwork 如果为root用户安装，此处可能会报错，设置如下 sed -i -e &#39;/rootCheck/d&#39; &quot;${NPM_CONFIG_PREFIX}/lib/node_modules/yo/lib/cli.js&quot; export NPM_CONFIG_PREFIX=$(npm config get prefix)&nbsp; 输入 tutorial-network 网络名称以及所需的描述信息，作者姓名和作者电子邮件。 选择 Apache-2.0 作为许可证。 选择 org.example.mynetwork 作为命名空间。 选择 No 当被问及是否生成一个空网络时。 第二步：定义一个商业网络 业务网络由资产，参与者，交易，访问控制规则以及可选的事件和查询组成。在前面步骤中创建的骨架业务网络中，有一个model（.cto）文件，其中将包含业务网络中所有资产，参与者和事务的类定义。骨架业务网络还包含permissions.acl具有基本访问控制规则的访问控制（）文档，logic.js包含事务处理器功能的脚本（）文件以及package.json包含业务网络元数据的文件。 建模资产，参与者和交易 第一个要更新的文档是model（.cto）文件。该文件使用Hyperledger Composer建模语言编写。模型文件包含每类资产，交易，参与者和事件的定义。它隐含地扩展了建模语言文档中描述的Hyperledger Composer系统模型。 打开 org.example.mynetwork.cto 模型文件。 用以下内容替换内容： Copy 复制 /** * My commodity trading network */ namespace org.example.mynetwork asset Commodity identified by tradingSymbol { o String tradingSymbol o String description o String mainExchange o Double quantity --&gt; Trader owner } participant Trader identified by tradeId { o String tradeId o String firstName o String lastName } transaction Trade { --&gt; Commodity commodity --&gt; Trader newOwner } 保存您的更改org.example.mynetwork.cto。 添加JavaScript事务逻辑 在模型文件中，Trade定义了事务，指定与资产和参与者的关系。事务处理函数文件包含执行模型文件中定义的事务的JavaScript逻辑。 该Trade交易旨在简单地接受Commodity正在交易的资产的标识符以及Trader要设置为新所有者的参与者的标识符。 打开 logic.js 脚本文件。 用以下内容替换内容： Copy 复制 /** * Track the trade of a commodity from one trader to another * @param {org.example.mynetwork.Trade} trade - the trade to be processed * @transaction */ async function tradeCommodity(trade) { trade.commodity.owner = trade.newOwner; let assetRegistry = await getAssetRegistry(&#39;org.example.mynetwork.Commodity&#39;); await assetRegistry.update(trade.commodity); } 保存您的更改logic.js。 添加访问控制 替换文件中的以下访问控制规则 permissions.acl ： Copy 复制 /** * Access control rules for tutorial-network */ rule Default { description: &quot;Allow all participants access to all resources&quot; participant: &quot;ANY&quot; operation: ALL resource: &quot;org.example.mynetwork.*&quot; action: ALLOW } rule SystemACL { description: &quot;System ACL to permit all access&quot; participant: &quot;ANY&quot; operation: ALL resource: &quot;org.hyperledger.composer.system.**&quot; action: ALLOW } 保存您的更改permissions.acl。 第三步：生成业务网络存档 现在已经定义了业务网络，它必须打包到可部署的业务网络存档（.bna）文件中。 使用命令行，导航到 tutorial-network 目录。 从tutorial-network目录中运行以下命令： Copy 复制 composer archive create -t dir -n . 该命令运行后，tutorial-network@0.0.1.bna在该tutorial-network目录中创建了一个调用的业务网络存档文件。 第四步：部署业务网络 创建.bna文件后，业务网络可以部署到Hyperledger Fabric实例。通常情况下，来自Fabric管理员的信息需要创建一个PeerAdmin身份，具有将链接代码安装到对等体的权限以及在composerchannel通道上启动链接代码的权限。但是，作为开发环境安装的一部分，PeerAdmin已经创建了一个身份。 业务网络安装完成后，网络就可以启动。为了最佳实践，应该创建一个新的标识以在部署后管理业务网络。这个身份被称为网络管理员。 检索正确的凭证 一个PeerAdmin有正确的凭据业务网络卡已为开发环境安装的一部分创建的。 部署业务网络 将业务网络部署到Hyperledger Fabric需要在对等设备上安装Hyperledger Composer业务网络，然后才能启动业务网络，并且必须创建新参与者，身份和关联卡才能成为网络管理员。最后，必须导入网络管理员业务网卡才能使用，然后可以ping通网络以检查它是否正在响应。 要从目录安装业务网络tutorial-network，请运行以下命令： Copy 复制 composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna 该composer network install命令需要一个PeerAdmin业务网卡（在这种情况下，预先创建并导入一个网卡）以及.bna定义业务网络的文件路径。 要启动业务网络，请运行以下命令： Copy 复制 composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card 该composer network start命令需要企业网卡，以及业务网络的管理员身份名称，业务网络的名称和版本以及要创建的文件的名称，以准备将其导入为业务网卡。 要将网络管理员标识导入为可用的业务网卡，请运行以下命令： Copy 复制 composer card import --file networkadmin.card 该composer card import命令需要指定的文件名composer network start来创建卡片。 要检查业务网络是否已成功部署，请运行以下命令以ping网络： Copy 复制 composer network ping --card admin@tutorial-network 该composer network ping命令需要使用企业网卡来识别要ping的网络。 第五步：生成REST服务器 Hyperledger Composer可以基于业务网络生成定制的REST API。为了开发Web应用程序，REST API提供了一个有用的语言无关抽象层。 要创建REST API，请导航到 tutorial-network 目录并运行以下命令： Copy 复制 composer-rest-server 输入 admin@tutorial-network 作为名片。 选择 决不询问是否在生成的API中使用名称空间时使用名称空间。 选择 没有 当被问及是否保护生成的API。 选择 是 当被问及是否启用事件发布时。 选择 没有 当被问及是否启用TLS安全。 Enter the name of the business network card to use: admin@tutorial-networkSpecify if you want namespaces in the generated REST API: never use namespacesSpecify if you want to use an API key to secure the REST API: NoSpecify if you want to enable authentication for the REST API using Passport: NoSpecify if you want to enable event publication over WebSockets: YesSpecify if you want to enable TLS security for the REST API: No 生成的API连接到部署的区块链和业务网络。 第六步：生成一个应用程序 Hyperledger Composer还可以生成针对REST API运行的Angular 4应用程序。 要创建您的Angular 4应用程序，请导航至 tutorial-network 目录并运行以下命令： Copy 复制 yo hyperledger-composer:angular 选择 是 当被要求连接到运行业务网络时。 输入标准package.json问题（项目名称，说明，作者姓名，作者电子邮件，许可证） 输入 admin@tutorial-network 为商业网卡。 选择连接到现有的REST API 输入 http://localhost 为REST服务器地址。 输入 3000 用于服务器端口。 选择名称空间不被使用 npm install 可能会报错 npm ERR! Unexpected end of JSON input while parsing near &#39;...m&quot;:&quot;&gt;=3&quot;},&quot;_hasShrink&#39; 设置淘宝镜像npm config set registry https://registry.npm.taobao.orgnpm cache clear --force再npm install 然后，Angular generator将为该项目创建脚手架并安装所有依赖项。要运行该应用程序，请导航到您的角度项目目录并运行 npm start 。这将引发一个针对您的REST API运行的Angular 4应用程序 http://localhost:4200 。 查看生成的API 启动浏览器并转到给定的URL（http：//0.0.0.0:3000/explorer）。你会看到类似这样的屏幕。 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/06/12/8cd2586be5f9c0ac12b2645069cfcb51.html","headline":"区块链Hyperledger Composer 环境安装 一（整理版）","dateModified":"2018-06-12T00:00:00+08:00","datePublished":"2018-06-12T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/06/12/8cd2586be5f9c0ac12b2645069cfcb51.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>区块链Hyperledger Composer 环境安装 一（整理版）</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <div></div>
  <h1><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Hyperledger Composer 环境安装</span></span></h1>
  <h2>1. 安装基本软件包</h2>
  <p><br></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">**如果使用Linux安装Hyperledger Composer，请注意以下建议：</span></span></p>
  <ul>
   <li><span style="color:#FF0000;"><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">以普通用户身份登录，而不是root用户。否则后续有很多问题</span></span></span></li>
   <li><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">不要</span></span><code>su</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">根。</span></span></li>
   <li><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">安装先决条件时，使用curl，然后使用sudo进行解压缩。</span></span></li>
   <li><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">以普通用户身份运行prereqs-ubuntu.sh。</span><span style="vertical-align:inherit;">它可能会提示输入root密码，因为它的某些操作需要以root身份运行。</span></span></li>
   <li><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">不要使用npm </span></span><code>sudo</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">或</span></span><code>su</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">root来使用它。</span></span></li>
   <li><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">避免以root身份全局安装节点。**</span></span></li>
  </ul>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您在Ubuntu上运行，则可以使用以下命令下载先决条件：</span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您在Ubuntu上运行，则可以使用以下命令下载先决条件：</span></span></p>
  <div class="highlight">
   Copy
   <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
   <pre><code class="language-bash">curl <span class="nt">-O</span> https://hyperledger.github.io/composer/latest/prereqs-ubuntu.sh

<span class="nb">chmod </span>u+x prereqs-ubuntu.sh
</code></pre>
  </div>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">接下来运行脚本 - 因为这个脚本在执行过程中使用了sudo，所以会提示您输入密码。</span></span></p>
  <div class="highlight">
   Copy
   <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
   <pre><code class="language-">./prereqs-ubuntu.sh
</code></pre>
  </div>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"></span></span></h2>
  <h1><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">2.安装组件</span></span></h1>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"></span></span></h2>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第1步：安装CLI工具</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Composer开发人员有几个有用的CLI工具。</span><span style="vertical-align:inherit;">最重要的是</span></span><code>composer-cli</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">，它包含了所有必要的操作，所以我们会先安装它。</span><span style="vertical-align:inherit;">接下来，我们也会拿起</span></span><code>generator-hyperledger-composer</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">，</span></span><code>composer-rest-server</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">并</span></span><code>Yeoman</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">加上</span></span><code>generator-hyperledger-composer</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span><span style="vertical-align:inherit;">最后3个不是开发环境的核心部分，但如果您遵循教程或开发与您的商业网络交互的应用程序，它们将非常有用，因此我们现在会安装它们。</span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">请注意，您</span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">不应该</span></span></strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">使用</span></span><code>su</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">或</span></span><code>sudo</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">为以下npm命令。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">基本的CLI工具：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm install -g composer-cli
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">在您的计算机上运行REST服务器以将您的业务网络公开为RESTful API的实用程序：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm install -g composer-rest-server
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">生成应用程序资产的有用工具：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm install -g generator-hyperledger-composer
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Yeoman是一种产生应用程序的工具，它利用</span></span><code>generator-hyperledger-composer</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm install -g yo
</code></pre>
    </div></li>
  </ol>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第2步：安装游乐场</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您已经在线尝试了Composer，则会看到浏览器应用程序“Playground”。</span><span style="vertical-align:inherit;">您也可以在您的开发机器上本地运行此功能，为您提供查看和演示业务网络的用户界面。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">用于简单编辑和测试的浏览器应用商业网络：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm install -g composer-playground
</code></pre>
    </div></li>
  </ol>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第3步：设置您的IDE</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">虽然浏览器应用程序</span></span><em><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">可</span></span></em><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">用于处理商业网络代码，但大多数用户更喜欢在IDE中工作。</span><span style="vertical-align:inherit;">我们最喜欢的是</span></span><code>VSCode</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">，因为Composer扩展可用。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">从此URL安装VSCode：</span><a href="https://code.visualstudio.com/download" rel="nofollow"><span style="vertical-align:inherit;">https</span></a><span style="vertical-align:inherit;">：//code.visualstudio.com/download</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">打开VSCode，进入扩展，然后</span></span><code>Hyperledger Composer</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">从市场中</span><span style="vertical-align:inherit;">搜索并安装</span><span style="vertical-align:inherit;">扩展。</span></span></p></li>
  </ol>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">步骤4：安装超级结构结构</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">此步骤为您提供本地Hyperledger Fabric运行时来部署您的业务网络。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">在您选择的目录中（我们将假设</span></span><code>~/fabric-dev-servers</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">），获取</span></span><code>.tar.gz</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">包含安装Hyperledger Fabric的工具</span><span style="vertical-align:inherit;">的</span><span style="vertical-align:inherit;">文件：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">mkdir ~/fabric-dev-servers &amp;&amp; cd ~/fabric-dev-servers

curl -O https://raw.githubusercontent.com/hyperledger/composer-tools/master/packages/fabric-dev-servers/fabric-dev-servers.tar.gz
tar -xvf fabric-dev-servers.tar.gz
</code></pre>
    </div><p><code>zip</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您愿意，也可以使用</span><span style="vertical-align:inherit;">A </span><span style="vertical-align:inherit;">：只需使用</span><span style="vertical-align:inherit;">上面的代码片段中</span><span style="vertical-align:inherit;">的</span><span style="vertical-align:inherit;">命令</span><span style="vertical-align:inherit;">替换</span></span><code>.tar.gz</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">文件</span></span><code>fabric-dev-servers.zip</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">并</span></span><code>tar -xvf</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">使用该</span></span><code>unzip</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">命令即可。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">使用刚刚下载并解压缩的脚本下载本地Hyperledger Fabric运行时：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">cd ~/fabric-dev-servers
./downloadFabric.sh
</code></pre>
    </div></li>
  </ol>
  <blockquote>
   <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">恭喜，您现在已经安装了典型开发环境所需的一切。</span><span style="vertical-align:inherit;">请继续阅读以了解您在此环境中开展并测试区块链商业网络时最常见的一些事情。</span></span></p>
  </blockquote>
  <h1><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">控制你的开发环境</span></span></h1>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">启动和停止Hyperledger结构</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">您可以使用一组脚本来控制运行时间，</span></span><code>~/fabric-dev-servers</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您遵循了建议的默认值</span><span style="vertical-align:inherit;">，</span><span style="vertical-align:inherit;">那么您</span><span style="vertical-align:inherit;">将在其中找到这些脚本</span><span style="vertical-align:inherit;">。 </span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第一次启动一个新的运行时，您需要运行启动脚本，然后生成一个PeerAdmin卡：</span></span></p>
  <div class="highlight">
   Copy
   <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
   <pre><code class="language-">    cd ~/fabric-dev-servers
    ./startFabric.sh
    ./createPeerAdminCard.sh
</code></pre>
  </div>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">您可以使用启动和停止运行时</span></span><code>~/fabric-dev-servers/stopFabric.sh</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">，然后再次启动它</span></span><code>~/fabric-dev-servers/startFabric.sh</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">在开发阶段结束时，你运行</span></span><code>~/fabric-dev-servers/stopFabric.sh</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">然后</span></span><code>~/fabric-dev-servers/teardownFabric.sh</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span><span style="vertical-align:inherit;">请注意，如果您已经运行了拆卸脚本，那么下次启动运行时，就需要像第一次启动时那样创建一个新的PeerAdmin卡。</span></span></p>
  <blockquote>
   <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">本地运行时旨在频繁启动，停止和拆除，以供开发使用。</span><span style="vertical-align:inherit;">如果您正在寻找具有更持久状态的运行时，则需要在开发环境外部运行一个运行时环境，并将业务网络部署到该环境。</span><span style="vertical-align:inherit;">这方面的例子包括通过Kubernetes运行它，或者在诸如IBM Cloud之类的托管平台上运行它。</span></span></p>
  </blockquote>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">启动网络应用程序（“Playground”）</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要启动Web应用程序，请运行：</span></span></p>
  <div class="highlight">
   Copy
   <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
   <pre><code class="language-">    composer-playground
</code></pre>
  </div>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">它通常会自动打开您的浏览器，地址如下：</span></span><a href="http://localhost:8080/login" rel="nofollow"><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">http：// localhost：8080 / login</span></span></a></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">您应该</span><span style="vertical-align:inherit;">在Web应用程序的“我的商业网络”屏幕上</span><span style="vertical-align:inherit;">看到</span></span><code>PeerAdmin@hlfv1</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">您使用该</span></span><code>createPeerAdminCard</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">脚本</span><span style="vertical-align:inherit;">创建</span><span style="vertical-align:inherit;">的</span><span style="vertical-align:inherit;">卡片</span><span style="vertical-align:inherit;">：如果您没有看到该</span><span style="vertical-align:inherit;">卡片</span><span style="vertical-align:inherit;">，则可能没有正确启动您的运行时间！</span></span></p>
  <blockquote>
   <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">恭喜你，所有组件都在运行，并且在完成开发会话时，你也知道如何停下来并拆除它们。</span></span></p>
  </blockquote>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"></span></span></h2>
  <h1><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">3.更新开发环境</span></span></h1>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您已经安装了Hyperledger Composer开发工具，并且希望将安装更新到最新版本的Hyperledger Composer，请按照这些说明进行操作。</span></span></p>
  <h1><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">更新组件</span></span></h1>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第1步：更新CLI工具</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">任何正在运行的CLI工具实例都应该在继续之前停止。</span><span style="vertical-align:inherit;">如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。</span></span><code>composer-rest-server</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您不确定是否有任何正在运行的实例，则</span><span style="vertical-align:inherit;">可以查找该进程</span><span style="vertical-align:inherit;">。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">卸载所有CLI工具的当前安装版本：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">安装所有CLI工具的最新版本：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm install -g composer-cli composer-rest-server generator-hyperledger-composer
</code></pre>
    </div></li>
  </ol>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第2步：更新Playground</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您在开发机器上安装了浏览器应用程序“Playground”，则还需要进行更新。</span><span style="vertical-align:inherit;">如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。</span></span><code>composer-playground</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您不确定是否有任何正在运行的实例，则</span><span style="vertical-align:inherit;">可以查找该进程</span><span style="vertical-align:inherit;">。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">卸载当前安装的浏览器应用程序版本：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm uninstall -g composer-playground
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">安装最新版本的浏览器应用程序：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm install -g composer-playground
</code></pre>
    </div></li>
  </ol>
  <blockquote>
   <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">恭喜，您已经使用最新版本的开发工具更新了您的开发环境。</span><span style="vertical-align:inherit;">您现在可以继续使用最新功能和错误修复来开发您的区块链应用程序！</span></span></p>
  </blockquote>
  <div>
   <br>
  </div>
  <div>
   <br>
  </div>
  <p><br></p>
  <p><br></p>
  <p><br></p>
  <p></p>
  <h1><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">4. 卸载组件（不需要重新安装跳过这一步）</span></span></h1>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第1步：卸载CLI工具</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">任何正在运行的CLI工具实例都应该在继续之前停止。</span><span style="vertical-align:inherit;">如果您有任何正在运行的Composer REST服务器实例，请确保这些实例在继续之前停止。</span></span><code>composer-rest-server</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您不确定是否有任何正在运行的实例，则</span><span style="vertical-align:inherit;">可以查找该进程</span><span style="vertical-align:inherit;">。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">卸载所有CLI工具的当前安装版本：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm uninstall -g composer-cli composer-rest-server generator-hyperledger-composer
</code></pre>
    </div></li>
  </ol>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第2步：卸载Playground</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您在开发计算机上安装了浏览器应用程序“Playground”，则还需要卸载此应用程序。</span><span style="vertical-align:inherit;">如果您有任何正在运行的浏览器应用程序实例，请确保在继续之前停止这些实例。</span></span><code>composer-playground</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您不确定是否有任何正在运行的实例，则</span><span style="vertical-align:inherit;">可以查找该进程</span><span style="vertical-align:inherit;">。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">卸载当前安装的浏览器应用程序版本：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">npm uninstall -g composer-playground
</code></pre>
    </div></li>
  </ol>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第3步：删除业务网卡存储</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">商业网卡存储在商业网络卡商店中，默认情况下它是当前用户主目录中的一个目录。</span><span style="vertical-align:inherit;">删除此目录以删除所有业务网卡。</span><span style="vertical-align:inherit;">要注意的是，这也将删除存储在商业网络存储卡中的所有身份（公共证书和私钥），因此您可能希望在继续之前对其进行备份！</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">删除商业网络卡商店：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">rm -rf ~/.composer
</code></pre>
    </div></li>
  </ol>
  <h3><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">步骤4：卸载Hyperledger Fabric</span></span></h3>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">您可以使用一组脚本来控制本地Hyperledger Fabric运行时，</span></span><code>~/fabric-dev-servers</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">如果您遵循了建议的默认值</span><span style="vertical-align:inherit;">，您将在其中找到这些脚本</span><span style="vertical-align:inherit;">。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">停止本地Hyperledger Fabric运行时并删除任何运行时Docker容器或映像：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">~/fabric-dev-servers/stopFabric.sh
~/fabric-dev-servers/teardownFabric.sh
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">卸载本地Hyperledger Fabric运行时：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">rm -rf ~/fabric-dev-servers
</code></pre>
    </div></li>
  </ol>
  <blockquote>
   <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">恭喜，你已经卸载了你的开发环境。</span><span style="vertical-align:inherit;">要继续开发区块链应用程序，您需要从头开始安装开发工具。</span></span></p>
  </blockquote>
  <p><br></p>
  <h2>5. 开发教程<br></h2>
  <p></p>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第一步：创建业务网络结构</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Hyperledger Composer的关键概念是</span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">商业网络定义（BND）</span></span></strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span><span style="vertical-align:inherit;">它为您的区块链解决方案定义了数据模型，事务逻辑和访问控制规则。</span><span style="vertical-align:inherit;">要创建一个BND，我们需要在磁盘上创建一个合适的项目结构。</span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">最简单的入门方法是使用Yeoman生成器创建骨架业务网络。</span><span style="vertical-align:inherit;">这将创建一个包含业务网络的所有组件的目录。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">使用Yeoman创建一个骨架业务网络。</span><span style="vertical-align:inherit;">此命令将需要业务网络名称，说明，作者姓名，作者电子邮件地址，许可证选择和命名空间。</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制 <br></span></span>
     <pre><code class="language-">yo hyperledger-composer:businessnetwork</code></pre>
    </div></li>
   <li>
    <div class="highlight">
     <pre><code class="language-">如果为root用户安装，此处可能会报错，设置如下</code></pre>
    </div></li>
   <li>
    <div class="highlight">
     <pre><code class="language-">sed -i -e '/rootCheck/d' "${NPM_CONFIG_PREFIX}/lib/node_modules/yo/lib/cli.js"
export NPM_CONFIG_PREFIX=$(npm config get prefix)&nbsp;
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">输入 </span></span> <code>tutorial-network</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 网络名称以及所需的描述信息，作者姓名和作者电子邮件。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span> <code>Apache-2.0</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 作为许可证。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span> <code>org.example.mynetwork</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 作为命名空间。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span> <code>No</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 当被问及是否生成一个空网络时。</span></span></p></li>
  </ol>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第二步：定义一个商业网络</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">业务网络由资产，参与者，交易，访问控制规则以及可选的事件和查询组成。</span><span style="vertical-align:inherit;">在前面步骤中创建的骨架业务网络中，有一个model（</span></span><code>.cto</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">）文件，其中将包含业务网络中所有资产，参与者和事务的类定义。</span><span style="vertical-align:inherit;">骨架业务网络还包含</span></span><code>permissions.acl</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">具有基本访问控制规则</span><span style="vertical-align:inherit;">的访问控制（</span><span style="vertical-align:inherit;">）文档，</span></span><code>logic.js</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">包含事务处理器功能</span><span style="vertical-align:inherit;">的脚本（</span><span style="vertical-align:inherit;">）文件以及</span></span><code>package.json</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">包含业务网络元数据</span><span style="vertical-align:inherit;">的</span><span style="vertical-align:inherit;">文件。</span></span></p>
  <h4><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">建模资产，参与者和交易</span></span></h4>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第一个要更新的文档是model（</span></span><code>.cto</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">）文件。</span><span style="vertical-align:inherit;">该文件使用</span></span><a href="https://hyperledger.github.io/composer/latest/reference/cto_language.html" rel="nofollow"><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Hyperledger Composer建模语言</span></span></a><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">编写</span><span style="vertical-align:inherit;">。</span><span style="vertical-align:inherit;">模型文件包含每类资产，交易，参与者和事件的定义。</span><span style="vertical-align:inherit;">它隐含地扩展了建模语言文档中描述的Hyperledger Composer系统模型。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">打开 </span></span> <code>org.example.mynetwork.cto</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 模型文件。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">用以下内容替换内容：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">/**
 * My commodity trading network
 */
namespace org.example.mynetwork
asset Commodity identified by tradingSymbol {
    o String tradingSymbol
    o String description
    o String mainExchange
    o Double quantity
    --&gt; Trader owner
}
participant Trader identified by tradeId {
    o String tradeId
    o String firstName
    o String lastName
}
transaction Trade {
    --&gt; Commodity commodity
    --&gt; Trader newOwner
}
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">保存您的更改</span></span><code>org.example.mynetwork.cto</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span></span></p></li>
  </ol>
  <h4><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">添加JavaScript事务逻辑</span></span></h4>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">在模型文件中，</span></span><code>Trade</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">定义</span><span style="vertical-align:inherit;">了</span><span style="vertical-align:inherit;">事务，指定与资产和参与者的关系。</span><span style="vertical-align:inherit;">事务处理函数文件包含执行模型文件中定义的事务的JavaScript逻辑。</span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">该</span></span><code>Trade</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">交易旨在简单地接受</span></span><code>Commodity</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">正在交易</span><span style="vertical-align:inherit;">的</span><span style="vertical-align:inherit;">资产的标识符以及</span></span><code>Trader</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要设置为新所有者</span><span style="vertical-align:inherit;">的</span><span style="vertical-align:inherit;">参与者</span><span style="vertical-align:inherit;">的标识符</span><span style="vertical-align:inherit;">。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">打开 </span></span> <code>logic.js</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 脚本文件。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">用以下内容替换内容：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-"><span class="sd">/** * Track the trade of a commodity from one trader to another * @param {org.example.mynetwork.Trade} trade - the trade to be processed * @transaction */</span>
<span class="k">async</span> <span class="k">function</span> <span class="nf">tradeCommodity</span><span class="p">(</span><span class="nx">trade</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="o">.</span><span class="nx">owner</span> <span class="o">=</span> <span class="nx">trade</span><span class="o">.</span><span class="nx">newOwner</span><span class="p">;</span>
    <span class="nx">let</span> <span class="nx">assetRegistry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getAssetRegistry</span><span class="p">(</span><span class="s1">'org.example.mynetwork.Commodity'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">assetRegistry</span><span class="o">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">保存您的更改</span></span><code>logic.js</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span></span></p></li>
  </ol>
  <h4><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">添加访问控制</span></span></h4>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">替换文件中的以下访问控制规则 </span></span> <code>permissions.acl</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">/**
 * Access control rules for tutorial-network
 */
rule Default {
    description: "Allow all participants access to all resources"
    participant: "ANY"
    operation: ALL
    resource: "org.example.mynetwork.*"
    action: ALLOW
}

rule SystemACL {
  description:  "System ACL to permit all access"
  participant: "ANY"
  operation: ALL
  resource: "org.hyperledger.composer.system.**"
  action: ALLOW
}
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">保存您的更改</span></span><code>permissions.acl</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span></span></p></li>
  </ol>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第三步：生成业务网络存档</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">现在已经定义了业务网络，它必须打包到可部署的业务网络存档（</span></span><code>.bna</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">）文件中。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">使用命令行，导航到 </span></span> <code>tutorial-network</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 目录。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">从</span></span><code>tutorial-network</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">目录中运行以下命令：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">composer archive create -t dir -n .
</code></pre>
    </div></li>
  </ol>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">该命令运行后，</span></span><code>tutorial-network@0.0.1.bna</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">在该</span></span><code>tutorial-network</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">目录中</span><span style="vertical-align:inherit;">创建了一个</span><span style="vertical-align:inherit;">调用的业务网络存档文件</span><span style="vertical-align:inherit;">。</span></span></p>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第四步：部署业务网络</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">创建</span></span><code>.bna</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">文件后，业务网络可以部署到Hyperledger Fabric实例。</span><span style="vertical-align:inherit;">通常情况下，来自Fabric管理员的信息需要创建一个</span></span><code>PeerAdmin</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">身份，具有将链接代码安装到对等体的权限以及在</span></span><code>composerchannel</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">通道</span><span style="vertical-align:inherit;">上启动链接代码的权限</span><span style="vertical-align:inherit;">。</span><span style="vertical-align:inherit;">但是，作为开发环境安装的一部分，</span></span><code>PeerAdmin</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">已经创建了</span><span style="vertical-align:inherit;">一个</span><span style="vertical-align:inherit;">身份。</span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">业务网络安装完成后，网络就可以启动。</span><span style="vertical-align:inherit;">为了最佳实践，应该创建一个新的标识以在部署后管理业务网络。</span><span style="vertical-align:inherit;">这个身份被称为网络管理员。</span></span></p>
  <h4><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">检索正确的凭证</span></span></h4>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">一个</span></span><code>PeerAdmin</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">有正确的凭据业务网络卡已为开发环境安装的一部分创建的。</span></span></p>
  <h4><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">部署业务网络</span></span></h4>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">将业务网络部署到Hyperledger Fabric需要在对等设备上安装Hyperledger Composer业务网络，然后才能启动业务网络，并且必须创建新参与者，身份和关联卡才能成为网络管理员。</span><span style="vertical-align:inherit;">最后，必须导入网络管理员业务网卡才能使用，然后可以ping通网络以检查它是否正在响应。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要从目录安装业务网络</span></span><code>tutorial-network</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">，请运行以下命令：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna
</code></pre>
    </div><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">该</span></span><code>composer network install</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">命令需要一个PeerAdmin业务网卡（在这种情况下，预先创建并导入一个网卡）以及</span></span><code>.bna</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">定义业务网络</span><span style="vertical-align:inherit;">的文件路径</span><span style="vertical-align:inherit;">。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要启动业务网络，请运行以下命令：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card
</code></pre>
    </div><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">该</span></span><code>composer network start</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">命令需要企业网卡，以及业务网络的管理员身份名称，业务网络的名称和版本以及要创建的文件的名称，以准备将其导入为业务网卡。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要将网络管理员标识导入为可用的业务网卡，请运行以下命令：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">composer card import --file networkadmin.card
</code></pre>
    </div><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">该</span></span><code>composer card import</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">命令需要指定的文件名</span></span><code>composer network start</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">来创建卡片。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要检查业务网络是否已成功部署，请运行以下命令以ping网络：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">composer network ping --card admin@tutorial-network
</code></pre>
    </div></li>
  </ol>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">该</span></span><code>composer network ping</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">命令需要使用企业网卡来识别要ping的网络。</span></span></p>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第五步：生成REST服务器</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Hyperledger Composer可以基于业务网络生成定制的REST API。</span><span style="vertical-align:inherit;">为了开发Web应用程序，REST API提供了一个有用的语言无关抽象层。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要创建REST API，请导航到 </span></span> <code>tutorial-network</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 目录并运行以下命令：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">composer-rest-server
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">输入 </span></span> <code>admin@tutorial-network</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 作为名片。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">决不</span></span></strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">询问是否在生成的API中</span><strong><span style="vertical-align:inherit;">使用名称空间</span></strong><span style="vertical-align:inherit;">时使用名称空间。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">没有</span></span></strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 当被问及是否保护生成的API。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">是</span></span></strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 当被问及是否启用事件发布时。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">没有</span></span></strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 当被问及是否启用TLS安全。</span></span></p></li>
  </ol>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Enter the name of the business network card to use: admin@tutorial-network<br>Specify if you want namespaces in the generated REST API: never use namespaces<br>Specify if you want to use an API key to secure the REST API: No<br>Specify if you want to enable authentication for the REST API using Passport: No<br>Specify if you want to enable event publication over WebSockets: Yes<br>Specify if you want to enable TLS security for the REST API: No<br></span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">生成的API连接到部署的区块链和业务网络。</span></span></p>
  <h2><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">第六步：生成一个应用程序</span></span></h2>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">Hyperledger Composer还可以生成针对REST API运行的Angular 4应用程序。</span></span></p>
  <ol>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">要创建您的Angular 4应用程序，请导航至 </span></span> <code>tutorial-network</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 目录并运行以下命令：</span></span></p>
    <div class="highlight">
     Copy
     <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">复制</span></span>
     <pre><code class="language-">yo hyperledger-composer:angular
</code></pre>
    </div></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择 </span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">是</span></span></strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 当被要求连接到运行业务网络时。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">输入标准</span></span><code>package.json</code><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">问题（项目名称，说明，作者姓名，作者电子邮件，许可证）</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">输入 </span></span> <code>admin@tutorial-network</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 为商业网卡。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择</span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">连接到现有的REST API</span></span></strong></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">输入 </span></span> <code>http://localhost</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 为REST服务器地址。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">输入 </span></span> <code>3000</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;"> 用于服务器端口。</span></span></p></li>
   <li><p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">选择</span></span><strong><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">名称空间不被使用</span></span></strong></p></li>
  </ol>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"><br></span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">npm install 可能会报错<br></span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">npm ERR! Unexpected end of JSON input while parsing near '...m":"&gt;=3"},"_hasShrink'</span></span></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;"></span></span>设置淘宝镜像<br>npm config set registry https://registry.npm.taobao.org<br>npm cache clear --force<br>再npm install<br></p>
  <p></p>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">然后，Angular generator将为该项目创建脚手架并安装所有依赖项。</span><span style="vertical-align:inherit;">要运行该应用程序，请导航到您的角度项目目录并运行</span></span> <code>npm start</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span><span style="vertical-align:inherit;">这将引发一个针对您的REST API运行的Angular 4应用程序</span></span> <code>http://localhost:4200</code> <span style="vertical-align:inherit;"><span style="vertical-align:inherit;">。</span></span></p>
  <br>
  <p></p>
  <h4><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">查看生成的API</span></span></h4>
  <p><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">启动浏览器并转到给定的URL（</span></span><a href="http://0.0.0.0:3000/explorer" rel="nofollow"><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">http：//0.0.0.0:3000/explorer</span></span></a><span style="vertical-align:inherit;"><span style="vertical-align:inherit;">）。</span><span style="vertical-align:inherit;">你会看到类似这样的屏幕。</span></span></p>
  <p></p>
  <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180612134758309?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21laWd1b3BhaTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="">
  <br>
  <p></p>
  <p></p>
  <p></p>
  <p></p>
  <div></div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/meiguopai1/article/details/80664099,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/meiguopai1/article/details/80664099,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
