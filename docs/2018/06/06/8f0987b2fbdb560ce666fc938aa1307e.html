<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>【策略研究】集合竞价选股（附源码） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="【策略研究】集合竞价选股（附源码）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="什么是集合竞价？有什么用途？ ​ 所谓集合竞价就是在当天还没有开盘之前，你可根据前一天的收盘价和对当日股市的预测来输入股票价格，在集合竞价时间里输入计算机主机的所有下单，按照价格优先和时间优先的原则计算出最大成交量的价格，这个价格就会是集合竞价的成交价格，而这个过程被称为集合竞价。 ​ 每天开盘价在技术分析上具有重要的意义，目前世界各国股市市场均采用集合竞价的方式来确定开盘价，因为这样可以在一定程度上防止人为操纵现象。 策略实现（基于掘金量化平台） 策略思想 获取沪深300的成份股数据，并统计其30天内开盘价大于前收盘价的天数，并在该天数大于阈值18的时候加入股票池。 对不在股票池的股票平仓，并等权配置股票池的标的股票，每次交易间隔1个月。 策略主要步骤实现 获取当前交易日日期 now = context.now = context.now ​ 直接调用context.now函数，返回“datetime.datetime”格式 获取上一交易日日期 last_day = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) ​ 获取上一交易日可调用get_previous_trading_date函数，返回值为字符串格式： exchang需要设置交易市场代码。 date需要设置指定日期。 获取当天有交易的股票 not_suspended_info = get_history_instruments(symbols=&#39;SHSE.000300&#39;, start_date=now, end_date=now) &nbsp; &nbsp;not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]]not_suspended_info = get_history_instruments(symbols=&#39;SHSE.000300&#39;, start_date=now, end_date=now) &nbsp; &nbsp;not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]] ​ 获取当天有交易的股票，即非停牌的股票，首先需获取停牌信息，这里需调用get_history_instruments函数，返回值类型为list[dict]，之后就是将所提取的“字典”转换为”list“： symbols需要设置订阅的标的代码。 start_date和end_date需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。 固定月初调仓 schedule(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;)(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;) ​ 固定时间调仓可使用schedule函数进行定时任务配置： schedule_func为调用的策略函数的名称。 date_rule可设为1m（一月）。 time_rule为开仓日的开仓时间，这里设为每月第一个交易日的09:40:00。 获取沪深300成分股 stock300 = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day,end_date=last_day)[0][&#39;constituents&#39;].keys() = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day,end_date=last_day)[0][&#39;constituents&#39;].keys() ​ 获取指数成分股可调用函数get_history_constituents或者get_constituents，返回值类型为list[dict]，这里调用get_history_constituents是因为再回测时需要获取上一交易日的成分股，而get_constituents只能获取最新的成分股： index需要设置获取指数的代码。 start_date和end_date需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。 获取过去交易日的历史信息 return_index_his = history_n(symbol=symbol, frequency=&#39;1d&#39;, count=30, fields=&#39;close,preclose&#39;,fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=last_day, df=True) = history_n(symbol=symbol, frequency=&#39;1d&#39;, count=30, fields=&#39;close,preclose&#39;,fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=last_day, df=True) ​ 获取历史信息需要调用histor_n函数，默认返回值为“字典“格式，如果参数df设为True，则返回&quot;dataframe&quot;格式 symbol设置所需获取的标的代码。 frequency获取历史信息的频率，如日线数据设置为1d。 count需要设置获取的bar的数量。 fileds设置返回值的种类。 fill_missing需要设置对于空值的填充方式， None- 不填充，NaN- 用空值填充， Last- 用上一个值填充，默认 None。 adjust需要设置对于复权的处理，ADJUST_NONE or 0: 不复权, ADJUST_PREV or 1: 前复权, ADJUST_POST or 2: 后复权， 默认不复权。 end_time需设置获取历史信息的结束时间。 获取持仓信息 positions = context.account().positions() = context.account().positions() ​ 在判断平仓条件时，需要获取持仓信息（包含持仓均价），这就需要调用context.account().position函数，返回字典型。 策略回测分析 分析 ​ 我们选取了2017年7月至2017年10月作为回测周期，应用“EV/EBITDA”单因子作为选股基础。可以看出： 胜率（具有盈利的平仓次数与总平仓次数之比）达到了62.5%，也即策略每十次开仓，有六次是盈利的。 卡玛比率（年化收益率与历史最大回撤之比）是使用最大回撤率来衡量风险。采用最大回撤率来衡量风险，关注的是最极端的情况。卡玛比率越高表示策略承受每单位最大损失获得的报酬越高。在这里卡玛比率超过了20。 夏普比率（年化收益率减无风险收益率的差收益波动率之比）超过5，也即承受一单位的风险，会有超过五单位的收益回报 策略收益曲线总体稳定，适合在趋势行情中操作。 &nbsp; 集合竞价选股策略源码： &nbsp; # coding=utf-8 from __future__ import print_function, absolute_import, unicode_literals from gm.api import * &nbsp; &#39;&#39;&#39; 本策略通过获取SHSE.000300沪深300的成份股数据并统计其30天内 开盘价大于前收盘价的天数,并在该天数大于阈值10的时候加入股票池 随后对不在股票池的股票平仓并等权配置股票池的标的,每次交易间隔1个月. 回测数据为:SHSE.000300在2015-01-15的成份股 回测时间为:2017-07-01 08:00:00到2017-10-01 16:00:00 &#39;&#39;&#39; &nbsp; &nbsp; def init(context): # 每月第一个交易日的09:40 定时执行algo任务 schedule(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;) # context.count_bench累计天数阙值 context.count_bench = 10 # 用于对比的天数 context.count = 30 # 最大交易资金比例 context.ratio = 0.8 &nbsp; &nbsp; def algo(context): # 获取当前时间 now = context.now # 获取上一个交易日 last_day = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) # 获取沪深300成份股 context.stock300 = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day, end_date=last_day)[0][&#39;constituents&#39;].keys() # 获取当天有交易的股票 not_suspended_info = get_history_instruments(symbols=context.stock300, start_date=now, end_date=now) not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]] &nbsp; trade_symbols = [] if not not_suspended_symbols: print(&#39;没有当日交易的待选股票&#39;) return &nbsp; for stock in not_suspended_symbols: recent_data = history_n(symbol=stock, frequency=&#39;1d&#39;, count=context.count, fields=&#39;pre_close,open&#39;, fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=now, df=True) diff = recent_data[&#39;open&#39;] - recent_data[&#39;pre_close&#39;] # 获取累计天数超过阙值的标的池.并剔除当天没有交易的股票 if len(diff[diff &gt; 0]) &gt;= context.count_bench: trade_symbols.append(stock) &nbsp; print(&#39;本次股票池有股票数目: &#39;, len(trade_symbols)) # 计算权重 percent = 1.0 / len(trade_symbols) * context.ratio # 获取当前所有仓位 positions = context.account().positions() # 如标的池有仓位,平不在标的池的仓位 for position in positions: symbol = position[&#39;symbol&#39;] if symbol not in trade_symbols: order_target_percent(symbol=symbol, percent=0, order_type=OrderType_Market, position_side=PositionSide_Long) print(&#39;市价单平不在标的池的&#39;, symbol) &nbsp; # 对标的池进行操作 for symbol in trade_symbols: order_target_percent(symbol=symbol, percent=percent, order_type=OrderType_Market, position_side=PositionSide_Long) print(symbol, &#39;以市价单调整至权重&#39;, percent) &nbsp; &nbsp; if __name__ == &#39;__main__&#39;: &#39;&#39;&#39; strategy_id策略ID,由系统生成 filename文件名,请与本文件名保持一致 mode实时模式:MODE_LIVE回测模式:MODE_BACKTEST token绑定计算机的ID,可在系统设置-密钥管理中生成 backtest_start_time回测开始时间 backtest_end_time回测结束时间 backtest_adjust股票复权方式不复权:ADJUST_NONE前复权:ADJUST_PREV后复权:ADJUST_POST backtest_initial_cash回测初始资金 backtest_commission_ratio回测佣金比例 backtest_slippage_ratio回测滑点比例 &#39;&#39;&#39; run(strategy_id=&#39;strategy_id&#39;, filename=&#39;main.py&#39;, mode=MODE_BACKTEST, token=&#39;token_id&#39;, backtest_start_time=&#39;2017-07-01 08:00:00&#39;, backtest_end_time=&#39;2017-10-01 16:00:00&#39;, backtest_adjust=ADJUST_PREV, backtest_initial_cash=10000000, backtest_commission_ratio=0.0001, backtest_slippage_ratio=0.0001) 文章来源：掘金量化交易平台, 转载请注明出处！ ---------------------------------------------------------------------------------------------------------------------------------------------------------- 更多经典股票/期货量化策略源码查看： 1 双均线策略(期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/153 2 alpha对冲(股票+期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/101 3 集合竞价选股(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/102 4 多因子选股(股票)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/103 5 网格交易(期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/104 6 指数增强(股票)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/105 7 跨品种套利(期货)量化策略源码 https://www.myquant.cn/docs/python_strategyies/106 8 跨期套利(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/107 9 日内回转交易(股票)量化策略源码 https://www.myquant.cn/docs/python_strategyies/108 10 做市商交易(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/109 11 海龟交易法(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/110 12 行业轮动(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/111 13 机器学习(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/112 阅读更多" />
<meta property="og:description" content="什么是集合竞价？有什么用途？ ​ 所谓集合竞价就是在当天还没有开盘之前，你可根据前一天的收盘价和对当日股市的预测来输入股票价格，在集合竞价时间里输入计算机主机的所有下单，按照价格优先和时间优先的原则计算出最大成交量的价格，这个价格就会是集合竞价的成交价格，而这个过程被称为集合竞价。 ​ 每天开盘价在技术分析上具有重要的意义，目前世界各国股市市场均采用集合竞价的方式来确定开盘价，因为这样可以在一定程度上防止人为操纵现象。 策略实现（基于掘金量化平台） 策略思想 获取沪深300的成份股数据，并统计其30天内开盘价大于前收盘价的天数，并在该天数大于阈值18的时候加入股票池。 对不在股票池的股票平仓，并等权配置股票池的标的股票，每次交易间隔1个月。 策略主要步骤实现 获取当前交易日日期 now = context.now = context.now ​ 直接调用context.now函数，返回“datetime.datetime”格式 获取上一交易日日期 last_day = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) ​ 获取上一交易日可调用get_previous_trading_date函数，返回值为字符串格式： exchang需要设置交易市场代码。 date需要设置指定日期。 获取当天有交易的股票 not_suspended_info = get_history_instruments(symbols=&#39;SHSE.000300&#39;, start_date=now, end_date=now) &nbsp; &nbsp;not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]]not_suspended_info = get_history_instruments(symbols=&#39;SHSE.000300&#39;, start_date=now, end_date=now) &nbsp; &nbsp;not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]] ​ 获取当天有交易的股票，即非停牌的股票，首先需获取停牌信息，这里需调用get_history_instruments函数，返回值类型为list[dict]，之后就是将所提取的“字典”转换为”list“： symbols需要设置订阅的标的代码。 start_date和end_date需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。 固定月初调仓 schedule(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;)(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;) ​ 固定时间调仓可使用schedule函数进行定时任务配置： schedule_func为调用的策略函数的名称。 date_rule可设为1m（一月）。 time_rule为开仓日的开仓时间，这里设为每月第一个交易日的09:40:00。 获取沪深300成分股 stock300 = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day,end_date=last_day)[0][&#39;constituents&#39;].keys() = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day,end_date=last_day)[0][&#39;constituents&#39;].keys() ​ 获取指数成分股可调用函数get_history_constituents或者get_constituents，返回值类型为list[dict]，这里调用get_history_constituents是因为再回测时需要获取上一交易日的成分股，而get_constituents只能获取最新的成分股： index需要设置获取指数的代码。 start_date和end_date需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。 获取过去交易日的历史信息 return_index_his = history_n(symbol=symbol, frequency=&#39;1d&#39;, count=30, fields=&#39;close,preclose&#39;,fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=last_day, df=True) = history_n(symbol=symbol, frequency=&#39;1d&#39;, count=30, fields=&#39;close,preclose&#39;,fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=last_day, df=True) ​ 获取历史信息需要调用histor_n函数，默认返回值为“字典“格式，如果参数df设为True，则返回&quot;dataframe&quot;格式 symbol设置所需获取的标的代码。 frequency获取历史信息的频率，如日线数据设置为1d。 count需要设置获取的bar的数量。 fileds设置返回值的种类。 fill_missing需要设置对于空值的填充方式， None- 不填充，NaN- 用空值填充， Last- 用上一个值填充，默认 None。 adjust需要设置对于复权的处理，ADJUST_NONE or 0: 不复权, ADJUST_PREV or 1: 前复权, ADJUST_POST or 2: 后复权， 默认不复权。 end_time需设置获取历史信息的结束时间。 获取持仓信息 positions = context.account().positions() = context.account().positions() ​ 在判断平仓条件时，需要获取持仓信息（包含持仓均价），这就需要调用context.account().position函数，返回字典型。 策略回测分析 分析 ​ 我们选取了2017年7月至2017年10月作为回测周期，应用“EV/EBITDA”单因子作为选股基础。可以看出： 胜率（具有盈利的平仓次数与总平仓次数之比）达到了62.5%，也即策略每十次开仓，有六次是盈利的。 卡玛比率（年化收益率与历史最大回撤之比）是使用最大回撤率来衡量风险。采用最大回撤率来衡量风险，关注的是最极端的情况。卡玛比率越高表示策略承受每单位最大损失获得的报酬越高。在这里卡玛比率超过了20。 夏普比率（年化收益率减无风险收益率的差收益波动率之比）超过5，也即承受一单位的风险，会有超过五单位的收益回报 策略收益曲线总体稳定，适合在趋势行情中操作。 &nbsp; 集合竞价选股策略源码： &nbsp; # coding=utf-8 from __future__ import print_function, absolute_import, unicode_literals from gm.api import * &nbsp; &#39;&#39;&#39; 本策略通过获取SHSE.000300沪深300的成份股数据并统计其30天内 开盘价大于前收盘价的天数,并在该天数大于阈值10的时候加入股票池 随后对不在股票池的股票平仓并等权配置股票池的标的,每次交易间隔1个月. 回测数据为:SHSE.000300在2015-01-15的成份股 回测时间为:2017-07-01 08:00:00到2017-10-01 16:00:00 &#39;&#39;&#39; &nbsp; &nbsp; def init(context): # 每月第一个交易日的09:40 定时执行algo任务 schedule(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;) # context.count_bench累计天数阙值 context.count_bench = 10 # 用于对比的天数 context.count = 30 # 最大交易资金比例 context.ratio = 0.8 &nbsp; &nbsp; def algo(context): # 获取当前时间 now = context.now # 获取上一个交易日 last_day = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) # 获取沪深300成份股 context.stock300 = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day, end_date=last_day)[0][&#39;constituents&#39;].keys() # 获取当天有交易的股票 not_suspended_info = get_history_instruments(symbols=context.stock300, start_date=now, end_date=now) not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]] &nbsp; trade_symbols = [] if not not_suspended_symbols: print(&#39;没有当日交易的待选股票&#39;) return &nbsp; for stock in not_suspended_symbols: recent_data = history_n(symbol=stock, frequency=&#39;1d&#39;, count=context.count, fields=&#39;pre_close,open&#39;, fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=now, df=True) diff = recent_data[&#39;open&#39;] - recent_data[&#39;pre_close&#39;] # 获取累计天数超过阙值的标的池.并剔除当天没有交易的股票 if len(diff[diff &gt; 0]) &gt;= context.count_bench: trade_symbols.append(stock) &nbsp; print(&#39;本次股票池有股票数目: &#39;, len(trade_symbols)) # 计算权重 percent = 1.0 / len(trade_symbols) * context.ratio # 获取当前所有仓位 positions = context.account().positions() # 如标的池有仓位,平不在标的池的仓位 for position in positions: symbol = position[&#39;symbol&#39;] if symbol not in trade_symbols: order_target_percent(symbol=symbol, percent=0, order_type=OrderType_Market, position_side=PositionSide_Long) print(&#39;市价单平不在标的池的&#39;, symbol) &nbsp; # 对标的池进行操作 for symbol in trade_symbols: order_target_percent(symbol=symbol, percent=percent, order_type=OrderType_Market, position_side=PositionSide_Long) print(symbol, &#39;以市价单调整至权重&#39;, percent) &nbsp; &nbsp; if __name__ == &#39;__main__&#39;: &#39;&#39;&#39; strategy_id策略ID,由系统生成 filename文件名,请与本文件名保持一致 mode实时模式:MODE_LIVE回测模式:MODE_BACKTEST token绑定计算机的ID,可在系统设置-密钥管理中生成 backtest_start_time回测开始时间 backtest_end_time回测结束时间 backtest_adjust股票复权方式不复权:ADJUST_NONE前复权:ADJUST_PREV后复权:ADJUST_POST backtest_initial_cash回测初始资金 backtest_commission_ratio回测佣金比例 backtest_slippage_ratio回测滑点比例 &#39;&#39;&#39; run(strategy_id=&#39;strategy_id&#39;, filename=&#39;main.py&#39;, mode=MODE_BACKTEST, token=&#39;token_id&#39;, backtest_start_time=&#39;2017-07-01 08:00:00&#39;, backtest_end_time=&#39;2017-10-01 16:00:00&#39;, backtest_adjust=ADJUST_PREV, backtest_initial_cash=10000000, backtest_commission_ratio=0.0001, backtest_slippage_ratio=0.0001) 文章来源：掘金量化交易平台, 转载请注明出处！ ---------------------------------------------------------------------------------------------------------------------------------------------------------- 更多经典股票/期货量化策略源码查看： 1 双均线策略(期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/153 2 alpha对冲(股票+期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/101 3 集合竞价选股(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/102 4 多因子选股(股票)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/103 5 网格交易(期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/104 6 指数增强(股票)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/105 7 跨品种套利(期货)量化策略源码 https://www.myquant.cn/docs/python_strategyies/106 8 跨期套利(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/107 9 日内回转交易(股票)量化策略源码 https://www.myquant.cn/docs/python_strategyies/108 10 做市商交易(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/109 11 海龟交易法(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/110 12 行业轮动(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/111 13 机器学习(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/112 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-06T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"什么是集合竞价？有什么用途？ ​ 所谓集合竞价就是在当天还没有开盘之前，你可根据前一天的收盘价和对当日股市的预测来输入股票价格，在集合竞价时间里输入计算机主机的所有下单，按照价格优先和时间优先的原则计算出最大成交量的价格，这个价格就会是集合竞价的成交价格，而这个过程被称为集合竞价。 ​ 每天开盘价在技术分析上具有重要的意义，目前世界各国股市市场均采用集合竞价的方式来确定开盘价，因为这样可以在一定程度上防止人为操纵现象。 策略实现（基于掘金量化平台） 策略思想 获取沪深300的成份股数据，并统计其30天内开盘价大于前收盘价的天数，并在该天数大于阈值18的时候加入股票池。 对不在股票池的股票平仓，并等权配置股票池的标的股票，每次交易间隔1个月。 策略主要步骤实现 获取当前交易日日期 now = context.now = context.now ​ 直接调用context.now函数，返回“datetime.datetime”格式 获取上一交易日日期 last_day = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) ​ 获取上一交易日可调用get_previous_trading_date函数，返回值为字符串格式： exchang需要设置交易市场代码。 date需要设置指定日期。 获取当天有交易的股票 not_suspended_info = get_history_instruments(symbols=&#39;SHSE.000300&#39;, start_date=now, end_date=now) &nbsp; &nbsp;not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]]not_suspended_info = get_history_instruments(symbols=&#39;SHSE.000300&#39;, start_date=now, end_date=now) &nbsp; &nbsp;not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]] ​ 获取当天有交易的股票，即非停牌的股票，首先需获取停牌信息，这里需调用get_history_instruments函数，返回值类型为list[dict]，之后就是将所提取的“字典”转换为”list“： symbols需要设置订阅的标的代码。 start_date和end_date需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。 固定月初调仓 schedule(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;)(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;) ​ 固定时间调仓可使用schedule函数进行定时任务配置： schedule_func为调用的策略函数的名称。 date_rule可设为1m（一月）。 time_rule为开仓日的开仓时间，这里设为每月第一个交易日的09:40:00。 获取沪深300成分股 stock300 = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day,end_date=last_day)[0][&#39;constituents&#39;].keys() = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day,end_date=last_day)[0][&#39;constituents&#39;].keys() ​ 获取指数成分股可调用函数get_history_constituents或者get_constituents，返回值类型为list[dict]，这里调用get_history_constituents是因为再回测时需要获取上一交易日的成分股，而get_constituents只能获取最新的成分股： index需要设置获取指数的代码。 start_date和end_date需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。 获取过去交易日的历史信息 return_index_his = history_n(symbol=symbol, frequency=&#39;1d&#39;, count=30, fields=&#39;close,preclose&#39;,fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=last_day, df=True) = history_n(symbol=symbol, frequency=&#39;1d&#39;, count=30, fields=&#39;close,preclose&#39;,fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=last_day, df=True) ​ 获取历史信息需要调用histor_n函数，默认返回值为“字典“格式，如果参数df设为True，则返回&quot;dataframe&quot;格式 symbol设置所需获取的标的代码。 frequency获取历史信息的频率，如日线数据设置为1d。 count需要设置获取的bar的数量。 fileds设置返回值的种类。 fill_missing需要设置对于空值的填充方式， None- 不填充，NaN- 用空值填充， Last- 用上一个值填充，默认 None。 adjust需要设置对于复权的处理，ADJUST_NONE or 0: 不复权, ADJUST_PREV or 1: 前复权, ADJUST_POST or 2: 后复权， 默认不复权。 end_time需设置获取历史信息的结束时间。 获取持仓信息 positions = context.account().positions() = context.account().positions() ​ 在判断平仓条件时，需要获取持仓信息（包含持仓均价），这就需要调用context.account().position函数，返回字典型。 策略回测分析 分析 ​ 我们选取了2017年7月至2017年10月作为回测周期，应用“EV/EBITDA”单因子作为选股基础。可以看出： 胜率（具有盈利的平仓次数与总平仓次数之比）达到了62.5%，也即策略每十次开仓，有六次是盈利的。 卡玛比率（年化收益率与历史最大回撤之比）是使用最大回撤率来衡量风险。采用最大回撤率来衡量风险，关注的是最极端的情况。卡玛比率越高表示策略承受每单位最大损失获得的报酬越高。在这里卡玛比率超过了20。 夏普比率（年化收益率减无风险收益率的差收益波动率之比）超过5，也即承受一单位的风险，会有超过五单位的收益回报 策略收益曲线总体稳定，适合在趋势行情中操作。 &nbsp; 集合竞价选股策略源码： &nbsp; # coding=utf-8 from __future__ import print_function, absolute_import, unicode_literals from gm.api import * &nbsp; &#39;&#39;&#39; 本策略通过获取SHSE.000300沪深300的成份股数据并统计其30天内 开盘价大于前收盘价的天数,并在该天数大于阈值10的时候加入股票池 随后对不在股票池的股票平仓并等权配置股票池的标的,每次交易间隔1个月. 回测数据为:SHSE.000300在2015-01-15的成份股 回测时间为:2017-07-01 08:00:00到2017-10-01 16:00:00 &#39;&#39;&#39; &nbsp; &nbsp; def init(context): # 每月第一个交易日的09:40 定时执行algo任务 schedule(schedule_func=algo, date_rule=&#39;1m&#39;, time_rule=&#39;09:40:00&#39;) # context.count_bench累计天数阙值 context.count_bench = 10 # 用于对比的天数 context.count = 30 # 最大交易资金比例 context.ratio = 0.8 &nbsp; &nbsp; def algo(context): # 获取当前时间 now = context.now # 获取上一个交易日 last_day = get_previous_trading_date(exchange=&#39;SHSE&#39;, date=now) # 获取沪深300成份股 context.stock300 = get_history_constituents(index=&#39;SHSE.000300&#39;, start_date=last_day, end_date=last_day)[0][&#39;constituents&#39;].keys() # 获取当天有交易的股票 not_suspended_info = get_history_instruments(symbols=context.stock300, start_date=now, end_date=now) not_suspended_symbols = [item[&#39;symbol&#39;] for item in not_suspended_info if not item[&#39;is_suspended&#39;]] &nbsp; trade_symbols = [] if not not_suspended_symbols: print(&#39;没有当日交易的待选股票&#39;) return &nbsp; for stock in not_suspended_symbols: recent_data = history_n(symbol=stock, frequency=&#39;1d&#39;, count=context.count, fields=&#39;pre_close,open&#39;, fill_missing=&#39;Last&#39;, adjust=ADJUST_PREV, end_time=now, df=True) diff = recent_data[&#39;open&#39;] - recent_data[&#39;pre_close&#39;] # 获取累计天数超过阙值的标的池.并剔除当天没有交易的股票 if len(diff[diff &gt; 0]) &gt;= context.count_bench: trade_symbols.append(stock) &nbsp; print(&#39;本次股票池有股票数目: &#39;, len(trade_symbols)) # 计算权重 percent = 1.0 / len(trade_symbols) * context.ratio # 获取当前所有仓位 positions = context.account().positions() # 如标的池有仓位,平不在标的池的仓位 for position in positions: symbol = position[&#39;symbol&#39;] if symbol not in trade_symbols: order_target_percent(symbol=symbol, percent=0, order_type=OrderType_Market, position_side=PositionSide_Long) print(&#39;市价单平不在标的池的&#39;, symbol) &nbsp; # 对标的池进行操作 for symbol in trade_symbols: order_target_percent(symbol=symbol, percent=percent, order_type=OrderType_Market, position_side=PositionSide_Long) print(symbol, &#39;以市价单调整至权重&#39;, percent) &nbsp; &nbsp; if __name__ == &#39;__main__&#39;: &#39;&#39;&#39; strategy_id策略ID,由系统生成 filename文件名,请与本文件名保持一致 mode实时模式:MODE_LIVE回测模式:MODE_BACKTEST token绑定计算机的ID,可在系统设置-密钥管理中生成 backtest_start_time回测开始时间 backtest_end_time回测结束时间 backtest_adjust股票复权方式不复权:ADJUST_NONE前复权:ADJUST_PREV后复权:ADJUST_POST backtest_initial_cash回测初始资金 backtest_commission_ratio回测佣金比例 backtest_slippage_ratio回测滑点比例 &#39;&#39;&#39; run(strategy_id=&#39;strategy_id&#39;, filename=&#39;main.py&#39;, mode=MODE_BACKTEST, token=&#39;token_id&#39;, backtest_start_time=&#39;2017-07-01 08:00:00&#39;, backtest_end_time=&#39;2017-10-01 16:00:00&#39;, backtest_adjust=ADJUST_PREV, backtest_initial_cash=10000000, backtest_commission_ratio=0.0001, backtest_slippage_ratio=0.0001) 文章来源：掘金量化交易平台, 转载请注明出处！ ---------------------------------------------------------------------------------------------------------------------------------------------------------- 更多经典股票/期货量化策略源码查看： 1 双均线策略(期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/153 2 alpha对冲(股票+期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/101 3 集合竞价选股(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/102 4 多因子选股(股票)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/103 5 网格交易(期货)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/104 6 指数增强(股票)&nbsp; 量化策略源码 https://www.myquant.cn/docs/python_strategyies/105 7 跨品种套利(期货)量化策略源码 https://www.myquant.cn/docs/python_strategyies/106 8 跨期套利(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/107 9 日内回转交易(股票)量化策略源码 https://www.myquant.cn/docs/python_strategyies/108 10 做市商交易(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/109 11 海龟交易法(期货) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/110 12 行业轮动(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/111 13 机器学习(股票) 量化策略源码 https://www.myquant.cn/docs/python_strategyies/112 阅读更多","@type":"BlogPosting","url":"/2018/06/06/8f0987b2fbdb560ce666fc938aa1307e.html","headline":"【策略研究】集合竞价选股（附源码）","dateModified":"2018-06-06T00:00:00+08:00","datePublished":"2018-06-06T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/06/06/8f0987b2fbdb560ce666fc938aa1307e.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>【策略研究】集合竞价选股（附源码）</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h1>什么是集合竞价？有什么用途？</h1> 
  <p>​ 所谓集合竞价就是在当天还没有开盘之前，你可根据前一天的收盘价和对当日股市的预测来输入股票价格，在集合竞价时间里输入计算机主机的所有下单，按照价格优先和时间优先的原则计算出最大成交量的价格，这个价格就会是集合竞价的成交价格，而这个过程被称为集合竞价。</p> 
  <p>​ 每天开盘价在技术分析上具有重要的意义，目前世界各国股市市场均采用集合竞价的方式来确定开盘价，因为这样可以在一定程度上防止人为操纵现象。</p> 
  <h2>策略实现（基于掘金量化平台）</h2> 
  <h3>策略思想</h3> 
  <ul>
   <li style="margin-left:0px;"> <p>获取沪深300的成份股数据，并统计其30天内开盘价大于前收盘价的天数，并在该天数大于阈值18的时候加入股票池。</p> </li> 
   <li style="margin-left:0px;"> <p>对不在股票池的股票平仓，并等权配置股票池的标的股票，每次交易间隔1个月。</p> </li> 
  </ul>
  <h3>策略主要步骤实现</h3> 
  <p>获取当前交易日日期</p> 
  <pre class="has">
<code class="language-md-end-block"><span style="color:#000000;">now</span> = <span style="color:#000000;">context</span>.<span style="color:#000000;">now</span></code> = <span style="color:#000000;">context</span>.<span style="color:#000000;">now</span></pre> 
  <p>​ 直接调用<code>context.now</code>函数，返回“datetime.datetime”格式</p> 
  <p>获取上一交易日日期</p> 
  <pre class="has">
<code class="language-md-end-block"><span style="color:#000000;">last_day</span> = <span style="color:#000000;">get_previous_trading_date</span>(<span style="color:#000000;">exchange</span>=<span style="color:#aa1111;">'SHSE'</span>, <span style="color:#000000;">date</span>=<span style="color:#000000;">now</span>)</code> = <span style="color:#000000;">get_previous_trading_date</span>(<span style="color:#000000;">exchange</span>=<span style="color:#aa1111;">'SHSE'</span>, <span style="color:#000000;">date</span>=<span style="color:#000000;">now</span>)</pre> 
  <p>​ 获取上一交易日可调用<code>get_previous_trading_date</code>函数，返回值为字符串格式：</p> 
  <ul>
   <li style="margin-left:0px;"> <p><code>exchang</code>需要设置交易市场代码。</p> </li> 
   <li style="margin-left:0px;"> <p><code>date</code>需要设置指定日期。</p> </li> 
  </ul>
  <p>获取当天有交易的股票</p> 
  <pre class="has">
<code class="language-md-end-block">    <span style="color:#000000;">not_suspended_info</span> = <span style="color:#000000;">get_history_instruments</span>(<span style="color:#000000;">symbols</span>=<span style="color:#aa1111;">'SHSE.000300'</span>, <span style="color:#000000;">start_date</span>=<span style="color:#000000;">now</span>, <span style="color:#000000;">end_date</span>=<span style="color:#000000;">now</span>)
 &nbsp; &nbsp;<span style="color:#000000;">not_suspended_symbols</span> = [<span style="color:#000000;">item</span>[<span style="color:#aa1111;">'symbol'</span>] <span style="color:#770088;">for</span> <span style="color:#000000;">item</span> <span style="color:#770088;">in</span> <span style="color:#000000;">not_suspended_info</span> <span style="color:#770088;">if</span> <span style="color:#770088;">not</span> <span style="color:#000000;">item</span>[<span style="color:#aa1111;">'is_suspended'</span>]]</code><span style="color:#000000;">not_suspended_info</span> = <span style="color:#000000;">get_history_instruments</span>(<span style="color:#000000;">symbols</span>=<span style="color:#aa1111;">'SHSE.000300'</span>, <span style="color:#000000;">start_date</span>=<span style="color:#000000;">now</span>, <span style="color:#000000;">end_date</span>=<span style="color:#000000;">now</span>)
 &nbsp; &nbsp;<span style="color:#000000;">not_suspended_symbols</span> = [<span style="color:#000000;">item</span>[<span style="color:#aa1111;">'symbol'</span>] <span style="color:#770088;">for</span> <span style="color:#000000;">item</span> <span style="color:#770088;">in</span> <span style="color:#000000;">not_suspended_info</span> <span style="color:#770088;">if</span> <span style="color:#770088;">not</span> <span style="color:#000000;">item</span>[<span style="color:#aa1111;">'is_suspended'</span>]]</pre> 
  <p>​ 获取当天有交易的股票，即非停牌的股票，首先需获取停牌信息，这里需调用<code>get_history_instruments</code>函数，返回值类型为<code>list[dict]</code>，之后就是将所提取的“字典”转换为”list“：</p> 
  <ul>
   <li style="margin-left:0px;"> <p><code>symbols</code>需要设置订阅的标的代码。</p> </li> 
  </ul>
  <ul>
   <li style="margin-left:0px;"> <p><code>start_date</code>和<code>end_date</code>需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。</p> </li> 
  </ul>
  <p>固定月初调仓</p> 
  <pre class="has">
<code class="language-md-end-block"><span style="color:#000000;">schedule</span>(<span style="color:#000000;">schedule_func</span>=<span style="color:#000000;">algo</span>, <span style="color:#000000;">date_rule</span>=<span style="color:#aa1111;">'1m'</span>, <span style="color:#000000;">time_rule</span>=<span style="color:#aa1111;">'09:40:00'</span>)</code>(<span style="color:#000000;">schedule_func</span>=<span style="color:#000000;">algo</span>, <span style="color:#000000;">date_rule</span>=<span style="color:#aa1111;">'1m'</span>, <span style="color:#000000;">time_rule</span>=<span style="color:#aa1111;">'09:40:00'</span>)</pre> 
  <p>​ 固定时间调仓可使用<code>schedule</code>函数进行定时任务配置：</p> 
  <ul>
   <li style="margin-left:0px;"> <p><code>schedule_func</code>为调用的策略函数的名称。</p> </li> 
  </ul>
  <ul>
   <li style="margin-left:0px;"> <p><code>date_rule</code>可设为<code>1m</code>（一月）。</p> </li> 
   <li style="margin-left:0px;"> <p><code>time_rule</code>为开仓日的开仓时间，这里设为每月第一个交易日的<code>09:40:00</code>。</p> </li> 
  </ul>
  <p>获取沪深300成分股</p> 
  <pre class="has">
<code class="language-md-end-block"><span style="color:#000000;">stock300</span> = <span style="color:#000000;">get_history_constituents</span>(<span style="color:#000000;">index</span>=<span style="color:#aa1111;">'SHSE.000300'</span>, <span style="color:#000000;">start_date</span>=<span style="color:#000000;">last_day</span>,<span style="color:#000000;">end_date</span>=<span style="color:#000000;">last_day</span>)[<span style="color:#116644;">0</span>][<span style="color:#aa1111;">'constituents'</span>].<span style="color:#000000;">keys</span>()</code> = <span style="color:#000000;">get_history_constituents</span>(<span style="color:#000000;">index</span>=<span style="color:#aa1111;">'SHSE.000300'</span>, <span style="color:#000000;">start_date</span>=<span style="color:#000000;">last_day</span>,<span style="color:#000000;">end_date</span>=<span style="color:#000000;">last_day</span>)[<span style="color:#116644;">0</span>][<span style="color:#aa1111;">'constituents'</span>].<span style="color:#000000;">keys</span>()</pre> 
  <p>​ 获取指数成分股可调用函数<code>get_history_constituents</code>或者<code>get_constituents</code>，返回值类型为<code>list[dict]</code>，这里调用<code>get_history_constituents</code>是因为再回测时需要获取上一交易日的成分股，而<code>get_constituents</code>只能获取最新的成分股：</p> 
  <ul>
   <li style="margin-left:0px;"> <p><code>index</code>需要设置获取指数的代码。</p> </li> 
   <li style="margin-left:0px;"> <p><code>start_date</code>和<code>end_date</code>需设置获取成分股的开始与结束日期，这里需要调成上一交易日以获取上一交易日的成分股信息。</p> </li> 
  </ul>
  <p>获取过去交易日的历史信息</p> 
  <pre class="has">
<code class="language-md-end-block"><span style="color:#000000;">return_index_his</span> = <span style="color:#000000;">history_n</span>(<span style="color:#000000;">symbol</span>=<span style="color:#000000;">symbol</span>, <span style="color:#000000;">frequency</span>=<span style="color:#aa1111;">'1d'</span>, <span style="color:#000000;">count</span>=<span style="color:#116644;">30</span>, <span style="color:#000000;">fields</span>=<span style="color:#aa1111;">'close,preclose'</span>,<span style="color:#000000;">fill_missing</span>=<span style="color:#aa1111;">'Last'</span>, <span style="color:#000000;">adjust</span>=<span style="color:#000000;">ADJUST_PREV</span>, <span style="color:#000000;">end_time</span>=<span style="color:#000000;">last_day</span>, <span style="color:#000000;">df</span>=<span style="color:#770088;">True</span>)</code> = <span style="color:#000000;">history_n</span>(<span style="color:#000000;">symbol</span>=<span style="color:#000000;">symbol</span>, <span style="color:#000000;">frequency</span>=<span style="color:#aa1111;">'1d'</span>, <span style="color:#000000;">count</span>=<span style="color:#116644;">30</span>, <span style="color:#000000;">fields</span>=<span style="color:#aa1111;">'close,preclose'</span>,<span style="color:#000000;">fill_missing</span>=<span style="color:#aa1111;">'Last'</span>, <span style="color:#000000;">adjust</span>=<span style="color:#000000;">ADJUST_PREV</span>, <span style="color:#000000;">end_time</span>=<span style="color:#000000;">last_day</span>, <span style="color:#000000;">df</span>=<span style="color:#770088;">True</span>)</pre> 
  <p>​ 获取历史信息需要调用<code>histor_n</code>函数，默认返回值为“字典“格式，如果参数<code>df</code>设为<code>True</code>，则返回"dataframe"格式</p> 
  <ul>
   <li style="margin-left:0px;"> <p><code>symbol</code>设置所需获取的标的代码。</p> </li> 
   <li style="margin-left:0px;"> <p><code>frequency</code>获取历史信息的频率，如日线数据设置为<code>1d</code>。</p> </li> 
   <li style="margin-left:0px;"> <p><code>count</code>需要设置获取的bar的数量。</p> </li> 
   <li style="margin-left:0px;"> <p><code>fileds</code>设置返回值的种类。</p> </li> 
   <li style="margin-left:0px;"> <p><code>fill_missing</code>需要设置对于空值的填充方式， <code>None</code>- 不填充，<code>NaN</code>- 用空值填充， <code>Last</code>- 用上一个值填充，默认 <code>None</code>。</p> </li> 
   <li style="margin-left:0px;"> <p><code>adjust</code>需要设置对于复权的处理，<code>ADJUST_NONE or 0</code>: 不复权, <code>ADJUST_PREV or 1</code>: 前复权, <code>ADJUST_POST or 2</code>: 后复权， 默认不复权。</p> </li> 
   <li style="margin-left:0px;"> <p><code>end_time</code>需设置获取历史信息的结束时间。</p> </li> 
  </ul>
  <p>获取持仓信息</p> 
  <pre class="has">
<code class="language-md-end-block"><span style="color:#000000;">positions</span> = <span style="color:#000000;">context</span>.<span style="color:#000000;">account</span>().<span style="color:#000000;">positions</span>()</code> = <span style="color:#000000;">context</span>.<span style="color:#000000;">account</span>().<span style="color:#000000;">positions</span>()</pre> 
  <p>​ 在判断平仓条件时，需要获取持仓信息（包含持仓均价），这就需要调用<code>context.account().position</code>函数，返回字典型。</p> 
  <h3>策略回测分析</h3> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180606132911602"></p> 
  <p>分析</p> 
  <p>​ 我们选取了2017年7月至2017年10月作为回测周期，应用“EV/EBITDA”单因子作为选股基础。可以看出：</p> 
  <ul>
   <li style="margin-left:0px;"> <p><strong>胜率</strong>（具有盈利的平仓次数与总平仓次数之比）达到了62.5%，也即策略每十次开仓，有六次是盈利的。</p> </li> 
  </ul>
  <ul>
   <li style="margin-left:0px;"> <p><strong>卡玛比率</strong>（年化收益率与历史最大回撤之比）是使用<strong>最大回撤率</strong>来衡量风险。<strong>采用最大回撤率来衡量风险，关注的是最极端的情况。</strong>卡玛比率越高表示策略承受每单位最大损失获得的报酬越高。在这里卡玛比率超过了20。</p> </li> 
  </ul>
  <ul>
   <li style="margin-left:0px;"> <p><strong>夏普比率</strong>（年化收益率减无风险收益率的差收益波动率之比）超过5，也即承受一单位的风险，会有超过五单位的收益回报</p> </li> 
  </ul>
  <ul>
   <li style="margin-left:0px;"> <p><strong>策略收益曲线</strong>总体稳定，适合在趋势行情中操作。</p> </li> 
  </ul>
  <p>&nbsp;</p> 
  <p><a href="https://www.myquant.cn/docs/python_strategyies/102" rel="nofollow"><strong>集合竞价选股策略源码：</strong></a></p> 
  <p>&nbsp;</p> 
  <ol>
   <li><code><span style="color:#880000;"># coding=utf-8</span></code></li> 
   <li><code><span style="color:#000088;">from</span><span style="color:#000000;"> __future__ </span><span style="color:#000088;">import</span><span style="color:#000000;"> print_function</span><span style="color:#666600;">,</span><span style="color:#000000;"> absolute_import</span><span style="color:#666600;">,</span><span style="color:#000000;"> unicode_literals</span></code></li> 
   <li><code><span style="color:#000088;">from</span><span style="color:#000000;"> gm</span><span style="color:#666600;">.</span><span style="color:#000000;">api </span><span style="color:#000088;">import</span><span style="color:#000000;"> </span><span style="color:#666600;">*</span></code></li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#008800;">'''</span></code></li> 
   <li><code><span style="color:#008800;">本策略通过获取SHSE.000300沪深300的成份股数据并统计其30天内</span></code></li> 
   <li><code><span style="color:#008800;">开盘价大于前收盘价的天数,并在该天数大于阈值10的时候加入股票池</span></code></li> 
   <li><code><span style="color:#008800;">随后对不在股票池的股票平仓并等权配置股票池的标的,每次交易间隔1个月.</span></code></li> 
   <li><code><span style="color:#008800;">回测数据为:SHSE.000300在2015-01-15的成份股</span></code></li> 
   <li><code><span style="color:#008800;">回测时间为:2017-07-01 08:00:00到2017-10-01 16:00:00</span></code></li> 
   <li><code><span style="color:#008800;">'''</span></code></li> 
   <li>&nbsp;</li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#000088;">def</span><span style="color:#000000;"> init</span><span style="color:#666600;">(</span><span style="color:#000000;">context</span><span style="color:#666600;">):</span></code></li> 
   <li><code><span style="color:#880000;"># 每月第一个交易日的09:40 定时执行algo任务</span></code></li> 
   <li><code><span style="color:#000000;">schedule</span><span style="color:#666600;">(</span><span style="color:#000000;">schedule_func</span><span style="color:#666600;">=</span><span style="color:#000000;">algo</span><span style="color:#666600;">,</span><span style="color:#000000;"> date_rule</span><span style="color:#666600;">=</span><span style="color:#008800;">'1m'</span><span style="color:#666600;">,</span><span style="color:#000000;"> time_rule</span><span style="color:#666600;">=</span><span style="color:#008800;">'09:40:00'</span><span style="color:#666600;">)</span></code></li> 
   <li><code><span style="color:#880000;"># context.count_bench累计天数阙值</span></code></li> 
   <li><code><span style="color:#000000;">context</span><span style="color:#666600;">.</span><span style="color:#000000;">count_bench </span><span style="color:#666600;">=</span><span style="color:#000000;"> </span><span style="color:#006666;">10</span></code></li> 
   <li><code><span style="color:#880000;"># 用于对比的天数</span></code></li> 
   <li><code><span style="color:#000000;">context</span><span style="color:#666600;">.</span><span style="color:#000000;">count </span><span style="color:#666600;">=</span><span style="color:#000000;"> </span><span style="color:#006666;">30</span></code></li> 
   <li><code><span style="color:#880000;"># 最大交易资金比例</span></code></li> 
   <li><code><span style="color:#000000;">context</span><span style="color:#666600;">.</span><span style="color:#000000;">ratio </span><span style="color:#666600;">=</span><span style="color:#000000;"> </span><span style="color:#006666;">0.8</span></code></li> 
   <li>&nbsp;</li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#000088;">def</span><span style="color:#000000;"> algo</span><span style="color:#666600;">(</span><span style="color:#000000;">context</span><span style="color:#666600;">):</span></code></li> 
   <li><code><span style="color:#880000;"># 获取当前时间</span></code></li> 
   <li><code><span style="color:#000000;">now </span><span style="color:#666600;">=</span><span style="color:#000000;"> context</span><span style="color:#666600;">.</span><span style="color:#000000;">now</span></code></li> 
   <li><code><span style="color:#880000;"># 获取上一个交易日</span></code></li> 
   <li><code><span style="color:#000000;">last_day </span><span style="color:#666600;">=</span><span style="color:#000000;"> get_previous_trading_date</span><span style="color:#666600;">(</span><span style="color:#000000;">exchange</span><span style="color:#666600;">=</span><span style="color:#008800;">'SHSE'</span><span style="color:#666600;">,</span><span style="color:#000000;"> date</span><span style="color:#666600;">=</span><span style="color:#000000;">now</span><span style="color:#666600;">)</span></code></li> 
   <li><code><span style="color:#880000;"># 获取沪深300成份股</span></code></li> 
   <li><code><span style="color:#000000;">context</span><span style="color:#666600;">.</span><span style="color:#000000;">stock300 </span><span style="color:#666600;">=</span><span style="color:#000000;"> get_history_constituents</span><span style="color:#666600;">(</span><span style="color:#000000;">index</span><span style="color:#666600;">=</span><span style="color:#008800;">'SHSE.000300'</span><span style="color:#666600;">,</span><span style="color:#000000;"> start_date</span><span style="color:#666600;">=</span><span style="color:#000000;">last_day</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">end_date</span><span style="color:#666600;">=</span><span style="color:#000000;">last_day</span><span style="color:#666600;">)[</span><span style="color:#006666;">0</span><span style="color:#666600;">][</span><span style="color:#008800;">'constituents'</span><span style="color:#666600;">].</span><span style="color:#000000;">keys</span><span style="color:#666600;">()</span></code></li> 
   <li><code><span style="color:#880000;"># 获取当天有交易的股票</span></code></li> 
   <li><code><span style="color:#000000;">not_suspended_info </span><span style="color:#666600;">=</span><span style="color:#000000;"> get_history_instruments</span><span style="color:#666600;">(</span><span style="color:#000000;">symbols</span><span style="color:#666600;">=</span><span style="color:#000000;">context</span><span style="color:#666600;">.</span><span style="color:#000000;">stock300</span><span style="color:#666600;">,</span><span style="color:#000000;"> start_date</span><span style="color:#666600;">=</span><span style="color:#000000;">now</span><span style="color:#666600;">,</span><span style="color:#000000;"> end_date</span><span style="color:#666600;">=</span><span style="color:#000000;">now</span><span style="color:#666600;">)</span></code></li> 
   <li><code><span style="color:#000000;">not_suspended_symbols </span><span style="color:#666600;">=</span><span style="color:#000000;"> </span><span style="color:#666600;">[</span><span style="color:#000000;">item</span><span style="color:#666600;">[</span><span style="color:#008800;">'symbol'</span><span style="color:#666600;">]</span><span style="color:#000000;"> </span><span style="color:#000088;">for</span><span style="color:#000000;"> item </span><span style="color:#000088;">in</span><span style="color:#000000;"> not_suspended_info </span><span style="color:#000088;">if</span><span style="color:#000000;"> </span><span style="color:#000088;">not</span><span style="color:#000000;"> item</span><span style="color:#666600;">[</span><span style="color:#008800;">'is_suspended'</span><span style="color:#666600;">]]</span></code></li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#000000;">trade_symbols </span><span style="color:#666600;">=</span><span style="color:#000000;"> </span><span style="color:#666600;">[]</span></code></li> 
   <li><code><span style="color:#000088;">if</span><span style="color:#000000;"> </span><span style="color:#000088;">not</span><span style="color:#000000;"> not_suspended_symbols</span><span style="color:#666600;">:</span></code></li> 
   <li><code><span style="color:#000088;">print</span><span style="color:#666600;">(</span><span style="color:#008800;">'没有当日交易的待选股票'</span><span style="color:#666600;">)</span></code></li> 
   <li><code><span style="color:#000088;">return</span></code></li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#000088;">for</span><span style="color:#000000;"> stock </span><span style="color:#000088;">in</span><span style="color:#000000;"> not_suspended_symbols</span><span style="color:#666600;">:</span></code></li> 
   <li><code><span style="color:#000000;">recent_data </span><span style="color:#666600;">=</span><span style="color:#000000;"> history_n</span><span style="color:#666600;">(</span><span style="color:#000000;">symbol</span><span style="color:#666600;">=</span><span style="color:#000000;">stock</span><span style="color:#666600;">,</span><span style="color:#000000;"> frequency</span><span style="color:#666600;">=</span><span style="color:#008800;">'1d'</span><span style="color:#666600;">,</span><span style="color:#000000;"> count</span><span style="color:#666600;">=</span><span style="color:#000000;">context</span><span style="color:#666600;">.</span><span style="color:#000000;">count</span><span style="color:#666600;">,</span><span style="color:#000000;"> fields</span><span style="color:#666600;">=</span><span style="color:#008800;">'pre_close,open'</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">fill_missing</span><span style="color:#666600;">=</span><span style="color:#008800;">'Last'</span><span style="color:#666600;">,</span><span style="color:#000000;"> adjust</span><span style="color:#666600;">=</span><span style="color:#000000;">ADJUST_PREV</span><span style="color:#666600;">,</span><span style="color:#000000;"> end_time</span><span style="color:#666600;">=</span><span style="color:#000000;">now</span><span style="color:#666600;">,</span><span style="color:#000000;"> df</span><span style="color:#666600;">=</span><span style="color:#000088;">True</span><span style="color:#666600;">)</span></code></li> 
   <li><code><span style="color:#000000;">diff </span><span style="color:#666600;">=</span><span style="color:#000000;"> recent_data</span><span style="color:#666600;">[</span><span style="color:#008800;">'open'</span><span style="color:#666600;">]</span><span style="color:#000000;"> </span><span style="color:#666600;">-</span><span style="color:#000000;"> recent_data</span><span style="color:#666600;">[</span><span style="color:#008800;">'pre_close'</span><span style="color:#666600;">]</span></code></li> 
   <li><code><span style="color:#880000;"># 获取累计天数超过阙值的标的池.并剔除当天没有交易的股票</span></code></li> 
   <li><code><span style="color:#000088;">if</span><span style="color:#000000;"> len</span><span style="color:#666600;">(</span><span style="color:#000000;">diff</span><span style="color:#666600;">[</span><span style="color:#000000;">diff </span><span style="color:#666600;">&gt;</span><span style="color:#000000;"> </span><span style="color:#006666;">0</span><span style="color:#666600;">])</span><span style="color:#000000;"> </span><span style="color:#666600;">&gt;=</span><span style="color:#000000;"> context</span><span style="color:#666600;">.</span><span style="color:#000000;">count_bench</span><span style="color:#666600;">:</span></code></li> 
   <li><code><span style="color:#000000;">trade_symbols</span><span style="color:#666600;">.</span><span style="color:#000000;">append</span><span style="color:#666600;">(</span><span style="color:#000000;">stock</span><span style="color:#666600;">)</span></code></li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#000088;">print</span><span style="color:#666600;">(</span><span style="color:#008800;">'本次股票池有股票数目: '</span><span style="color:#666600;">,</span><span style="color:#000000;"> len</span><span style="color:#666600;">(</span><span style="color:#000000;">trade_symbols</span><span style="color:#666600;">))</span></code></li> 
   <li><code><span style="color:#880000;"># 计算权重</span></code></li> 
   <li><code><span style="color:#000000;">percent </span><span style="color:#666600;">=</span><span style="color:#000000;"> </span><span style="color:#006666;">1.0</span><span style="color:#000000;"> </span><span style="color:#666600;">/</span><span style="color:#000000;"> len</span><span style="color:#666600;">(</span><span style="color:#000000;">trade_symbols</span><span style="color:#666600;">)</span><span style="color:#000000;"> </span><span style="color:#666600;">*</span><span style="color:#000000;"> context</span><span style="color:#666600;">.</span><span style="color:#000000;">ratio</span></code></li> 
   <li><code><span style="color:#880000;"># 获取当前所有仓位</span></code></li> 
   <li><code><span style="color:#000000;">positions </span><span style="color:#666600;">=</span><span style="color:#000000;"> context</span><span style="color:#666600;">.</span><span style="color:#000000;">account</span><span style="color:#666600;">().</span><span style="color:#000000;">positions</span><span style="color:#666600;">()</span></code></li> 
   <li><code><span style="color:#880000;"># 如标的池有仓位,平不在标的池的仓位</span></code></li> 
   <li><code><span style="color:#000088;">for</span><span style="color:#000000;"> position </span><span style="color:#000088;">in</span><span style="color:#000000;"> positions</span><span style="color:#666600;">:</span></code></li> 
   <li><code><span style="color:#000000;">symbol </span><span style="color:#666600;">=</span><span style="color:#000000;"> position</span><span style="color:#666600;">[</span><span style="color:#008800;">'symbol'</span><span style="color:#666600;">]</span></code></li> 
   <li><code><span style="color:#000088;">if</span><span style="color:#000000;"> symbol </span><span style="color:#000088;">not</span><span style="color:#000000;"> </span><span style="color:#000088;">in</span><span style="color:#000000;"> trade_symbols</span><span style="color:#666600;">:</span></code></li> 
   <li><code><span style="color:#000000;">order_target_percent</span><span style="color:#666600;">(</span><span style="color:#000000;">symbol</span><span style="color:#666600;">=</span><span style="color:#000000;">symbol</span><span style="color:#666600;">,</span><span style="color:#000000;"> percent</span><span style="color:#666600;">=</span><span style="color:#006666;">0</span><span style="color:#666600;">,</span><span style="color:#000000;"> order_type</span><span style="color:#666600;">=</span><span style="color:#660066;">OrderType_Market</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">position_side</span><span style="color:#666600;">=</span><span style="color:#660066;">PositionSide_Long</span><span style="color:#666600;">)</span></code></li> 
   <li><code><span style="color:#000088;">print</span><span style="color:#666600;">(</span><span style="color:#008800;">'市价单平不在标的池的'</span><span style="color:#666600;">,</span><span style="color:#000000;"> symbol</span><span style="color:#666600;">)</span></code></li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#880000;"># 对标的池进行操作</span></code></li> 
   <li><code><span style="color:#000088;">for</span><span style="color:#000000;"> symbol </span><span style="color:#000088;">in</span><span style="color:#000000;"> trade_symbols</span><span style="color:#666600;">:</span></code></li> 
   <li><code><span style="color:#000000;">order_target_percent</span><span style="color:#666600;">(</span><span style="color:#000000;">symbol</span><span style="color:#666600;">=</span><span style="color:#000000;">symbol</span><span style="color:#666600;">,</span><span style="color:#000000;"> percent</span><span style="color:#666600;">=</span><span style="color:#000000;">percent</span><span style="color:#666600;">,</span><span style="color:#000000;"> order_type</span><span style="color:#666600;">=</span><span style="color:#660066;">OrderType_Market</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">position_side</span><span style="color:#666600;">=</span><span style="color:#660066;">PositionSide_Long</span><span style="color:#666600;">)</span></code></li> 
   <li><code><span style="color:#000088;">print</span><span style="color:#666600;">(</span><span style="color:#000000;">symbol</span><span style="color:#666600;">,</span><span style="color:#000000;"> </span><span style="color:#008800;">'以市价单调整至权重'</span><span style="color:#666600;">,</span><span style="color:#000000;"> percent</span><span style="color:#666600;">)</span></code></li> 
   <li>&nbsp;</li> 
   <li>&nbsp;</li> 
   <li><code><span style="color:#000088;">if</span><span style="color:#000000;"> __name__ </span><span style="color:#666600;">==</span><span style="color:#000000;"> </span><span style="color:#008800;">'__main__'</span><span style="color:#666600;">:</span></code></li> 
   <li><code><span style="color:#008800;">'''</span></code></li> 
   <li><code><span style="color:#008800;">strategy_id策略ID,由系统生成</span></code></li> 
   <li><code><span style="color:#008800;">filename文件名,请与本文件名保持一致</span></code></li> 
   <li><code><span style="color:#008800;">mode实时模式:MODE_LIVE回测模式:MODE_BACKTEST</span></code></li> 
   <li><code><span style="color:#008800;">token绑定计算机的ID,可在系统设置-密钥管理中生成</span></code></li> 
   <li><code><span style="color:#008800;">backtest_start_time回测开始时间</span></code></li> 
   <li><code><span style="color:#008800;">backtest_end_time回测结束时间</span></code></li> 
   <li><code><span style="color:#008800;">backtest_adjust股票复权方式不复权:ADJUST_NONE前复权:ADJUST_PREV后复权:ADJUST_POST</span></code></li> 
   <li><code><span style="color:#008800;">backtest_initial_cash回测初始资金</span></code></li> 
   <li><code><span style="color:#008800;">backtest_commission_ratio回测佣金比例</span></code></li> 
   <li><code><span style="color:#008800;">backtest_slippage_ratio回测滑点比例</span></code></li> 
   <li><code><span style="color:#008800;">'''</span></code></li> 
   <li><code><span style="color:#000000;">run</span><span style="color:#666600;">(</span><span style="color:#000000;">strategy_id</span><span style="color:#666600;">=</span><span style="color:#008800;">'strategy_id'</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">filename</span><span style="color:#666600;">=</span><span style="color:#008800;">'main.py'</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">mode</span><span style="color:#666600;">=</span><span style="color:#000000;">MODE_BACKTEST</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">token</span><span style="color:#666600;">=</span><span style="color:#008800;">'token_id'</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">backtest_start_time</span><span style="color:#666600;">=</span><span style="color:#008800;">'2017-07-01 08:00:00'</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">backtest_end_time</span><span style="color:#666600;">=</span><span style="color:#008800;">'2017-10-01 16:00:00'</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">backtest_adjust</span><span style="color:#666600;">=</span><span style="color:#000000;">ADJUST_PREV</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">backtest_initial_cash</span><span style="color:#666600;">=</span><span style="color:#006666;">10000000</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">backtest_commission_ratio</span><span style="color:#666600;">=</span><span style="color:#006666;">0.0001</span><span style="color:#666600;">,</span></code></li> 
   <li><code><span style="color:#000000;">backtest_slippage_ratio</span><span style="color:#666600;">=</span><span style="color:#006666;">0.0001</span><span style="color:#666600;">)</span></code></li> 
  </ol>
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180606133445715"></p> 
  <p>文章来源：<a href="http://www.myquant.cn" rel="nofollow">掘金量化交易平台</a>, 转载请注明出处！</p> 
  <p>----------------------------------------------------------------------------------------------------------------------------------------------------------</p> 
  <p><strong>更多经典股票/期货量化策略源码查看：</strong></p> 
  <table cellspacing="0">
   <tbody>
    <tr>
     <td>1</td> 
     <td>双均线策略(期货)&nbsp; 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/153" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/153</a></u></td> 
    </tr>
    <tr>
     <td>2</td> 
     <td>alpha对冲(股票+期货)&nbsp; 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/101" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/101</a></u></td> 
    </tr>
    <tr>
     <td>3</td> 
     <td>集合竞价选股(股票) 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/102" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/102</a></u></td> 
    </tr>
    <tr>
     <td>4</td> 
     <td>多因子选股(股票)&nbsp; 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/103" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/103</a></u></td> 
    </tr>
    <tr>
     <td>5</td> 
     <td>网格交易(期货)&nbsp; 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/104" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/104</a></u></td> 
    </tr>
    <tr>
     <td>6</td> 
     <td>指数增强(股票)&nbsp; 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/105" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/105</a></u></td> 
    </tr>
    <tr>
     <td>7</td> 
     <td>跨品种套利(期货)量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/106" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/106</a></u></td> 
    </tr>
    <tr>
     <td>8</td> 
     <td>跨期套利(期货) 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/107" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/107</a></u></td> 
    </tr>
    <tr>
     <td>9</td> 
     <td>日内回转交易(股票)量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/108" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/108</a></u></td> 
    </tr>
    <tr>
     <td>10</td> 
     <td>做市商交易(期货) 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/109" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/109</a></u></td> 
    </tr>
    <tr>
     <td>11</td> 
     <td>海龟交易法(期货) 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/110" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/110</a></u></td> 
    </tr>
    <tr>
     <td>12</td> 
     <td>行业轮动(股票) 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/111" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/111</a></u></td> 
    </tr>
    <tr>
     <td>13</td> 
     <td>机器学习(股票) 量化策略源码</td> 
     <td><u><a href="https://www.myquant.cn/docs/python_strategyies/112" rel="nofollow">https://www.myquant.cn/docs/python_strategyies/112</a></u></td> 
    </tr>
   </tbody>
  </table> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/myquant/article/details/80593652,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/myquant/article/details/80593652,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
