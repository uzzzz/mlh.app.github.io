<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>教你么怎么割韭菜，用最简单的方式部署协议代币 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="教你么怎么割韭菜，用最简单的方式部署协议代币" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="技术收获 从本实践中，你可以学习到： ERC20 Token的定义和实践 使用Remix Solidity IDE编写智能合约和编译调试 使用MetaMask完成钱包账户查看 使用网页钱包完成代币交易演示 2 ERC20 Token定义和接口说明 定义 ​ERC20合约是在2015年11月在EIP（https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md）上提出的一个合约标准，代币定义的一个标准。 Token代表数字资产，具有价值，但是并不是都符合特定的规范。 基于ERC20的货币更容易互换，并且能够在Dapps上相同的工作。 新的标准可以让token更兼容，允许其他功能，包括投票标记化。操作更像一个投票操作，Token的持有人可以完全控制资产，遵守ERC20的token可以跟踪任何人在任何时间拥有多少token。基于eth合约的子货币，所以容易实施。 ERC20 Token接口说明 方法 注意：调用者必须处理返回false的returns (bool success).调用者绝对不能假设返回false的情况不存在。 name 返回这个令牌的名字，比如&quot;MyToken&quot;. 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;name()&nbsp;constant&nbsp;returns&nbsp;(string name) symbol 返回令牌的符号，比如HIX. 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;symbol()&nbsp;constant&nbsp;returns&nbsp;(string symbol) decimals 返回token使用的小数点后几位， 比如&nbsp;8,表示分配token数量为100000000 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;decimals()&nbsp;constant&nbsp;returns&nbsp;(uint8 decimals) totalSupply 返回token的总供应量。 function&nbsp;totalSupply()&nbsp;constant&nbsp;returns&nbsp;(uint256 totalSupply) balanceOf 返回地址是_owner的账户的账户余额。 function&nbsp;balanceOf(address _owner)&nbsp;constant&nbsp;returns&nbsp;(uint256 balance) transfer 转移_value的token数量到的地址_to，并且必须触发Transfer事件。&nbsp;如果_from帐户余额没有足够的令牌来支出，该函数应该被throw。 创建新令牌的令牌合同应该在创建令牌时将_from地址设置为0x0触发传输事件。 注意 0值的传输必须被视为正常传输并触发传输事件。 function&nbsp;transfer(address _to, uint256 _value)&nbsp;returns&nbsp;(bool success) transferFrom 从地址_from发送数量为_value的token到地址_to,必须触发Transfer事件。 transferFrom方法用于提取工作流，允许合同代您转移token。这可以用于例如允许合约代您转让代币和/或以子货币收取费用。除了_from帐户已经通过某种机制故意地授权消息的发送者之外，该函数应该throw。 注意 0值的传输必须被视为正常传输并触发传输事件。 function&nbsp;transferFrom(address _from, address _to, uint256 _value)&nbsp;returns&nbsp;(bool success) approve 允许_spender多次取回您的帐户，最高达_value金额。 如果再次调用此函数，它将以_value覆盖当前的余量。 注意：为了阻止向量攻击，客户端需要确认以这样的方式创建用户接口，即将它们设置为0，然后将其设置为同一个花费者的另一个值。虽然合同本身不应该强制执行，允许向后兼容以前部署的合同兼容性。 function&nbsp;approve(address _spender, uint256 _value)&nbsp;returns&nbsp;(bool success) allowance 返回_spender仍然被允许从_owner提取的金额。 function&nbsp;allowance(address _owner, address _spender)&nbsp;constant&nbsp;returns&nbsp;(uint256 remaining) Events Transfer 当token被转移(包括0值)，必须被触发。 event&nbsp;Transfer(address indexed _from, address indexed _to, uint256 _value) Approval 当任何成功调用approve(address _spender, uint256 _value)后，必须被触发。 event&nbsp;Approval(address indexed _owner, address indexed _spender, uint256 _value) [官网接口说明点击查看],(https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md) 接口文件ERC20Interface.sol如下： contract ERC20Interface {string&nbsp;public&nbsp;constant name =&nbsp;&quot;Token Name&quot;;string&nbsp;public&nbsp;constant symbol =&nbsp;&quot;SYM&quot;;uint8&nbsp;publicconstant decimals =&nbsp;18;&nbsp;// 18 is the most common number of&nbsp;decimal&nbsp;places// 0.0000000000000000001 个代币function&nbsp;totalSupply()&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uint);function&nbsp;balanceOf(address tokenOwner)&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uintbalance);function&nbsp;allowance(address tokenOwner, address spender)&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uint&nbsp;remaining);function&nbsp;approve(address spender,&nbsp;uint&nbsp;tokens)&nbsp;public&nbsp;returns&nbsp;(bool&nbsp;success);function&nbsp;transfer(address to,&nbsp;uint&nbsp;tokens)&nbsp;publicreturns&nbsp;(bool&nbsp;success);function&nbsp;transferFrom(address&nbsp;from, address to,&nbsp;uint&nbsp;tokens)&nbsp;public&nbsp;returns&nbsp;(boolsuccess);event&nbsp;Transfer(address indexed&nbsp;from, address indexed to,&nbsp;uint&nbsp;tokens);event&nbsp;Approval(address indexed tokenOwner, address indexed spender,&nbsp;uint&nbsp;tokens);} 3 TOKEN合约代码 合约文件TokenERC20.sol如下： pragma solidity ^0.4.16;interface&nbsp;tokenRecipient&nbsp;{&nbsp;function&nbsp;receiveApproval(address _from, uint256 _value, address _token, bytes _extraData)&nbsp;public; } contract TokenERC20 {string&nbsp;public&nbsp;name;string&nbsp;public&nbsp;symbol;uint8&nbsp;public&nbsp;decimals =&nbsp;18;&nbsp;// decimals 可以有的小数点个数，最小的代币单位。18 是建议的默认值uint256&nbsp;public&nbsp;totalSupply;// 用mapping保存每个地址对应的余额mapping (address =&gt; uint256)&nbsp;public&nbsp;balanceOf;// 存储对账号的控制mapping (address =&gt; mapping (address =&gt; uint256))&nbsp;public&nbsp;allowance;// 事件，用来通知客户端交易发生event Transfer(address indexed from, address indexed to, uint256 value);// 事件，用来通知客户端代币被消费event Burn(address indexed from, uint256 value);/*** 初始化构造*/function&nbsp;TokenERC20(uint256 initialSupply, string tokenName, string tokenSymbol)&nbsp;public&nbsp;{totalSupply = initialSupply *&nbsp;10&nbsp;** uint256(decimals);&nbsp;// 供应的份额，份额跟最小的代币单位有关，份额 = 币数 * 10 ** decimals。balanceOf[msg.sender] = totalSupply;&nbsp;// 创建者拥有所有的代币name = tokenName;&nbsp;// 代币名称symbol = tokenSymbol;&nbsp;// 代币符号}/*** 代币交易转移的内部实现*/function&nbsp;_transfer(address _from, address _to, uint _value)&nbsp;internal&nbsp;{// 确保目标地址不为0x0，因为0x0地址代表销毁require(_to !=&nbsp;0x0);// 检查发送者余额require(balanceOf[_from] &gt;= _value);// 确保转移为正数个require(balanceOf[_to] + _value &gt; balanceOf[_to]);// 以下用来检查交易，uint previousBalances = balanceOf[_from] + balanceOf[_to];// Subtract from the senderbalanceOf[_from] -= _value;// Add the same to the recipientbalanceOf[_to] += _value;Transfer(_from, _to, _value);&nbsp;// 用assert来检查代码逻辑。&nbsp;assert(balanceOf[_from] + balanceOf[_to] == previousBalances); }/*** 代币交易转移* 从创建交易者账号发送`_value`个代币到 `_to`账号**&nbsp;@param&nbsp;_to 接收者地址*&nbsp;@param_value 转移数额*/function&nbsp;transfer(address _to, uint256 _value)&nbsp;public&nbsp;{ _transfer(msg.sender, _to, _value); }/*** 账号之间代币交易转移*&nbsp;@param&nbsp;_from 发送者地址*&nbsp;@param&nbsp;_to 接收者地址*&nbsp;@param&nbsp;_value 转移数额 */functiontransferFrom(address _from, address _to, uint256 _value)&nbsp;public&nbsp;returns&nbsp;(bool success)&nbsp;{require(_value &lt;= allowance[_from][msg.sender]);&nbsp;// Check allowanceallowance[_from][msg.sender] -= _value; _transfer(_from, _to, _value);return&nbsp;true;}&nbsp;/*** 设置某个地址（合约）可以交易者名义花费的代币数。** 允许发送者`_spender` 花费不多于 `_value` 个代币**&nbsp;@param&nbsp;_spender The address authorized to spend*&nbsp;@param&nbsp;_value the max amount they can spend*/functionapprove(address _spender, uint256 _value)&nbsp;publicreturns&nbsp;(bool success)&nbsp;{allowance[msg.sender][_spender] = _value;return&nbsp;true;}}/*** 销毁创建者账户中指定个代币*/function&nbsp;burn(uint256 _value)&nbsp;public&nbsp;returns&nbsp;(bool success){require(balanceOf[msg.sender] &gt;= _value);&nbsp;// Check if the sender has enoughbalanceOf[msg.sender] -= _value;&nbsp;// Subtract from the sendertotalSupply -= _value;&nbsp;// Updates totalSupplyBurn(msg.sender, _value);return&nbsp;true;}/*** 销毁用户账户中指定个代币** Remove `_value` tokens from the system irreversibly on behalf of `_from`.**&nbsp;@param&nbsp;_from the address of the sender*&nbsp;@param&nbsp;_value the amount of money to burn*/function&nbsp;burnFrom(address _from, uint256 _value)public&nbsp;returns&nbsp;(bool success)&nbsp;{require(balanceOf[_from] &gt;= _value);&nbsp;// Check if the targeted balance is enoughrequire(_value &lt;= allowance[_from][msg.sender]);&nbsp;// Check allowancebalanceOf[_from] -= _value;&nbsp;// Subtract from the targeted balanceallowance[_from][msg.sender] -= _value;&nbsp;// Subtract from the sender&#39;s allowancetotalSupply -= _value;&nbsp;// Update totalSupplyBurn(_from, _value);return&nbsp;true; }} 函数的功能参考函数的说明描述和代码自解释。 4 合约编译部署和发布 MetaMask钱包联网 前置条件：作者假设学习者已完成MetaMask的安装和配置。还没有完成的，参考开发实战|3步教你在以太坊上开一家宠物店（附流程+代码），安装 MetaMask和配置区块链网络”，在本地WIDOWS环境完成MetaMask轻钱包客户端的安装和配置。 打开MetaMask钱包，点击左上角的“Ropsten Test Network” 连接成功。 连接成功 查看存量的账号Account 1，其中ETH余额显示为0。 存量账号Account 1余额为0 点击“Copy Address to Clipboard”,记录Account 1钱包地址为 0xD1F7922e8b78cBEB182250753ade8379d1E09949 点击MetaMask右上角环形头像的菜单“Create Account”, 创建一个新钱包账号Account 8， 新增账号成功 记录Account 8的钱包地址为 0x3D7DfB80E71096F2c4Ee63C42C4D849F2CBBE363 点击Account 8的&quot;BUY&quot;按钮，可以从“Ropsten Test Network” 免费获取一些测试ETH。 跳转到BUY ETH页面 点击按钮“ROPSTEN TEST FAUCET”可以看到赠送页面 点击绿色按钮，等待10秒以上，成功的话每次可以获取1个测试ETH。 故障排查 赠送失败 作者操作时，出现错误。从提示看，是由于用户交易拒绝。等10秒后再点击该绿色按钮则未有错误提示了。原因不明，可能是操作频繁导致。 多次点击，偶尔出错，小编一共从这个测试网站获取了5个测试ETH用于作为发币的GAS燃料。 获取测试ETH Remix Solidity IDE调试环境介绍 （https://remix.ethereum.org/） 代码编写和编译 我们以“Hello World”智能合约为例，参考下图可完成编译和语法错误发现。 编译环境使用方法 合约创建 参考附图描述，在配置号MetaMask账号和网络连接的情况下，确保账户有虚拟ETH用于合约创建花销。最后点击“Create”按钮可以完成合约创建。点击输出区的网页链接（https://ropsten.etherscan.io/tx/0x9ef5b97580cf5350e9deca8f8472117df3983f1bcd0272b15c490528c811f3f8）可以查看合约的详细情况。 支付合约花销 合约执行 参考附件路径图，点击RUN按钮可以执行一次合约。点击下方的“Say”按钮，可以看到合约输出。在调试输出窗口可以看到“call to hello.say”的运行提示。 合约执行 总结 所以说，没有Ubuntu+Ganache等，直接在WINDOWS环境，也可以使用Remix+MetaMask+Ropsten Test Network组合完成一套完整的以太坊测试环境。 编译ERC20智能合约 CHROME浏览器打开Remix Solidity IDE环境（http://remix.ethereum.org/#optimize=false&amp;version=soljson-v0.4.21+commit.dfe3193c.js），打开之前编写的“TokenERC20.sol”智能合约，然后点击右侧的“start&nbsp;to compile”按钮。可以看到，除了一些Warning提示外，智能合约编译成功。 编译操作 运行ERC20智能合约 运行页面 切换到&quot;RUN&quot;页面，Environment选择“Injected Web3”, Account自动更新为MetaMask的Account 8账号。“Create”按钮前按照发币数量（本次发1个亿），代币名称，代币符号填写为100000000,&quot;ColorBay&quot;,&quot;CB&quot;。 点击&quot;Create&quot;按钮，会弹出一个交易确认框，设置合理的Gas Price，但要确保Max Transaction Fee不会超过Account 8的ETH总数，点“SUBMIT”按钮。 智能合约部署 部署成功的话，Account8 会产生一条交易记录，显示状态为“Contract Published”,表示部署成功了。 部署成功 说明：有时点击账号，会出现“Retry with a higher gas price here”的提示，一般情况下再等待10秒看看能否交易成功。万一还是不成的话，可考虑该Gas Price大点。 部署确认中 MetaMask加载TOKEN 点击Account 8的交易记录（https://ropsten.etherscan.io/tx/0x3dd6f5d88f54dee71c4a3d9f5082e270b01cf3f26e1d3960d2517675745fa80e），可以跳转智能合约部署信息显示页面： 部署成功 获取智能合约地址为0x5eeec41dc08d7caece17c4a349635934637036f1（https://ropsten.etherscan.io/address/0x5eeec41dc08d7caece17c4a349635934637036f1），点击可查看该交易详情。 点击MetaMask的Account 8账号的TOKENS页面的“ADD TOKEN”按钮，把代币智能合约地址Token Contract Address为0x5eeec41dc08d7caece17c4a349635934637036f1，代币标识符Token Symbol为CB，则可以创建你的代币了。 代币创建成功，一共有1亿个CB币了。此时，点击100000000的代币位置，跳转到代币查询页面（https://ropsten.etherscan.io/token/0x5eeec41dc08d7caece17c4a349635934637036f1）, 可以在etherscan网站看到账户的持币数量了。 1亿 TOKEN信息 截止作者发稿时，以太坊的价格为2559元/个，而你有1亿个CB币，是不是快要走上人生巅峰了呢？哈哈，做个梦而已。真正的区块链应用，要能有生态，能为人类社会创造价值，而不是讲故事，割韭菜！ 5 代币交易 由于MetaMask插件没有提供代币交易功能，同时考虑到很多人并没有以太坊钱包或是被以太坊钱包网络同步问题折磨，今天我用网页钱包（https://www.myetherwallet.com/）来讲解代币交易。 1. &nbsp;进入网页钱包地址&nbsp;（https://www.myetherwallet.com/#send-transaction） 第一次进入有一些安全提示需要用户确认。 2. &nbsp;进入之后，按照下图进行设置 网络配置 3，增加自定义代币 填写地址Token Contract 为0x5eeec41dc08d7caece17c4a349635934637036f1和其他信息，点击保存按钮。 增加自定义TOKEN 配置TOKEN合约地址和代币符号 配置成功的界面如下： 【说明】如果不成功，则提示为“Not a valid ERC-20 token CB”,则可能是代币信息填写不正确或者右上角的网络选择错误，没有选择“Network Ropston(infura.com)”选项引起。 4.转账给Account 1 填写Account 1的地址“0xD1F7922e8b78cBEB182250753ade8379d1E09949”到“发送至地址”输入框， 选择CB，不是ETH 转账确认 交易确认 交易提示 查看账户余额，Account 8减少800万个CB币，而Account 1则增加了800万个CB币。 Account 8 Account 1 转账交易成功了！ 阅读更多" />
<meta property="og:description" content="技术收获 从本实践中，你可以学习到： ERC20 Token的定义和实践 使用Remix Solidity IDE编写智能合约和编译调试 使用MetaMask完成钱包账户查看 使用网页钱包完成代币交易演示 2 ERC20 Token定义和接口说明 定义 ​ERC20合约是在2015年11月在EIP（https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md）上提出的一个合约标准，代币定义的一个标准。 Token代表数字资产，具有价值，但是并不是都符合特定的规范。 基于ERC20的货币更容易互换，并且能够在Dapps上相同的工作。 新的标准可以让token更兼容，允许其他功能，包括投票标记化。操作更像一个投票操作，Token的持有人可以完全控制资产，遵守ERC20的token可以跟踪任何人在任何时间拥有多少token。基于eth合约的子货币，所以容易实施。 ERC20 Token接口说明 方法 注意：调用者必须处理返回false的returns (bool success).调用者绝对不能假设返回false的情况不存在。 name 返回这个令牌的名字，比如&quot;MyToken&quot;. 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;name()&nbsp;constant&nbsp;returns&nbsp;(string name) symbol 返回令牌的符号，比如HIX. 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;symbol()&nbsp;constant&nbsp;returns&nbsp;(string symbol) decimals 返回token使用的小数点后几位， 比如&nbsp;8,表示分配token数量为100000000 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;decimals()&nbsp;constant&nbsp;returns&nbsp;(uint8 decimals) totalSupply 返回token的总供应量。 function&nbsp;totalSupply()&nbsp;constant&nbsp;returns&nbsp;(uint256 totalSupply) balanceOf 返回地址是_owner的账户的账户余额。 function&nbsp;balanceOf(address _owner)&nbsp;constant&nbsp;returns&nbsp;(uint256 balance) transfer 转移_value的token数量到的地址_to，并且必须触发Transfer事件。&nbsp;如果_from帐户余额没有足够的令牌来支出，该函数应该被throw。 创建新令牌的令牌合同应该在创建令牌时将_from地址设置为0x0触发传输事件。 注意 0值的传输必须被视为正常传输并触发传输事件。 function&nbsp;transfer(address _to, uint256 _value)&nbsp;returns&nbsp;(bool success) transferFrom 从地址_from发送数量为_value的token到地址_to,必须触发Transfer事件。 transferFrom方法用于提取工作流，允许合同代您转移token。这可以用于例如允许合约代您转让代币和/或以子货币收取费用。除了_from帐户已经通过某种机制故意地授权消息的发送者之外，该函数应该throw。 注意 0值的传输必须被视为正常传输并触发传输事件。 function&nbsp;transferFrom(address _from, address _to, uint256 _value)&nbsp;returns&nbsp;(bool success) approve 允许_spender多次取回您的帐户，最高达_value金额。 如果再次调用此函数，它将以_value覆盖当前的余量。 注意：为了阻止向量攻击，客户端需要确认以这样的方式创建用户接口，即将它们设置为0，然后将其设置为同一个花费者的另一个值。虽然合同本身不应该强制执行，允许向后兼容以前部署的合同兼容性。 function&nbsp;approve(address _spender, uint256 _value)&nbsp;returns&nbsp;(bool success) allowance 返回_spender仍然被允许从_owner提取的金额。 function&nbsp;allowance(address _owner, address _spender)&nbsp;constant&nbsp;returns&nbsp;(uint256 remaining) Events Transfer 当token被转移(包括0值)，必须被触发。 event&nbsp;Transfer(address indexed _from, address indexed _to, uint256 _value) Approval 当任何成功调用approve(address _spender, uint256 _value)后，必须被触发。 event&nbsp;Approval(address indexed _owner, address indexed _spender, uint256 _value) [官网接口说明点击查看],(https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md) 接口文件ERC20Interface.sol如下： contract ERC20Interface {string&nbsp;public&nbsp;constant name =&nbsp;&quot;Token Name&quot;;string&nbsp;public&nbsp;constant symbol =&nbsp;&quot;SYM&quot;;uint8&nbsp;publicconstant decimals =&nbsp;18;&nbsp;// 18 is the most common number of&nbsp;decimal&nbsp;places// 0.0000000000000000001 个代币function&nbsp;totalSupply()&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uint);function&nbsp;balanceOf(address tokenOwner)&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uintbalance);function&nbsp;allowance(address tokenOwner, address spender)&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uint&nbsp;remaining);function&nbsp;approve(address spender,&nbsp;uint&nbsp;tokens)&nbsp;public&nbsp;returns&nbsp;(bool&nbsp;success);function&nbsp;transfer(address to,&nbsp;uint&nbsp;tokens)&nbsp;publicreturns&nbsp;(bool&nbsp;success);function&nbsp;transferFrom(address&nbsp;from, address to,&nbsp;uint&nbsp;tokens)&nbsp;public&nbsp;returns&nbsp;(boolsuccess);event&nbsp;Transfer(address indexed&nbsp;from, address indexed to,&nbsp;uint&nbsp;tokens);event&nbsp;Approval(address indexed tokenOwner, address indexed spender,&nbsp;uint&nbsp;tokens);} 3 TOKEN合约代码 合约文件TokenERC20.sol如下： pragma solidity ^0.4.16;interface&nbsp;tokenRecipient&nbsp;{&nbsp;function&nbsp;receiveApproval(address _from, uint256 _value, address _token, bytes _extraData)&nbsp;public; } contract TokenERC20 {string&nbsp;public&nbsp;name;string&nbsp;public&nbsp;symbol;uint8&nbsp;public&nbsp;decimals =&nbsp;18;&nbsp;// decimals 可以有的小数点个数，最小的代币单位。18 是建议的默认值uint256&nbsp;public&nbsp;totalSupply;// 用mapping保存每个地址对应的余额mapping (address =&gt; uint256)&nbsp;public&nbsp;balanceOf;// 存储对账号的控制mapping (address =&gt; mapping (address =&gt; uint256))&nbsp;public&nbsp;allowance;// 事件，用来通知客户端交易发生event Transfer(address indexed from, address indexed to, uint256 value);// 事件，用来通知客户端代币被消费event Burn(address indexed from, uint256 value);/*** 初始化构造*/function&nbsp;TokenERC20(uint256 initialSupply, string tokenName, string tokenSymbol)&nbsp;public&nbsp;{totalSupply = initialSupply *&nbsp;10&nbsp;** uint256(decimals);&nbsp;// 供应的份额，份额跟最小的代币单位有关，份额 = 币数 * 10 ** decimals。balanceOf[msg.sender] = totalSupply;&nbsp;// 创建者拥有所有的代币name = tokenName;&nbsp;// 代币名称symbol = tokenSymbol;&nbsp;// 代币符号}/*** 代币交易转移的内部实现*/function&nbsp;_transfer(address _from, address _to, uint _value)&nbsp;internal&nbsp;{// 确保目标地址不为0x0，因为0x0地址代表销毁require(_to !=&nbsp;0x0);// 检查发送者余额require(balanceOf[_from] &gt;= _value);// 确保转移为正数个require(balanceOf[_to] + _value &gt; balanceOf[_to]);// 以下用来检查交易，uint previousBalances = balanceOf[_from] + balanceOf[_to];// Subtract from the senderbalanceOf[_from] -= _value;// Add the same to the recipientbalanceOf[_to] += _value;Transfer(_from, _to, _value);&nbsp;// 用assert来检查代码逻辑。&nbsp;assert(balanceOf[_from] + balanceOf[_to] == previousBalances); }/*** 代币交易转移* 从创建交易者账号发送`_value`个代币到 `_to`账号**&nbsp;@param&nbsp;_to 接收者地址*&nbsp;@param_value 转移数额*/function&nbsp;transfer(address _to, uint256 _value)&nbsp;public&nbsp;{ _transfer(msg.sender, _to, _value); }/*** 账号之间代币交易转移*&nbsp;@param&nbsp;_from 发送者地址*&nbsp;@param&nbsp;_to 接收者地址*&nbsp;@param&nbsp;_value 转移数额 */functiontransferFrom(address _from, address _to, uint256 _value)&nbsp;public&nbsp;returns&nbsp;(bool success)&nbsp;{require(_value &lt;= allowance[_from][msg.sender]);&nbsp;// Check allowanceallowance[_from][msg.sender] -= _value; _transfer(_from, _to, _value);return&nbsp;true;}&nbsp;/*** 设置某个地址（合约）可以交易者名义花费的代币数。** 允许发送者`_spender` 花费不多于 `_value` 个代币**&nbsp;@param&nbsp;_spender The address authorized to spend*&nbsp;@param&nbsp;_value the max amount they can spend*/functionapprove(address _spender, uint256 _value)&nbsp;publicreturns&nbsp;(bool success)&nbsp;{allowance[msg.sender][_spender] = _value;return&nbsp;true;}}/*** 销毁创建者账户中指定个代币*/function&nbsp;burn(uint256 _value)&nbsp;public&nbsp;returns&nbsp;(bool success){require(balanceOf[msg.sender] &gt;= _value);&nbsp;// Check if the sender has enoughbalanceOf[msg.sender] -= _value;&nbsp;// Subtract from the sendertotalSupply -= _value;&nbsp;// Updates totalSupplyBurn(msg.sender, _value);return&nbsp;true;}/*** 销毁用户账户中指定个代币** Remove `_value` tokens from the system irreversibly on behalf of `_from`.**&nbsp;@param&nbsp;_from the address of the sender*&nbsp;@param&nbsp;_value the amount of money to burn*/function&nbsp;burnFrom(address _from, uint256 _value)public&nbsp;returns&nbsp;(bool success)&nbsp;{require(balanceOf[_from] &gt;= _value);&nbsp;// Check if the targeted balance is enoughrequire(_value &lt;= allowance[_from][msg.sender]);&nbsp;// Check allowancebalanceOf[_from] -= _value;&nbsp;// Subtract from the targeted balanceallowance[_from][msg.sender] -= _value;&nbsp;// Subtract from the sender&#39;s allowancetotalSupply -= _value;&nbsp;// Update totalSupplyBurn(_from, _value);return&nbsp;true; }} 函数的功能参考函数的说明描述和代码自解释。 4 合约编译部署和发布 MetaMask钱包联网 前置条件：作者假设学习者已完成MetaMask的安装和配置。还没有完成的，参考开发实战|3步教你在以太坊上开一家宠物店（附流程+代码），安装 MetaMask和配置区块链网络”，在本地WIDOWS环境完成MetaMask轻钱包客户端的安装和配置。 打开MetaMask钱包，点击左上角的“Ropsten Test Network” 连接成功。 连接成功 查看存量的账号Account 1，其中ETH余额显示为0。 存量账号Account 1余额为0 点击“Copy Address to Clipboard”,记录Account 1钱包地址为 0xD1F7922e8b78cBEB182250753ade8379d1E09949 点击MetaMask右上角环形头像的菜单“Create Account”, 创建一个新钱包账号Account 8， 新增账号成功 记录Account 8的钱包地址为 0x3D7DfB80E71096F2c4Ee63C42C4D849F2CBBE363 点击Account 8的&quot;BUY&quot;按钮，可以从“Ropsten Test Network” 免费获取一些测试ETH。 跳转到BUY ETH页面 点击按钮“ROPSTEN TEST FAUCET”可以看到赠送页面 点击绿色按钮，等待10秒以上，成功的话每次可以获取1个测试ETH。 故障排查 赠送失败 作者操作时，出现错误。从提示看，是由于用户交易拒绝。等10秒后再点击该绿色按钮则未有错误提示了。原因不明，可能是操作频繁导致。 多次点击，偶尔出错，小编一共从这个测试网站获取了5个测试ETH用于作为发币的GAS燃料。 获取测试ETH Remix Solidity IDE调试环境介绍 （https://remix.ethereum.org/） 代码编写和编译 我们以“Hello World”智能合约为例，参考下图可完成编译和语法错误发现。 编译环境使用方法 合约创建 参考附图描述，在配置号MetaMask账号和网络连接的情况下，确保账户有虚拟ETH用于合约创建花销。最后点击“Create”按钮可以完成合约创建。点击输出区的网页链接（https://ropsten.etherscan.io/tx/0x9ef5b97580cf5350e9deca8f8472117df3983f1bcd0272b15c490528c811f3f8）可以查看合约的详细情况。 支付合约花销 合约执行 参考附件路径图，点击RUN按钮可以执行一次合约。点击下方的“Say”按钮，可以看到合约输出。在调试输出窗口可以看到“call to hello.say”的运行提示。 合约执行 总结 所以说，没有Ubuntu+Ganache等，直接在WINDOWS环境，也可以使用Remix+MetaMask+Ropsten Test Network组合完成一套完整的以太坊测试环境。 编译ERC20智能合约 CHROME浏览器打开Remix Solidity IDE环境（http://remix.ethereum.org/#optimize=false&amp;version=soljson-v0.4.21+commit.dfe3193c.js），打开之前编写的“TokenERC20.sol”智能合约，然后点击右侧的“start&nbsp;to compile”按钮。可以看到，除了一些Warning提示外，智能合约编译成功。 编译操作 运行ERC20智能合约 运行页面 切换到&quot;RUN&quot;页面，Environment选择“Injected Web3”, Account自动更新为MetaMask的Account 8账号。“Create”按钮前按照发币数量（本次发1个亿），代币名称，代币符号填写为100000000,&quot;ColorBay&quot;,&quot;CB&quot;。 点击&quot;Create&quot;按钮，会弹出一个交易确认框，设置合理的Gas Price，但要确保Max Transaction Fee不会超过Account 8的ETH总数，点“SUBMIT”按钮。 智能合约部署 部署成功的话，Account8 会产生一条交易记录，显示状态为“Contract Published”,表示部署成功了。 部署成功 说明：有时点击账号，会出现“Retry with a higher gas price here”的提示，一般情况下再等待10秒看看能否交易成功。万一还是不成的话，可考虑该Gas Price大点。 部署确认中 MetaMask加载TOKEN 点击Account 8的交易记录（https://ropsten.etherscan.io/tx/0x3dd6f5d88f54dee71c4a3d9f5082e270b01cf3f26e1d3960d2517675745fa80e），可以跳转智能合约部署信息显示页面： 部署成功 获取智能合约地址为0x5eeec41dc08d7caece17c4a349635934637036f1（https://ropsten.etherscan.io/address/0x5eeec41dc08d7caece17c4a349635934637036f1），点击可查看该交易详情。 点击MetaMask的Account 8账号的TOKENS页面的“ADD TOKEN”按钮，把代币智能合约地址Token Contract Address为0x5eeec41dc08d7caece17c4a349635934637036f1，代币标识符Token Symbol为CB，则可以创建你的代币了。 代币创建成功，一共有1亿个CB币了。此时，点击100000000的代币位置，跳转到代币查询页面（https://ropsten.etherscan.io/token/0x5eeec41dc08d7caece17c4a349635934637036f1）, 可以在etherscan网站看到账户的持币数量了。 1亿 TOKEN信息 截止作者发稿时，以太坊的价格为2559元/个，而你有1亿个CB币，是不是快要走上人生巅峰了呢？哈哈，做个梦而已。真正的区块链应用，要能有生态，能为人类社会创造价值，而不是讲故事，割韭菜！ 5 代币交易 由于MetaMask插件没有提供代币交易功能，同时考虑到很多人并没有以太坊钱包或是被以太坊钱包网络同步问题折磨，今天我用网页钱包（https://www.myetherwallet.com/）来讲解代币交易。 1. &nbsp;进入网页钱包地址&nbsp;（https://www.myetherwallet.com/#send-transaction） 第一次进入有一些安全提示需要用户确认。 2. &nbsp;进入之后，按照下图进行设置 网络配置 3，增加自定义代币 填写地址Token Contract 为0x5eeec41dc08d7caece17c4a349635934637036f1和其他信息，点击保存按钮。 增加自定义TOKEN 配置TOKEN合约地址和代币符号 配置成功的界面如下： 【说明】如果不成功，则提示为“Not a valid ERC-20 token CB”,则可能是代币信息填写不正确或者右上角的网络选择错误，没有选择“Network Ropston(infura.com)”选项引起。 4.转账给Account 1 填写Account 1的地址“0xD1F7922e8b78cBEB182250753ade8379d1E09949”到“发送至地址”输入框， 选择CB，不是ETH 转账确认 交易确认 交易提示 查看账户余额，Account 8减少800万个CB币，而Account 1则增加了800万个CB币。 Account 8 Account 1 转账交易成功了！ 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-14T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"技术收获 从本实践中，你可以学习到： ERC20 Token的定义和实践 使用Remix Solidity IDE编写智能合约和编译调试 使用MetaMask完成钱包账户查看 使用网页钱包完成代币交易演示 2 ERC20 Token定义和接口说明 定义 ​ERC20合约是在2015年11月在EIP（https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md）上提出的一个合约标准，代币定义的一个标准。 Token代表数字资产，具有价值，但是并不是都符合特定的规范。 基于ERC20的货币更容易互换，并且能够在Dapps上相同的工作。 新的标准可以让token更兼容，允许其他功能，包括投票标记化。操作更像一个投票操作，Token的持有人可以完全控制资产，遵守ERC20的token可以跟踪任何人在任何时间拥有多少token。基于eth合约的子货币，所以容易实施。 ERC20 Token接口说明 方法 注意：调用者必须处理返回false的returns (bool success).调用者绝对不能假设返回false的情况不存在。 name 返回这个令牌的名字，比如&quot;MyToken&quot;. 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;name()&nbsp;constant&nbsp;returns&nbsp;(string name) symbol 返回令牌的符号，比如HIX. 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;symbol()&nbsp;constant&nbsp;returns&nbsp;(string symbol) decimals 返回token使用的小数点后几位， 比如&nbsp;8,表示分配token数量为100000000 可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。 function&nbsp;decimals()&nbsp;constant&nbsp;returns&nbsp;(uint8 decimals) totalSupply 返回token的总供应量。 function&nbsp;totalSupply()&nbsp;constant&nbsp;returns&nbsp;(uint256 totalSupply) balanceOf 返回地址是_owner的账户的账户余额。 function&nbsp;balanceOf(address _owner)&nbsp;constant&nbsp;returns&nbsp;(uint256 balance) transfer 转移_value的token数量到的地址_to，并且必须触发Transfer事件。&nbsp;如果_from帐户余额没有足够的令牌来支出，该函数应该被throw。 创建新令牌的令牌合同应该在创建令牌时将_from地址设置为0x0触发传输事件。 注意 0值的传输必须被视为正常传输并触发传输事件。 function&nbsp;transfer(address _to, uint256 _value)&nbsp;returns&nbsp;(bool success) transferFrom 从地址_from发送数量为_value的token到地址_to,必须触发Transfer事件。 transferFrom方法用于提取工作流，允许合同代您转移token。这可以用于例如允许合约代您转让代币和/或以子货币收取费用。除了_from帐户已经通过某种机制故意地授权消息的发送者之外，该函数应该throw。 注意 0值的传输必须被视为正常传输并触发传输事件。 function&nbsp;transferFrom(address _from, address _to, uint256 _value)&nbsp;returns&nbsp;(bool success) approve 允许_spender多次取回您的帐户，最高达_value金额。 如果再次调用此函数，它将以_value覆盖当前的余量。 注意：为了阻止向量攻击，客户端需要确认以这样的方式创建用户接口，即将它们设置为0，然后将其设置为同一个花费者的另一个值。虽然合同本身不应该强制执行，允许向后兼容以前部署的合同兼容性。 function&nbsp;approve(address _spender, uint256 _value)&nbsp;returns&nbsp;(bool success) allowance 返回_spender仍然被允许从_owner提取的金额。 function&nbsp;allowance(address _owner, address _spender)&nbsp;constant&nbsp;returns&nbsp;(uint256 remaining) Events Transfer 当token被转移(包括0值)，必须被触发。 event&nbsp;Transfer(address indexed _from, address indexed _to, uint256 _value) Approval 当任何成功调用approve(address _spender, uint256 _value)后，必须被触发。 event&nbsp;Approval(address indexed _owner, address indexed _spender, uint256 _value) [官网接口说明点击查看],(https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md) 接口文件ERC20Interface.sol如下： contract ERC20Interface {string&nbsp;public&nbsp;constant name =&nbsp;&quot;Token Name&quot;;string&nbsp;public&nbsp;constant symbol =&nbsp;&quot;SYM&quot;;uint8&nbsp;publicconstant decimals =&nbsp;18;&nbsp;// 18 is the most common number of&nbsp;decimal&nbsp;places// 0.0000000000000000001 个代币function&nbsp;totalSupply()&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uint);function&nbsp;balanceOf(address tokenOwner)&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uintbalance);function&nbsp;allowance(address tokenOwner, address spender)&nbsp;public&nbsp;constant&nbsp;returns&nbsp;(uint&nbsp;remaining);function&nbsp;approve(address spender,&nbsp;uint&nbsp;tokens)&nbsp;public&nbsp;returns&nbsp;(bool&nbsp;success);function&nbsp;transfer(address to,&nbsp;uint&nbsp;tokens)&nbsp;publicreturns&nbsp;(bool&nbsp;success);function&nbsp;transferFrom(address&nbsp;from, address to,&nbsp;uint&nbsp;tokens)&nbsp;public&nbsp;returns&nbsp;(boolsuccess);event&nbsp;Transfer(address indexed&nbsp;from, address indexed to,&nbsp;uint&nbsp;tokens);event&nbsp;Approval(address indexed tokenOwner, address indexed spender,&nbsp;uint&nbsp;tokens);} 3 TOKEN合约代码 合约文件TokenERC20.sol如下： pragma solidity ^0.4.16;interface&nbsp;tokenRecipient&nbsp;{&nbsp;function&nbsp;receiveApproval(address _from, uint256 _value, address _token, bytes _extraData)&nbsp;public; } contract TokenERC20 {string&nbsp;public&nbsp;name;string&nbsp;public&nbsp;symbol;uint8&nbsp;public&nbsp;decimals =&nbsp;18;&nbsp;// decimals 可以有的小数点个数，最小的代币单位。18 是建议的默认值uint256&nbsp;public&nbsp;totalSupply;// 用mapping保存每个地址对应的余额mapping (address =&gt; uint256)&nbsp;public&nbsp;balanceOf;// 存储对账号的控制mapping (address =&gt; mapping (address =&gt; uint256))&nbsp;public&nbsp;allowance;// 事件，用来通知客户端交易发生event Transfer(address indexed from, address indexed to, uint256 value);// 事件，用来通知客户端代币被消费event Burn(address indexed from, uint256 value);/*** 初始化构造*/function&nbsp;TokenERC20(uint256 initialSupply, string tokenName, string tokenSymbol)&nbsp;public&nbsp;{totalSupply = initialSupply *&nbsp;10&nbsp;** uint256(decimals);&nbsp;// 供应的份额，份额跟最小的代币单位有关，份额 = 币数 * 10 ** decimals。balanceOf[msg.sender] = totalSupply;&nbsp;// 创建者拥有所有的代币name = tokenName;&nbsp;// 代币名称symbol = tokenSymbol;&nbsp;// 代币符号}/*** 代币交易转移的内部实现*/function&nbsp;_transfer(address _from, address _to, uint _value)&nbsp;internal&nbsp;{// 确保目标地址不为0x0，因为0x0地址代表销毁require(_to !=&nbsp;0x0);// 检查发送者余额require(balanceOf[_from] &gt;= _value);// 确保转移为正数个require(balanceOf[_to] + _value &gt; balanceOf[_to]);// 以下用来检查交易，uint previousBalances = balanceOf[_from] + balanceOf[_to];// Subtract from the senderbalanceOf[_from] -= _value;// Add the same to the recipientbalanceOf[_to] += _value;Transfer(_from, _to, _value);&nbsp;// 用assert来检查代码逻辑。&nbsp;assert(balanceOf[_from] + balanceOf[_to] == previousBalances); }/*** 代币交易转移* 从创建交易者账号发送`_value`个代币到 `_to`账号**&nbsp;@param&nbsp;_to 接收者地址*&nbsp;@param_value 转移数额*/function&nbsp;transfer(address _to, uint256 _value)&nbsp;public&nbsp;{ _transfer(msg.sender, _to, _value); }/*** 账号之间代币交易转移*&nbsp;@param&nbsp;_from 发送者地址*&nbsp;@param&nbsp;_to 接收者地址*&nbsp;@param&nbsp;_value 转移数额 */functiontransferFrom(address _from, address _to, uint256 _value)&nbsp;public&nbsp;returns&nbsp;(bool success)&nbsp;{require(_value &lt;= allowance[_from][msg.sender]);&nbsp;// Check allowanceallowance[_from][msg.sender] -= _value; _transfer(_from, _to, _value);return&nbsp;true;}&nbsp;/*** 设置某个地址（合约）可以交易者名义花费的代币数。** 允许发送者`_spender` 花费不多于 `_value` 个代币**&nbsp;@param&nbsp;_spender The address authorized to spend*&nbsp;@param&nbsp;_value the max amount they can spend*/functionapprove(address _spender, uint256 _value)&nbsp;publicreturns&nbsp;(bool success)&nbsp;{allowance[msg.sender][_spender] = _value;return&nbsp;true;}}/*** 销毁创建者账户中指定个代币*/function&nbsp;burn(uint256 _value)&nbsp;public&nbsp;returns&nbsp;(bool success){require(balanceOf[msg.sender] &gt;= _value);&nbsp;// Check if the sender has enoughbalanceOf[msg.sender] -= _value;&nbsp;// Subtract from the sendertotalSupply -= _value;&nbsp;// Updates totalSupplyBurn(msg.sender, _value);return&nbsp;true;}/*** 销毁用户账户中指定个代币** Remove `_value` tokens from the system irreversibly on behalf of `_from`.**&nbsp;@param&nbsp;_from the address of the sender*&nbsp;@param&nbsp;_value the amount of money to burn*/function&nbsp;burnFrom(address _from, uint256 _value)public&nbsp;returns&nbsp;(bool success)&nbsp;{require(balanceOf[_from] &gt;= _value);&nbsp;// Check if the targeted balance is enoughrequire(_value &lt;= allowance[_from][msg.sender]);&nbsp;// Check allowancebalanceOf[_from] -= _value;&nbsp;// Subtract from the targeted balanceallowance[_from][msg.sender] -= _value;&nbsp;// Subtract from the sender&#39;s allowancetotalSupply -= _value;&nbsp;// Update totalSupplyBurn(_from, _value);return&nbsp;true; }} 函数的功能参考函数的说明描述和代码自解释。 4 合约编译部署和发布 MetaMask钱包联网 前置条件：作者假设学习者已完成MetaMask的安装和配置。还没有完成的，参考开发实战|3步教你在以太坊上开一家宠物店（附流程+代码），安装 MetaMask和配置区块链网络”，在本地WIDOWS环境完成MetaMask轻钱包客户端的安装和配置。 打开MetaMask钱包，点击左上角的“Ropsten Test Network” 连接成功。 连接成功 查看存量的账号Account 1，其中ETH余额显示为0。 存量账号Account 1余额为0 点击“Copy Address to Clipboard”,记录Account 1钱包地址为 0xD1F7922e8b78cBEB182250753ade8379d1E09949 点击MetaMask右上角环形头像的菜单“Create Account”, 创建一个新钱包账号Account 8， 新增账号成功 记录Account 8的钱包地址为 0x3D7DfB80E71096F2c4Ee63C42C4D849F2CBBE363 点击Account 8的&quot;BUY&quot;按钮，可以从“Ropsten Test Network” 免费获取一些测试ETH。 跳转到BUY ETH页面 点击按钮“ROPSTEN TEST FAUCET”可以看到赠送页面 点击绿色按钮，等待10秒以上，成功的话每次可以获取1个测试ETH。 故障排查 赠送失败 作者操作时，出现错误。从提示看，是由于用户交易拒绝。等10秒后再点击该绿色按钮则未有错误提示了。原因不明，可能是操作频繁导致。 多次点击，偶尔出错，小编一共从这个测试网站获取了5个测试ETH用于作为发币的GAS燃料。 获取测试ETH Remix Solidity IDE调试环境介绍 （https://remix.ethereum.org/） 代码编写和编译 我们以“Hello World”智能合约为例，参考下图可完成编译和语法错误发现。 编译环境使用方法 合约创建 参考附图描述，在配置号MetaMask账号和网络连接的情况下，确保账户有虚拟ETH用于合约创建花销。最后点击“Create”按钮可以完成合约创建。点击输出区的网页链接（https://ropsten.etherscan.io/tx/0x9ef5b97580cf5350e9deca8f8472117df3983f1bcd0272b15c490528c811f3f8）可以查看合约的详细情况。 支付合约花销 合约执行 参考附件路径图，点击RUN按钮可以执行一次合约。点击下方的“Say”按钮，可以看到合约输出。在调试输出窗口可以看到“call to hello.say”的运行提示。 合约执行 总结 所以说，没有Ubuntu+Ganache等，直接在WINDOWS环境，也可以使用Remix+MetaMask+Ropsten Test Network组合完成一套完整的以太坊测试环境。 编译ERC20智能合约 CHROME浏览器打开Remix Solidity IDE环境（http://remix.ethereum.org/#optimize=false&amp;version=soljson-v0.4.21+commit.dfe3193c.js），打开之前编写的“TokenERC20.sol”智能合约，然后点击右侧的“start&nbsp;to compile”按钮。可以看到，除了一些Warning提示外，智能合约编译成功。 编译操作 运行ERC20智能合约 运行页面 切换到&quot;RUN&quot;页面，Environment选择“Injected Web3”, Account自动更新为MetaMask的Account 8账号。“Create”按钮前按照发币数量（本次发1个亿），代币名称，代币符号填写为100000000,&quot;ColorBay&quot;,&quot;CB&quot;。 点击&quot;Create&quot;按钮，会弹出一个交易确认框，设置合理的Gas Price，但要确保Max Transaction Fee不会超过Account 8的ETH总数，点“SUBMIT”按钮。 智能合约部署 部署成功的话，Account8 会产生一条交易记录，显示状态为“Contract Published”,表示部署成功了。 部署成功 说明：有时点击账号，会出现“Retry with a higher gas price here”的提示，一般情况下再等待10秒看看能否交易成功。万一还是不成的话，可考虑该Gas Price大点。 部署确认中 MetaMask加载TOKEN 点击Account 8的交易记录（https://ropsten.etherscan.io/tx/0x3dd6f5d88f54dee71c4a3d9f5082e270b01cf3f26e1d3960d2517675745fa80e），可以跳转智能合约部署信息显示页面： 部署成功 获取智能合约地址为0x5eeec41dc08d7caece17c4a349635934637036f1（https://ropsten.etherscan.io/address/0x5eeec41dc08d7caece17c4a349635934637036f1），点击可查看该交易详情。 点击MetaMask的Account 8账号的TOKENS页面的“ADD TOKEN”按钮，把代币智能合约地址Token Contract Address为0x5eeec41dc08d7caece17c4a349635934637036f1，代币标识符Token Symbol为CB，则可以创建你的代币了。 代币创建成功，一共有1亿个CB币了。此时，点击100000000的代币位置，跳转到代币查询页面（https://ropsten.etherscan.io/token/0x5eeec41dc08d7caece17c4a349635934637036f1）, 可以在etherscan网站看到账户的持币数量了。 1亿 TOKEN信息 截止作者发稿时，以太坊的价格为2559元/个，而你有1亿个CB币，是不是快要走上人生巅峰了呢？哈哈，做个梦而已。真正的区块链应用，要能有生态，能为人类社会创造价值，而不是讲故事，割韭菜！ 5 代币交易 由于MetaMask插件没有提供代币交易功能，同时考虑到很多人并没有以太坊钱包或是被以太坊钱包网络同步问题折磨，今天我用网页钱包（https://www.myetherwallet.com/）来讲解代币交易。 1. &nbsp;进入网页钱包地址&nbsp;（https://www.myetherwallet.com/#send-transaction） 第一次进入有一些安全提示需要用户确认。 2. &nbsp;进入之后，按照下图进行设置 网络配置 3，增加自定义代币 填写地址Token Contract 为0x5eeec41dc08d7caece17c4a349635934637036f1和其他信息，点击保存按钮。 增加自定义TOKEN 配置TOKEN合约地址和代币符号 配置成功的界面如下： 【说明】如果不成功，则提示为“Not a valid ERC-20 token CB”,则可能是代币信息填写不正确或者右上角的网络选择错误，没有选择“Network Ropston(infura.com)”选项引起。 4.转账给Account 1 填写Account 1的地址“0xD1F7922e8b78cBEB182250753ade8379d1E09949”到“发送至地址”输入框， 选择CB，不是ETH 转账确认 交易确认 交易提示 查看账户余额，Account 8减少800万个CB币，而Account 1则增加了800万个CB币。 Account 8 Account 1 转账交易成功了！ 阅读更多","@type":"BlogPosting","url":"/2018/06/14/48ff361c894166f2a9faab842d11f799.html","headline":"教你么怎么割韭菜，用最简单的方式部署协议代币","dateModified":"2018-06-14T00:00:00+08:00","datePublished":"2018-06-14T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/06/14/48ff361c894166f2a9faab842d11f799.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>教你么怎么割韭菜，用最简单的方式部署协议代币</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <div style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);">
   <span style="color:rgb(61,70,77);"><strong>技术收获</strong></span>
   <br>
  </div>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">从本实践中，你可以学习到：</p>
  <ul style="margin-left:30px;font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">
   <li style="margin-left:40px;"><p>ERC20 Token的定义和实践</p></li>
   <li style="margin-left:40px;"><p>使用Remix Solidity IDE编写智能合约和编译调试</p></li>
   <li style="margin-left:40px;"><p>使用MetaMask完成钱包账户查看</p></li>
   <li style="margin-left:40px;"><p>使用网页钱包完成代币交易演示</p></li>
  </ul>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);">2</h1>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);"><span style="font-weight:bolder;">ERC20 Token定义和接口说明</span></h1>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">定义</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">​ERC20合约是在2015年11月在EIP（<a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md%EF%BC%89%E4%B8%8A%E6%8F%90%E5%87%BA%E7%9A%84%E4%B8%80%E4%B8%AA%E5%90%88%E7%BA%A6%E6%A0%87%E5%87%86%EF%BC%8C%E4%BB%A3%E5%B8%81%E5%AE%9A%E4%B9%89%E7%9A%84%E4%B8%80%E4%B8%AA%E6%A0%87%E5%87%86%E3%80%82" rel="nofollow" style="color:rgb(65,131,196);">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md）上提出的一个合约标准，代币定义的一个标准。</a></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">Token代表数字资产，具有价值，但是并不是都符合特定的规范。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">基于ERC20的货币更容易互换，并且能够在Dapps上相同的工作。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">新的标准可以让token更兼容，允许其他功能，包括投票标记化。操作更像一个投票操作，Token的持有人可以完全控制资产，遵守ERC20的token可以跟踪任何人在任何时间拥有多少token。基于eth合约的子货币，所以容易实施。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">ERC20 Token接口说明</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">方法</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">注意：调用者必须<span style="font-weight:bolder;">处理</span>返回false的returns (bool success).调用者<span style="font-weight:bolder;">绝对不能</span>假设返回false的情况不存在。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">name</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">返回这个令牌的名字，比如"MyToken".</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">name</span>(<span></span>)&nbsp;<span style="color:rgb(239,239,143);">constant</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>string name</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">symbol</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">返回令牌的符号，比如HIX.</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">symbol</span>(<span></span>)&nbsp;<span style="color:rgb(239,239,143);">constant</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>string symbol</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">decimals</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">返回token使用的小数点后几位， 比如&nbsp;8,表示分配token数量为100000000</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">可选 - 这种方法可以用来提高可用性，但接口和其他契约不能指望这些值存在。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">decimals</span>(<span></span>)&nbsp;<span style="color:rgb(239,239,143);">constant</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>uint8 decimals</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">totalSupply</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">返回token的总供应量。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">totalSupply</span>(<span></span>)&nbsp;<span style="color:rgb(239,239,143);">constant</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>uint256 totalSupply</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">balanceOf</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">返回地址是_owner的账户的账户余额。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">balanceOf</span>(<span>address _owner</span>)&nbsp;<span style="color:rgb(239,239,143);">constant</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>uint256 balance</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">transfer</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">转移_value的token数量到的地址_to，并且必须触发Transfer事件。&nbsp;如果_from帐户余额没有足够的令牌来支出，该函数应该被throw。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">创建新令牌的令牌合同应该在创建令牌时将_from地址设置为0x0触发传输事件。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span>注意 0值的传输必须被视为正常传输并触发传输事件。</span></p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">transfer</span>(<span>address _to, uint256 _value</span>)&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>bool success</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">transferFrom</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">从地址_from发送数量为_value的token到地址_to,必须触发Transfer事件。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">transferFrom方法用于提取工作流，允许合同代您转移token。这可以用于例如允许合约代您转让代币和/或以子货币收取费用。除了_from帐户已经通过某种机制故意地授权消息的发送者之外，该函数<span style="font-weight:bolder;">应该</span>throw。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span>注意 0值的传输必须被视为正常传输并触发传输事件。</span></p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">transferFrom</span>(<span>address _from, address _to, uint256 _value</span>)&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>bool success</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">approve</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">允许_spender多次取回您的帐户，最高达_value金额。 如果再次调用此函数，它将以_value覆盖当前的余量。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">注意：为了阻止向量攻击，客户端需要确认以这样的方式创建用户接口，即将它们设置为0，然后将其设置为同一个花费者的另一个值。虽然合同本身不应该强制执行，允许向后兼容以前部署的合同兼容性。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">approve</span>(<span>address _spender, uint256 _value</span>)&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>bool success</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">allowance</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">返回_spender仍然被允许从_owner提取的金额。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">allowance</span>(<span>address _owner, address _spender</span>)&nbsp;<span style="color:rgb(239,239,143);">constant</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span>uint256 remaining</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">Events</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">Transfer</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">当token被转移(包括0值)，<span style="font-weight:bolder;">必须</span>被触发。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">event</span>&nbsp;<span style="color:rgb(239,239,143);">Transfer</span>(<span>address indexed _from, address indexed _to, uint256 _value</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">Approval</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">当任何成功调用approve(address _spender, uint256 _value)后，<span style="font-weight:bolder;">必须</span>被触发。</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);"><span><span style="color:rgb(227,206,171);">event</span>&nbsp;<span style="color:rgb(239,239,143);">Approval</span>(<span>address indexed _owner, address indexed _spender, uint256 _value</span>)</span></code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">[官网接口说明点击查看],(<a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md" rel="nofollow" style="color:rgb(65,131,196);">https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md</a>)</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">接口文件ERC20Interface.sol如下：</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);">contract ERC20Interface {<span style="color:rgb(227,206,171);">string</span>&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;constant name =&nbsp;<span style="color:rgb(204,147,147);">"Token Name"</span>;<span style="color:rgb(227,206,171);">string</span>&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;constant symbol =&nbsp;<span style="color:rgb(204,147,147);">"SYM"</span>;uint8&nbsp;<span style="color:rgb(227,206,171);">public</span>constant decimals =&nbsp;<span style="color:rgb(140,208,211);">18</span>;&nbsp;<span style="color:rgb(127,159,127);">// 18 is the most common number of&nbsp;</span><span style="color:rgb(227,206,171);">decimal</span>&nbsp;places<span style="color:rgb(127,159,127);">// 0.0000000000000000001 个代币</span><span>function&nbsp;<span style="color:rgb(239,239,143);">totalSupply</span>(<span></span>)&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;constant&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span><span style="color:rgb(227,206,171);">uint</span></span>)</span>;<span>function&nbsp;<span style="color:rgb(239,239,143);">balanceOf</span>(<span>address tokenOwner</span>)&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;constant&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span><span style="color:rgb(227,206,171);">uint</span>balance</span>)</span>;<span>function&nbsp;<span style="color:rgb(239,239,143);">allowance</span>(<span>address tokenOwner, address spender</span>)&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;constant&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span><span style="color:rgb(227,206,171);">uint</span>&nbsp;remaining</span>)</span>;<span>function&nbsp;<span style="color:rgb(239,239,143);">approve</span>(<span>address spender,&nbsp;<span style="color:rgb(227,206,171);">uint</span>&nbsp;tokens</span>)&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span><span style="color:rgb(227,206,171);">bool</span>&nbsp;success</span>)</span>;<span>function&nbsp;<span style="color:rgb(239,239,143);">transfer</span>(<span>address to,&nbsp;<span style="color:rgb(227,206,171);">uint</span>&nbsp;tokens</span>)&nbsp;<span style="color:rgb(227,206,171);">public</span><span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span><span style="color:rgb(227,206,171);">bool</span>&nbsp;success</span>)</span>;<span>function&nbsp;<span style="color:rgb(239,239,143);">transferFrom</span>(<span>address&nbsp;<span style="color:rgb(227,206,171);">from</span>, address to,&nbsp;<span style="color:rgb(227,206,171);">uint</span>&nbsp;tokens</span>)&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;(<span><span style="color:rgb(227,206,171);">bool</span>success</span>)</span>;<span><span style="color:rgb(227,206,171);">event</span>&nbsp;<span style="color:rgb(239,239,143);">Transfer</span>(<span>address indexed&nbsp;<span style="color:rgb(227,206,171);">from</span>, address indexed to,&nbsp;<span style="color:rgb(227,206,171);">uint</span>&nbsp;tokens</span>)</span>;<span><span style="color:rgb(227,206,171);">event</span>&nbsp;<span style="color:rgb(239,239,143);">Approval</span>(<span>address indexed tokenOwner, address indexed spender,&nbsp;<span style="color:rgb(227,206,171);">uint</span>&nbsp;tokens</span>)</span>;}</code>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);">3</h1>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);"><span style="font-weight:bolder;">TOKEN合约代码</span></h1>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">合约文件TokenERC20.sol如下：</p>
  <code style="color:rgb(0,0,0);font-size:14px;background:rgb(255,255,255);">pragma solidity ^<span style="color:rgb(140,208,211);">0.4</span><span style="color:rgb(140,208,211);">.16</span>;<span><span style="color:rgb(227,206,171);">interface</span>&nbsp;<span style="color:rgb(239,239,143);">tokenRecipient</span>&nbsp;</span>{&nbsp;<span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">receiveApproval</span><span>(address _from, uint256 _value, address _token, bytes _extraData)</span>&nbsp;<span style="color:rgb(239,239,143);">public</span></span>; } contract TokenERC20 {string&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;name;string&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;symbol;uint8&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;decimals =&nbsp;<span style="color:rgb(140,208,211);">18</span>;&nbsp;<span style="color:rgb(127,159,127);">// decimals 可以有的小数点个数，最小的代币单位。18 是建议的默认值</span>uint256&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;totalSupply;<span style="color:rgb(127,159,127);">// 用mapping保存每个地址对应的余额</span>mapping (address =&gt; uint256)&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;balanceOf;<span style="color:rgb(127,159,127);">// 存储对账号的控制</span>mapping (address =&gt; mapping (address =&gt; uint256))&nbsp;<span style="color:rgb(227,206,171);">public</span>&nbsp;allowance;<span style="color:rgb(127,159,127);">// 事件，用来通知客户端交易发生</span>event Transfer(address indexed from, address indexed to, uint256 value);<span style="color:rgb(127,159,127);">// 事件，用来通知客户端代币被消费</span>event Burn(address indexed from, uint256 value);<span style="color:rgb(127,159,127);">/*** 初始化构造*/</span><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">TokenERC20</span><span>(uint256 initialSupply, string tokenName, string tokenSymbol)</span>&nbsp;<span style="color:rgb(239,239,143);">public</span>&nbsp;</span>{totalSupply = initialSupply *&nbsp;<span style="color:rgb(140,208,211);">10</span>&nbsp;** uint256(decimals);&nbsp;<span style="color:rgb(127,159,127);">// 供应的份额，份额跟最小的代币单位有关，份额 = 币数 * 10 ** decimals。</span>balanceOf[msg.sender] = totalSupply;&nbsp;<span style="color:rgb(127,159,127);">// 创建者拥有所有的代币</span>name = tokenName;&nbsp;<span style="color:rgb(127,159,127);">// 代币名称</span>symbol = tokenSymbol;&nbsp;<span style="color:rgb(127,159,127);">// 代币符号</span>}<span style="color:rgb(127,159,127);">/*** 代币交易转移的内部实现*/</span><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">_transfer</span><span>(address _from, address _to, uint _value)</span>&nbsp;<span style="color:rgb(239,239,143);">internal</span>&nbsp;</span>{<span style="color:rgb(127,159,127);">// 确保目标地址不为0x0，因为0x0地址代表销毁</span><span style="color:rgb(227,206,171);">require</span>(_to !=&nbsp;<span style="color:rgb(140,208,211);">0x0</span>);<span style="color:rgb(127,159,127);">// 检查发送者余额</span><span style="color:rgb(227,206,171);">require</span>(balanceOf[_from] &gt;= _value);<span style="color:rgb(127,159,127);">// 确保转移为正数个</span><span style="color:rgb(227,206,171);">require</span>(balanceOf[_to] + _value &gt; balanceOf[_to]);<span style="color:rgb(127,159,127);">// 以下用来检查交易，</span>uint previousBalances = balanceOf[_from] + balanceOf[_to];<span style="color:rgb(127,159,127);">// Subtract from the sender</span>balanceOf[_from] -= _value;<span style="color:rgb(127,159,127);">// Add the same to the recipient</span>balanceOf[_to] += _value;Transfer(_from, _to, _value);&nbsp;<span style="color:rgb(127,159,127);">// 用assert来检查代码逻辑。</span>&nbsp;assert(balanceOf[_from] + balanceOf[_to] == previousBalances); }<span style="color:rgb(127,159,127);">/*** 代币交易转移* 从创建交易者账号发送`_value`个代币到 `_to`账号**&nbsp;<span>@param</span>&nbsp;_to 接收者地址*&nbsp;<span>@param</span>_value 转移数额*/</span><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">transfer</span><span>(address _to, uint256 _value)</span>&nbsp;<span style="color:rgb(239,239,143);">public</span>&nbsp;</span>{ _transfer(msg.sender, _to, _value); }<span style="color:rgb(127,159,127);">/*** 账号之间代币交易转移*&nbsp;<span>@param</span>&nbsp;_from 发送者地址*&nbsp;<span>@param</span>&nbsp;_to 接收者地址*&nbsp;<span>@param</span>&nbsp;_value 转移数额 */</span><span><span style="color:rgb(227,206,171);">function</span><span style="color:rgb(239,239,143);">transferFrom</span><span>(address _from, address _to, uint256 _value)</span>&nbsp;<span style="color:rgb(239,239,143);">public</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;<span>(bool success)</span>&nbsp;</span>{<span style="color:rgb(227,206,171);">require</span>(_value &lt;= allowance[_from][msg.sender]);&nbsp;<span style="color:rgb(127,159,127);">// Check allowance</span>allowance[_from][msg.sender] -= _value; _transfer(_from, _to, _value);<span style="color:rgb(227,206,171);">return</span>&nbsp;<span style="color:rgb(227,206,171);">true</span>;}&nbsp;<span style="color:rgb(127,159,127);">/*** 设置某个地址（合约）可以交易者名义花费的代币数。** 允许发送者`_spender` 花费不多于 `_value` 个代币**&nbsp;<span>@param</span>&nbsp;_spender The address authorized to spend*&nbsp;<span>@param</span>&nbsp;_value the max amount they can spend*/</span><span><span style="color:rgb(227,206,171);">function</span><span style="color:rgb(239,239,143);">approve</span><span>(address _spender, uint256 _value)</span>&nbsp;<span style="color:rgb(239,239,143);">public</span><span style="color:rgb(239,239,143);">returns</span>&nbsp;<span>(bool success)</span>&nbsp;</span>{allowance[msg.sender][_spender] = _value;<span style="color:rgb(227,206,171);">return</span>&nbsp;<span style="color:rgb(227,206,171);">true</span>;}}<span style="color:rgb(127,159,127);">/*** 销毁创建者账户中指定个代币*/</span><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">burn</span><span>(uint256 _value)</span>&nbsp;<span style="color:rgb(239,239,143);">public</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;<span>(bool success)</span></span>{<span style="color:rgb(227,206,171);">require</span>(balanceOf[msg.sender] &gt;= _value);&nbsp;<span style="color:rgb(127,159,127);">// Check if the sender has enough</span>balanceOf[msg.sender] -= _value;&nbsp;<span style="color:rgb(127,159,127);">// Subtract from the sender</span>totalSupply -= _value;&nbsp;<span style="color:rgb(127,159,127);">// Updates totalSupply</span>Burn(msg.sender, _value);<span style="color:rgb(227,206,171);">return</span>&nbsp;<span style="color:rgb(227,206,171);">true</span>;}<span style="color:rgb(127,159,127);">/*** 销毁用户账户中指定个代币** Remove `_value` tokens from the system irreversibly on behalf of `_from`.**&nbsp;<span>@param</span>&nbsp;_from the address of the sender*&nbsp;<span>@param</span>&nbsp;_value the amount of money to burn*/</span><span><span style="color:rgb(227,206,171);">function</span>&nbsp;<span style="color:rgb(239,239,143);">burnFrom</span><span>(address _from, uint256 _value)</span><span style="color:rgb(239,239,143);">public</span>&nbsp;<span style="color:rgb(239,239,143);">returns</span>&nbsp;<span>(bool success)</span>&nbsp;</span>{<span style="color:rgb(227,206,171);">require</span>(balanceOf[_from] &gt;= _value);&nbsp;<span style="color:rgb(127,159,127);">// Check if the targeted balance is enough</span><span style="color:rgb(227,206,171);">require</span>(_value &lt;= allowance[_from][msg.sender]);&nbsp;<span style="color:rgb(127,159,127);">// Check allowance</span>balanceOf[_from] -= _value;&nbsp;<span style="color:rgb(127,159,127);">// Subtract from the targeted balance</span>allowance[_from][msg.sender] -= _value;&nbsp;<span style="color:rgb(127,159,127);">// Subtract from the sender's allowance</span>totalSupply -= _value;&nbsp;<span style="color:rgb(127,159,127);">// Update totalSupply</span>Burn(_from, _value);<span style="color:rgb(227,206,171);">return</span>&nbsp;<span style="color:rgb(227,206,171);">true</span>; }}</code>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">函数的功能参考函数的说明描述和代码自解释。</p>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);">4</h1>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);"><span style="font-weight:bolder;">合约编译部署和发布</span></h1>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">MetaMask钱包联网</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">前置条件：作者假设学习者已完成MetaMask的安装和配置。还没有完成的，参考<a href="http://mp.weixin.qq.com/s?__biz=MzA5NDAxNzIzNg==&amp;mid=2450003879&amp;idx=1&amp;sn=fad4ba40a62c27fda238f03fe45c5b68&amp;chksm=87a9b41cb0de3d0a1676be78553691804068ef2c1a032aa31a9f049ceff97d52840a7a498955&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(65,131,196);">开发实战|3步教你在以太坊上开一家宠物店（附流程+代码）</a>，安装 MetaMask和配置区块链网络”，在本地WIDOWS环境完成MetaMask轻钱包客户端的安装和配置。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">打开MetaMask钱包，点击左上角的“Ropsten Test Network” 连接成功。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/2bb02283-e822-c32d-383c-2bc2a68b3aa4/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">连接成功</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">查看存量的账号Account 1，其中ETH余额显示为0。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/71e658d8-1ead-85a5-36e8-0870a5cb2f6b/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">存量账号Account 1余额为0</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击“Copy Address to Clipboard”,记录Account 1钱包地址为</p>
  <blockquote style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);font-size:15px;">
   <p>0xD1F7922e8b78cBEB182250753ade8379d1E09949</p>
  </blockquote>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击MetaMask右上角环形头像的菜单“Create Account”, 创建一个新钱包账号Account 8，</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/8b6cc9d2-81ef-9a4c-2d15-41a51125e8bd/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">新增账号成功</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">记录Account 8的钱包地址为</p>
  <blockquote style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);font-size:15px;">
   <p>0x3D7DfB80E71096F2c4Ee63C42C4D849F2CBBE363</p>
  </blockquote>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击Account 8的"BUY"按钮，可以从“Ropsten Test Network” 免费获取一些测试ETH。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/ff4f5150-21d7-fc5e-3a8c-45a3211eb9a7/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">跳转到BUY ETH页面</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击按钮“ROPSTEN TEST FAUCET”可以看到赠送页面</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/90770e3e-e39a-d007-fd35-595ef907383b/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击绿色按钮，等待10秒以上，成功的话每次可以获取1个测试ETH。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">故障排查</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/a00a553f-5dba-d633-d1db-815b8ed43f00/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">赠送失败</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">作者操作时，出现错误。从提示看，是由于用户交易拒绝。等10秒后再点击该绿色按钮则未有错误提示了。原因不明，可能是操作频繁导致。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">多次点击，偶尔出错，小编一共从这个测试网站获取了5个测试ETH用于作为发币的GAS燃料。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/94c6fb3c-d79b-652b-2b29-cc8f138e042c/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">获取测试ETH</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">Remix Solidity IDE调试环境介绍</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">（<a href="https://remix.ethereum.org/%EF%BC%89" rel="nofollow" style="color:rgb(65,131,196);">https://remix.ethereum.org/）</a></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">代码编写和编译</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">我们以<a href="http://mp.weixin.qq.com/s?__biz=MzA5NDAxNzIzNg==&amp;mid=2450003859&amp;idx=1&amp;sn=ac2d0ab2e4c3969e17ac4df25af59792&amp;chksm=87a9b428b0de3d3ebaac557b8ec0948b665c320355f5535ac60499205388a73ff938144d3d51&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(65,131,196);">“Hello World”智能合约</a>为例，参考下图可完成编译和语法错误发现。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/03703e65-5d9d-d4d1-57fb-2e7fc63f7306/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">编译环境使用方法</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">合约创建</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">参考附图描述，在配置号MetaMask账号和网络连接的情况下，确保账户有虚拟ETH用于合约创建花销。最后点击“Create”按钮可以完成合约创建。点击输出区的网页链接（<a href="https://ropsten.etherscan.io/tx/0x9ef5b97580cf5350e9deca8f8472117df3983f1bcd0272b15c490528c811f3f8%EF%BC%89%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%A6%E7%BB%86%E6%83%85%E5%86%B5%E3%80%82" rel="nofollow" style="color:rgb(65,131,196);">https://ropsten.etherscan.io/tx/0x9ef5b97580cf5350e9deca8f8472117df3983f1bcd0272b15c490528c811f3f8）可以查看合约的详细情况。</a></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/fd03032f-77a4-263f-6c99-dd30b4af6a78/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">支付合约花销</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/2ce3ae21-5898-4494-c79b-07586f481639/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">合约执行</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">参考附件路径图，点击RUN按钮可以执行一次合约。点击下方的“Say”按钮，可以看到合约输出。在调试输出窗口可以看到“call to hello.say”的运行提示。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/b72862d8-1c0f-0e99-746d-64051bc8ad33/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">合约执行</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">总结</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">所以说，没有Ubuntu+Ganache等，直接在WINDOWS环境，也可以使用Remix+MetaMask+Ropsten Test Network组合完成一套完整的以太坊测试环境。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">编译ERC20智能合约</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">CHROME浏览器打开Remix Solidity IDE环境（<a href="http://remix.ethereum.org/#optimize=false&amp;version=soljson-v0.4.21+commit.dfe3193c.js%EF%BC%89%EF%BC%8C%E6%89%93%E5%BC%80%E4%B9%8B%E5%89%8D%E7%BC%96%E5%86%99%E7%9A%84%E2%80%9CTokenERC20.sol%E2%80%9D%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%8C%E7%84%B6%E5%90%8E%E7%82%B9%E5%87%BB%E5%8F%B3%E4%BE%A7%E7%9A%84%E2%80%9Cstart" rel="nofollow" style="color:rgb(65,131,196);">http://remix.ethereum.org/#optimize=false&amp;version=soljson-v0.4.21+commit.dfe3193c.js），打开之前编写的“TokenERC20.sol”智能合约，然后点击右侧的“start</a>&nbsp;to compile”按钮。可以看到，除了一些Warning提示外，智能合约编译成功。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/3caa1b08-1bde-dcde-5cf9-c648d7ad4954/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">编译操作</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">运行ERC20智能合约</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/139b2aa3-efe6-9496-b515-a900ee2de9da/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">运行页面</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">切换到"RUN"页面，Environment选择“Injected Web3”, Account自动更新为MetaMask的Account 8账号。“Create”按钮前按照发币数量（本次发1个亿），代币名称，代币符号填写为100000000,"ColorBay","CB"。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击"Create"按钮，会弹出一个交易确认框，设置合理的Gas Price，但要确保Max Transaction Fee不会超过Account 8的ETH总数，点“SUBMIT”按钮。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/019d666e-942e-d4b2-0481-2b3128a9de2d/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">智能合约部署</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">部署成功的话，Account8 会产生一条交易记录，显示状态为“Contract Published”,表示部署成功了。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/a7d2d8d5-05bb-bf1f-20fc-bb8b0c9a0372/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">部署成功</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">说明：有时点击账号，会出现“Retry with a higher gas price here”的提示，一般情况下再等待10秒看看能否交易成功。万一还是不成的话，可考虑该Gas Price大点。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/c7416c75-66fb-0a38-76f0-233e132685fa/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">部署确认中</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">MetaMask加载TOKEN</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击Account 8的交易记录（<a href="https://ropsten.etherscan.io/tx/0x3dd6f5d88f54dee71c4a3d9f5082e270b01cf3f26e1d3960d2517675745fa80e%EF%BC%89%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%B7%B3%E8%BD%AC%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E9%83%A8%E7%BD%B2%E4%BF%A1%E6%81%AF%E6%98%BE%E7%A4%BA%E9%A1%B5%E9%9D%A2%EF%BC%9A" rel="nofollow" style="color:rgb(65,131,196);">https://ropsten.etherscan.io/tx/0x3dd6f5d88f54dee71c4a3d9f5082e270b01cf3f26e1d3960d2517675745fa80e），可以跳转智能合约部署信息显示页面：</a></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/6ac6fd29-60d5-3c6e-f566-cce8b192cafa/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">部署成功</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">获取智能合约地址为0x5eeec41dc08d7caece17c4a349635934637036f1（<a href="https://ropsten.etherscan.io/address/0x5eeec41dc08d7caece17c4a349635934637036f1%EF%BC%89%EF%BC%8C%E7%82%B9%E5%87%BB%E5%8F%AF%E6%9F%A5%E7%9C%8B%E8%AF%A5%E4%BA%A4%E6%98%93%E8%AF%A6%E6%83%85%E3%80%82" rel="nofollow" style="color:rgb(65,131,196);">https://ropsten.etherscan.io/address/0x5eeec41dc08d7caece17c4a349635934637036f1），点击可查看该交易详情。</a></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/9ee23836-9d66-2d1f-2ec5-a90e09215620/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">点击MetaMask的Account 8账号的TOKENS页面的“ADD TOKEN”按钮，把代币智能合约地址Token Contract Address为0x5eeec41dc08d7caece17c4a349635934637036f1，代币标识符Token Symbol为CB，则可以创建你的代币了。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/66391bc2-945a-1ef0-6dcc-c3ecabaa00fa/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">代币创建成功，一共有1亿个CB币了。此时，点击100000000的代币位置，跳转到代币查询页面（<a href="https://ropsten.etherscan.io/token/0x5eeec41dc08d7caece17c4a349635934637036f1%EF%BC%89" rel="nofollow" style="color:rgb(65,131,196);">https://ropsten.etherscan.io/token/0x5eeec41dc08d7caece17c4a349635934637036f1）</a>, 可以在etherscan网站看到账户的持币数量了。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/8dfda0ca-b4e5-952c-cdd1-3141cc8259c3/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">1亿</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/4a529400-eb47-66fa-004d-b2d878b572ac/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">TOKEN信息</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">截止作者发稿时，以太坊的价格为2559元/个，而你有1亿个CB币，是不是快要走上人生巅峰了呢？哈哈，做个梦而已。真正的区块链应用，要能有生态，能为人类社会创造价值，而不是讲故事，割韭菜！</p>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);">5</h1>
  <h1 style="font-size:24px;color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;background-color:rgb(255,255,255);"><span style="font-weight:bolder;">代币交易</span></h1>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">由于MetaMask插件没有提供代币交易功能，同时考虑到很多人并没有以太坊钱包或是被以太坊钱包网络同步问题折磨，今天我用网页钱包（<a href="https://www.myetherwallet.com/%EF%BC%89%E6%9D%A5%E8%AE%B2%E8%A7%A3%E4%BB%A3%E5%B8%81%E4%BA%A4%E6%98%93%E3%80%82" rel="nofollow" style="color:rgb(65,131,196);">https://www.myetherwallet.com/）来讲解代币交易。</a></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">1. &nbsp;进入网页钱包地址</span>&nbsp;（<a href="https://www.myetherwallet.com/#send-transaction%EF%BC%89" rel="nofollow" style="color:rgb(65,131,196);">https://www.myetherwallet.com/#send-transaction）</a></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">第一次进入有一些安全提示需要用户确认。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">2. &nbsp;进入之后，按照下图进行设置</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/2fab8fa1-4725-6133-ab92-f899a06b4da7/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">网络配置</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">3，增加自定义代币</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">填写地址Token Contract 为0x5eeec41dc08d7caece17c4a349635934637036f1和其他信息，点击保存按钮。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/47c23327-bd70-ef20-3ee5-b02d13434fd3/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">增加自定义TOKEN</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/2ec82165-7032-9f24-fe90-b47351cf3dda/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">配置TOKEN合约地址和代币符号</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">配置成功的界面如下：</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/962584b4-0859-97af-8de3-2d2ab16fa0e0/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">【说明】如果不成功，则提示为“Not a valid ERC-20 token CB”,则可能是代币信息填写不正确或者右上角的网络选择错误，没有选择“Network Ropston(infura.com)”选项引起。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><span style="font-weight:bolder;">4.转账给Account 1</span></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">填写Account 1的地址“0xD1F7922e8b78cBEB182250753ade8379d1E09949”到“发送至地址”输入框，</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/03945e7e-83df-7fde-e49d-c57ac1f7c7f0/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">选择CB，不是ETH</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/b258fcaa-905b-a8ae-4044-e3c74f18fd1b/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">转账确认</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/edaa46e5-8203-12f3-1229-781eed158cdf/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">交易确认</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/6bac9cd6-c5dc-6dd1-9954-9dc0919469df/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">交易提示</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">查看账户余额，Account 8减少800万个CB币，而Account 1则增加了800万个CB币。</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/98836dc7-f8b2-4751-89ee-0ba890574a1d/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">Account 8</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);"><img alt="image" src="http://qqadapt.qpic.cn/adapt/0/7777fb13-d180-ea6b-509a-ce16268c2e50/800?pt=0&amp;ek=1&amp;kp=1&amp;sce=0-12-12" style="border-width:0px;border-style:none;vertical-align:top;"></p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">Account 1</p>
  <p style="font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);color:rgb(61,70,77);">转账交易成功了！</p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/tjl373725/article/details/80688634,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/tjl373725/article/details/80688634,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
