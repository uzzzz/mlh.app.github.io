<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>【戴嘉乐】利用IPFS构建自己的去中心化分布式Wiki系统 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="【戴嘉乐】利用IPFS构建自己的去中心化分布式Wiki系统" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="作者简介：戴嘉乐( Mr.Maple ) | 前百度高级研发工程师 | IPFS应用实践者&amp;布道师|个人网站：https://www.daijiale.cn联系方式：微信号：daijiale6239 IPFS全称InterPlanetary File System，中文名：星际文件系统，是一个旨在创建持久且分布式存储和共享文件的网络传输协议。它是一种内容可寻址的对等超媒体分发协议。在IPFS网络中的节点将构成一个分布式文件系统。它是一个开放源代码项目，自2014年开始由Protocol Labs （协议实验室）在开源社区的帮助下发展。其最初由Juan Benet设计。IPFS是点对点的超媒体协议，可以让网络更快、更安全、更开放。它是一个面向全球的、点对点的分布式版本文件系统，试图将所有具有相同文件系统的计算设备连接在一起。官网：https://ipfs.io/ 一、IPFS 简介 IPFS—又称“星际文件系统”。简单点说，它是一个点对点的分布式文件系统（和比特币技术一样），通过底层协议，可以让存储在IPFS系统上的文件，在全世界任何一个地方快速获取，且不受防火墙的影响（无需网络代理）。 我们现在所使用的互联网协议被称作——超文本协议HTTP。这种协议具有超中心化特性。 也就是说，你从互联网上下载文件或者是浏览网页，一次只能从一个数据中心获取你所需要的资料。如果这个数据中心出现故障，或者被限制或是攻击，就会出现文件丢失或者网页无法打开的问题。比如你存在某云盘的资料突然无法下载，或者你想浏览的网页因为某些政策原因无法打开。 而IPFS的目的就是解决这些问题。在某些方面，IPFS类似Web，你一样可以基于IPFS进行互联网地址的链接。但IPFS是去中心化的，它不存在Web的主网故障问题。所以，IPFS完全取代掉HTTP也并非天方夜谭。 1.1 IPFS与HTTP的区别 HTTP的四大痛点 HTTP效率低下，服务器成本昂贵 使用HTTP协议从一台计算机服务器上一次只能下载一个文件，而不是同时从多台计算机中获取文件。通过P2P方式的视频传输可以节省带宽成本的60％。 历史文件被删除 网页的平均使用寿命为100天，大量的网站文件不能得以长期保存。有些重要的文件因操作不当，也有可能永远在互联网消失。 中心化的网络限制了机会 互联网一直是人类进步的催化器，但中心化的网络容易被控制，是对互联网良性发展的的威胁。 网络应用太依赖骨干网 为保证数据的可靠性，我们开发的应用程序太依赖大型的中心服务器，并通过大量的备份来保证数据的安全。 HTTP协议已经用了20年的历史，从HTTP 1.0 到现在的HTTP5，网页的展示越来越美观丰富，但它背后的Browser/Server 模式是从来没变的。 IPFS区别于HTTP痛点的特质 互联网信息永久存储 IPFS像是一个分布式存储网络（类似于SIA），任何存储在系统里的资源，包括文字、图片、声音、视频，以及网站代码，通过IPFS进行哈希运算后，都会生成唯一的地址。今后，你只要通过这个地址就可以打开它们。并且这个地址是可以被分享的。 而由于加密算法的保护，该地址具备了不可篡改和删除的特性（在某种意义上，如果破解密码还是有可能被篡改或删除，但概率极低）。所以，一旦数据存储在IPFS中，它就会是永久性的。比如我们经常会遇到的某个资源删除无法访问的问题。 这种情况，在IPFS上就不会发生。即便是把该站点撤销，只要存储该站点信息的网络依然存在，该网页就可以被正常访问。存储站点的分布式网络越多，它的可靠性也就越强。 与SIA不同的是，IPFS存储的一般是公共信息，普通大众都可以获得的。有一种说法认为，如果IPFS完全取代HTTP，那么此后，人类历史将会被永久保存，且不会被篡改。 这也就意味着，人类所做的每一件事情都会被记录，不管是正确的、抑或是错误的。 解决过度冗余问题，实现共享经济 如果你喜欢某部电影，又担心电影资源丢失，通常的做法是，你会把这部电影下载在自己的电脑上。比如电影《阿凡达》，在2016年一年的下载次数就达到了1658万次，总下载数量更是惊人。那么一个无法避免的问题是：同样的一部电影被反复储存，造成了内存资源极大浪费。这就是HTTP协议的弊端。同样的资源备份的次数过多，就会造成过度冗余的问题。 而IPFS的出现可以很好的解决这个问题。IPFS会把存储文件，做一次哈希计算，只字不差的两个文件哈希值相同。所以，用户只需要使用相同的哈希值，就可以访问那个文件，这个哈希值就是文件的地址。只要获取这个地址，就可以共享资源了。 基于上面的永久存储特性，你再也不用担心某个电影找不到了，也不用备份，因为全球电脑上只要有那么几个人存储着，你就能拿到它。而不是重复存储几十万份。 同时基于内容寻址，而非基于域名寻址。 IPFS的网络上运行着一条区块链，即用来存储互联网文件的哈希值表，每次有网络访问，即要在链上查询该内容（文件）的地址。 文件（内容）具有存在的唯一性，一个文件加入了IPFS的网络，将基于计算对内容赋予一个唯一加密的哈希值。这将改变我们使用域名访问网络的习惯。 提供文件的历史版本控制器（类似Git），并且让多节点使用保存不同版本的文件。 节点存储激励，代币分成 通过使用代币（FileCoin）的激励作用，让各节点有动力去存储数据。 Filecoin 是一个由加密货币驱动的存储网络。矿工通过为网络提供开放的硬盘空间获得Filecoin，而用户则用 Filecoin 来支付在去中心化网络中储存加密文件的费用。 1.2 IPFS工作原理 每个文件及其中的所有块都被赋予一个称为加密散列的唯一指纹。 IPFS通过网络删除重复具有相同哈希值的文件，通过计算是可以判断哪些文件是冗余重复的。并跟踪每个文件的版本历史记录。 每个网络节点只存储它感兴趣的内容，以及一些索引信息，有助于弄清楚谁在存储什么。 查找文件时，你通过文件的哈希值就可以在网络查找到储存改文件的节点，找到想要的文件。 使用称为IPNS（去中心化命名系统），每个文件都可以被协作命名为易读的名字。通过搜索，就能很容易地找到想要查看的文件。 从IPFS的介绍可以看出， IPFS设想的是让所有的网络终端节点不仅仅只充当 Browser或Client的角色，其实人人都可以作为这个网络的运营者，人人都可以是服务器。 1.3 IPFS应用场景 二、IPFS 配置 2.1 IPFS 下载 下载地址：https://dist.ipfs.io/#go-ipfs 本篇博客下载并使用的版本是：go-ipfs Version v0.4.13 for OS X 64bit 2.2 IPFS 安装 ipfs --help //打开命令行，输入，出现Log信息时，表示安装成功 2.3 IPFS本地部署 2.3.1 创建节点 在本地全局目录下新建仓库： 2.3.2 节点配置 cd ~/.ipfs export EDITOR=/usr/bin/vim ipfs config edit 执行完ipfs config edit后会打开一个ipfs节点配置文件，可以如下修改配置参数 { &quot;Identity&quot;:{ &quot;PeerID&quot;:&quot;QmXXXXXXXXXXXXXXX&quot;, &quot;PrivKey&quot;:&quot;XXXXXXXXXXXX&quot; }, &quot;Datastore&quot;:{ &quot;StorageMax&quot;:&quot;10GB&quot;, &quot;StorageGCWatermark&quot;:90, &quot;GCPeriod&quot;:&quot;1h&quot;, &quot;Spec&quot;:{ &quot;mounts&quot;:[ { &quot;child&quot;:{ &quot;path&quot;:&quot;blocks&quot;, &quot;shardFunc&quot;:&quot;/repo/flatfs/shard/v1/next-to-last/2&quot;, &quot;sync&quot;:true, &quot;type&quot;:&quot;flatfs&quot; }, &quot;mountpoint&quot;:&quot;/blocks&quot;, &quot;prefix&quot;:&quot;flatfs.datastore&quot;, &quot;type&quot;:&quot;measure&quot; }, { &quot;child&quot;:{ &quot;compression&quot;:&quot;none&quot;, &quot;path&quot;:&quot;datastore&quot;, &quot;type&quot;:&quot;levelds&quot; }, &quot;mountpoint&quot;:&quot;/&quot;, &quot;prefix&quot;:&quot;leveldb.datastore&quot;, &quot;type&quot;:&quot;measure&quot; } ], &quot;type&quot;:&quot;mount&quot; }, &quot;HashOnRead&quot;:false, &quot;BloomFilterSize&quot;:0 }, &quot;Addresses&quot;:{ &quot;Swarm&quot;:[ &quot;/ip4/0.0.0.0/tcp/4001&quot;, &quot;/ip6/::/tcp/4001&quot; ], &quot;Announce&quot;:[ ], &quot;NoAnnounce&quot;:[ ], &quot;API&quot;:&quot;/ip4/127.0.0.1/tcp/5001&quot;, &quot;Gateway&quot;:&quot;/ip4/127.0.0.1/tcp/8080&quot; }, &quot;Mounts&quot;:{ &quot;IPFS&quot;:&quot;/ipfs&quot;, &quot;IPNS&quot;:&quot;/ipns&quot;, &quot;FuseAllowOther&quot;:false }, &quot;Discovery&quot;:{ &quot;MDNS&quot;:{ &quot;Enabled&quot;:true, &quot;Interval&quot;:10 } }, &quot;Ipns&quot;:{ &quot;RepublishPeriod&quot;:&quot;&quot;, &quot;RecordLifetime&quot;:&quot;&quot;, &quot;ResolveCacheSize&quot;:128 }, &quot;Bootstrap&quot;:[ &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt&quot;, &quot;/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ&quot;, &quot;/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM&quot;, &quot;/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu&quot;, &quot;/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64&quot;, &quot;/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd&quot;, &quot;/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM&quot;, &quot;/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu&quot;, &quot;/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64&quot;, &quot;/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd&quot; ], &quot;Gateway&quot;:{ &quot;HTTPHeaders&quot;:{ &quot;Access-Control-Allow-Headers&quot;:[ &quot;X-Requested-With&quot;, &quot;Range&quot; ], &quot;Access-Control-Allow-Methods&quot;:[ &quot;GET&quot; ], &quot;Access-Control-Allow-Origin&quot;:[ &quot;*&quot; ] }, &quot;RootRedirect&quot;:&quot;&quot;, &quot;Writable&quot;:false, &quot;PathPrefixes&quot;:[ ] }, &quot;API&quot;:{ &quot;HTTPHeaders&quot;:null }, &quot;Swarm&quot;:{ &quot;AddrFilters&quot;:null, &quot;DisableBandwidthMetrics&quot;:false, &quot;DisableNatPortMap&quot;:false, &quot;DisableRelay&quot;:false, &quot;EnableRelayHop&quot;:false, &quot;ConnMgr&quot;:{ &quot;Type&quot;:&quot;basic&quot;, &quot;LowWater&quot;:600, &quot;HighWater&quot;:900, &quot;GracePeriod&quot;:&quot;20s&quot; } }, &quot;Reprovider&quot;:{ &quot;Interval&quot;:&quot;12h&quot;, &quot;Strategy&quot;:&quot;all&quot; }, &quot;Experimental&quot;:{ &quot;FilestoreEnabled&quot;:false, &quot;ShardingEnabled&quot;:false, &quot;Libp2pStreamMounting&quot;:false } } 2.3.3 节点ID 每个节点都会存在一个唯一标识，查看节点ID方式如下： ipfs id 2.3.4 启动节点服务器 ipfs daemon 出现了5001端口被占用的情况，这边可以通过对节点配置文件的修改来解决，如下所示： 找到所有配置5001端口的地方 替换成5002端口 再次启动节点，服务成功启动如下所示： 2.3.5 配置CORS跨域资源共享 为了方便后续前端的开发和数据访问，提前对跨域资源共享CORS进行配置，ctrl-c&nbsp;退出ipfs，然后按照下面的步骤进行跨域配置： ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods &#39;[&quot;PUT&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;OPTIONS&quot;]&#39; ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin &#39;[&quot;*&quot;]&#39; 2.3.6 验证 浏览器打开 http://localhost:5002/webui ，出现Web Console 图形化控制台 这里可以看到所有run在主网上的节点信息，和本地节点相关的配置数据。 三、IPFS 项目实践 利用 IPFS 构建一个去中心化、不可篡改的分布式Wiki系统 3.1 新建workplace 考虑到方便后期开源和推广，这边我是托管在github上，大家可以选择自己熟悉的代码托管服务，也可以克隆我的工程 -&gt;&nbsp;ipfs-wiki-system，在其基础上进行你的二次开发，有任何问题，欢迎提交issue给我 mkdir workplace cd workplace git clone git@github.com:daijiale/ipfs-wiki-system.git 3.2 wiki系统搭建 cd workplace/ipfs-wiki-system/wiki-release ll 可以看到如下文件： wiki-release index.html&nbsp;//markdown模板渲染 navigation.md&nbsp;//导航markdown index.md&nbsp;//首页markdown 大家可以参考ipfs-wiki&nbsp;Demo，根据自己的需求，通过markdown自定义不同的wiki内容和目录。 3.3 挂载本地节点 记住文件根目录的Hash值：QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm 3.4 发布到主网 ipfs daemon https://ipfs.io/ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm/#!index.md 3.5 发布到IPNS 由于ipfs的hash对应着一个不可变的内容，每次更新网站之后，website的hash都会变，旧的link不能访问到新的内容。 ipfs提供了ipns来解决更新的问题。 ipfs允许用户使用一个私有密钥来对哈希附加一个引用，使用一个公共密钥哈希（简称pubkeyhash）表示你的网站的最新版本。 具体操作是: 通过上述方式，就完成了website和一个固定的link的绑定：QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 3.6 绑定验证 ipfs name resolve QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 /ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm IPNS访问固定节点Hash： https://ipfs.io/ipns/QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 验证成功，出现如下效果： 3.7 去中心化验证 以之前发布到主网的节点为第一节点，我们本地再新建一个节点，用以模拟第二节点的身份，打开Web Console： 在第二节点上，我们依然可以通过IPFS HASH查询到第一节点主网上的&nbsp;ipfs-wiki-system目录文件数据 同时，我们也能看到：控制台显示记录了我们发布至主网数据的区块节点数已经扩散至275个。 也就是说，来自另外全球其他274地方的个体，在自己的&#39;&#39;记账本&#39;&#39;中记下了你之前发布的数据，哪怕其中个别服务器宕机（天灾人祸，挖断电缆，世界末日等等），只要有一个节点安好，你的数据都不会丢失，真正意义实现了去中心化的服务机制。 四、项目体验 -&gt; 传送门 参考文献 本文部分内容参考如下文献，特别鸣谢 如何使用星际文件传输网络（IPFS）搭建区块链服务-黎跃春 Youtube实验室 protocol协议实验室 Filecoin早期旷工计划 IPFS开发英文官方文档 IPFS——它能取代HTTP协议？ IPFS—http的终极杀手 End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 阅读更多" />
<meta property="og:description" content="作者简介：戴嘉乐( Mr.Maple ) | 前百度高级研发工程师 | IPFS应用实践者&amp;布道师|个人网站：https://www.daijiale.cn联系方式：微信号：daijiale6239 IPFS全称InterPlanetary File System，中文名：星际文件系统，是一个旨在创建持久且分布式存储和共享文件的网络传输协议。它是一种内容可寻址的对等超媒体分发协议。在IPFS网络中的节点将构成一个分布式文件系统。它是一个开放源代码项目，自2014年开始由Protocol Labs （协议实验室）在开源社区的帮助下发展。其最初由Juan Benet设计。IPFS是点对点的超媒体协议，可以让网络更快、更安全、更开放。它是一个面向全球的、点对点的分布式版本文件系统，试图将所有具有相同文件系统的计算设备连接在一起。官网：https://ipfs.io/ 一、IPFS 简介 IPFS—又称“星际文件系统”。简单点说，它是一个点对点的分布式文件系统（和比特币技术一样），通过底层协议，可以让存储在IPFS系统上的文件，在全世界任何一个地方快速获取，且不受防火墙的影响（无需网络代理）。 我们现在所使用的互联网协议被称作——超文本协议HTTP。这种协议具有超中心化特性。 也就是说，你从互联网上下载文件或者是浏览网页，一次只能从一个数据中心获取你所需要的资料。如果这个数据中心出现故障，或者被限制或是攻击，就会出现文件丢失或者网页无法打开的问题。比如你存在某云盘的资料突然无法下载，或者你想浏览的网页因为某些政策原因无法打开。 而IPFS的目的就是解决这些问题。在某些方面，IPFS类似Web，你一样可以基于IPFS进行互联网地址的链接。但IPFS是去中心化的，它不存在Web的主网故障问题。所以，IPFS完全取代掉HTTP也并非天方夜谭。 1.1 IPFS与HTTP的区别 HTTP的四大痛点 HTTP效率低下，服务器成本昂贵 使用HTTP协议从一台计算机服务器上一次只能下载一个文件，而不是同时从多台计算机中获取文件。通过P2P方式的视频传输可以节省带宽成本的60％。 历史文件被删除 网页的平均使用寿命为100天，大量的网站文件不能得以长期保存。有些重要的文件因操作不当，也有可能永远在互联网消失。 中心化的网络限制了机会 互联网一直是人类进步的催化器，但中心化的网络容易被控制，是对互联网良性发展的的威胁。 网络应用太依赖骨干网 为保证数据的可靠性，我们开发的应用程序太依赖大型的中心服务器，并通过大量的备份来保证数据的安全。 HTTP协议已经用了20年的历史，从HTTP 1.0 到现在的HTTP5，网页的展示越来越美观丰富，但它背后的Browser/Server 模式是从来没变的。 IPFS区别于HTTP痛点的特质 互联网信息永久存储 IPFS像是一个分布式存储网络（类似于SIA），任何存储在系统里的资源，包括文字、图片、声音、视频，以及网站代码，通过IPFS进行哈希运算后，都会生成唯一的地址。今后，你只要通过这个地址就可以打开它们。并且这个地址是可以被分享的。 而由于加密算法的保护，该地址具备了不可篡改和删除的特性（在某种意义上，如果破解密码还是有可能被篡改或删除，但概率极低）。所以，一旦数据存储在IPFS中，它就会是永久性的。比如我们经常会遇到的某个资源删除无法访问的问题。 这种情况，在IPFS上就不会发生。即便是把该站点撤销，只要存储该站点信息的网络依然存在，该网页就可以被正常访问。存储站点的分布式网络越多，它的可靠性也就越强。 与SIA不同的是，IPFS存储的一般是公共信息，普通大众都可以获得的。有一种说法认为，如果IPFS完全取代HTTP，那么此后，人类历史将会被永久保存，且不会被篡改。 这也就意味着，人类所做的每一件事情都会被记录，不管是正确的、抑或是错误的。 解决过度冗余问题，实现共享经济 如果你喜欢某部电影，又担心电影资源丢失，通常的做法是，你会把这部电影下载在自己的电脑上。比如电影《阿凡达》，在2016年一年的下载次数就达到了1658万次，总下载数量更是惊人。那么一个无法避免的问题是：同样的一部电影被反复储存，造成了内存资源极大浪费。这就是HTTP协议的弊端。同样的资源备份的次数过多，就会造成过度冗余的问题。 而IPFS的出现可以很好的解决这个问题。IPFS会把存储文件，做一次哈希计算，只字不差的两个文件哈希值相同。所以，用户只需要使用相同的哈希值，就可以访问那个文件，这个哈希值就是文件的地址。只要获取这个地址，就可以共享资源了。 基于上面的永久存储特性，你再也不用担心某个电影找不到了，也不用备份，因为全球电脑上只要有那么几个人存储着，你就能拿到它。而不是重复存储几十万份。 同时基于内容寻址，而非基于域名寻址。 IPFS的网络上运行着一条区块链，即用来存储互联网文件的哈希值表，每次有网络访问，即要在链上查询该内容（文件）的地址。 文件（内容）具有存在的唯一性，一个文件加入了IPFS的网络，将基于计算对内容赋予一个唯一加密的哈希值。这将改变我们使用域名访问网络的习惯。 提供文件的历史版本控制器（类似Git），并且让多节点使用保存不同版本的文件。 节点存储激励，代币分成 通过使用代币（FileCoin）的激励作用，让各节点有动力去存储数据。 Filecoin 是一个由加密货币驱动的存储网络。矿工通过为网络提供开放的硬盘空间获得Filecoin，而用户则用 Filecoin 来支付在去中心化网络中储存加密文件的费用。 1.2 IPFS工作原理 每个文件及其中的所有块都被赋予一个称为加密散列的唯一指纹。 IPFS通过网络删除重复具有相同哈希值的文件，通过计算是可以判断哪些文件是冗余重复的。并跟踪每个文件的版本历史记录。 每个网络节点只存储它感兴趣的内容，以及一些索引信息，有助于弄清楚谁在存储什么。 查找文件时，你通过文件的哈希值就可以在网络查找到储存改文件的节点，找到想要的文件。 使用称为IPNS（去中心化命名系统），每个文件都可以被协作命名为易读的名字。通过搜索，就能很容易地找到想要查看的文件。 从IPFS的介绍可以看出， IPFS设想的是让所有的网络终端节点不仅仅只充当 Browser或Client的角色，其实人人都可以作为这个网络的运营者，人人都可以是服务器。 1.3 IPFS应用场景 二、IPFS 配置 2.1 IPFS 下载 下载地址：https://dist.ipfs.io/#go-ipfs 本篇博客下载并使用的版本是：go-ipfs Version v0.4.13 for OS X 64bit 2.2 IPFS 安装 ipfs --help //打开命令行，输入，出现Log信息时，表示安装成功 2.3 IPFS本地部署 2.3.1 创建节点 在本地全局目录下新建仓库： 2.3.2 节点配置 cd ~/.ipfs export EDITOR=/usr/bin/vim ipfs config edit 执行完ipfs config edit后会打开一个ipfs节点配置文件，可以如下修改配置参数 { &quot;Identity&quot;:{ &quot;PeerID&quot;:&quot;QmXXXXXXXXXXXXXXX&quot;, &quot;PrivKey&quot;:&quot;XXXXXXXXXXXX&quot; }, &quot;Datastore&quot;:{ &quot;StorageMax&quot;:&quot;10GB&quot;, &quot;StorageGCWatermark&quot;:90, &quot;GCPeriod&quot;:&quot;1h&quot;, &quot;Spec&quot;:{ &quot;mounts&quot;:[ { &quot;child&quot;:{ &quot;path&quot;:&quot;blocks&quot;, &quot;shardFunc&quot;:&quot;/repo/flatfs/shard/v1/next-to-last/2&quot;, &quot;sync&quot;:true, &quot;type&quot;:&quot;flatfs&quot; }, &quot;mountpoint&quot;:&quot;/blocks&quot;, &quot;prefix&quot;:&quot;flatfs.datastore&quot;, &quot;type&quot;:&quot;measure&quot; }, { &quot;child&quot;:{ &quot;compression&quot;:&quot;none&quot;, &quot;path&quot;:&quot;datastore&quot;, &quot;type&quot;:&quot;levelds&quot; }, &quot;mountpoint&quot;:&quot;/&quot;, &quot;prefix&quot;:&quot;leveldb.datastore&quot;, &quot;type&quot;:&quot;measure&quot; } ], &quot;type&quot;:&quot;mount&quot; }, &quot;HashOnRead&quot;:false, &quot;BloomFilterSize&quot;:0 }, &quot;Addresses&quot;:{ &quot;Swarm&quot;:[ &quot;/ip4/0.0.0.0/tcp/4001&quot;, &quot;/ip6/::/tcp/4001&quot; ], &quot;Announce&quot;:[ ], &quot;NoAnnounce&quot;:[ ], &quot;API&quot;:&quot;/ip4/127.0.0.1/tcp/5001&quot;, &quot;Gateway&quot;:&quot;/ip4/127.0.0.1/tcp/8080&quot; }, &quot;Mounts&quot;:{ &quot;IPFS&quot;:&quot;/ipfs&quot;, &quot;IPNS&quot;:&quot;/ipns&quot;, &quot;FuseAllowOther&quot;:false }, &quot;Discovery&quot;:{ &quot;MDNS&quot;:{ &quot;Enabled&quot;:true, &quot;Interval&quot;:10 } }, &quot;Ipns&quot;:{ &quot;RepublishPeriod&quot;:&quot;&quot;, &quot;RecordLifetime&quot;:&quot;&quot;, &quot;ResolveCacheSize&quot;:128 }, &quot;Bootstrap&quot;:[ &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt&quot;, &quot;/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ&quot;, &quot;/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM&quot;, &quot;/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu&quot;, &quot;/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64&quot;, &quot;/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd&quot;, &quot;/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM&quot;, &quot;/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu&quot;, &quot;/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64&quot;, &quot;/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd&quot; ], &quot;Gateway&quot;:{ &quot;HTTPHeaders&quot;:{ &quot;Access-Control-Allow-Headers&quot;:[ &quot;X-Requested-With&quot;, &quot;Range&quot; ], &quot;Access-Control-Allow-Methods&quot;:[ &quot;GET&quot; ], &quot;Access-Control-Allow-Origin&quot;:[ &quot;*&quot; ] }, &quot;RootRedirect&quot;:&quot;&quot;, &quot;Writable&quot;:false, &quot;PathPrefixes&quot;:[ ] }, &quot;API&quot;:{ &quot;HTTPHeaders&quot;:null }, &quot;Swarm&quot;:{ &quot;AddrFilters&quot;:null, &quot;DisableBandwidthMetrics&quot;:false, &quot;DisableNatPortMap&quot;:false, &quot;DisableRelay&quot;:false, &quot;EnableRelayHop&quot;:false, &quot;ConnMgr&quot;:{ &quot;Type&quot;:&quot;basic&quot;, &quot;LowWater&quot;:600, &quot;HighWater&quot;:900, &quot;GracePeriod&quot;:&quot;20s&quot; } }, &quot;Reprovider&quot;:{ &quot;Interval&quot;:&quot;12h&quot;, &quot;Strategy&quot;:&quot;all&quot; }, &quot;Experimental&quot;:{ &quot;FilestoreEnabled&quot;:false, &quot;ShardingEnabled&quot;:false, &quot;Libp2pStreamMounting&quot;:false } } 2.3.3 节点ID 每个节点都会存在一个唯一标识，查看节点ID方式如下： ipfs id 2.3.4 启动节点服务器 ipfs daemon 出现了5001端口被占用的情况，这边可以通过对节点配置文件的修改来解决，如下所示： 找到所有配置5001端口的地方 替换成5002端口 再次启动节点，服务成功启动如下所示： 2.3.5 配置CORS跨域资源共享 为了方便后续前端的开发和数据访问，提前对跨域资源共享CORS进行配置，ctrl-c&nbsp;退出ipfs，然后按照下面的步骤进行跨域配置： ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods &#39;[&quot;PUT&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;OPTIONS&quot;]&#39; ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin &#39;[&quot;*&quot;]&#39; 2.3.6 验证 浏览器打开 http://localhost:5002/webui ，出现Web Console 图形化控制台 这里可以看到所有run在主网上的节点信息，和本地节点相关的配置数据。 三、IPFS 项目实践 利用 IPFS 构建一个去中心化、不可篡改的分布式Wiki系统 3.1 新建workplace 考虑到方便后期开源和推广，这边我是托管在github上，大家可以选择自己熟悉的代码托管服务，也可以克隆我的工程 -&gt;&nbsp;ipfs-wiki-system，在其基础上进行你的二次开发，有任何问题，欢迎提交issue给我 mkdir workplace cd workplace git clone git@github.com:daijiale/ipfs-wiki-system.git 3.2 wiki系统搭建 cd workplace/ipfs-wiki-system/wiki-release ll 可以看到如下文件： wiki-release index.html&nbsp;//markdown模板渲染 navigation.md&nbsp;//导航markdown index.md&nbsp;//首页markdown 大家可以参考ipfs-wiki&nbsp;Demo，根据自己的需求，通过markdown自定义不同的wiki内容和目录。 3.3 挂载本地节点 记住文件根目录的Hash值：QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm 3.4 发布到主网 ipfs daemon https://ipfs.io/ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm/#!index.md 3.5 发布到IPNS 由于ipfs的hash对应着一个不可变的内容，每次更新网站之后，website的hash都会变，旧的link不能访问到新的内容。 ipfs提供了ipns来解决更新的问题。 ipfs允许用户使用一个私有密钥来对哈希附加一个引用，使用一个公共密钥哈希（简称pubkeyhash）表示你的网站的最新版本。 具体操作是: 通过上述方式，就完成了website和一个固定的link的绑定：QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 3.6 绑定验证 ipfs name resolve QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 /ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm IPNS访问固定节点Hash： https://ipfs.io/ipns/QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 验证成功，出现如下效果： 3.7 去中心化验证 以之前发布到主网的节点为第一节点，我们本地再新建一个节点，用以模拟第二节点的身份，打开Web Console： 在第二节点上，我们依然可以通过IPFS HASH查询到第一节点主网上的&nbsp;ipfs-wiki-system目录文件数据 同时，我们也能看到：控制台显示记录了我们发布至主网数据的区块节点数已经扩散至275个。 也就是说，来自另外全球其他274地方的个体，在自己的&#39;&#39;记账本&#39;&#39;中记下了你之前发布的数据，哪怕其中个别服务器宕机（天灾人祸，挖断电缆，世界末日等等），只要有一个节点安好，你的数据都不会丢失，真正意义实现了去中心化的服务机制。 四、项目体验 -&gt; 传送门 参考文献 本文部分内容参考如下文献，特别鸣谢 如何使用星际文件传输网络（IPFS）搭建区块链服务-黎跃春 Youtube实验室 protocol协议实验室 Filecoin早期旷工计划 IPFS开发英文官方文档 IPFS——它能取代HTTP协议？ IPFS—http的终极杀手 End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/05/23/836ee2e58e88072e9537232ff470bbfe.html" />
<meta property="og:url" content="https://mlh.app/2018/05/23/836ee2e58e88072e9537232ff470bbfe.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-05-23T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"作者简介：戴嘉乐( Mr.Maple ) | 前百度高级研发工程师 | IPFS应用实践者&amp;布道师|个人网站：https://www.daijiale.cn联系方式：微信号：daijiale6239 IPFS全称InterPlanetary File System，中文名：星际文件系统，是一个旨在创建持久且分布式存储和共享文件的网络传输协议。它是一种内容可寻址的对等超媒体分发协议。在IPFS网络中的节点将构成一个分布式文件系统。它是一个开放源代码项目，自2014年开始由Protocol Labs （协议实验室）在开源社区的帮助下发展。其最初由Juan Benet设计。IPFS是点对点的超媒体协议，可以让网络更快、更安全、更开放。它是一个面向全球的、点对点的分布式版本文件系统，试图将所有具有相同文件系统的计算设备连接在一起。官网：https://ipfs.io/ 一、IPFS 简介 IPFS—又称“星际文件系统”。简单点说，它是一个点对点的分布式文件系统（和比特币技术一样），通过底层协议，可以让存储在IPFS系统上的文件，在全世界任何一个地方快速获取，且不受防火墙的影响（无需网络代理）。 我们现在所使用的互联网协议被称作——超文本协议HTTP。这种协议具有超中心化特性。 也就是说，你从互联网上下载文件或者是浏览网页，一次只能从一个数据中心获取你所需要的资料。如果这个数据中心出现故障，或者被限制或是攻击，就会出现文件丢失或者网页无法打开的问题。比如你存在某云盘的资料突然无法下载，或者你想浏览的网页因为某些政策原因无法打开。 而IPFS的目的就是解决这些问题。在某些方面，IPFS类似Web，你一样可以基于IPFS进行互联网地址的链接。但IPFS是去中心化的，它不存在Web的主网故障问题。所以，IPFS完全取代掉HTTP也并非天方夜谭。 1.1 IPFS与HTTP的区别 HTTP的四大痛点 HTTP效率低下，服务器成本昂贵 使用HTTP协议从一台计算机服务器上一次只能下载一个文件，而不是同时从多台计算机中获取文件。通过P2P方式的视频传输可以节省带宽成本的60％。 历史文件被删除 网页的平均使用寿命为100天，大量的网站文件不能得以长期保存。有些重要的文件因操作不当，也有可能永远在互联网消失。 中心化的网络限制了机会 互联网一直是人类进步的催化器，但中心化的网络容易被控制，是对互联网良性发展的的威胁。 网络应用太依赖骨干网 为保证数据的可靠性，我们开发的应用程序太依赖大型的中心服务器，并通过大量的备份来保证数据的安全。 HTTP协议已经用了20年的历史，从HTTP 1.0 到现在的HTTP5，网页的展示越来越美观丰富，但它背后的Browser/Server 模式是从来没变的。 IPFS区别于HTTP痛点的特质 互联网信息永久存储 IPFS像是一个分布式存储网络（类似于SIA），任何存储在系统里的资源，包括文字、图片、声音、视频，以及网站代码，通过IPFS进行哈希运算后，都会生成唯一的地址。今后，你只要通过这个地址就可以打开它们。并且这个地址是可以被分享的。 而由于加密算法的保护，该地址具备了不可篡改和删除的特性（在某种意义上，如果破解密码还是有可能被篡改或删除，但概率极低）。所以，一旦数据存储在IPFS中，它就会是永久性的。比如我们经常会遇到的某个资源删除无法访问的问题。 这种情况，在IPFS上就不会发生。即便是把该站点撤销，只要存储该站点信息的网络依然存在，该网页就可以被正常访问。存储站点的分布式网络越多，它的可靠性也就越强。 与SIA不同的是，IPFS存储的一般是公共信息，普通大众都可以获得的。有一种说法认为，如果IPFS完全取代HTTP，那么此后，人类历史将会被永久保存，且不会被篡改。 这也就意味着，人类所做的每一件事情都会被记录，不管是正确的、抑或是错误的。 解决过度冗余问题，实现共享经济 如果你喜欢某部电影，又担心电影资源丢失，通常的做法是，你会把这部电影下载在自己的电脑上。比如电影《阿凡达》，在2016年一年的下载次数就达到了1658万次，总下载数量更是惊人。那么一个无法避免的问题是：同样的一部电影被反复储存，造成了内存资源极大浪费。这就是HTTP协议的弊端。同样的资源备份的次数过多，就会造成过度冗余的问题。 而IPFS的出现可以很好的解决这个问题。IPFS会把存储文件，做一次哈希计算，只字不差的两个文件哈希值相同。所以，用户只需要使用相同的哈希值，就可以访问那个文件，这个哈希值就是文件的地址。只要获取这个地址，就可以共享资源了。 基于上面的永久存储特性，你再也不用担心某个电影找不到了，也不用备份，因为全球电脑上只要有那么几个人存储着，你就能拿到它。而不是重复存储几十万份。 同时基于内容寻址，而非基于域名寻址。 IPFS的网络上运行着一条区块链，即用来存储互联网文件的哈希值表，每次有网络访问，即要在链上查询该内容（文件）的地址。 文件（内容）具有存在的唯一性，一个文件加入了IPFS的网络，将基于计算对内容赋予一个唯一加密的哈希值。这将改变我们使用域名访问网络的习惯。 提供文件的历史版本控制器（类似Git），并且让多节点使用保存不同版本的文件。 节点存储激励，代币分成 通过使用代币（FileCoin）的激励作用，让各节点有动力去存储数据。 Filecoin 是一个由加密货币驱动的存储网络。矿工通过为网络提供开放的硬盘空间获得Filecoin，而用户则用 Filecoin 来支付在去中心化网络中储存加密文件的费用。 1.2 IPFS工作原理 每个文件及其中的所有块都被赋予一个称为加密散列的唯一指纹。 IPFS通过网络删除重复具有相同哈希值的文件，通过计算是可以判断哪些文件是冗余重复的。并跟踪每个文件的版本历史记录。 每个网络节点只存储它感兴趣的内容，以及一些索引信息，有助于弄清楚谁在存储什么。 查找文件时，你通过文件的哈希值就可以在网络查找到储存改文件的节点，找到想要的文件。 使用称为IPNS（去中心化命名系统），每个文件都可以被协作命名为易读的名字。通过搜索，就能很容易地找到想要查看的文件。 从IPFS的介绍可以看出， IPFS设想的是让所有的网络终端节点不仅仅只充当 Browser或Client的角色，其实人人都可以作为这个网络的运营者，人人都可以是服务器。 1.3 IPFS应用场景 二、IPFS 配置 2.1 IPFS 下载 下载地址：https://dist.ipfs.io/#go-ipfs 本篇博客下载并使用的版本是：go-ipfs Version v0.4.13 for OS X 64bit 2.2 IPFS 安装 ipfs --help //打开命令行，输入，出现Log信息时，表示安装成功 2.3 IPFS本地部署 2.3.1 创建节点 在本地全局目录下新建仓库： 2.3.2 节点配置 cd ~/.ipfs export EDITOR=/usr/bin/vim ipfs config edit 执行完ipfs config edit后会打开一个ipfs节点配置文件，可以如下修改配置参数 { &quot;Identity&quot;:{ &quot;PeerID&quot;:&quot;QmXXXXXXXXXXXXXXX&quot;, &quot;PrivKey&quot;:&quot;XXXXXXXXXXXX&quot; }, &quot;Datastore&quot;:{ &quot;StorageMax&quot;:&quot;10GB&quot;, &quot;StorageGCWatermark&quot;:90, &quot;GCPeriod&quot;:&quot;1h&quot;, &quot;Spec&quot;:{ &quot;mounts&quot;:[ { &quot;child&quot;:{ &quot;path&quot;:&quot;blocks&quot;, &quot;shardFunc&quot;:&quot;/repo/flatfs/shard/v1/next-to-last/2&quot;, &quot;sync&quot;:true, &quot;type&quot;:&quot;flatfs&quot; }, &quot;mountpoint&quot;:&quot;/blocks&quot;, &quot;prefix&quot;:&quot;flatfs.datastore&quot;, &quot;type&quot;:&quot;measure&quot; }, { &quot;child&quot;:{ &quot;compression&quot;:&quot;none&quot;, &quot;path&quot;:&quot;datastore&quot;, &quot;type&quot;:&quot;levelds&quot; }, &quot;mountpoint&quot;:&quot;/&quot;, &quot;prefix&quot;:&quot;leveldb.datastore&quot;, &quot;type&quot;:&quot;measure&quot; } ], &quot;type&quot;:&quot;mount&quot; }, &quot;HashOnRead&quot;:false, &quot;BloomFilterSize&quot;:0 }, &quot;Addresses&quot;:{ &quot;Swarm&quot;:[ &quot;/ip4/0.0.0.0/tcp/4001&quot;, &quot;/ip6/::/tcp/4001&quot; ], &quot;Announce&quot;:[ ], &quot;NoAnnounce&quot;:[ ], &quot;API&quot;:&quot;/ip4/127.0.0.1/tcp/5001&quot;, &quot;Gateway&quot;:&quot;/ip4/127.0.0.1/tcp/8080&quot; }, &quot;Mounts&quot;:{ &quot;IPFS&quot;:&quot;/ipfs&quot;, &quot;IPNS&quot;:&quot;/ipns&quot;, &quot;FuseAllowOther&quot;:false }, &quot;Discovery&quot;:{ &quot;MDNS&quot;:{ &quot;Enabled&quot;:true, &quot;Interval&quot;:10 } }, &quot;Ipns&quot;:{ &quot;RepublishPeriod&quot;:&quot;&quot;, &quot;RecordLifetime&quot;:&quot;&quot;, &quot;ResolveCacheSize&quot;:128 }, &quot;Bootstrap&quot;:[ &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb&quot;, &quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt&quot;, &quot;/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ&quot;, &quot;/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM&quot;, &quot;/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu&quot;, &quot;/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64&quot;, &quot;/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd&quot;, &quot;/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM&quot;, &quot;/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu&quot;, &quot;/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64&quot;, &quot;/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd&quot; ], &quot;Gateway&quot;:{ &quot;HTTPHeaders&quot;:{ &quot;Access-Control-Allow-Headers&quot;:[ &quot;X-Requested-With&quot;, &quot;Range&quot; ], &quot;Access-Control-Allow-Methods&quot;:[ &quot;GET&quot; ], &quot;Access-Control-Allow-Origin&quot;:[ &quot;*&quot; ] }, &quot;RootRedirect&quot;:&quot;&quot;, &quot;Writable&quot;:false, &quot;PathPrefixes&quot;:[ ] }, &quot;API&quot;:{ &quot;HTTPHeaders&quot;:null }, &quot;Swarm&quot;:{ &quot;AddrFilters&quot;:null, &quot;DisableBandwidthMetrics&quot;:false, &quot;DisableNatPortMap&quot;:false, &quot;DisableRelay&quot;:false, &quot;EnableRelayHop&quot;:false, &quot;ConnMgr&quot;:{ &quot;Type&quot;:&quot;basic&quot;, &quot;LowWater&quot;:600, &quot;HighWater&quot;:900, &quot;GracePeriod&quot;:&quot;20s&quot; } }, &quot;Reprovider&quot;:{ &quot;Interval&quot;:&quot;12h&quot;, &quot;Strategy&quot;:&quot;all&quot; }, &quot;Experimental&quot;:{ &quot;FilestoreEnabled&quot;:false, &quot;ShardingEnabled&quot;:false, &quot;Libp2pStreamMounting&quot;:false } } 2.3.3 节点ID 每个节点都会存在一个唯一标识，查看节点ID方式如下： ipfs id 2.3.4 启动节点服务器 ipfs daemon 出现了5001端口被占用的情况，这边可以通过对节点配置文件的修改来解决，如下所示： 找到所有配置5001端口的地方 替换成5002端口 再次启动节点，服务成功启动如下所示： 2.3.5 配置CORS跨域资源共享 为了方便后续前端的开发和数据访问，提前对跨域资源共享CORS进行配置，ctrl-c&nbsp;退出ipfs，然后按照下面的步骤进行跨域配置： ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods &#39;[&quot;PUT&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;OPTIONS&quot;]&#39; ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin &#39;[&quot;*&quot;]&#39; 2.3.6 验证 浏览器打开 http://localhost:5002/webui ，出现Web Console 图形化控制台 这里可以看到所有run在主网上的节点信息，和本地节点相关的配置数据。 三、IPFS 项目实践 利用 IPFS 构建一个去中心化、不可篡改的分布式Wiki系统 3.1 新建workplace 考虑到方便后期开源和推广，这边我是托管在github上，大家可以选择自己熟悉的代码托管服务，也可以克隆我的工程 -&gt;&nbsp;ipfs-wiki-system，在其基础上进行你的二次开发，有任何问题，欢迎提交issue给我 mkdir workplace cd workplace git clone git@github.com:daijiale/ipfs-wiki-system.git 3.2 wiki系统搭建 cd workplace/ipfs-wiki-system/wiki-release ll 可以看到如下文件： wiki-release index.html&nbsp;//markdown模板渲染 navigation.md&nbsp;//导航markdown index.md&nbsp;//首页markdown 大家可以参考ipfs-wiki&nbsp;Demo，根据自己的需求，通过markdown自定义不同的wiki内容和目录。 3.3 挂载本地节点 记住文件根目录的Hash值：QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm 3.4 发布到主网 ipfs daemon https://ipfs.io/ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm/#!index.md 3.5 发布到IPNS 由于ipfs的hash对应着一个不可变的内容，每次更新网站之后，website的hash都会变，旧的link不能访问到新的内容。 ipfs提供了ipns来解决更新的问题。 ipfs允许用户使用一个私有密钥来对哈希附加一个引用，使用一个公共密钥哈希（简称pubkeyhash）表示你的网站的最新版本。 具体操作是: 通过上述方式，就完成了website和一个固定的link的绑定：QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 3.6 绑定验证 ipfs name resolve QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 /ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm IPNS访问固定节点Hash： https://ipfs.io/ipns/QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78 验证成功，出现如下效果： 3.7 去中心化验证 以之前发布到主网的节点为第一节点，我们本地再新建一个节点，用以模拟第二节点的身份，打开Web Console： 在第二节点上，我们依然可以通过IPFS HASH查询到第一节点主网上的&nbsp;ipfs-wiki-system目录文件数据 同时，我们也能看到：控制台显示记录了我们发布至主网数据的区块节点数已经扩散至275个。 也就是说，来自另外全球其他274地方的个体，在自己的&#39;&#39;记账本&#39;&#39;中记下了你之前发布的数据，哪怕其中个别服务器宕机（天灾人祸，挖断电缆，世界末日等等），只要有一个节点安好，你的数据都不会丢失，真正意义实现了去中心化的服务机制。 四、项目体验 -&gt; 传送门 参考文献 本文部分内容参考如下文献，特别鸣谢 如何使用星际文件传输网络（IPFS）搭建区块链服务-黎跃春 Youtube实验室 protocol协议实验室 Filecoin早期旷工计划 IPFS开发英文官方文档 IPFS——它能取代HTTP协议？ IPFS—http的终极杀手 End&nbsp; 圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;许晓笛老师的CSDN学院视频专栏&nbsp;https://edu.csdn.net/lecturer/2008&nbsp;郭金宏老师的csdn学院视频专栏：https://edu.csdn.net/lecturer/2214 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/05/23/836ee2e58e88072e9537232ff470bbfe.html","headline":"【戴嘉乐】利用IPFS构建自己的去中心化分布式Wiki系统","dateModified":"2018-05-23T00:00:00+08:00","datePublished":"2018-05-23T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/05/23/836ee2e58e88072e9537232ff470bbfe.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>【戴嘉乐】利用IPFS构建自己的去中心化分布式Wiki系统</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p></p>
  <p style="color:rgb(86,86,86);line-height:30px;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);"><br></p>
  <blockquote style="color:rgb(64,64,64);background:rgb(249,249,249);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">作者简介：戴嘉乐( Mr.Maple ) | 前百度高级研发工程师 | IPFS应用实践者&amp;布道师|<br>个人网站：<a href="https://www.daijiale.cn/" rel="nofollow" style="color:rgb(230,116,116);background-color:transparent;">https://www.daijiale.cn</a><br>联系方式：微信号：daijiale6239</p>
  </blockquote>
  <p><br></p>
  <p></p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">IPFS全称InterPlanetary File System，中文名：星际文件系统，是一个旨在创建持久且分布式存储和共享文件的网络传输协议。<br>它是一种内容可寻址的对等超媒体分发协议。在IPFS网络中的节点将构成一个分布式文件系统。它是一个开放源代码项目，自2014年开始由Protocol Labs （协议实验室）在开源社区的帮助下发展。其最初由Juan Benet设计。<br>IPFS是点对点的超媒体协议，可以让网络更快、更安全、更开放。它是一个面向全球的、点对点的分布式版本文件系统，试图将所有具有相同文件系统的计算设备连接在一起。<br>官网：https://ipfs.io/</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs_io.png" alt="" style="border:0px;"></p>
  <h2 style="clear:both;color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">一、IPFS 简介</h2>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">IPFS—又称“星际文件系统”。简单点说，它是一个点对点的分布式文件系统（和比特币技术一样），通过底层协议，可以让存储在IPFS系统上的文件，在全世界任何一个地方快速获取，且不受防火墙的影响（无需网络代理）。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">我们现在所使用的互联网协议被称作——超文本协议HTTP。这种协议具有超中心化特性。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">也就是说，你从互联网上下载文件或者是浏览网页，一次只能从一个数据中心获取你所需要的资料。如果这个数据中心出现故障，或者被限制或是攻击，就会出现文件丢失或者网页无法打开的问题。比如你存在某云盘的资料突然无法下载，或者你想浏览的网页因为某些政策原因无法打开。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">而IPFS的目的就是解决这些问题。在某些方面，IPFS类似Web，你一样可以基于IPFS进行互联网地址的链接。但IPFS是去中心化的，它不存在Web的主网故障问题。所以，<strong>IPFS完全取代掉HTTP也并非天方夜谭</strong>。</p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">1.1 IPFS与HTTP的区别</h3>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">HTTP的四大痛点</h4>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/IPFS%20is%20the%20Distributed%20Web.png" alt="" style="border:0px;"></p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">HTTP效率低下，服务器成本昂贵</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">使用HTTP协议从一台计算机服务器上一次只能下载一个文件，而不是同时从多台计算机中获取文件。通过P2P方式的视频传输可以节省带宽成本的60％。</p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">历史文件被删除</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">网页的平均使用寿命为100天，大量的网站文件不能得以长期保存。有些重要的文件因操作不当，也有可能永远在互联网消失。</p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">中心化的网络限制了机会</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">互联网一直是人类进步的催化器，但中心化的网络容易被控制，是对互联网良性发展的的威胁。</p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">网络应用太依赖骨干网</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">为保证数据的可靠性，我们开发的应用程序太依赖大型的中心服务器，并通过大量的备份来保证数据的安全。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">HTTP协议已经用了20年的历史，从HTTP 1.0 到现在的HTTP5，网页的展示越来越美观丰富，<strong>但它背后的Browser/Server 模式是从来没变的</strong>。</p>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">IPFS区别于HTTP痛点的特质</h4>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">互联网信息永久存储</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">IPFS像是一个分布式存储网络（类似于SIA），任何存储在系统里的资源，包括文字、图片、声音、视频，以及网站代码，通过IPFS进行哈希运算后，都会生成唯一的地址。今后，你只要通过这个地址就可以打开它们。并且这个地址是可以被分享的。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">而由于加密算法的保护，该地址具备了不可篡改和删除的特性（在某种意义上，如果破解密码还是有可能被篡改或删除，但概率极低）。所以，一旦数据存储在IPFS中，它就会是永久性的。比如我们经常会遇到的某个资源删除无法访问的问题。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">这种情况，在IPFS上就不会发生。即便是把该站点撤销，只要存储该站点信息的网络依然存在，该网页就可以被正常访问。存储站点的分布式网络越多，它的可靠性也就越强。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">与SIA不同的是，IPFS存储的一般是公共信息，普通大众都可以获得的。有一种说法认为，<strong>如果IPFS完全取代HTTP，那么此后，人类历史将会被永久保存，且不会被篡改</strong>。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">这也就意味着，人类所做的每一件事情都会被记录，不管是正确的、抑或是错误的。</p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">解决过度冗余问题，实现共享经济</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">如果你喜欢某部电影，又担心电影资源丢失，通常的做法是，你会把这部电影下载在自己的电脑上。比如电影《阿凡达》，在2016年一年的下载次数就达到了1658万次，总下载数量更是惊人。那么一个无法避免的问题是：同样的一部电影被反复储存，造成了内存资源极大浪费。这就是HTTP协议的弊端。同样的资源备份的次数过多，就会造成过度冗余的问题。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">而IPFS的出现可以很好的解决这个问题。IPFS会把存储文件，做一次哈希计算，只字不差的两个文件哈希值相同。所以，用户只需要使用相同的哈希值，就可以访问那个文件，这个哈希值就是文件的地址。只要获取这个地址，就可以共享资源了。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">基于上面的永久存储特性，你再也不用担心某个电影找不到了，也不用备份，<strong>因为全球电脑上只要有那么几个人存储着，你就能拿到它。而不是重复存储几十万份</strong>。</p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">同时基于内容寻址，而非基于域名寻址。</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">IPFS的网络上运行着一条区块链，即用来存储互联网文件的哈希值表，每次有网络访问，即要在链上查询该内容（文件）的地址。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">文件（内容）具有存在的唯一性，一个文件加入了IPFS的网络，将基于计算对内容赋予一个唯一加密的哈希值。这将改变我们使用域名访问网络的习惯。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">提供文件的历史版本控制器（类似Git），并且让多节点使用保存不同版本的文件。</p>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">节点存储激励，代币分成</p>
  </blockquote>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">通过使用代币（FileCoin）的激励作用，让各节点有动力去存储数据。 Filecoin 是一个由加密货币驱动的存储网络<strong>。矿工通过为网络提供开放的硬盘空间获得Filecoin，而用户则用 Filecoin 来支付在去中心化网络中储存加密文件的费用</strong>。</p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">1.2 IPFS工作原理</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfswork.jpg" alt="" style="border:0px;"></p>
  <ul style="color:rgb(130,130,130);border:1px solid rgb(221,221,221);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">
   <li style="border-top:none;">每个文件及其中的所有块都被赋予一个称为加密散列的唯一指纹。<p style="color:rgb(86,86,86);line-height:30px;"></p></li>
   <li style="border-top:1px solid rgb(221,221,221);"><p style="color:rgb(86,86,86);line-height:30px;">IPFS通过网络删除重复具有相同哈希值的文件，通过计算是可以判断哪些文件是冗余重复的。并跟踪每个文件的版本历史记录。</p></li>
   <li style="border-top:1px solid rgb(221,221,221);"><p style="color:rgb(86,86,86);line-height:30px;">每个网络节点只存储它感兴趣的内容，以及一些索引信息，有助于弄清楚谁在存储什么。</p></li>
   <li style="border-top:1px solid rgb(221,221,221);"><p style="color:rgb(86,86,86);line-height:30px;">查找文件时，你通过文件的哈希值就可以在网络查找到储存改文件的节点，找到想要的文件。</p></li>
   <li style="border-top:1px solid rgb(221,221,221);"><p style="color:rgb(86,86,86);line-height:30px;">使用称为IPNS（去中心化命名系统），每个文件都可以被协作命名为易读的名字。通过搜索，就能很容易地找到想要查看的文件。</p></li>
   <li style="border-top:1px solid rgb(221,221,221);"><p style="color:rgb(86,86,86);line-height:30px;">从IPFS的介绍可以看出， IPFS设想的是让所有的网络终端节点不仅仅只充当 Browser或Client的角色，其实人人都可以作为这个网络的运营者，人人都可以是服务器。</p></li>
  </ul>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">1.3 IPFS应用场景</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-app.jpeg" alt="" style="border:0px;"></p>
  <h2 style="clear:both;color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">二、IPFS 配置</h2>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">2.1 IPFS 下载</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">下载地址：https://dist.ipfs.io/#go-ipfs</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">本篇博客下载并使用的版本是：<strong>go-ipfs Version v0.4.13 for OS X 64bit</strong></p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">2.2 IPFS 安装</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs_install1.png" alt="" style="border:0px;"></p>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs --help  //打开命令行，输入，出现Log信息时，表示安装成功
</code></pre>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">2.3 IPFS本地部署</h3>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">2.3.1 创建节点</h4>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">在本地全局目录下新建仓库：</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs_init.png" alt="" style="border:0px;"></p>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">2.3.2 节点配置</h4>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">cd ~/.ipfs
export EDITOR=/usr/bin/vim
ipfs config edit
</code></pre>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">执行完<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs config edit</code>后会打开一个ipfs节点配置文件，可以如下修改配置参数</p>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-json hljs" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(82,82,82);color:rgb(255,255,255);">{
<span class="hljs-attr">"Identity"</span>:{
<span class="hljs-attr">"PeerID"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"QmXXXXXXXXXXXXXXX"</span>,
<span class="hljs-attr">"PrivKey"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"XXXXXXXXXXXX"</span>
},
<span class="hljs-attr">"Datastore"</span>:{
<span class="hljs-attr">"StorageMax"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"10GB"</span>,
<span class="hljs-attr">"StorageGCWatermark"</span>:<span class="hljs-number" style="color:rgb(222,147,95);">90</span>,
<span class="hljs-attr">"GCPeriod"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"1h"</span>,
<span class="hljs-attr">"Spec"</span>:{
<span class="hljs-attr">"mounts"</span>:[
{
<span class="hljs-attr">"child"</span>:{
<span class="hljs-attr">"path"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"blocks"</span>,
<span class="hljs-attr">"shardFunc"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"/repo/flatfs/shard/v1/next-to-last/2"</span>,
<span class="hljs-attr">"sync"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">true</span>,
<span class="hljs-attr">"type"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"flatfs"</span>
},
<span class="hljs-attr">"mountpoint"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"/blocks"</span>,
<span class="hljs-attr">"prefix"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"flatfs.datastore"</span>,
<span class="hljs-attr">"type"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"measure"</span>
},
{
<span class="hljs-attr">"child"</span>:{
<span class="hljs-attr">"compression"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"none"</span>,
<span class="hljs-attr">"path"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"datastore"</span>,
<span class="hljs-attr">"type"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"levelds"</span>
},
<span class="hljs-attr">"mountpoint"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"/"</span>,
<span class="hljs-attr">"prefix"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"leveldb.datastore"</span>,
<span class="hljs-attr">"type"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"measure"</span>
}
],
<span class="hljs-attr">"type"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"mount"</span>
},
<span class="hljs-attr">"HashOnRead"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"BloomFilterSize"</span>:<span class="hljs-number" style="color:rgb(222,147,95);">0</span>
},
<span class="hljs-attr">"Addresses"</span>:{
<span class="hljs-attr">"Swarm"</span>:[
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/0.0.0.0/tcp/4001"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip6/::/tcp/4001"</span>
],
<span class="hljs-attr">"Announce"</span>:[
],
<span class="hljs-attr">"NoAnnounce"</span>:[
],
<span class="hljs-attr">"API"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/127.0.0.1/tcp/5001"</span>,
<span class="hljs-attr">"Gateway"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/127.0.0.1/tcp/8080"</span>
},
<span class="hljs-attr">"Mounts"</span>:{
<span class="hljs-attr">"IPFS"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"/ipfs"</span>,
<span class="hljs-attr">"IPNS"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"/ipns"</span>,
<span class="hljs-attr">"FuseAllowOther"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>
},
<span class="hljs-attr">"Discovery"</span>:{
<span class="hljs-attr">"MDNS"</span>:{
<span class="hljs-attr">"Enabled"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">true</span>,
<span class="hljs-attr">"Interval"</span>:<span class="hljs-number" style="color:rgb(222,147,95);">10</span>
}
},
<span class="hljs-attr">"Ipns"</span>:{
<span class="hljs-attr">"RepublishPeriod"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">""</span>,
<span class="hljs-attr">"RecordLifetime"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">""</span>,
<span class="hljs-attr">"ResolveCacheSize"</span>:<span class="hljs-number" style="color:rgb(222,147,95);">128</span>
},
<span class="hljs-attr">"Bootstrap"</span>:[
<span class="hljs-string" style="color:rgb(181,189,104);">"/dnsaddr/bootstrap.libp2p.io/ipfs/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/dnsaddr/bootstrap.libp2p.io/ipfs/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/dnsaddr/bootstrap.libp2p.io/ipfs/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/dnsaddr/bootstrap.libp2p.io/ipfs/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip6/2604:a880:1:20::203:d001/tcp/4001/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip6/2400:6180:0:d0::151:6001/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip6/2604:a880:800:10::4a:5001/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"/ip6/2a03:b0c0:0:1010::23:1001/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd"</span>
],
<span class="hljs-attr">"Gateway"</span>:{
<span class="hljs-attr">"HTTPHeaders"</span>:{
<span class="hljs-attr">"Access-Control-Allow-Headers"</span>:[
<span class="hljs-string" style="color:rgb(181,189,104);">"X-Requested-With"</span>,
<span class="hljs-string" style="color:rgb(181,189,104);">"Range"</span>
],
<span class="hljs-attr">"Access-Control-Allow-Methods"</span>:[
<span class="hljs-string" style="color:rgb(181,189,104);">"GET"</span>
],
<span class="hljs-attr">"Access-Control-Allow-Origin"</span>:[
<span class="hljs-string" style="color:rgb(181,189,104);">"*"</span>
]
},
<span class="hljs-attr">"RootRedirect"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">""</span>,
<span class="hljs-attr">"Writable"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"PathPrefixes"</span>:[
]
},
<span class="hljs-attr">"API"</span>:{
<span class="hljs-attr">"HTTPHeaders"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">null</span>
},
<span class="hljs-attr">"Swarm"</span>:{
<span class="hljs-attr">"AddrFilters"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">null</span>,
<span class="hljs-attr">"DisableBandwidthMetrics"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"DisableNatPortMap"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"DisableRelay"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"EnableRelayHop"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"ConnMgr"</span>:{
<span class="hljs-attr">"Type"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"basic"</span>,
<span class="hljs-attr">"LowWater"</span>:<span class="hljs-number" style="color:rgb(222,147,95);">600</span>,
<span class="hljs-attr">"HighWater"</span>:<span class="hljs-number" style="color:rgb(222,147,95);">900</span>,
<span class="hljs-attr">"GracePeriod"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"20s"</span>
}
},
<span class="hljs-attr">"Reprovider"</span>:{
<span class="hljs-attr">"Interval"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"12h"</span>,
<span class="hljs-attr">"Strategy"</span>:<span class="hljs-string" style="color:rgb(181,189,104);">"all"</span>
},
<span class="hljs-attr">"Experimental"</span>:{
<span class="hljs-attr">"FilestoreEnabled"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"ShardingEnabled"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>,
<span class="hljs-attr">"Libp2pStreamMounting"</span>:<span class="hljs-literal" style="color:rgb(222,147,95);">false</span>
}
}
</code></pre>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">2.3.3 节点ID</h4>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">每个节点都会存在一个唯一标识，查看节点ID方式如下：</p>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">
ipfs id 
</code></pre>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">2.3.4 启动节点服务器</h4>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs daemon
</code></pre>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-daemon-error.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">出现了5001端口被占用的情况，这边可以通过对<strong>节点配置文件的修改</strong>来解决，如下所示：</p>
  <ul style="color:rgb(130,130,130);border:1px solid rgb(221,221,221);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">
   <li style="border-top:none;">找到所有配置5001端口的地方</li>
   <li style="border-top:1px solid rgb(221,221,221);">替换成5002端口</li>
  </ul>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-config-edit.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">再次启动节点，服务成功启动如下所示：</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-run-successful.png" alt="" style="border:0px;"></p>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">2.3.5 配置CORS跨域资源共享</h4>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">为了方便后续前端的开发和数据访问，提前对跨域资源共享<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">CORS</code>进行配置，<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ctrl-c</code>&nbsp;退出<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs</code>，然后按照下面的步骤进行跨域配置：</p>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods '["PUT", "GET", "POST", "OPTIONS"]'
ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '["*"]'
</code></pre>
  <h4 style="clear:both;background:rgb(255,246,181);color:rgb(115,115,115);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;font-size:16px;">2.3.6 验证</h4>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">浏览器打开 http://localhost:5002/webui ，出现Web Console 图形化控制台</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/webui-connection.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">这里可以看到所有run在主网上的节点信息，和本地节点相关的配置数据。</p>
  <h2 style="clear:both;color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">三、IPFS 项目实践</h2>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;"><strong>利用 IPFS 构建一个去中心化、不可篡改的分布式Wiki系统</strong></p>
  </blockquote>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">3.1 新建workplace</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">考虑到方便后期开源和推广，这边我是托管在github上，<strong>大家可以选择自己熟悉的代码托管服务，也可以克隆我的工程 -&gt;&nbsp;<a href="https://github.com/daijiale/ipfs-wiki-system" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">ipfs-wiki-system</a>，在其基础上进行你的二次开发，有任何问题，欢迎提交issue给我</strong></p>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">mkdir workplace
cd workplace
git clone git@github.com:daijiale/ipfs-wiki-system.git
</code></pre>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">3.2 wiki系统搭建</h3>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">cd workplace/ipfs-wiki-system/wiki-release
ll
</code></pre>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">可以看到如下文件：</p>
  <ul style="color:rgb(130,130,130);border:1px solid rgb(221,221,221);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">
   <li style="border-top:none;"><strong>wiki-release</strong>
    <ul style="list-style:disc;border:1px solid rgb(221,221,221);">
     <li style="border-top:none;"><strong>index.html</strong>&nbsp;//markdown模板渲染</li>
     <li style="border-top:1px solid rgb(221,221,221);"><strong>navigation.md</strong>&nbsp;//导航markdown</li>
     <li style="border-top:1px solid rgb(221,221,221);"><strong>index.md</strong>&nbsp;//首页markdown</li>
    </ul></li>
  </ul>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">大家可以参考<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs-wiki</code>&nbsp;Demo，根据自己的需求，通过<a href="https://baike.baidu.com/item/markdown/3245829?fr=aladdin" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">markdown</a>自定义不同的wiki内容和目录。</p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">3.3 挂载本地节点</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/publish-to-block.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">记住文件根目录的Hash值：QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm</p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">3.4 发布到主网</h3>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs daemon
</code></pre>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">https://ipfs.io/ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm/#!index.md</p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">3.5 发布到IPNS</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">由于ipfs的hash对应着一个不可变的内容，每次更新网站之后，website的hash都会变，旧的link不能访问到新的内容。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">ipfs提供了<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipns</code>来解决更新的问题。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">ipfs允许用户使用一个私有密钥来对哈希附加一个引用，使用一个公共密钥哈希（简称pubkeyhash）表示你的网站的最新版本。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">具体操作是:</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipns.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">通过上述方式，就完成了website和一个固定的link的绑定：<br><code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78</code></p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">3.6 绑定验证</h3>
  <pre class="line-numbers prism-highlight" style="font-family:'Courier New', Verdana, 'Trebuchet MS', Helvetica, sans-serif;background:rgb(249,249,249);line-height:1.6;color:rgb(111,111,111);"><code class="language-null" style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs name resolve QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78
/ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm
</code></pre>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><strong>IPNS访问固定节点Hash：</strong></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">https://ipfs.io/ipns/QmPS5NRXPCeAUtofKbW7c58Qm4PpM8mPEVJvaooE13LF78</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">验证成功，出现如下效果：</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-wiki-demo.png" alt="" style="border:0px;"></p>
  <h3 style="clear:both;color:rgb(74,74,74);background:rgb(249,249,249);border-left:5px solid rgb(196,226,234);font-weight:normal;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">3.7 去中心化验证</h3>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">以之前发布到主网的节点为第一节点，我们本地再新建一个节点，用以模拟第二节点的身份，打开Web Console：</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-web-consolve.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">在第二节点上，我们依然可以通过<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">IPFS HASH</code>查询到第一节点主网上的&nbsp;<code style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background:rgb(82,82,82);color:rgb(255,255,255);">ipfs-wiki-system</code>目录文件数据</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">同时，我们也能看到：控制台显示记录了我们发布至主网数据的区块节点数已经扩散至275个。</p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-peer-id.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);">也就是说，来自另外全球其他274地方的个体，在自己的''记账本''中记下了你之前发布的数据，<strong>哪怕其中个别服务器宕机（天灾人祸，挖断电缆，世界末日等等），只要有一个节点安好，你的数据都不会丢失</strong>，真正意义实现了<strong>去中心化的服务机制</strong>。</p>
  <h2 style="clear:both;color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">四、项目体验</h2>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><img src="http://daijiale-cn.oss-cn-hangzhou.aliyuncs.com/djl-blog-pic/ipfs/ipfs-wiki-demo.png" alt="" style="border:0px;"></p>
  <p style="font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;color:rgb(86,86,86);line-height:30px;background-color:rgb(255,255,255);"><a href="https://ipfs.io/ipfs/QmV5ZVQxXURKPDcVDW8WjpLCiQYvNzg173XcB6rYFevoXm/#!index.md" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">-&gt; 传送门</a></p>
  <h2 style="clear:both;color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">参考文献</h2>
  <blockquote style="background:rgb(249,249,249);color:rgb(64,64,64);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;">
   <p style="color:rgb(86,86,86);line-height:30px;">本文部分内容参考如下文献，特别鸣谢</p>
  </blockquote>
  <ul style="color:rgb(130,130,130);border:1px solid rgb(221,221,221);font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);">
   <li style="border-top:none;"><a href="http://liyuechun.org/2017/09/18/ipfs-blockchain/" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">如何使用星际文件传输网络（IPFS）搭建区块链服务-黎跃春</a></li>
   <li style="border-top:1px solid rgb(221,221,221);"><a href="https://www.youtube.com/watch?v=iUVLuXjPAfg" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">Youtube实验室</a></li>
   <li style="border-top:1px solid rgb(221,221,221);"><a href="https://protocol.ai/" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">protocol协议实验室</a></li>
   <li style="border-top:1px solid rgb(221,221,221);"><a href="https://filecoin.io/" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">Filecoin早期旷工计划</a></li>
   <li style="border-top:1px solid rgb(221,221,221);"><a href="https://ipfs.io/docs/" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">IPFS开发英文官方文档</a></li>
   <li style="border-top:1px solid rgb(221,221,221);"><a href="http://www.jianshu.com/p/ddccae89a49a" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">IPFS——它能取代HTTP协议？</a></li>
   <li style="border-top:1px solid rgb(221,221,221);"><a href="http://mp.weixin.qq.com/s/0nHPzty51knpYOZZaBIA8g" rel="nofollow" style="background-color:transparent;color:rgb(230,116,116);">IPFS—http的终极杀手</a></li>
  </ul>
  <p style="color:rgb(86,86,86);line-height:30px;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;background-color:rgb(255,255,255);"><span style="font-size:14px;font-weight:700;">End&nbsp;</span><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="font-size:14px;font-weight:700;border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="font-size:14px;font-weight:700;border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"><img alt="虚线简洁分割线" title="虚线简洁分割线" src="http://bpic.588ku.com/element_origin_min_pic/20/16/03/0456d91a6887fdd.jpg" style="font-size:14px;font-weight:700;border:0px;line-height:inherit;font-family:'Microsoft yahei', arial, 'PingFangSC-Regular', sans-serif;vertical-align:baseline;color:rgb(0,0,0);text-align:center;"></p>
  <p style="color:rgb(86,86,86);line-height:30px;font-family:miranafont, 'Hiragino Sans GB', STXihei, 'Microsoft YaHei', SimSun, sans-serif;"></p>
  <p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">圆方圆学院汇集大批区块链名师，打造精品的区块链技术课程。&nbsp;<br>许晓笛老师的CSDN学院视频专栏&nbsp;<a href="https://edu.csdn.net/lecturer/2008" rel="nofollow" style="color:rgb(12,137,207);">https://edu.csdn.net/lecturer/2008</a>&nbsp;<br>郭金宏老师的csdn学院视频专栏：<a href="https://edu.csdn.net/lecturer/2214" rel="nofollow" style="color:rgb(12,137,207);">https://edu.csdn.net/lecturer/2214</a></p>
  <br>
  <br> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/yuanfangyuan_block/article/details/80416757,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/yuanfangyuan_block/article/details/80416757,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
