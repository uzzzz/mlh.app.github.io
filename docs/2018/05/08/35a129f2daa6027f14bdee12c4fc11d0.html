<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>fabric ca 使用案例 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="fabric ca 使用案例" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="fabric-ca 有两个子项目：一个是fabric-ca-client,另一个是fabric-ca-server 启动一个fabric-ca-server fabric-ca-server start -b admin:admin //会在当前目录生成证书相关的信息 [root@fabric-cli server01]# ls -l 总用量 60 -rw-r--r-- 1 root root 786 5月 8 15:52 ca-cert.pem -rw-r--r-- 1 root root 15875 5月 8 15:52 fabric-ca-server-config.yaml -rw-r--r-- 1 root root 40960 5月 8 16:21 fabric-ca-server.db drwxr-xr-x 3 root root 22 5月 8 15:52 msp enroll 启动用户，要不数据库里面没有相关的证书 enroll之前 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|0|-1|1 sqlite&gt; select * from certificates; enroll之后 [root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin:admin@localhost:7054 2018/05/08 16:02:34 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:02:34 [INFO] encoded CSR 2018/05/08 16:02:34 [INFO] Stored client certificate at /root/.fabric-ca-client/msp/signcerts/cert.pem 2018/05/08 16:02:34 [INFO] Stored root CA certificate at /root/.fabric-ca-client/msp/cacerts/localhost-7054.pem 2018/05/08 16:02:34 [INFO] Stored intermediate CA certificates at /root/.fabric-ca-client/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin:admin@localhost:7054 --home $PWD/admin 2018/05/08 16:02:59 [INFO] Created a default configuration file at /root/client-01/admin/fabric-ca-client-config.yaml 2018/05/08 16:02:59 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:02:59 [INFO] encoded CSR 2018/05/08 16:02:59 [INFO] Stored client certificate at /root/client-01/admin/msp/signcerts/cert.pem 2018/05/08 16:02:59 [INFO] Stored root CA certificate at /root/client-01/admin/msp/cacerts/localhost-7054.pem 2018/05/08 16:02:59 [INFO] Stored intermediate CA certificates at /root/client-01/admin/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# [root@fabric-cli client-01]# ls -l 总用量 0 drwxr-xr-x 3 root root 53 5月 8 16:02 admin [root@fabric-cli client-01]# ls -l admin/ 总用量 8 -rwxr-xr-x 1 root root 6506 5月 8 16:02 fabric-ca-client-config.yaml drwx------ 6 root root 79 5月 8 16:02 msp sqlite&gt; select * from certificates; admin|5c4c01ecd318537960c93365e99a92dec19f05b9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:03:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICPjCCAeSgAwIBAgIUXEwB7NMYU3lgyTNl6ZqS3sGfBbkwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA3NTgwMFoXDTE5MDUwODA4MDMwMFowXTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEPMA0GA1UECxMGY2xpZW50MQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqG SM49AgEGCCqGSM49AwEHA0IABKhxvv2Tu8qaz6VaeLxxFhs33FfUnsBRdxmMAgaN bt0ul9KpqlHLhplvsgEvzX32pvbOBPXt79UUllISqoxsCtijdzB1MA4GA1UdDwEB /wQEAwIHgDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRkVq8Fj3elmE2jEUngx771 /WwMEzAfBgNVHSMEGDAWgBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAM ggpmYWJyaWMtY2xpMAoGCCqGSM49BAMCA0gAMEUCIQCHll5J+kUcmvix1pzVKIMG A8rgDHwAG0/dgbidnsRtBwIgcwzPuqBuTAC95+D/FrGsfXWYTetRG1yPlXJH7HAe +es= -----END CERTIFICATE----- |1 用admin注册一个用户admin2 [root@fabric-cli client-01]# fabric-ca-client register --id.name admin2 --id.type user --id.affiliation org1.department1 --id.attrs &#39;hf.Revoker=true,foo=bar&#39; -H $PWD/admin 2018/05/08 16:06:05 [INFO] Configuration file location: /root/client-01/admin/fabric-ca-client-config.yaml Password: HUynsYXMGlkP 注册完成之后在用户表中会有相应的用户信息，但是还没有相关的证书 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|2|-1|1 admin2|$2a$10$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC|user|org1.department1|[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;foo&quot;,&quot;value&quot;:&quot;bar&quot;},{&quot;name&quot;:&quot;hf.EnrollmentID&quot;,&quot;value&quot;:&quot;admin2&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Type&quot;,&quot;value&quot;:&quot;user&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Affiliation&quot;,&quot;value&quot;:&quot;org1.department1&quot;,&quot;ecert&quot;:true}]|0|-1|1 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|2|-1|1 admin2|$2a$10$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC|user|org1.department1|[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;foo&quot;,&quot;value&quot;:&quot;bar&quot;},{&quot;name&quot;:&quot;hf.EnrollmentID&quot;,&quot;value&quot;:&quot;admin2&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Type&quot;,&quot;value&quot;:&quot;user&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Affiliation&quot;,&quot;value&quot;:&quot;org1.department1&quot;,&quot;ecert&quot;:true}]|1|-1|1 enroll admin2之后才有，用之前返回的密码enroll admin2 root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin2:HUynsYXMGlkP@localhost:7054 -H $PWD/admin2 2018/05/08 16:08:13 [INFO] Created a default configuration file at /root/client-01/admin2/fabric-ca-client-config.yaml 2018/05/08 16:08:13 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:08:13 [INFO] encoded CSR 2018/05/08 16:08:13 [INFO] Stored client certificate at /root/client-01/admin2/msp/signcerts/cert.pem 2018/05/08 16:08:13 [INFO] Stored root CA certificate at /root/client-01/admin2/msp/cacerts/localhost-7054.pem 2018/05/08 16:08:13 [INFO] Stored intermediate CA certificates at /root/client-01/admin2/msp/intermediatecerts/localhost-7054.pem enroll成功之后，证书表会有相关的证书 admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:08:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICyDCCAm+gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28= -----END CERTIFICATE----- |1 注册节点 [root@fabric-cli client-01]# fabric-ca-client register --id.name peer1 --id.type peer --id.affiliation org1.department1 --id.secret peer1pw -H $PWD/admin 2018/05/08 16:09:46 [INFO] Configuration file location: /root/client-01/admin/fabric-ca-client-config.yaml Password: peer1pw 登记节点 [root@fabric-cli client-01]# fabric-ca-client enroll -u http://peer1:peer1pw@localhost:7054 -H $PWD/peer01 2018/05/08 16:11:44 [INFO] Created a default configuration file at /root/client-01/peer01/fabric-ca-client-config.yaml 2018/05/08 16:11:44 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:11:44 [INFO] encoded CSR 2018/05/08 16:11:44 [INFO] Stored client certificate at /root/client-01/peer01/msp/signcerts/cert.pem 2018/05/08 16:11:44 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7054.pem 2018/05/08 16:11:44 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# ls -l 总用量 0 drwxr-xr-x 3 root root 53 5月 8 16:02 admin drwxr-xr-x 3 root root 53 5月 8 16:08 admin2 drwxr-xr-x 3 root root 53 5月 8 16:11 peer01 [root@fabric-cli client-01]# [root@fabric-cli client-01]# ls -l peer01/ 总用量 8 -rwxr-xr-x 1 root root 6506 5月 8 16:11 fabric-ca-client-config.yaml drwx------ 6 root root 79 5月 8 16:11 msp 启动另一个fabric-ca-server服务 root@fabric-cli server03]# fabric-ca-server start -b admin:ca2pw -p 7055 -H /root/server01 -n ca2 2018/05/08 16:17:26 [INFO] Configuration file location: /root/server01/fabric-ca-server-config.yaml 2018/05/08 16:17:26 [INFO] Starting server in home directory: /root/server01 2018/05/08 16:17:26 [INFO] Server Version: 1.1.0 2018/05/08 16:17:26 [INFO] Server Levels: &amp;{Identity:1 Affiliation:1 Certificate:1} 2018/05/08 16:17:26 [INFO] The CA key and certificate already exist 2018/05/08 16:17:26 [INFO] The key is stored by BCCSP provider &#39;SW&#39; 2018/05/08 16:17:26 [INFO] The certificate is at: /root/server01/ca-cert.pem 2018/05/08 16:17:26 [INFO] Initialized sqlite3 database at /root/server01/fabric-ca-server.db 2018/05/08 16:17:26 [INFO] Home directory for default CA: /root/server01 2018/05/08 16:17:26 [INFO] Listening on http://0.0.0.0:7055 2018/05/08 16:19:09 [INFO] [::1]:44680 POST /cainfo 200 0 &quot;OK&quot; 把证书复制到peer01 root@fabric-cli client-01]# fabric-ca-client getcacert -u http://localhost:7055 -M $PWD/peer01/msp 2018/05/08 16:19:09 [INFO] Configuration file location: /root/.fabric-ca-client/fabric-ca-client-config.yaml 2018/05/08 16:19:09 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7055.pem 2018/05/08 16:19:09 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7055.pem [root@fabric-cli peer01]# tree . ├── fabric-ca-client-config.yaml └── msp ├── cacerts │ ├── localhost-7054.pem │ └── localhost-7055.pem ├── intermediatecerts │ ├── localhost-7054.pem │ └── localhost-7055.pem ├── keystore │ ├── 8c9aeba7773cbc8f66fb973f531c8a297297ecb17ab85597e75967432e5f8df0_sk │ └── c7a9d0000a72df0ab52cca03a83d19324e33e54ecebea6105f83ca64f7d2b7ae_sk └── signcerts └── cert.pem 5 directories, 8 files 重新登记peer01 [root@fabric-cli peer01]# fabric-ca-client reenroll --home $PWD 2018/05/08 16:20:31 [INFO] Configuration file location: /root/client-01/peer01/fabric-ca-client-config.yaml 2018/05/08 16:20:31 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:20:31 [INFO] encoded CSR 2018/05/08 16:20:31 [INFO] Stored client certificate at /root/client-01/peer01/msp/signcerts/cert.pem 2018/05/08 16:20:31 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7054.pem 2018/05/08 16:20:31 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7054.pem 数据库显示 peer1|3a5f382f399d14459b86ebaa182b29d4cfe8289|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:12:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICxjCCAm2gAwIBAgIUA6XzgvOZ0URZuG66oYKynUz+gokwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDcwMFoXDTE5MDUwODA4MTIwMFowfDELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC AASVj5Sh7a9VyKlGy5nRgvw3osyvkZwDfyAzOWSnRBia/uLF2PmHCMo0gNRg2YmP r652gXCpJJT2gbZXb/y2qPHqo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB Af8EAjAAMB0GA1UdDgQWBBSkptne3n917RG1GSBHTGPS4l1nczAfBgNVHSMEGDAW gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgQ0DdX5tCZVDU/4XN1rPm7qIU+VXaq4E9 di8U93EG488CIHggdMulPLTIjkylfcCSe0sBCcHbUV+Ao7FdqI5CPWd+ -----END CERTIFICATE----- |1 peer1|5a4a45f968106f5455328d0da3085587023804a9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:21:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICxjCCAm2gAwIBAgIUWkpF+WgQb1RVMo0NowhVhwI4BKkwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MTYwMFoXDTE5MDUwODA4MjEwMFowfDELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC AAS/T1I1sgdatxUfGdgpPdCld0GbgsjkrsZpCwb1WBfshPcI7VET8UYdmyhlV7xh 5Y1nv7Nyta3CQFKnpNlpk8Szo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB Af8EAjAAMB0GA1UdDgQWBBQ6z4Uyl78cWEgIqHPywYLxDYDeETAfBgNVHSMEGDAW gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgI1zzjAKQfzf8acKTPk2PtGeVJjB8yQUR uaNjecEcbiECIFErHS8Q7Qxw1WXghXSSgxo8Q6DtGuSrO6ijOxti0ou2 -----END CERTIFICATE----- |1 吊销admin2的证书 [root@fabric-cli admin2]# fabric-ca-client revoke -e admin2 -r unspecified -H $PWD 2018/05/08 16:21:27 [INFO] Configuration file location: /root/client-01/admin2/fabric-ca-client-config.yaml 2018/05/08 16:21:27 [INFO] Sucessfully revoked certificates: [{Serial:392ee9ba3325e80e194a013571d910b1d837fe5a AKI:f1f042212126df52a9473983a4cdf18b69d719e8}] 数据库显示 admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||revoked|0|2019-05-08 08:08:00+00:00|2018-05-08 08:21:27|-----BEGIN CERTIFICATE----- MIICyDCCAm+gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28= -----END CERTIFICATE----- |1 参考： Fabric CA 用户指南 fabric-ca 阅读更多" />
<meta property="og:description" content="fabric-ca 有两个子项目：一个是fabric-ca-client,另一个是fabric-ca-server 启动一个fabric-ca-server fabric-ca-server start -b admin:admin //会在当前目录生成证书相关的信息 [root@fabric-cli server01]# ls -l 总用量 60 -rw-r--r-- 1 root root 786 5月 8 15:52 ca-cert.pem -rw-r--r-- 1 root root 15875 5月 8 15:52 fabric-ca-server-config.yaml -rw-r--r-- 1 root root 40960 5月 8 16:21 fabric-ca-server.db drwxr-xr-x 3 root root 22 5月 8 15:52 msp enroll 启动用户，要不数据库里面没有相关的证书 enroll之前 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|0|-1|1 sqlite&gt; select * from certificates; enroll之后 [root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin:admin@localhost:7054 2018/05/08 16:02:34 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:02:34 [INFO] encoded CSR 2018/05/08 16:02:34 [INFO] Stored client certificate at /root/.fabric-ca-client/msp/signcerts/cert.pem 2018/05/08 16:02:34 [INFO] Stored root CA certificate at /root/.fabric-ca-client/msp/cacerts/localhost-7054.pem 2018/05/08 16:02:34 [INFO] Stored intermediate CA certificates at /root/.fabric-ca-client/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin:admin@localhost:7054 --home $PWD/admin 2018/05/08 16:02:59 [INFO] Created a default configuration file at /root/client-01/admin/fabric-ca-client-config.yaml 2018/05/08 16:02:59 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:02:59 [INFO] encoded CSR 2018/05/08 16:02:59 [INFO] Stored client certificate at /root/client-01/admin/msp/signcerts/cert.pem 2018/05/08 16:02:59 [INFO] Stored root CA certificate at /root/client-01/admin/msp/cacerts/localhost-7054.pem 2018/05/08 16:02:59 [INFO] Stored intermediate CA certificates at /root/client-01/admin/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# [root@fabric-cli client-01]# ls -l 总用量 0 drwxr-xr-x 3 root root 53 5月 8 16:02 admin [root@fabric-cli client-01]# ls -l admin/ 总用量 8 -rwxr-xr-x 1 root root 6506 5月 8 16:02 fabric-ca-client-config.yaml drwx------ 6 root root 79 5月 8 16:02 msp sqlite&gt; select * from certificates; admin|5c4c01ecd318537960c93365e99a92dec19f05b9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:03:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICPjCCAeSgAwIBAgIUXEwB7NMYU3lgyTNl6ZqS3sGfBbkwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA3NTgwMFoXDTE5MDUwODA4MDMwMFowXTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEPMA0GA1UECxMGY2xpZW50MQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqG SM49AgEGCCqGSM49AwEHA0IABKhxvv2Tu8qaz6VaeLxxFhs33FfUnsBRdxmMAgaN bt0ul9KpqlHLhplvsgEvzX32pvbOBPXt79UUllISqoxsCtijdzB1MA4GA1UdDwEB /wQEAwIHgDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRkVq8Fj3elmE2jEUngx771 /WwMEzAfBgNVHSMEGDAWgBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAM ggpmYWJyaWMtY2xpMAoGCCqGSM49BAMCA0gAMEUCIQCHll5J+kUcmvix1pzVKIMG A8rgDHwAG0/dgbidnsRtBwIgcwzPuqBuTAC95+D/FrGsfXWYTetRG1yPlXJH7HAe +es= -----END CERTIFICATE----- |1 用admin注册一个用户admin2 [root@fabric-cli client-01]# fabric-ca-client register --id.name admin2 --id.type user --id.affiliation org1.department1 --id.attrs &#39;hf.Revoker=true,foo=bar&#39; -H $PWD/admin 2018/05/08 16:06:05 [INFO] Configuration file location: /root/client-01/admin/fabric-ca-client-config.yaml Password: HUynsYXMGlkP 注册完成之后在用户表中会有相应的用户信息，但是还没有相关的证书 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|2|-1|1 admin2|$2a$10$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC|user|org1.department1|[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;foo&quot;,&quot;value&quot;:&quot;bar&quot;},{&quot;name&quot;:&quot;hf.EnrollmentID&quot;,&quot;value&quot;:&quot;admin2&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Type&quot;,&quot;value&quot;:&quot;user&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Affiliation&quot;,&quot;value&quot;:&quot;org1.department1&quot;,&quot;ecert&quot;:true}]|0|-1|1 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|2|-1|1 admin2|$2a$10$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC|user|org1.department1|[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;foo&quot;,&quot;value&quot;:&quot;bar&quot;},{&quot;name&quot;:&quot;hf.EnrollmentID&quot;,&quot;value&quot;:&quot;admin2&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Type&quot;,&quot;value&quot;:&quot;user&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Affiliation&quot;,&quot;value&quot;:&quot;org1.department1&quot;,&quot;ecert&quot;:true}]|1|-1|1 enroll admin2之后才有，用之前返回的密码enroll admin2 root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin2:HUynsYXMGlkP@localhost:7054 -H $PWD/admin2 2018/05/08 16:08:13 [INFO] Created a default configuration file at /root/client-01/admin2/fabric-ca-client-config.yaml 2018/05/08 16:08:13 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:08:13 [INFO] encoded CSR 2018/05/08 16:08:13 [INFO] Stored client certificate at /root/client-01/admin2/msp/signcerts/cert.pem 2018/05/08 16:08:13 [INFO] Stored root CA certificate at /root/client-01/admin2/msp/cacerts/localhost-7054.pem 2018/05/08 16:08:13 [INFO] Stored intermediate CA certificates at /root/client-01/admin2/msp/intermediatecerts/localhost-7054.pem enroll成功之后，证书表会有相关的证书 admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:08:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICyDCCAm+gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28= -----END CERTIFICATE----- |1 注册节点 [root@fabric-cli client-01]# fabric-ca-client register --id.name peer1 --id.type peer --id.affiliation org1.department1 --id.secret peer1pw -H $PWD/admin 2018/05/08 16:09:46 [INFO] Configuration file location: /root/client-01/admin/fabric-ca-client-config.yaml Password: peer1pw 登记节点 [root@fabric-cli client-01]# fabric-ca-client enroll -u http://peer1:peer1pw@localhost:7054 -H $PWD/peer01 2018/05/08 16:11:44 [INFO] Created a default configuration file at /root/client-01/peer01/fabric-ca-client-config.yaml 2018/05/08 16:11:44 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:11:44 [INFO] encoded CSR 2018/05/08 16:11:44 [INFO] Stored client certificate at /root/client-01/peer01/msp/signcerts/cert.pem 2018/05/08 16:11:44 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7054.pem 2018/05/08 16:11:44 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# ls -l 总用量 0 drwxr-xr-x 3 root root 53 5月 8 16:02 admin drwxr-xr-x 3 root root 53 5月 8 16:08 admin2 drwxr-xr-x 3 root root 53 5月 8 16:11 peer01 [root@fabric-cli client-01]# [root@fabric-cli client-01]# ls -l peer01/ 总用量 8 -rwxr-xr-x 1 root root 6506 5月 8 16:11 fabric-ca-client-config.yaml drwx------ 6 root root 79 5月 8 16:11 msp 启动另一个fabric-ca-server服务 root@fabric-cli server03]# fabric-ca-server start -b admin:ca2pw -p 7055 -H /root/server01 -n ca2 2018/05/08 16:17:26 [INFO] Configuration file location: /root/server01/fabric-ca-server-config.yaml 2018/05/08 16:17:26 [INFO] Starting server in home directory: /root/server01 2018/05/08 16:17:26 [INFO] Server Version: 1.1.0 2018/05/08 16:17:26 [INFO] Server Levels: &amp;{Identity:1 Affiliation:1 Certificate:1} 2018/05/08 16:17:26 [INFO] The CA key and certificate already exist 2018/05/08 16:17:26 [INFO] The key is stored by BCCSP provider &#39;SW&#39; 2018/05/08 16:17:26 [INFO] The certificate is at: /root/server01/ca-cert.pem 2018/05/08 16:17:26 [INFO] Initialized sqlite3 database at /root/server01/fabric-ca-server.db 2018/05/08 16:17:26 [INFO] Home directory for default CA: /root/server01 2018/05/08 16:17:26 [INFO] Listening on http://0.0.0.0:7055 2018/05/08 16:19:09 [INFO] [::1]:44680 POST /cainfo 200 0 &quot;OK&quot; 把证书复制到peer01 root@fabric-cli client-01]# fabric-ca-client getcacert -u http://localhost:7055 -M $PWD/peer01/msp 2018/05/08 16:19:09 [INFO] Configuration file location: /root/.fabric-ca-client/fabric-ca-client-config.yaml 2018/05/08 16:19:09 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7055.pem 2018/05/08 16:19:09 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7055.pem [root@fabric-cli peer01]# tree . ├── fabric-ca-client-config.yaml └── msp ├── cacerts │ ├── localhost-7054.pem │ └── localhost-7055.pem ├── intermediatecerts │ ├── localhost-7054.pem │ └── localhost-7055.pem ├── keystore │ ├── 8c9aeba7773cbc8f66fb973f531c8a297297ecb17ab85597e75967432e5f8df0_sk │ └── c7a9d0000a72df0ab52cca03a83d19324e33e54ecebea6105f83ca64f7d2b7ae_sk └── signcerts └── cert.pem 5 directories, 8 files 重新登记peer01 [root@fabric-cli peer01]# fabric-ca-client reenroll --home $PWD 2018/05/08 16:20:31 [INFO] Configuration file location: /root/client-01/peer01/fabric-ca-client-config.yaml 2018/05/08 16:20:31 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:20:31 [INFO] encoded CSR 2018/05/08 16:20:31 [INFO] Stored client certificate at /root/client-01/peer01/msp/signcerts/cert.pem 2018/05/08 16:20:31 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7054.pem 2018/05/08 16:20:31 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7054.pem 数据库显示 peer1|3a5f382f399d14459b86ebaa182b29d4cfe8289|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:12:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICxjCCAm2gAwIBAgIUA6XzgvOZ0URZuG66oYKynUz+gokwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDcwMFoXDTE5MDUwODA4MTIwMFowfDELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC AASVj5Sh7a9VyKlGy5nRgvw3osyvkZwDfyAzOWSnRBia/uLF2PmHCMo0gNRg2YmP r652gXCpJJT2gbZXb/y2qPHqo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB Af8EAjAAMB0GA1UdDgQWBBSkptne3n917RG1GSBHTGPS4l1nczAfBgNVHSMEGDAW gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgQ0DdX5tCZVDU/4XN1rPm7qIU+VXaq4E9 di8U93EG488CIHggdMulPLTIjkylfcCSe0sBCcHbUV+Ao7FdqI5CPWd+ -----END CERTIFICATE----- |1 peer1|5a4a45f968106f5455328d0da3085587023804a9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:21:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICxjCCAm2gAwIBAgIUWkpF+WgQb1RVMo0NowhVhwI4BKkwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MTYwMFoXDTE5MDUwODA4MjEwMFowfDELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC AAS/T1I1sgdatxUfGdgpPdCld0GbgsjkrsZpCwb1WBfshPcI7VET8UYdmyhlV7xh 5Y1nv7Nyta3CQFKnpNlpk8Szo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB Af8EAjAAMB0GA1UdDgQWBBQ6z4Uyl78cWEgIqHPywYLxDYDeETAfBgNVHSMEGDAW gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgI1zzjAKQfzf8acKTPk2PtGeVJjB8yQUR uaNjecEcbiECIFErHS8Q7Qxw1WXghXSSgxo8Q6DtGuSrO6ijOxti0ou2 -----END CERTIFICATE----- |1 吊销admin2的证书 [root@fabric-cli admin2]# fabric-ca-client revoke -e admin2 -r unspecified -H $PWD 2018/05/08 16:21:27 [INFO] Configuration file location: /root/client-01/admin2/fabric-ca-client-config.yaml 2018/05/08 16:21:27 [INFO] Sucessfully revoked certificates: [{Serial:392ee9ba3325e80e194a013571d910b1d837fe5a AKI:f1f042212126df52a9473983a4cdf18b69d719e8}] 数据库显示 admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||revoked|0|2019-05-08 08:08:00+00:00|2018-05-08 08:21:27|-----BEGIN CERTIFICATE----- MIICyDCCAm+gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28= -----END CERTIFICATE----- |1 参考： Fabric CA 用户指南 fabric-ca 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/05/08/35a129f2daa6027f14bdee12c4fc11d0.html" />
<meta property="og:url" content="https://mlh.app/2018/05/08/35a129f2daa6027f14bdee12c4fc11d0.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-05-08T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"fabric-ca 有两个子项目：一个是fabric-ca-client,另一个是fabric-ca-server 启动一个fabric-ca-server fabric-ca-server start -b admin:admin //会在当前目录生成证书相关的信息 [root@fabric-cli server01]# ls -l 总用量 60 -rw-r--r-- 1 root root 786 5月 8 15:52 ca-cert.pem -rw-r--r-- 1 root root 15875 5月 8 15:52 fabric-ca-server-config.yaml -rw-r--r-- 1 root root 40960 5月 8 16:21 fabric-ca-server.db drwxr-xr-x 3 root root 22 5月 8 15:52 msp enroll 启动用户，要不数据库里面没有相关的证书 enroll之前 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|0|-1|1 sqlite&gt; select * from certificates; enroll之后 [root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin:admin@localhost:7054 2018/05/08 16:02:34 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:02:34 [INFO] encoded CSR 2018/05/08 16:02:34 [INFO] Stored client certificate at /root/.fabric-ca-client/msp/signcerts/cert.pem 2018/05/08 16:02:34 [INFO] Stored root CA certificate at /root/.fabric-ca-client/msp/cacerts/localhost-7054.pem 2018/05/08 16:02:34 [INFO] Stored intermediate CA certificates at /root/.fabric-ca-client/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin:admin@localhost:7054 --home $PWD/admin 2018/05/08 16:02:59 [INFO] Created a default configuration file at /root/client-01/admin/fabric-ca-client-config.yaml 2018/05/08 16:02:59 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:02:59 [INFO] encoded CSR 2018/05/08 16:02:59 [INFO] Stored client certificate at /root/client-01/admin/msp/signcerts/cert.pem 2018/05/08 16:02:59 [INFO] Stored root CA certificate at /root/client-01/admin/msp/cacerts/localhost-7054.pem 2018/05/08 16:02:59 [INFO] Stored intermediate CA certificates at /root/client-01/admin/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# [root@fabric-cli client-01]# ls -l 总用量 0 drwxr-xr-x 3 root root 53 5月 8 16:02 admin [root@fabric-cli client-01]# ls -l admin/ 总用量 8 -rwxr-xr-x 1 root root 6506 5月 8 16:02 fabric-ca-client-config.yaml drwx------ 6 root root 79 5月 8 16:02 msp sqlite&gt; select * from certificates; admin|5c4c01ecd318537960c93365e99a92dec19f05b9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:03:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICPjCCAeSgAwIBAgIUXEwB7NMYU3lgyTNl6ZqS3sGfBbkwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA3NTgwMFoXDTE5MDUwODA4MDMwMFowXTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEPMA0GA1UECxMGY2xpZW50MQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqG SM49AgEGCCqGSM49AwEHA0IABKhxvv2Tu8qaz6VaeLxxFhs33FfUnsBRdxmMAgaN bt0ul9KpqlHLhplvsgEvzX32pvbOBPXt79UUllISqoxsCtijdzB1MA4GA1UdDwEB /wQEAwIHgDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRkVq8Fj3elmE2jEUngx771 /WwMEzAfBgNVHSMEGDAWgBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAM ggpmYWJyaWMtY2xpMAoGCCqGSM49BAMCA0gAMEUCIQCHll5J+kUcmvix1pzVKIMG A8rgDHwAG0/dgbidnsRtBwIgcwzPuqBuTAC95+D/FrGsfXWYTetRG1yPlXJH7HAe +es= -----END CERTIFICATE----- |1 用admin注册一个用户admin2 [root@fabric-cli client-01]# fabric-ca-client register --id.name admin2 --id.type user --id.affiliation org1.department1 --id.attrs &#39;hf.Revoker=true,foo=bar&#39; -H $PWD/admin 2018/05/08 16:06:05 [INFO] Configuration file location: /root/client-01/admin/fabric-ca-client-config.yaml Password: HUynsYXMGlkP 注册完成之后在用户表中会有相应的用户信息，但是还没有相关的证书 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|2|-1|1 admin2|$2a$10$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC|user|org1.department1|[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;foo&quot;,&quot;value&quot;:&quot;bar&quot;},{&quot;name&quot;:&quot;hf.EnrollmentID&quot;,&quot;value&quot;:&quot;admin2&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Type&quot;,&quot;value&quot;:&quot;user&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Affiliation&quot;,&quot;value&quot;:&quot;org1.department1&quot;,&quot;ecert&quot;:true}]|0|-1|1 sqlite&gt; select * from users; admin|$2a$10$3eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/1NZEjqrHLjXEGdeJ5uUG|client||[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.IntermediateCA&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.GenCRL&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Attributes&quot;,&quot;value&quot;:&quot;*&quot;},{&quot;name&quot;:&quot;hf.AffiliationMgr&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;name&quot;:&quot;hf.Registrar.Roles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;},{&quot;name&quot;:&quot;hf.Registrar.DelegateRoles&quot;,&quot;value&quot;:&quot;peer,orderer,client,user&quot;}]|2|-1|1 admin2|$2a$10$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC|user|org1.department1|[{&quot;name&quot;:&quot;hf.Revoker&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;name&quot;:&quot;foo&quot;,&quot;value&quot;:&quot;bar&quot;},{&quot;name&quot;:&quot;hf.EnrollmentID&quot;,&quot;value&quot;:&quot;admin2&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Type&quot;,&quot;value&quot;:&quot;user&quot;,&quot;ecert&quot;:true},{&quot;name&quot;:&quot;hf.Affiliation&quot;,&quot;value&quot;:&quot;org1.department1&quot;,&quot;ecert&quot;:true}]|1|-1|1 enroll admin2之后才有，用之前返回的密码enroll admin2 root@fabric-cli client-01]# fabric-ca-client enroll -u http://admin2:HUynsYXMGlkP@localhost:7054 -H $PWD/admin2 2018/05/08 16:08:13 [INFO] Created a default configuration file at /root/client-01/admin2/fabric-ca-client-config.yaml 2018/05/08 16:08:13 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:08:13 [INFO] encoded CSR 2018/05/08 16:08:13 [INFO] Stored client certificate at /root/client-01/admin2/msp/signcerts/cert.pem 2018/05/08 16:08:13 [INFO] Stored root CA certificate at /root/client-01/admin2/msp/cacerts/localhost-7054.pem 2018/05/08 16:08:13 [INFO] Stored intermediate CA certificates at /root/client-01/admin2/msp/intermediatecerts/localhost-7054.pem enroll成功之后，证书表会有相关的证书 admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:08:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICyDCCAm+gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28= -----END CERTIFICATE----- |1 注册节点 [root@fabric-cli client-01]# fabric-ca-client register --id.name peer1 --id.type peer --id.affiliation org1.department1 --id.secret peer1pw -H $PWD/admin 2018/05/08 16:09:46 [INFO] Configuration file location: /root/client-01/admin/fabric-ca-client-config.yaml Password: peer1pw 登记节点 [root@fabric-cli client-01]# fabric-ca-client enroll -u http://peer1:peer1pw@localhost:7054 -H $PWD/peer01 2018/05/08 16:11:44 [INFO] Created a default configuration file at /root/client-01/peer01/fabric-ca-client-config.yaml 2018/05/08 16:11:44 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:11:44 [INFO] encoded CSR 2018/05/08 16:11:44 [INFO] Stored client certificate at /root/client-01/peer01/msp/signcerts/cert.pem 2018/05/08 16:11:44 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7054.pem 2018/05/08 16:11:44 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7054.pem [root@fabric-cli client-01]# ls -l 总用量 0 drwxr-xr-x 3 root root 53 5月 8 16:02 admin drwxr-xr-x 3 root root 53 5月 8 16:08 admin2 drwxr-xr-x 3 root root 53 5月 8 16:11 peer01 [root@fabric-cli client-01]# [root@fabric-cli client-01]# ls -l peer01/ 总用量 8 -rwxr-xr-x 1 root root 6506 5月 8 16:11 fabric-ca-client-config.yaml drwx------ 6 root root 79 5月 8 16:11 msp 启动另一个fabric-ca-server服务 root@fabric-cli server03]# fabric-ca-server start -b admin:ca2pw -p 7055 -H /root/server01 -n ca2 2018/05/08 16:17:26 [INFO] Configuration file location: /root/server01/fabric-ca-server-config.yaml 2018/05/08 16:17:26 [INFO] Starting server in home directory: /root/server01 2018/05/08 16:17:26 [INFO] Server Version: 1.1.0 2018/05/08 16:17:26 [INFO] Server Levels: &amp;{Identity:1 Affiliation:1 Certificate:1} 2018/05/08 16:17:26 [INFO] The CA key and certificate already exist 2018/05/08 16:17:26 [INFO] The key is stored by BCCSP provider &#39;SW&#39; 2018/05/08 16:17:26 [INFO] The certificate is at: /root/server01/ca-cert.pem 2018/05/08 16:17:26 [INFO] Initialized sqlite3 database at /root/server01/fabric-ca-server.db 2018/05/08 16:17:26 [INFO] Home directory for default CA: /root/server01 2018/05/08 16:17:26 [INFO] Listening on http://0.0.0.0:7055 2018/05/08 16:19:09 [INFO] [::1]:44680 POST /cainfo 200 0 &quot;OK&quot; 把证书复制到peer01 root@fabric-cli client-01]# fabric-ca-client getcacert -u http://localhost:7055 -M $PWD/peer01/msp 2018/05/08 16:19:09 [INFO] Configuration file location: /root/.fabric-ca-client/fabric-ca-client-config.yaml 2018/05/08 16:19:09 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7055.pem 2018/05/08 16:19:09 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7055.pem [root@fabric-cli peer01]# tree . ├── fabric-ca-client-config.yaml └── msp ├── cacerts │ ├── localhost-7054.pem │ └── localhost-7055.pem ├── intermediatecerts │ ├── localhost-7054.pem │ └── localhost-7055.pem ├── keystore │ ├── 8c9aeba7773cbc8f66fb973f531c8a297297ecb17ab85597e75967432e5f8df0_sk │ └── c7a9d0000a72df0ab52cca03a83d19324e33e54ecebea6105f83ca64f7d2b7ae_sk └── signcerts └── cert.pem 5 directories, 8 files 重新登记peer01 [root@fabric-cli peer01]# fabric-ca-client reenroll --home $PWD 2018/05/08 16:20:31 [INFO] Configuration file location: /root/client-01/peer01/fabric-ca-client-config.yaml 2018/05/08 16:20:31 [INFO] generating key: &amp;{A:ecdsa S:256} 2018/05/08 16:20:31 [INFO] encoded CSR 2018/05/08 16:20:31 [INFO] Stored client certificate at /root/client-01/peer01/msp/signcerts/cert.pem 2018/05/08 16:20:31 [INFO] Stored root CA certificate at /root/client-01/peer01/msp/cacerts/localhost-7054.pem 2018/05/08 16:20:31 [INFO] Stored intermediate CA certificates at /root/client-01/peer01/msp/intermediatecerts/localhost-7054.pem 数据库显示 peer1|3a5f382f399d14459b86ebaa182b29d4cfe8289|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:12:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICxjCCAm2gAwIBAgIUA6XzgvOZ0URZuG66oYKynUz+gokwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDcwMFoXDTE5MDUwODA4MTIwMFowfDELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC AASVj5Sh7a9VyKlGy5nRgvw3osyvkZwDfyAzOWSnRBia/uLF2PmHCMo0gNRg2YmP r652gXCpJJT2gbZXb/y2qPHqo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB Af8EAjAAMB0GA1UdDgQWBBSkptne3n917RG1GSBHTGPS4l1nczAfBgNVHSMEGDAW gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgQ0DdX5tCZVDU/4XN1rPm7qIU+VXaq4E9 di8U93EG488CIHggdMulPLTIjkylfcCSe0sBCcHbUV+Ao7FdqI5CPWd+ -----END CERTIFICATE----- |1 peer1|5a4a45f968106f5455328d0da3085587023804a9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019-05-08 08:21:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE----- MIICxjCCAm2gAwIBAgIUWkpF+WgQb1RVMo0NowhVhwI4BKkwCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MTYwMFoXDTE5MDUwODA4MjEwMFowfDELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC AAS/T1I1sgdatxUfGdgpPdCld0GbgsjkrsZpCwb1WBfshPcI7VET8UYdmyhlV7xh 5Y1nv7Nyta3CQFKnpNlpk8Szo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB Af8EAjAAMB0GA1UdDgQWBBQ6z4Uyl78cWEgIqHPywYLxDYDeETAfBgNVHSMEGDAW gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgI1zzjAKQfzf8acKTPk2PtGeVJjB8yQUR uaNjecEcbiECIFErHS8Q7Qxw1WXghXSSgxo8Q6DtGuSrO6ijOxti0ou2 -----END CERTIFICATE----- |1 吊销admin2的证书 [root@fabric-cli admin2]# fabric-ca-client revoke -e admin2 -r unspecified -H $PWD 2018/05/08 16:21:27 [INFO] Configuration file location: /root/client-01/admin2/fabric-ca-client-config.yaml 2018/05/08 16:21:27 [INFO] Sucessfully revoked certificates: [{Serial:392ee9ba3325e80e194a013571d910b1d837fe5a AKI:f1f042212126df52a9473983a4cdf18b69d719e8}] 数据库显示 admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||revoked|0|2019-05-08 08:08:00+00:00|2018-05-08 08:21:27|-----BEGIN CERTIFICATE----- MIICyDCCAm+gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28= -----END CERTIFICATE----- |1 参考： Fabric CA 用户指南 fabric-ca 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/05/08/35a129f2daa6027f14bdee12c4fc11d0.html","headline":"fabric ca 使用案例","dateModified":"2018-05-08T00:00:00+08:00","datePublished":"2018-05-08T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/05/08/35a129f2daa6027f14bdee12c4fc11d0.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>fabric ca 使用案例</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>fabric-ca 有两个子项目：一个是fabric-ca-client,另一个是fabric-ca-server <br> <strong>启动一个fabric-ca-server</strong></p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">server</span> <span class="hljs-comment">start</span> <span class="hljs-literal">-</span><span class="hljs-comment">b</span> <span class="hljs-comment">admin:admin</span> <span class="hljs-comment">//会在当前目录生成证书相关的信息</span>
<span class="hljs-title">[</span><span class="hljs-comment">root@fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">cli</span> <span class="hljs-comment">server01</span><span class="hljs-title">]</span><span class="hljs-comment">#</span> <span class="hljs-comment">ls</span> <span class="hljs-literal">-</span><span class="hljs-comment">l</span>
<span class="hljs-comment">总用量</span> <span class="hljs-comment">60</span>
<span class="hljs-literal">-</span><span class="hljs-comment">rw</span><span class="hljs-literal">-</span><span class="hljs-comment">r</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">r</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span> <span class="hljs-comment">1</span> <span class="hljs-comment">root</span> <span class="hljs-comment">root</span>   <span class="hljs-comment">786</span> <span class="hljs-comment">5月</span>   <span class="hljs-comment">8</span> <span class="hljs-comment">15:52</span> <span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">cert</span><span class="hljs-string">.</span><span class="hljs-comment">pem</span>
<span class="hljs-literal">-</span><span class="hljs-comment">rw</span><span class="hljs-literal">-</span><span class="hljs-comment">r</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">r</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span> <span class="hljs-comment">1</span> <span class="hljs-comment">root</span> <span class="hljs-comment">root</span> <span class="hljs-comment">15875</span> <span class="hljs-comment">5月</span>   <span class="hljs-comment">8</span> <span class="hljs-comment">15:52</span> <span class="hljs-comment">fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">server</span><span class="hljs-literal">-</span><span class="hljs-comment">config</span><span class="hljs-string">.</span><span class="hljs-comment">yaml</span>
<span class="hljs-literal">-</span><span class="hljs-comment">rw</span><span class="hljs-literal">-</span><span class="hljs-comment">r</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">r</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span> <span class="hljs-comment">1</span> <span class="hljs-comment">root</span> <span class="hljs-comment">root</span> <span class="hljs-comment">40960</span> <span class="hljs-comment">5月</span>   <span class="hljs-comment">8</span> <span class="hljs-comment">16:21</span> <span class="hljs-comment">fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">server</span><span class="hljs-string">.</span><span class="hljs-comment">db</span>
<span class="hljs-comment">drwxr</span><span class="hljs-literal">-</span><span class="hljs-comment">xr</span><span class="hljs-literal">-</span><span class="hljs-comment">x</span> <span class="hljs-comment">3</span> <span class="hljs-comment">root</span> <span class="hljs-comment">root</span>    <span class="hljs-comment">22</span> <span class="hljs-comment">5月</span>   <span class="hljs-comment">8</span> <span class="hljs-comment">15:52</span> <span class="hljs-comment">msp</span></code></pre> 
  <p>enroll 启动用户，要不数据库里面没有相关的证书 <br> enroll之前</p> 
  <pre class="prettyprint"><code class=" hljs smalltalk">sqlite&gt; select * from users;
admin|<span class="hljs-char">$2</span>a<span class="hljs-char">$1</span>0<span class="hljs-char">$3</span>eNa8xBspcM11j37CgUVB.dDTkoOt1Sk/<span class="hljs-number">1</span>NZEjqrHLjXEGdeJ5uUG<span class="hljs-localvars">|client|</span>|[{<span class="hljs-comment">"name"</span>:<span class="hljs-comment">"hf.Revoker"</span>,<span class="hljs-comment">"value"</span>:<span class="hljs-comment">"1"</span>},{<span class="hljs-comment">"name"</span>:<span class="hljs-comment">"hf.IntermediateCA"</span>,<span class="hljs-comment">"value"</span>:<span class="hljs-comment">"1"</span>},{<span class="hljs-comment">"name"</span>:<span class="hljs-comment">"hf.GenCRL"</span>,<span class="hljs-comment">"value"</span>:<span class="hljs-comment">"1"</span>},{<span class="hljs-comment">"name"</span>:<span class="hljs-comment">"hf.Registrar.Attributes"</span>,<span class="hljs-comment">"value"</span>:<span class="hljs-comment">"*"</span>},{<span class="hljs-comment">"name"</span>:<span class="hljs-comment">"hf.AffiliationMgr"</span>,<span class="hljs-comment">"value"</span>:<span class="hljs-comment">"1"</span>},{<span class="hljs-comment">"name"</span>:<span class="hljs-comment">"hf.Registrar.Roles"</span>,<span class="hljs-comment">"value"</span>:<span class="hljs-comment">"peer,orderer,client,user"</span>},{<span class="hljs-comment">"name"</span>:<span class="hljs-comment">"hf.Registrar.DelegateRoles"</span>,<span class="hljs-comment">"value"</span>:<span class="hljs-comment">"peer,orderer,client,user"</span>}]|<span class="hljs-number">0</span>|-<span class="hljs-number">1</span>|<span class="hljs-number">1</span>
sqlite&gt; select * from certificates;</code></pre> 
  <p>enroll之后</p> 
  <pre class="prettyprint"><code class=" hljs axapta">[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># fabric-ca-client enroll -u http://admin:admin@localhost:7054</span>
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">34</span> [INFO] generating key: &amp;{A:ecdsa S:<span class="hljs-number">256</span>}
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">34</span> [INFO] encoded CSR
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">34</span> [INFO] Stored <span class="hljs-keyword">client</span> certificate at /root/.fabric-ca-<span class="hljs-keyword">client</span>/msp/signcerts/cert.pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">34</span> [INFO] Stored root CA certificate at /root/.fabric-ca-<span class="hljs-keyword">client</span>/msp/cacerts/localhost-<span class="hljs-number">7054.</span>pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">34</span> [INFO] Stored intermediate CA certificates at /root/.fabric-ca-<span class="hljs-keyword">client</span>/msp/intermediatecerts/localhost-<span class="hljs-number">7054.</span>pem
[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># fabric-ca-client enroll -u http://admin:admin@localhost:7054 --home $PWD/admin</span>
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">59</span> [INFO] Created a <span class="hljs-keyword">default</span> configuration file at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin/fabric-ca-<span class="hljs-keyword">client</span>-config.yaml
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">59</span> [INFO] generating key: &amp;{A:ecdsa S:<span class="hljs-number">256</span>}
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">59</span> [INFO] encoded CSR
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">59</span> [INFO] Stored <span class="hljs-keyword">client</span> certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin/msp/signcerts/cert.pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">59</span> [INFO] Stored root CA certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin/msp/cacerts/localhost-<span class="hljs-number">7054.</span>pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span>:<span class="hljs-number">59</span> [INFO] Stored intermediate CA certificates at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin/msp/intermediatecerts/localhost-<span class="hljs-number">7054.</span>pem
[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># </span>
[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># ls -l </span>
总用量 <span class="hljs-number">0</span>
drwxr-xr-x <span class="hljs-number">3</span> root root <span class="hljs-number">53</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span> admin
[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># ls -l admin/</span>
总用量 <span class="hljs-number">8</span>
-rwxr-xr-x <span class="hljs-number">1</span> root root <span class="hljs-number">6506</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span> fabric-ca-<span class="hljs-keyword">client</span>-config.yaml
drwx------ <span class="hljs-number">6</span> root root   <span class="hljs-number">79</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span> msp</code></pre> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">sqlite</span>&gt; <span class="hljs-comment">select</span> <span class="hljs-comment">*</span> <span class="hljs-comment">from</span> <span class="hljs-comment">certificates;</span>
<span class="hljs-comment">admin|5c4c01ecd318537960c93365e99a92dec19f05b9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019</span><span class="hljs-literal">-</span><span class="hljs-comment">05</span><span class="hljs-literal">-</span><span class="hljs-comment">08</span> <span class="hljs-comment">08:03:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|0001</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span> <span class="hljs-comment">00:00:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">BEGIN</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">MIICPjCCAeSgAwIBAgIUXEwB7NMYU3lgyTNl6ZqS3sGfBbkwCgYIKoZIzj0EAwIw</span>
<span class="hljs-comment">aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK</span>
<span class="hljs-comment">EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt</span>
<span class="hljs-comment">Y2Etc2VydmVyMB4XDTE4MDUwODA3NTgwMFoXDTE5MDUwODA4MDMwMFowXTELMAkG</span>
<span class="hljs-comment">A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl</span>
<span class="hljs-comment">cmxlZGdlcjEPMA0GA1UECxMGY2xpZW50MQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqG</span>
<span class="hljs-comment">SM49AgEGCCqGSM49AwEHA0IABKhxvv2Tu8qaz6VaeLxxFhs33FfUnsBRdxmMAgaN</span>
<span class="hljs-comment">bt0ul9KpqlHLhplvsgEvzX32pvbOBPXt79UUllISqoxsCtijdzB1MA4GA1UdDwEB</span>
<span class="hljs-comment">/wQEAwIHgDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRkVq8Fj3elmE2jEUngx771</span>
<span class="hljs-comment">/WwMEzAfBgNVHSMEGDAWgBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAM</span>
<span class="hljs-comment">ggpmYWJyaWMtY2xpMAoGCCqGSM49BAMCA0gAMEUCIQCHll5J</span><span class="hljs-literal">+</span><span class="hljs-comment">kUcmvix1pzVKIMG</span>
<span class="hljs-comment">A8rgDHwAG0/dgbidnsRtBwIgcwzPuqBuTAC95</span><span class="hljs-literal">+</span><span class="hljs-comment">D/FrGsfXWYTetRG1yPlXJH7HAe</span>
<span class="hljs-literal">+</span><span class="hljs-comment">es=</span>
<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">END</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">|1</span>
</code></pre> 
  <p>用admin注册一个用户admin2</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-title">[</span><span class="hljs-comment">root@fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">cli</span> <span class="hljs-comment">client</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span><span class="hljs-title">]</span><span class="hljs-comment">#</span> <span class="hljs-comment">fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">client</span> <span class="hljs-comment">register</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">name</span> <span class="hljs-comment">admin2</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">type</span> <span class="hljs-comment">user</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">affiliation</span> <span class="hljs-comment">org1</span><span class="hljs-string">.</span><span class="hljs-comment">department1</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">attrs</span> <span class="hljs-comment">'hf</span><span class="hljs-string">.</span><span class="hljs-comment">Revoker=true</span><span class="hljs-string">,</span><span class="hljs-comment">foo=bar'</span> <span class="hljs-literal">-</span><span class="hljs-comment">H</span> <span class="hljs-comment">$PWD/admin</span> 
<span class="hljs-comment">2018/05/08</span> <span class="hljs-comment">16:06:05</span> <span class="hljs-title">[</span><span class="hljs-comment">INFO</span><span class="hljs-title">]</span> <span class="hljs-comment">Configuration</span> <span class="hljs-comment">file</span> <span class="hljs-comment">location:</span> <span class="hljs-comment">/root/client</span><span class="hljs-literal">-</span><span class="hljs-comment">01/admin/fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">client</span><span class="hljs-literal">-</span><span class="hljs-comment">config</span><span class="hljs-string">.</span><span class="hljs-comment">yaml</span>
<span class="hljs-comment">Password:</span> <span class="hljs-comment">HUynsYXMGlkP</span>
</code></pre> 
  <p>注册完成之后在用户表中会有相应的用户信息，但是还没有相关的证书</p> 
  <pre class="prettyprint"><code class=" hljs bash">sqlite&gt; select * from users;
admin|<span class="hljs-variable">$2a</span><span class="hljs-variable">$10</span><span class="hljs-variable">$3eNa8xBspcM11j37CgUVB</span>.dDTkoOt1Sk/<span class="hljs-number">1</span>NZEjqrHLjXEGdeJ5uUG|client||[{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Revoker"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.IntermediateCA"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.GenCRL"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Registrar.Attributes"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"*"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.AffiliationMgr"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Registrar.Roles"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"peer,orderer,client,user"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Registrar.DelegateRoles"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"peer,orderer,client,user"</span>}]|<span class="hljs-number">2</span>|-<span class="hljs-number">1</span>|<span class="hljs-number">1</span>
admin2|<span class="hljs-variable">$2a</span><span class="hljs-variable">$10</span><span class="hljs-variable">$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC</span>|user|org1.department1|[{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Revoker"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"true"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"foo"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"bar"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.EnrollmentID"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"admin2"</span>,<span class="hljs-string">"ecert"</span>:<span class="hljs-literal">true</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Type"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"user"</span>,<span class="hljs-string">"ecert"</span>:<span class="hljs-literal">true</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Affiliation"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"org1.department1"</span>,<span class="hljs-string">"ecert"</span>:<span class="hljs-literal">true</span>}]|<span class="hljs-number">0</span>|-<span class="hljs-number">1</span>|<span class="hljs-number">1</span>
sqlite&gt; select * from users;
admin|<span class="hljs-variable">$2a</span><span class="hljs-variable">$10</span><span class="hljs-variable">$3eNa8xBspcM11j37CgUVB</span>.dDTkoOt1Sk/<span class="hljs-number">1</span>NZEjqrHLjXEGdeJ5uUG|client||[{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Revoker"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.IntermediateCA"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.GenCRL"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Registrar.Attributes"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"*"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.AffiliationMgr"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"1"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Registrar.Roles"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"peer,orderer,client,user"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Registrar.DelegateRoles"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"peer,orderer,client,user"</span>}]|<span class="hljs-number">2</span>|-<span class="hljs-number">1</span>|<span class="hljs-number">1</span>
admin2|<span class="hljs-variable">$2a</span><span class="hljs-variable">$10</span><span class="hljs-variable">$EjCadIqi0EFw4SuaKMYKveuXMQ0OxDXAwiyJ5lkR4CMLoJ3zl6NMC</span>|user|org1.department1|[{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Revoker"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"true"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"foo"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"bar"</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.EnrollmentID"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"admin2"</span>,<span class="hljs-string">"ecert"</span>:<span class="hljs-literal">true</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Type"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"user"</span>,<span class="hljs-string">"ecert"</span>:<span class="hljs-literal">true</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"hf.Affiliation"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-string">"org1.department1"</span>,<span class="hljs-string">"ecert"</span>:<span class="hljs-literal">true</span>}]|<span class="hljs-number">1</span>|-<span class="hljs-number">1</span>|<span class="hljs-number">1</span></code></pre> 
  <p>enroll admin2之后才有，用之前返回的密码enroll admin2</p> 
  <pre class="prettyprint"><code class=" hljs axapta">root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># fabric-ca-client enroll -u http://admin2:HUynsYXMGlkP@localhost:7054 -H $PWD/admin2</span>
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">08</span>:<span class="hljs-number">13</span> [INFO] Created a <span class="hljs-keyword">default</span> configuration file at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin2/fabric-ca-<span class="hljs-keyword">client</span>-config.yaml
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">08</span>:<span class="hljs-number">13</span> [INFO] generating key: &amp;{A:ecdsa S:<span class="hljs-number">256</span>}
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">08</span>:<span class="hljs-number">13</span> [INFO] encoded CSR
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">08</span>:<span class="hljs-number">13</span> [INFO] Stored <span class="hljs-keyword">client</span> certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin2/msp/signcerts/cert.pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">08</span>:<span class="hljs-number">13</span> [INFO] Stored root CA certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin2/msp/cacerts/localhost-<span class="hljs-number">7054.</span>pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">08</span>:<span class="hljs-number">13</span> [INFO] Stored intermediate CA certificates at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/admin2/msp/intermediatecerts/localhost-<span class="hljs-number">7054.</span>pem</code></pre> 
  <p>enroll成功之后，证书表会有相关的证书</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019</span><span class="hljs-literal">-</span><span class="hljs-comment">05</span><span class="hljs-literal">-</span><span class="hljs-comment">08</span> <span class="hljs-comment">08:08:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|0001</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span> <span class="hljs-comment">00:00:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">BEGIN</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">MIICyDCCAm</span><span class="hljs-literal">+</span><span class="hljs-comment">gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw</span>
<span class="hljs-comment">aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK</span>
<span class="hljs-comment">EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt</span>
<span class="hljs-comment">Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG</span>
<span class="hljs-comment">A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl</span>
<span class="hljs-comment">cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh</span>
<span class="hljs-comment">cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD</span>
<span class="hljs-comment">QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd</span>
<span class="hljs-comment">tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T</span>
<span class="hljs-comment">AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw</span>
<span class="hljs-comment">FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn</span>
<span class="hljs-comment">BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw</span>
<span class="hljs-comment">YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi</span>
<span class="hljs-comment">dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk</span>
<span class="hljs-comment">mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28=</span>
<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">END</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">|1</span></code></pre> 
  <p>注册节点</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-title">[</span><span class="hljs-comment">root@fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">cli</span> <span class="hljs-comment">client</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span><span class="hljs-title">]</span><span class="hljs-comment">#</span> <span class="hljs-comment">fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">client</span> <span class="hljs-comment">register</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">name</span> <span class="hljs-comment">peer1</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">type</span> <span class="hljs-comment">peer</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">affiliation</span> <span class="hljs-comment">org1</span><span class="hljs-string">.</span><span class="hljs-comment">department1</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">id</span><span class="hljs-string">.</span><span class="hljs-comment">secret</span> <span class="hljs-comment">peer1pw</span> <span class="hljs-literal">-</span><span class="hljs-comment">H</span> <span class="hljs-comment">$PWD/admin</span>
<span class="hljs-comment">2018/05/08</span> <span class="hljs-comment">16:09:46</span> <span class="hljs-title">[</span><span class="hljs-comment">INFO</span><span class="hljs-title">]</span> <span class="hljs-comment">Configuration</span> <span class="hljs-comment">file</span> <span class="hljs-comment">location:</span> <span class="hljs-comment">/root/client</span><span class="hljs-literal">-</span><span class="hljs-comment">01/admin/fabric</span><span class="hljs-literal">-</span><span class="hljs-comment">ca</span><span class="hljs-literal">-</span><span class="hljs-comment">client</span><span class="hljs-literal">-</span><span class="hljs-comment">config</span><span class="hljs-string">.</span><span class="hljs-comment">yaml</span>
<span class="hljs-comment">Password:</span> <span class="hljs-comment">peer1pw</span>
</code></pre> 
  <p>登记节点</p> 
  <pre class="prettyprint"><code class=" hljs axapta">[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># fabric-ca-client enroll -u http://peer1:peer1pw@localhost:7054 -H $PWD/peer01</span>
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span>:<span class="hljs-number">44</span> [INFO] Created a <span class="hljs-keyword">default</span> configuration file at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/fabric-ca-<span class="hljs-keyword">client</span>-config.yaml
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span>:<span class="hljs-number">44</span> [INFO] generating key: &amp;{A:ecdsa S:<span class="hljs-number">256</span>}
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span>:<span class="hljs-number">44</span> [INFO] encoded CSR
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span>:<span class="hljs-number">44</span> [INFO] Stored <span class="hljs-keyword">client</span> certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/signcerts/cert.pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span>:<span class="hljs-number">44</span> [INFO] Stored root CA certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/cacerts/localhost-<span class="hljs-number">7054.</span>pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span>:<span class="hljs-number">44</span> [INFO] Stored intermediate CA certificates at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/intermediatecerts/localhost-<span class="hljs-number">7054.</span>pem
[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># ls -l</span>
总用量 <span class="hljs-number">0</span>
drwxr-xr-x <span class="hljs-number">3</span> root root <span class="hljs-number">53</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">02</span> admin
drwxr-xr-x <span class="hljs-number">3</span> root root <span class="hljs-number">53</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">08</span> admin2
drwxr-xr-x <span class="hljs-number">3</span> root root <span class="hljs-number">53</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span> peer01
[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># </span>
[root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># ls -l peer01/</span>
总用量 <span class="hljs-number">8</span>
-rwxr-xr-x <span class="hljs-number">1</span> root root <span class="hljs-number">6506</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span> fabric-ca-<span class="hljs-keyword">client</span>-config.yaml
drwx------ <span class="hljs-number">6</span> root root   <span class="hljs-number">79</span> <span class="hljs-number">5</span>月   <span class="hljs-number">8</span> <span class="hljs-number">16</span>:<span class="hljs-number">11</span> msp</code></pre> 
  <p>启动另一个fabric-ca-server服务</p> 
  <pre class="prettyprint"><code class=" hljs sql">root@fabric-cli server03]# fabric-ca-server <span class="hljs-operator"><span class="hljs-keyword">start</span> -b admin:ca2pw -p <span class="hljs-number">7055</span> -H /root/server01 -n ca2 <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] Configuration file location: /root/server01/fabric-ca-server-config.yaml <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] Starting server <span class="hljs-keyword">in</span> home directory: /root/server01 <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] Server Version: <span class="hljs-number">1.1</span><span class="hljs-number">.0</span> <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] Server Levels: &amp;{<span class="hljs-keyword">Identity</span>:<span class="hljs-number">1</span> Affiliation:<span class="hljs-number">1</span> Certificate:<span class="hljs-number">1</span>} <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] The CA <span class="hljs-keyword">key</span> <span class="hljs-keyword">and</span> certificate already exist <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] The <span class="hljs-keyword">key</span> <span class="hljs-keyword">is</span> stored <span class="hljs-keyword">by</span> BCCSP provider <span class="hljs-string">'SW'</span> <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] The certificate <span class="hljs-keyword">is</span> <span class="hljs-keyword">at</span>: /root/server01/ca-cert.pem <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] Initialized sqlite3 <span class="hljs-keyword">database</span> <span class="hljs-keyword">at</span> /root/server01/fabric-ca-server.db <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] Home directory <span class="hljs-keyword">for</span> <span class="hljs-keyword">default</span> CA: /root/server01 <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">26</span> [INFO] Listening <span class="hljs-keyword">on</span> http://<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">7055</span> <span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">19</span>:<span class="hljs-number">09</span> [INFO] [::<span class="hljs-number">1</span>]:<span class="hljs-number">44680</span> POST /cainfo <span class="hljs-number">200</span> <span class="hljs-number">0</span> <span class="hljs-string">"OK"</span></span></code></pre> 
  <p>把证书复制到peer01</p> 
  <pre class="prettyprint"><code class=" hljs axapta">root@fabric-cli <span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>]<span class="hljs-preprocessor"># fabric-ca-client getcacert -u http://localhost:7055 -M $PWD/peer01/msp </span>
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">19</span>:<span class="hljs-number">09</span> [INFO] Configuration file location: /root/.fabric-ca-<span class="hljs-keyword">client</span>/fabric-ca-<span class="hljs-keyword">client</span>-config.yaml
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">19</span>:<span class="hljs-number">09</span> [INFO] Stored root CA certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/cacerts/localhost-<span class="hljs-number">7055.</span>pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">19</span>:<span class="hljs-number">09</span> [INFO] Stored intermediate CA certificates at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/intermediatecerts/localhost-<span class="hljs-number">7055.</span>pem</code></pre> 
  <pre class="prettyprint"><code class=" hljs avrasm">[root@fabric-<span class="hljs-keyword">cli</span> peer01]<span class="hljs-preprocessor"># tree </span>
.
├── fabric-ca-client-config<span class="hljs-preprocessor">.yaml</span>
└── msp
    ├── cacerts
    │   ├── localhost-<span class="hljs-number">7054.</span>pem
    │   └── localhost-<span class="hljs-number">7055.</span>pem
    ├── intermediatecerts
    │   ├── localhost-<span class="hljs-number">7054.</span>pem
    │   └── localhost-<span class="hljs-number">7055.</span>pem
    ├── keystore
    │   ├── <span class="hljs-number">8</span>c9aeba7773cbc8f66fb973f531c8a297297ecb17ab85597e75967432e5f8df0_sk
    │   └── c7a9d0000a72df0ab52cca03a83d19324e33e54ecebea6105f83ca64f7d2b7ae_sk
    └── signcerts
        └── cert<span class="hljs-preprocessor">.pem</span>

<span class="hljs-number">5</span> directories, <span class="hljs-number">8</span> files
</code></pre> 
  <p>重新登记peer01</p> 
  <pre class="prettyprint"><code class=" hljs axapta">[root@fabric-cli peer01]<span class="hljs-preprocessor"># fabric-ca-client reenroll --home $PWD</span>
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">20</span>:<span class="hljs-number">31</span> [INFO] Configuration file location: /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/fabric-ca-<span class="hljs-keyword">client</span>-config.yaml
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">20</span>:<span class="hljs-number">31</span> [INFO] generating key: &amp;{A:ecdsa S:<span class="hljs-number">256</span>}
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">20</span>:<span class="hljs-number">31</span> [INFO] encoded CSR
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">20</span>:<span class="hljs-number">31</span> [INFO] Stored <span class="hljs-keyword">client</span> certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/signcerts/cert.pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">20</span>:<span class="hljs-number">31</span> [INFO] Stored root CA certificate at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/cacerts/localhost-<span class="hljs-number">7054.</span>pem
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/<span class="hljs-number">08</span> <span class="hljs-number">16</span>:<span class="hljs-number">20</span>:<span class="hljs-number">31</span> [INFO] Stored intermediate CA certificates at /root/<span class="hljs-keyword">client</span>-<span class="hljs-number">01</span>/peer01/msp/intermediatecerts/localhost-<span class="hljs-number">7054.</span>pem</code></pre> 
  <p>数据库显示</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">peer1|3a5f382f399d14459b86ebaa182b29d4cfe8289|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019</span><span class="hljs-literal">-</span><span class="hljs-comment">05</span><span class="hljs-literal">-</span><span class="hljs-comment">08</span> <span class="hljs-comment">08:12:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|0001</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span> <span class="hljs-comment">00:00:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">BEGIN</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">MIICxjCCAm2gAwIBAgIUA6XzgvOZ0URZuG66oYKynUz</span><span class="hljs-literal">+</span><span class="hljs-comment">gokwCgYIKoZIzj0EAwIw</span>
<span class="hljs-comment">aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK</span>
<span class="hljs-comment">EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt</span>
<span class="hljs-comment">Y2Etc2VydmVyMB4XDTE4MDUwODA4MDcwMFoXDTE5MDUwODA4MTIwMFowfDELMAkG</span>
<span class="hljs-comment">A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl</span>
<span class="hljs-comment">cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh</span>
<span class="hljs-comment">cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC</span>
<span class="hljs-comment">AASVj5Sh7a9VyKlGy5nRgvw3osyvkZwDfyAzOWSnRBia/uLF2PmHCMo0gNRg2YmP</span>
<span class="hljs-comment">r652gXCpJJT2gbZXb/y2qPHqo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB</span>
<span class="hljs-comment">Af8EAjAAMB0GA1UdDgQWBBSkptne3n917RG1GSBHTGPS4l1nczAfBgNVHSMEGDAW</span>
<span class="hljs-comment">gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG</span>
<span class="hljs-comment">CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh</span>
<span class="hljs-comment">cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl</span>
<span class="hljs-comment">ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgQ0DdX5tCZVDU/4XN1rPm7qIU</span><span class="hljs-literal">+</span><span class="hljs-comment">VXaq4E9</span>
<span class="hljs-comment">di8U93EG488CIHggdMulPLTIjkylfcCSe0sBCcHbUV</span><span class="hljs-literal">+</span><span class="hljs-comment">Ao7FdqI5CPWd</span><span class="hljs-literal">+</span>
<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">END</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">|1</span>
<span class="hljs-comment">peer1|5a4a45f968106f5455328d0da3085587023804a9|f1f042212126df52a9473983a4cdf18b69d719e8||good|0|2019</span><span class="hljs-literal">-</span><span class="hljs-comment">05</span><span class="hljs-literal">-</span><span class="hljs-comment">08</span> <span class="hljs-comment">08:21:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|0001</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span><span class="hljs-literal">-</span><span class="hljs-comment">01</span> <span class="hljs-comment">00:00:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">BEGIN</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">MIICxjCCAm2gAwIBAgIUWkpF</span><span class="hljs-literal">+</span><span class="hljs-comment">WgQb1RVMo0NowhVhwI4BKkwCgYIKoZIzj0EAwIw</span>
<span class="hljs-comment">aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK</span>
<span class="hljs-comment">EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt</span>
<span class="hljs-comment">Y2Etc2VydmVyMB4XDTE4MDUwODA4MTYwMFoXDTE5MDUwODA4MjEwMFowfDELMAkG</span>
<span class="hljs-comment">A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl</span>
<span class="hljs-comment">cmxlZGdlcjEuMAsGA1UECxMEcGVlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh</span>
<span class="hljs-comment">cnRtZW50MTEOMAwGA1UEAxMFcGVlcjEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNC</span>
<span class="hljs-comment">AAS/T1I1sgdatxUfGdgpPdCld0GbgsjkrsZpCwb1WBfshPcI7VET8UYdmyhlV7xh</span>
<span class="hljs-comment">5Y1nv7Nyta3CQFKnpNlpk8Szo4HgMIHdMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMB</span>
<span class="hljs-comment">Af8EAjAAMB0GA1UdDgQWBBQ6z4Uyl78cWEgIqHPywYLxDYDeETAfBgNVHSMEGDAW</span>
<span class="hljs-comment">gBTx8EIhISbfUqlHOYOkzfGLadcZ6DAVBgNVHREEDjAMggpmYWJyaWMtY2xpMGYG</span>
<span class="hljs-comment">CCoDBAUGBwgBBFp7ImF0dHJzIjp7ImhmLkFmZmlsaWF0aW9uIjoib3JnMS5kZXBh</span>
<span class="hljs-comment">cnRtZW50MSIsImhmLkVucm9sbG1lbnRJRCI6InBlZXIxIiwiaGYuVHlwZSI6InBl</span>
<span class="hljs-comment">ZXIifX0wCgYIKoZIzj0EAwIDRwAwRAIgI1zzjAKQfzf8acKTPk2PtGeVJjB8yQUR</span>
<span class="hljs-comment">uaNjecEcbiECIFErHS8Q7Qxw1WXghXSSgxo8Q6DtGuSrO6ijOxti0ou2</span>
<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">END</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">|1</span>
</code></pre> 
  <p>吊销admin2的证书</p> 
  <pre class="prettyprint"><code class=" hljs ruby">[root<span class="hljs-variable">@fabric</span>-cli admin2]<span class="hljs-comment"># fabric-ca-client revoke -e admin2 -r unspecified -H $PWD</span>
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/08 <span class="hljs-number">16</span><span class="hljs-symbol">:</span><span class="hljs-number">21</span><span class="hljs-symbol">:</span><span class="hljs-number">27</span> [<span class="hljs-constant">INFO</span>] <span class="hljs-constant">Configuration</span> file <span class="hljs-symbol">location:</span> /root/client-<span class="hljs-number">01</span>/admin2/fabric-ca-client-config.yaml
<span class="hljs-number">2018</span>/<span class="hljs-number">05</span>/08 <span class="hljs-number">16</span><span class="hljs-symbol">:</span><span class="hljs-number">21</span><span class="hljs-symbol">:</span><span class="hljs-number">27</span> [<span class="hljs-constant">INFO</span>] <span class="hljs-constant">Sucessfully</span> revoked <span class="hljs-symbol">certificates:</span> [{<span class="hljs-constant">Serial</span><span class="hljs-symbol">:</span><span class="hljs-number">392</span>ee9ba3325e80e194a013571d910b1d837fe5a <span class="hljs-constant">AKI</span><span class="hljs-symbol">:f1f042212126df52a9473983a4cdf18b69d719e8</span>}]</code></pre> 
  <p>数据库显示</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">admin2|392ee9ba3325e80e194a013571d910b1d837fe5a|f1f042212126df52a9473983a4cdf18b69d719e8||revoked|0|2019</span><span class="hljs-literal">-</span><span class="hljs-comment">05</span><span class="hljs-literal">-</span><span class="hljs-comment">08</span> <span class="hljs-comment">08:08:00</span><span class="hljs-literal">+</span><span class="hljs-comment">00:00|2018</span><span class="hljs-literal">-</span><span class="hljs-comment">05</span><span class="hljs-literal">-</span><span class="hljs-comment">08</span> <span class="hljs-comment">08:21:27|</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">BEGIN</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">MIICyDCCAm</span><span class="hljs-literal">+</span><span class="hljs-comment">gAwIBAgIUOS7pujMl6A4ZSgE1cdkQsdg3/lowCgYIKoZIzj0EAwIw</span>
<span class="hljs-comment">aDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK</span>
<span class="hljs-comment">EwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt</span>
<span class="hljs-comment">Y2Etc2VydmVyMB4XDTE4MDUwODA4MDMwMFoXDTE5MDUwODA4MDgwMFowfTELMAkG</span>
<span class="hljs-comment">A1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl</span>
<span class="hljs-comment">cmxlZGdlcjEuMAsGA1UECxMEdXNlcjALBgNVBAsTBG9yZzEwEgYDVQQLEwtkZXBh</span>
<span class="hljs-comment">cnRtZW50MTEPMA0GA1UEAxMGYWRtaW4yMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcD</span>
<span class="hljs-comment">QgAER0NPvkZ7g/wOmncvaPzcESrQtVjSAhIBe5R3uHWBzmKKOGYnSOTAZPz8mQfd</span>
<span class="hljs-comment">tgjxuZnc8MuEgTeH9Wy0uyPew6OB4TCB3jAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0T</span>
<span class="hljs-comment">AQH/BAIwADAdBgNVHQ4EFgQUsF0jjj/KF6c/3XZY/7mI63E0WhMwHwYDVR0jBBgw</span>
<span class="hljs-comment">FoAU8fBCISEm31KpRzmDpM3xi2nXGegwFQYDVR0RBA4wDIIKZmFicmljLWNsaTBn</span>
<span class="hljs-comment">BggqAwQFBgcIAQRbeyJhdHRycyI6eyJoZi5BZmZpbGlhdGlvbiI6Im9yZzEuZGVw</span>
<span class="hljs-comment">YXJ0bWVudDEiLCJoZi5FbnJvbGxtZW50SUQiOiJhZG1pbjIiLCJoZi5UeXBlIjoi</span>
<span class="hljs-comment">dXNlciJ9fTAKBggqhkjOPQQDAgNHADBEAiA9puD24CEgOpoxjGx/0BHVjyoExiqk</span>
<span class="hljs-comment">mi3lj6JVXiAi3wIgQVMinjIj75s3SPBk5eROR0lKpXaOz627erKHZq3dh28=</span>
<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">END</span> <span class="hljs-comment">CERTIFICATE</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span>
<span class="hljs-comment">|1</span>
</code></pre> 
  <p>参考： <br> <a href="https://blog.csdn.net/baidu_39649815/article/details/76259031" rel="nofollow">Fabric CA 用户指南</a> <br> <a href="http://hyperledger-fabric-ca.readthedocs.io/en/latest/" rel="nofollow">fabric-ca</a></p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qq_21816375/article/details/80241643,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qq_21816375/article/details/80241643,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
