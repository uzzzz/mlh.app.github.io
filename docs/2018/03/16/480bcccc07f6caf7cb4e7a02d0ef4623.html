<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>瑞波（ripple）提出的跨链技术 Interledger Protocal( ILP)详解 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="瑞波（ripple）提出的跨链技术 Interledger Protocal( ILP)详解" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="特别声明： 本文具有较强原创性和先导性，在此只做笔记使用，严禁任何转载和引用， 随着区块链网络广泛的出现，在不同的网络之间实现加密电子货币的价值转换的需求变得旺盛，作为价值网络核心的跨链技术从而变得越来越重要。本文详细分析了瑞波（ripple）提出的Interledger Protocal，说明协议的核心点及使用方法，同时结合Interledger Protocal的优势列出一定的应用场景。 1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 背景 自比特币诞生以来，加密数字货币的区块链网络越来越多，形成了蓬勃发展之势。但是在不同的区块链之间进行价值转移和交换，就会碰到各种各样的问题。比如Alice有“比特币”，想通过“比特币”购买Bob一个笔记本电脑，笔记本电脑以“瑞波币”来定价，不接受“比特币”。这时Alice就得想办法通过一定的兑换，将自己手中的“比特币”换成“瑞波币”，再向Bob进行支付。这笔交易的过程应该是：首先Alice把“比特币”卖出得到USD，然后再用USD买入“瑞波币”，在这个过程中会有一个问题----币价稳定性，币价不稳定将会导致价值损耗，同时交易过程也很繁琐，周期过长。正是针对这样的问题，ripple提出了一种跨链价值传输的技术协议InterLedger Protocal（以下简称ILP）。 2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 简介 ILP创建了这样一个系统，在这个系统中，两个不同的账本系统可以通过第三方“连接器”来互相自由地转换货币。账本系统无需去信任“连接器”，因为该协议采用密码算法为这两个账本系统和连接器创建资金托管，当所有参与方对资金达成共识时，便可相互交易。ILP移除了交易参与者所需的信任，连接器不会丢失或窃取资金，这意味着，这种交易无需得到法律合同的保护和过多的审核，大大降低了门槛。 ILP协议的核心思想在于：“账本”提供的第三方，会向发送者保证，他们的资金只有在“账本”收到证明，且接收方已经收到支付时，才将资金转给连接者；第三方也同时也保证连接者，一旦他们完成了协议的最后部分，他们就会收到发送方的资金。 区块链从技术上是去中心化数据库和分布式账本技术，从商业层面则是价值网络，在这个价值网络中，连接的有效节点越多、越分布，可能产生的价值叠加会越大。区块链是价值网络空间的核心基础设施，为了让这种基础设施得到互联互通，自由进行传值转换，我们需要跨链技术，对不同区块链进行连接和扩展，构建价值网络的高速公路。 Interledger协议（ITL）是支付系统间支付协议。协议于2015年10月由Ripple引入。 ITL支持分类账之间的安全转账，并允许任何账户在两个分类账上的人建立账户之间的连接。它使用分类账提供的托管 - 有条件的资金锁定 - 允许通过不受信任的连接器进行安全支付。可以组成连接以支持任何分类帐之间的支付，从而创建流动性或插入者的全球图。 Interledger协议不依赖任何全球协调系统或分类账来处理支付 - 集中式或分散式。ITL降低了促进插入支付的障碍。连接器竞争提供最佳速率和速度。该协议可以扩展以处理无限的支付量，只需添加更多连接器和分类帐即可。 将连接器组装成链可以在任何分类帐之间进行支付，并为小型或新型支付系统提供与最成熟系统相同的网络效果。这可以使每件有价物品在任何地方消费 - 从货币到商品，计算资源和社会信用。 Ripple公司首席技术官Stefan Thomas在10月份表示：“这将是所有分类账的重要组成部分，并将这些差异摘录出来。”&nbsp;“我们正在努力创建一个全球支付标准。” 总帐提供的托管服务通过隔离每个参与者免受其他参与付款的人员的失败或恶意行为风险，从而实现安全的互联网付款。所有参与者只有在预定条件得到满足时才依靠其分类账托管资金并释放它们。 发件人通过他们的账簿确保他们的资金只有在收到收款人已收到付款的不可否认的确认后才能转账。收款人通过分类账保证他们在提供这种确认时会得到报酬。 加密签名是分类账安全验证转账托管的外部条件结果的简单方法。如果付款成功，或者退还其托管资金，付款的发件人可以保证收件人收到加密签名的收据。 “现在银行，企业和其他公司使用不同类型的分类账和支付系统来处理不同的应用。预计没有单个系统或分类帐可以处理全球付款量或处理每个需求和用例。拥有如此众多解决方案的美妙之处在于，每个分类账可以非常好地服务于不同的用例，“Stephan Thomas在接受PYMNTS采访时解释道。“Interledger协议旨在允许所有这些分类账协同工作。它是一个免费的，开放源代码和中性的Web协议，它使这些不同分类帐之间的互操作性能够提供无限的可扩展性和灵活性。这提高了每个分类账与其他分类账的定制方案的能力。“ Interledger协议具有两种执行付款的模式 - 原子模式和通用模式。该协议的原子模式为支付链提供了原子性，参与者可以在这些链中就一组公证人达成一致。通用模式使用理性行为者的激励手段，在不参与任何机构或系统的参与者之间进行实际支付。 Ripple于2012年发布并基于分布式开源Internet协议，共识分类帐和本地货币称为XRP（涟漪）的Ripple协议（Ripple）经常与Interledger协议混淆。 然而，Interledger协议与Ripple共识分类账没有任何关系。这是一个常见的误解，因为支付社区中的许多人对Ripple有先入为主的想法，而且在ITL和Ripple上都没有足够的信息。此外，Ripple工程师发布Interledged协议以及Ripple协议。 Ripple的核心是以分类账为基础，该分类账采用共识流程，允许在分布式流程中进行支付，交换和汇款。截至2014年，Ripple是继比特币之后按市值计算的第二大数字货币。 当Interledger协议的想法首次发布时，它发现了像微软和万维网联盟这样的知名公司的支持。据Stefan Thomas称，当银行拒绝使用Ripple时，该公司首先遇到了ITL的想法。他们不喜欢分类帐的半公开性质，这可能使他们的业务可以被外部人士接入。他解释说，银行唯一能做的就是“分离”Ripple的代码并创建自己的内部系统。然而，正如微软公司的Marly Gray所承认的那样，“如果仅仅在一个单一的组织内使用区块链，它本质上是毫无价值的”。 正如斯蒂芬·托马斯所说，现在企业往往需要在他们开展业务的外国国家预先注资银行账户，以节省货币交易的时间和金钱。这有效地迫使他们以当地货币在世界各地合并资本，以解决孤立的支付生态系统和几天的结算时间。因此，过时的支付基础设施会给银行及其企业客户带来额外成本，并且这种预先资金账户的需求会导致货币账户停滞并带来高额的机会成本。 “ILP帮助互联支付生态系统，消除这些低效率，并使企业能够根据需要进行支付，而不必预先资助账户。这使得他们可以在其他地方分配运营资金，并以全新的方式使用其资本，“托马斯表示，意大利国际贸易法可以在跨境结算方面发挥作用。 由于桑坦德集团投资了数百万美元，&nbsp;Interledger协议的概念得以发展。&nbsp;西班牙银行集团是市场价值最大的欧元区银行，也是市值最大的全球银行之一，他们一定相信Ripple的想法。 Santander InnoVentures的执行合伙人Mariano Belinky表示，Ripple的技术可以彻底改变银行业的基础设施。“Ripple拥有解决许多情况的人才，技术和动力，我们正在积极探索在银行内部应用Ripple技术的最佳方式和方式，”他说。 根据托马斯的说法，ITL基于过去一年里在Ripple试点项目的大型和小型零售和商业银行的广泛客户反馈。 他认为，银行将首先成为Interledged协议的采用者，并将其用于跨境解决方案，如他们已经熟悉的Ripple协议，使他们能够跨越国界和跨不同的分类账高效地进行私人交易。就像ITL跨越银行到银行结算的技术差异一样，它可以连接不兼容的网络和移动支付系统。 该公司计划发布具有ILP功能的Ripple版本，以实现银行要求的关键功能，如私人交易，无限可扩展性以及以任何货币计价的能力。 3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 账本 &nbsp;&nbsp; 各“账本”要想利用ILP技术与其它区块链或者“账本”进行价值转换，就要满足一定的基础条件，才能更好地使自己发行的代币与其它电子货币币进行交换，从而易被大众接受。 &nbsp;&nbsp; 1.&nbsp; 必须要支持自己“账本”所管理下的一个账户向自己账本所管理下另外一个账户的转账操作； 2.&nbsp; 必须要支持托管式的交易操作，该类型的交易需要两个必要参数：一个执行“托管”交易的“原像条件”及一个“超时时间”； 3.&nbsp; 任何用户，不局限于“托管”交易的创建者，在提供“托管”交易的“原像条件”时，就可以决定“托管”交易是被执行还是被拒绝； 4.&nbsp; 如果“托管”交易创建后超时，“托管”交易就会自动失效，“托管”交易里所托管的货币会重新进入“托管”交易的创建者账户； 5.&nbsp; “账本”所支持的交易需要具有携带简短消息的能力； 6.&nbsp; “账本”支持事件通知功能，使得各方能及时知道有一笔针对自己的“托管”交易。 4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 流程 4.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 概述 整个交易流程分成“发送方---&gt;接收方”与“接收方---&gt;发送方”两个主流程。每个流程又是由发生在各个“账本”上的各个子交易（“托管创建”与“托管确认”）组成。“发送方---&gt;接收方”流程全部是“托管”的创建动作，“接收方---&gt;发送方”则全由“托管”的确认动作组成。 从图中我们可以了解到在接收方对“账本N”上的“托管”交易进行确认前，所有“账本”上被创建的“托管”交易并未被确认，些时每一个“账本”上“托管”交易里指定的源账户并未真正将自己的资产转移出去，而是由“账本”系统进行了托管。只有当接收方进行确认后，在“接收方---&gt;发送方”的返回流程中，各个“托管”交易才被确认，此时各个“账本”的“托管”交易里指定的目标账户才真正得到源账户的资产，资产价值真正发生转移。 在交易的整个链条过程中，每一个环节上的交易在被确认之前都是处于“托管”状态，并没有发生价值转移。即使是连接者去破坏交易，比如说将交易发往另外的地址，发送者也不会有损失，因为最后托管的交易不会得到执行，超时时间条件达成后，交易中的资产会再返回给源账户。 当接收者收到一个涉及自己账户的“托管”交易的通知时，接收者会确认交易细节从而确定交易是否正确，然后提供“托管”交易所指定条件的原像，向“账本”系统发出“托管确认”操作，接收者真正得到所需要的加密电子货币。接下来整个传输链条上的每一个连接者都用同样的“条件原像”去“托管确认”属于自己的“托管”交易，最终每个连接者都收到自己应得的资产价值。 一个值得注意的细节就是：各个“连接者”在创建自己发出的“托管”交易时，设置的超时时间一定要小于自己收到的“托管”交易里所设置的超时时间，从而自己在得到条件的原像时，有时间去执行自己收到的“托管”交易的确认操作，否则会出现自己创建的“托管”交易被接收方或者其它的连接者确认，但自己来不及去确认“属于”自己的“托管”交易，从而造成损失。换句话说，在“账本B”上把资产转移给了另外一个账户，在“账本A”上未确认到对应的资产，造成资产损失。 4.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 步骤 &nbsp;&nbsp;&nbsp; 我们使用本文开头提出的场景来描述整个交易的详细步骤： 对象：发送方--Alice，接收方--Bob, 连接者—Cot。 账本关系：Alice拥有bitcoin的账户， Bob拥有ripple的账户， Cot拥有bitcoin与ripple账户。 场景：Alice要从网上购买Bob的笔记本电脑，定价为29230个ripple币。 1.&nbsp; Alice通过即时通讯软件或者其它通讯手段，得到Bob提供的一个“共享密码”。通讯一定要以加密方式进行，使得在沟通后，只有Alice与Bob知道这个“共享密码”；同时Bob会告诉Alice自己在ILP网络中对应的唯一地址，例如g.ripple.&nbsp;rHCvhtqhXuBvWt5g79gyXfpG8VcrvUm9E9。 2.&nbsp; Alice去向Cot询价，查询自己想发送29230个ripple币需要多个少BTC，此时Cot会按实时的BTC与ripple行情算出需要1个比特币，同时Cot会多收0.00001个BTC作为手续费，最终Alice得到的询价结果为:需要向Cot支付1.00001个BTC。 3.&nbsp; Alice按ILP规定的消息格式生成所需要的ILP包，ILP包里指明目标地址为Cot,同时基于ILP包的私有内容与“共享密码”生成一个“条件原像”，对“条件原像”进行哈希散列，得到一个“托管”交易的“条件”。 4.&nbsp; Alice在Bitcoin账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，同时设置ILP包。 5.&nbsp; Cot在Bitcoin上监测到一个涉及自己的“托管”创建操作。 6.&nbsp; Cot解析ILP包，计算出自己应该向Bob转29230个ripple币，同时修改ILP中的目标地址为Bob。 7.&nbsp; Cot在ripple账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，此超时时间要小于步骤4中的超时时间，同时设置ILP包。 8.&nbsp; Bob在ripple上监测到一个涉及自己的“托管”创建操作。 9.&nbsp; Bob解析ILP包,用自己的“共享密码”及ILP包里的私有内容生成一个“条件原像”及对应的“条件”。通过对比“托管”创建交易里携带的“条件”与自己生成的是否相同，及核实“托管”交易中指定的资产数量是否是29230，来确认“托管”交易：接收或拒绝。我们这里假定接收。 10. Bob在ripple账本系统上发起一个“托管”确认操作，设置上“条件原像”，ripple账本上的“托管”交易完成，Bob收到29230的ripple币 11. Cot在ripple上监测到一个涉及自己的“托管”确认操作。 12. Cot分析“托管”确认操作的内容，得到“条件原像”。 13. Cot在bitcoin账本系统上发起一个“托管”确认操作，设置上“条件原像”，bitcoin账本上的“托管”交易完成，Cot收到1.00001个BTC。 14. Cot在bitcoin上监测到一个涉及自己的“托管”确认操作。 4.3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 托管 从交易流程中我们可以看到，ILP是利用各个账本所提供的“托管”功能进行各子交易的实现。 从图中我们可以看到，“托管”交易包含四个主要步骤&nbsp; 1.&nbsp; 准备：此时什么事情都没发生，只进行了必要数据的准备。 2.&nbsp; 创建：隶属于一个“账本”系统上的某个账户的资产被“托管”。 3.&nbsp; 确认：“托管”交易完成，资产发生转移，从“账本”系统内的一个账户转移到了另外一个账户。 4.&nbsp; 拒绝：“托管”交易被取消，资产回到“账本”系统的源账户。 &nbsp; 托管功能的特点主要有以下几个方面： 1.&nbsp; “托管”交易被创建后，发送方的资产并未真正转移。 2.&nbsp; “托管”交易不能被撤销或者在一定时间内不能撤销。 3.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以使得“托管”交易被确认，不必要发送方去执行“托管”交易的最终确认操作。 4.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以拒绝“托管”交易，不必要发送方去执行“托管”交易的拒绝操作。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “托管”交易可以设置超时时间，在规定时间内无人进行“确认”操作或者“拒绝”操作，“托管”交易自动失效。 &nbsp; “托管”交易是ILP实现的前提条件，实现“托管”的方式多种多样，可以是“账本”本身具有的功能，也可以是通过双方信任的第三方来代替实现。只有通过“托管”的方式，才能保证各方的利益不受侵害。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 安全 &nbsp;&nbsp;&nbsp;&nbsp; ILP用了一种带“条件”的交易来保证资产价值在各个“账本”系统之间传递时的安全，发送方用一种加密证明来保证发出去的资产要么被接收方接收，要么返回到发送方的账户。在整个过程中。连接者可能会遭受一定的损失，但是此风险基本可控，风险只与连接者选用的账本系统及直接连接的节点有关。 5.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者 在ILP协议中，连接者是一个重要的角色，支撑起整个跨链网络，使得跨链的资产交换得以正常进行。连接者之所以有积极性是因为在提供资产转换的过程中会收取一定的费用，像做市商时收取的佣金一样来获得收益。 但在这个过程中连接者是有一定的风险的，当连接者发出去的“托管”交易被成功确认，但是自己没有及时去确认自己收到的那个“托管”交易，这样本该发给自己的资产就会返回到源账户的地址，造成一定的损失。 当连接者未能及时确认发往自己的托管的交易时，只能靠发送方再次发送带有同样执行“条件”的同样的“托管”交易过来，当连接者拿到这个“托管”交易时，用上次记下来的“条件原像”去确认这个新的交易。 要想让发送方愿意重复再发送已经失效的交易，就需要给这样做的发送方一定的奖励，比如降低佣金、优先进行资产转换等。 5.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 问题 1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会在没有确认涉及自己的“托管”交易时，泄露“条件原像”？ 如果接收方正常的话，是不会有此现象发生，因为这样自己的权益不会被保证，会造成发送方已经发送，接收方收不到资产的情况，这种情况下接收方要承担责任。 2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会只把对方的“托管”交易确认，却不公布“条件原像”？ 不会，“托管”确认交易的必要参数之一就是“条件原像”，只要“托管”交易被确 认，“账本”系统上就可以查看此交易，从而得到“条件原像”。 3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者在未来得及确认涉及自己的“托管”交易时，同时发送方又不再次发送，怎么办？ 没办法，确实无法回避此问题。 4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 发送方与接收方之间有多个连接者的情况下，如果第一个连接者先于第二个连接者拿到了“条件原像”，是否会给第二个连接者造成损失？ 不会，因为第一个连接者创建的“托管”交易在一定时间内不能取消，只要在超时 时间内第二个连接者拿到了“条件原像”，就可以确认涉及自己的“托管”交易。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 谁可以做连接者？ 任何拥有2个以上“账本”系统账号的个人都可以做连接者。 6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 核心 纵观本文，大家已经发现了ILP并未创建一个统一的“账本”系统，也未要求参与的各方去信任任何个人或者机构，而是依靠现有的、已经存在的“托管”交易来保证各方的利益，那ILP事实是做了什么事呢？ ILP提出了一种跨链资产转移的方法，但是其首先是一个协议，协议的核心在于以下两点： 1.&nbsp; 确定了各个“账本”系统上的每个账户的地址规则，即通过层级关系来确定某一个账号是属于某个范围内某个账本上的。 例如 g.ripple.bob，表示公链ripple上的一个账户bob 2.&nbsp; 定义了在跨链交易时的消息传递格式，使得发送方、接收方、连接者之间可以用同样的消息格式进行信息的传递，用以确认收到消息及得到自己的目标地址。 &nbsp;&nbsp; 核心点一使得交易流程中的各个子交易能确定转移的账户，核心点二使得各方采用统一的格式进行消息传递。&nbsp;&nbsp; 7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 应用场景 1.&nbsp; 只拥有加密电子货币A的情况下以加密电子货币B的形式进行支付； 2.&nbsp; 拥有不同加密电子货币的账户，想在隶属于不同“账本”的账户之间进行货币的价值转换； 3.&nbsp; 同一集团下不同私有链之间进行同类型货币的价值互换。 &nbsp; 8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 小结 本文系统介绍了Interledger protocal，同时以实例的形式完整说明了整个ILP交易的详细流程，同时对交易过程中的安全性能进行了深入分析，针对ILP的技术特点，本文也给出了它的一些典型应用场景。 博主QQ: 122209017 阅读更多" />
<meta property="og:description" content="特别声明： 本文具有较强原创性和先导性，在此只做笔记使用，严禁任何转载和引用， 随着区块链网络广泛的出现，在不同的网络之间实现加密电子货币的价值转换的需求变得旺盛，作为价值网络核心的跨链技术从而变得越来越重要。本文详细分析了瑞波（ripple）提出的Interledger Protocal，说明协议的核心点及使用方法，同时结合Interledger Protocal的优势列出一定的应用场景。 1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 背景 自比特币诞生以来，加密数字货币的区块链网络越来越多，形成了蓬勃发展之势。但是在不同的区块链之间进行价值转移和交换，就会碰到各种各样的问题。比如Alice有“比特币”，想通过“比特币”购买Bob一个笔记本电脑，笔记本电脑以“瑞波币”来定价，不接受“比特币”。这时Alice就得想办法通过一定的兑换，将自己手中的“比特币”换成“瑞波币”，再向Bob进行支付。这笔交易的过程应该是：首先Alice把“比特币”卖出得到USD，然后再用USD买入“瑞波币”，在这个过程中会有一个问题----币价稳定性，币价不稳定将会导致价值损耗，同时交易过程也很繁琐，周期过长。正是针对这样的问题，ripple提出了一种跨链价值传输的技术协议InterLedger Protocal（以下简称ILP）。 2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 简介 ILP创建了这样一个系统，在这个系统中，两个不同的账本系统可以通过第三方“连接器”来互相自由地转换货币。账本系统无需去信任“连接器”，因为该协议采用密码算法为这两个账本系统和连接器创建资金托管，当所有参与方对资金达成共识时，便可相互交易。ILP移除了交易参与者所需的信任，连接器不会丢失或窃取资金，这意味着，这种交易无需得到法律合同的保护和过多的审核，大大降低了门槛。 ILP协议的核心思想在于：“账本”提供的第三方，会向发送者保证，他们的资金只有在“账本”收到证明，且接收方已经收到支付时，才将资金转给连接者；第三方也同时也保证连接者，一旦他们完成了协议的最后部分，他们就会收到发送方的资金。 区块链从技术上是去中心化数据库和分布式账本技术，从商业层面则是价值网络，在这个价值网络中，连接的有效节点越多、越分布，可能产生的价值叠加会越大。区块链是价值网络空间的核心基础设施，为了让这种基础设施得到互联互通，自由进行传值转换，我们需要跨链技术，对不同区块链进行连接和扩展，构建价值网络的高速公路。 Interledger协议（ITL）是支付系统间支付协议。协议于2015年10月由Ripple引入。 ITL支持分类账之间的安全转账，并允许任何账户在两个分类账上的人建立账户之间的连接。它使用分类账提供的托管 - 有条件的资金锁定 - 允许通过不受信任的连接器进行安全支付。可以组成连接以支持任何分类帐之间的支付，从而创建流动性或插入者的全球图。 Interledger协议不依赖任何全球协调系统或分类账来处理支付 - 集中式或分散式。ITL降低了促进插入支付的障碍。连接器竞争提供最佳速率和速度。该协议可以扩展以处理无限的支付量，只需添加更多连接器和分类帐即可。 将连接器组装成链可以在任何分类帐之间进行支付，并为小型或新型支付系统提供与最成熟系统相同的网络效果。这可以使每件有价物品在任何地方消费 - 从货币到商品，计算资源和社会信用。 Ripple公司首席技术官Stefan Thomas在10月份表示：“这将是所有分类账的重要组成部分，并将这些差异摘录出来。”&nbsp;“我们正在努力创建一个全球支付标准。” 总帐提供的托管服务通过隔离每个参与者免受其他参与付款的人员的失败或恶意行为风险，从而实现安全的互联网付款。所有参与者只有在预定条件得到满足时才依靠其分类账托管资金并释放它们。 发件人通过他们的账簿确保他们的资金只有在收到收款人已收到付款的不可否认的确认后才能转账。收款人通过分类账保证他们在提供这种确认时会得到报酬。 加密签名是分类账安全验证转账托管的外部条件结果的简单方法。如果付款成功，或者退还其托管资金，付款的发件人可以保证收件人收到加密签名的收据。 “现在银行，企业和其他公司使用不同类型的分类账和支付系统来处理不同的应用。预计没有单个系统或分类帐可以处理全球付款量或处理每个需求和用例。拥有如此众多解决方案的美妙之处在于，每个分类账可以非常好地服务于不同的用例，“Stephan Thomas在接受PYMNTS采访时解释道。“Interledger协议旨在允许所有这些分类账协同工作。它是一个免费的，开放源代码和中性的Web协议，它使这些不同分类帐之间的互操作性能够提供无限的可扩展性和灵活性。这提高了每个分类账与其他分类账的定制方案的能力。“ Interledger协议具有两种执行付款的模式 - 原子模式和通用模式。该协议的原子模式为支付链提供了原子性，参与者可以在这些链中就一组公证人达成一致。通用模式使用理性行为者的激励手段，在不参与任何机构或系统的参与者之间进行实际支付。 Ripple于2012年发布并基于分布式开源Internet协议，共识分类帐和本地货币称为XRP（涟漪）的Ripple协议（Ripple）经常与Interledger协议混淆。 然而，Interledger协议与Ripple共识分类账没有任何关系。这是一个常见的误解，因为支付社区中的许多人对Ripple有先入为主的想法，而且在ITL和Ripple上都没有足够的信息。此外，Ripple工程师发布Interledged协议以及Ripple协议。 Ripple的核心是以分类账为基础，该分类账采用共识流程，允许在分布式流程中进行支付，交换和汇款。截至2014年，Ripple是继比特币之后按市值计算的第二大数字货币。 当Interledger协议的想法首次发布时，它发现了像微软和万维网联盟这样的知名公司的支持。据Stefan Thomas称，当银行拒绝使用Ripple时，该公司首先遇到了ITL的想法。他们不喜欢分类帐的半公开性质，这可能使他们的业务可以被外部人士接入。他解释说，银行唯一能做的就是“分离”Ripple的代码并创建自己的内部系统。然而，正如微软公司的Marly Gray所承认的那样，“如果仅仅在一个单一的组织内使用区块链，它本质上是毫无价值的”。 正如斯蒂芬·托马斯所说，现在企业往往需要在他们开展业务的外国国家预先注资银行账户，以节省货币交易的时间和金钱。这有效地迫使他们以当地货币在世界各地合并资本，以解决孤立的支付生态系统和几天的结算时间。因此，过时的支付基础设施会给银行及其企业客户带来额外成本，并且这种预先资金账户的需求会导致货币账户停滞并带来高额的机会成本。 “ILP帮助互联支付生态系统，消除这些低效率，并使企业能够根据需要进行支付，而不必预先资助账户。这使得他们可以在其他地方分配运营资金，并以全新的方式使用其资本，“托马斯表示，意大利国际贸易法可以在跨境结算方面发挥作用。 由于桑坦德集团投资了数百万美元，&nbsp;Interledger协议的概念得以发展。&nbsp;西班牙银行集团是市场价值最大的欧元区银行，也是市值最大的全球银行之一，他们一定相信Ripple的想法。 Santander InnoVentures的执行合伙人Mariano Belinky表示，Ripple的技术可以彻底改变银行业的基础设施。“Ripple拥有解决许多情况的人才，技术和动力，我们正在积极探索在银行内部应用Ripple技术的最佳方式和方式，”他说。 根据托马斯的说法，ITL基于过去一年里在Ripple试点项目的大型和小型零售和商业银行的广泛客户反馈。 他认为，银行将首先成为Interledged协议的采用者，并将其用于跨境解决方案，如他们已经熟悉的Ripple协议，使他们能够跨越国界和跨不同的分类账高效地进行私人交易。就像ITL跨越银行到银行结算的技术差异一样，它可以连接不兼容的网络和移动支付系统。 该公司计划发布具有ILP功能的Ripple版本，以实现银行要求的关键功能，如私人交易，无限可扩展性以及以任何货币计价的能力。 3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 账本 &nbsp;&nbsp; 各“账本”要想利用ILP技术与其它区块链或者“账本”进行价值转换，就要满足一定的基础条件，才能更好地使自己发行的代币与其它电子货币币进行交换，从而易被大众接受。 &nbsp;&nbsp; 1.&nbsp; 必须要支持自己“账本”所管理下的一个账户向自己账本所管理下另外一个账户的转账操作； 2.&nbsp; 必须要支持托管式的交易操作，该类型的交易需要两个必要参数：一个执行“托管”交易的“原像条件”及一个“超时时间”； 3.&nbsp; 任何用户，不局限于“托管”交易的创建者，在提供“托管”交易的“原像条件”时，就可以决定“托管”交易是被执行还是被拒绝； 4.&nbsp; 如果“托管”交易创建后超时，“托管”交易就会自动失效，“托管”交易里所托管的货币会重新进入“托管”交易的创建者账户； 5.&nbsp; “账本”所支持的交易需要具有携带简短消息的能力； 6.&nbsp; “账本”支持事件通知功能，使得各方能及时知道有一笔针对自己的“托管”交易。 4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 流程 4.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 概述 整个交易流程分成“发送方---&gt;接收方”与“接收方---&gt;发送方”两个主流程。每个流程又是由发生在各个“账本”上的各个子交易（“托管创建”与“托管确认”）组成。“发送方---&gt;接收方”流程全部是“托管”的创建动作，“接收方---&gt;发送方”则全由“托管”的确认动作组成。 从图中我们可以了解到在接收方对“账本N”上的“托管”交易进行确认前，所有“账本”上被创建的“托管”交易并未被确认，些时每一个“账本”上“托管”交易里指定的源账户并未真正将自己的资产转移出去，而是由“账本”系统进行了托管。只有当接收方进行确认后，在“接收方---&gt;发送方”的返回流程中，各个“托管”交易才被确认，此时各个“账本”的“托管”交易里指定的目标账户才真正得到源账户的资产，资产价值真正发生转移。 在交易的整个链条过程中，每一个环节上的交易在被确认之前都是处于“托管”状态，并没有发生价值转移。即使是连接者去破坏交易，比如说将交易发往另外的地址，发送者也不会有损失，因为最后托管的交易不会得到执行，超时时间条件达成后，交易中的资产会再返回给源账户。 当接收者收到一个涉及自己账户的“托管”交易的通知时，接收者会确认交易细节从而确定交易是否正确，然后提供“托管”交易所指定条件的原像，向“账本”系统发出“托管确认”操作，接收者真正得到所需要的加密电子货币。接下来整个传输链条上的每一个连接者都用同样的“条件原像”去“托管确认”属于自己的“托管”交易，最终每个连接者都收到自己应得的资产价值。 一个值得注意的细节就是：各个“连接者”在创建自己发出的“托管”交易时，设置的超时时间一定要小于自己收到的“托管”交易里所设置的超时时间，从而自己在得到条件的原像时，有时间去执行自己收到的“托管”交易的确认操作，否则会出现自己创建的“托管”交易被接收方或者其它的连接者确认，但自己来不及去确认“属于”自己的“托管”交易，从而造成损失。换句话说，在“账本B”上把资产转移给了另外一个账户，在“账本A”上未确认到对应的资产，造成资产损失。 4.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 步骤 &nbsp;&nbsp;&nbsp; 我们使用本文开头提出的场景来描述整个交易的详细步骤： 对象：发送方--Alice，接收方--Bob, 连接者—Cot。 账本关系：Alice拥有bitcoin的账户， Bob拥有ripple的账户， Cot拥有bitcoin与ripple账户。 场景：Alice要从网上购买Bob的笔记本电脑，定价为29230个ripple币。 1.&nbsp; Alice通过即时通讯软件或者其它通讯手段，得到Bob提供的一个“共享密码”。通讯一定要以加密方式进行，使得在沟通后，只有Alice与Bob知道这个“共享密码”；同时Bob会告诉Alice自己在ILP网络中对应的唯一地址，例如g.ripple.&nbsp;rHCvhtqhXuBvWt5g79gyXfpG8VcrvUm9E9。 2.&nbsp; Alice去向Cot询价，查询自己想发送29230个ripple币需要多个少BTC，此时Cot会按实时的BTC与ripple行情算出需要1个比特币，同时Cot会多收0.00001个BTC作为手续费，最终Alice得到的询价结果为:需要向Cot支付1.00001个BTC。 3.&nbsp; Alice按ILP规定的消息格式生成所需要的ILP包，ILP包里指明目标地址为Cot,同时基于ILP包的私有内容与“共享密码”生成一个“条件原像”，对“条件原像”进行哈希散列，得到一个“托管”交易的“条件”。 4.&nbsp; Alice在Bitcoin账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，同时设置ILP包。 5.&nbsp; Cot在Bitcoin上监测到一个涉及自己的“托管”创建操作。 6.&nbsp; Cot解析ILP包，计算出自己应该向Bob转29230个ripple币，同时修改ILP中的目标地址为Bob。 7.&nbsp; Cot在ripple账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，此超时时间要小于步骤4中的超时时间，同时设置ILP包。 8.&nbsp; Bob在ripple上监测到一个涉及自己的“托管”创建操作。 9.&nbsp; Bob解析ILP包,用自己的“共享密码”及ILP包里的私有内容生成一个“条件原像”及对应的“条件”。通过对比“托管”创建交易里携带的“条件”与自己生成的是否相同，及核实“托管”交易中指定的资产数量是否是29230，来确认“托管”交易：接收或拒绝。我们这里假定接收。 10. Bob在ripple账本系统上发起一个“托管”确认操作，设置上“条件原像”，ripple账本上的“托管”交易完成，Bob收到29230的ripple币 11. Cot在ripple上监测到一个涉及自己的“托管”确认操作。 12. Cot分析“托管”确认操作的内容，得到“条件原像”。 13. Cot在bitcoin账本系统上发起一个“托管”确认操作，设置上“条件原像”，bitcoin账本上的“托管”交易完成，Cot收到1.00001个BTC。 14. Cot在bitcoin上监测到一个涉及自己的“托管”确认操作。 4.3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 托管 从交易流程中我们可以看到，ILP是利用各个账本所提供的“托管”功能进行各子交易的实现。 从图中我们可以看到，“托管”交易包含四个主要步骤&nbsp; 1.&nbsp; 准备：此时什么事情都没发生，只进行了必要数据的准备。 2.&nbsp; 创建：隶属于一个“账本”系统上的某个账户的资产被“托管”。 3.&nbsp; 确认：“托管”交易完成，资产发生转移，从“账本”系统内的一个账户转移到了另外一个账户。 4.&nbsp; 拒绝：“托管”交易被取消，资产回到“账本”系统的源账户。 &nbsp; 托管功能的特点主要有以下几个方面： 1.&nbsp; “托管”交易被创建后，发送方的资产并未真正转移。 2.&nbsp; “托管”交易不能被撤销或者在一定时间内不能撤销。 3.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以使得“托管”交易被确认，不必要发送方去执行“托管”交易的最终确认操作。 4.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以拒绝“托管”交易，不必要发送方去执行“托管”交易的拒绝操作。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “托管”交易可以设置超时时间，在规定时间内无人进行“确认”操作或者“拒绝”操作，“托管”交易自动失效。 &nbsp; “托管”交易是ILP实现的前提条件，实现“托管”的方式多种多样，可以是“账本”本身具有的功能，也可以是通过双方信任的第三方来代替实现。只有通过“托管”的方式，才能保证各方的利益不受侵害。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 安全 &nbsp;&nbsp;&nbsp;&nbsp; ILP用了一种带“条件”的交易来保证资产价值在各个“账本”系统之间传递时的安全，发送方用一种加密证明来保证发出去的资产要么被接收方接收，要么返回到发送方的账户。在整个过程中。连接者可能会遭受一定的损失，但是此风险基本可控，风险只与连接者选用的账本系统及直接连接的节点有关。 5.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者 在ILP协议中，连接者是一个重要的角色，支撑起整个跨链网络，使得跨链的资产交换得以正常进行。连接者之所以有积极性是因为在提供资产转换的过程中会收取一定的费用，像做市商时收取的佣金一样来获得收益。 但在这个过程中连接者是有一定的风险的，当连接者发出去的“托管”交易被成功确认，但是自己没有及时去确认自己收到的那个“托管”交易，这样本该发给自己的资产就会返回到源账户的地址，造成一定的损失。 当连接者未能及时确认发往自己的托管的交易时，只能靠发送方再次发送带有同样执行“条件”的同样的“托管”交易过来，当连接者拿到这个“托管”交易时，用上次记下来的“条件原像”去确认这个新的交易。 要想让发送方愿意重复再发送已经失效的交易，就需要给这样做的发送方一定的奖励，比如降低佣金、优先进行资产转换等。 5.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 问题 1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会在没有确认涉及自己的“托管”交易时，泄露“条件原像”？ 如果接收方正常的话，是不会有此现象发生，因为这样自己的权益不会被保证，会造成发送方已经发送，接收方收不到资产的情况，这种情况下接收方要承担责任。 2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会只把对方的“托管”交易确认，却不公布“条件原像”？ 不会，“托管”确认交易的必要参数之一就是“条件原像”，只要“托管”交易被确 认，“账本”系统上就可以查看此交易，从而得到“条件原像”。 3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者在未来得及确认涉及自己的“托管”交易时，同时发送方又不再次发送，怎么办？ 没办法，确实无法回避此问题。 4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 发送方与接收方之间有多个连接者的情况下，如果第一个连接者先于第二个连接者拿到了“条件原像”，是否会给第二个连接者造成损失？ 不会，因为第一个连接者创建的“托管”交易在一定时间内不能取消，只要在超时 时间内第二个连接者拿到了“条件原像”，就可以确认涉及自己的“托管”交易。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 谁可以做连接者？ 任何拥有2个以上“账本”系统账号的个人都可以做连接者。 6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 核心 纵观本文，大家已经发现了ILP并未创建一个统一的“账本”系统，也未要求参与的各方去信任任何个人或者机构，而是依靠现有的、已经存在的“托管”交易来保证各方的利益，那ILP事实是做了什么事呢？ ILP提出了一种跨链资产转移的方法，但是其首先是一个协议，协议的核心在于以下两点： 1.&nbsp; 确定了各个“账本”系统上的每个账户的地址规则，即通过层级关系来确定某一个账号是属于某个范围内某个账本上的。 例如 g.ripple.bob，表示公链ripple上的一个账户bob 2.&nbsp; 定义了在跨链交易时的消息传递格式，使得发送方、接收方、连接者之间可以用同样的消息格式进行信息的传递，用以确认收到消息及得到自己的目标地址。 &nbsp;&nbsp; 核心点一使得交易流程中的各个子交易能确定转移的账户，核心点二使得各方采用统一的格式进行消息传递。&nbsp;&nbsp; 7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 应用场景 1.&nbsp; 只拥有加密电子货币A的情况下以加密电子货币B的形式进行支付； 2.&nbsp; 拥有不同加密电子货币的账户，想在隶属于不同“账本”的账户之间进行货币的价值转换； 3.&nbsp; 同一集团下不同私有链之间进行同类型货币的价值互换。 &nbsp; 8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 小结 本文系统介绍了Interledger protocal，同时以实例的形式完整说明了整个ILP交易的详细流程，同时对交易过程中的安全性能进行了深入分析，针对ILP的技术特点，本文也给出了它的一些典型应用场景。 博主QQ: 122209017 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/03/16/480bcccc07f6caf7cb4e7a02d0ef4623.html" />
<meta property="og:url" content="https://mlh.app/2018/03/16/480bcccc07f6caf7cb4e7a02d0ef4623.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-16T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"特别声明： 本文具有较强原创性和先导性，在此只做笔记使用，严禁任何转载和引用， 随着区块链网络广泛的出现，在不同的网络之间实现加密电子货币的价值转换的需求变得旺盛，作为价值网络核心的跨链技术从而变得越来越重要。本文详细分析了瑞波（ripple）提出的Interledger Protocal，说明协议的核心点及使用方法，同时结合Interledger Protocal的优势列出一定的应用场景。 1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 背景 自比特币诞生以来，加密数字货币的区块链网络越来越多，形成了蓬勃发展之势。但是在不同的区块链之间进行价值转移和交换，就会碰到各种各样的问题。比如Alice有“比特币”，想通过“比特币”购买Bob一个笔记本电脑，笔记本电脑以“瑞波币”来定价，不接受“比特币”。这时Alice就得想办法通过一定的兑换，将自己手中的“比特币”换成“瑞波币”，再向Bob进行支付。这笔交易的过程应该是：首先Alice把“比特币”卖出得到USD，然后再用USD买入“瑞波币”，在这个过程中会有一个问题----币价稳定性，币价不稳定将会导致价值损耗，同时交易过程也很繁琐，周期过长。正是针对这样的问题，ripple提出了一种跨链价值传输的技术协议InterLedger Protocal（以下简称ILP）。 2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 简介 ILP创建了这样一个系统，在这个系统中，两个不同的账本系统可以通过第三方“连接器”来互相自由地转换货币。账本系统无需去信任“连接器”，因为该协议采用密码算法为这两个账本系统和连接器创建资金托管，当所有参与方对资金达成共识时，便可相互交易。ILP移除了交易参与者所需的信任，连接器不会丢失或窃取资金，这意味着，这种交易无需得到法律合同的保护和过多的审核，大大降低了门槛。 ILP协议的核心思想在于：“账本”提供的第三方，会向发送者保证，他们的资金只有在“账本”收到证明，且接收方已经收到支付时，才将资金转给连接者；第三方也同时也保证连接者，一旦他们完成了协议的最后部分，他们就会收到发送方的资金。 区块链从技术上是去中心化数据库和分布式账本技术，从商业层面则是价值网络，在这个价值网络中，连接的有效节点越多、越分布，可能产生的价值叠加会越大。区块链是价值网络空间的核心基础设施，为了让这种基础设施得到互联互通，自由进行传值转换，我们需要跨链技术，对不同区块链进行连接和扩展，构建价值网络的高速公路。 Interledger协议（ITL）是支付系统间支付协议。协议于2015年10月由Ripple引入。 ITL支持分类账之间的安全转账，并允许任何账户在两个分类账上的人建立账户之间的连接。它使用分类账提供的托管 - 有条件的资金锁定 - 允许通过不受信任的连接器进行安全支付。可以组成连接以支持任何分类帐之间的支付，从而创建流动性或插入者的全球图。 Interledger协议不依赖任何全球协调系统或分类账来处理支付 - 集中式或分散式。ITL降低了促进插入支付的障碍。连接器竞争提供最佳速率和速度。该协议可以扩展以处理无限的支付量，只需添加更多连接器和分类帐即可。 将连接器组装成链可以在任何分类帐之间进行支付，并为小型或新型支付系统提供与最成熟系统相同的网络效果。这可以使每件有价物品在任何地方消费 - 从货币到商品，计算资源和社会信用。 Ripple公司首席技术官Stefan Thomas在10月份表示：“这将是所有分类账的重要组成部分，并将这些差异摘录出来。”&nbsp;“我们正在努力创建一个全球支付标准。” 总帐提供的托管服务通过隔离每个参与者免受其他参与付款的人员的失败或恶意行为风险，从而实现安全的互联网付款。所有参与者只有在预定条件得到满足时才依靠其分类账托管资金并释放它们。 发件人通过他们的账簿确保他们的资金只有在收到收款人已收到付款的不可否认的确认后才能转账。收款人通过分类账保证他们在提供这种确认时会得到报酬。 加密签名是分类账安全验证转账托管的外部条件结果的简单方法。如果付款成功，或者退还其托管资金，付款的发件人可以保证收件人收到加密签名的收据。 “现在银行，企业和其他公司使用不同类型的分类账和支付系统来处理不同的应用。预计没有单个系统或分类帐可以处理全球付款量或处理每个需求和用例。拥有如此众多解决方案的美妙之处在于，每个分类账可以非常好地服务于不同的用例，“Stephan Thomas在接受PYMNTS采访时解释道。“Interledger协议旨在允许所有这些分类账协同工作。它是一个免费的，开放源代码和中性的Web协议，它使这些不同分类帐之间的互操作性能够提供无限的可扩展性和灵活性。这提高了每个分类账与其他分类账的定制方案的能力。“ Interledger协议具有两种执行付款的模式 - 原子模式和通用模式。该协议的原子模式为支付链提供了原子性，参与者可以在这些链中就一组公证人达成一致。通用模式使用理性行为者的激励手段，在不参与任何机构或系统的参与者之间进行实际支付。 Ripple于2012年发布并基于分布式开源Internet协议，共识分类帐和本地货币称为XRP（涟漪）的Ripple协议（Ripple）经常与Interledger协议混淆。 然而，Interledger协议与Ripple共识分类账没有任何关系。这是一个常见的误解，因为支付社区中的许多人对Ripple有先入为主的想法，而且在ITL和Ripple上都没有足够的信息。此外，Ripple工程师发布Interledged协议以及Ripple协议。 Ripple的核心是以分类账为基础，该分类账采用共识流程，允许在分布式流程中进行支付，交换和汇款。截至2014年，Ripple是继比特币之后按市值计算的第二大数字货币。 当Interledger协议的想法首次发布时，它发现了像微软和万维网联盟这样的知名公司的支持。据Stefan Thomas称，当银行拒绝使用Ripple时，该公司首先遇到了ITL的想法。他们不喜欢分类帐的半公开性质，这可能使他们的业务可以被外部人士接入。他解释说，银行唯一能做的就是“分离”Ripple的代码并创建自己的内部系统。然而，正如微软公司的Marly Gray所承认的那样，“如果仅仅在一个单一的组织内使用区块链，它本质上是毫无价值的”。 正如斯蒂芬·托马斯所说，现在企业往往需要在他们开展业务的外国国家预先注资银行账户，以节省货币交易的时间和金钱。这有效地迫使他们以当地货币在世界各地合并资本，以解决孤立的支付生态系统和几天的结算时间。因此，过时的支付基础设施会给银行及其企业客户带来额外成本，并且这种预先资金账户的需求会导致货币账户停滞并带来高额的机会成本。 “ILP帮助互联支付生态系统，消除这些低效率，并使企业能够根据需要进行支付，而不必预先资助账户。这使得他们可以在其他地方分配运营资金，并以全新的方式使用其资本，“托马斯表示，意大利国际贸易法可以在跨境结算方面发挥作用。 由于桑坦德集团投资了数百万美元，&nbsp;Interledger协议的概念得以发展。&nbsp;西班牙银行集团是市场价值最大的欧元区银行，也是市值最大的全球银行之一，他们一定相信Ripple的想法。 Santander InnoVentures的执行合伙人Mariano Belinky表示，Ripple的技术可以彻底改变银行业的基础设施。“Ripple拥有解决许多情况的人才，技术和动力，我们正在积极探索在银行内部应用Ripple技术的最佳方式和方式，”他说。 根据托马斯的说法，ITL基于过去一年里在Ripple试点项目的大型和小型零售和商业银行的广泛客户反馈。 他认为，银行将首先成为Interledged协议的采用者，并将其用于跨境解决方案，如他们已经熟悉的Ripple协议，使他们能够跨越国界和跨不同的分类账高效地进行私人交易。就像ITL跨越银行到银行结算的技术差异一样，它可以连接不兼容的网络和移动支付系统。 该公司计划发布具有ILP功能的Ripple版本，以实现银行要求的关键功能，如私人交易，无限可扩展性以及以任何货币计价的能力。 3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 账本 &nbsp;&nbsp; 各“账本”要想利用ILP技术与其它区块链或者“账本”进行价值转换，就要满足一定的基础条件，才能更好地使自己发行的代币与其它电子货币币进行交换，从而易被大众接受。 &nbsp;&nbsp; 1.&nbsp; 必须要支持自己“账本”所管理下的一个账户向自己账本所管理下另外一个账户的转账操作； 2.&nbsp; 必须要支持托管式的交易操作，该类型的交易需要两个必要参数：一个执行“托管”交易的“原像条件”及一个“超时时间”； 3.&nbsp; 任何用户，不局限于“托管”交易的创建者，在提供“托管”交易的“原像条件”时，就可以决定“托管”交易是被执行还是被拒绝； 4.&nbsp; 如果“托管”交易创建后超时，“托管”交易就会自动失效，“托管”交易里所托管的货币会重新进入“托管”交易的创建者账户； 5.&nbsp; “账本”所支持的交易需要具有携带简短消息的能力； 6.&nbsp; “账本”支持事件通知功能，使得各方能及时知道有一笔针对自己的“托管”交易。 4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 流程 4.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 概述 整个交易流程分成“发送方---&gt;接收方”与“接收方---&gt;发送方”两个主流程。每个流程又是由发生在各个“账本”上的各个子交易（“托管创建”与“托管确认”）组成。“发送方---&gt;接收方”流程全部是“托管”的创建动作，“接收方---&gt;发送方”则全由“托管”的确认动作组成。 从图中我们可以了解到在接收方对“账本N”上的“托管”交易进行确认前，所有“账本”上被创建的“托管”交易并未被确认，些时每一个“账本”上“托管”交易里指定的源账户并未真正将自己的资产转移出去，而是由“账本”系统进行了托管。只有当接收方进行确认后，在“接收方---&gt;发送方”的返回流程中，各个“托管”交易才被确认，此时各个“账本”的“托管”交易里指定的目标账户才真正得到源账户的资产，资产价值真正发生转移。 在交易的整个链条过程中，每一个环节上的交易在被确认之前都是处于“托管”状态，并没有发生价值转移。即使是连接者去破坏交易，比如说将交易发往另外的地址，发送者也不会有损失，因为最后托管的交易不会得到执行，超时时间条件达成后，交易中的资产会再返回给源账户。 当接收者收到一个涉及自己账户的“托管”交易的通知时，接收者会确认交易细节从而确定交易是否正确，然后提供“托管”交易所指定条件的原像，向“账本”系统发出“托管确认”操作，接收者真正得到所需要的加密电子货币。接下来整个传输链条上的每一个连接者都用同样的“条件原像”去“托管确认”属于自己的“托管”交易，最终每个连接者都收到自己应得的资产价值。 一个值得注意的细节就是：各个“连接者”在创建自己发出的“托管”交易时，设置的超时时间一定要小于自己收到的“托管”交易里所设置的超时时间，从而自己在得到条件的原像时，有时间去执行自己收到的“托管”交易的确认操作，否则会出现自己创建的“托管”交易被接收方或者其它的连接者确认，但自己来不及去确认“属于”自己的“托管”交易，从而造成损失。换句话说，在“账本B”上把资产转移给了另外一个账户，在“账本A”上未确认到对应的资产，造成资产损失。 4.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 步骤 &nbsp;&nbsp;&nbsp; 我们使用本文开头提出的场景来描述整个交易的详细步骤： 对象：发送方--Alice，接收方--Bob, 连接者—Cot。 账本关系：Alice拥有bitcoin的账户， Bob拥有ripple的账户， Cot拥有bitcoin与ripple账户。 场景：Alice要从网上购买Bob的笔记本电脑，定价为29230个ripple币。 1.&nbsp; Alice通过即时通讯软件或者其它通讯手段，得到Bob提供的一个“共享密码”。通讯一定要以加密方式进行，使得在沟通后，只有Alice与Bob知道这个“共享密码”；同时Bob会告诉Alice自己在ILP网络中对应的唯一地址，例如g.ripple.&nbsp;rHCvhtqhXuBvWt5g79gyXfpG8VcrvUm9E9。 2.&nbsp; Alice去向Cot询价，查询自己想发送29230个ripple币需要多个少BTC，此时Cot会按实时的BTC与ripple行情算出需要1个比特币，同时Cot会多收0.00001个BTC作为手续费，最终Alice得到的询价结果为:需要向Cot支付1.00001个BTC。 3.&nbsp; Alice按ILP规定的消息格式生成所需要的ILP包，ILP包里指明目标地址为Cot,同时基于ILP包的私有内容与“共享密码”生成一个“条件原像”，对“条件原像”进行哈希散列，得到一个“托管”交易的“条件”。 4.&nbsp; Alice在Bitcoin账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，同时设置ILP包。 5.&nbsp; Cot在Bitcoin上监测到一个涉及自己的“托管”创建操作。 6.&nbsp; Cot解析ILP包，计算出自己应该向Bob转29230个ripple币，同时修改ILP中的目标地址为Bob。 7.&nbsp; Cot在ripple账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，此超时时间要小于步骤4中的超时时间，同时设置ILP包。 8.&nbsp; Bob在ripple上监测到一个涉及自己的“托管”创建操作。 9.&nbsp; Bob解析ILP包,用自己的“共享密码”及ILP包里的私有内容生成一个“条件原像”及对应的“条件”。通过对比“托管”创建交易里携带的“条件”与自己生成的是否相同，及核实“托管”交易中指定的资产数量是否是29230，来确认“托管”交易：接收或拒绝。我们这里假定接收。 10. Bob在ripple账本系统上发起一个“托管”确认操作，设置上“条件原像”，ripple账本上的“托管”交易完成，Bob收到29230的ripple币 11. Cot在ripple上监测到一个涉及自己的“托管”确认操作。 12. Cot分析“托管”确认操作的内容，得到“条件原像”。 13. Cot在bitcoin账本系统上发起一个“托管”确认操作，设置上“条件原像”，bitcoin账本上的“托管”交易完成，Cot收到1.00001个BTC。 14. Cot在bitcoin上监测到一个涉及自己的“托管”确认操作。 4.3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 托管 从交易流程中我们可以看到，ILP是利用各个账本所提供的“托管”功能进行各子交易的实现。 从图中我们可以看到，“托管”交易包含四个主要步骤&nbsp; 1.&nbsp; 准备：此时什么事情都没发生，只进行了必要数据的准备。 2.&nbsp; 创建：隶属于一个“账本”系统上的某个账户的资产被“托管”。 3.&nbsp; 确认：“托管”交易完成，资产发生转移，从“账本”系统内的一个账户转移到了另外一个账户。 4.&nbsp; 拒绝：“托管”交易被取消，资产回到“账本”系统的源账户。 &nbsp; 托管功能的特点主要有以下几个方面： 1.&nbsp; “托管”交易被创建后，发送方的资产并未真正转移。 2.&nbsp; “托管”交易不能被撤销或者在一定时间内不能撤销。 3.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以使得“托管”交易被确认，不必要发送方去执行“托管”交易的最终确认操作。 4.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以拒绝“托管”交易，不必要发送方去执行“托管”交易的拒绝操作。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “托管”交易可以设置超时时间，在规定时间内无人进行“确认”操作或者“拒绝”操作，“托管”交易自动失效。 &nbsp; “托管”交易是ILP实现的前提条件，实现“托管”的方式多种多样，可以是“账本”本身具有的功能，也可以是通过双方信任的第三方来代替实现。只有通过“托管”的方式，才能保证各方的利益不受侵害。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 安全 &nbsp;&nbsp;&nbsp;&nbsp; ILP用了一种带“条件”的交易来保证资产价值在各个“账本”系统之间传递时的安全，发送方用一种加密证明来保证发出去的资产要么被接收方接收，要么返回到发送方的账户。在整个过程中。连接者可能会遭受一定的损失，但是此风险基本可控，风险只与连接者选用的账本系统及直接连接的节点有关。 5.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者 在ILP协议中，连接者是一个重要的角色，支撑起整个跨链网络，使得跨链的资产交换得以正常进行。连接者之所以有积极性是因为在提供资产转换的过程中会收取一定的费用，像做市商时收取的佣金一样来获得收益。 但在这个过程中连接者是有一定的风险的，当连接者发出去的“托管”交易被成功确认，但是自己没有及时去确认自己收到的那个“托管”交易，这样本该发给自己的资产就会返回到源账户的地址，造成一定的损失。 当连接者未能及时确认发往自己的托管的交易时，只能靠发送方再次发送带有同样执行“条件”的同样的“托管”交易过来，当连接者拿到这个“托管”交易时，用上次记下来的“条件原像”去确认这个新的交易。 要想让发送方愿意重复再发送已经失效的交易，就需要给这样做的发送方一定的奖励，比如降低佣金、优先进行资产转换等。 5.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 问题 1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会在没有确认涉及自己的“托管”交易时，泄露“条件原像”？ 如果接收方正常的话，是不会有此现象发生，因为这样自己的权益不会被保证，会造成发送方已经发送，接收方收不到资产的情况，这种情况下接收方要承担责任。 2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会只把对方的“托管”交易确认，却不公布“条件原像”？ 不会，“托管”确认交易的必要参数之一就是“条件原像”，只要“托管”交易被确 认，“账本”系统上就可以查看此交易，从而得到“条件原像”。 3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者在未来得及确认涉及自己的“托管”交易时，同时发送方又不再次发送，怎么办？ 没办法，确实无法回避此问题。 4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 发送方与接收方之间有多个连接者的情况下，如果第一个连接者先于第二个连接者拿到了“条件原像”，是否会给第二个连接者造成损失？ 不会，因为第一个连接者创建的“托管”交易在一定时间内不能取消，只要在超时 时间内第二个连接者拿到了“条件原像”，就可以确认涉及自己的“托管”交易。 5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 谁可以做连接者？ 任何拥有2个以上“账本”系统账号的个人都可以做连接者。 6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 核心 纵观本文，大家已经发现了ILP并未创建一个统一的“账本”系统，也未要求参与的各方去信任任何个人或者机构，而是依靠现有的、已经存在的“托管”交易来保证各方的利益，那ILP事实是做了什么事呢？ ILP提出了一种跨链资产转移的方法，但是其首先是一个协议，协议的核心在于以下两点： 1.&nbsp; 确定了各个“账本”系统上的每个账户的地址规则，即通过层级关系来确定某一个账号是属于某个范围内某个账本上的。 例如 g.ripple.bob，表示公链ripple上的一个账户bob 2.&nbsp; 定义了在跨链交易时的消息传递格式，使得发送方、接收方、连接者之间可以用同样的消息格式进行信息的传递，用以确认收到消息及得到自己的目标地址。 &nbsp;&nbsp; 核心点一使得交易流程中的各个子交易能确定转移的账户，核心点二使得各方采用统一的格式进行消息传递。&nbsp;&nbsp; 7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 应用场景 1.&nbsp; 只拥有加密电子货币A的情况下以加密电子货币B的形式进行支付； 2.&nbsp; 拥有不同加密电子货币的账户，想在隶属于不同“账本”的账户之间进行货币的价值转换； 3.&nbsp; 同一集团下不同私有链之间进行同类型货币的价值互换。 &nbsp; 8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 小结 本文系统介绍了Interledger protocal，同时以实例的形式完整说明了整个ILP交易的详细流程，同时对交易过程中的安全性能进行了深入分析，针对ILP的技术特点，本文也给出了它的一些典型应用场景。 博主QQ: 122209017 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/03/16/480bcccc07f6caf7cb4e7a02d0ef4623.html","headline":"瑞波（ripple）提出的跨链技术 Interledger Protocal( ILP)详解","dateModified":"2018-03-16T00:00:00+08:00","datePublished":"2018-03-16T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/03/16/480bcccc07f6caf7cb4e7a02d0ef4623.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>瑞波（ripple）提出的跨链技术 Interledger Protocal( ILP)详解</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <div class="blog-abstract" style="line-height:28px;color:rgb(102,102,102);font-size:18px;font-style:italic;font-family:Baskerville, Georgia, 'Liberation Serif', 'Kaiti SC', STKaiti, 'AR PL UKai CN', 'AR PL UKai HK', 'AR PL UKai TW', 'AR PL UKai TW MBE', 'AR PL KaitiM GB', KaiTi, 'KaiTi_GB2312', 'TW-Kai', serif;text-align:left;background-color:rgb(255,255,255);">
   <span style="font-family:'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif;background-color:rgb(255,255,255);"><strong>特别声明： 本文具有较强原创性和先导性，<span style="color:rgb(102,102,102);font-family:'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:18px;text-align:left;background-color:rgb(255,255,255);"><em>在此只做笔记使用，</em></span>严禁任何转载和引用，</strong><br></span>
   <span style="color:rgb(79,79,79);font-size:16px;text-align:justify;font-family:'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif;">随着区块链网络广泛的出现，在不同的网络之间实现加密电子货币的价值转换的需求变得旺盛，作为价值网络核心的跨链技术从而变得越来越重要。本文详细分析了瑞波（ripple）提出的Interledger Protocal，说明协议的核心点及使用方法，同时结合Interledger Protocal的优势列出一定的应用场景。</span>
  </div>
  <div class="blog-body" style="font-family:'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif;color:rgb(61,70,77);line-height:28px;text-align:left;background-color:rgb(255,255,255);">
   <div class="BlogContent clearfix">
    <p><span style="font-size:22px;text-align:left;">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 背景</span></p>
    <p>自比特币诞生以来，加密数字货币的区块链网络越来越多，形成了蓬勃发展之势。但是在不同的区块链之间进行价值转移和交换，就会碰到各种各样的问题。比如Alice有“比特币”，想通过“比特币”购买Bob一个笔记本电脑，笔记本电脑以“瑞波币”来定价，不接受“比特币”。这时Alice就得想办法通过一定的兑换，将自己手中的“比特币”换成“瑞波币”，再向Bob进行支付。这笔交易的过程应该是：首先Alice把“比特币”卖出得到USD，然后再用USD买入“瑞波币”，在这个过程中会有一个问题----币价稳定性，币价不稳定将会导致价值损耗，同时交易过程也很繁琐，周期过长。正是针对这样的问题，ripple提出了一种跨链价值传输的技术协议InterLedger Protocal（以下简称ILP）。</p>
    <span></span>
    <h2 style="font-size:22px;font-weight:500;">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 简介</h2>
    <p>ILP创建了这样一个系统，在这个系统中，两个不同的账本系统可以通过第三方“连接器”来互相自由地转换货币。账本系统无需去信任“连接器”，因为该协议采用密码算法为这两个账本系统和连接器创建资金托管，当所有参与方对资金达成共识时，便可相互交易。ILP移除了交易参与者所需的信任，连接器不会丢失或窃取资金，这意味着，这种交易无需得到法律合同的保护和过多的审核，大大降低了门槛。</p>
    <p>ILP协议的核心思想在于：“账本”提供的第三方，会向发送者保证，他们的资金只有在“账本”收到证明，且接收方已经收到支付时，才将资金转给连接者；第三方也同时也保证连接者，一旦他们完成了协议的最后部分，他们就会收到发送方的资金。</p>
    <p>区块链从技术上是去中心化数据库和分布式账本技术，从商业层面则是价值网络，在这个价值网络中，连接的有效节点越多、越分布，可能产生的价值叠加会越大。区块链是价值网络空间的核心基础设施，为了让这种基础设施得到互联互通，自由进行传值转换，我们需要跨链技术，对不同区块链进行连接和扩展，构建价值网络的高速公路。</p>
    <p></p>
    <div class="entry-excerpt" style="border:0px;font-family:inherit;font-size:21px;font-style:inherit;vertical-align:baseline;clear:both;line-height:1.33333;">
     <p style="border:0px;font-family:inherit;font-size:21px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">Interledger协议（ITL）是支付系统间支付协议。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">协议于2015年10月由Ripple引入。</span></span></p>
    </div>
    <div class="entry-content" style="border:0px;font-family:arial, helvetica, sans;font-size:17px;vertical-align:baseline;background-color:rgb(255,255,255);color:rgb(43,43,43);text-align:left;">
     <div class="wp-caption alignnone" style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:baseline;color:rgb(118,118,118);">
      <img class="wp-image-14765" src="https://www.coinspeaker.com/guides/what-is-interledger-protocol/" alt="" style="border:0px;vertical-align:middle;background-color:rgb(0,0,0);">
      <p class="wp-caption-text" style="border:0px;font-family:inherit;font-size:12px;font-style:italic;font-weight:inherit;vertical-align:baseline;line-height:1.5;"></p>
     </div>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">ITL支持分类账之间的安全转账，并允许任何账户在两个分类账上的人建立账户之间的连接。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">它使用分类账提供的托管 - 有条件的资金锁定 - 允许通过不受信任的连接器进行安全支付。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">可以组成连接以支持任何分类帐之间的支付，从而创建流动性或插入者的全球图。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">Interledger协议不依赖任何全球协调系统或分类账来处理支付 - 集中式或分散式。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">ITL降低了促进插入支付的障碍。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">连接器竞争提供最佳速率和速度。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">该协议可以扩展以处理无限的支付量，只需添加更多连接器和分类帐即可。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">将连接器组装成链可以在任何分类帐之间进行支付，并为小型或新型支付系统提供与最成熟系统相同的网络效果。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">这可以使每件有价物品在任何地方消费 - 从货币到商品，计算资源和社会信用。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">Ripple公司首席技术官Stefan Thomas在10月份表示：“这将是所有分类账的重要组成部分，并将这些差异摘录出来。”&nbsp;</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">“我们正在努力创建一个全球支付标准。”</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">总帐提供的托管服务通过隔离每个参与者免受其他参与付款的人员的失败或恶意行为风险，从而实现安全的互联网付款。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">所有参与者只有在预定条件得到满足时才依靠其分类账托管资金并释放它们。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">发件人通过他们的账簿确保他们的资金只有在收到收款人已收到付款的不可否认的确认后才能转账。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">收款人通过分类账保证他们在提供这种确认时会得到报酬。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">加密签名是分类账安全验证转账托管的外部条件结果的简单方法。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">如果付款成功，或者退还其托管资金，付款的发件人可以保证收件人收到加密签名的收据。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">“现在银行，企业和其他公司使用不同类型的分类账和支付系统来处理不同的应用。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">预计没有单个系统或分类帐可以处理全球付款量或处理每个需求和用例。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">拥有如此众多解决方案的美妙之处在于，每个分类账可以非常好地服务于不同的用例，“Stephan Thomas在接受</span></span><a href="https://www.pymnts.com/" rel="nofollow" style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:baseline;color:rgb(0,110,151);text-decoration:underline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">PYMNTS</span></a><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">采访时解释</span><a href="https://www.pymnts.com/" rel="nofollow" style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:baseline;color:rgb(0,110,151);text-decoration:underline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">道</span></a><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">“Interledger协议旨在允许所有这些分类账协同工作。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">它是一个免费的，开放源代码和中性的Web协议，它使这些不同分类帐之间的互操作性能够提供无限的可扩展性和灵活性。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">这提高了每个分类账与其他分类账的定制方案的能力。“</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">Interledger协议具有两种执行付款的模式 - 原子模式和通用模式。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">该协议的原子模式为支付链提供了原子性，参与者可以在这些链中就一组公证人达成一致。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">通用模式使用理性行为者的激励手段，在不参与任何机构或系统的参与者之间进行实际支付。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">Ripple于2012年发布并基于分布式开源Internet协议，共识分类帐和本地货币称为XRP（涟漪）的Ripple协议（Ripple）经常与Interledger协议混淆。</span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">然而，Interledger协议与Ripple共识分类账没有任何关系。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">这是一个常见的误解，因为支付社区中的许多人对Ripple有先入为主的想法，而且在ITL和Ripple上都没有足够的信息。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">此外，Ripple工程师发布Interledged协议以及Ripple协议。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">Ripple的核心是以分类账为基础，该分类账采用共识流程，允许在分布式流程中进行支付，交换和汇款。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">截至2014年，Ripple是继比特币之后按市值计算的第二大数字货币。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">当Interledger协议的想法首次发布时，它发现了像微软和万维网联盟这样的知名公司的支持。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">据Stefan Thomas称，当银行拒绝使用Ripple时，该公司首先遇到了ITL的想法。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">他们不喜欢分类帐的半公开性质，这可能使他们的业务可以被外部人士接入。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">他解释说，银行唯一能做的就是“分离”Ripple的代码并创建自己的内部系统。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">然而，正如微软公司的Marly Gray所承认的那样，“如果仅仅在一个单一的组织内使用区块链，它本质上是毫无价值的”。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">正如斯蒂芬·托马斯所说，现在企业往往需要在他们开展业务的外国国家预先注资银行账户，以节省货币交易的时间和金钱。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">这有效地迫使他们以当地货币在世界各地合并资本，以解决孤立的支付生态系统和几天的结算时间。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">因此，过时的支付基础设施会给银行及其企业客户带来额外成本，并且这种预先资金账户的需求会导致货币账户停滞并带来高额的机会成本。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">“ILP帮助互联支付生态系统，消除这些低效率，并使企业能够根据需要进行支付，而不必预先资助账户。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">这使得他们可以在其他地方分配运营资金，并以全新的方式使用其资本，“托马斯表示，意大利国际贸易法可以在跨境结算方面发挥作用。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">由于</span><a href="https://www.coinspeaker.com/2015/10/09/santander-invests-in-ripple-as-startup-releases-interledger-protocol-12334/" rel="nofollow" style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:baseline;color:rgb(0,110,151);text-decoration:underline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">桑坦德集团投资了数百万美元，</span></a><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">&nbsp;Interledger协议的概念得以发展</span><a href="https://www.coinspeaker.com/2015/10/09/santander-invests-in-ripple-as-startup-releases-interledger-protocol-12334/" rel="nofollow" style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:baseline;color:rgb(0,110,151);text-decoration:underline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">。</span></a><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">&nbsp;西班牙银行集团是市场价值最大的欧元区银行，也是市值最大的全球银行之一，他们一定相信Ripple的想法。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">Santander InnoVentures的执行合伙人Mariano Belinky表示，Ripple的技术可以彻底改变银行业的基础设施。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">“Ripple拥有解决许多情况的人才，技术和动力，我们正在积极探索在银行内部应用Ripple技术的最佳方式和方式，”他说。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">根据托马斯的说法，ITL基于过去一年里在Ripple试点项目的大型和小型零售和商业银行的广泛客户反馈。</span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">他认为，银行将首先成为Interledged协议的采用者，并将其用于跨境解决方案，如他们已经熟悉的Ripple协议，使他们能够跨越国界和跨不同的分类账高效地进行私人交易。</span><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">就像ITL跨越银行到银行结算的技术差异一样，它可以连接不兼容的网络和移动支付系统。</span></span></p>
     <p style="border:0px;font-family:inherit;font-size:17px;font-style:inherit;font-weight:inherit;vertical-align:baseline;"><span style="border:0px;font-family:inherit;font-style:inherit;font-weight:inherit;vertical-align:inherit;">该公司计划发布具有ILP功能的Ripple版本，以实现银行要求的关键功能，如私人交易，无限可扩展性以及以任何货币计价的能力。</span></p>
    </div>
    <br>
    <p style="text-align:center;"><img alt="" src="https://static.oschina.net/uploads/space/2017/1127/115354_KJZT_3734614.png" style="border:none;"></p>
    <span></span>
    <h2 style="font-size:22px;font-weight:500;">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 账本</h2>
    <p>&nbsp;&nbsp; 各“账本”要想利用ILP技术与其它区块链或者“账本”进行价值转换，就要满足一定的基础条件，才能更好地使自己发行的代币与其它电子货币币进行交换，从而易被大众接受。 &nbsp;&nbsp;</p>
    <p>1.&nbsp; 必须要支持自己“账本”所管理下的一个账户向自己账本所管理下另外一个账户的转账操作；</p>
    <p>2.&nbsp; 必须要支持托管式的交易操作，该类型的交易需要两个必要参数：一个执行“托管”交易的“原像条件”及一个“超时时间”；</p>
    <p>3.&nbsp; 任何用户，不局限于“托管”交易的创建者，在提供“托管”交易的“原像条件”时，就可以决定“托管”交易是被执行还是被拒绝；</p>
    <p>4.&nbsp; 如果“托管”交易创建后超时，“托管”交易就会自动失效，“托管”交易里所托管的货币会重新进入“托管”交易的创建者账户；</p>
    <p>5.&nbsp; “账本”所支持的交易需要具有携带简短消息的能力；</p>
    <p>6.&nbsp; “账本”支持事件通知功能，使得各方能及时知道有一笔针对自己的“托管”交易。</p>
    <span></span>
    <h2 style="font-size:22px;font-weight:500;">4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 流程</h2>
    <span></span>
    <h3 style="font-size:20px;font-weight:500;">4.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 概述</h3>
    <p>整个交易流程分成“发送方---&gt;接收方”与“接收方---&gt;发送方”两个主流程。每个流程又是由发生在各个“账本”上的各个子交易（“托管创建”与“托管确认”）组成。“发送方---&gt;接收方”流程全部是“托管”的创建动作，“接收方---&gt;发送方”则全由“托管”的确认动作组成。</p>
    <p style="text-align:center;"><img alt="" src="https://static.oschina.net/uploads/space/2017/1127/115602_zHGN_3734614.png" style="border:none;"></p>
    <p>从图中我们可以了解到在接收方对“账本N”上的“托管”交易进行确认前，所有“账本”上被创建的“托管”交易并未被确认，些时每一个“账本”上“托管”交易里指定的源账户并未真正将自己的资产转移出去，而是由“账本”系统进行了托管。只有当接收方进行确认后，在“接收方---&gt;发送方”的返回流程中，各个“托管”交易才被确认，此时各个“账本”的“托管”交易里指定的目标账户才真正得到源账户的资产，资产价值真正发生转移。</p>
    <p>在交易的整个链条过程中，每一个环节上的交易在被确认之前都是处于“托管”状态，并没有发生价值转移。即使是连接者去破坏交易，比如说将交易发往另外的地址，发送者也不会有损失，因为最后托管的交易不会得到执行，超时时间条件达成后，交易中的资产会再返回给源账户。</p>
    <p>当接收者收到一个涉及自己账户的“托管”交易的通知时，接收者会确认交易细节从而确定交易是否正确，然后提供“托管”交易所指定条件的原像，向“账本”系统发出“托管确认”操作，接收者真正得到所需要的加密电子货币。接下来整个传输链条上的每一个连接者都用同样的“条件原像”去“托管确认”属于自己的“托管”交易，最终每个连接者都收到自己应得的资产价值。</p>
    <p>一个值得注意的细节就是：各个“连接者”在创建自己发出的“托管”交易时，设置的超时时间一定要小于自己收到的“托管”交易里所设置的超时时间，从而自己在得到条件的原像时，有时间去执行自己收到的“托管”交易的确认操作，否则会出现自己创建的“托管”交易被接收方或者其它的连接者确认，但自己来不及去确认“属于”自己的“托管”交易，从而造成损失。换句话说，在“账本B”上把资产转移给了另外一个账户，在“账本A”上未确认到对应的资产，造成资产损失。</p>
    <span></span>
    <h3 style="font-size:20px;font-weight:500;">4.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 步骤</h3>
    <p>&nbsp;&nbsp;&nbsp; 我们使用本文开头提出的场景来描述整个交易的详细步骤：</p>
    <p>对象：发送方--Alice，接收方--Bob, 连接者—Cot。</p>
    <p>账本关系：Alice拥有bitcoin的账户， Bob拥有ripple的账户， Cot拥有bitcoin与ripple账户。</p>
    <p>场景：Alice要从网上购买Bob的笔记本电脑，定价为29230个ripple币。</p>
    <p style="text-align:center;"><img alt="" src="https://static.oschina.net/uploads/space/2017/1127/115703_h2y8_3734614.png" style="border:none;"></p>
    <p>1.&nbsp; Alice通过即时通讯软件或者其它通讯手段，得到Bob提供的一个“共享密码”。通讯一定要以加密方式进行，使得在沟通后，只有Alice与Bob知道这个“共享密码”；同时Bob会告诉Alice自己在ILP网络中对应的唯一地址，例如g.ripple.<span>&nbsp;rHCvhtqhXuBvWt5g79gyXfpG8VcrvUm9E9</span>。</p>
    <p>2.&nbsp; Alice去向Cot询价，查询自己想发送29230个ripple币需要多个少BTC，此时Cot会按实时的BTC与ripple行情算出需要1个比特币，同时Cot会多收0.00001个BTC作为手续费，最终Alice得到的询价结果为:需要向Cot支付1.00001个BTC。</p>
    <p>3.&nbsp; Alice按ILP规定的消息格式生成所需要的ILP包，ILP包里指明目标地址为Cot,同时基于ILP包的私有内容与“共享密码”生成一个“条件原像”，对“条件原像”进行哈希散列，得到一个“托管”交易的“条件”。</p>
    <p>4.&nbsp; Alice在Bitcoin账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，同时设置ILP包。</p>
    <p>5.&nbsp; Cot在Bitcoin上监测到一个涉及自己的“托管”创建操作。</p>
    <p>6.&nbsp; Cot解析ILP包，计算出自己应该向Bob转29230个ripple币，同时修改ILP中的目标地址为Bob。</p>
    <p>7.&nbsp; Cot在ripple账本系统上发起一个“托管”创建操作，设置了步骤3中的“托管”条件及一个超时时间，此超时时间要小于步骤4中的超时时间，同时设置ILP包。</p>
    <p>8.&nbsp; Bob在ripple上监测到一个涉及自己的“托管”创建操作。</p>
    <p>9.&nbsp; Bob解析ILP包,用自己的“共享密码”及ILP包里的私有内容生成一个“条件原像”及对应的“条件”。通过对比“托管”创建交易里携带的“条件”与自己生成的是否相同，及核实“托管”交易中指定的资产数量是否是29230，来确认“托管”交易：接收或拒绝。我们这里假定接收。</p>
    <p>10. Bob在ripple账本系统上发起一个“托管”确认操作，设置上“条件原像”，ripple账本上的“托管”交易完成，Bob收到29230的ripple币</p>
    <p>11. Cot在ripple上监测到一个涉及自己的“托管”确认操作。</p>
    <p>12. Cot分析“托管”确认操作的内容，得到“条件原像”。</p>
    <p>13. Cot在bitcoin账本系统上发起一个“托管”确认操作，设置上“条件原像”，bitcoin账本上的“托管”交易完成，Cot收到1.00001个BTC。</p>
    <p>14. Cot在bitcoin上监测到一个涉及自己的“托管”确认操作。</p>
    <span></span>
    <h3 style="font-size:20px;font-weight:500;">4.3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 托管</h3>
    <p>从交易流程中我们可以看到，ILP是利用各个账本所提供的“托管”功能进行各子交易的实现。</p>
    <p style="text-align:center;"><img alt="" src="https://static.oschina.net/uploads/space/2017/1127/115802_c80g_3734614.png" style="border:none;"></p>
    <p>从图中我们可以看到，“托管”交易包含四个主要步骤&nbsp;</p>
    <p>1.&nbsp; 准备：此时什么事情都没发生，只进行了必要数据的准备。</p>
    <p>2.&nbsp; 创建：隶属于一个“账本”系统上的某个账户的资产被“托管”。</p>
    <p>3.&nbsp; 确认：“托管”交易完成，资产发生转移，从“账本”系统内的一个账户转移到了另外一个账户。</p>
    <p>4.&nbsp; 拒绝：“托管”交易被取消，资产回到“账本”系统的源账户。</p>
    <p>&nbsp;</p>
    <p>托管功能的特点主要有以下几个方面：</p>
    <p>1.&nbsp; “托管”交易被创建后，发送方的资产并未真正转移。</p>
    <p>2.&nbsp; “托管”交易不能被撤销或者在一定时间内不能撤销。</p>
    <p>3.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以使得“托管”交易被确认，不必要发送方去执行“托管”交易的最终确认操作。</p>
    <p>4.&nbsp; 任何人只要知道“托管”交易列出的“条件原像”，都可以拒绝“托管”交易，不必要发送方去执行“托管”交易的拒绝操作。</p>
    <p>5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “托管”交易可以设置超时时间，在规定时间内无人进行“确认”操作或者“拒绝”操作，“托管”交易自动失效。</p>
    <p>&nbsp;</p>
    <p>“托管”交易是ILP实现的前提条件，实现“托管”的方式多种多样，可以是“账本”本身具有的功能，也可以是通过双方信任的第三方来代替实现。只有通过“托管”的方式，才能保证各方的利益不受侵害。</p>
    <span></span>
    <h2 style="font-size:22px;font-weight:500;">5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 安全</h2>
    <p>&nbsp;&nbsp;&nbsp;&nbsp; ILP用了一种带“条件”的交易来保证资产价值在各个“账本”系统之间传递时的安全，发送方用一种加密证明来保证发出去的资产要么被接收方接收，要么返回到发送方的账户。在整个过程中。连接者可能会遭受一定的损失，但是此风险基本可控，风险只与连接者选用的账本系统及直接连接的节点有关。</p>
    <span></span>
    <h3 style="font-size:20px;font-weight:500;">5.1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者</h3>
    <p>在ILP协议中，连接者是一个重要的角色，支撑起整个跨链网络，使得跨链的资产交换得以正常进行。连接者之所以有积极性是因为在提供资产转换的过程中会收取一定的费用，像做市商时收取的佣金一样来获得收益。</p>
    <p>但在这个过程中连接者是有一定的风险的，当连接者发出去的“托管”交易被成功确认，但是自己没有及时去确认自己收到的那个“托管”交易，这样本该发给自己的资产就会返回到源账户的地址，造成一定的损失。</p>
    <p>当连接者未能及时确认发往自己的托管的交易时，只能靠发送方再次发送带有同样执行“条件”的同样的“托管”交易过来，当连接者拿到这个“托管”交易时，用上次记下来的“条件原像”去确认这个新的交易。</p>
    <p>要想让发送方愿意重复再发送已经失效的交易，就需要给这样做的发送方一定的奖励，比如降低佣金、优先进行资产转换等。</p>
    <span></span>
    <h3 style="font-size:20px;font-weight:500;">5.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 问题</h3>
    <p>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会在没有确认涉及自己的“托管”交易时，泄露“条件原像”？</p>
    <p>如果接收方正常的话，是不会有此现象发生，因为这样自己的权益不会被保证，会造成发送方已经发送，接收方收不到资产的情况，这种情况下接收方要承担责任。</p>
    <p>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接收方是否会只把对方的“托管”交易确认，却不公布“条件原像”？</p>
    <p>不会，“托管”确认交易的必要参数之一就是“条件原像”，只要“托管”交易被确</p>
    <p>认，“账本”系统上就可以查看此交易，从而得到“条件原像”。</p>
    <p>3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 连接者在未来得及确认涉及自己的“托管”交易时，同时发送方又不再次发送，怎么办？</p>
    <p>没办法，确实无法回避此问题。</p>
    <p>4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 发送方与接收方之间有多个连接者的情况下，如果第一个连接者先于第二个连接者拿到了“条件原像”，是否会给第二个连接者造成损失？</p>
    <p>不会，因为第一个连接者创建的“托管”交易在一定时间内不能取消，只要在超时</p>
    <p>时间内第二个连接者拿到了“条件原像”，就可以确认涉及自己的“托管”交易。</p>
    <p>5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 谁可以做连接者？</p>
    <p>任何拥有2个以上“账本”系统账号的个人都可以做连接者。</p>
    <span></span>
    <h2 style="font-size:22px;font-weight:500;">6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 核心</h2>
    <p>纵观本文，大家已经发现了ILP并未创建一个统一的“账本”系统，也未要求参与的各方去信任任何个人或者机构，而是依靠现有的、已经存在的“托管”交易来保证各方的利益，那ILP事实是做了什么事呢？</p>
    <p>ILP提出了一种跨链资产转移的方法，但是其首先是一个协议，协议的核心在于以下两点：</p>
    <p>1.&nbsp; 确定了各个“账本”系统上的每个账户的地址规则，即通过层级关系来确定某一个账号是属于某个范围内某个账本上的。</p>
    <p>例如 g.ripple.bob，表示公链ripple上的一个账户bob</p>
    <p>2.&nbsp; 定义了在跨链交易时的消息传递格式，使得发送方、接收方、连接者之间可以用同样的消息格式进行信息的传递，用以确认收到消息及得到自己的目标地址。</p>
    <p>&nbsp;&nbsp; 核心点一使得交易流程中的各个子交易能确定转移的账户，核心点二使得各方采用统一的格式进行消息传递。&nbsp;&nbsp;</p>
    <span></span>
    <h2 style="font-size:22px;font-weight:500;">7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 应用场景</h2>
    <p>1.&nbsp; 只拥有加密电子货币A的情况下以加密电子货币B的形式进行支付；</p>
    <p>2.&nbsp; 拥有不同加密电子货币的账户，想在隶属于不同“账本”的账户之间进行货币的价值转换；</p>
    <p>3.&nbsp; 同一集团下不同私有链之间进行同类型货币的价值互换。</p>
    <p>&nbsp;</p>
    <span></span>
    <h2 style="font-size:22px;font-weight:500;">8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 小结</h2>
    <p>本文系统介绍了Interledger protocal，同时以实例的形式完整说明了整个ILP交易的详细流程，同时对交易过程中的安全性能进行了深入分析，针对ILP的技术特点，本文也给出了它的一些典型应用场景。</p>
    <p><span style="background-color:rgb(255,255,255);">博主QQ: 122209017</span><br></p>
   </div>
  </div> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/sinat_34070003/article/details/79586709,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/sinat_34070003/article/details/79586709,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
