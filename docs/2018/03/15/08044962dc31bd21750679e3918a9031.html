<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Python代码构建小型区块链DogCoin（ 狗币） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Python代码构建小型区块链DogCoin（ 狗币）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Python代码构建小型区块链DogCoin（ 狗币） &nbsp; &nbsp; &nbsp; 本文介绍了如何使用python构建一个小型的区块链技术，使用Python2.7实现，代码不到50行。 &nbsp; &nbsp; &nbsp;这个简单的区块链。这将被称为DogCoin（ 狗币）。 （一）&nbsp;定义区块链的块结构。 &nbsp; &nbsp; &nbsp; 像比特币一样，我们的DogCoin每个区块将包括作为区块的索引的哈希值，时间戳，数据以及前一个块的哈希值和新的哈希值。如下图： index timestamp data previous_hash hash Python代码： import hashlibas hasher &nbsp; class Block: &nbsp; def __init__(self, index, timestamp, data,previous_hash): &nbsp;&nbsp;&nbsp; self.index = index &nbsp;&nbsp;&nbsp; self.timestamp = timestamp &nbsp;&nbsp;&nbsp; self.data = data &nbsp;&nbsp;&nbsp; self.previous_hash = previous_hash &nbsp;&nbsp;&nbsp; self.hash = self.hash_block() &nbsp; &nbsp; def hash_block(self): &nbsp;&nbsp;&nbsp; sha = hasher.sha256() &nbsp;&nbsp;&nbsp; sha.update(str(self.index) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.timestamp) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.data) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.previous_hash)) &nbsp;&nbsp;&nbsp; return sha.hexdigest() &nbsp;&nbsp;&nbsp; （二）创建创世区块。 &nbsp; &nbsp; &nbsp; &nbsp;如前所述，每个块都需要上一个块的信息。但是这就出现了一个问题：区块链中的第一个区块，也就是“创世区块”，如何创建？ &nbsp; &nbsp; &nbsp; &nbsp;按照模块化原则，我们将创建一个函数，只需返回一个创世区块，该区块的索引为0，它在“previous hash”参数中具有任意数据值和任意值。 如下图： Index：0 timestamp Data：Genesis Block previous_hash hash Python代码： import datetime as date &nbsp; def create_genesis_block(): &nbsp; # Manually construct a block with &nbsp; # index zero and arbitrary previous hash &nbsp; return Block(0, date.datetime.now(),&quot;Genesis Block&quot;, &quot;0&quot;) （三）创建后续区块。 &nbsp; &nbsp; &nbsp; 我们需要一个新的函数来生成区块链中的后续区块。该函数将链中的前一个区块作为参数，创建要生成的区块的数据，并返回具有其相应数据的新块。新产生的区块会存储先前区块中的哈希值，区块链的完整性随着每个新的区块而增加。这个哈希链作为加密证明，有助于确保一旦新区块被添加到区块链中，它不能被替换或删除。 如下图： Index：2 timestamp Data：Hey! I&#39;m block 2 previous_hash hash Python代码： def next_block(last_block): &nbsp; this_index = last_block.index + 1 &nbsp; this_timestamp = date.datetime.now() &nbsp; this_data = &quot;Hey! I&#39;m block &quot; +str(this_index) &nbsp; this_hash = last_block.hash &nbsp; return Block(this_index, this_timestamp,this_data, this_hash)&nbsp; （四）创建（组装）我们的区块链DogCoin。 &nbsp; &nbsp; &nbsp; &nbsp;区块链其实就是一个将普通指针换成哈希指针的链表，所以每个区块不仅包含了上一个区块的地址，还包括了上一个区块的哈希值。 &nbsp; &nbsp; &nbsp; &nbsp;列表的第一个元素是创世区块，然后需要添加后续区块。本例中，我们只添加了10个新的块，用for循环搞定。 如下图： 后续区块（4） 后续区块（3） 后续区块（2） 创世区块（1） &nbsp; Python代码： # Create theblockchain and add the genesis block blockchain = [create_genesis_block()] previous_block =blockchain[0] &nbsp; # How manyblocks should we add to the chain # after thegenesis block num_of_blocks_to_add= 20 &nbsp; # Add blocks tothe chain for i &nbsp;in range(0, num_of_blocks_to_add): &nbsp; block_to_add = next_block(previous_block) &nbsp; blockchain.append(block_to_add) &nbsp; previous_block = block_to_add &nbsp; # Tell everyone about it! &nbsp; print &quot;Block #{} has been added to blockchain!&quot;.format(block_to_add.index) &nbsp; print &quot;Hash:{}\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; （五）打印区块链DogCoin的每个块！ &nbsp; &nbsp; &nbsp; &nbsp;我们的区块链生效了！ &nbsp; 完整Python.代码如下：（python 2.7 idle） import hashlib as hasherclass Block: &nbsp; &nbsp; &nbsp; def __init__(self, index, timestamp, data, previous_hash): &nbsp; &nbsp; &nbsp; &nbsp; self.index = index &nbsp; &nbsp; &nbsp; &nbsp; self.timestamp = timestamp &nbsp; &nbsp; &nbsp; &nbsp; self.data = data &nbsp; &nbsp; &nbsp; &nbsp; self.previous_hash = previous_hash &nbsp; &nbsp; &nbsp; &nbsp; self.hash = self.hash_block() &nbsp; &nbsp; &nbsp; def hash_block(self): &nbsp; &nbsp; &nbsp; &nbsp; sha = hasher.sha256() &nbsp; &nbsp; &nbsp; &nbsp; sha.update(str(self.index) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.timestamp) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.data) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.previous_hash)) &nbsp; &nbsp; &nbsp; &nbsp; return sha.hexdigest() &nbsp; &nbsp;&nbsp; import datetime as date def create_genesis_block(): &nbsp; &nbsp; &nbsp; # Manually construct a block with &nbsp; &nbsp; &nbsp; # index zero and arbitrary previous hash &nbsp; &nbsp; &nbsp; return Block(0, date.datetime.now(), &quot;Genesis Block&quot;, &quot;0&quot;) def next_block(last_block):&nbsp; &nbsp; &nbsp; this_index = last_block.index + 1 &nbsp; &nbsp; &nbsp; this_timestamp = date.datetime.now() &nbsp; &nbsp; &nbsp; this_data = &quot;Hey! I&#39;m block &quot; + str(this_index) &nbsp; &nbsp; &nbsp; this_hash = last_block.hash &nbsp; &nbsp; &nbsp; return Block(this_index, this_timestamp, this_data, this_hash) &nbsp; # Create the blockchain and add the genesis block blockchain = [create_genesis_block()] previous_block = blockchain[0] #Print genesis block print &quot;DogCoin&quot; print &quot;---------------&quot; print &quot;block index: {}&quot;.format(blockchain[0].index) print &quot;timestamp: {}&quot;.format(blockchain[0]. timestamp) print &quot;data: {}&quot;.format(blockchain[0]. data) print &quot;previous_hash: &nbsp;{}&quot;.format(blockchain[0]. previous_hash) print &quot;hash: {}\n&quot;.format(blockchain[0].hash) print &quot;---------------&quot; # How many blocks should we add to the chain # after the genesis block num_of_blocks_to_add = 10 # Add blocks to the chain for i in range(0, num_of_blocks_to_add): &nbsp; &nbsp; &nbsp; block_to_add = next_block(previous_block) &nbsp; &nbsp; &nbsp; blockchain.append(block_to_add) &nbsp; &nbsp; &nbsp; previous_block = block_to_add &nbsp; &nbsp; &nbsp; # Tell everyone about it! &nbsp; &nbsp; &nbsp; #print &quot;Block {} has been added to blockchain!&quot;.format(block_to_add.index) &nbsp; &nbsp; &nbsp; #print &quot;Hash: {}\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; &nbsp; print &quot;DogCoin&quot; &nbsp; &nbsp; &nbsp; print &quot;---------------&quot; &nbsp; &nbsp; &nbsp; print &quot;block index: {}&quot;.format(block_to_add.index) &nbsp; &nbsp; &nbsp; print &quot;timestamp: {}&quot;.format(block_to_add. timestamp) &nbsp; &nbsp; &nbsp; print &quot;data: {}&quot;.format(block_to_add. data) &nbsp; &nbsp; &nbsp; print &quot;previous_hash: &nbsp;{}&quot;.format(block_to_add. previous_hash) &nbsp; &nbsp; &nbsp; print &quot;hash: {}\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; &nbsp; print &quot;---------------&quot; 演示输出： DogCoin --------------- block index: 0 timestamp: 2018-03-15 13:59:12.750000 data: Genesis Block previous_hash:&nbsp; 0 hash:978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1 &nbsp; --------------- DogCoin --------------- block index: 1 timestamp: 2018-03-15 13:59:12.828000 data: Hey! I&#39;m block 1 previous_hash:&nbsp;978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1 hash:0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa &nbsp; --------------- DogCoin --------------- block index: 2 timestamp: 2018-03-15 13:59:12.906000 data: Hey! I&#39;m block 2 previous_hash:&nbsp; 0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa hash:7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775 &nbsp; --------------- DogCoin --------------- block index: 3 timestamp: 2018-03-15 13:59:12.984000 data: Hey! I&#39;m block 3 previous_hash:&nbsp;7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775 hash:c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f &nbsp; --------------- DogCoin --------------- block index: 4 timestamp: 2018-03-15 13:59:13.078000 data: Hey! I&#39;m block 4 previous_hash:&nbsp;c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f hash:4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998 &nbsp; --------------- DogCoin --------------- block index: 5 timestamp: 2018-03-15 13:59:13.156000 data: Hey! I&#39;m block 5 previous_hash:&nbsp;4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998 hash:95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8 &nbsp; --------------- DogCoin --------------- block index: 6 timestamp: 2018-03-15 13:59:13.250000 data: Hey! I&#39;m block 6 previous_hash:&nbsp;95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8 hash:3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe &nbsp; --------------- DogCoin --------------- block index: 7 timestamp: 2018-03-15 13:59:13.343000 data: Hey! I&#39;m block 7 previous_hash:&nbsp;3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe hash:54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287 &nbsp; --------------- DogCoin --------------- block index: 8 timestamp: 2018-03-15 13:59:13.421000 data: Hey! I&#39;m block 8 previous_hash:&nbsp;54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287 hash:27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f &nbsp; --------------- DogCoin --------------- block index: 9 timestamp: 2018-03-15 13:59:13.500000 data: Hey! I&#39;m block 9 previous_hash:&nbsp;27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f hash:143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52 &nbsp; --------------- DogCoin --------------- block index: 10 timestamp: 2018-03-15 13:59:13.578000 data: Hey! I&#39;m block 10 previous_hash:&nbsp;143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52 hash:1a66358fb32db223a2f998061e3bc90354b0ddb8d2c3a013cc86c63060c5c547 &nbsp; --------------- 阅读更多" />
<meta property="og:description" content="Python代码构建小型区块链DogCoin（ 狗币） &nbsp; &nbsp; &nbsp; 本文介绍了如何使用python构建一个小型的区块链技术，使用Python2.7实现，代码不到50行。 &nbsp; &nbsp; &nbsp;这个简单的区块链。这将被称为DogCoin（ 狗币）。 （一）&nbsp;定义区块链的块结构。 &nbsp; &nbsp; &nbsp; 像比特币一样，我们的DogCoin每个区块将包括作为区块的索引的哈希值，时间戳，数据以及前一个块的哈希值和新的哈希值。如下图： index timestamp data previous_hash hash Python代码： import hashlibas hasher &nbsp; class Block: &nbsp; def __init__(self, index, timestamp, data,previous_hash): &nbsp;&nbsp;&nbsp; self.index = index &nbsp;&nbsp;&nbsp; self.timestamp = timestamp &nbsp;&nbsp;&nbsp; self.data = data &nbsp;&nbsp;&nbsp; self.previous_hash = previous_hash &nbsp;&nbsp;&nbsp; self.hash = self.hash_block() &nbsp; &nbsp; def hash_block(self): &nbsp;&nbsp;&nbsp; sha = hasher.sha256() &nbsp;&nbsp;&nbsp; sha.update(str(self.index) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.timestamp) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.data) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.previous_hash)) &nbsp;&nbsp;&nbsp; return sha.hexdigest() &nbsp;&nbsp;&nbsp; （二）创建创世区块。 &nbsp; &nbsp; &nbsp; &nbsp;如前所述，每个块都需要上一个块的信息。但是这就出现了一个问题：区块链中的第一个区块，也就是“创世区块”，如何创建？ &nbsp; &nbsp; &nbsp; &nbsp;按照模块化原则，我们将创建一个函数，只需返回一个创世区块，该区块的索引为0，它在“previous hash”参数中具有任意数据值和任意值。 如下图： Index：0 timestamp Data：Genesis Block previous_hash hash Python代码： import datetime as date &nbsp; def create_genesis_block(): &nbsp; # Manually construct a block with &nbsp; # index zero and arbitrary previous hash &nbsp; return Block(0, date.datetime.now(),&quot;Genesis Block&quot;, &quot;0&quot;) （三）创建后续区块。 &nbsp; &nbsp; &nbsp; 我们需要一个新的函数来生成区块链中的后续区块。该函数将链中的前一个区块作为参数，创建要生成的区块的数据，并返回具有其相应数据的新块。新产生的区块会存储先前区块中的哈希值，区块链的完整性随着每个新的区块而增加。这个哈希链作为加密证明，有助于确保一旦新区块被添加到区块链中，它不能被替换或删除。 如下图： Index：2 timestamp Data：Hey! I&#39;m block 2 previous_hash hash Python代码： def next_block(last_block): &nbsp; this_index = last_block.index + 1 &nbsp; this_timestamp = date.datetime.now() &nbsp; this_data = &quot;Hey! I&#39;m block &quot; +str(this_index) &nbsp; this_hash = last_block.hash &nbsp; return Block(this_index, this_timestamp,this_data, this_hash)&nbsp; （四）创建（组装）我们的区块链DogCoin。 &nbsp; &nbsp; &nbsp; &nbsp;区块链其实就是一个将普通指针换成哈希指针的链表，所以每个区块不仅包含了上一个区块的地址，还包括了上一个区块的哈希值。 &nbsp; &nbsp; &nbsp; &nbsp;列表的第一个元素是创世区块，然后需要添加后续区块。本例中，我们只添加了10个新的块，用for循环搞定。 如下图： 后续区块（4） 后续区块（3） 后续区块（2） 创世区块（1） &nbsp; Python代码： # Create theblockchain and add the genesis block blockchain = [create_genesis_block()] previous_block =blockchain[0] &nbsp; # How manyblocks should we add to the chain # after thegenesis block num_of_blocks_to_add= 20 &nbsp; # Add blocks tothe chain for i &nbsp;in range(0, num_of_blocks_to_add): &nbsp; block_to_add = next_block(previous_block) &nbsp; blockchain.append(block_to_add) &nbsp; previous_block = block_to_add &nbsp; # Tell everyone about it! &nbsp; print &quot;Block #{} has been added to blockchain!&quot;.format(block_to_add.index) &nbsp; print &quot;Hash:{}\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; （五）打印区块链DogCoin的每个块！ &nbsp; &nbsp; &nbsp; &nbsp;我们的区块链生效了！ &nbsp; 完整Python.代码如下：（python 2.7 idle） import hashlib as hasherclass Block: &nbsp; &nbsp; &nbsp; def __init__(self, index, timestamp, data, previous_hash): &nbsp; &nbsp; &nbsp; &nbsp; self.index = index &nbsp; &nbsp; &nbsp; &nbsp; self.timestamp = timestamp &nbsp; &nbsp; &nbsp; &nbsp; self.data = data &nbsp; &nbsp; &nbsp; &nbsp; self.previous_hash = previous_hash &nbsp; &nbsp; &nbsp; &nbsp; self.hash = self.hash_block() &nbsp; &nbsp; &nbsp; def hash_block(self): &nbsp; &nbsp; &nbsp; &nbsp; sha = hasher.sha256() &nbsp; &nbsp; &nbsp; &nbsp; sha.update(str(self.index) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.timestamp) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.data) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.previous_hash)) &nbsp; &nbsp; &nbsp; &nbsp; return sha.hexdigest() &nbsp; &nbsp;&nbsp; import datetime as date def create_genesis_block(): &nbsp; &nbsp; &nbsp; # Manually construct a block with &nbsp; &nbsp; &nbsp; # index zero and arbitrary previous hash &nbsp; &nbsp; &nbsp; return Block(0, date.datetime.now(), &quot;Genesis Block&quot;, &quot;0&quot;) def next_block(last_block):&nbsp; &nbsp; &nbsp; this_index = last_block.index + 1 &nbsp; &nbsp; &nbsp; this_timestamp = date.datetime.now() &nbsp; &nbsp; &nbsp; this_data = &quot;Hey! I&#39;m block &quot; + str(this_index) &nbsp; &nbsp; &nbsp; this_hash = last_block.hash &nbsp; &nbsp; &nbsp; return Block(this_index, this_timestamp, this_data, this_hash) &nbsp; # Create the blockchain and add the genesis block blockchain = [create_genesis_block()] previous_block = blockchain[0] #Print genesis block print &quot;DogCoin&quot; print &quot;---------------&quot; print &quot;block index: {}&quot;.format(blockchain[0].index) print &quot;timestamp: {}&quot;.format(blockchain[0]. timestamp) print &quot;data: {}&quot;.format(blockchain[0]. data) print &quot;previous_hash: &nbsp;{}&quot;.format(blockchain[0]. previous_hash) print &quot;hash: {}\n&quot;.format(blockchain[0].hash) print &quot;---------------&quot; # How many blocks should we add to the chain # after the genesis block num_of_blocks_to_add = 10 # Add blocks to the chain for i in range(0, num_of_blocks_to_add): &nbsp; &nbsp; &nbsp; block_to_add = next_block(previous_block) &nbsp; &nbsp; &nbsp; blockchain.append(block_to_add) &nbsp; &nbsp; &nbsp; previous_block = block_to_add &nbsp; &nbsp; &nbsp; # Tell everyone about it! &nbsp; &nbsp; &nbsp; #print &quot;Block {} has been added to blockchain!&quot;.format(block_to_add.index) &nbsp; &nbsp; &nbsp; #print &quot;Hash: {}\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; &nbsp; print &quot;DogCoin&quot; &nbsp; &nbsp; &nbsp; print &quot;---------------&quot; &nbsp; &nbsp; &nbsp; print &quot;block index: {}&quot;.format(block_to_add.index) &nbsp; &nbsp; &nbsp; print &quot;timestamp: {}&quot;.format(block_to_add. timestamp) &nbsp; &nbsp; &nbsp; print &quot;data: {}&quot;.format(block_to_add. data) &nbsp; &nbsp; &nbsp; print &quot;previous_hash: &nbsp;{}&quot;.format(block_to_add. previous_hash) &nbsp; &nbsp; &nbsp; print &quot;hash: {}\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; &nbsp; print &quot;---------------&quot; 演示输出： DogCoin --------------- block index: 0 timestamp: 2018-03-15 13:59:12.750000 data: Genesis Block previous_hash:&nbsp; 0 hash:978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1 &nbsp; --------------- DogCoin --------------- block index: 1 timestamp: 2018-03-15 13:59:12.828000 data: Hey! I&#39;m block 1 previous_hash:&nbsp;978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1 hash:0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa &nbsp; --------------- DogCoin --------------- block index: 2 timestamp: 2018-03-15 13:59:12.906000 data: Hey! I&#39;m block 2 previous_hash:&nbsp; 0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa hash:7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775 &nbsp; --------------- DogCoin --------------- block index: 3 timestamp: 2018-03-15 13:59:12.984000 data: Hey! I&#39;m block 3 previous_hash:&nbsp;7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775 hash:c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f &nbsp; --------------- DogCoin --------------- block index: 4 timestamp: 2018-03-15 13:59:13.078000 data: Hey! I&#39;m block 4 previous_hash:&nbsp;c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f hash:4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998 &nbsp; --------------- DogCoin --------------- block index: 5 timestamp: 2018-03-15 13:59:13.156000 data: Hey! I&#39;m block 5 previous_hash:&nbsp;4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998 hash:95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8 &nbsp; --------------- DogCoin --------------- block index: 6 timestamp: 2018-03-15 13:59:13.250000 data: Hey! I&#39;m block 6 previous_hash:&nbsp;95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8 hash:3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe &nbsp; --------------- DogCoin --------------- block index: 7 timestamp: 2018-03-15 13:59:13.343000 data: Hey! I&#39;m block 7 previous_hash:&nbsp;3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe hash:54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287 &nbsp; --------------- DogCoin --------------- block index: 8 timestamp: 2018-03-15 13:59:13.421000 data: Hey! I&#39;m block 8 previous_hash:&nbsp;54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287 hash:27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f &nbsp; --------------- DogCoin --------------- block index: 9 timestamp: 2018-03-15 13:59:13.500000 data: Hey! I&#39;m block 9 previous_hash:&nbsp;27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f hash:143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52 &nbsp; --------------- DogCoin --------------- block index: 10 timestamp: 2018-03-15 13:59:13.578000 data: Hey! I&#39;m block 10 previous_hash:&nbsp;143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52 hash:1a66358fb32db223a2f998061e3bc90354b0ddb8d2c3a013cc86c63060c5c547 &nbsp; --------------- 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-15T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"Python代码构建小型区块链DogCoin（ 狗币） &nbsp; &nbsp; &nbsp; 本文介绍了如何使用python构建一个小型的区块链技术，使用Python2.7实现，代码不到50行。 &nbsp; &nbsp; &nbsp;这个简单的区块链。这将被称为DogCoin（ 狗币）。 （一）&nbsp;定义区块链的块结构。 &nbsp; &nbsp; &nbsp; 像比特币一样，我们的DogCoin每个区块将包括作为区块的索引的哈希值，时间戳，数据以及前一个块的哈希值和新的哈希值。如下图： index timestamp data previous_hash hash Python代码： import hashlibas hasher &nbsp; class Block: &nbsp; def __init__(self, index, timestamp, data,previous_hash): &nbsp;&nbsp;&nbsp; self.index = index &nbsp;&nbsp;&nbsp; self.timestamp = timestamp &nbsp;&nbsp;&nbsp; self.data = data &nbsp;&nbsp;&nbsp; self.previous_hash = previous_hash &nbsp;&nbsp;&nbsp; self.hash = self.hash_block() &nbsp; &nbsp; def hash_block(self): &nbsp;&nbsp;&nbsp; sha = hasher.sha256() &nbsp;&nbsp;&nbsp; sha.update(str(self.index) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.timestamp) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.data) + &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.previous_hash)) &nbsp;&nbsp;&nbsp; return sha.hexdigest() &nbsp;&nbsp;&nbsp; （二）创建创世区块。 &nbsp; &nbsp; &nbsp; &nbsp;如前所述，每个块都需要上一个块的信息。但是这就出现了一个问题：区块链中的第一个区块，也就是“创世区块”，如何创建？ &nbsp; &nbsp; &nbsp; &nbsp;按照模块化原则，我们将创建一个函数，只需返回一个创世区块，该区块的索引为0，它在“previous hash”参数中具有任意数据值和任意值。 如下图： Index：0 timestamp Data：Genesis Block previous_hash hash Python代码： import datetime as date &nbsp; def create_genesis_block(): &nbsp; # Manually construct a block with &nbsp; # index zero and arbitrary previous hash &nbsp; return Block(0, date.datetime.now(),&quot;Genesis Block&quot;, &quot;0&quot;) （三）创建后续区块。 &nbsp; &nbsp; &nbsp; 我们需要一个新的函数来生成区块链中的后续区块。该函数将链中的前一个区块作为参数，创建要生成的区块的数据，并返回具有其相应数据的新块。新产生的区块会存储先前区块中的哈希值，区块链的完整性随着每个新的区块而增加。这个哈希链作为加密证明，有助于确保一旦新区块被添加到区块链中，它不能被替换或删除。 如下图： Index：2 timestamp Data：Hey! I&#39;m block 2 previous_hash hash Python代码： def next_block(last_block): &nbsp; this_index = last_block.index + 1 &nbsp; this_timestamp = date.datetime.now() &nbsp; this_data = &quot;Hey! I&#39;m block &quot; +str(this_index) &nbsp; this_hash = last_block.hash &nbsp; return Block(this_index, this_timestamp,this_data, this_hash)&nbsp; （四）创建（组装）我们的区块链DogCoin。 &nbsp; &nbsp; &nbsp; &nbsp;区块链其实就是一个将普通指针换成哈希指针的链表，所以每个区块不仅包含了上一个区块的地址，还包括了上一个区块的哈希值。 &nbsp; &nbsp; &nbsp; &nbsp;列表的第一个元素是创世区块，然后需要添加后续区块。本例中，我们只添加了10个新的块，用for循环搞定。 如下图： 后续区块（4） 后续区块（3） 后续区块（2） 创世区块（1） &nbsp; Python代码： # Create theblockchain and add the genesis block blockchain = [create_genesis_block()] previous_block =blockchain[0] &nbsp; # How manyblocks should we add to the chain # after thegenesis block num_of_blocks_to_add= 20 &nbsp; # Add blocks tothe chain for i &nbsp;in range(0, num_of_blocks_to_add): &nbsp; block_to_add = next_block(previous_block) &nbsp; blockchain.append(block_to_add) &nbsp; previous_block = block_to_add &nbsp; # Tell everyone about it! &nbsp; print &quot;Block #{} has been added to blockchain!&quot;.format(block_to_add.index) &nbsp; print &quot;Hash:{}\\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; （五）打印区块链DogCoin的每个块！ &nbsp; &nbsp; &nbsp; &nbsp;我们的区块链生效了！ &nbsp; 完整Python.代码如下：（python 2.7 idle） import hashlib as hasherclass Block: &nbsp; &nbsp; &nbsp; def __init__(self, index, timestamp, data, previous_hash): &nbsp; &nbsp; &nbsp; &nbsp; self.index = index &nbsp; &nbsp; &nbsp; &nbsp; self.timestamp = timestamp &nbsp; &nbsp; &nbsp; &nbsp; self.data = data &nbsp; &nbsp; &nbsp; &nbsp; self.previous_hash = previous_hash &nbsp; &nbsp; &nbsp; &nbsp; self.hash = self.hash_block() &nbsp; &nbsp; &nbsp; def hash_block(self): &nbsp; &nbsp; &nbsp; &nbsp; sha = hasher.sha256() &nbsp; &nbsp; &nbsp; &nbsp; sha.update(str(self.index) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.timestamp) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.data) +&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.previous_hash)) &nbsp; &nbsp; &nbsp; &nbsp; return sha.hexdigest() &nbsp; &nbsp;&nbsp; import datetime as date def create_genesis_block(): &nbsp; &nbsp; &nbsp; # Manually construct a block with &nbsp; &nbsp; &nbsp; # index zero and arbitrary previous hash &nbsp; &nbsp; &nbsp; return Block(0, date.datetime.now(), &quot;Genesis Block&quot;, &quot;0&quot;) def next_block(last_block):&nbsp; &nbsp; &nbsp; this_index = last_block.index + 1 &nbsp; &nbsp; &nbsp; this_timestamp = date.datetime.now() &nbsp; &nbsp; &nbsp; this_data = &quot;Hey! I&#39;m block &quot; + str(this_index) &nbsp; &nbsp; &nbsp; this_hash = last_block.hash &nbsp; &nbsp; &nbsp; return Block(this_index, this_timestamp, this_data, this_hash) &nbsp; # Create the blockchain and add the genesis block blockchain = [create_genesis_block()] previous_block = blockchain[0] #Print genesis block print &quot;DogCoin&quot; print &quot;---------------&quot; print &quot;block index: {}&quot;.format(blockchain[0].index) print &quot;timestamp: {}&quot;.format(blockchain[0]. timestamp) print &quot;data: {}&quot;.format(blockchain[0]. data) print &quot;previous_hash: &nbsp;{}&quot;.format(blockchain[0]. previous_hash) print &quot;hash: {}\\n&quot;.format(blockchain[0].hash) print &quot;---------------&quot; # How many blocks should we add to the chain # after the genesis block num_of_blocks_to_add = 10 # Add blocks to the chain for i in range(0, num_of_blocks_to_add): &nbsp; &nbsp; &nbsp; block_to_add = next_block(previous_block) &nbsp; &nbsp; &nbsp; blockchain.append(block_to_add) &nbsp; &nbsp; &nbsp; previous_block = block_to_add &nbsp; &nbsp; &nbsp; # Tell everyone about it! &nbsp; &nbsp; &nbsp; #print &quot;Block {} has been added to blockchain!&quot;.format(block_to_add.index) &nbsp; &nbsp; &nbsp; #print &quot;Hash: {}\\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; &nbsp; print &quot;DogCoin&quot; &nbsp; &nbsp; &nbsp; print &quot;---------------&quot; &nbsp; &nbsp; &nbsp; print &quot;block index: {}&quot;.format(block_to_add.index) &nbsp; &nbsp; &nbsp; print &quot;timestamp: {}&quot;.format(block_to_add. timestamp) &nbsp; &nbsp; &nbsp; print &quot;data: {}&quot;.format(block_to_add. data) &nbsp; &nbsp; &nbsp; print &quot;previous_hash: &nbsp;{}&quot;.format(block_to_add. previous_hash) &nbsp; &nbsp; &nbsp; print &quot;hash: {}\\n&quot;.format(block_to_add.hash) &nbsp; &nbsp; &nbsp; print &quot;---------------&quot; 演示输出： DogCoin --------------- block index: 0 timestamp: 2018-03-15 13:59:12.750000 data: Genesis Block previous_hash:&nbsp; 0 hash:978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1 &nbsp; --------------- DogCoin --------------- block index: 1 timestamp: 2018-03-15 13:59:12.828000 data: Hey! I&#39;m block 1 previous_hash:&nbsp;978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1 hash:0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa &nbsp; --------------- DogCoin --------------- block index: 2 timestamp: 2018-03-15 13:59:12.906000 data: Hey! I&#39;m block 2 previous_hash:&nbsp; 0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa hash:7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775 &nbsp; --------------- DogCoin --------------- block index: 3 timestamp: 2018-03-15 13:59:12.984000 data: Hey! I&#39;m block 3 previous_hash:&nbsp;7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775 hash:c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f &nbsp; --------------- DogCoin --------------- block index: 4 timestamp: 2018-03-15 13:59:13.078000 data: Hey! I&#39;m block 4 previous_hash:&nbsp;c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f hash:4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998 &nbsp; --------------- DogCoin --------------- block index: 5 timestamp: 2018-03-15 13:59:13.156000 data: Hey! I&#39;m block 5 previous_hash:&nbsp;4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998 hash:95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8 &nbsp; --------------- DogCoin --------------- block index: 6 timestamp: 2018-03-15 13:59:13.250000 data: Hey! I&#39;m block 6 previous_hash:&nbsp;95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8 hash:3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe &nbsp; --------------- DogCoin --------------- block index: 7 timestamp: 2018-03-15 13:59:13.343000 data: Hey! I&#39;m block 7 previous_hash:&nbsp;3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe hash:54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287 &nbsp; --------------- DogCoin --------------- block index: 8 timestamp: 2018-03-15 13:59:13.421000 data: Hey! I&#39;m block 8 previous_hash:&nbsp;54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287 hash:27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f &nbsp; --------------- DogCoin --------------- block index: 9 timestamp: 2018-03-15 13:59:13.500000 data: Hey! I&#39;m block 9 previous_hash:&nbsp;27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f hash:143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52 &nbsp; --------------- DogCoin --------------- block index: 10 timestamp: 2018-03-15 13:59:13.578000 data: Hey! I&#39;m block 10 previous_hash:&nbsp;143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52 hash:1a66358fb32db223a2f998061e3bc90354b0ddb8d2c3a013cc86c63060c5c547 &nbsp; --------------- 阅读更多","@type":"BlogPosting","url":"/2018/03/15/08044962dc31bd21750679e3918a9031.html","headline":"Python代码构建小型区块链DogCoin（ 狗币）","dateModified":"2018-03-15T00:00:00+08:00","datePublished":"2018-03-15T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/03/15/08044962dc31bd21750679e3918a9031.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>Python代码构建小型区块链DogCoin（ 狗币）</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p align="center" style="background:#FFFFFF;"><span style="color:#333333;">Python</span><span style="color:#333333;">代码构建小型区块链</span><span style="color:#333333;">DogCoin</span><span style="color:#333333;">（</span> <span style="color:#333333;">狗币）</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp; 本文介绍了如何使用</span><span style="color:#333333;">python</span><span style="color:#333333;">构建一个小型的区块链技术，使用</span><span style="color:#333333;">Python2.7</span><span style="color:#333333;">实现，代码不到</span><span style="color:#333333;">50</span><span style="color:#333333;">行。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp;这个简单的区块链。这将被称为</span><span style="color:#333333;">DogCoin</span><span style="color:#333333;">（</span> <span style="color:#333333;">狗币）。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">（一）&nbsp;</span><span style="color:#333333;">定义区块链的块结构。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp; 像比特币一样，我们的</span><span style="color:#333333;">DogCoin</span><span style="color:#333333;">每个区块将包括作为区块的索引的哈希值，时间戳，数据以及前一个块的哈希值和新的哈希值。如下图：</span></p>
  <table border="1" cellspacing="0" cellpadding="0">
   <tbody>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">index</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">timestamp</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">data</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">previous_hash</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">hash</span></p></td> 
    </tr>
   </tbody>
  </table>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">Python</span><span style="color:#333333;">代码：</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">import hashlibas hasher</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">class Block:</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; def __init__(self, index, timestamp, data,previous_hash):</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; self.index = index</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; self.timestamp = timestamp</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; self.data = data</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; self.previous_hash = previous_hash</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; self.hash = self.hash_block()</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; def hash_block(self):</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; sha = hasher.sha256()</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; sha.update(str(self.index) + </span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.timestamp) + </span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.data) + </span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str(self.previous_hash))</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; return sha.hexdigest()</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;&nbsp;&nbsp; </span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">（二）创建创世区块。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp; &nbsp;如前所述，每个块都需要上一个块的信息。但是这就出现了一个问题：区块链中的第一个区块，也就是“创世区块”，如何创建？</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp; &nbsp;按照模块化原则，我们将创建一个函数，只需返回一个创世区块，该区块的索引为</span><span style="color:#333333;">0</span><span style="color:#333333;">，它在“</span><span style="color:#333333;">previous hash</span><span style="color:#333333;">”参数中具有任意数据值和任意值。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">如下图：</span></p>
  <table border="1" cellspacing="0" cellpadding="0">
   <tbody>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">Index</span><span style="color:#333333;">：</span><span style="color:#333333;">0</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">timestamp</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">Data</span><span style="color:#333333;">：</span><span style="color:#333333;">Genesis Block</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">previous_hash</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">hash</span></p></td> 
    </tr>
   </tbody>
  </table>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">Python</span><span style="color:#333333;">代码：</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">import datetime as date</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">def create_genesis_block():</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; # Manually construct a block with</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; # index zero and arbitrary previous hash</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; return Block(0, date.datetime.now(),"Genesis Block", "0")</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">（三）</span><span style="color:#333333;">创建后续区块。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp; 我们需要一个新的函数来生成区块链中的后续区块。该函数将链中的前一个区块作为参数，创建要生成的区块的数据，并返回具有其相应数据的新块。新产生的区块会存储先前区块中的哈希值，区块链的完整性随着每个新的区块而增加。这个哈希链作为加密证明，有助于确保一旦新区块被添加到区块链中，它不能被替换或删除。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">如下图：</span></p>
  <table border="1" cellspacing="0" cellpadding="0">
   <tbody>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">Index</span><span style="color:#333333;">：</span><span style="color:#333333;">2</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">timestamp</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">Data</span><span style="color:#333333;">：</span><span style="color:#333333;">Hey! I'm block 2</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">previous_hash</span></p></td> 
    </tr>
    <tr>
     <td valign="top"><p align="left"><span style="color:#333333;">hash</span></p></td> 
    </tr>
   </tbody>
  </table>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">Python</span><span style="color:#333333;">代码：</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">def next_block(last_block):</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; this_index = last_block.index + 1</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; this_timestamp = date.datetime.now()</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; this_data = "Hey! I'm block " +str(this_index)</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; this_hash = last_block.hash</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; return Block(this_index, this_timestamp,this_data, this_hash)&nbsp; </span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">（四）创建（组装）我们的区块链</span><span style="color:#333333;">DogCoin</span><span style="color:#333333;">。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#40464C;background:#FDFEFD;">&nbsp; &nbsp; &nbsp; &nbsp;区块链其实就是一个将普通指针换成哈希指针的链表，所以每个区块不仅包含了上一个区块的地址，还包括了上一个区块的哈希值</span><span style="color:#40464C;background:#FDFEFD;">。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp; &nbsp;列表的第一个元素是创世区块，然后需要添加后续区块。本例中，我们只添加了</span><span style="color:#333333;">10</span><span style="color:#333333;">个新的块，用</span><span style="color:#333333;">for</span><span style="color:#333333;">循环搞定。</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">如下图：</span></p>
  <table cellpadding="0" cellspacing="0">
   <tbody>
    <tr>
     <td>
      <div> 
       <p><span style="color:#333333;">后续区块（</span><span style="color:#333333;">4</span><span style="color:#333333;">）</span></p> 
      </div></td> 
    </tr>
   </tbody>
  </table>
  <table cellpadding="0" cellspacing="0">
   <tbody>
    <tr>
     <td>
      <div> 
       <p><span style="color:#333333;">后续区块（</span><span style="color:#333333;">3</span><span style="color:#333333;">）</span></p> 
      </div></td> 
    </tr>
   </tbody>
  </table>
  <table cellpadding="0" cellspacing="0">
   <tbody>
    <tr>
     <td>
      <div> 
       <p><span style="color:#333333;">后续区块（</span><span style="color:#333333;">2</span><span style="color:#333333;">）</span></p> 
      </div></td> 
    </tr>
   </tbody>
  </table>
  <table cellpadding="0" cellspacing="0">
   <tbody>
    <tr>
     <td>
      <div> 
       <p><span style="color:#333333;">创世区块（</span><span style="color:#333333;">1</span><span style="color:#333333;">）</span></p> 
      </div></td> 
    </tr>
   </tbody>
  </table>
  <p align="left" style="background:#FFFFFF;"> <span style="color:#333333;">&nbsp;</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">Python</span><span style="color:#333333;">代码：</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;"># Create theblockchain and add the genesis block</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">blockchain = [create_genesis_block()]</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">previous_block =blockchain[0]</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;"># How manyblocks should we add to the chain</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;"># after thegenesis block</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">num_of_blocks_to_add= 20</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;"># Add blocks tothe chain</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">for i &nbsp;in range(0, num_of_blocks_to_add):</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; block_to_add = next_block(previous_block)</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; blockchain.append(block_to_add)</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; previous_block = block_to_add</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; # Tell everyone about it!</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; print "Block #{} has been added to blockchain!".format(block_to_add.index)</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; print "Hash:{}\n".format(block_to_add.hash)</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; </span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">（五）打印区块链</span><span style="color:#333333;">DogCoin</span><span style="color:#333333;">的每个块！</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp; &nbsp; &nbsp; &nbsp;我们的区块链生效了！</span></p>
  <p align="left" style="background:#FFFFFF;"><span style="color:#333333;">&nbsp;</span></p>
  <p>完整Python.代码如下：（python 2.7 idle）</p>
  <p align="left" style="background:#FFFFFF;">import hashlib as hasher</p>class Block:
  <br>&nbsp; &nbsp; &nbsp; def __init__(self, index, timestamp, data, previous_hash):
  <br>&nbsp; &nbsp; &nbsp; &nbsp; self.index = index
  <br>&nbsp; &nbsp; &nbsp; &nbsp; self.timestamp = timestamp
  <br>&nbsp; &nbsp; &nbsp; &nbsp; self.data = data
  <br>&nbsp; &nbsp; &nbsp; &nbsp; self.previous_hash = previous_hash
  <br>&nbsp; &nbsp; &nbsp; &nbsp; self.hash = self.hash_block()
  <br>
  <br>
  <br>&nbsp; &nbsp; &nbsp; def hash_block(self):
  <br>&nbsp; &nbsp; &nbsp; &nbsp; sha = hasher.sha256()
  <br>&nbsp; &nbsp; &nbsp; &nbsp; sha.update(str(self.index) +&nbsp;
  <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.timestamp) +&nbsp;
  <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.data) +&nbsp;
  <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;str(self.previous_hash))
  <br>&nbsp; &nbsp; &nbsp; &nbsp; return sha.hexdigest()
  <br>&nbsp; &nbsp;&nbsp;
  <br>import datetime as date
  <br>
  <br>def create_genesis_block():
  <br>&nbsp; &nbsp; &nbsp; # Manually construct a block with
  <br>&nbsp; &nbsp; &nbsp; # index zero and arbitrary previous hash
  <br>&nbsp; &nbsp; &nbsp; return Block(0, date.datetime.now(), "Genesis Block", "0")
  <br>
  <p><br></p>
  <p>def next_block(last_block):</p>&nbsp; &nbsp; &nbsp; this_index = last_block.index + 1
  <br>&nbsp; &nbsp; &nbsp; this_timestamp = date.datetime.now()
  <br>&nbsp; &nbsp; &nbsp; this_data = "Hey! I'm block " + str(this_index)
  <br>&nbsp; &nbsp; &nbsp; this_hash = last_block.hash
  <br>&nbsp; &nbsp; &nbsp; return Block(this_index, this_timestamp, this_data, this_hash) &nbsp;
  <br>
  <br># Create the blockchain and add the genesis block
  <br>blockchain = [create_genesis_block()]
  <br>previous_block = blockchain[0]
  <br>
  <br>#Print genesis block
  <br>print "DogCoin"
  <br>print "---------------"
  <br>print "block index: {}".format(blockchain[0].index)
  <span> </span>
  <br>print "timestamp: {}".format(blockchain[0]. timestamp)
  <span> </span>
  <br>print "data: {}".format(blockchain[0]. data)
  <span> </span>
  <br>print "previous_hash: &nbsp;{}".format(blockchain[0]. previous_hash)
  <span> </span>
  <br>print "hash: {}\n".format(blockchain[0].hash)
  <br>print "---------------"
  <br>
  <br># How many blocks should we add to the chain
  <br># after the genesis block
  <br>num_of_blocks_to_add = 10
  <br>
  <br># Add blocks to the chain
  <br>for i in range(0, num_of_blocks_to_add):
  <br>&nbsp; &nbsp; &nbsp; block_to_add = next_block(previous_block)
  <br>&nbsp; &nbsp; &nbsp; blockchain.append(block_to_add)
  <br>&nbsp; &nbsp; &nbsp; previous_block = block_to_add
  <br>&nbsp; &nbsp; &nbsp; # Tell everyone about it!
  <br>&nbsp; &nbsp; &nbsp; #print "Block {} has been added to blockchain!".format(block_to_add.index)
  <br>&nbsp; &nbsp; &nbsp; #print "Hash: {}\n".format(block_to_add.hash)
  <br>&nbsp; &nbsp; &nbsp; print "DogCoin"
  <br>&nbsp; &nbsp; &nbsp; print "---------------"
  <br>&nbsp; &nbsp; &nbsp; print "block index: {}".format(block_to_add.index)
  <span> </span>
  <br>&nbsp; &nbsp; &nbsp; print "timestamp: {}".format(block_to_add. timestamp)
  <span> </span>
  <br>&nbsp; &nbsp; &nbsp; print "data: {}".format(block_to_add. data)
  <span> </span>
  <br>&nbsp; &nbsp; &nbsp; print "previous_hash: &nbsp;{}".format(block_to_add. previous_hash)
  <span> </span>
  <br>&nbsp; &nbsp; &nbsp; print "hash: {}\n".format(block_to_add.hash)
  <br>
  <p>&nbsp; &nbsp; &nbsp; print "---------------"</p>
  <p></p>
  <p>演示输出：</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 0</p>
  <p>timestamp: 2018-03-15 13:59:12.750000</p>
  <p>data: Genesis Block</p>
  <p>previous_hash:&nbsp; 0</p>
  <p>hash:978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 1</p>
  <p>timestamp: 2018-03-15 13:59:12.828000</p>
  <p>data: Hey! I'm block 1</p>
  <p>previous_hash:&nbsp;978123c9edd1b41d5e35ce5126169cbd9f6f63efbc538b4d9ca63bb26da1a9b1</p>
  <p>hash:0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 2</p>
  <p>timestamp: 2018-03-15 13:59:12.906000</p>
  <p>data: Hey! I'm block 2</p>
  <p>previous_hash:&nbsp; 0de84484d23722cde7987a9dbe4ed0af9e415679888328fc3b9c069827727cfa</p>
  <p>hash:7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 3</p>
  <p>timestamp: 2018-03-15 13:59:12.984000</p>
  <p>data: Hey! I'm block 3</p>
  <p>previous_hash:&nbsp;7c0ce5d65626e4af2907ef6c8acfe05e9b8c39dcd5229583c0d4bc4f3d66a775</p>
  <p>hash:c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 4</p>
  <p>timestamp: 2018-03-15 13:59:13.078000</p>
  <p>data: Hey! I'm block 4</p>
  <p>previous_hash:&nbsp;c1b7d949eea10af88659713b6145bd5069221d8fd49b337be8a8780684e0a16f</p>
  <p>hash:4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 5</p>
  <p>timestamp: 2018-03-15 13:59:13.156000</p>
  <p>data: Hey! I'm block 5</p>
  <p>previous_hash:&nbsp;4915c65e6dc42d18cdd5489f458181f746aefafd7bc8b43e8c47c68dd0c90998</p>
  <p>hash:95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 6</p>
  <p>timestamp: 2018-03-15 13:59:13.250000</p>
  <p>data: Hey! I'm block 6</p>
  <p>previous_hash:&nbsp;95f61d76cabcf80e0ee3549ae88aa96f7b40e76f487ab1baa4ce0dee79fefbe8</p>
  <p>hash:3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 7</p>
  <p>timestamp: 2018-03-15 13:59:13.343000</p>
  <p>data: Hey! I'm block 7</p>
  <p>previous_hash:&nbsp;3206120a85d02a7b2b3ab85188913db304e6929141b0e4956a5ab65e21e508fe</p>
  <p>hash:54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 8</p>
  <p>timestamp: 2018-03-15 13:59:13.421000</p>
  <p>data: Hey! I'm block 8</p>
  <p>previous_hash:&nbsp;54c4229a20dbe5e014b930eb31438c84bc6732240d023c8016dc17ad7b1b0287</p>
  <p>hash:27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 9</p>
  <p>timestamp: 2018-03-15 13:59:13.500000</p>
  <p>data: Hey! I'm block 9</p>
  <p>previous_hash:&nbsp;27d4561bd21fd36a794926139de39a3ea32ced70ac19e644544884ea923d418f</p>
  <p>hash:143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <p>DogCoin</p>
  <p>---------------</p>
  <p>block index: 10</p>
  <p>timestamp: 2018-03-15 13:59:13.578000</p>
  <p>data: Hey! I'm block 10</p>
  <p>previous_hash:&nbsp;143821446e2ccc4d7695242a591e0cd69f689a4b5f3c4c861c736deb8e5bee52</p>
  <p>hash:1a66358fb32db223a2f998061e3bc90354b0ddb8d2c3a013cc86c63060c5c547</p>
  <p>&nbsp;</p>
  <p>---------------</p>
  <br>
  <p><span style="color:rgb(51,51,51);"></span></p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u012885320/article/details/79566726,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u012885320/article/details/79566726,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
