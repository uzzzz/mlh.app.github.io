<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>用 Python 构建一个极小的区块链 Linux 中国 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="用 Python 构建一个极小的区块链 Linux 中国" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。 -- Gerald Nash 有用的原文链接 请访问文末的“ 原文链接”获得可点击的文内链接、全尺寸原图和相关文章。 致谢 编译自　|　https://medium.com/crypto-currently/lets-build-the-tiniest-blockchain-e70965a248b&nbsp; 　作者　|　Gerald Nash 　译者　|　Xingyu.Wang (wxy) ? ? ? ? ? 共计翻译：223&nbsp;篇 贡献时间：1330 天 虽然有些人认为区块链是一个早晚会出现问题的解决方案，但是毫无疑问，这个创新技术是一个计算机技术上的奇迹。那么，究竟什么是区块链呢？ 区块链 以比特币Bitcoin或其它加密货币按时间顺序公开地记录交易的数字账本。 更通俗的说，它是一个公开的数据库，新的数据存储在被称之为区块block的容器中，并被添加到一个不可变的链chain中（因此被称为区块链blockchain），之前添加的数据也在该链中。对于比特币或其它加密货币来说，这些数据就是一组组交易，不过，也可以是其它任何类型的数据。 区块链技术带来了全新的、完全数字化的货币，如比特币和莱特币Litecoin，它们并不由任何中心机构管理。这给那些认为当今的银行系统是骗局并将最终走向失败的人带来了自由。区块链也革命性地改变了分布式计算的技术形式，如以太坊Ethereum就引入了一种有趣的概念：智能合约smart contract[1]。 在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。 不到 50 行代码的区块链 我们首先将从定义我们的区块是什么开始。在区块链中，每个区块随同时间戳及可选的索引一同存储。在 SnakeCoin 中，我们会存储这两者。为了确保整个区块链的完整性，每个区块都会有一个自识别的哈希值。如在比特币中，每个区块的哈希是该块的索引、时间戳、数据和前一个区块的哈希值等数据的加密哈希值。这里提及的“数据”可以是任何你想要的数据。 import hashlib as hasher class Block: &nbsp;def __init__(self, index, timestamp, data, previous_hash): &nbsp; &nbsp;self.index = index &nbsp; &nbsp;self.timestamp = timestamp &nbsp; &nbsp;self.data = data &nbsp; &nbsp;self.previous_hash = previous_hash &nbsp; &nbsp;self.hash = self.hash_block() &nbsp; &nbsp;def hash_block(self): &nbsp; &nbsp;sha = hasher.sha256() &nbsp; &nbsp;sha.update(str(self.index) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.timestamp) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.data) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.previous_hash)) &nbsp; &nbsp;return sha.hexdigest() 真棒，现在我们有了区块的结构了，不过我们需要创建的是一个区块链。我们需要把区块添加到一个实际的链中。如我们之前提到过的，每个区块都需要前一个区块的信息。但问题是，该区块链中的第一个区块在哪里？好吧，这个第一个区块，也称之为创世区块，是一个特别的区块。在很多情况下，它是手工添加的，或通过独特的逻辑添加的。 我们将创建一个函数来简单地返回一个创世区块解决这个问题。这个区块的索引为 0 ，其包含一些任意的数据值，其“前一哈希值”参数也是任意值。 import datetime as date def create_genesis_block(): &nbsp;# Manually construct a block with &nbsp;# index zero and arbitrary previous hash &nbsp;return Block(0, date.datetime.now(), &quot;Genesis Block&quot;, &quot;0&quot;) 现在我们可以创建创世区块了，我们需要一个函数来生成该区块链中的后继区块。该函数将获取链中的前一个区块作为参数，为要生成的区块创建数据，并用相应的数据返回新的区块。新的区块的哈希值来自于之前的区块，这样每个新的区块都提升了该区块链的完整性。如果我们不这样做，外部参与者就很容易“改变过去”，把我们的链替换为他们的新链了。这个哈希链起到了加密的证明作用，并有助于确保一旦一个区块被添加到链中，就不能被替换或移除。 def next_block(last_block): &nbsp;this_index = last_block.index + 1 &nbsp;this_timestamp = date.datetime.now() &nbsp;this_data = &quot;Hey! I&#39;m block &quot; + str(this_index) &nbsp;this_hash = last_block.hash &nbsp;return Block(this_index, this_timestamp, this_data, this_hash) 这就是主要的部分。 现在我们能创建自己的区块链了！在这里，这个区块链是一个简单的 Python 列表。其第一个的元素是我们的创世区块，我们会添加后继区块。因为 SnakeCoin 是一个极小的区块链，我们仅仅添加了 20 个区块。我们通过循环来完成它。 # Create the blockchain and add the genesis block blockchain = [create_genesis_block()] previous_block = blockchain[0] # How many blocks should we add to the chain # after the genesis block num_of_blocks_to_add = 20 # Add blocks to the chain for i in range(0, num_of_blocks_to_add): &nbsp;block_to_add = next_block(previous_block) &nbsp;blockchain.append(block_to_add) &nbsp;previous_block = block_to_add &nbsp;# Tell everyone about it! &nbsp;print &quot;Block #{} has been added to the blockchain!&quot;.format(block_to_add.index) &nbsp;print &quot;Hash: {}\n&quot;.format(block_to_add.hash) 让我们看看我们的成果： 别担心，它将一直添加到 20 个区块 很好，我们的区块链可以工作了。如果你想要在主控台查看更多的信息，你可以编辑其完整的源代码[2]并输出每个区块的时间戳或数据。 这就是 SnakeCoin 所具有的功能。要使 SnakeCoin 达到现今的产品级的区块链的高度，我们需要添加更多的功能，如服务器层，以在多台机器上跟踪链的改变，并通过工作量证明算法（POW）[3]来限制给定时间周期内可以添加的区块数量。 如果你想了解更多技术细节，你可以在这里[4]查看最初的比特币白皮书[4]。 让这个极小区块链稍微变大些 这个极小的区块链及其简单，自然也相对容易完成。但是因其简单也带来了一些缺陷。首先，SnakeCoin 仅能运行在单一的一台机器上，所以它相距分布式甚远，更别提去中心化了。其次，区块添加到区块链中的速度同在主机上创建一个 Python 对象并添加到列表中一样快。在我们的这个简单的区块链中，这不是问题，但是如果我们想让 SnakeCoin 成为一个实际的加密货币，我们就需要控制在给定时间内能创建的区块（和币）的数量。 从现在开始，SnakeCoin 中的“数据”将是交易数据，每个区块的“数据”字段都将是一些交易信息的列表。接着我们来定义“交易”。每个“交易”是一个 JSON 对象，其记录了币的发送者、接收者和转移的 SnakeCoin 数量。注：交易信息是 JSON 格式，原因我很快就会说明。 { &nbsp;&quot;from&quot;: &quot;71238uqirbfh894-random-public-key-a-alkjdflakjfewn204ij&quot;, &nbsp;&quot;to&quot;: &quot;93j4ivnqiopvh43-random-public-key-b-qjrgvnoeirbnferinfo&quot;, &nbsp;&quot;amount&quot;: 3 } 现在我们知道了交易信息看起来的样子了，我们需要一个办法来将其加到我们的区块链网络中的一台计算机（称之为节点）中。要做这个事情，我们会创建一个简单的 HTTP 服务器，以便每个用户都可以让我们的节点知道发生了新的交易。节点可以接受&nbsp; POST 请求，请求数据为如上的交易信息。这就是为什么交易信息是 JSON 格式的：我们需要它们可以放在请求信息中传递给服务器。 $ pip install flask # 首先安装 Web 服务器框架 from flask import Flask from flask import request node = Flask(__name__) # Store the transactions that # this node has in a list this_nodes_transactions = [] @node.route(&#39;/txion&#39;, methods=[&#39;POST&#39;]) def transaction(): &nbsp;if request.method == &#39;POST&#39;: &nbsp; &nbsp;# On each new POST request, &nbsp; &nbsp;# we extract the transaction data &nbsp; &nbsp;new_txion = request.get_json() &nbsp; &nbsp;# Then we add the transaction to our list &nbsp; &nbsp;this_nodes_transactions.append(new_txion) &nbsp; &nbsp;# Because the transaction was successfully &nbsp; &nbsp;# submitted, we log it to our console &nbsp; &nbsp;print &quot;New transaction&quot; &nbsp; &nbsp;print &quot;FROM: {}&quot;.format(new_txion[&#39;from&#39;]) &nbsp; &nbsp;print &quot;TO: {}&quot;.format(new_txion[&#39;to&#39;]) &nbsp; &nbsp;print &quot;AMOUNT: {}\n&quot;.format(new_txion[&#39;amount&#39;]) &nbsp; &nbsp;# Then we let the client know it worked out &nbsp; &nbsp;return &quot;Transaction submission successful\n&quot; node.run() 真棒！现在我们有了一种保存用户彼此发送 SnakeCoin 的记录的方式。这就是为什么人们将区块链称之为公共的、分布式账本：所有的交易信息存储给所有人看，并被存储在该网络的每个节点上。 但是，有个问题：人们从哪里得到 SnakeCoin 呢？现在还没有办法得到，还没有一个称之为 SnakeCoin 这样的东西，因为我们还没有创建和分发任何一个币。要创建新的币，人们需要“挖”一个新的 SnakeCoin 区块。当他们成功地挖到了新区块，就会创建出一个新的 SnakeCoin ，并奖励给挖出该区块的人（矿工）。一旦挖矿的矿工将 SnakeCoin 发送给别人，这个币就流通起来了。 我们不想让挖新的 SnakeCoin 区块太容易，因为这将导致 SnakeCoin 太多了，其价值就变低了；同样，我们也不想让它变得太难，因为如果没有足够的币供每个人使用，它们对于我们来说就太昂贵了。为了控制挖新的 SnakeCoin 区块的难度，我们会实现一个工作量证明Proof-of-Work[3]（PoW）算法。工作量证明基本上就是一个生成某个项目比较难，但是容易验证（其正确性）的算法。这个项目被称之为“证明”，听起来就像是它证明了计算机执行了特定的工作量。 在 SnakeCoin 中，我们创建了一个简单的 PoW 算法。要创建一个新区块，矿工的计算机需要递增一个数字，当该数字能被 9 （“SnakeCoin” 这个单词的字母数）整除时，这就是最后这个区块的证明数字，就会挖出一个新的 SnakeCoin 区块，而该矿工就会得到一个新的 SnakeCoin。 # ...blockchain # ...Block class definition miner_address = &quot;q3nf394hjg-random-miner-address-34nf3i4nflkn3oi&quot; def proof_of_work(last_proof): &nbsp;# Create a variable that we will use to find &nbsp;# our next proof of work &nbsp;incrementor = last_proof + 1 &nbsp;# Keep incrementing the incrementor until &nbsp;# it&#39;s equal to a number divisible by 9 &nbsp;# and the proof of work of the previous &nbsp;# block in the chain &nbsp;while not (incrementor % 9 == 0 and incrementor % last_proof == 0): &nbsp; &nbsp;incrementor += 1 &nbsp;# Once that number is found, &nbsp;# we can return it as a proof &nbsp;# of our work &nbsp;return incrementor @node.route(&#39;/mine&#39;, methods = [&#39;GET&#39;]) def mine(): &nbsp;# Get the last proof of work &nbsp;last_block = blockchain[len(blockchain) - 1] &nbsp;last_proof = last_block.data[&#39;proof-of-work&#39;] &nbsp;# Find the proof of work for &nbsp;# the current block being mined &nbsp;# Note: The program will hang here until a new &nbsp;# &nbsp; &nbsp; &nbsp; proof of work is found &nbsp;proof = proof_of_work(last_proof) &nbsp;# Once we find a valid proof of work, &nbsp;# we know we can mine a block so &nbsp;# we reward the miner by adding a transaction &nbsp;this_nodes_transactions.append( &nbsp; &nbsp;{ &quot;from&quot;: &quot;network&quot;, &quot;to&quot;: miner_address, &quot;amount&quot;: 1 } &nbsp;) &nbsp;# Now we can gather the data needed &nbsp;# to create the new block &nbsp;new_block_data = { &nbsp; &nbsp;&quot;proof-of-work&quot;: proof, &nbsp; &nbsp;&quot;transactions&quot;: list(this_nodes_transactions) &nbsp;} &nbsp;new_block_index = last_block.index + 1 &nbsp;new_block_timestamp = this_timestamp = date.datetime.now() &nbsp;last_block_hash = last_block.hash &nbsp;# Empty transaction list &nbsp;this_nodes_transactions[:] = [] &nbsp;# Now create the &nbsp;# new block! &nbsp;mined_block = Block( &nbsp; &nbsp;new_block_index, &nbsp; &nbsp;new_block_timestamp, &nbsp; &nbsp;new_block_data, &nbsp; &nbsp;last_block_hash &nbsp;) &nbsp;blockchain.append(mined_block) &nbsp;# Let the client know we mined a block &nbsp;return json.dumps({ &nbsp; &nbsp; &nbsp;&quot;index&quot;: new_block_index, &nbsp; &nbsp; &nbsp;&quot;timestamp&quot;: str(new_block_timestamp), &nbsp; &nbsp; &nbsp;&quot;data&quot;: new_block_data, &nbsp; &nbsp; &nbsp;&quot;hash&quot;: last_block_hash &nbsp;}) + &quot;\n&quot; 现在，我们能控制特定的时间段内挖到的区块数量，并且我们给了网络中的人新的币，让他们彼此发送。但是如我们说的，我们只是在一台计算机上做的。如果区块链是去中心化的，我们怎样才能确保每个节点都有相同的链呢？要做到这一点，我们会使每个节点都广播其（保存的）链的版本，并允许它们接受其它节点的链。然后，每个节点会校验其它节点的链，以便网络中每个节点都能够达成最终的链的共识。这称之为共识算法consensus algorithm[5]。 我们的共识算法很简单：如果一个节点的链与其它的节点的不同（例如有冲突），那么最长的链保留，更短的链会被删除。如果我们网络上的链没有了冲突，那么就可以继续了。 @node.route(&#39;/blocks&#39;, methods=[&#39;GET&#39;]) def get_blocks(): &nbsp;chain_to_send = blockchain &nbsp;# Convert our blocks into dictionaries &nbsp;# so we can send them as json objects later &nbsp;for block in chain_to_send: &nbsp; &nbsp;block_index = str(block.index) &nbsp; &nbsp;block_timestamp = str(block.timestamp) &nbsp; &nbsp;block_data = str(block.data) &nbsp; &nbsp;block_hash = block.hash &nbsp; &nbsp;block = { &nbsp; &nbsp; &nbsp;&quot;index&quot;: block_index, &nbsp; &nbsp; &nbsp;&quot;timestamp&quot;: block_timestamp, &nbsp; &nbsp; &nbsp;&quot;data&quot;: block_data, &nbsp; &nbsp; &nbsp;&quot;hash&quot;: block_hash &nbsp; &nbsp;} &nbsp;# Send our chain to whomever requested it &nbsp;chain_to_send = json.dumps(chain_to_send) &nbsp;return chain_to_send def find_new_chains(): &nbsp;# Get the blockchains of every &nbsp;# other node &nbsp;other_chains = [] &nbsp;for node_url in peer_nodes: &nbsp; &nbsp;# Get their chains using a GET request &nbsp; &nbsp;block = requests.get(node_url + &quot;/blocks&quot;).content &nbsp; &nbsp;# Convert the JSON object to a Python dictionary &nbsp; &nbsp;block = json.loads(block) &nbsp; &nbsp;# Add it to our list &nbsp; &nbsp;other_chains.append(block) &nbsp;return other_chains def consensus(): &nbsp;# Get the blocks from other nodes &nbsp;other_chains = find_new_chains() &nbsp;# If our chain isn&#39;t longest, &nbsp;# then we store the longest chain &nbsp;longest_chain = blockchain &nbsp;for chain in other_chains: &nbsp; &nbsp;if len(longest_chain) &lt; len(chain): &nbsp; &nbsp; &nbsp;longest_chain = chain &nbsp;# If the longest chain wasn&#39;t ours, &nbsp;# then we set our chain to the longest &nbsp;blockchain = longest_chain 我们差不多就要完成了。在运行了完整的 SnakeCoin 服务器代码[6]之后，在你的终端可以运行如下代码。（假设你已经安装了 cCUL）。 1、创建交易 curl &quot;localhost:5000/txion&quot; \ -H &quot;Content-Type: application/json&quot; \ -d &#39;{&quot;from&quot;: &quot;akjflw&quot;, &quot;to&quot;:&quot;fjlakdj&quot;, &quot;amount&quot;: 3}&#39; 2、挖一个新区块 curl localhost:5000/mine 3、 查看结果。从客户端窗口，我们可以看到。 对代码做下美化处理，我们看到挖矿后我们得到的新区块的信息： { &quot;index&quot;: 2, &quot;data&quot;: { &quot;transactions&quot;: [ { &quot;to&quot;: &quot;fjlakdj&quot;, &quot;amount&quot;: 3, &quot;from&quot;: &quot;akjflw&quot; }, { &quot;to&quot;: &quot;q3nf394hjg-random-miner-address-34nf3i4nflkn3oi&quot;, &quot;amount&quot;: 1, &quot;from&quot;: &quot;network&quot; } ], &quot;proof-of-work&quot;: 36 }, &quot;hash&quot;: &quot;151edd3ef6af2e7eb8272245cb8ea91b4ecfc3e60af22d8518ef0bba8b4a6b18&quot;, &quot;timestamp&quot;: &quot;2017-07-23 11:23:10.140996&quot;} 大功告成！现在 SnakeCoin 可以运行在多个机器上，从而创建了一个网络，而且真实的 SnakeCoin 也能被挖到了。 你可以根据你的喜好去修改 SnakeCoin 服务器代码，并问各种问题了。 在下一篇（LCTT 译注：截止至本文翻译，作者还没有写出下一篇），我们将讨论创建一个 SnakeCoin 钱包，这样用户就可以发送、接收和存储他们的 SnakeCoin 了。 本文也入驻了「虎尔财经」专属频道，请查看今天推送的下一篇文章访问我们的区块链频道，并可获得专属奖励 token。 阅读更多" />
<meta property="og:description" content="在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。 -- Gerald Nash 有用的原文链接 请访问文末的“ 原文链接”获得可点击的文内链接、全尺寸原图和相关文章。 致谢 编译自　|　https://medium.com/crypto-currently/lets-build-the-tiniest-blockchain-e70965a248b&nbsp; 　作者　|　Gerald Nash 　译者　|　Xingyu.Wang (wxy) ? ? ? ? ? 共计翻译：223&nbsp;篇 贡献时间：1330 天 虽然有些人认为区块链是一个早晚会出现问题的解决方案，但是毫无疑问，这个创新技术是一个计算机技术上的奇迹。那么，究竟什么是区块链呢？ 区块链 以比特币Bitcoin或其它加密货币按时间顺序公开地记录交易的数字账本。 更通俗的说，它是一个公开的数据库，新的数据存储在被称之为区块block的容器中，并被添加到一个不可变的链chain中（因此被称为区块链blockchain），之前添加的数据也在该链中。对于比特币或其它加密货币来说，这些数据就是一组组交易，不过，也可以是其它任何类型的数据。 区块链技术带来了全新的、完全数字化的货币，如比特币和莱特币Litecoin，它们并不由任何中心机构管理。这给那些认为当今的银行系统是骗局并将最终走向失败的人带来了自由。区块链也革命性地改变了分布式计算的技术形式，如以太坊Ethereum就引入了一种有趣的概念：智能合约smart contract[1]。 在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。 不到 50 行代码的区块链 我们首先将从定义我们的区块是什么开始。在区块链中，每个区块随同时间戳及可选的索引一同存储。在 SnakeCoin 中，我们会存储这两者。为了确保整个区块链的完整性，每个区块都会有一个自识别的哈希值。如在比特币中，每个区块的哈希是该块的索引、时间戳、数据和前一个区块的哈希值等数据的加密哈希值。这里提及的“数据”可以是任何你想要的数据。 import hashlib as hasher class Block: &nbsp;def __init__(self, index, timestamp, data, previous_hash): &nbsp; &nbsp;self.index = index &nbsp; &nbsp;self.timestamp = timestamp &nbsp; &nbsp;self.data = data &nbsp; &nbsp;self.previous_hash = previous_hash &nbsp; &nbsp;self.hash = self.hash_block() &nbsp; &nbsp;def hash_block(self): &nbsp; &nbsp;sha = hasher.sha256() &nbsp; &nbsp;sha.update(str(self.index) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.timestamp) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.data) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.previous_hash)) &nbsp; &nbsp;return sha.hexdigest() 真棒，现在我们有了区块的结构了，不过我们需要创建的是一个区块链。我们需要把区块添加到一个实际的链中。如我们之前提到过的，每个区块都需要前一个区块的信息。但问题是，该区块链中的第一个区块在哪里？好吧，这个第一个区块，也称之为创世区块，是一个特别的区块。在很多情况下，它是手工添加的，或通过独特的逻辑添加的。 我们将创建一个函数来简单地返回一个创世区块解决这个问题。这个区块的索引为 0 ，其包含一些任意的数据值，其“前一哈希值”参数也是任意值。 import datetime as date def create_genesis_block(): &nbsp;# Manually construct a block with &nbsp;# index zero and arbitrary previous hash &nbsp;return Block(0, date.datetime.now(), &quot;Genesis Block&quot;, &quot;0&quot;) 现在我们可以创建创世区块了，我们需要一个函数来生成该区块链中的后继区块。该函数将获取链中的前一个区块作为参数，为要生成的区块创建数据，并用相应的数据返回新的区块。新的区块的哈希值来自于之前的区块，这样每个新的区块都提升了该区块链的完整性。如果我们不这样做，外部参与者就很容易“改变过去”，把我们的链替换为他们的新链了。这个哈希链起到了加密的证明作用，并有助于确保一旦一个区块被添加到链中，就不能被替换或移除。 def next_block(last_block): &nbsp;this_index = last_block.index + 1 &nbsp;this_timestamp = date.datetime.now() &nbsp;this_data = &quot;Hey! I&#39;m block &quot; + str(this_index) &nbsp;this_hash = last_block.hash &nbsp;return Block(this_index, this_timestamp, this_data, this_hash) 这就是主要的部分。 现在我们能创建自己的区块链了！在这里，这个区块链是一个简单的 Python 列表。其第一个的元素是我们的创世区块，我们会添加后继区块。因为 SnakeCoin 是一个极小的区块链，我们仅仅添加了 20 个区块。我们通过循环来完成它。 # Create the blockchain and add the genesis block blockchain = [create_genesis_block()] previous_block = blockchain[0] # How many blocks should we add to the chain # after the genesis block num_of_blocks_to_add = 20 # Add blocks to the chain for i in range(0, num_of_blocks_to_add): &nbsp;block_to_add = next_block(previous_block) &nbsp;blockchain.append(block_to_add) &nbsp;previous_block = block_to_add &nbsp;# Tell everyone about it! &nbsp;print &quot;Block #{} has been added to the blockchain!&quot;.format(block_to_add.index) &nbsp;print &quot;Hash: {}\n&quot;.format(block_to_add.hash) 让我们看看我们的成果： 别担心，它将一直添加到 20 个区块 很好，我们的区块链可以工作了。如果你想要在主控台查看更多的信息，你可以编辑其完整的源代码[2]并输出每个区块的时间戳或数据。 这就是 SnakeCoin 所具有的功能。要使 SnakeCoin 达到现今的产品级的区块链的高度，我们需要添加更多的功能，如服务器层，以在多台机器上跟踪链的改变，并通过工作量证明算法（POW）[3]来限制给定时间周期内可以添加的区块数量。 如果你想了解更多技术细节，你可以在这里[4]查看最初的比特币白皮书[4]。 让这个极小区块链稍微变大些 这个极小的区块链及其简单，自然也相对容易完成。但是因其简单也带来了一些缺陷。首先，SnakeCoin 仅能运行在单一的一台机器上，所以它相距分布式甚远，更别提去中心化了。其次，区块添加到区块链中的速度同在主机上创建一个 Python 对象并添加到列表中一样快。在我们的这个简单的区块链中，这不是问题，但是如果我们想让 SnakeCoin 成为一个实际的加密货币，我们就需要控制在给定时间内能创建的区块（和币）的数量。 从现在开始，SnakeCoin 中的“数据”将是交易数据，每个区块的“数据”字段都将是一些交易信息的列表。接着我们来定义“交易”。每个“交易”是一个 JSON 对象，其记录了币的发送者、接收者和转移的 SnakeCoin 数量。注：交易信息是 JSON 格式，原因我很快就会说明。 { &nbsp;&quot;from&quot;: &quot;71238uqirbfh894-random-public-key-a-alkjdflakjfewn204ij&quot;, &nbsp;&quot;to&quot;: &quot;93j4ivnqiopvh43-random-public-key-b-qjrgvnoeirbnferinfo&quot;, &nbsp;&quot;amount&quot;: 3 } 现在我们知道了交易信息看起来的样子了，我们需要一个办法来将其加到我们的区块链网络中的一台计算机（称之为节点）中。要做这个事情，我们会创建一个简单的 HTTP 服务器，以便每个用户都可以让我们的节点知道发生了新的交易。节点可以接受&nbsp; POST 请求，请求数据为如上的交易信息。这就是为什么交易信息是 JSON 格式的：我们需要它们可以放在请求信息中传递给服务器。 $ pip install flask # 首先安装 Web 服务器框架 from flask import Flask from flask import request node = Flask(__name__) # Store the transactions that # this node has in a list this_nodes_transactions = [] @node.route(&#39;/txion&#39;, methods=[&#39;POST&#39;]) def transaction(): &nbsp;if request.method == &#39;POST&#39;: &nbsp; &nbsp;# On each new POST request, &nbsp; &nbsp;# we extract the transaction data &nbsp; &nbsp;new_txion = request.get_json() &nbsp; &nbsp;# Then we add the transaction to our list &nbsp; &nbsp;this_nodes_transactions.append(new_txion) &nbsp; &nbsp;# Because the transaction was successfully &nbsp; &nbsp;# submitted, we log it to our console &nbsp; &nbsp;print &quot;New transaction&quot; &nbsp; &nbsp;print &quot;FROM: {}&quot;.format(new_txion[&#39;from&#39;]) &nbsp; &nbsp;print &quot;TO: {}&quot;.format(new_txion[&#39;to&#39;]) &nbsp; &nbsp;print &quot;AMOUNT: {}\n&quot;.format(new_txion[&#39;amount&#39;]) &nbsp; &nbsp;# Then we let the client know it worked out &nbsp; &nbsp;return &quot;Transaction submission successful\n&quot; node.run() 真棒！现在我们有了一种保存用户彼此发送 SnakeCoin 的记录的方式。这就是为什么人们将区块链称之为公共的、分布式账本：所有的交易信息存储给所有人看，并被存储在该网络的每个节点上。 但是，有个问题：人们从哪里得到 SnakeCoin 呢？现在还没有办法得到，还没有一个称之为 SnakeCoin 这样的东西，因为我们还没有创建和分发任何一个币。要创建新的币，人们需要“挖”一个新的 SnakeCoin 区块。当他们成功地挖到了新区块，就会创建出一个新的 SnakeCoin ，并奖励给挖出该区块的人（矿工）。一旦挖矿的矿工将 SnakeCoin 发送给别人，这个币就流通起来了。 我们不想让挖新的 SnakeCoin 区块太容易，因为这将导致 SnakeCoin 太多了，其价值就变低了；同样，我们也不想让它变得太难，因为如果没有足够的币供每个人使用，它们对于我们来说就太昂贵了。为了控制挖新的 SnakeCoin 区块的难度，我们会实现一个工作量证明Proof-of-Work[3]（PoW）算法。工作量证明基本上就是一个生成某个项目比较难，但是容易验证（其正确性）的算法。这个项目被称之为“证明”，听起来就像是它证明了计算机执行了特定的工作量。 在 SnakeCoin 中，我们创建了一个简单的 PoW 算法。要创建一个新区块，矿工的计算机需要递增一个数字，当该数字能被 9 （“SnakeCoin” 这个单词的字母数）整除时，这就是最后这个区块的证明数字，就会挖出一个新的 SnakeCoin 区块，而该矿工就会得到一个新的 SnakeCoin。 # ...blockchain # ...Block class definition miner_address = &quot;q3nf394hjg-random-miner-address-34nf3i4nflkn3oi&quot; def proof_of_work(last_proof): &nbsp;# Create a variable that we will use to find &nbsp;# our next proof of work &nbsp;incrementor = last_proof + 1 &nbsp;# Keep incrementing the incrementor until &nbsp;# it&#39;s equal to a number divisible by 9 &nbsp;# and the proof of work of the previous &nbsp;# block in the chain &nbsp;while not (incrementor % 9 == 0 and incrementor % last_proof == 0): &nbsp; &nbsp;incrementor += 1 &nbsp;# Once that number is found, &nbsp;# we can return it as a proof &nbsp;# of our work &nbsp;return incrementor @node.route(&#39;/mine&#39;, methods = [&#39;GET&#39;]) def mine(): &nbsp;# Get the last proof of work &nbsp;last_block = blockchain[len(blockchain) - 1] &nbsp;last_proof = last_block.data[&#39;proof-of-work&#39;] &nbsp;# Find the proof of work for &nbsp;# the current block being mined &nbsp;# Note: The program will hang here until a new &nbsp;# &nbsp; &nbsp; &nbsp; proof of work is found &nbsp;proof = proof_of_work(last_proof) &nbsp;# Once we find a valid proof of work, &nbsp;# we know we can mine a block so &nbsp;# we reward the miner by adding a transaction &nbsp;this_nodes_transactions.append( &nbsp; &nbsp;{ &quot;from&quot;: &quot;network&quot;, &quot;to&quot;: miner_address, &quot;amount&quot;: 1 } &nbsp;) &nbsp;# Now we can gather the data needed &nbsp;# to create the new block &nbsp;new_block_data = { &nbsp; &nbsp;&quot;proof-of-work&quot;: proof, &nbsp; &nbsp;&quot;transactions&quot;: list(this_nodes_transactions) &nbsp;} &nbsp;new_block_index = last_block.index + 1 &nbsp;new_block_timestamp = this_timestamp = date.datetime.now() &nbsp;last_block_hash = last_block.hash &nbsp;# Empty transaction list &nbsp;this_nodes_transactions[:] = [] &nbsp;# Now create the &nbsp;# new block! &nbsp;mined_block = Block( &nbsp; &nbsp;new_block_index, &nbsp; &nbsp;new_block_timestamp, &nbsp; &nbsp;new_block_data, &nbsp; &nbsp;last_block_hash &nbsp;) &nbsp;blockchain.append(mined_block) &nbsp;# Let the client know we mined a block &nbsp;return json.dumps({ &nbsp; &nbsp; &nbsp;&quot;index&quot;: new_block_index, &nbsp; &nbsp; &nbsp;&quot;timestamp&quot;: str(new_block_timestamp), &nbsp; &nbsp; &nbsp;&quot;data&quot;: new_block_data, &nbsp; &nbsp; &nbsp;&quot;hash&quot;: last_block_hash &nbsp;}) + &quot;\n&quot; 现在，我们能控制特定的时间段内挖到的区块数量，并且我们给了网络中的人新的币，让他们彼此发送。但是如我们说的，我们只是在一台计算机上做的。如果区块链是去中心化的，我们怎样才能确保每个节点都有相同的链呢？要做到这一点，我们会使每个节点都广播其（保存的）链的版本，并允许它们接受其它节点的链。然后，每个节点会校验其它节点的链，以便网络中每个节点都能够达成最终的链的共识。这称之为共识算法consensus algorithm[5]。 我们的共识算法很简单：如果一个节点的链与其它的节点的不同（例如有冲突），那么最长的链保留，更短的链会被删除。如果我们网络上的链没有了冲突，那么就可以继续了。 @node.route(&#39;/blocks&#39;, methods=[&#39;GET&#39;]) def get_blocks(): &nbsp;chain_to_send = blockchain &nbsp;# Convert our blocks into dictionaries &nbsp;# so we can send them as json objects later &nbsp;for block in chain_to_send: &nbsp; &nbsp;block_index = str(block.index) &nbsp; &nbsp;block_timestamp = str(block.timestamp) &nbsp; &nbsp;block_data = str(block.data) &nbsp; &nbsp;block_hash = block.hash &nbsp; &nbsp;block = { &nbsp; &nbsp; &nbsp;&quot;index&quot;: block_index, &nbsp; &nbsp; &nbsp;&quot;timestamp&quot;: block_timestamp, &nbsp; &nbsp; &nbsp;&quot;data&quot;: block_data, &nbsp; &nbsp; &nbsp;&quot;hash&quot;: block_hash &nbsp; &nbsp;} &nbsp;# Send our chain to whomever requested it &nbsp;chain_to_send = json.dumps(chain_to_send) &nbsp;return chain_to_send def find_new_chains(): &nbsp;# Get the blockchains of every &nbsp;# other node &nbsp;other_chains = [] &nbsp;for node_url in peer_nodes: &nbsp; &nbsp;# Get their chains using a GET request &nbsp; &nbsp;block = requests.get(node_url + &quot;/blocks&quot;).content &nbsp; &nbsp;# Convert the JSON object to a Python dictionary &nbsp; &nbsp;block = json.loads(block) &nbsp; &nbsp;# Add it to our list &nbsp; &nbsp;other_chains.append(block) &nbsp;return other_chains def consensus(): &nbsp;# Get the blocks from other nodes &nbsp;other_chains = find_new_chains() &nbsp;# If our chain isn&#39;t longest, &nbsp;# then we store the longest chain &nbsp;longest_chain = blockchain &nbsp;for chain in other_chains: &nbsp; &nbsp;if len(longest_chain) &lt; len(chain): &nbsp; &nbsp; &nbsp;longest_chain = chain &nbsp;# If the longest chain wasn&#39;t ours, &nbsp;# then we set our chain to the longest &nbsp;blockchain = longest_chain 我们差不多就要完成了。在运行了完整的 SnakeCoin 服务器代码[6]之后，在你的终端可以运行如下代码。（假设你已经安装了 cCUL）。 1、创建交易 curl &quot;localhost:5000/txion&quot; \ -H &quot;Content-Type: application/json&quot; \ -d &#39;{&quot;from&quot;: &quot;akjflw&quot;, &quot;to&quot;:&quot;fjlakdj&quot;, &quot;amount&quot;: 3}&#39; 2、挖一个新区块 curl localhost:5000/mine 3、 查看结果。从客户端窗口，我们可以看到。 对代码做下美化处理，我们看到挖矿后我们得到的新区块的信息： { &quot;index&quot;: 2, &quot;data&quot;: { &quot;transactions&quot;: [ { &quot;to&quot;: &quot;fjlakdj&quot;, &quot;amount&quot;: 3, &quot;from&quot;: &quot;akjflw&quot; }, { &quot;to&quot;: &quot;q3nf394hjg-random-miner-address-34nf3i4nflkn3oi&quot;, &quot;amount&quot;: 1, &quot;from&quot;: &quot;network&quot; } ], &quot;proof-of-work&quot;: 36 }, &quot;hash&quot;: &quot;151edd3ef6af2e7eb8272245cb8ea91b4ecfc3e60af22d8518ef0bba8b4a6b18&quot;, &quot;timestamp&quot;: &quot;2017-07-23 11:23:10.140996&quot;} 大功告成！现在 SnakeCoin 可以运行在多个机器上，从而创建了一个网络，而且真实的 SnakeCoin 也能被挖到了。 你可以根据你的喜好去修改 SnakeCoin 服务器代码，并问各种问题了。 在下一篇（LCTT 译注：截止至本文翻译，作者还没有写出下一篇），我们将讨论创建一个 SnakeCoin 钱包，这样用户就可以发送、接收和存储他们的 SnakeCoin 了。 本文也入驻了「虎尔财经」专属频道，请查看今天推送的下一篇文章访问我们的区块链频道，并可获得专属奖励 token。 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/03/17/e4390ed63dba26bbf4d9d656454762b8.html" />
<meta property="og:url" content="https://mlh.app/2018/03/17/e4390ed63dba26bbf4d9d656454762b8.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-17T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。 -- Gerald Nash 有用的原文链接 请访问文末的“ 原文链接”获得可点击的文内链接、全尺寸原图和相关文章。 致谢 编译自　|　https://medium.com/crypto-currently/lets-build-the-tiniest-blockchain-e70965a248b&nbsp; 　作者　|　Gerald Nash 　译者　|　Xingyu.Wang (wxy) ? ? ? ? ? 共计翻译：223&nbsp;篇 贡献时间：1330 天 虽然有些人认为区块链是一个早晚会出现问题的解决方案，但是毫无疑问，这个创新技术是一个计算机技术上的奇迹。那么，究竟什么是区块链呢？ 区块链 以比特币Bitcoin或其它加密货币按时间顺序公开地记录交易的数字账本。 更通俗的说，它是一个公开的数据库，新的数据存储在被称之为区块block的容器中，并被添加到一个不可变的链chain中（因此被称为区块链blockchain），之前添加的数据也在该链中。对于比特币或其它加密货币来说，这些数据就是一组组交易，不过，也可以是其它任何类型的数据。 区块链技术带来了全新的、完全数字化的货币，如比特币和莱特币Litecoin，它们并不由任何中心机构管理。这给那些认为当今的银行系统是骗局并将最终走向失败的人带来了自由。区块链也革命性地改变了分布式计算的技术形式，如以太坊Ethereum就引入了一种有趣的概念：智能合约smart contract[1]。 在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。 不到 50 行代码的区块链 我们首先将从定义我们的区块是什么开始。在区块链中，每个区块随同时间戳及可选的索引一同存储。在 SnakeCoin 中，我们会存储这两者。为了确保整个区块链的完整性，每个区块都会有一个自识别的哈希值。如在比特币中，每个区块的哈希是该块的索引、时间戳、数据和前一个区块的哈希值等数据的加密哈希值。这里提及的“数据”可以是任何你想要的数据。 import hashlib as hasher class Block: &nbsp;def __init__(self, index, timestamp, data, previous_hash): &nbsp; &nbsp;self.index = index &nbsp; &nbsp;self.timestamp = timestamp &nbsp; &nbsp;self.data = data &nbsp; &nbsp;self.previous_hash = previous_hash &nbsp; &nbsp;self.hash = self.hash_block() &nbsp; &nbsp;def hash_block(self): &nbsp; &nbsp;sha = hasher.sha256() &nbsp; &nbsp;sha.update(str(self.index) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.timestamp) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.data) + &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str(self.previous_hash)) &nbsp; &nbsp;return sha.hexdigest() 真棒，现在我们有了区块的结构了，不过我们需要创建的是一个区块链。我们需要把区块添加到一个实际的链中。如我们之前提到过的，每个区块都需要前一个区块的信息。但问题是，该区块链中的第一个区块在哪里？好吧，这个第一个区块，也称之为创世区块，是一个特别的区块。在很多情况下，它是手工添加的，或通过独特的逻辑添加的。 我们将创建一个函数来简单地返回一个创世区块解决这个问题。这个区块的索引为 0 ，其包含一些任意的数据值，其“前一哈希值”参数也是任意值。 import datetime as date def create_genesis_block(): &nbsp;# Manually construct a block with &nbsp;# index zero and arbitrary previous hash &nbsp;return Block(0, date.datetime.now(), &quot;Genesis Block&quot;, &quot;0&quot;) 现在我们可以创建创世区块了，我们需要一个函数来生成该区块链中的后继区块。该函数将获取链中的前一个区块作为参数，为要生成的区块创建数据，并用相应的数据返回新的区块。新的区块的哈希值来自于之前的区块，这样每个新的区块都提升了该区块链的完整性。如果我们不这样做，外部参与者就很容易“改变过去”，把我们的链替换为他们的新链了。这个哈希链起到了加密的证明作用，并有助于确保一旦一个区块被添加到链中，就不能被替换或移除。 def next_block(last_block): &nbsp;this_index = last_block.index + 1 &nbsp;this_timestamp = date.datetime.now() &nbsp;this_data = &quot;Hey! I&#39;m block &quot; + str(this_index) &nbsp;this_hash = last_block.hash &nbsp;return Block(this_index, this_timestamp, this_data, this_hash) 这就是主要的部分。 现在我们能创建自己的区块链了！在这里，这个区块链是一个简单的 Python 列表。其第一个的元素是我们的创世区块，我们会添加后继区块。因为 SnakeCoin 是一个极小的区块链，我们仅仅添加了 20 个区块。我们通过循环来完成它。 # Create the blockchain and add the genesis block blockchain = [create_genesis_block()] previous_block = blockchain[0] # How many blocks should we add to the chain # after the genesis block num_of_blocks_to_add = 20 # Add blocks to the chain for i in range(0, num_of_blocks_to_add): &nbsp;block_to_add = next_block(previous_block) &nbsp;blockchain.append(block_to_add) &nbsp;previous_block = block_to_add &nbsp;# Tell everyone about it! &nbsp;print &quot;Block #{} has been added to the blockchain!&quot;.format(block_to_add.index) &nbsp;print &quot;Hash: {}\\n&quot;.format(block_to_add.hash) 让我们看看我们的成果： 别担心，它将一直添加到 20 个区块 很好，我们的区块链可以工作了。如果你想要在主控台查看更多的信息，你可以编辑其完整的源代码[2]并输出每个区块的时间戳或数据。 这就是 SnakeCoin 所具有的功能。要使 SnakeCoin 达到现今的产品级的区块链的高度，我们需要添加更多的功能，如服务器层，以在多台机器上跟踪链的改变，并通过工作量证明算法（POW）[3]来限制给定时间周期内可以添加的区块数量。 如果你想了解更多技术细节，你可以在这里[4]查看最初的比特币白皮书[4]。 让这个极小区块链稍微变大些 这个极小的区块链及其简单，自然也相对容易完成。但是因其简单也带来了一些缺陷。首先，SnakeCoin 仅能运行在单一的一台机器上，所以它相距分布式甚远，更别提去中心化了。其次，区块添加到区块链中的速度同在主机上创建一个 Python 对象并添加到列表中一样快。在我们的这个简单的区块链中，这不是问题，但是如果我们想让 SnakeCoin 成为一个实际的加密货币，我们就需要控制在给定时间内能创建的区块（和币）的数量。 从现在开始，SnakeCoin 中的“数据”将是交易数据，每个区块的“数据”字段都将是一些交易信息的列表。接着我们来定义“交易”。每个“交易”是一个 JSON 对象，其记录了币的发送者、接收者和转移的 SnakeCoin 数量。注：交易信息是 JSON 格式，原因我很快就会说明。 { &nbsp;&quot;from&quot;: &quot;71238uqirbfh894-random-public-key-a-alkjdflakjfewn204ij&quot;, &nbsp;&quot;to&quot;: &quot;93j4ivnqiopvh43-random-public-key-b-qjrgvnoeirbnferinfo&quot;, &nbsp;&quot;amount&quot;: 3 } 现在我们知道了交易信息看起来的样子了，我们需要一个办法来将其加到我们的区块链网络中的一台计算机（称之为节点）中。要做这个事情，我们会创建一个简单的 HTTP 服务器，以便每个用户都可以让我们的节点知道发生了新的交易。节点可以接受&nbsp; POST 请求，请求数据为如上的交易信息。这就是为什么交易信息是 JSON 格式的：我们需要它们可以放在请求信息中传递给服务器。 $ pip install flask # 首先安装 Web 服务器框架 from flask import Flask from flask import request node = Flask(__name__) # Store the transactions that # this node has in a list this_nodes_transactions = [] @node.route(&#39;/txion&#39;, methods=[&#39;POST&#39;]) def transaction(): &nbsp;if request.method == &#39;POST&#39;: &nbsp; &nbsp;# On each new POST request, &nbsp; &nbsp;# we extract the transaction data &nbsp; &nbsp;new_txion = request.get_json() &nbsp; &nbsp;# Then we add the transaction to our list &nbsp; &nbsp;this_nodes_transactions.append(new_txion) &nbsp; &nbsp;# Because the transaction was successfully &nbsp; &nbsp;# submitted, we log it to our console &nbsp; &nbsp;print &quot;New transaction&quot; &nbsp; &nbsp;print &quot;FROM: {}&quot;.format(new_txion[&#39;from&#39;]) &nbsp; &nbsp;print &quot;TO: {}&quot;.format(new_txion[&#39;to&#39;]) &nbsp; &nbsp;print &quot;AMOUNT: {}\\n&quot;.format(new_txion[&#39;amount&#39;]) &nbsp; &nbsp;# Then we let the client know it worked out &nbsp; &nbsp;return &quot;Transaction submission successful\\n&quot; node.run() 真棒！现在我们有了一种保存用户彼此发送 SnakeCoin 的记录的方式。这就是为什么人们将区块链称之为公共的、分布式账本：所有的交易信息存储给所有人看，并被存储在该网络的每个节点上。 但是，有个问题：人们从哪里得到 SnakeCoin 呢？现在还没有办法得到，还没有一个称之为 SnakeCoin 这样的东西，因为我们还没有创建和分发任何一个币。要创建新的币，人们需要“挖”一个新的 SnakeCoin 区块。当他们成功地挖到了新区块，就会创建出一个新的 SnakeCoin ，并奖励给挖出该区块的人（矿工）。一旦挖矿的矿工将 SnakeCoin 发送给别人，这个币就流通起来了。 我们不想让挖新的 SnakeCoin 区块太容易，因为这将导致 SnakeCoin 太多了，其价值就变低了；同样，我们也不想让它变得太难，因为如果没有足够的币供每个人使用，它们对于我们来说就太昂贵了。为了控制挖新的 SnakeCoin 区块的难度，我们会实现一个工作量证明Proof-of-Work[3]（PoW）算法。工作量证明基本上就是一个生成某个项目比较难，但是容易验证（其正确性）的算法。这个项目被称之为“证明”，听起来就像是它证明了计算机执行了特定的工作量。 在 SnakeCoin 中，我们创建了一个简单的 PoW 算法。要创建一个新区块，矿工的计算机需要递增一个数字，当该数字能被 9 （“SnakeCoin” 这个单词的字母数）整除时，这就是最后这个区块的证明数字，就会挖出一个新的 SnakeCoin 区块，而该矿工就会得到一个新的 SnakeCoin。 # ...blockchain # ...Block class definition miner_address = &quot;q3nf394hjg-random-miner-address-34nf3i4nflkn3oi&quot; def proof_of_work(last_proof): &nbsp;# Create a variable that we will use to find &nbsp;# our next proof of work &nbsp;incrementor = last_proof + 1 &nbsp;# Keep incrementing the incrementor until &nbsp;# it&#39;s equal to a number divisible by 9 &nbsp;# and the proof of work of the previous &nbsp;# block in the chain &nbsp;while not (incrementor % 9 == 0 and incrementor % last_proof == 0): &nbsp; &nbsp;incrementor += 1 &nbsp;# Once that number is found, &nbsp;# we can return it as a proof &nbsp;# of our work &nbsp;return incrementor @node.route(&#39;/mine&#39;, methods = [&#39;GET&#39;]) def mine(): &nbsp;# Get the last proof of work &nbsp;last_block = blockchain[len(blockchain) - 1] &nbsp;last_proof = last_block.data[&#39;proof-of-work&#39;] &nbsp;# Find the proof of work for &nbsp;# the current block being mined &nbsp;# Note: The program will hang here until a new &nbsp;# &nbsp; &nbsp; &nbsp; proof of work is found &nbsp;proof = proof_of_work(last_proof) &nbsp;# Once we find a valid proof of work, &nbsp;# we know we can mine a block so &nbsp;# we reward the miner by adding a transaction &nbsp;this_nodes_transactions.append( &nbsp; &nbsp;{ &quot;from&quot;: &quot;network&quot;, &quot;to&quot;: miner_address, &quot;amount&quot;: 1 } &nbsp;) &nbsp;# Now we can gather the data needed &nbsp;# to create the new block &nbsp;new_block_data = { &nbsp; &nbsp;&quot;proof-of-work&quot;: proof, &nbsp; &nbsp;&quot;transactions&quot;: list(this_nodes_transactions) &nbsp;} &nbsp;new_block_index = last_block.index + 1 &nbsp;new_block_timestamp = this_timestamp = date.datetime.now() &nbsp;last_block_hash = last_block.hash &nbsp;# Empty transaction list &nbsp;this_nodes_transactions[:] = [] &nbsp;# Now create the &nbsp;# new block! &nbsp;mined_block = Block( &nbsp; &nbsp;new_block_index, &nbsp; &nbsp;new_block_timestamp, &nbsp; &nbsp;new_block_data, &nbsp; &nbsp;last_block_hash &nbsp;) &nbsp;blockchain.append(mined_block) &nbsp;# Let the client know we mined a block &nbsp;return json.dumps({ &nbsp; &nbsp; &nbsp;&quot;index&quot;: new_block_index, &nbsp; &nbsp; &nbsp;&quot;timestamp&quot;: str(new_block_timestamp), &nbsp; &nbsp; &nbsp;&quot;data&quot;: new_block_data, &nbsp; &nbsp; &nbsp;&quot;hash&quot;: last_block_hash &nbsp;}) + &quot;\\n&quot; 现在，我们能控制特定的时间段内挖到的区块数量，并且我们给了网络中的人新的币，让他们彼此发送。但是如我们说的，我们只是在一台计算机上做的。如果区块链是去中心化的，我们怎样才能确保每个节点都有相同的链呢？要做到这一点，我们会使每个节点都广播其（保存的）链的版本，并允许它们接受其它节点的链。然后，每个节点会校验其它节点的链，以便网络中每个节点都能够达成最终的链的共识。这称之为共识算法consensus algorithm[5]。 我们的共识算法很简单：如果一个节点的链与其它的节点的不同（例如有冲突），那么最长的链保留，更短的链会被删除。如果我们网络上的链没有了冲突，那么就可以继续了。 @node.route(&#39;/blocks&#39;, methods=[&#39;GET&#39;]) def get_blocks(): &nbsp;chain_to_send = blockchain &nbsp;# Convert our blocks into dictionaries &nbsp;# so we can send them as json objects later &nbsp;for block in chain_to_send: &nbsp; &nbsp;block_index = str(block.index) &nbsp; &nbsp;block_timestamp = str(block.timestamp) &nbsp; &nbsp;block_data = str(block.data) &nbsp; &nbsp;block_hash = block.hash &nbsp; &nbsp;block = { &nbsp; &nbsp; &nbsp;&quot;index&quot;: block_index, &nbsp; &nbsp; &nbsp;&quot;timestamp&quot;: block_timestamp, &nbsp; &nbsp; &nbsp;&quot;data&quot;: block_data, &nbsp; &nbsp; &nbsp;&quot;hash&quot;: block_hash &nbsp; &nbsp;} &nbsp;# Send our chain to whomever requested it &nbsp;chain_to_send = json.dumps(chain_to_send) &nbsp;return chain_to_send def find_new_chains(): &nbsp;# Get the blockchains of every &nbsp;# other node &nbsp;other_chains = [] &nbsp;for node_url in peer_nodes: &nbsp; &nbsp;# Get their chains using a GET request &nbsp; &nbsp;block = requests.get(node_url + &quot;/blocks&quot;).content &nbsp; &nbsp;# Convert the JSON object to a Python dictionary &nbsp; &nbsp;block = json.loads(block) &nbsp; &nbsp;# Add it to our list &nbsp; &nbsp;other_chains.append(block) &nbsp;return other_chains def consensus(): &nbsp;# Get the blocks from other nodes &nbsp;other_chains = find_new_chains() &nbsp;# If our chain isn&#39;t longest, &nbsp;# then we store the longest chain &nbsp;longest_chain = blockchain &nbsp;for chain in other_chains: &nbsp; &nbsp;if len(longest_chain) &lt; len(chain): &nbsp; &nbsp; &nbsp;longest_chain = chain &nbsp;# If the longest chain wasn&#39;t ours, &nbsp;# then we set our chain to the longest &nbsp;blockchain = longest_chain 我们差不多就要完成了。在运行了完整的 SnakeCoin 服务器代码[6]之后，在你的终端可以运行如下代码。（假设你已经安装了 cCUL）。 1、创建交易 curl &quot;localhost:5000/txion&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d &#39;{&quot;from&quot;: &quot;akjflw&quot;, &quot;to&quot;:&quot;fjlakdj&quot;, &quot;amount&quot;: 3}&#39; 2、挖一个新区块 curl localhost:5000/mine 3、 查看结果。从客户端窗口，我们可以看到。 对代码做下美化处理，我们看到挖矿后我们得到的新区块的信息： { &quot;index&quot;: 2, &quot;data&quot;: { &quot;transactions&quot;: [ { &quot;to&quot;: &quot;fjlakdj&quot;, &quot;amount&quot;: 3, &quot;from&quot;: &quot;akjflw&quot; }, { &quot;to&quot;: &quot;q3nf394hjg-random-miner-address-34nf3i4nflkn3oi&quot;, &quot;amount&quot;: 1, &quot;from&quot;: &quot;network&quot; } ], &quot;proof-of-work&quot;: 36 }, &quot;hash&quot;: &quot;151edd3ef6af2e7eb8272245cb8ea91b4ecfc3e60af22d8518ef0bba8b4a6b18&quot;, &quot;timestamp&quot;: &quot;2017-07-23 11:23:10.140996&quot;} 大功告成！现在 SnakeCoin 可以运行在多个机器上，从而创建了一个网络，而且真实的 SnakeCoin 也能被挖到了。 你可以根据你的喜好去修改 SnakeCoin 服务器代码，并问各种问题了。 在下一篇（LCTT 译注：截止至本文翻译，作者还没有写出下一篇），我们将讨论创建一个 SnakeCoin 钱包，这样用户就可以发送、接收和存储他们的 SnakeCoin 了。 本文也入驻了「虎尔财经」专属频道，请查看今天推送的下一篇文章访问我们的区块链频道，并可获得专属奖励 token。 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/03/17/e4390ed63dba26bbf4d9d656454762b8.html","headline":"用 Python 构建一个极小的区块链 Linux 中国","dateModified":"2018-03-17T00:00:00+08:00","datePublished":"2018-03-17T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/03/17/e4390ed63dba26bbf4d9d656454762b8.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>用 Python 构建一个极小的区块链 | Linux 中国</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views">   
  <div class="rich_media_content " id="js_content"> 
   <section class="header bm" style="word-wrap: break-word;margin: 4px;border-width: 1px;border-style: solid;border-color: rgb(205, 205, 205);background: rgb(255, 255, 255);border-radius: 4px;box-shadow: none;font-size: 12px;font-family: Optima-Regular, PingFangTC-light;letter-spacing: 2px;white-space: normal;color: rgb(153, 153, 153);">
    <img class=" " data-ratio="0.599609375" data-src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/W9DqKgFsc6icEa2wTt5r00236By6O3hKiar4ibpwHpt8CbkbPUicFzbx8a29BJ2HpxfzlMewkyqEMice0iazokkExsRw/640?wx_fmt=jpeg" data-type="jpeg" data-w="1024" style="word-wrap: break-word; text-align: center; border: none; box-shadow: none; width: 674px !important; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; height: auto !important; visibility: visible !important;" _width="674px" src="https://ss.csdn.net/p?http://mmbiz.qpic.cn/mmbiz_jpg/W9DqKgFsc6icEa2wTt5r00236By6O3hKiar4ibpwHpt8CbkbPUicFzbx8a29BJ2HpxfzlMewkyqEMice0iazokkExsRw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1" data-fail="0">
    <section class="summary bm_c" style="word-wrap: break-word;padding: 10px;">
     在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。
    </section>
    <section class="y bm_c" style="word-wrap: break-word;float: right;padding: 10px;">
     -- Gerald Nash
    </section>
    <br class="clear" style="word-wrap: break-word;clear: both;">
   </section>
   <p><br></p>
   <nav class="bm" style="word-wrap: break-word;margin: 4px;border-width: 1px;border-style: solid;border-color: rgb(205, 205, 205);background: rgb(255, 255, 255);border-radius: 4px;box-shadow: none;font-size: 12px;font-family: Optima-Regular, PingFangTC-light;letter-spacing: 2px;white-space: normal;color: rgb(153, 153, 153);">
    <section class="bm_h" style="word-wrap: break-word;padding-right: 10px;padding-left: 10px;height: 31px;border-top: 1px solid rgb(255, 255, 255);border-bottom: 1px solid rgb(194, 213, 227);background: rgb(242, 242, 242);line-height: 31px;white-space: nowrap;overflow: hidden;border-radius: 5px 5px 0px 0px;">
     有用的原文链接
    </section>
    <section class="bm_c" style="word-wrap: break-word;padding: 10px;">
     请访问文末的“
     <span style="word-wrap: break-word;color: rgb(96, 127, 171);">原文链接</span>”获得可点击的文内链接、全尺寸原图和相关文章。
    </section>
   </nav>
   <p><br></p>
   <section class="bm" style="word-wrap: break-word;margin: 4px;border-width: 1px;border-style: solid;border-color: rgb(205, 205, 205);background: rgb(255, 255, 255);border-radius: 4px;box-shadow: none;font-size: 12px;font-family: Optima-Regular, PingFangTC-light;letter-spacing: 2px;white-space: normal;color: rgb(153, 153, 153);">
    <section class="bm_h" style="word-wrap: break-word;padding-right: 10px;padding-left: 10px;height: 31px;border-top: 1px solid rgb(255, 255, 255);border-bottom: 1px solid rgb(194, 213, 227);background: rgb(242, 242, 242);line-height: 31px;white-space: nowrap;overflow: hidden;border-radius: 5px 5px 0px 0px;">
     致谢
    </section>
    <section class="bm_c" style="word-wrap: break-word;padding: 10px;">
     <span style="word-wrap: break-word;">编译自　|　https://medium.com/crypto-currently/lets-build-the-tiniest-blockchain-e70965a248b</span>&nbsp;
     <br style="word-wrap: break-word;">
     <span style="word-wrap: break-word;">　作者　|　Gerald Nash</span>
     <br style="word-wrap: break-word;">
     <span style="word-wrap: break-word;">　译者　|　Xingyu.Wang (wxy) ? ? ? ? ? 共计翻译：<span class="num" style="word-wrap: break-word;color: rgb(255, 0, 0);font-weight: 700;">223</span>&nbsp;篇 贡献时间：1330 天</span>
    </section>
   </section>
   <section style="word-wrap: break-word;font-family: Optima-Regular, PingFangTC-light;font-size: 14px;letter-spacing: 2px;white-space: normal;background-color: rgb(255, 255, 255);">
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">虽然有些人认为区块链是一个早晚会出现问题的解决方案，但是毫无疑问，这个创新技术是一个计算机技术上的奇迹。那么，究竟什么是区块链呢？</p>
    <p class="h3" style="word-wrap: break-word;margin-top: 10px;margin-right: 10px;margin-bottom: 10px;padding: 8px 15px;line-height: 1.8em;background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181));background-color: rgb(63, 81, 181);color: rgb(255, 255, 255);font-size: 1.4em;letter-spacing: 3px;border-left: 10px solid rgb(51, 51, 51);text-shadow: rgb(102, 102, 102) 1px 1px 1px;box-shadow: rgb(102, 102, 102) 1px 1px 2px;">区块链</p>
    <blockquote style="word-wrap: break-word;width: auto;margin: 8px 4px;padding-top: 2px;padding-right: 10px;padding-bottom: 2px;border-radius: 5px;box-shadow: none;border-width: 1px;border-top-style: solid;border-right-style: solid;border-bottom-style: solid;border-color: rgb(205, 205, 205);">
     <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">以<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;">比特币<rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">Bitcoin</rt></ruby>或其它加密货币按时间顺序公开地记录交易的数字账本。</p>
    </blockquote>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">更通俗的说，它是一个公开的数据库，新的数据存储在被称之为<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;">区块<rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">block</rt></ruby>的容器中，并被添加到一个不可变的<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;">链<rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">chain</rt></ruby>中（因此被称为<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;">区块链<rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">blockchain</rt></ruby>），之前添加的数据也在该链中。对于比特币或其它加密货币来说，这些数据就是一组组交易，不过，也可以是其它任何类型的数据。</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">区块链技术带来了全新的、完全数字化的货币，如比特币和<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;">莱特币<rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">Litecoin</rt></ruby>，它们并不由任何中心机构管理。这给那些认为当今的银行系统是骗局并将最终走向失败的人带来了自由。区块链也革命性地改变了分布式计算的技术形式，如<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;">以太坊<rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">Ethereum</rt></ruby>就引入了一种有趣的概念：<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;"><span style="word-wrap: break-word;color: rgb(77, 138, 216);">智能合约</span><rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">smart contract</rt></ruby><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[1]</span>。</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">在这篇文章中，我将用不到 50 行的 Python 2.x 代码实现一个简单的区块链，我把它叫做 SnakeCoin。</p>
    <p class="h3" style="word-wrap: break-word;margin-top: 10px;margin-right: 10px;margin-bottom: 10px;padding: 8px 15px;line-height: 1.8em;background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181));background-color: rgb(63, 81, 181);color: rgb(255, 255, 255);font-size: 1.4em;letter-spacing: 3px;border-left: 10px solid rgb(51, 51, 51);text-shadow: rgb(102, 102, 102) 1px 1px 1px;box-shadow: rgb(102, 102, 102) 1px 1px 2px;">不到 50 行代码的区块链</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">我们首先将从定义我们的区块是什么开始。在区块链中，每个区块随同时间戳及可选的索引一同存储。在 SnakeCoin 中，我们会存储这两者。为了确保整个区块链的完整性，每个区块都会有一个自识别的哈希值。如在比特币中，每个区块的哈希是该块的索引、时间戳、数据和前一个区块的哈希值等数据的加密哈希值。这里提及的“数据”可以是任何你想要的数据。</p>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">import</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> hashlib </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">as</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> hasher</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">class</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> __init__</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> index</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> timestamp</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> data</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> previous_hash</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">):</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">index </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> index</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">timestamp </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> timestamp</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">data </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> data</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">previous_hash </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> previous_hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">hash </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">hash_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> hash_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">):</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;sha </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> hasher</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">sha256</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;sha</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">update</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">index</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">+</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">timestamp</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">+</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">data</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">+</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">self</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">previous_hash</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">))</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">return</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> sha</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">hexdigest</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()</span></code></p></li>
     </ol></pre>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">真棒，现在我们有了区块的结构了，不过我们需要创建的是一个区块链。我们需要把区块添加到一个实际的链中。如我们之前提到过的，每个区块都需要前一个区块的信息。但问题是，该区块链中的第一个区块在哪里？好吧，这个第一个区块，也称之为创世区块，是一个特别的区块。在很多情况下，它是手工添加的，或通过独特的逻辑添加的。</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">我们将创建一个函数来简单地返回一个创世区块解决这个问题。这个区块的索引为 0 ，其包含一些任意的数据值，其“前一哈希值”参数也是任意值。</p>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">import</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> datetime </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">as</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">date</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> create_genesis_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">():</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Manually</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> construct a block </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">with</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> index zero </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">and</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> arbitrary previous hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">return</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">0</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">date</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">datetime</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">now</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(),</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"Genesis Block"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"0"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
     </ol></pre>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">现在我们可以创建创世区块了，我们需要一个函数来生成该区块链中的后继区块。该函数将获取链中的前一个区块作为参数，为要生成的区块创建数据，并用相应的数据返回新的区块。新的区块的哈希值来自于之前的区块，这样每个新的区块都提升了该区块链的完整性。如果我们不这样做，外部参与者就很容易“改变过去”，把我们的链替换为他们的新链了。这个哈希链起到了加密的证明作用，并有助于确保一旦一个区块被添加到链中，就不能被替换或移除。</p>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> next_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">last_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">):</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;this_index </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> last_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">index </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">+</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">1</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;this_timestamp </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">date</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">datetime</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">now</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;this_data </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"Hey! I'm block "</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">+</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">this_index</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;this_hash </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> last_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">return</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">this_index</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> this_timestamp</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> this_data</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> this_hash</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
     </ol></pre>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">这就是主要的部分。</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">现在我们能创建自己的区块链了！在这里，这个区块链是一个简单的 Python 列表。其第一个的元素是我们的创世区块，我们会添加后继区块。因为 SnakeCoin 是一个极小的区块链，我们仅仅添加了 20 个区块。我们通过循环来完成它。</p>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Create</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> the blockchain </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">and</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> add the genesis block</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">blockchain </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">[</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">create_genesis_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()]</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">previous_block </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> blockchain</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">[</span><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">0</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">]</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">How</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> many blocks should we add to the chain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> after the genesis block</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">num_of_blocks_to_add </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">20</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Add</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> blocks to the chain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">for</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> i </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">in</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> range</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">0</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> num_of_blocks_to_add</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">):</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;block_to_add </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> next_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">previous_block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;blockchain</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">append</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block_to_add</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;previous_block </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> block_to_add</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Tell</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> everyone about it</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">!</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">print</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"Block #{} has been added to the blockchain!"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">format</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block_to_add</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">index</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">print</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"Hash: {}\n"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">format</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block_to_add</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">hash</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span></code></p></li>
     </ol></pre>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">让我们看看我们的成果：</p>
    <p class="article_img" style="word-wrap: break-word;margin-top: 5px;margin-bottom: 5px;line-height: 2em;text-align: center;"><img class=" img_loading" data-ratio="1.21125" data-src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/W9DqKgFsc6icEa2wTt5r00236By6O3hKiadR7vDRDfuPFCp30HMmR8k8Rhfn03lCapwPaW4lK9gWXna63tlqHGbg/640?wx_fmt=png" data-type="png" data-w="800" style="word-wrap: break-word; max-width: 95%; border: none; box-shadow: none; width: 624px !important; height: 755.8199999999999px !important;" title="别担心，它将一直添加到 20 个区块" _width="624px" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/W9DqKgFsc6icEa2wTt5r00236By6O3hKiadR7vDRDfuPFCp30HMmR8k8Rhfn03lCapwPaW4lK9gWXna63tlqHGbg/640?wx_fmt=png"></p>
    <p class="article_img_desc" style="word-wrap: break-word;line-height: 2em;text-align: center;"><em style="word-wrap: break-word;color: rgb(153, 153, 153);min-width: 20%;min-height: 22px;display: inline-block;padding: 10px;margin-right: auto;margin-bottom: 10px;margin-left: auto;border-bottom: 1px solid rgb(217, 217, 217);font-size: 13px;line-height: 1.7;">别担心，它将一直添加到 20 个区块</em></p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">很好，我们的区块链可以工作了。如果你想要在主控台查看更多的信息，你可以编辑其<span style="word-wrap: break-word;color: rgb(77, 138, 216);">完整的源代码</span><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[2]</span>并输出每个区块的时间戳或数据。</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">这就是 SnakeCoin 所具有的功能。要使 SnakeCoin 达到现今的产品级的区块链的高度，我们需要添加更多的功能，如服务器层，以在多台机器上跟踪链的改变，并通过<span style="word-wrap: break-word;color: rgb(77, 138, 216);">工作量证明算法（POW）</span><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[3]</span>来限制给定时间周期内可以添加的区块数量。</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">如果你想了解更多技术细节，你可以在<span style="word-wrap: break-word;color: rgb(77, 138, 216);">这里</span><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[4]</span>查看最初的<span style="word-wrap: break-word;color: rgb(77, 138, 216);">比特币白皮书</span><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[4]</span>。</p>
    <p class="h3" style="word-wrap: break-word;margin-top: 10px;margin-right: 10px;margin-bottom: 10px;padding: 8px 15px;line-height: 1.8em;background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181));background-color: rgb(63, 81, 181);color: rgb(255, 255, 255);font-size: 1.4em;letter-spacing: 3px;border-left: 10px solid rgb(51, 51, 51);text-shadow: rgb(102, 102, 102) 1px 1px 1px;box-shadow: rgb(102, 102, 102) 1px 1px 2px;">让这个极小区块链稍微变大些</p>
    <p style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">这个极小的区块链及其简单，自然也相对容易完成。但是因其简单也带来了一些缺陷。首先，SnakeCoin 仅能运行在单一的一台机器上，所以它相距分布式甚远，更别提去中心化了。其次，区块添加到区块链中的速度同在主机上创建一个 Python 对象并添加到列表中一样快。在我们的这个简单的区块链中，这不是问题，但是如果我们想让 SnakeCoin 成为一个实际的加密货币，我们就需要控制在给定时间内能创建的区块（和币）的数量。</p>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">从现在开始，SnakeCoin 中的“数据”将是交易数据，每个区块的“数据”字段都将是一些交易信息的列表。接着我们来定义“交易”。每个“交易”是一个 JSON 对象，其记录了币的发送者、接收者和转移的 SnakeCoin 数量。注：交易信息是 JSON 格式，原因我很快就会说明。</p>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">{</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"from"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"71238uqirbfh894-random-public-key-a-alkjdflakjfewn204ij"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"to"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"93j4ivnqiopvh43-random-public-key-b-qjrgvnoeirbnferinfo"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"amount"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">3</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">}</span></code></p></li>
     </ol></pre>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">现在我们知道了交易信息看起来的样子了，我们需要一个办法来将其加到我们的区块链网络中的一台计算机（称之为节点）中。要做这个事情，我们会创建一个简单的 HTTP 服务器，以便每个用户都可以让我们的节点知道发生了新的交易。节点可以接受&nbsp; POST 请求，请求数据为如上的交易信息。这就是为什么交易信息是 JSON 格式的：我们需要它们可以放在请求信息中传递给服务器。</p>
    <pre name="396f" class="graf graf--pre graf-after--p" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 0px 0px 0px 1em;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">$ pip install flask # 首先安装 Web 服务器框架</pre>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">from</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> flask </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">import</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Flask</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">from</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> flask </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">import</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> request</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">node </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Flask</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">__name__</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Store</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> the transactions that</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">this</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> node has </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">in</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> a </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">list</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">this_nodes_transactions </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">[]</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">@node</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">route</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'/txion'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> methods</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=[</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'POST'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">])</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> transaction</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">():</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">if</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> request</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">method </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">==</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'POST'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">On</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> each </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">new</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> POST request</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> we extract the transaction data</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;new_txion </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> request</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">get_json</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Then</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> we add the transaction to </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">list</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;this_nodes_transactions</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">append</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">new_txion</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Because</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> the transaction was successfully</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> submitted</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> we log it to </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> console</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">print</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"New transaction"</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">print</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"FROM: {}"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">format</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">new_txion</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">[</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'from'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">])</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">print</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"TO: {}"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">format</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">new_txion</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">[</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'to'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">])</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">print</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"AMOUNT: {}\n"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">format</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">new_txion</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">[</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'amount'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">])</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Then</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> we let the client know it worked out</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">return</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"Transaction submission successful\n"</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">node</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">run</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()</span></code></p></li>
     </ol></pre>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">真棒！现在我们有了一种保存用户彼此发送 SnakeCoin 的记录的方式。这就是为什么人们将区块链称之为公共的、分布式账本：所有的交易信息存储给所有人看，并被存储在该网络的每个节点上。</p>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">但是，有个问题：人们从哪里得到 SnakeCoin 呢？现在还没有办法得到，还没有一个称之为 SnakeCoin 这样的东西，因为我们还没有创建和分发任何一个币。要创建新的币，人们需要“挖”一个新的 SnakeCoin 区块。当他们成功地挖到了新区块，就会创建出一个新的 SnakeCoin ，并奖励给挖出该区块的人（矿工）。一旦挖矿的矿工将 SnakeCoin 发送给别人，这个币就流通起来了。</p>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">我们不想让挖新的 SnakeCoin 区块太容易，因为这将导致 SnakeCoin 太多了，其价值就变低了；同样，我们也不想让它变得太难，因为如果没有足够的币供每个人使用，它们对于我们来说就太昂贵了。为了控制挖新的 SnakeCoin 区块的难度，我们会实现一个<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;"><span style="word-wrap: break-word;color: rgb(77, 138, 216);">工作量证明</span><rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">Proof-of-Work</rt></ruby><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[3]</span>（PoW）算法。工作量证明基本上就是一个生成某个项目比较难，但是容易验证（其正确性）的算法。这个项目被称之为“证明”，听起来就像是它证明了计算机执行了特定的工作量。</p>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">在 SnakeCoin 中，我们创建了一个简单的 PoW 算法。要创建一个新区块，矿工的计算机需要递增一个数字，当该数字能被 9 （“SnakeCoin” 这个单词的字母数）整除时，这就是最后这个区块的证明数字，就会挖出一个新的 SnakeCoin 区块，而该矿工就会得到一个新的 SnakeCoin。</p>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">...</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">blockchain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">...</span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Block</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">class</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> definition</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">miner_address </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"q3nf394hjg-random-miner-address-34nf3i4nflkn3oi"</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> proof_of_work</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">last_proof</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">):</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Create</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> a variable that we will </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">use</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> to </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">find</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">next</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> proof of work</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;incrementor </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> last_proof </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">+</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">1</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Keep</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> incrementing the incrementor </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">until</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> it</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'s equal to a number divisible by 9</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# and the proof of work of the previous</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# block in the chain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;while not (incrementor % 9 == 0 and incrementor % last_proof == 0):</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;incrementor += 1</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Once that number is found,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# we can return it as a proof</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# of our work</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;return incrementor</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">@node.route('</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">/</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">mine</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">', methods = ['</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">GET</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'])</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">def mine():</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Get the last proof of work</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;last_block = blockchain[len(blockchain) - 1]</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;last_proof = last_block.data['</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">proof</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">-</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">of</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">-</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">work</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">']</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Find the proof of work for</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# the current block being mined</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Note: The program will hang here until a new</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# &nbsp; &nbsp; &nbsp; proof of work is found</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;proof = proof_of_work(last_proof)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Once we find a valid proof of work,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# we know we can mine a block so </span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# we reward the miner by adding a transaction</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;this_nodes_transactions.append(</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;{ "from": "network", "to": miner_address, "amount": 1 }</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Now we can gather the data needed</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# to create the new block</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;new_block_data = {</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;"proof-of-work": proof,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;"transactions": list(this_nodes_transactions)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;}</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;new_block_index = last_block.index + 1</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;new_block_timestamp = this_timestamp = date.datetime.now()</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;last_block_hash = last_block.hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Empty transaction list</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;this_nodes_transactions[:] = []</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Now create the</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# new block!</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;mined_block = Block(</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;new_block_index,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;new_block_timestamp,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;new_block_data,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;last_block_hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;blockchain.append(mined_block)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# Let the client know we mined a block</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;return json.dumps({</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp; &nbsp;"index": new_block_index,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp; &nbsp;"timestamp": str(new_block_timestamp),</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp; &nbsp;"data": new_block_data,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp; &nbsp;"hash": last_block_hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;}) + "\n"</span></code></p></li>
     </ol></pre>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">现在，我们能控制特定的时间段内挖到的区块数量，并且我们给了网络中的人新的币，让他们彼此发送。但是如我们说的，我们只是在一台计算机上做的。如果区块链是去中心化的，我们怎样才能确保每个节点都有相同的链呢？要做到这一点，我们会使每个节点都广播其（保存的）链的版本，并允许它们接受其它节点的链。然后，每个节点会校验其它节点的链，以便网络中每个节点都能够达成最终的链的共识。这称之为<ruby style="word-wrap: break-word;background-color: rgba(213, 241, 211, 0.4);margin: 4px;padding-right: 2px;padding-left: 2px;"><span style="word-wrap: break-word;color: rgb(77, 138, 216);">共识算法</span><rt style="word-wrap: break-word;font-style: italic;color: rgb(100, 208, 106);">consensus algorithm</rt></ruby><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[5]</span>。</p>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">我们的共识算法很简单：如果一个节点的链与其它的节点的不同（例如有冲突），那么最长的链保留，更短的链会被删除。如果我们网络上的链没有了冲突，那么就可以继续了。</p>
    <pre class="prettyprint linenums prettyprinted" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 1em 1em 1em 0px;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">
     <ol class="linenums list-paddingleft-2" style="margin-left: 2em;margin-right: 2em;">
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="lit" style="word-wrap: break-word;color: rgb(51, 135, 204);">@node</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">route</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'/blocks'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> methods</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=[</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'GET'</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">])</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> get_blocks</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">():</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;chain_to_send </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> blockchain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Convert</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> blocks into dictionaries</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> so we can send them </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">as</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> json objects later</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">for</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> block </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">in</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> chain_to_send</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;block_index </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">index</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;block_timestamp </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">timestamp</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;block_data </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> str</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">data</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;block_hash </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;block </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">{</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp; &nbsp;</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"index"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> block_index</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp; &nbsp;</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"timestamp"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> block_timestamp</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp; &nbsp;</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"data"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> block_data</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp; &nbsp;</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"hash"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> block_hash</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">}</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Send</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> chain to whomever requested it</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;chain_to_send </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> json</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">dumps</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">chain_to_send</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">return</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> chain_to_send</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> find_new_chains</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">():</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Get</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> the blockchains of every</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> other node</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;other_chains </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">[]</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">for</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> node_url </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">in</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> peer_nodes</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">:</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Get</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> their chains </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">using</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> a GET request</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;block </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> requests</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">get</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">node_url </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">+</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">"/blocks"</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">).</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">content</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Convert</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> the JSON object to a </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Python</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> dictionary</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;block </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> json</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">loads</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Add</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> it to </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">list</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp; &nbsp;other_chains</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">.</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">append</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">(</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">block</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">)</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">return</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> other_chains</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">def</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> consensus</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">():</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">Get</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> the blocks </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">from</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> other nodes</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;other_chains </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> find_new_chains</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">()</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="typ" style="word-wrap: break-word;color: rgb(137, 189, 255);">If</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> chain isn</span><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);">'t longest,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# then we store the longest chain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;longest_chain = blockchain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;for chain in other_chains:</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp;if len(longest_chain) &lt; len(chain):</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp; &nbsp; &nbsp;longest_chain = chain</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="str" style="word-wrap: break-word;color: rgb(101, 176, 66);"> &nbsp;# If the longest chain wasn'</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);">t ours</span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">,</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;</span><span class="com" style="word-wrap: break-word;color: rgb(174, 174, 174);font-style: italic;">#</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">then</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> we </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">set</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> </span><span class="kwd" style="word-wrap: break-word;color: rgb(226, 137, 100);">our</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> chain to the longest</span></code></p></li>
      <li><p><code style="word-wrap: break-word;background: none;color: rgb(33, 150, 243);line-height: 1.2em;padding-left: 10px !important;border-radius: 0px !important;margin-top: 1em !important;margin-bottom: 1em !important;border-width: initial !important;border-style: none !important;border-color: initial !important;"><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> &nbsp;blockchain </span><span class="pun" style="word-wrap: break-word;color: rgb(184, 255, 184);">=</span><span class="pln" style="word-wrap: break-word;color: rgb(184, 255, 184);"> longest_chain</span></code></p></li>
     </ol></pre>
    <p class="graf graf--p graf-after--p" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">我们差不多就要完成了。在运行了<span style="word-wrap: break-word;color: rgb(77, 138, 216);">完整的 SnakeCoin 服务器代码</span><span class="sup" style="word-wrap: break-word;font-size: 9px;vertical-align: super;background-color: rgb(102, 102, 102);color: rgb(255, 255, 255);transform: scale(0.75);display: inline-block;padding: 1px;line-height: 1em;">[6]</span>之后，在你的终端可以运行如下代码。（假设你已经安装了 cCUL）。</p>
    <p class="h4" style="word-wrap: break-word;margin-top: 8px;margin-right: 10px;margin-bottom: 8px;padding: 6px 15px;line-height: 1.6em;background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181));background-color: rgb(63, 81, 181);color: rgb(255, 255, 255);font-size: 1.2em;border-left: 5px solid rgb(51, 51, 51);text-shadow: rgb(102, 102, 102) 1px 1px 1px;box-shadow: rgb(102, 102, 102) 1px 1px 2px;">1、创建交易</p>
    <pre name="3fb2" class="graf graf--pre graf-after--li" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 0px 0px 0px 1em;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">curl "localhost:5000/txion" \<br style="word-wrap: break-word;">     -H "Content-Type: application/json" \<br style="word-wrap: break-word;">     -d '{"from": "akjflw", "to":"fjlakdj", "amount": 3}'</pre>
    <p class="h4" style="word-wrap: break-word;margin-top: 8px;margin-right: 10px;margin-bottom: 8px;padding: 6px 15px;line-height: 1.6em;background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181));background-color: rgb(63, 81, 181);color: rgb(255, 255, 255);font-size: 1.2em;border-left: 5px solid rgb(51, 51, 51);text-shadow: rgb(102, 102, 102) 1px 1px 1px;box-shadow: rgb(102, 102, 102) 1px 1px 2px;">2、挖一个新区块</p>
    <pre name="d0b4" class="graf graf--pre graf-after--p" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 0px 0px 0px 1em;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">curl localhost:5000/mine</pre>
    <p class="h4" style="word-wrap: break-word;margin-top: 8px;margin-right: 10px;margin-bottom: 8px;padding: 6px 15px;line-height: 1.6em;background-image: linear-gradient(to right bottom, rgb(0, 188, 212), rgb(63, 81, 181));background-color: rgb(63, 81, 181);color: rgb(255, 255, 255);font-size: 1.2em;border-left: 5px solid rgb(51, 51, 51);text-shadow: rgb(102, 102, 102) 1px 1px 1px;box-shadow: rgb(102, 102, 102) 1px 1px 2px;">3、 查看结果。从客户端窗口，我们可以看到。</p>
    <p class="graf graf--p graf-after--pre article_img" style="word-wrap: break-word;margin-top: 5px;margin-bottom: 5px;line-height: 2em;text-align: center;"><img class="progressiveMedia-image js-progressiveMedia-image img_loading" data-ratio="0.083" data-src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/W9DqKgFsc6icEa2wTt5r00236By6O3hKiarNvQJQPGoaRwArDajA8KrXlZiaN4pGZzffPLYH4ibL7Mu4RUzugAedJg/640?wx_fmt=png" data-type="png" data-w="1000" style="word-wrap: break-word; max-width: 95%; border: none; box-shadow: none; width: 624px !important; height: 51.792px !important;" _width="624px" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/W9DqKgFsc6icEa2wTt5r00236By6O3hKiarNvQJQPGoaRwArDajA8KrXlZiaN4pGZzffPLYH4ibL7Mu4RUzugAedJg/640?wx_fmt=png"></p>
    <p class="graf graf--p graf-after--figure" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">对代码做下美化处理，我们看到挖矿后我们得到的新区块的信息：</p>
    <pre name="72df" class="graf graf--pre graf-after--p" style="word-wrap: break-word;background-color: rgb(22, 27, 32);background-image: none;box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 5px;text-shadow: rgb(0, 0, 0) 0px 1px 1px;border-radius: 6px;color: rgb(184, 255, 184);margin: 10px;padding: 0px 0px 0px 1em;white-space: pre-wrap;border-width: 1px;border-style: solid;border-color: rgb(0, 0, 0);line-height: 1.2em;letter-spacing: 0px !important;">{<br style="word-wrap: break-word;">  "index": 2,<br style="word-wrap: break-word;">  "data": {<br style="word-wrap: break-word;">    "transactions": [<br style="word-wrap: break-word;">      {<br style="word-wrap: break-word;">        "to": "fjlakdj",<br style="word-wrap: break-word;">        "amount": 3,<br style="word-wrap: break-word;">        "from": "akjflw"<br style="word-wrap: break-word;">      },<br style="word-wrap: break-word;">      {<br style="word-wrap: break-word;">        "to": "q3nf394hjg-random-miner-address-34nf3i4nflkn3oi",<br style="word-wrap: break-word;">        "amount": 1,<br style="word-wrap: break-word;">        "from": "network"<br style="word-wrap: break-word;">      }<br style="word-wrap: break-word;">    ],<br style="word-wrap: break-word;">    "proof-of-work": 36<br style="word-wrap: break-word;">  },<br style="word-wrap: break-word;">  "hash": "151edd3ef6af2e7eb8272245cb8ea91b4ecfc3e60af22d8518ef0bba8b4a6b18",<br style="word-wrap: break-word;">  "timestamp": "2017-07-23 11:23:10.140996"<br style="word-wrap: break-word;">}</pre>
    <p class="graf graf--p graf-after--pre" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">大功告成！现在 SnakeCoin 可以运行在多个机器上，从而创建了一个网络，而且真实的 SnakeCoin 也能被挖到了。</p>
    <p class="graf graf--p graf-after--pre" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">你可以根据你的喜好去修改 SnakeCoin 服务器代码，并问各种问题了。</p>
    <p class="graf graf--p graf-after--pre" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;">在下一篇（LCTT 译注：截止至本文翻译，作者还没有写出下一篇），我们将讨论创建一个 SnakeCoin 钱包，这样用户就可以发送、接收和存储他们的 SnakeCoin 了。</p>
    <p class="graf graf--p graf-after--pre" style="word-wrap: break-word;margin-top: 1.5em;margin-bottom: 1.5em;line-height: 2em;"><span style="color: rgb(255, 104, 39);">本文也入驻了<span style="font-family: Optima-Regular, PingFangTC-light;font-size: 14px;letter-spacing: 2px;background-color: rgb(255, 255, 255);">「虎尔财经」专属频道，请查看今天推送的下一篇文章访问我们的区块链频道，并可获得专属奖励 token。</span></span></p>
   </section> 
  </div>   
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/F8qG7f9YD02Pe/article/details/79589992,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/F8qG7f9YD02Pe/article/details/79589992,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
