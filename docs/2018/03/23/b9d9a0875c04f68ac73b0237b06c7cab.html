<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>基于Java语言构建区块链（一）—— 基本原型 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="基于Java语言构建区块链（一）—— 基本原型" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="引言 区块链技术是一项比人工智能更具革命性的技术，人工智能只是提高了人类的生产力，而区块链则将改变人类社会的生产关系，它将会颠覆我们人类社会现有的协作方式。了解和掌握区块链相关知识和技术，是我们每位开发人员必须要去做的事情，这样我们才能把握住这波时代趋势的红利。 本文将基于Java语言构建简化版的blockchain，来实现数字货币。 创建区块 区块链是由包含交易信息的区块从后向前有序链接起来的数据结构。区块被从后向前有序地链接在这个链条里，每个区块都指向前一个区块。以比特币为例，每个区块主要包含如下信息字段： 区块大小：用字节表示的区块数据大小 区块头：组成区块头的几个字段 区块头hash值 父区块头hash值 时间戳：区块产生的近似时间 Merkle根：该区块中交易的merkle树根的哈希值 难度目标：该区块工作量证明算法的难度目标 Nonce：用于工作量证明算法的计数器 交易计数器：交易的数量 交易：记录在区块里的交易信息 详见：《精通比特币》（第二版）第9章——区块链 区块数据结构 在这里，我们主要是为了实现最简单的区块链结构，仅仅包含以下几个信息字段： /** * 区块 * * @author wangwei * @date 2018/02/02 */ @Data public class Block { /** * 区块hash值 */ private String hash; /** * 前一个区块的hash值 */ private String previousHash; /** * 区块数据 */ private String data; /** * 区块创建时间(单位:秒) */ private long timeStamp; public Block() { } public Block(String hash, String previousHash, String data, long timeStamp) { this(); this.hash = hash; this.previousHash = previousHash; this.data = data; this.timeStamp = timeStamp; } } 区块Hash值计算 加密Hash值，一个通过SHA256算法对区块头进行二次哈希计算而得到的数字指纹。Hash值用于确保blockchain的安全。Hash计算是计算敏感的操作，即使在高性能电脑也需要花费一段时间来完成计算(这也就是为什么人们购买高性能GPU进行比特币挖矿的原因)。blockchain架构设计有意使Hash计算变得困难，这样做是为了加大新增一个block的难度，进而防止block在增加后被随意修改。 /** * &lt;p&gt; 创建新区块 &lt;/p&gt; * * @param previousHash * @param data * @return */ public static Block newBlock(String previousHash, String data) { Block block = new Block(&quot;&quot;, previousHash, data.getBytes(), Instant.now().getEpochSecond()); block.setHash(); return block; } /** * 计算区块Hash * &lt;p&gt; * 注意：在准备区块数据时，一定要从原始数据类型转化为byte[]，不能直接从字符串进行转换 * * @return */ private void setHash() { byte[] prevBlockHashBytes = {}; if (StringUtils.isNoneBlank(this.getPrevBlockHash())) { prevBlockHashBytes = new BigInteger(this.getPrevBlockHash(), 16).toByteArray(); } byte[] headers = ByteUtils.merge( prevBlockHashBytes, this.getData().getBytes(), ByteUtils.toBytes(this.getTimeStamp())); this.setHash(DigestUtils.sha256Hex(headers)); } 创建区块链 区块链本质上是一种有序、反向链接链表的数据结构。这意味着，block按照插入的顺序存放，同时每个block都保存指向上一个block的链接。这种结构保证可以快速获取最新插入的block同时获取它的hash值。这种结构保证可以快速获取最新插入的block同时（高效地）获取它的hash值。 区块链数据结构 /** * &lt;p&gt; 区块链 &lt;/p&gt; * * @author wangwei * @date 2018/02/02 */ public class Blockchain { @Getter private List&lt;Block&gt; blockList; public Blockchain(List&lt;Block&gt; blockList) { this.blockList = blockList; } } 添加区块 新增一个添加区块链的方法 /** * &lt;p&gt; 添加区块 &lt;/p&gt; * * @param data 数据 */ public void addBlock(String data) { Block previousBlock = blockList.get(blockList.size() - 1); this.addBlock(Block.newBlock(previousBlock.getHash(), data)); } /** * &lt;p&gt; 添加区块 &lt;/p&gt; * * @param block 区块 */ public void addBlock(Block block) { this.blockList.add(block); } 创世区块 在添加区块之前，区块链必须有个 创世区块，在 Block中新增创世区块方法： /** * &lt;p&gt; 创建创世区块 &lt;/p&gt; * * @return */ public static Block newGenesisBlock() { return Block.newBlock(&quot;&quot;, &quot;Genesis Block&quot;); } 创建区块链 再在 Blockchain中新增创建区块链的方法： /** * &lt;p&gt; 创建区块链 &lt;/p&gt; * * @return */ public static Blockchain newBlockchain() { List&lt;Block&gt; blocks = new LinkedList&lt;&gt;(); blocks.add(Block.newGenesisBlock()); return new Blockchain(blocks); } 测试运行 /** * 测试 * * @author wangwei * @date 2018/02/05 */ public class BlockchainTest { public static void main(String[] args) { Blockchain blockchain = Blockchain.newBlockchain(); blockchain.addBlock(&quot;Send 1 BTC to Ivan&quot;); blockchain.addBlock(&quot;Send 2 more BTC to Ivan&quot;); for (Block block : blockchain.getBlockList()) { System.out.println(&quot;Prev. hash: &quot; + block.getPreviousHash()); System.out.println(&quot;Data: &quot; + block.getData()); System.out.println(&quot;Hash: &quot; + block.getHash()); System.out.println(); } } } /** * 输出如下信息： */ Prev. hash: Data: Genesis Block Hash: 4492cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4 Prev. hash: 4492cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4 Data: Send 1 BTC to Ivan Hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04 Prev. hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04 Data: Send 2 more BTC to Ivan Hash: 42f78d6a86f88aa9b5b10e468494dfd1b3f558a9fb74a01eb348c2cbfc5d000a 给大家推荐一个java内部学习群：725633148，进群找管理免费领取学习资料和视频。没有错就是免费领取！大佬小白都欢迎，大家一起学习共同进步！ 总结 我们构建了一个非常简单的区块链原型：它只是一个块的数组，每个块都与前一个块有连接。 实际的区块链要复杂得多。 缺少交易信息：我们的区块链还没有任何交易信息。 缺少工作量证明：我们的生产区块非常简单快捷，实际的区块链中，生产一个区块需要进行大量的计算。 缺少共识机制：区块链是一个非单一决策者的分布式数据库。 因此，一个新的区块必须得到网络的其他参与者的确认和批 在以后的文章中，我们将介绍这些功能。 文章出处： https://wangwei.one/ &nbsp;转载 ！ 阅读更多" />
<meta property="og:description" content="引言 区块链技术是一项比人工智能更具革命性的技术，人工智能只是提高了人类的生产力，而区块链则将改变人类社会的生产关系，它将会颠覆我们人类社会现有的协作方式。了解和掌握区块链相关知识和技术，是我们每位开发人员必须要去做的事情，这样我们才能把握住这波时代趋势的红利。 本文将基于Java语言构建简化版的blockchain，来实现数字货币。 创建区块 区块链是由包含交易信息的区块从后向前有序链接起来的数据结构。区块被从后向前有序地链接在这个链条里，每个区块都指向前一个区块。以比特币为例，每个区块主要包含如下信息字段： 区块大小：用字节表示的区块数据大小 区块头：组成区块头的几个字段 区块头hash值 父区块头hash值 时间戳：区块产生的近似时间 Merkle根：该区块中交易的merkle树根的哈希值 难度目标：该区块工作量证明算法的难度目标 Nonce：用于工作量证明算法的计数器 交易计数器：交易的数量 交易：记录在区块里的交易信息 详见：《精通比特币》（第二版）第9章——区块链 区块数据结构 在这里，我们主要是为了实现最简单的区块链结构，仅仅包含以下几个信息字段： /** * 区块 * * @author wangwei * @date 2018/02/02 */ @Data public class Block { /** * 区块hash值 */ private String hash; /** * 前一个区块的hash值 */ private String previousHash; /** * 区块数据 */ private String data; /** * 区块创建时间(单位:秒) */ private long timeStamp; public Block() { } public Block(String hash, String previousHash, String data, long timeStamp) { this(); this.hash = hash; this.previousHash = previousHash; this.data = data; this.timeStamp = timeStamp; } } 区块Hash值计算 加密Hash值，一个通过SHA256算法对区块头进行二次哈希计算而得到的数字指纹。Hash值用于确保blockchain的安全。Hash计算是计算敏感的操作，即使在高性能电脑也需要花费一段时间来完成计算(这也就是为什么人们购买高性能GPU进行比特币挖矿的原因)。blockchain架构设计有意使Hash计算变得困难，这样做是为了加大新增一个block的难度，进而防止block在增加后被随意修改。 /** * &lt;p&gt; 创建新区块 &lt;/p&gt; * * @param previousHash * @param data * @return */ public static Block newBlock(String previousHash, String data) { Block block = new Block(&quot;&quot;, previousHash, data.getBytes(), Instant.now().getEpochSecond()); block.setHash(); return block; } /** * 计算区块Hash * &lt;p&gt; * 注意：在准备区块数据时，一定要从原始数据类型转化为byte[]，不能直接从字符串进行转换 * * @return */ private void setHash() { byte[] prevBlockHashBytes = {}; if (StringUtils.isNoneBlank(this.getPrevBlockHash())) { prevBlockHashBytes = new BigInteger(this.getPrevBlockHash(), 16).toByteArray(); } byte[] headers = ByteUtils.merge( prevBlockHashBytes, this.getData().getBytes(), ByteUtils.toBytes(this.getTimeStamp())); this.setHash(DigestUtils.sha256Hex(headers)); } 创建区块链 区块链本质上是一种有序、反向链接链表的数据结构。这意味着，block按照插入的顺序存放，同时每个block都保存指向上一个block的链接。这种结构保证可以快速获取最新插入的block同时获取它的hash值。这种结构保证可以快速获取最新插入的block同时（高效地）获取它的hash值。 区块链数据结构 /** * &lt;p&gt; 区块链 &lt;/p&gt; * * @author wangwei * @date 2018/02/02 */ public class Blockchain { @Getter private List&lt;Block&gt; blockList; public Blockchain(List&lt;Block&gt; blockList) { this.blockList = blockList; } } 添加区块 新增一个添加区块链的方法 /** * &lt;p&gt; 添加区块 &lt;/p&gt; * * @param data 数据 */ public void addBlock(String data) { Block previousBlock = blockList.get(blockList.size() - 1); this.addBlock(Block.newBlock(previousBlock.getHash(), data)); } /** * &lt;p&gt; 添加区块 &lt;/p&gt; * * @param block 区块 */ public void addBlock(Block block) { this.blockList.add(block); } 创世区块 在添加区块之前，区块链必须有个 创世区块，在 Block中新增创世区块方法： /** * &lt;p&gt; 创建创世区块 &lt;/p&gt; * * @return */ public static Block newGenesisBlock() { return Block.newBlock(&quot;&quot;, &quot;Genesis Block&quot;); } 创建区块链 再在 Blockchain中新增创建区块链的方法： /** * &lt;p&gt; 创建区块链 &lt;/p&gt; * * @return */ public static Blockchain newBlockchain() { List&lt;Block&gt; blocks = new LinkedList&lt;&gt;(); blocks.add(Block.newGenesisBlock()); return new Blockchain(blocks); } 测试运行 /** * 测试 * * @author wangwei * @date 2018/02/05 */ public class BlockchainTest { public static void main(String[] args) { Blockchain blockchain = Blockchain.newBlockchain(); blockchain.addBlock(&quot;Send 1 BTC to Ivan&quot;); blockchain.addBlock(&quot;Send 2 more BTC to Ivan&quot;); for (Block block : blockchain.getBlockList()) { System.out.println(&quot;Prev. hash: &quot; + block.getPreviousHash()); System.out.println(&quot;Data: &quot; + block.getData()); System.out.println(&quot;Hash: &quot; + block.getHash()); System.out.println(); } } } /** * 输出如下信息： */ Prev. hash: Data: Genesis Block Hash: 4492cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4 Prev. hash: 4492cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4 Data: Send 1 BTC to Ivan Hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04 Prev. hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04 Data: Send 2 more BTC to Ivan Hash: 42f78d6a86f88aa9b5b10e468494dfd1b3f558a9fb74a01eb348c2cbfc5d000a 给大家推荐一个java内部学习群：725633148，进群找管理免费领取学习资料和视频。没有错就是免费领取！大佬小白都欢迎，大家一起学习共同进步！ 总结 我们构建了一个非常简单的区块链原型：它只是一个块的数组，每个块都与前一个块有连接。 实际的区块链要复杂得多。 缺少交易信息：我们的区块链还没有任何交易信息。 缺少工作量证明：我们的生产区块非常简单快捷，实际的区块链中，生产一个区块需要进行大量的计算。 缺少共识机制：区块链是一个非单一决策者的分布式数据库。 因此，一个新的区块必须得到网络的其他参与者的确认和批 在以后的文章中，我们将介绍这些功能。 文章出处： https://wangwei.one/ &nbsp;转载 ！ 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/03/23/b9d9a0875c04f68ac73b0237b06c7cab.html" />
<meta property="og:url" content="https://mlh.app/2018/03/23/b9d9a0875c04f68ac73b0237b06c7cab.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-23T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"引言 区块链技术是一项比人工智能更具革命性的技术，人工智能只是提高了人类的生产力，而区块链则将改变人类社会的生产关系，它将会颠覆我们人类社会现有的协作方式。了解和掌握区块链相关知识和技术，是我们每位开发人员必须要去做的事情，这样我们才能把握住这波时代趋势的红利。 本文将基于Java语言构建简化版的blockchain，来实现数字货币。 创建区块 区块链是由包含交易信息的区块从后向前有序链接起来的数据结构。区块被从后向前有序地链接在这个链条里，每个区块都指向前一个区块。以比特币为例，每个区块主要包含如下信息字段： 区块大小：用字节表示的区块数据大小 区块头：组成区块头的几个字段 区块头hash值 父区块头hash值 时间戳：区块产生的近似时间 Merkle根：该区块中交易的merkle树根的哈希值 难度目标：该区块工作量证明算法的难度目标 Nonce：用于工作量证明算法的计数器 交易计数器：交易的数量 交易：记录在区块里的交易信息 详见：《精通比特币》（第二版）第9章——区块链 区块数据结构 在这里，我们主要是为了实现最简单的区块链结构，仅仅包含以下几个信息字段： /** * 区块 * * @author wangwei * @date 2018/02/02 */ @Data public class Block { /** * 区块hash值 */ private String hash; /** * 前一个区块的hash值 */ private String previousHash; /** * 区块数据 */ private String data; /** * 区块创建时间(单位:秒) */ private long timeStamp; public Block() { } public Block(String hash, String previousHash, String data, long timeStamp) { this(); this.hash = hash; this.previousHash = previousHash; this.data = data; this.timeStamp = timeStamp; } } 区块Hash值计算 加密Hash值，一个通过SHA256算法对区块头进行二次哈希计算而得到的数字指纹。Hash值用于确保blockchain的安全。Hash计算是计算敏感的操作，即使在高性能电脑也需要花费一段时间来完成计算(这也就是为什么人们购买高性能GPU进行比特币挖矿的原因)。blockchain架构设计有意使Hash计算变得困难，这样做是为了加大新增一个block的难度，进而防止block在增加后被随意修改。 /** * &lt;p&gt; 创建新区块 &lt;/p&gt; * * @param previousHash * @param data * @return */ public static Block newBlock(String previousHash, String data) { Block block = new Block(&quot;&quot;, previousHash, data.getBytes(), Instant.now().getEpochSecond()); block.setHash(); return block; } /** * 计算区块Hash * &lt;p&gt; * 注意：在准备区块数据时，一定要从原始数据类型转化为byte[]，不能直接从字符串进行转换 * * @return */ private void setHash() { byte[] prevBlockHashBytes = {}; if (StringUtils.isNoneBlank(this.getPrevBlockHash())) { prevBlockHashBytes = new BigInteger(this.getPrevBlockHash(), 16).toByteArray(); } byte[] headers = ByteUtils.merge( prevBlockHashBytes, this.getData().getBytes(), ByteUtils.toBytes(this.getTimeStamp())); this.setHash(DigestUtils.sha256Hex(headers)); } 创建区块链 区块链本质上是一种有序、反向链接链表的数据结构。这意味着，block按照插入的顺序存放，同时每个block都保存指向上一个block的链接。这种结构保证可以快速获取最新插入的block同时获取它的hash值。这种结构保证可以快速获取最新插入的block同时（高效地）获取它的hash值。 区块链数据结构 /** * &lt;p&gt; 区块链 &lt;/p&gt; * * @author wangwei * @date 2018/02/02 */ public class Blockchain { @Getter private List&lt;Block&gt; blockList; public Blockchain(List&lt;Block&gt; blockList) { this.blockList = blockList; } } 添加区块 新增一个添加区块链的方法 /** * &lt;p&gt; 添加区块 &lt;/p&gt; * * @param data 数据 */ public void addBlock(String data) { Block previousBlock = blockList.get(blockList.size() - 1); this.addBlock(Block.newBlock(previousBlock.getHash(), data)); } /** * &lt;p&gt; 添加区块 &lt;/p&gt; * * @param block 区块 */ public void addBlock(Block block) { this.blockList.add(block); } 创世区块 在添加区块之前，区块链必须有个 创世区块，在 Block中新增创世区块方法： /** * &lt;p&gt; 创建创世区块 &lt;/p&gt; * * @return */ public static Block newGenesisBlock() { return Block.newBlock(&quot;&quot;, &quot;Genesis Block&quot;); } 创建区块链 再在 Blockchain中新增创建区块链的方法： /** * &lt;p&gt; 创建区块链 &lt;/p&gt; * * @return */ public static Blockchain newBlockchain() { List&lt;Block&gt; blocks = new LinkedList&lt;&gt;(); blocks.add(Block.newGenesisBlock()); return new Blockchain(blocks); } 测试运行 /** * 测试 * * @author wangwei * @date 2018/02/05 */ public class BlockchainTest { public static void main(String[] args) { Blockchain blockchain = Blockchain.newBlockchain(); blockchain.addBlock(&quot;Send 1 BTC to Ivan&quot;); blockchain.addBlock(&quot;Send 2 more BTC to Ivan&quot;); for (Block block : blockchain.getBlockList()) { System.out.println(&quot;Prev. hash: &quot; + block.getPreviousHash()); System.out.println(&quot;Data: &quot; + block.getData()); System.out.println(&quot;Hash: &quot; + block.getHash()); System.out.println(); } } } /** * 输出如下信息： */ Prev. hash: Data: Genesis Block Hash: 4492cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4 Prev. hash: 4492cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4 Data: Send 1 BTC to Ivan Hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04 Prev. hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04 Data: Send 2 more BTC to Ivan Hash: 42f78d6a86f88aa9b5b10e468494dfd1b3f558a9fb74a01eb348c2cbfc5d000a 给大家推荐一个java内部学习群：725633148，进群找管理免费领取学习资料和视频。没有错就是免费领取！大佬小白都欢迎，大家一起学习共同进步！ 总结 我们构建了一个非常简单的区块链原型：它只是一个块的数组，每个块都与前一个块有连接。 实际的区块链要复杂得多。 缺少交易信息：我们的区块链还没有任何交易信息。 缺少工作量证明：我们的生产区块非常简单快捷，实际的区块链中，生产一个区块需要进行大量的计算。 缺少共识机制：区块链是一个非单一决策者的分布式数据库。 因此，一个新的区块必须得到网络的其他参与者的确认和批 在以后的文章中，我们将介绍这些功能。 文章出处： https://wangwei.one/ &nbsp;转载 ！ 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/03/23/b9d9a0875c04f68ac73b0237b06c7cab.html","headline":"基于Java语言构建区块链（一）—— 基本原型","dateModified":"2018-03-23T00:00:00+08:00","datePublished":"2018-03-23T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/03/23/b9d9a0875c04f68ac73b0237b06c7cab.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>基于Java语言构建区块链（一）—— 基本原型</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);"><span style="font-size:1.75em;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180323154213303" alt=""><br></span></p>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);"><span style="font-size:1.75em;">引言</span></p>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">区块链技术是一项比人工智能更具革命性的技术，人工智能只是提高了人类的生产力，而区块链则将改变人类社会的生产关系，它将会颠覆我们人类社会现有的协作方式。了解和掌握区块链相关知识和技术，是我们每位开发人员必须要去做的事情，这样我们才能把握住这波时代趋势的红利。</p>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">本文将基于Java语言构建简化版的blockchain，来实现数字货币。</p>
  <h2 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1.75em;border-bottom:1px solid rgb(238,238,238);background-color:rgb(255,255,255);">创建区块</h2>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">区块链是由包含交易信息的区块从后向前有序链接起来的数据结构。区块被从后向前有序地链接在这个链条里，每个区块都指向前一个区块。以比特币为例，每个区块主要包含如下信息字段：</p>
  <blockquote style="font-size:14px;border-left:2px solid rgb(0,154,97);background:rgb(246,246,246);color:rgb(85,85,85);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;">
   <ul style="margin-left:3em;">
    <li style="margin-left:0px;">区块大小：用字节表示的区块数据大小</li>
    <li style="margin-left:0px;"><p>区块头：组成区块头的几个字段</p>
     <ul style="margin-left:3em;">
      <li style="margin-left:0px;">区块头hash值</li>
      <li style="margin-left:0px;">父区块头hash值</li>
      <li style="margin-left:0px;">时间戳：区块产生的近似时间</li>
      <li style="margin-left:0px;">Merkle根：该区块中交易的merkle树根的哈希值</li>
      <li style="margin-left:0px;">难度目标：该区块工作量证明算法的难度目标</li>
      <li style="margin-left:0px;">Nonce：用于工作量证明算法的计数器</li>
     </ul></li>
    <li style="margin-left:0px;">交易计数器：交易的数量</li>
    <li style="margin-left:0px;">交易：记录在区块里的交易信息</li>
   </ul>
   <blockquote style="font-size:1em;border-left:2px solid rgb(0,154,97);color:rgb(85,85,85);">
    详见：《精通比特币》（第二版）第9章——区块链
   </blockquote>
  </blockquote>
  <h5 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1em;background-color:rgb(255,255,255);">区块数据结构</h5>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180323154243553" alt=""><br></p>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">在这里，我们主要是为了实现最简单的区块链结构，仅仅包含以下几个信息字段：</p>
  <pre style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;line-height:1.45;color:rgb(51,51,51);border:none;"><code class="java" style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">/** * 区块 * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@author</span> wangwei * <span class="hljs-doctag" style="color:rgb(221,17,68);">@date</span> 2018/02/02 */</span>
<span class="hljs-meta" style="color:rgb(153,153,153);font-weight:bold;">@Data</span>
<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-class"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">class</span> <span class="hljs-title" style="color:rgb(68,85,136);font-weight:bold;">Block</span> </span>{

    <span class="hljs-comment" style="color:rgb(153,153,136);">/** * 区块hash值 */</span>
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">private</span> String hash;
    <span class="hljs-comment" style="color:rgb(153,153,136);">/** * 前一个区块的hash值 */</span>
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">private</span> String previousHash;
    <span class="hljs-comment" style="color:rgb(153,153,136);">/** * 区块数据 */</span>
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">private</span> String data;
    <span class="hljs-comment" style="color:rgb(153,153,136);">/** * 区块创建时间(单位:秒) */</span>
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">private</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">long</span> timeStamp;

    <span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">Block</span><span class="hljs-params">()</span> </span>{
    }

    <span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">Block</span><span class="hljs-params">(String hash, String previousHash, String data, <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">long</span> timeStamp)</span> </span>{
        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>();
        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.hash = hash;
        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.previousHash = previousHash;
        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.data = data;
        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.timeStamp = timeStamp;
    }
}</code></pre>
  <h5 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1em;background-color:rgb(255,255,255);">区块Hash值计算</h5>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">加密Hash值，一个通过SHA256算法对区块头进行二次哈希计算而得到的数字指纹。Hash值用于确保blockchain的安全。Hash计算是计算敏感的操作，即使在高性能电脑也需要花费一段时间来完成计算(这也就是为什么人们购买高性能GPU进行比特币挖矿的原因)。blockchain架构设计有意使Hash计算变得困难，这样做是为了加大新增一个block的难度，进而防止block在增加后被随意修改。</p>
  <pre style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;line-height:1.45;color:rgb(51,51,51);border:none;"><code class="java" style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">/** * &lt;p&gt; 创建新区块 &lt;/p&gt; * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@param</span> previousHash * <span class="hljs-doctag" style="color:rgb(221,17,68);">@param</span> data * <span class="hljs-doctag" style="color:rgb(221,17,68);">@return</span> */</span>
<span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">static</span> Block <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">newBlock</span><span class="hljs-params">(String previousHash, String data)</span> </span>{
        Block block = <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">new</span> Block(<span class="hljs-string" style="color:rgb(221,17,68);">""</span>, previousHash, data.getBytes(),     Instant.now().getEpochSecond());
        block.setHash();
        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">return</span> block;
}

<span class="hljs-comment" style="color:rgb(153,153,136);">/** * 计算区块Hash * &lt;p&gt; * 注意：在准备区块数据时，一定要从原始数据类型转化为byte[]，不能直接从字符串进行转换 * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@return</span> */</span>
<span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">private</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">void</span> <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">setHash</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">byte</span>[] prevBlockHashBytes = {};
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">if</span> (StringUtils.isNoneBlank(<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.getPrevBlockHash())) {
        prevBlockHashBytes = <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">new</span> BigInteger(<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.getPrevBlockHash(), <span class="hljs-number" style="color:rgb(0,128,128);">16</span>).toByteArray();
    }

    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">byte</span>[] headers = ByteUtils.merge(
           prevBlockHashBytes,
           <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.getData().getBytes(),
           ByteUtils.toBytes(<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.getTimeStamp()));

    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.setHash(DigestUtils.sha256Hex(headers));
}</code></pre>
  <h2 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1.75em;border-bottom:1px solid rgb(238,238,238);background-color:rgb(255,255,255);">创建区块链</h2>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">区块链本质上是一种<strong>有序</strong>、<strong>反向链接链表</strong>的数据结构。这意味着，block按照插入的顺序存放，同时每个block都保存指向上一个block的链接。这种结构保证可以快速获取最新插入的block同时获取它的hash值。这种结构保证可以快速获取最新插入的block同时（高效地）获取它的hash值。</p>
  <h5 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1em;background-color:rgb(255,255,255);">区块链数据结构</h5>
  <pre style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;line-height:1.45;color:rgb(51,51,51);border:none;"><code class="java" style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">/** * &lt;p&gt; 区块链 &lt;/p&gt; * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@author</span> wangwei * <span class="hljs-doctag" style="color:rgb(221,17,68);">@date</span> 2018/02/02 */</span>
<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-class"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">class</span> <span class="hljs-title" style="color:rgb(68,85,136);font-weight:bold;">Blockchain</span> </span>{
    
    <span class="hljs-meta" style="color:rgb(153,153,153);font-weight:bold;">@Getter</span>
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">private</span> List&lt;Block&gt; blockList;

    <span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">Blockchain</span><span class="hljs-params">(List&lt;Block&gt; blockList)</span> </span>{
        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.blockList = blockList;
    }
}    </code></pre>
  <h5 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1em;background-color:rgb(255,255,255);">添加区块</h5>
  <blockquote style="font-size:14px;border-left:2px solid rgb(0,154,97);background:rgb(246,246,246);color:rgb(85,85,85);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;">
   新增一个添加区块链的方法
  </blockquote>
  <pre style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;line-height:1.45;color:rgb(51,51,51);border:none;"><code class="java" style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">/** * &lt;p&gt; 添加区块 &lt;/p&gt; * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@param</span> data 数据 */</span>
<span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">void</span> <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">addBlock</span><span class="hljs-params">(String data)</span> </span>{
   Block previousBlock = blockList.get(blockList.size() - <span class="hljs-number" style="color:rgb(0,128,128);">1</span>);
   <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.addBlock(Block.newBlock(previousBlock.getHash(), data));
}

<span class="hljs-comment" style="color:rgb(153,153,136);">/** * &lt;p&gt; 添加区块 &lt;/p&gt; * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@param</span> block 区块 */</span>
<span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">void</span> <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">addBlock</span><span class="hljs-params">(Block block)</span> </span>{
   <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">this</span>.blockList.add(block);
}</code></pre>
  <h5 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1em;background-color:rgb(255,255,255);">创世区块</h5>
  <blockquote style="font-size:14px;border-left:2px solid rgb(0,154,97);background:rgb(246,246,246);color:rgb(85,85,85);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;">
   在添加区块之前，区块链必须有个
   <code style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;">创世区块</code>，在
   <code style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;">Block</code>中新增创世区块方法：
  </blockquote>
  <pre style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;line-height:1.45;color:rgb(51,51,51);border:none;"><code class="java" style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">/** * &lt;p&gt; 创建创世区块 &lt;/p&gt; * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@return</span> */</span>
<span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">static</span> Block <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">newGenesisBlock</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">return</span> Block.newBlock(<span class="hljs-string" style="color:rgb(221,17,68);">""</span>, <span class="hljs-string" style="color:rgb(221,17,68);">"Genesis Block"</span>);
}</code></pre>
  <h5 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1em;background-color:rgb(255,255,255);">创建区块链</h5>
  <blockquote style="font-size:14px;border-left:2px solid rgb(0,154,97);background:rgb(246,246,246);color:rgb(85,85,85);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;">
   再在
   <code style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;">Blockchain</code>中新增创建区块链的方法：
  </blockquote>
  <pre style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;line-height:1.45;color:rgb(51,51,51);border:none;"><code class="java" style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">/** * &lt;p&gt; 创建区块链 &lt;/p&gt; * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@return</span> */</span>
<span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">static</span> Blockchain <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">newBlockchain</span><span class="hljs-params">()</span> </span>{
    List&lt;Block&gt; blocks = <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">new</span> LinkedList&lt;&gt;();
    blocks.add(Block.newGenesisBlock());
    <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">return</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">new</span> Blockchain(blocks);
}</code></pre>
  <h2 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1.75em;border-bottom:1px solid rgb(238,238,238);background-color:rgb(255,255,255);">测试运行</h2>
  <pre style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:.93em;line-height:1.45;color:rgb(51,51,51);border:none;"><code class="java" style="font-family:'Source Code Pro', Consolas, Menlo, Monaco, 'Courier New', monospace;font-size:1em;color:inherit;background:none;"><span class="hljs-comment" style="color:rgb(153,153,136);">/** * 测试 * * <span class="hljs-doctag" style="color:rgb(221,17,68);">@author</span> wangwei * <span class="hljs-doctag" style="color:rgb(221,17,68);">@date</span> 2018/02/05 */</span>
<span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-class"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">class</span> <span class="hljs-title" style="color:rgb(68,85,136);font-weight:bold;">BlockchainTest</span> </span>{

    <span class="hljs-function"><span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">public</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">static</span> <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">void</span> <span class="hljs-title" style="color:rgb(153,0,0);font-weight:bold;">main</span><span class="hljs-params">(String[] args)</span> </span>{

        Blockchain blockchain = Blockchain.newBlockchain();
        blockchain.addBlock(<span class="hljs-string" style="color:rgb(221,17,68);">"Send 1 BTC to Ivan"</span>);
        blockchain.addBlock(<span class="hljs-string" style="color:rgb(221,17,68);">"Send 2 more BTC to Ivan"</span>);

        <span class="hljs-keyword" style="color:rgb(51,51,51);font-weight:bold;">for</span> (Block block : blockchain.getBlockList()) {
            System.out.println(<span class="hljs-string" style="color:rgb(221,17,68);">"Prev. hash: "</span> + block.getPreviousHash());
            System.out.println(<span class="hljs-string" style="color:rgb(221,17,68);">"Data: "</span> + block.getData());
            System.out.println(<span class="hljs-string" style="color:rgb(221,17,68);">"Hash: "</span> + block.getHash());
            System.out.println();
        }
    }
}

<span class="hljs-comment" style="color:rgb(153,153,136);">/** * 输出如下信息： */</span>
Prev. hash: 
Data: Genesis Block
Hash: <span class="hljs-number" style="color:rgb(0,128,128);">4492</span>cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4

Prev. hash: <span class="hljs-number" style="color:rgb(0,128,128);">4492</span>cb9d396a9a52e7ff17ef3782f022ddcdc7b2c276bc6dd3d448b0655eb3d4
Data: Send <span class="hljs-number" style="color:rgb(0,128,128);">1</span> BTC to Ivan
Hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04

Prev. hash: cd716d59d98ad673035ab7035ece751718ea9842944a4743c298bebc0fe24c04
Data: Send <span class="hljs-number" style="color:rgb(0,128,128);">2</span> more BTC to Ivan
Hash: <span class="hljs-number" style="color:rgb(0,128,128);">42f</span>78d6a86f88aa9b5b10e468494dfd1b3f558a9fb74a01eb348c2cbfc5d000a</code></pre>
  <h2 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1.75em;border-bottom:1px solid rgb(238,238,238);background-color:rgb(255,255,255);"></h2>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(29,29,29);"><span style="font-family:'微软雅黑';">给大家推荐一个</span></span><a href="https://www.yidianzixun.com/channel/w/java" rel="nofollow"><span style="color:rgb(18,154,238);">java</span></a><span style="color:rgb(29,29,29);"><span style="font-family:'微软雅黑';">内部学习群：</span>725633148，进群找管理免费领取学习资料和视频。没有错就是免费领取！大佬小白都欢迎，大家一起学习共同进步！</span></p>
  <h2 style="font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-weight:500;line-height:1.2;color:rgb(51,51,51);font-size:1.75em;border-bottom:1px solid rgb(238,238,238);background-color:rgb(255,255,255);">总结</h2>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">我们构建了一个非常简单的区块链原型：它只是一个块的数组，每个块都与前一个块有连接。 实际的区块链要复杂得多。</p>
  <ul style="margin-left:3em;color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">
   <li style="margin-left:0px;">缺少交易信息：我们的区块链还没有任何交易信息。</li>
   <li style="margin-left:0px;">缺少工作量证明：我们的生产区块非常简单快捷，实际的区块链中，生产一个区块需要进行大量的计算。</li>
   <li style="margin-left:0px;">缺少共识机制：区块链是一个非单一决策者的分布式数据库。 因此，一个新的区块必须得到网络的其他参与者的确认和批</li>
  </ul>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">在以后的文章中，我们将介绍这些功能。</p>
  <p style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);"><span style="color:rgb(51,51,51);font-family:'-apple-system', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', 'Microsoft Yahei', sans-serif;font-size:14px;background-color:rgb(255,255,255);">文章出处： https://wangwei.one/ &nbsp;转载 ！</span><br></p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/gupao123456/article/details/79668459,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/gupao123456/article/details/79668459,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
