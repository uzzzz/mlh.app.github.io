<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>区块链：如何在ubuntu 上搭建私链 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="区块链：如何在ubuntu 上搭建私链" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="一：通过geth的形式初始化区块链 搭建私链： &nbsp;&nbsp;安装必要的app 1 安装GO： 64位ubutun（参考https://blog.csdn.net/ceciiiilia/article/details/71483221） .对于64位Linux&nbsp; wget&nbsp;https://storage.googleapis.com/golang/go1.8.1.linux-amd64.tar.gz&nbsp;&nbsp; 在/usr/local下安装程序 $&nbsp;sudo&nbsp;tar&nbsp;-xzf&nbsp;go1.8.1.linux-xxx.tar.gz&nbsp;-C&nbsp;/usr/local 配置全局变量 sudo&nbsp;vim ~/.bashrc&nbsp;&nbsp; 在打开的文件最后加上两行代码 export&nbsp;GOPATH=/usr/local/go&nbsp;&nbsp; export&nbsp;PATH=$GOPATH/bin:$PATH&nbsp;&nbsp; 保存文件 使修改生效 source&nbsp;~/.bashr&nbsp; 验证配置是否成功 go&nbsp;version 出现warning，配置PATH export&nbsp;GOROOT=/usr/local/go&nbsp;&nbsp; export&nbsp;GOPATH=$PATH:$GOROOT/bin&nbsp; &nbsp; 2 &nbsp;geth 运行以太坊节点(geth是什么自行百度，先下载geth 参考：https://blog.csdn.net/ddffr/article/details/73733850) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下载source code（tar.gz） sudo add-apt-repository&nbsp;-y&nbsp;ppa:ethereum/ethereum &nbsp;sudo apt-get&nbsp;update &nbsp;sudo apt-get&nbsp;install ethereum 安装完成后就用geth help验证是否安装成功 geth help 3 安装 solidity(参考文档： &nbsp;https://blog.csdn.net/lp18036194881/article/details/72851178) git&nbsp;clone&nbsp;--recursive&nbsp;https://github.com/ethereum/solidity.git&nbsp; cd&nbsp;solidity&nbsp; mkdir&nbsp;build&nbsp;&nbsp; cd&nbsp;build&nbsp;&nbsp; cmake&nbsp;..&nbsp;&amp;&amp;&nbsp;make&nbsp;&nbsp; ./scripts/build.sh 安装时有可能会遇到virtual memory exhausted异常 &nbsp; 1.&nbsp;mkdir&nbsp;/opt/images/&nbsp;&nbsp;&nbsp;&nbsp; 2.&nbsp;rm&nbsp;-rf&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp; 3.&nbsp;dd&nbsp;if=/dev/zero&nbsp;of=/opt/images/swap&nbsp;bs=1024&nbsp;count=2048000&nbsp;&nbsp;&nbsp;&nbsp; 4.&nbsp;mkswap&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp; 5.&nbsp;swapon&nbsp;/opt/images/swap&nbsp; &nbsp; swapoff&nbsp;swap&nbsp;&nbsp;&nbsp; solc&nbsp;--help&nbsp;&nbsp; &nbsp; 4 建立私链 1 mkdir privatechain 2 ifconfig &nbsp;查看自己IP &nbsp;把ip换到下面的IP 3 geth --networkid 123 --dev --datadir data1 --rpc --rpcaddr 192.168.247.131 --rpcport 8989 --port 3000 4 保持当前窗口不变 打开一个新的命令窗口 5 &nbsp;新窗口cd /home/jack/privatechain &nbsp;会看到新产生的data1文件夹 6 &nbsp;geth attach ipc:geth.ipc 7 (1-7为必要的 8-19为非必要的操作) &nbsp; 比如执行 personal.listAccounts &nbsp;查看当前账户 8 &nbsp;personal.newAccount(“ghc”) 创建一个ghc的钱包 9 personal.newAccount(“ghc2”)创建第二个钱包 10 &nbsp;personal.listAccounts 查看当前钱包有几个 11 web3.eth.coinbase &nbsp;查看第一个帐号 &nbsp;就相当于 personal.listAccount[0] 的查看结果 12 eth.getbalance(“”) &nbsp;&nbsp;查看帐号的余额 &nbsp;&nbsp;显示的单位是“位” 13 miner.start(); &nbsp;&nbsp;开始挖矿 &nbsp;可以查看上一个命令端口 正在执行挖矿 14 miner.stop() &nbsp;&nbsp;&nbsp;&nbsp;停止挖矿 15 eth.getBalance(“”) &nbsp;&nbsp;&nbsp;查看第一个帐号的余额 会出现余额 &nbsp;默认挖矿给第一个帐号 如果要实现转账 要先把第一个帐号进行解除锁定 16 aersonal.unlockAccount(personal.listAccount[0]); &nbsp;&nbsp;解除第一个账户锁定 然后输入密码 &nbsp;ghc 17 amount &nbsp;= web3.toWei(5,”ether”) 将5个以太币转换成“位” 18 eth.sendTransaction({from:personal.listAccounts[0],to:personal.listAccounts[1],value:amount}) &nbsp;得到交易的hash数值（从0 &nbsp;账户转账到 1账户5 个以太币 &nbsp;eth.getTransaction(“传入hash”) &nbsp;即可查看交易详情） txpool.status 查看状态 &nbsp;pendin 为1 &nbsp;如果想让交易完成 就要挖矿 也就是让pending为0 19 eth.getBlock(“pending”,true) &nbsp;查看交易代办详情 miner.start(); &nbsp;&nbsp;开始挖矿 miner.stop() &nbsp;停止挖矿 &nbsp; txpool.status pending 数值就为0了 eth.blockNumber &nbsp;查看区块数 eth.getBlock(n) &nbsp;&nbsp;查看第n个区块信息 &nbsp; &nbsp; 20 &nbsp;开始写合约部署 在privatechain文件夹下 &nbsp;新建sol文件 &nbsp;保存（编译的方式有很多种 &nbsp;我们可以安装solc方便编译 &nbsp;&nbsp;前边我们已经进行了安装） 21 &nbsp;使用solc &nbsp;编译的命令是: &nbsp;solc --bin test.sol 拿到字节码文件 编译后 &nbsp;拷贝字节码文件 前边加上0x 22 &nbsp;var code = “0x.......”&nbsp; code &nbsp;就会把code显示出来 23 &nbsp;solc --abi test.sol &nbsp;生成在最下方abi文件 24 &nbsp;var abi = &nbsp;&nbsp;拷贝的abi文件 开始部署合约，部署合约前要进行评估花费 25 &nbsp;&nbsp;web3.eth.estimateGas({data: code}) &nbsp;得出是9万多，下面部署的时候要比90000多才行 然后 26 &nbsp;var myContract = eth.contract(abi) 27 &nbsp;var contract = myContract.new({from:personal.listAccounts[0],data:code,gas:10000}) 28 &nbsp;contract &nbsp;(显示部署完成以后的合约) 29 &nbsp;eth.getCode(contract.address) &nbsp;查看部署合约地址 contract.address contract.方法名 就是调用合约，如果保存，方法中没加constant 可以contract.f.call() &nbsp; &nbsp; 以下是部分截图，并不属于上面的执行步骤： &nbsp;&nbsp;Port:用于两个节点之间连接的时候端口号 &nbsp; 二：同一个文件夹下 &nbsp;运行两个节点 1 在相同文件夹下 运行 geth --networkid 123 --datadir data2 --rpc --rpcaddr (自己的ip) --report 9000 --port 3001 console &nbsp;&nbsp;加上console 就相当于geth attach ipc:geth.ipc &nbsp;会重新地区启动 2 打开新命令窗口 &nbsp;运行 geth --networkid 123 --datadir data3 --rpc --rpcaddr (自己的ip) --rpcport 9001 --port 3002 console （端口可以随便改 不和上一个冲突即可） 3 &nbsp;在第一个窗口 运行 &nbsp;admin.nodeInfo.encode 生成一个唯一的enode标识 4 &nbsp;admin.peers &nbsp;查看连接数 5 &nbsp;第二个窗口运行admin.addPeer(第三部的结果) &nbsp;添加连接 6 &nbsp;admin.peers &nbsp;再查看一次连接 7 web3.net.peerCount 查看连接数 &nbsp; &nbsp; &nbsp; 三：通过创世区块的形式初始化区块链 必要参数 &nbsp;config diffculty &nbsp;gasLimit &nbsp;alloc { &nbsp;&quot;config&quot;:{ &nbsp;&nbsp;&nbsp;&nbsp;&quot;chainId&quot;: 15, &nbsp;&nbsp;&nbsp;&nbsp;&quot;homesteadBlock&quot;: 0, &nbsp;&nbsp;&nbsp;&nbsp;&quot;eip155Block&quot;: 0, &nbsp;&nbsp;&nbsp;&nbsp;&quot;eip158Block&quot;: 0 }, &nbsp;&nbsp;&quot;difficulty&quot;: &quot;4&quot;, &nbsp;&nbsp;&quot;gasLimit&quot;: &quot;2100000&quot;, &nbsp;&nbsp;&nbsp;&quot;alloc&quot;:{ &nbsp;&nbsp;&quot;627306090abab3a6e1400e9345bc60c78a8bef57&quot;:{ &nbsp;&nbsp;&nbsp;&nbsp;&quot;balance&quot;: &quot;300000&quot; &nbsp;&nbsp;}, &nbsp;&nbsp;&quot;f17f52151ebef6c7334fad080c5704d77216b732&quot;:{ &nbsp;&nbsp;&nbsp;&quot;balance&quot;: &quot;400000&quot; &nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;&nbsp;} } 2 &nbsp;将上述文件内容复制进json中去 3 &nbsp;确定 退出 4 &nbsp;cat genesis.json &nbsp;&nbsp;查看内容 5 &nbsp;退出 &nbsp;查看我们目前有 data1 &nbsp;data2 &nbsp;data3 &nbsp;我们要创建data5了 6 &nbsp;geth init genesis.json --datadir data4 &nbsp;&nbsp;即可创建data4 7 &nbsp;成功后第一行一般会有警告warn &nbsp;没有设置默认挖矿钱包地址 8 &nbsp;我们打开data4 &nbsp;&nbsp;geth --networkid 123 --datadir data5 console 9 &nbsp;查看余额 &nbsp;eth.getBalance(“627306090abab3a6e1400e9345bc60c78a8bef57”) 出现的应该是300000 10 miner.start() &nbsp;开始挖矿 会报错 因为没设置钱包地址 11 miner.setEtherbase(“627306090abab3a6e1400e9345bc60c78a8bef57”) &nbsp;设置钱包地址 12 miner.start() 本菜鸟微信 guofly123&nbsp; 希望和区块链开发的各位多多交流 参考https://blog.csdn.net/ceciiiilia/article/details/71483221 参考https://blog.csdn.net/ddffr/article/details/73733850 参考孔壹学院教学视频（已付费购买） 阅读更多" />
<meta property="og:description" content="一：通过geth的形式初始化区块链 搭建私链： &nbsp;&nbsp;安装必要的app 1 安装GO： 64位ubutun（参考https://blog.csdn.net/ceciiiilia/article/details/71483221） .对于64位Linux&nbsp; wget&nbsp;https://storage.googleapis.com/golang/go1.8.1.linux-amd64.tar.gz&nbsp;&nbsp; 在/usr/local下安装程序 $&nbsp;sudo&nbsp;tar&nbsp;-xzf&nbsp;go1.8.1.linux-xxx.tar.gz&nbsp;-C&nbsp;/usr/local 配置全局变量 sudo&nbsp;vim ~/.bashrc&nbsp;&nbsp; 在打开的文件最后加上两行代码 export&nbsp;GOPATH=/usr/local/go&nbsp;&nbsp; export&nbsp;PATH=$GOPATH/bin:$PATH&nbsp;&nbsp; 保存文件 使修改生效 source&nbsp;~/.bashr&nbsp; 验证配置是否成功 go&nbsp;version 出现warning，配置PATH export&nbsp;GOROOT=/usr/local/go&nbsp;&nbsp; export&nbsp;GOPATH=$PATH:$GOROOT/bin&nbsp; &nbsp; 2 &nbsp;geth 运行以太坊节点(geth是什么自行百度，先下载geth 参考：https://blog.csdn.net/ddffr/article/details/73733850) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下载source code（tar.gz） sudo add-apt-repository&nbsp;-y&nbsp;ppa:ethereum/ethereum &nbsp;sudo apt-get&nbsp;update &nbsp;sudo apt-get&nbsp;install ethereum 安装完成后就用geth help验证是否安装成功 geth help 3 安装 solidity(参考文档： &nbsp;https://blog.csdn.net/lp18036194881/article/details/72851178) git&nbsp;clone&nbsp;--recursive&nbsp;https://github.com/ethereum/solidity.git&nbsp; cd&nbsp;solidity&nbsp; mkdir&nbsp;build&nbsp;&nbsp; cd&nbsp;build&nbsp;&nbsp; cmake&nbsp;..&nbsp;&amp;&amp;&nbsp;make&nbsp;&nbsp; ./scripts/build.sh 安装时有可能会遇到virtual memory exhausted异常 &nbsp; 1.&nbsp;mkdir&nbsp;/opt/images/&nbsp;&nbsp;&nbsp;&nbsp; 2.&nbsp;rm&nbsp;-rf&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp; 3.&nbsp;dd&nbsp;if=/dev/zero&nbsp;of=/opt/images/swap&nbsp;bs=1024&nbsp;count=2048000&nbsp;&nbsp;&nbsp;&nbsp; 4.&nbsp;mkswap&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp; 5.&nbsp;swapon&nbsp;/opt/images/swap&nbsp; &nbsp; swapoff&nbsp;swap&nbsp;&nbsp;&nbsp; solc&nbsp;--help&nbsp;&nbsp; &nbsp; 4 建立私链 1 mkdir privatechain 2 ifconfig &nbsp;查看自己IP &nbsp;把ip换到下面的IP 3 geth --networkid 123 --dev --datadir data1 --rpc --rpcaddr 192.168.247.131 --rpcport 8989 --port 3000 4 保持当前窗口不变 打开一个新的命令窗口 5 &nbsp;新窗口cd /home/jack/privatechain &nbsp;会看到新产生的data1文件夹 6 &nbsp;geth attach ipc:geth.ipc 7 (1-7为必要的 8-19为非必要的操作) &nbsp; 比如执行 personal.listAccounts &nbsp;查看当前账户 8 &nbsp;personal.newAccount(“ghc”) 创建一个ghc的钱包 9 personal.newAccount(“ghc2”)创建第二个钱包 10 &nbsp;personal.listAccounts 查看当前钱包有几个 11 web3.eth.coinbase &nbsp;查看第一个帐号 &nbsp;就相当于 personal.listAccount[0] 的查看结果 12 eth.getbalance(“”) &nbsp;&nbsp;查看帐号的余额 &nbsp;&nbsp;显示的单位是“位” 13 miner.start(); &nbsp;&nbsp;开始挖矿 &nbsp;可以查看上一个命令端口 正在执行挖矿 14 miner.stop() &nbsp;&nbsp;&nbsp;&nbsp;停止挖矿 15 eth.getBalance(“”) &nbsp;&nbsp;&nbsp;查看第一个帐号的余额 会出现余额 &nbsp;默认挖矿给第一个帐号 如果要实现转账 要先把第一个帐号进行解除锁定 16 aersonal.unlockAccount(personal.listAccount[0]); &nbsp;&nbsp;解除第一个账户锁定 然后输入密码 &nbsp;ghc 17 amount &nbsp;= web3.toWei(5,”ether”) 将5个以太币转换成“位” 18 eth.sendTransaction({from:personal.listAccounts[0],to:personal.listAccounts[1],value:amount}) &nbsp;得到交易的hash数值（从0 &nbsp;账户转账到 1账户5 个以太币 &nbsp;eth.getTransaction(“传入hash”) &nbsp;即可查看交易详情） txpool.status 查看状态 &nbsp;pendin 为1 &nbsp;如果想让交易完成 就要挖矿 也就是让pending为0 19 eth.getBlock(“pending”,true) &nbsp;查看交易代办详情 miner.start(); &nbsp;&nbsp;开始挖矿 miner.stop() &nbsp;停止挖矿 &nbsp; txpool.status pending 数值就为0了 eth.blockNumber &nbsp;查看区块数 eth.getBlock(n) &nbsp;&nbsp;查看第n个区块信息 &nbsp; &nbsp; 20 &nbsp;开始写合约部署 在privatechain文件夹下 &nbsp;新建sol文件 &nbsp;保存（编译的方式有很多种 &nbsp;我们可以安装solc方便编译 &nbsp;&nbsp;前边我们已经进行了安装） 21 &nbsp;使用solc &nbsp;编译的命令是: &nbsp;solc --bin test.sol 拿到字节码文件 编译后 &nbsp;拷贝字节码文件 前边加上0x 22 &nbsp;var code = “0x.......”&nbsp; code &nbsp;就会把code显示出来 23 &nbsp;solc --abi test.sol &nbsp;生成在最下方abi文件 24 &nbsp;var abi = &nbsp;&nbsp;拷贝的abi文件 开始部署合约，部署合约前要进行评估花费 25 &nbsp;&nbsp;web3.eth.estimateGas({data: code}) &nbsp;得出是9万多，下面部署的时候要比90000多才行 然后 26 &nbsp;var myContract = eth.contract(abi) 27 &nbsp;var contract = myContract.new({from:personal.listAccounts[0],data:code,gas:10000}) 28 &nbsp;contract &nbsp;(显示部署完成以后的合约) 29 &nbsp;eth.getCode(contract.address) &nbsp;查看部署合约地址 contract.address contract.方法名 就是调用合约，如果保存，方法中没加constant 可以contract.f.call() &nbsp; &nbsp; 以下是部分截图，并不属于上面的执行步骤： &nbsp;&nbsp;Port:用于两个节点之间连接的时候端口号 &nbsp; 二：同一个文件夹下 &nbsp;运行两个节点 1 在相同文件夹下 运行 geth --networkid 123 --datadir data2 --rpc --rpcaddr (自己的ip) --report 9000 --port 3001 console &nbsp;&nbsp;加上console 就相当于geth attach ipc:geth.ipc &nbsp;会重新地区启动 2 打开新命令窗口 &nbsp;运行 geth --networkid 123 --datadir data3 --rpc --rpcaddr (自己的ip) --rpcport 9001 --port 3002 console （端口可以随便改 不和上一个冲突即可） 3 &nbsp;在第一个窗口 运行 &nbsp;admin.nodeInfo.encode 生成一个唯一的enode标识 4 &nbsp;admin.peers &nbsp;查看连接数 5 &nbsp;第二个窗口运行admin.addPeer(第三部的结果) &nbsp;添加连接 6 &nbsp;admin.peers &nbsp;再查看一次连接 7 web3.net.peerCount 查看连接数 &nbsp; &nbsp; &nbsp; 三：通过创世区块的形式初始化区块链 必要参数 &nbsp;config diffculty &nbsp;gasLimit &nbsp;alloc { &nbsp;&quot;config&quot;:{ &nbsp;&nbsp;&nbsp;&nbsp;&quot;chainId&quot;: 15, &nbsp;&nbsp;&nbsp;&nbsp;&quot;homesteadBlock&quot;: 0, &nbsp;&nbsp;&nbsp;&nbsp;&quot;eip155Block&quot;: 0, &nbsp;&nbsp;&nbsp;&nbsp;&quot;eip158Block&quot;: 0 }, &nbsp;&nbsp;&quot;difficulty&quot;: &quot;4&quot;, &nbsp;&nbsp;&quot;gasLimit&quot;: &quot;2100000&quot;, &nbsp;&nbsp;&nbsp;&quot;alloc&quot;:{ &nbsp;&nbsp;&quot;627306090abab3a6e1400e9345bc60c78a8bef57&quot;:{ &nbsp;&nbsp;&nbsp;&nbsp;&quot;balance&quot;: &quot;300000&quot; &nbsp;&nbsp;}, &nbsp;&nbsp;&quot;f17f52151ebef6c7334fad080c5704d77216b732&quot;:{ &nbsp;&nbsp;&nbsp;&quot;balance&quot;: &quot;400000&quot; &nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;&nbsp;} } 2 &nbsp;将上述文件内容复制进json中去 3 &nbsp;确定 退出 4 &nbsp;cat genesis.json &nbsp;&nbsp;查看内容 5 &nbsp;退出 &nbsp;查看我们目前有 data1 &nbsp;data2 &nbsp;data3 &nbsp;我们要创建data5了 6 &nbsp;geth init genesis.json --datadir data4 &nbsp;&nbsp;即可创建data4 7 &nbsp;成功后第一行一般会有警告warn &nbsp;没有设置默认挖矿钱包地址 8 &nbsp;我们打开data4 &nbsp;&nbsp;geth --networkid 123 --datadir data5 console 9 &nbsp;查看余额 &nbsp;eth.getBalance(“627306090abab3a6e1400e9345bc60c78a8bef57”) 出现的应该是300000 10 miner.start() &nbsp;开始挖矿 会报错 因为没设置钱包地址 11 miner.setEtherbase(“627306090abab3a6e1400e9345bc60c78a8bef57”) &nbsp;设置钱包地址 12 miner.start() 本菜鸟微信 guofly123&nbsp; 希望和区块链开发的各位多多交流 参考https://blog.csdn.net/ceciiiilia/article/details/71483221 参考https://blog.csdn.net/ddffr/article/details/73733850 参考孔壹学院教学视频（已付费购买） 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/03/26/fff32901fd18c141d10f3de7d8113e01.html" />
<meta property="og:url" content="https://mlh.app/2018/03/26/fff32901fd18c141d10f3de7d8113e01.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-26T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"一：通过geth的形式初始化区块链 搭建私链： &nbsp;&nbsp;安装必要的app 1 安装GO： 64位ubutun（参考https://blog.csdn.net/ceciiiilia/article/details/71483221） .对于64位Linux&nbsp; wget&nbsp;https://storage.googleapis.com/golang/go1.8.1.linux-amd64.tar.gz&nbsp;&nbsp; 在/usr/local下安装程序 $&nbsp;sudo&nbsp;tar&nbsp;-xzf&nbsp;go1.8.1.linux-xxx.tar.gz&nbsp;-C&nbsp;/usr/local 配置全局变量 sudo&nbsp;vim ~/.bashrc&nbsp;&nbsp; 在打开的文件最后加上两行代码 export&nbsp;GOPATH=/usr/local/go&nbsp;&nbsp; export&nbsp;PATH=$GOPATH/bin:$PATH&nbsp;&nbsp; 保存文件 使修改生效 source&nbsp;~/.bashr&nbsp; 验证配置是否成功 go&nbsp;version 出现warning，配置PATH export&nbsp;GOROOT=/usr/local/go&nbsp;&nbsp; export&nbsp;GOPATH=$PATH:$GOROOT/bin&nbsp; &nbsp; 2 &nbsp;geth 运行以太坊节点(geth是什么自行百度，先下载geth 参考：https://blog.csdn.net/ddffr/article/details/73733850) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 下载source code（tar.gz） sudo add-apt-repository&nbsp;-y&nbsp;ppa:ethereum/ethereum &nbsp;sudo apt-get&nbsp;update &nbsp;sudo apt-get&nbsp;install ethereum 安装完成后就用geth help验证是否安装成功 geth help 3 安装 solidity(参考文档： &nbsp;https://blog.csdn.net/lp18036194881/article/details/72851178) git&nbsp;clone&nbsp;--recursive&nbsp;https://github.com/ethereum/solidity.git&nbsp; cd&nbsp;solidity&nbsp; mkdir&nbsp;build&nbsp;&nbsp; cd&nbsp;build&nbsp;&nbsp; cmake&nbsp;..&nbsp;&amp;&amp;&nbsp;make&nbsp;&nbsp; ./scripts/build.sh 安装时有可能会遇到virtual memory exhausted异常 &nbsp; 1.&nbsp;mkdir&nbsp;/opt/images/&nbsp;&nbsp;&nbsp;&nbsp; 2.&nbsp;rm&nbsp;-rf&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp; 3.&nbsp;dd&nbsp;if=/dev/zero&nbsp;of=/opt/images/swap&nbsp;bs=1024&nbsp;count=2048000&nbsp;&nbsp;&nbsp;&nbsp; 4.&nbsp;mkswap&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp; 5.&nbsp;swapon&nbsp;/opt/images/swap&nbsp; &nbsp; swapoff&nbsp;swap&nbsp;&nbsp;&nbsp; solc&nbsp;--help&nbsp;&nbsp; &nbsp; 4 建立私链 1 mkdir privatechain 2 ifconfig &nbsp;查看自己IP &nbsp;把ip换到下面的IP 3 geth --networkid 123 --dev --datadir data1 --rpc --rpcaddr 192.168.247.131 --rpcport 8989 --port 3000 4 保持当前窗口不变 打开一个新的命令窗口 5 &nbsp;新窗口cd /home/jack/privatechain &nbsp;会看到新产生的data1文件夹 6 &nbsp;geth attach ipc:geth.ipc 7 (1-7为必要的 8-19为非必要的操作) &nbsp; 比如执行 personal.listAccounts &nbsp;查看当前账户 8 &nbsp;personal.newAccount(“ghc”) 创建一个ghc的钱包 9 personal.newAccount(“ghc2”)创建第二个钱包 10 &nbsp;personal.listAccounts 查看当前钱包有几个 11 web3.eth.coinbase &nbsp;查看第一个帐号 &nbsp;就相当于 personal.listAccount[0] 的查看结果 12 eth.getbalance(“”) &nbsp;&nbsp;查看帐号的余额 &nbsp;&nbsp;显示的单位是“位” 13 miner.start(); &nbsp;&nbsp;开始挖矿 &nbsp;可以查看上一个命令端口 正在执行挖矿 14 miner.stop() &nbsp;&nbsp;&nbsp;&nbsp;停止挖矿 15 eth.getBalance(“”) &nbsp;&nbsp;&nbsp;查看第一个帐号的余额 会出现余额 &nbsp;默认挖矿给第一个帐号 如果要实现转账 要先把第一个帐号进行解除锁定 16 aersonal.unlockAccount(personal.listAccount[0]); &nbsp;&nbsp;解除第一个账户锁定 然后输入密码 &nbsp;ghc 17 amount &nbsp;= web3.toWei(5,”ether”) 将5个以太币转换成“位” 18 eth.sendTransaction({from:personal.listAccounts[0],to:personal.listAccounts[1],value:amount}) &nbsp;得到交易的hash数值（从0 &nbsp;账户转账到 1账户5 个以太币 &nbsp;eth.getTransaction(“传入hash”) &nbsp;即可查看交易详情） txpool.status 查看状态 &nbsp;pendin 为1 &nbsp;如果想让交易完成 就要挖矿 也就是让pending为0 19 eth.getBlock(“pending”,true) &nbsp;查看交易代办详情 miner.start(); &nbsp;&nbsp;开始挖矿 miner.stop() &nbsp;停止挖矿 &nbsp; txpool.status pending 数值就为0了 eth.blockNumber &nbsp;查看区块数 eth.getBlock(n) &nbsp;&nbsp;查看第n个区块信息 &nbsp; &nbsp; 20 &nbsp;开始写合约部署 在privatechain文件夹下 &nbsp;新建sol文件 &nbsp;保存（编译的方式有很多种 &nbsp;我们可以安装solc方便编译 &nbsp;&nbsp;前边我们已经进行了安装） 21 &nbsp;使用solc &nbsp;编译的命令是: &nbsp;solc --bin test.sol 拿到字节码文件 编译后 &nbsp;拷贝字节码文件 前边加上0x 22 &nbsp;var code = “0x.......”&nbsp; code &nbsp;就会把code显示出来 23 &nbsp;solc --abi test.sol &nbsp;生成在最下方abi文件 24 &nbsp;var abi = &nbsp;&nbsp;拷贝的abi文件 开始部署合约，部署合约前要进行评估花费 25 &nbsp;&nbsp;web3.eth.estimateGas({data: code}) &nbsp;得出是9万多，下面部署的时候要比90000多才行 然后 26 &nbsp;var myContract = eth.contract(abi) 27 &nbsp;var contract = myContract.new({from:personal.listAccounts[0],data:code,gas:10000}) 28 &nbsp;contract &nbsp;(显示部署完成以后的合约) 29 &nbsp;eth.getCode(contract.address) &nbsp;查看部署合约地址 contract.address contract.方法名 就是调用合约，如果保存，方法中没加constant 可以contract.f.call() &nbsp; &nbsp; 以下是部分截图，并不属于上面的执行步骤： &nbsp;&nbsp;Port:用于两个节点之间连接的时候端口号 &nbsp; 二：同一个文件夹下 &nbsp;运行两个节点 1 在相同文件夹下 运行 geth --networkid 123 --datadir data2 --rpc --rpcaddr (自己的ip) --report 9000 --port 3001 console &nbsp;&nbsp;加上console 就相当于geth attach ipc:geth.ipc &nbsp;会重新地区启动 2 打开新命令窗口 &nbsp;运行 geth --networkid 123 --datadir data3 --rpc --rpcaddr (自己的ip) --rpcport 9001 --port 3002 console （端口可以随便改 不和上一个冲突即可） 3 &nbsp;在第一个窗口 运行 &nbsp;admin.nodeInfo.encode 生成一个唯一的enode标识 4 &nbsp;admin.peers &nbsp;查看连接数 5 &nbsp;第二个窗口运行admin.addPeer(第三部的结果) &nbsp;添加连接 6 &nbsp;admin.peers &nbsp;再查看一次连接 7 web3.net.peerCount 查看连接数 &nbsp; &nbsp; &nbsp; 三：通过创世区块的形式初始化区块链 必要参数 &nbsp;config diffculty &nbsp;gasLimit &nbsp;alloc { &nbsp;&quot;config&quot;:{ &nbsp;&nbsp;&nbsp;&nbsp;&quot;chainId&quot;: 15, &nbsp;&nbsp;&nbsp;&nbsp;&quot;homesteadBlock&quot;: 0, &nbsp;&nbsp;&nbsp;&nbsp;&quot;eip155Block&quot;: 0, &nbsp;&nbsp;&nbsp;&nbsp;&quot;eip158Block&quot;: 0 }, &nbsp;&nbsp;&quot;difficulty&quot;: &quot;4&quot;, &nbsp;&nbsp;&quot;gasLimit&quot;: &quot;2100000&quot;, &nbsp;&nbsp;&nbsp;&quot;alloc&quot;:{ &nbsp;&nbsp;&quot;627306090abab3a6e1400e9345bc60c78a8bef57&quot;:{ &nbsp;&nbsp;&nbsp;&nbsp;&quot;balance&quot;: &quot;300000&quot; &nbsp;&nbsp;}, &nbsp;&nbsp;&quot;f17f52151ebef6c7334fad080c5704d77216b732&quot;:{ &nbsp;&nbsp;&nbsp;&quot;balance&quot;: &quot;400000&quot; &nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;&nbsp;} } 2 &nbsp;将上述文件内容复制进json中去 3 &nbsp;确定 退出 4 &nbsp;cat genesis.json &nbsp;&nbsp;查看内容 5 &nbsp;退出 &nbsp;查看我们目前有 data1 &nbsp;data2 &nbsp;data3 &nbsp;我们要创建data5了 6 &nbsp;geth init genesis.json --datadir data4 &nbsp;&nbsp;即可创建data4 7 &nbsp;成功后第一行一般会有警告warn &nbsp;没有设置默认挖矿钱包地址 8 &nbsp;我们打开data4 &nbsp;&nbsp;geth --networkid 123 --datadir data5 console 9 &nbsp;查看余额 &nbsp;eth.getBalance(“627306090abab3a6e1400e9345bc60c78a8bef57”) 出现的应该是300000 10 miner.start() &nbsp;开始挖矿 会报错 因为没设置钱包地址 11 miner.setEtherbase(“627306090abab3a6e1400e9345bc60c78a8bef57”) &nbsp;设置钱包地址 12 miner.start() 本菜鸟微信 guofly123&nbsp; 希望和区块链开发的各位多多交流 参考https://blog.csdn.net/ceciiiilia/article/details/71483221 参考https://blog.csdn.net/ddffr/article/details/73733850 参考孔壹学院教学视频（已付费购买） 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/03/26/fff32901fd18c141d10f3de7d8113e01.html","headline":"区块链：如何在ubuntu 上搭建私链","dateModified":"2018-03-26T00:00:00+08:00","datePublished":"2018-03-26T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/03/26/fff32901fd18c141d10f3de7d8113e01.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>区块链：如何在ubuntu 上搭建私链</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h4><br></h4>
  <h4><strong><span style="font-family:'黑体';">一：通过</span>geth<span style="font-family:'黑体';">的形式初始化区块链</span></strong></h4>
  <p>搭建私链：</p>
  <p>&nbsp;&nbsp;<span style="font-family:'宋体';">安装必要的</span>app</p>
  <h5><strong>1 <span style="font-family:'宋体';">安装</span><span style="font-family:Calibri;">GO</span><span style="font-family:'宋体';">： </span><span style="font-family:Calibri;">64</span><span style="font-family:'宋体';">位</span><span style="font-family:Calibri;">ubutun</span><span style="font-family:'宋体';">（参考</span><span style="font-family:Calibri;">https://blog.csdn.net/ceciiiilia/article/details/71483221</span><span style="font-family:'宋体';">）</span></strong></h5>
  <p style="background:rgb(255,255,255);"><strong>.对于64位Linux</strong><span style="color:rgb(0,0,0);">&nbsp;</span></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">wget&nbsp;https://storage.googleapis.com/golang/go1.8.1.linux-amd64.tar.gz&nbsp;&nbsp;</span></p>
  <p style="background:rgb(255,255,255);"><strong><span style="font-family:'PingFang SC';">在</span>/usr/local下安装程序</strong></p>
  <p align="justify" style="background:rgb(250,250,252);"><span style="color:rgb(0,0,0);background:rgb(255,255,255);">$&nbsp;sudo&nbsp;tar&nbsp;-xzf&nbsp;go1.8.1.linux-xxx.tar.gz&nbsp;-C&nbsp;/usr/local</span></p>
  <p align="justify" style="background:rgb(250,250,252);"><strong><span style="background:rgb(255,255,255);"><span style="font-family:'PingFang SC';">配置全局变量</span></span></strong></p>
  <p align="justify" style="background:rgb(250,250,252);"><span style="color:rgb(0,0,0);background:rgb(255,255,255);">sudo&nbsp;</span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">vim </span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">~/.bashrc&nbsp;&nbsp;</span></p>
  <p align="justify" style="background:rgb(250,250,252);"><span style="color:rgb(69,69,69);background:rgb(255,255,255);"><span style="font-family:'PingFang SC';">在打开的文件最后加上两行代码</span></span></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">export&nbsp;GOPATH=/usr/local/go&nbsp;&nbsp;</span></p>
  <p style="background:rgb(248,248,248);"><span style="color:rgb(0,0,0);">export&nbsp;PATH=$GOPATH/bin:$PATH&nbsp;&nbsp;</span></p>
  <p style="background:rgb(248,248,248);"><span style="color:rgb(69,69,69);background:rgb(255,255,255);"><span style="font-family:'PingFang SC';">保存文件</span></span></p>
  <p style="background:rgb(248,248,248);"><strong><span style="background:rgb(255,255,255);"><span style="font-family:'PingFang SC';">使修改生效</span></span></strong></p>
  <p style="background:rgb(248,248,248);"><span style="color:rgb(0,0,0);background:rgb(255,255,255);">source&nbsp;~/.bashr&nbsp;</span></p>
  <p style="background:rgb(248,248,248);"><strong><span style="background:rgb(255,255,255);"><span style="font-family:'PingFang SC';">验证配置是否成功</span></span></strong></p>
  <p style="background:rgb(248,248,248);"><span style="color:rgb(0,0,0);background:rgb(255,255,255);">go&nbsp;version</span></p>
  <p style="background:rgb(248,248,248);"><strong><span style="background:rgb(255,255,255);"><span style="font-family:'PingFang SC';">出现</span>warning，配置PATH</span></strong></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">export&nbsp;GOROOT=/usr/local/go&nbsp;&nbsp;</span></p>
  <p style="background:rgb(248,248,248);"><span style="color:rgb(0,0,0);">export&nbsp;GOPATH=$PATH:$GOROOT/bin&nbsp;</span></p>
  <p align="justify" style="background:rgb(250,250,252);"><span style="color:rgb(69,69,69);background:rgb(255,255,255);">&nbsp;</span></p>
  <h5><strong>2 &nbsp;geth <span style="font-family:'宋体';">运行以太坊节点</span><span style="font-family:Calibri;">(geth</span><span style="font-family:'宋体';">是什么自行百度，先下载</span><span style="font-family:Calibri;">geth </span><span style="font-family:'宋体';">参考：</span><span style="font-family:Calibri;">https://blog.csdn.net/ddffr/article/details/73733850)</span></strong></h5>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
  <p><span style="font-family:'宋体';">下载</span>source code<span style="font-family:'宋体';">（</span><span style="font-family:Calibri;">tar.gz</span><span style="font-family:'宋体';">）</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(246,248,250);">sudo add</span><span style="color:rgb(0,0,0);">-apt-repository</span><span style="color:rgb(0,0,0);background:rgb(246,248,250);">&nbsp;</span><span style="color:rgb(0,0,0);">-y</span><span style="color:rgb(0,0,0);background:rgb(246,248,250);">&nbsp;ppa:ethereum/ethereum </span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(246,248,250);">&nbsp;sudo apt</span><span style="color:rgb(0,0,0);">-get</span><span style="color:rgb(0,0,0);background:rgb(246,248,250);">&nbsp;update </span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(246,248,250);">&nbsp;sudo apt</span><span style="color:rgb(0,0,0);">-get</span><span style="color:rgb(0,0,0);background:rgb(246,248,250);">&nbsp;install ethereum</span></p>
  <p><span style="font-family:'宋体';">安装完成后就用</span>geth help<span style="font-family:'宋体';">验证是否安装成功</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(246,248,250);">geth help</span></p>
  <h5><strong>3 <span style="font-family:'宋体';">安装 </span><span style="font-family:Calibri;">solidity(</span><span style="font-family:'宋体';">参考文档： &nbsp;</span><span style="font-family:Calibri;">https://blog.csdn.net/lp18036194881/article/details/72851178)</span></strong></h5>
  <p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">git&nbsp;clone&nbsp;--recursive&nbsp;https://github.com/ethereum/solidity.git&nbsp;</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(248,248,248);">cd&nbsp;solidity&nbsp;</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">mkdir&nbsp;build&nbsp;&nbsp;</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">cd&nbsp;build&nbsp;&nbsp;</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">cmake&nbsp;..&nbsp;&amp;&amp;&nbsp;make&nbsp;&nbsp;</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">./scripts/build.sh</span></p>
  <p><span style="color:rgb(69,69,69);background:rgb(255,255,255);"><span style="font-family:'PingFang SC';">安装时有可能会遇到</span>virtual memory exhausted异常</span></p>
  <p><span style="color:rgb(69,69,69);background:rgb(255,255,255);">&nbsp;</span></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">1.&nbsp;</span><span style="color:rgb(0,0,0);">mkdir&nbsp;/opt/images/&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
  <p style="background:rgb(248,248,248);"><span style="color:rgb(0,0,0);">2.&nbsp;</span><span style="color:rgb(0,0,0);">rm&nbsp;-rf&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">3.&nbsp;</span><span style="color:rgb(0,0,0);">dd&nbsp;if=/dev/zero&nbsp;of=/opt/images/swap&nbsp;bs=1024&nbsp;count=2048000&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
  <p style="background:rgb(248,248,248);"><span style="color:rgb(0,0,0);">4.&nbsp;</span><span style="color:rgb(0,0,0);">mkswap&nbsp;/opt/images/swap&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">5.&nbsp;</span><span style="color:rgb(0,0,0);">swapon&nbsp;/opt/images/swap&nbsp;</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">&nbsp;</span></p>
  <p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">swapoff&nbsp;swap&nbsp;&nbsp;&nbsp;</span></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">solc&nbsp;--help&nbsp;&nbsp;</span></p>
  <p style="background:rgb(255,255,255);"><span style="color:rgb(0,0,0);">&nbsp;</span></p>
  <h5><strong>4 <span style="font-family:'宋体';">建立私链</span></strong></h5>
  <p>1 mkdir privatechain</p>
  <p>2 ifconfig &nbsp;<span style="font-family:'宋体';">查看自己</span><span style="font-family:Calibri;">IP &nbsp;</span><span style="font-family:'宋体';">把</span><span style="font-family:Calibri;">ip</span><span style="font-family:'宋体';">换到下面的</span><span style="font-family:Calibri;">IP</span></p>
  <p>3 geth --networkid 123 --dev --datadir data1 --rpc --rpcaddr 192.168.247.131 --rpcport 8989 --port 3000</p>
  <p>4 <span style="font-family:'宋体';">保持当前窗口不变 打开一个新的命令窗口</span></p>
  <p>5 &nbsp;<span style="font-family:'宋体';">新窗口</span><span style="font-family:Calibri;">cd /home/jack/privatechain &nbsp;</span><span style="font-family:'宋体';">会看到新产生的</span><span style="font-family:Calibri;">data1</span><span style="font-family:'宋体';">文件夹</span></p>
  <p>6 &nbsp;geth attach ipc:geth.ipc</p>
  <p>7 </p>
  <p><span style="color:rgb(255,0,0);">(1-7<span style="font-family:'宋体';">为必要的 </span><span style="font-family:Calibri;">8-19</span><span style="font-family:'宋体';">为非必要的操作</span><span style="font-family:Calibri;">)</span></span></p>
  <p><span style="color:rgb(255,0,0);">&nbsp;</span></p>
  <p><span style="font-family:'宋体';">比如执行</span> personal.listAccounts &nbsp;<span style="font-family:'宋体';">查看当前账户</span></p>
  <p>8 &nbsp;personal.newAccount(“ghc”) <span style="font-family:'宋体';">创建一个</span><span style="font-family:Calibri;">ghc</span><span style="font-family:'宋体';">的钱包</span></p>
  <p>9 personal.newAccount(“ghc2”)<span style="font-family:'宋体';">创建第二个钱包</span></p>
  <p>10 &nbsp;personal.listAccounts <span style="font-family:'宋体';">查看当前钱包有几个</span></p>
  <p>11 web3.eth.coinbase &nbsp;<span style="font-family:'宋体';">查看第一个帐号 &nbsp;就相当于 </span><span style="font-family:Calibri;">personal.listAccount[0] </span><span style="font-family:'宋体';">的查看结果 </span></p>
  <p>12 eth.getbalance(“”) &nbsp;&nbsp;<span style="font-family:'宋体';">查看帐号的余额 &nbsp;&nbsp;显示的单位是“位”</span></p>
  <p>13 miner.start(); &nbsp;&nbsp;<span style="font-family:'宋体';">开始挖矿 &nbsp;可以查看上一个命令端口 正在执行挖矿</span></p>
  <p>14 miner.stop() &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:'宋体';">停止挖矿</span></p>
  <p>15 eth.getBalance(“”) &nbsp;&nbsp;&nbsp;<span style="font-family:'宋体';">查看第一个帐号的余额 会出现余额 &nbsp;默认挖矿给第一个帐号</span></p>
  <p><span style="font-family:'宋体';">如果要实现转账</span> <span style="font-family:'宋体';">要先把第一个帐号进行解除锁定</span></p>
  <p>16 aersonal.unlockAccount(personal.listAccount[0]); &nbsp;&nbsp;<span style="font-family:'宋体';">解除第一个账户锁定</span></p>
  <p><span style="font-family:'宋体';">然后输入密码</span> &nbsp;ghc</p>
  <p>17 amount &nbsp;= web3.toWei(5,”ether”) <span style="font-family:'宋体';">将</span><span style="font-family:Calibri;">5</span><span style="font-family:'宋体';">个以太币转换成“位”</span></p>
  <p>18 eth.sendTransaction({from:personal.listAccounts[0],to:personal.listAccounts[1],value:amount}) &nbsp;<span style="font-family:'宋体';">得到交易的</span><span style="font-family:Calibri;">hash</span><span style="font-family:'宋体';">数值（从</span><span style="font-family:Calibri;">0 &nbsp;</span><span style="font-family:'宋体';">账户转账到 </span><span style="font-family:Calibri;">1</span><span style="font-family:'宋体';">账户</span><span style="font-family:Calibri;">5 </span><span style="font-family:'宋体';">个以太币 &nbsp;</span><span style="font-family:Calibri;">eth.getTransaction(</span>“<span style="font-family:'宋体';">传入</span>hash”) &nbsp;<span style="font-family:'宋体';">即可查看交易详情）</span></p>
  <p>txpool.status <span style="font-family:'宋体';">查看状态 &nbsp;</span><span style="font-family:Calibri;">pendin </span><span style="font-family:'宋体';">为</span><span style="font-family:Calibri;">1 &nbsp;</span><span style="font-family:'宋体';">如果想让交易完成 就要挖矿 也就是让</span><span style="font-family:Calibri;">pending</span><span style="font-family:'宋体';">为</span><span style="font-family:Calibri;">0</span></p>
  <p>19 eth.getBlock(“pending”,true) &nbsp;<span style="font-family:'宋体';">查看交易代办详情</span></p>
  <p>miner.start(); &nbsp;&nbsp;<span style="font-family:'宋体';">开始挖矿</span></p>
  <p>miner.stop() &nbsp;<span style="font-family:'宋体';">停止挖矿 &nbsp;</span></p>
  <p>txpool.status pending <span style="font-family:'宋体';">数值就为</span><span style="font-family:Calibri;">0</span><span style="font-family:'宋体';">了</span></p>
  <p>eth.blockNumber &nbsp;<span style="font-family:'宋体';">查看区块数</span></p>
  <p>eth.getBlock(n) &nbsp;&nbsp;<span style="font-family:'宋体';">查看第</span><span style="font-family:Calibri;">n</span><span style="font-family:'宋体';">个区块信息</span></p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>20 &nbsp;<span style="font-family:'宋体';">开始写合约部署</span></p>
  <p><span style="font-family:'宋体';">在</span>privatechain<span style="font-family:'宋体';">文件夹下 &nbsp;新建</span><span style="font-family:Calibri;">sol</span><span style="font-family:'宋体';">文件 &nbsp;保存（编译的方式有很多种 &nbsp;我们可以安装</span><span style="font-family:Calibri;">solc</span><span style="font-family:'宋体';">方便编译 &nbsp;&nbsp;前边我们已经进行了安装）</span></p>
  <p>21 &nbsp;<span style="font-family:'宋体';">使用</span><span style="font-family:Calibri;">solc &nbsp;</span><span style="font-family:'宋体';">编译的命令是</span><span style="font-family:Calibri;">: &nbsp;solc --bin test.sol </span><span style="font-family:'宋体';">拿到字节码文件</span></p>
  <p><span style="font-family:'宋体';">编译后</span> &nbsp;<span style="font-family:'宋体';">拷贝字节码文件</span> <span style="font-family:'宋体';">前边加上</span>0x</p>
  <p>22 &nbsp;var code = “0x.......”&nbsp;</p>
  <p>code &nbsp;<span style="font-family:'宋体';">就会把</span><span style="font-family:Calibri;">code</span><span style="font-family:'宋体';">显示出来</span></p>
  <p>23 &nbsp;solc --abi test.sol &nbsp;<span style="font-family:'宋体';">生成在最下方</span><span style="font-family:Calibri;">abi</span><span style="font-family:'宋体';">文件</span></p>
  <p>24 &nbsp;var abi = &nbsp;&nbsp;<span style="font-family:'宋体';">拷贝的</span><span style="font-family:Calibri;">abi</span><span style="font-family:'宋体';">文件</span></p>
  <p>开始部署合约，部署合约前要进行评估花费</p>
  <p>25 &nbsp;&nbsp;web3.eth.estimateGas({data: code}) &nbsp;<span style="font-family:'宋体';">得出是</span><span style="font-family:Calibri;">9</span><span style="font-family:'宋体';">万多，下面部署的时候要比</span><span style="font-family:Calibri;">90000</span><span style="font-family:'宋体';">多才行</span></p>
  <p>然后</p>
  <p>26 &nbsp;var myContract = eth.contract(abi)</p>
  <p>27 &nbsp;var contract = myContract.new({from:personal.listAccounts[0],data:code,gas:10000})</p>
  <p>28 &nbsp;contract &nbsp;(<span style="font-family:'宋体';">显示部署完成以后的合约</span><span style="font-family:Calibri;">)</span></p>
  <p>29 &nbsp;eth.getCode(contract.address) &nbsp;<span style="font-family:'宋体';">查看部署合约地址</span></p>
  <p>contract.address</p>
  <p>contract.<span style="font-family:'宋体';">方法名 就是调用合约，如果保存，方法中没加</span><span style="font-family:Calibri;">constant </span><span style="font-family:'宋体';">可以</span><span style="font-family:Calibri;">contract.f.call()</span></p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>以下是部分截图，并不属于上面的执行步骤：</p>
  <p>&nbsp;&nbsp;Port:<span style="font-family:'宋体';">用于两个节点之间连接的时候端口号</span></p>
  <p>&nbsp;</p>
  <h5><strong><span style="font-family:'宋体';">二：同一个文件夹下</span> &nbsp;<span style="font-family:'宋体';">运行两个节点</span></strong></h5>
  <p>1 <span style="font-family:'宋体';">在相同文件夹下 运行 </span><span style="font-family:Calibri;">geth --networkid 123 --datadir data2 --rpc --rpcaddr (</span><span style="font-family:'宋体';">自己的</span><span style="font-family:Calibri;">ip) --report 9000 --port 3001 console &nbsp;&nbsp;</span><span style="font-family:'宋体';">加上</span><span style="font-family:Calibri;">console </span><span style="font-family:'宋体';">就相当于</span><span style="font-family:Calibri;">geth attach ipc:geth.ipc &nbsp;</span><span style="font-family:'宋体';">会重新地区启动</span></p>
  <p>2 <span style="font-family:'宋体';">打开新命令窗口</span></p>
  <p>&nbsp;<span style="font-family:'宋体';">运行</span></p>
  <p>geth --networkid 123 --datadir data3 --rpc --rpcaddr (<span style="font-family:'宋体';">自己的</span><span style="font-family:Calibri;">ip) --rpcport 9001 --port 3002 console </span></p>
  <p><span style="font-family:'宋体';">（端口可以随便改</span> <span style="font-family:'宋体';">不和上一个冲突即可）</span></p>
  <p>3 &nbsp;<span style="font-family:'宋体';">在第一个窗口 运行 &nbsp;</span><span style="font-family:Calibri;">admin.nodeInfo.encode</span> <span style="font-family:'宋体';">生成一个唯一的</span>enode<span style="font-family:'宋体';">标识</span></p>
  <p>4 &nbsp;admin.peers &nbsp;<span style="font-family:'宋体';">查看连接数</span></p>
  <p>5 &nbsp;<span style="font-family:'宋体';">第二个窗口运行</span><span style="font-family:Calibri;">admin.addPeer(</span><span style="font-family:'宋体';">第三部的结果</span><span style="font-family:Calibri;">) &nbsp;</span><span style="font-family:'宋体';">添加连接</span></p>
  <p>6 &nbsp;admin.peers &nbsp;<span style="font-family:'宋体';">再查看一次连接</span></p>
  <p>7 web3.net.peerCount <span style="font-family:'宋体';">查看连接数</span></p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <h5><strong>三：通过创世区块的形式初始化区块链</strong></h5>
  <p><span style="font-family:'宋体';">必要参数</span> &nbsp;config diffculty &nbsp;gasLimit &nbsp;alloc</p>
  <p>{</p>
  <p>&nbsp;"config":{</p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;"chainId": 15,</p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;"homesteadBlock": 0,</p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;"eip155Block": 0,</p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;"eip158Block": 0</p>
  <p>},</p>
  <p>&nbsp;&nbsp;"difficulty": "4",</p>
  <p>&nbsp;&nbsp;"gasLimit": "2100000",</p>
  <p>&nbsp;&nbsp;&nbsp;"alloc":{ </p>
  <p>&nbsp;&nbsp;"627306090abab3a6e1400e9345bc60c78a8bef57":{</p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;"balance": "300000" </p>
  <p>&nbsp;&nbsp;},</p>
  <p>&nbsp;&nbsp;"f17f52151ebef6c7334fad080c5704d77216b732":{</p>
  <p>&nbsp;&nbsp;&nbsp;"balance": "400000"</p>
  <p>&nbsp;&nbsp;&nbsp;}</p>
  <p>&nbsp;&nbsp;&nbsp;}</p>
  <p>}</p>
  <p>2 &nbsp;<span style="font-family:'宋体';">将上述文件内容复制进</span><span style="font-family:Calibri;">json</span><span style="font-family:'宋体';">中去</span></p>
  <p>3 &nbsp;<span style="font-family:'宋体';">确定 退出</span></p>
  <p>4 &nbsp;cat genesis.json &nbsp;&nbsp;<span style="font-family:'宋体';">查看内容</span></p>
  <p>5 &nbsp;<span style="font-family:'宋体';">退出 &nbsp;查看我们目前有 </span><span style="font-family:Calibri;">data1 &nbsp;data2 &nbsp;data3 &nbsp;</span><span style="font-family:'宋体';">我们要创建</span><span style="font-family:Calibri;">data5</span><span style="font-family:'宋体';">了</span></p>
  <p>6 &nbsp;geth init genesis.json --datadir data4 &nbsp;&nbsp;<span style="font-family:'宋体';">即可创建</span><span style="font-family:Calibri;">data4</span></p>
  <p>7 &nbsp;<span style="font-family:'宋体';">成功后第一行一般会有警告</span><span style="font-family:Calibri;">warn &nbsp;</span><span style="font-family:'宋体';">没有设置默认挖矿钱包地址</span></p>
  <p>8 &nbsp;<span style="font-family:'宋体';">我们打开</span><span style="font-family:Calibri;">data4 &nbsp;&nbsp;geth --networkid 123 --datadir data5 console</span></p>
  <p>9 &nbsp;<span style="font-family:'宋体';">查看余额 &nbsp;</span><span style="font-family:Calibri;">eth.getBalance(</span><span style="font-family:'宋体';">“</span><span style="font-family:Calibri;">627306090abab3a6e1400e9345bc60c78a8bef57</span><span style="font-family:'宋体';">”</span><span style="font-family:Calibri;">) </span><span style="font-family:'宋体';">出现的应该是</span><span style="font-family:Calibri;">300000</span></p>
  <p>10 miner.start() &nbsp;<span style="font-family:'宋体';">开始挖矿 会报错 因为没设置钱包地址</span></p>
  <p>11 miner.setEtherbase(<span style="font-family:'宋体';">“</span><span style="font-family:Calibri;">627306090abab3a6e1400e9345bc60c78a8bef57</span><span style="font-family:'宋体';">”</span><span style="font-family:Calibri;">) &nbsp;</span><span style="font-family:'宋体';">设置钱包地址 </span></p>
  <p>12 miner.start()</p>
  <p></p>
  <h4><span style="font-family:'黑体';">本菜鸟微信 guofly123&nbsp; 希望和区块链开发的各位多多交流</span></h4>
  <br>
  <p><br></p>
  <p><br></p>
  <p></p>
  <h5><span style="font-family:'宋体';">参考</span><span style="font-family:Calibri;">https://blog.csdn.net/ceciiiilia/article/details/71483221</span></h5>
  <div>
   <span style="font-family:Calibri;"></span>
   <h5><span style="font-family:'宋体';">参考</span>https://blog.csdn.net/ddffr/article/details/73733850</h5>
   <div>
    <h5 style="font-family:Calibri;"><span style="font-family:'宋体';">参考孔壹学院教学视频（已付费购买）</span></h5>
    <br>
   </div>
   <br>
  </div>
  <br> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/JAVA_HHHH/article/details/79701308,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/JAVA_HHHH/article/details/79701308,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
