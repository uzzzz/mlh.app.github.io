<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>eos源码赏析（一）：Ubuntu下eos代码编译 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="eos源码赏析（一）：Ubuntu下eos代码编译" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="网上已经有很多关于btc的源码分析了，由于eos主网上线还需时日，且网上关于eos的源码解析较少，斗胆尝试着做一个系列的文，学习eos的源码，也提升一下自己的阅读代码的能力和对新知识的了解能力。要阅读赏析源码首先运行起来，看看大概是个什么样子，这样心里有个底，也就踏实多了。本文为系列文的第一篇，Ubuntu下eos代码的编译，是依据官网文档的指导完成的。 官方文档链接：https://github.com/EOSIO/eos 根据官方文档提示，eos代码仅支持Ubuntu16.04版本或更高版本上进行编译（推荐使用Ubuntu16.10），本文在Ubuntu16.04上实现。在编译eos代码之前，我们首先要获取eos代码编译、运行所需要依赖的工具和库，具体获取方式可在终端中输入以下指令来实现： sudo apt-get update wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key sudo apt-get install clang-4.0 lldb-4.0 libclang-4.0-dev cmake make &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libssl-dev libgmp3-dev &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autotools-dev build-essential &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libicu-dev python-dev &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autoconf libtool git 其中 LLVM是构架编译器(compiler)的框架系统，以C++编写而成，用于优化以任意程序语言编写的程序的编译时间(compile-time)、链接时间(link-time)、运行时间(run-time)以及空闲时间(idle-time)，而Clang正是我们完成eos代码编译的编译器。Eos代码大量的依赖于boost库，因此我们需要获取boost库并进行编译、安装，同时将boost库的相关信息添加至环境变量，以上步骤可以通过以下指令来实现： cd&nbsp;~ wget -c&nbsp;&#39;https://sourceforge.net/projects/boost/files/boost/1.66.0/boost_1_66_0.tar.bz2/download&#39;&nbsp;-O boost_1.66.0.tar.bz2 tar xjf boost_1.66.0.tar.bz2 cd&nbsp;boost_1_66_0/ echo&nbsp;&quot;export BOOST_ROOT=$HOME/boost_1_66_0&quot;&nbsp;&gt;&gt;&nbsp;~/.bash_profile source&nbsp;~/.bash_profile ./bootstrap.sh&nbsp;&quot;--prefix=$BOOST_ROOT&quot; ./b2 install source&nbsp;~/.bash_profile 如果觉得下载慢的话，也可以自己去boost官网下载对应的版本（linux64位）然后按照上面的步骤进行解压、添加环境变量、编译、安装。 接下来我们需要获取并安装secp256k1-zkp，具体我们可以把它看做是一个加解密的库，具体获取、编译、安装可以通过以下方式实现： cd&nbsp;~ git clone https://github.com/cryptonomex/secp256k1-zkp.git cd&nbsp;secp256k1-zkp ./autogen.sh ./configure make sudo make install 同时，我们还需要WASM编译器，由于llvm和clang中并未对WASM进行配置，因此需要我们进行手动编译 mkdir &nbsp;~/wasm-compiler cd&nbsp;~/wasm-compiler git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/llvm.git cd&nbsp;llvm/tools git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/clang.git cd&nbsp;.. mkdir build cd&nbsp;build cmake -G&nbsp;&quot;Unix Makefiles&quot;&nbsp;-DCMAKE_INSTALL_PREFIX=.. -DLLVM_TARGETS_TO_BUILD= -DLLVM_EXPERIMENTAL_TARGETS_TO_BUILD=WebAssembly -DCMAKE_BUILD_TYPE=Release ../ make -j4 install 以上获取了eos代码编译所需要使用的工具以及依赖库，在保证以上步骤完成的基础上，我们就可以编译并运行一个eos节点了。在编译之前，我们首先要从git上下载eos的源码，由于eos代码分支较多，我们可以加上—recursive来获取完整的代码，如下指令： git clone https://github.com/eosio/eos --recursive 获取到代码之后，我们就可以对eos进行编译了 cd&nbsp;~ git clone https://github.com/eosio/eos --recursive mkdir -p&nbsp;~/eos/build&nbsp;&amp;&amp;&nbsp;cd&nbsp;~/eos/build cmake -DBINARYEN_BIN=~/binaryen/bin -DWASM_ROOT=~/wasm-compiler/llvm -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl -DOPENSSL_LIBRARIES=/usr/local/opt/openssl/lib .. make -j$(&nbsp;nproc ) 编译完成之后我们可以在路径~/eos/build/programs看到以下文件夹： &nbsp; &nbsp; &nbsp; &nbsp;eosiod里面是服务端的区块链组件相关文件。 &nbsp; &nbsp; &nbsp; &nbsp;eosioc里面是区块链的命令行接口相关文件 &nbsp; &nbsp; &nbsp; &nbsp;eosio-launcher里面是网络节点的应用相关文件。 &nbsp; &nbsp; &nbsp; &nbsp;eosiowd里面是eos钱包相关文件。 现在我们cd到eosiod路径下，可以执行eosiod，在执行的过程中可能会产生报错，如果没产生报错的话，可以用ctrl+c停止eosiod的运行，此时我们可以在eosiod文件夹下看到一个名为data-dir的文件夹，其中包含有eosiod的相关配置信息。打开config.ini把以下内容添加进去： # Load the testnet genesis state, which creates some initial block producers with the default key genesis-json = /path/to/eos/source/genesis.json &nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale enable-stale-production = true # Enable block production with the testnet producers producer-name = inita producer-name = initb producer-name = initc producer-name = initd producer-name = inite producer-name = initf producer-name = initg producer-name = inith producer-name = initi producer-name = initj producer-name = initk producer-name = initl producer-name = initm producer-name = initn producer-name = inito producer-name = initp producer-name = initq producer-name = initr producer-name = inits producer-name = initt producer-name = initu # Load the block producer plugin, so you can produce blocks plugin = eosio::producer_plugin # Wallet plugin plugin = eosio::wallet_api_plugin # As well as API and HTTP plugins plugin = eosio::chain_api_plugin plugin = eosio::http_plugin 再次运行./eosiod，然鹅，又一次出现了错误 原来提示我们genesis.json文件路径不对，那么我们可以用Locate genesis来查找我们本机中的genesis.json所在的路径，并将该路径添加至，eos的编译配置文件中去，如下图： &nbsp;再次运行eosiod，又出现了下图的报错： &nbsp;原来是提示我们配置文件中enable-stale-production使用了两次或者两次以上，我们再重新打开config.ini将其中一个enable-stale-production注释掉即可。 现在我们再运行一次./eosiod，终于，见证奇迹的时刻到了： 当你看到上图，说明你的第一个eos节点已经运行起来了，还真的是一波三折。 至此我们根据官方文档的指示，在ubuntu16.04环境下完成了eos编译环境的搭建、eos编译工具获取安装、eos代码依赖库获取安装、eos代码的编译及运行，其中以eosiod为例简单的描述了运行中产生的问题及解决方案，当然我们也可以打开config.ini查看eosiod相关的配置信息。 So Welcome to EOSIO! 下一篇将围绕eos的代码结构进行相关分析。 有关注eos代码开发的童鞋么可以关注下eosfans这个公众号一起探讨 阅读更多" />
<meta property="og:description" content="网上已经有很多关于btc的源码分析了，由于eos主网上线还需时日，且网上关于eos的源码解析较少，斗胆尝试着做一个系列的文，学习eos的源码，也提升一下自己的阅读代码的能力和对新知识的了解能力。要阅读赏析源码首先运行起来，看看大概是个什么样子，这样心里有个底，也就踏实多了。本文为系列文的第一篇，Ubuntu下eos代码的编译，是依据官网文档的指导完成的。 官方文档链接：https://github.com/EOSIO/eos 根据官方文档提示，eos代码仅支持Ubuntu16.04版本或更高版本上进行编译（推荐使用Ubuntu16.10），本文在Ubuntu16.04上实现。在编译eos代码之前，我们首先要获取eos代码编译、运行所需要依赖的工具和库，具体获取方式可在终端中输入以下指令来实现： sudo apt-get update wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key sudo apt-get install clang-4.0 lldb-4.0 libclang-4.0-dev cmake make &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libssl-dev libgmp3-dev &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autotools-dev build-essential &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libicu-dev python-dev &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autoconf libtool git 其中 LLVM是构架编译器(compiler)的框架系统，以C++编写而成，用于优化以任意程序语言编写的程序的编译时间(compile-time)、链接时间(link-time)、运行时间(run-time)以及空闲时间(idle-time)，而Clang正是我们完成eos代码编译的编译器。Eos代码大量的依赖于boost库，因此我们需要获取boost库并进行编译、安装，同时将boost库的相关信息添加至环境变量，以上步骤可以通过以下指令来实现： cd&nbsp;~ wget -c&nbsp;&#39;https://sourceforge.net/projects/boost/files/boost/1.66.0/boost_1_66_0.tar.bz2/download&#39;&nbsp;-O boost_1.66.0.tar.bz2 tar xjf boost_1.66.0.tar.bz2 cd&nbsp;boost_1_66_0/ echo&nbsp;&quot;export BOOST_ROOT=$HOME/boost_1_66_0&quot;&nbsp;&gt;&gt;&nbsp;~/.bash_profile source&nbsp;~/.bash_profile ./bootstrap.sh&nbsp;&quot;--prefix=$BOOST_ROOT&quot; ./b2 install source&nbsp;~/.bash_profile 如果觉得下载慢的话，也可以自己去boost官网下载对应的版本（linux64位）然后按照上面的步骤进行解压、添加环境变量、编译、安装。 接下来我们需要获取并安装secp256k1-zkp，具体我们可以把它看做是一个加解密的库，具体获取、编译、安装可以通过以下方式实现： cd&nbsp;~ git clone https://github.com/cryptonomex/secp256k1-zkp.git cd&nbsp;secp256k1-zkp ./autogen.sh ./configure make sudo make install 同时，我们还需要WASM编译器，由于llvm和clang中并未对WASM进行配置，因此需要我们进行手动编译 mkdir &nbsp;~/wasm-compiler cd&nbsp;~/wasm-compiler git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/llvm.git cd&nbsp;llvm/tools git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/clang.git cd&nbsp;.. mkdir build cd&nbsp;build cmake -G&nbsp;&quot;Unix Makefiles&quot;&nbsp;-DCMAKE_INSTALL_PREFIX=.. -DLLVM_TARGETS_TO_BUILD= -DLLVM_EXPERIMENTAL_TARGETS_TO_BUILD=WebAssembly -DCMAKE_BUILD_TYPE=Release ../ make -j4 install 以上获取了eos代码编译所需要使用的工具以及依赖库，在保证以上步骤完成的基础上，我们就可以编译并运行一个eos节点了。在编译之前，我们首先要从git上下载eos的源码，由于eos代码分支较多，我们可以加上—recursive来获取完整的代码，如下指令： git clone https://github.com/eosio/eos --recursive 获取到代码之后，我们就可以对eos进行编译了 cd&nbsp;~ git clone https://github.com/eosio/eos --recursive mkdir -p&nbsp;~/eos/build&nbsp;&amp;&amp;&nbsp;cd&nbsp;~/eos/build cmake -DBINARYEN_BIN=~/binaryen/bin -DWASM_ROOT=~/wasm-compiler/llvm -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl -DOPENSSL_LIBRARIES=/usr/local/opt/openssl/lib .. make -j$(&nbsp;nproc ) 编译完成之后我们可以在路径~/eos/build/programs看到以下文件夹： &nbsp; &nbsp; &nbsp; &nbsp;eosiod里面是服务端的区块链组件相关文件。 &nbsp; &nbsp; &nbsp; &nbsp;eosioc里面是区块链的命令行接口相关文件 &nbsp; &nbsp; &nbsp; &nbsp;eosio-launcher里面是网络节点的应用相关文件。 &nbsp; &nbsp; &nbsp; &nbsp;eosiowd里面是eos钱包相关文件。 现在我们cd到eosiod路径下，可以执行eosiod，在执行的过程中可能会产生报错，如果没产生报错的话，可以用ctrl+c停止eosiod的运行，此时我们可以在eosiod文件夹下看到一个名为data-dir的文件夹，其中包含有eosiod的相关配置信息。打开config.ini把以下内容添加进去： # Load the testnet genesis state, which creates some initial block producers with the default key genesis-json = /path/to/eos/source/genesis.json &nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale enable-stale-production = true # Enable block production with the testnet producers producer-name = inita producer-name = initb producer-name = initc producer-name = initd producer-name = inite producer-name = initf producer-name = initg producer-name = inith producer-name = initi producer-name = initj producer-name = initk producer-name = initl producer-name = initm producer-name = initn producer-name = inito producer-name = initp producer-name = initq producer-name = initr producer-name = inits producer-name = initt producer-name = initu # Load the block producer plugin, so you can produce blocks plugin = eosio::producer_plugin # Wallet plugin plugin = eosio::wallet_api_plugin # As well as API and HTTP plugins plugin = eosio::chain_api_plugin plugin = eosio::http_plugin 再次运行./eosiod，然鹅，又一次出现了错误 原来提示我们genesis.json文件路径不对，那么我们可以用Locate genesis来查找我们本机中的genesis.json所在的路径，并将该路径添加至，eos的编译配置文件中去，如下图： &nbsp;再次运行eosiod，又出现了下图的报错： &nbsp;原来是提示我们配置文件中enable-stale-production使用了两次或者两次以上，我们再重新打开config.ini将其中一个enable-stale-production注释掉即可。 现在我们再运行一次./eosiod，终于，见证奇迹的时刻到了： 当你看到上图，说明你的第一个eos节点已经运行起来了，还真的是一波三折。 至此我们根据官方文档的指示，在ubuntu16.04环境下完成了eos编译环境的搭建、eos编译工具获取安装、eos代码依赖库获取安装、eos代码的编译及运行，其中以eosiod为例简单的描述了运行中产生的问题及解决方案，当然我们也可以打开config.ini查看eosiod相关的配置信息。 So Welcome to EOSIO! 下一篇将围绕eos的代码结构进行相关分析。 有关注eos代码开发的童鞋么可以关注下eosfans这个公众号一起探讨 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/03/26/a7031bc3f71515d7150c0adee8a7c36b.html" />
<meta property="og:url" content="https://mlh.app/2018/03/26/a7031bc3f71515d7150c0adee8a7c36b.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-26T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"网上已经有很多关于btc的源码分析了，由于eos主网上线还需时日，且网上关于eos的源码解析较少，斗胆尝试着做一个系列的文，学习eos的源码，也提升一下自己的阅读代码的能力和对新知识的了解能力。要阅读赏析源码首先运行起来，看看大概是个什么样子，这样心里有个底，也就踏实多了。本文为系列文的第一篇，Ubuntu下eos代码的编译，是依据官网文档的指导完成的。 官方文档链接：https://github.com/EOSIO/eos 根据官方文档提示，eos代码仅支持Ubuntu16.04版本或更高版本上进行编译（推荐使用Ubuntu16.10），本文在Ubuntu16.04上实现。在编译eos代码之前，我们首先要获取eos代码编译、运行所需要依赖的工具和库，具体获取方式可在终端中输入以下指令来实现： sudo apt-get update wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key sudo apt-get install clang-4.0 lldb-4.0 libclang-4.0-dev cmake make &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libssl-dev libgmp3-dev &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autotools-dev build-essential &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libicu-dev python-dev &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autoconf libtool git 其中 LLVM是构架编译器(compiler)的框架系统，以C++编写而成，用于优化以任意程序语言编写的程序的编译时间(compile-time)、链接时间(link-time)、运行时间(run-time)以及空闲时间(idle-time)，而Clang正是我们完成eos代码编译的编译器。Eos代码大量的依赖于boost库，因此我们需要获取boost库并进行编译、安装，同时将boost库的相关信息添加至环境变量，以上步骤可以通过以下指令来实现： cd&nbsp;~ wget -c&nbsp;&#39;https://sourceforge.net/projects/boost/files/boost/1.66.0/boost_1_66_0.tar.bz2/download&#39;&nbsp;-O boost_1.66.0.tar.bz2 tar xjf boost_1.66.0.tar.bz2 cd&nbsp;boost_1_66_0/ echo&nbsp;&quot;export BOOST_ROOT=$HOME/boost_1_66_0&quot;&nbsp;&gt;&gt;&nbsp;~/.bash_profile source&nbsp;~/.bash_profile ./bootstrap.sh&nbsp;&quot;--prefix=$BOOST_ROOT&quot; ./b2 install source&nbsp;~/.bash_profile 如果觉得下载慢的话，也可以自己去boost官网下载对应的版本（linux64位）然后按照上面的步骤进行解压、添加环境变量、编译、安装。 接下来我们需要获取并安装secp256k1-zkp，具体我们可以把它看做是一个加解密的库，具体获取、编译、安装可以通过以下方式实现： cd&nbsp;~ git clone https://github.com/cryptonomex/secp256k1-zkp.git cd&nbsp;secp256k1-zkp ./autogen.sh ./configure make sudo make install 同时，我们还需要WASM编译器，由于llvm和clang中并未对WASM进行配置，因此需要我们进行手动编译 mkdir &nbsp;~/wasm-compiler cd&nbsp;~/wasm-compiler git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/llvm.git cd&nbsp;llvm/tools git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/clang.git cd&nbsp;.. mkdir build cd&nbsp;build cmake -G&nbsp;&quot;Unix Makefiles&quot;&nbsp;-DCMAKE_INSTALL_PREFIX=.. -DLLVM_TARGETS_TO_BUILD= -DLLVM_EXPERIMENTAL_TARGETS_TO_BUILD=WebAssembly -DCMAKE_BUILD_TYPE=Release ../ make -j4 install 以上获取了eos代码编译所需要使用的工具以及依赖库，在保证以上步骤完成的基础上，我们就可以编译并运行一个eos节点了。在编译之前，我们首先要从git上下载eos的源码，由于eos代码分支较多，我们可以加上—recursive来获取完整的代码，如下指令： git clone https://github.com/eosio/eos --recursive 获取到代码之后，我们就可以对eos进行编译了 cd&nbsp;~ git clone https://github.com/eosio/eos --recursive mkdir -p&nbsp;~/eos/build&nbsp;&amp;&amp;&nbsp;cd&nbsp;~/eos/build cmake -DBINARYEN_BIN=~/binaryen/bin -DWASM_ROOT=~/wasm-compiler/llvm -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl -DOPENSSL_LIBRARIES=/usr/local/opt/openssl/lib .. make -j$(&nbsp;nproc ) 编译完成之后我们可以在路径~/eos/build/programs看到以下文件夹： &nbsp; &nbsp; &nbsp; &nbsp;eosiod里面是服务端的区块链组件相关文件。 &nbsp; &nbsp; &nbsp; &nbsp;eosioc里面是区块链的命令行接口相关文件 &nbsp; &nbsp; &nbsp; &nbsp;eosio-launcher里面是网络节点的应用相关文件。 &nbsp; &nbsp; &nbsp; &nbsp;eosiowd里面是eos钱包相关文件。 现在我们cd到eosiod路径下，可以执行eosiod，在执行的过程中可能会产生报错，如果没产生报错的话，可以用ctrl+c停止eosiod的运行，此时我们可以在eosiod文件夹下看到一个名为data-dir的文件夹，其中包含有eosiod的相关配置信息。打开config.ini把以下内容添加进去： # Load the testnet genesis state, which creates some initial block producers with the default key genesis-json = /path/to/eos/source/genesis.json &nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale enable-stale-production = true # Enable block production with the testnet producers producer-name = inita producer-name = initb producer-name = initc producer-name = initd producer-name = inite producer-name = initf producer-name = initg producer-name = inith producer-name = initi producer-name = initj producer-name = initk producer-name = initl producer-name = initm producer-name = initn producer-name = inito producer-name = initp producer-name = initq producer-name = initr producer-name = inits producer-name = initt producer-name = initu # Load the block producer plugin, so you can produce blocks plugin = eosio::producer_plugin # Wallet plugin plugin = eosio::wallet_api_plugin # As well as API and HTTP plugins plugin = eosio::chain_api_plugin plugin = eosio::http_plugin 再次运行./eosiod，然鹅，又一次出现了错误 原来提示我们genesis.json文件路径不对，那么我们可以用Locate genesis来查找我们本机中的genesis.json所在的路径，并将该路径添加至，eos的编译配置文件中去，如下图： &nbsp;再次运行eosiod，又出现了下图的报错： &nbsp;原来是提示我们配置文件中enable-stale-production使用了两次或者两次以上，我们再重新打开config.ini将其中一个enable-stale-production注释掉即可。 现在我们再运行一次./eosiod，终于，见证奇迹的时刻到了： 当你看到上图，说明你的第一个eos节点已经运行起来了，还真的是一波三折。 至此我们根据官方文档的指示，在ubuntu16.04环境下完成了eos编译环境的搭建、eos编译工具获取安装、eos代码依赖库获取安装、eos代码的编译及运行，其中以eosiod为例简单的描述了运行中产生的问题及解决方案，当然我们也可以打开config.ini查看eosiod相关的配置信息。 So Welcome to EOSIO! 下一篇将围绕eos的代码结构进行相关分析。 有关注eos代码开发的童鞋么可以关注下eosfans这个公众号一起探讨 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/03/26/a7031bc3f71515d7150c0adee8a7c36b.html","headline":"eos源码赏析（一）：Ubuntu下eos代码编译","dateModified":"2018-03-26T00:00:00+08:00","datePublished":"2018-03-26T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/03/26/a7031bc3f71515d7150c0adee8a7c36b.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>eos源码赏析（一）：Ubuntu下eos代码编译</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/X997N1LWNAUV1SbHkfqFfvDcvmUdOX0UnueEf7vTQ4LfypynPDeFu6hicicMCySXH86u9QC7ddyethTibhzKnRKRQ/640?wx_fmt=jpeg" style="color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;text-align:center;" alt=""></p>
  <p></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;line-height:1.75em;">网上已经有很多关于btc的源码分析了，由于eos主网上线还需时日，且网上关于eos的源码解析较少，斗胆尝试着做一个系列的文，学习eos的源码，也提升一下自己的阅读代码的能力和对新知识的了解能力。要阅读赏析源码首先运行起来，看看大概是个什么样子，这样心里有个底，也就踏实多了。本文为系列文的第一篇，Ubuntu下eos代码的编译，是依据官网文档的指导完成的。</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">官方文档链接：https://github.com/EOSIO/eos</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">根据官方文档提示，eos代码仅支持Ubuntu16.04版本或更高版本上进行编译（推荐使用Ubuntu16.10），本文在Ubuntu16.04上实现。在编译eos代码之前，我们首先要获取eos代码编译、运行所需要依赖的工具和库，具体获取方式可在终端中输入以下指令来实现：</p>
  <blockquote style="border-left:3px solid rgb(219,219,219);color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">sudo apt-get update</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">sudo apt-get install clang-4.0 lldb-4.0 libclang-4.0-dev cmake make</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libssl-dev libgmp3-dev</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autotools-dev build-essential</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libbz2-dev libicu-dev python-dev</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autoconf libtool git</span></p>
  </blockquote>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">其中 LLVM是构架编译器(compiler)的框架系统，以C++编写而成，用于优化以任意程序语言编写的程序的编译时间(compile-time)、链接时间(link-time)、运行时间(run-time)以及空闲时间(idle-time)，而Clang正是我们完成eos代码编译的编译器。Eos代码大量的依赖于boost库，因此我们需要获取boost库并进行编译、安装，同时将boost库的相关信息添加至环境变量，以上步骤可以通过以下指令来实现：</p>
  <blockquote style="border-left:3px solid rgb(219,219,219);color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">wget -c&nbsp;</span><span style="font-family:Consolas;color:rgb(3,47,98);font-size:13px;">'https://sourceforge.net/projects/boost/files/boost/1.66.0/boost_1_66_0.tar.bz2/download'</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;-O boost_1.66.0.tar.bz2</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">tar xjf boost_1.66.0.tar.bz2</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;boost_1_66_0/</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">echo</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(3,47,98);font-size:13px;">"export BOOST_ROOT=</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">$HOME</span><span style="font-family:Consolas;color:rgb(3,47,98);font-size:13px;">/boost_1_66_0"</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">&gt;&gt;</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/.bash_profile</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">source</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/.bash_profile</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">./bootstrap.sh&nbsp;</span><span style="font-family:Consolas;color:rgb(3,47,98);font-size:13px;">"--prefix=</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">$BOOST_ROOT</span><span style="font-family:Consolas;color:rgb(3,47,98);font-size:13px;">"</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">./b2 install</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">source</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/.bash_profile</span></p>
  </blockquote>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">如果觉得下载慢的话，也可以自己去boost官网下载对应的版本（linux64位）然后按照上面的步骤进行解压、添加环境变量、编译、安装。</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">接下来我们需要获取并安装secp256k1-zkp，具体我们可以把它看做是一个加解密的库，具体获取、编译、安装可以通过以下方式实现：</p>
  <blockquote style="border-left:3px solid rgb(219,219,219);color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">git clone https://github.com/cryptonomex/secp256k1-zkp.git</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;secp256k1-zkp</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">./autogen.sh</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">./configure</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">make</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">sudo make install</span></p>
  </blockquote>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);">同时，我们还需要WASM编译器，由于llvm和clang中并未对WASM进行配置，因此需要我们进行手动编译</p>
  <blockquote style="border-left:3px solid rgb(219,219,219);color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">mkdir &nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/wasm-compiler</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/wasm-compiler</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/llvm.git</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;llvm/tools</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">git clone --depth 1 --single-branch --branch release_40 https://github.com/llvm-mirror/clang.git</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;..</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">mkdir build</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;build</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">cmake -G&nbsp;</span><span style="font-family:Consolas;color:rgb(3,47,98);font-size:13px;">"Unix Makefiles"</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;-DCMAKE_INSTALL_PREFIX=.. -DLLVM_TARGETS_TO_BUILD= -DLLVM_EXPERIMENTAL_TARGETS_TO_BUILD=WebAssembly -DCMAKE_BUILD_TYPE=Release ../</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">make -j4 install</span></p>
  </blockquote>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">以上获取了eos代码编译所需要使用的工具以及依赖库，在保证以上步骤完成的基础上，我们就可以编译并运行一个eos节点了。在编译之前，我们首先要从git上下载eos的源码，由于eos代码分支较多，我们可以加上<span style="color:rgb(255,0,0);">—recursive来获取完整的代码</span>，如下指令：</p>
  <blockquote style="border-left:3px solid rgb(219,219,219);color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">git clone https://github.com/eosio/eos --recursive</span></p>
  </blockquote>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);">获取到代码之后，我们就可以对eos进行编译了</p>
  <blockquote style="border-left:3px solid rgb(219,219,219);color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">git clone https://github.com/eosio/eos --recursive</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">mkdir -p&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/eos/build&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">&amp;&amp;</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(0,92,197);font-size:13px;">cd</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/eos/build</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">cmake -DBINARYEN_BIN=</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/binaryen/bin -DWASM_ROOT=</span><span style="font-family:Consolas;color:rgb(215,58,73);font-size:13px;">~</span><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">/wasm-compiler/llvm -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl -DOPENSSL_LIBRARIES=/usr/local/opt/openssl/lib ..</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">make -j</span><span style="font-family:Consolas;color:rgb(3,47,98);font-size:13px;">$(&nbsp;nproc )</span></p>
  </blockquote>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">编译完成之后我们可以在路径~/eos/build/programs看到以下文件夹：</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/2018033110341235" alt=""><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);">&nbsp; &nbsp; &nbsp; &nbsp;eosiod里面是服务端的区块链组件相关文件。</span></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);">&nbsp; &nbsp; &nbsp; &nbsp;eosioc里面是区块链的命令行接口相关文件</span></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);">&nbsp; &nbsp; &nbsp; &nbsp;eosio-launcher里面是网络节点的应用相关文件。</span></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);">&nbsp; &nbsp; &nbsp; &nbsp;eosiowd里面是eos钱包相关文件</span>。</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">现在我们cd到eosiod路径下，可以执行eosiod，在执行的过程中可能会产生报错，如果没产生报错的话，可以用ctrl+c停止eosiod的运行，此时我们可以在eosiod文件夹下看到一个名为data-dir的文件夹，其中包含有eosiod的相关配置信息。打开config.ini把以下内容添加进去：</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);"><br></p>
  <blockquote style="border-left:3px solid rgb(219,219,219);color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;"># Load the testnet genesis state, which creates some initial block producers with the default key</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">genesis-json = /path/to/eos/source/genesis.json</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">&nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">enable-stale-production = true</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;"># Enable block production with the testnet producers</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = inita</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initb</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initc</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initd</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = inite</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initf</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initg</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = inith</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initi</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initj</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initk</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initl</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initm</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initn</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = inito</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initp</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initq</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initr</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = inits</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initt</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">producer-name = initu</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;"># Load the block producer plugin, so you can produce blocks</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">plugin = eosio::producer_plugin</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;"># Wallet plugin</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">plugin = eosio::wallet_api_plugin</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;"># As well as API and HTTP plugins</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">plugin = eosio::chain_api_plugin</span></p>
   <p style="clear:both;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;">plugin = eosio::http_plugin</span></p>
  </blockquote>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);"><span style="color:rgb(36,41,46);font-size:13px;font-family:'宋体';"></span>再次运行./eosiod，然鹅，又一次出现了错误</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180331103423194" alt=""><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">原来提示我们genesis.json文件路径不对，那么我们可以用Locate genesis来查找我们本机中的genesis.json所在的路径，并将该路径添加至，eos的编译配置文件中去，如下图：</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><img src="https://mmbiz.qpic.cn/mmbiz_jpg/X997N1LWNAUV1SbHkfqFfvDcvmUdOX0UJnQTR5lcfHicmFB0vDMKo84jPOekJDHZxGrj1oywhRc7SeSBtYLUj3w/640?wx_fmt=jpeg" alt=""></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);">&nbsp;再次运行eosiod，又出现了下图的报错：</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180331103432867" alt=""><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);"><span style="font-family:Consolas;color:rgb(36,41,46);font-size:13px;"></span></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">&nbsp;原来是提示我们配置文件中enable-stale-production使用了两次或者两次以上，我们再重新打开config.ini<span style="color:rgb(255,0,0);">将其中一个enable-stale-production注释掉即可</span>。</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">现在我们再运行一次./eosiod，终于，见证奇迹的时刻到了：</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180331103449982" alt=""><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);">当你看到上图，说明你的第一个eos节点已经运行起来了，还真的是一波三折。</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);"><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;">至此我们根据官方文档的指示，在ubuntu16.04环境下完成了eos编译环境的搭建、eos编译工具获取安装、eos代码依赖库获取安装、eos代码的编译及运行，其中以eosiod为例简单的描述了运行中产生的问题及解决方案，当然我们也可以打开config.ini查看eosiod相关的配置信息。</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);"><br></span></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;"><span style="color:rgb(255,0,0);">So Welcome to EOSIO!</span></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);"><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);">下一篇将围绕eos的代码结构进行相关分析。</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);"><br></p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);">有关注eos代码开发的童鞋么可以关注下eosfans这个公众号一起探讨</p>
  <p style="clear:both;color:rgb(0,0,0);font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;font-size:14px;background:rgb(246,248,250);"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180326204009967" alt=""><br></p>
  <div>
   <br>
  </div>
  <br> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zhuxiangzhidi/article/details/79703648,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zhuxiangzhidi/article/details/79703648,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
