<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>【问链-Eos公开课】第5课 组建单机多节点EOS网络 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="【问链-Eos公开课】第5课 组建单机多节点EOS网络" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1.配置nodeos节点的初始集 我们将启动许多nodeos，nodeos，将它们指向彼此，并最终对一组生产者进行投票。所有的nodeos节点都将在同一个服务器上运行。在接下来的章节中，我们将采取各种步骤来准备我们的候选生产者。producer1、producer2作为出块节点，user1、user2作为普通节点。 2.为每个nodeos创建配置和数据目录 因为所有的nodeos节点都将在同一个服务器上运行，所以我们需要单独的配置和数据目录。下面的例子为每个noedos节点创建~/eosio_test目录。使用任何最适合你的方法来创建多个账户，记住，账户名称的命名限制必须是12个字符，从a-z和1-5的集合。这里我们目录为： producer1、producer2。 3.为点对点通信准备IP地址 确定每个nodeos节点之间的点对点通信的IP地址和端口号（稍后您将在实际启动生产者节点时使用它）。每个nodeos都可以通过设置p2p-peer-address地址配置属性来配置，也可以在命令行启动nodeos时（每个对等点有一个参数），或者在配置中设置nodeos的config.ini文件（每个节点一行）属性。 producer1： bnet-endpoint = 0.0.0.0:4321 bnet-no-trx = false blocks-dir = &quot;blocks&quot; chain-state-db-size-mb = 1024 reversible-blocks-db-size-mb = 340 contracts-console = false https-client-validate-peers = 1 http-server-address = 127.0.0.1:8011 access-control-allow-origin = * access-control-allow-credentials = false p2p-listen-endpoint = 127.0.0.1:9011 p2p-peer-address = localhost:9022 p2p-max-nodes-per-host = 1 agent-name = &quot;producer1-node&quot; allowed-connection = any max-clients = 20 connection-cleanup-period = 30 network-version-match = 1 sync-fetch-span = 1000 max-implicit-request = 1500 enable-stale-production = true pause-on-startup = false max-transaction-time = 10000 max-irreversible-block-age = -1 producer-name = producer1 signature-provider = EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r=KEY:5JgGMrqeaczH6UoqWGZL2EPZ8fsJEnuifGnDSK7hpcKGXRsMvQJ keosd-provider-timeout = 5 txn-reference-block-lag = 0 wallet-dir = &quot;.&quot; unlock-timeout = 6000 filter-on = * abi-serializer-max-time-ms=45 plugin = eosio::producer_plugin plugin = eosio::wallet_api_plugin plugin = eosio::wallet_plugin plugin = eosio::chain_api_plugin plugin = eosio::http_plugin plugin = eosio::history_api_plugin producer2： bnet-endpoint = 0.0.0.0:4321 bnet-no-trx = false blocks-dir = &quot;blocks&quot; chain-state-db-size-mb = 1024 reversible-blocks-db-size-mb = 340 contracts-console = false https-client-validate-peers = 1 http-server-address = 127.0.0.1:8022 access-control-allow-origin = * access-control-allow-credentials = false p2p-listen-endpoint = 127.0.0.1:9022 p2p-peer-address = localhost:9011 p2p-max-nodes-per-host = 1 agent-name = &quot;producer2-node&quot; allowed-connection = any max-clients = 20 connection-cleanup-period = 30 network-version-match = 1 sync-fetch-span = 1000 max-implicit-request = 1500 enable-stale-production = true pause-on-startup = false max-transaction-time = 10000 max-irreversible-block-age = -1 producer-name = producer2 signature-provider = EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc=KEY:5Jwq3ve4jGG3uihCj3oLt7bB3NpmgN4WpLyrgvPua9vkJYJzpCp keosd-provider-timeout = 5 txn-reference-block-lag = 0 wallet-dir = &quot;.&quot; unlock-timeout = 6000 filter-on = * abi-serializer-max-time-ms=45 plugin = eosio::producer_plugin plugin = eosio::wallet_api_plugin plugin = eosio::wallet_plugin plugin = eosio::chain_api_plugin plugin = eosio::http_plugin plugin = eosio::history_api_plugin 4.启动“创世纪”节点 创世”节点是我们开始的第一个节点，它将产生区块链网络。所有其他节点都将从创世纪节点中派生出来。在创世纪节点上做以下操作： （以后台进程的方式启动，避免关掉终端进程关闭） nohup nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin &amp; 5.创建钱包 创建一个钱包。在默认情况下，keosd会自动开始管理钱包。 $ cleos wallet create 一定要保存钱包密码，以便将来解锁钱包。 在本教程中，无论哪个节点被访问，相同的钱包都将被用于所有帐户的所有关键管理。在分布式部署中，钱包管理应该是本地的活动。 6.创建重要的系统账户 有几个系统帐户是必需的。这些都是: eosio.bpay eosio.msig eosio.names eosio.ram eosio.ramfee eosio.saving eosio.stake eosio.token eosio.vpay 重复以下步骤，为每个系统账户创建一个账户。在本教程中，我们将为帐户所有者和活动键使用相同的密匙对，因此我们只需要在命令行上提供一次密钥对值。对于大多数一般的帐户，对于所有者和活动使用单独的密钥是一种很好的做法。该脚本对所有的eosio.* 账户都使用相同的密钥。您可以为每个账户使用不同的密钥。 $ cleos create key # for eosio.bpay Private key: 5Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy Public key: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR $ cleos wallet import 5Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy imported private key for: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR 创建各种系统账户： cleos create account eosio eosio.bpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.msig EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.names EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.ram EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.ramfee EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.saving EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.stake EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.token EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.vpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.system EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR 7.安装eosio.token智能合约 安装eosio.token的合约。这个合约使您能够创建、发行、交易和获取代币。 cleos set contract eosio.token ../../contracts/eosio.token 8.创建系统货币，其最大值为10亿个token。然后发行10亿个代币。用你的特定货币名称替换SYS符号。 cleos push action eosio.token create &#39;[ &quot;eosio&quot;, &quot;1000000000.0000 SYS&quot; ]&#39; -p eosio.token cleos push action eosio.token issue &#39;[ &quot;eosio&quot;, &quot;1000000000.0000 SYS&quot;, &quot;memo&quot; ]&#39; -p eosio 9.安装eosio.msig智能合约 msig合约支持和简化定义和管理权限级别和执行多签名操作。 cleos set contract eosio.msig ../../contracts/eosio.msig 10.安装eosio.system智能合约 该合约提供了几乎所有基于代币的操作行为的操作。在安装系统合约之前，操作是独立于账户的。一旦系统合约被启用，操作现在就有了一个经济元素。资源（cpu、网络、内存）必须付费。同样，新账户必须支付费用。 cleos set contract eosio ../../contracts/eosio.system 11.从单一生产者转变为多个生产者 使eosio.msig成为特权帐户（最后一步执行eosio.system合约，否则会被覆盖，eosio.system 必须用eosio来部署） cleos push action eosio setpriv &#39;[&quot;eosio.msig&quot;, 1]&#39; -p eosio@active 11.创建投票账户 创建出块节点并分配代币： cleos system newaccount eosio --transfer producer1 EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r --stake-net &quot;100.0000 SYS&quot; --stake-cpu &quot;100000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; cleos system newaccount eosio --transfer producer2 EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc --stake-net &quot;100.0000 SYS&quot; --stake-cpu &quot;100000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; 创建非出块节点并分配代币： cleos system newaccount eosio --transfer user1 EOS5SWHoG1mgy74uyXQTVuGnaT4gG4JfsCiWxQoY9veiQ4V2sQ753 --stake-net &quot;37500000.0000 SYS&quot; --stake-cpu &quot;37500000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; cleos system newaccount eosio --transfer user2 EOS5bBuPnSmxyU178D8fvYNxfUv8yGqf6UM81NeJBvtKASEusVPzD --stake-net &quot;37500000.0000 SYS&quot; --stake-cpu &quot;37500000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; 12.登记为出块节点 登记为生产节点： cleos system regproducer producer1 EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r https://producer1.com/EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r cleos system regproducer producer2 EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc https://producer2.com/EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc 为便于投票过程，列出可供选择的生产者。 cleos system listproducers 13.进行投票 只有15％的可用选票被投票后才开始出块。 cleos system voteproducer prods user1 producer1 cleos system voteproducer prods user2 producer2 14.启动生产者 在每个生产者的单独窗口中，运行以下nodeos命令，调整命令行参数为每个生产者。 先清除一下缓存 rm -rf /root/.local/share/eosio/nodeos/data/ 启动生产者 nodeos --config-dir ~/eosio_test/producer1 nodeos --config-dir ~/eosio_test/producer2 看到开始出块，整个过程完毕 阅读更多" />
<meta property="og:description" content="1.配置nodeos节点的初始集 我们将启动许多nodeos，nodeos，将它们指向彼此，并最终对一组生产者进行投票。所有的nodeos节点都将在同一个服务器上运行。在接下来的章节中，我们将采取各种步骤来准备我们的候选生产者。producer1、producer2作为出块节点，user1、user2作为普通节点。 2.为每个nodeos创建配置和数据目录 因为所有的nodeos节点都将在同一个服务器上运行，所以我们需要单独的配置和数据目录。下面的例子为每个noedos节点创建~/eosio_test目录。使用任何最适合你的方法来创建多个账户，记住，账户名称的命名限制必须是12个字符，从a-z和1-5的集合。这里我们目录为： producer1、producer2。 3.为点对点通信准备IP地址 确定每个nodeos节点之间的点对点通信的IP地址和端口号（稍后您将在实际启动生产者节点时使用它）。每个nodeos都可以通过设置p2p-peer-address地址配置属性来配置，也可以在命令行启动nodeos时（每个对等点有一个参数），或者在配置中设置nodeos的config.ini文件（每个节点一行）属性。 producer1： bnet-endpoint = 0.0.0.0:4321 bnet-no-trx = false blocks-dir = &quot;blocks&quot; chain-state-db-size-mb = 1024 reversible-blocks-db-size-mb = 340 contracts-console = false https-client-validate-peers = 1 http-server-address = 127.0.0.1:8011 access-control-allow-origin = * access-control-allow-credentials = false p2p-listen-endpoint = 127.0.0.1:9011 p2p-peer-address = localhost:9022 p2p-max-nodes-per-host = 1 agent-name = &quot;producer1-node&quot; allowed-connection = any max-clients = 20 connection-cleanup-period = 30 network-version-match = 1 sync-fetch-span = 1000 max-implicit-request = 1500 enable-stale-production = true pause-on-startup = false max-transaction-time = 10000 max-irreversible-block-age = -1 producer-name = producer1 signature-provider = EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r=KEY:5JgGMrqeaczH6UoqWGZL2EPZ8fsJEnuifGnDSK7hpcKGXRsMvQJ keosd-provider-timeout = 5 txn-reference-block-lag = 0 wallet-dir = &quot;.&quot; unlock-timeout = 6000 filter-on = * abi-serializer-max-time-ms=45 plugin = eosio::producer_plugin plugin = eosio::wallet_api_plugin plugin = eosio::wallet_plugin plugin = eosio::chain_api_plugin plugin = eosio::http_plugin plugin = eosio::history_api_plugin producer2： bnet-endpoint = 0.0.0.0:4321 bnet-no-trx = false blocks-dir = &quot;blocks&quot; chain-state-db-size-mb = 1024 reversible-blocks-db-size-mb = 340 contracts-console = false https-client-validate-peers = 1 http-server-address = 127.0.0.1:8022 access-control-allow-origin = * access-control-allow-credentials = false p2p-listen-endpoint = 127.0.0.1:9022 p2p-peer-address = localhost:9011 p2p-max-nodes-per-host = 1 agent-name = &quot;producer2-node&quot; allowed-connection = any max-clients = 20 connection-cleanup-period = 30 network-version-match = 1 sync-fetch-span = 1000 max-implicit-request = 1500 enable-stale-production = true pause-on-startup = false max-transaction-time = 10000 max-irreversible-block-age = -1 producer-name = producer2 signature-provider = EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc=KEY:5Jwq3ve4jGG3uihCj3oLt7bB3NpmgN4WpLyrgvPua9vkJYJzpCp keosd-provider-timeout = 5 txn-reference-block-lag = 0 wallet-dir = &quot;.&quot; unlock-timeout = 6000 filter-on = * abi-serializer-max-time-ms=45 plugin = eosio::producer_plugin plugin = eosio::wallet_api_plugin plugin = eosio::wallet_plugin plugin = eosio::chain_api_plugin plugin = eosio::http_plugin plugin = eosio::history_api_plugin 4.启动“创世纪”节点 创世”节点是我们开始的第一个节点，它将产生区块链网络。所有其他节点都将从创世纪节点中派生出来。在创世纪节点上做以下操作： （以后台进程的方式启动，避免关掉终端进程关闭） nohup nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin &amp; 5.创建钱包 创建一个钱包。在默认情况下，keosd会自动开始管理钱包。 $ cleos wallet create 一定要保存钱包密码，以便将来解锁钱包。 在本教程中，无论哪个节点被访问，相同的钱包都将被用于所有帐户的所有关键管理。在分布式部署中，钱包管理应该是本地的活动。 6.创建重要的系统账户 有几个系统帐户是必需的。这些都是: eosio.bpay eosio.msig eosio.names eosio.ram eosio.ramfee eosio.saving eosio.stake eosio.token eosio.vpay 重复以下步骤，为每个系统账户创建一个账户。在本教程中，我们将为帐户所有者和活动键使用相同的密匙对，因此我们只需要在命令行上提供一次密钥对值。对于大多数一般的帐户，对于所有者和活动使用单独的密钥是一种很好的做法。该脚本对所有的eosio.* 账户都使用相同的密钥。您可以为每个账户使用不同的密钥。 $ cleos create key # for eosio.bpay Private key: 5Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy Public key: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR $ cleos wallet import 5Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy imported private key for: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR 创建各种系统账户： cleos create account eosio eosio.bpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.msig EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.names EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.ram EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.ramfee EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.saving EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.stake EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.token EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.vpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.system EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR 7.安装eosio.token智能合约 安装eosio.token的合约。这个合约使您能够创建、发行、交易和获取代币。 cleos set contract eosio.token ../../contracts/eosio.token 8.创建系统货币，其最大值为10亿个token。然后发行10亿个代币。用你的特定货币名称替换SYS符号。 cleos push action eosio.token create &#39;[ &quot;eosio&quot;, &quot;1000000000.0000 SYS&quot; ]&#39; -p eosio.token cleos push action eosio.token issue &#39;[ &quot;eosio&quot;, &quot;1000000000.0000 SYS&quot;, &quot;memo&quot; ]&#39; -p eosio 9.安装eosio.msig智能合约 msig合约支持和简化定义和管理权限级别和执行多签名操作。 cleos set contract eosio.msig ../../contracts/eosio.msig 10.安装eosio.system智能合约 该合约提供了几乎所有基于代币的操作行为的操作。在安装系统合约之前，操作是独立于账户的。一旦系统合约被启用，操作现在就有了一个经济元素。资源（cpu、网络、内存）必须付费。同样，新账户必须支付费用。 cleos set contract eosio ../../contracts/eosio.system 11.从单一生产者转变为多个生产者 使eosio.msig成为特权帐户（最后一步执行eosio.system合约，否则会被覆盖，eosio.system 必须用eosio来部署） cleos push action eosio setpriv &#39;[&quot;eosio.msig&quot;, 1]&#39; -p eosio@active 11.创建投票账户 创建出块节点并分配代币： cleos system newaccount eosio --transfer producer1 EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r --stake-net &quot;100.0000 SYS&quot; --stake-cpu &quot;100000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; cleos system newaccount eosio --transfer producer2 EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc --stake-net &quot;100.0000 SYS&quot; --stake-cpu &quot;100000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; 创建非出块节点并分配代币： cleos system newaccount eosio --transfer user1 EOS5SWHoG1mgy74uyXQTVuGnaT4gG4JfsCiWxQoY9veiQ4V2sQ753 --stake-net &quot;37500000.0000 SYS&quot; --stake-cpu &quot;37500000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; cleos system newaccount eosio --transfer user2 EOS5bBuPnSmxyU178D8fvYNxfUv8yGqf6UM81NeJBvtKASEusVPzD --stake-net &quot;37500000.0000 SYS&quot; --stake-cpu &quot;37500000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; 12.登记为出块节点 登记为生产节点： cleos system regproducer producer1 EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r https://producer1.com/EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r cleos system regproducer producer2 EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc https://producer2.com/EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc 为便于投票过程，列出可供选择的生产者。 cleos system listproducers 13.进行投票 只有15％的可用选票被投票后才开始出块。 cleos system voteproducer prods user1 producer1 cleos system voteproducer prods user2 producer2 14.启动生产者 在每个生产者的单独窗口中，运行以下nodeos命令，调整命令行参数为每个生产者。 先清除一下缓存 rm -rf /root/.local/share/eosio/nodeos/data/ 启动生产者 nodeos --config-dir ~/eosio_test/producer1 nodeos --config-dir ~/eosio_test/producer2 看到开始出块，整个过程完毕 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-30T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1.配置nodeos节点的初始集 我们将启动许多nodeos，nodeos，将它们指向彼此，并最终对一组生产者进行投票。所有的nodeos节点都将在同一个服务器上运行。在接下来的章节中，我们将采取各种步骤来准备我们的候选生产者。producer1、producer2作为出块节点，user1、user2作为普通节点。 2.为每个nodeos创建配置和数据目录 因为所有的nodeos节点都将在同一个服务器上运行，所以我们需要单独的配置和数据目录。下面的例子为每个noedos节点创建~/eosio_test目录。使用任何最适合你的方法来创建多个账户，记住，账户名称的命名限制必须是12个字符，从a-z和1-5的集合。这里我们目录为： producer1、producer2。 3.为点对点通信准备IP地址 确定每个nodeos节点之间的点对点通信的IP地址和端口号（稍后您将在实际启动生产者节点时使用它）。每个nodeos都可以通过设置p2p-peer-address地址配置属性来配置，也可以在命令行启动nodeos时（每个对等点有一个参数），或者在配置中设置nodeos的config.ini文件（每个节点一行）属性。 producer1： bnet-endpoint = 0.0.0.0:4321 bnet-no-trx = false blocks-dir = &quot;blocks&quot; chain-state-db-size-mb = 1024 reversible-blocks-db-size-mb = 340 contracts-console = false https-client-validate-peers = 1 http-server-address = 127.0.0.1:8011 access-control-allow-origin = * access-control-allow-credentials = false p2p-listen-endpoint = 127.0.0.1:9011 p2p-peer-address = localhost:9022 p2p-max-nodes-per-host = 1 agent-name = &quot;producer1-node&quot; allowed-connection = any max-clients = 20 connection-cleanup-period = 30 network-version-match = 1 sync-fetch-span = 1000 max-implicit-request = 1500 enable-stale-production = true pause-on-startup = false max-transaction-time = 10000 max-irreversible-block-age = -1 producer-name = producer1 signature-provider = EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r=KEY:5JgGMrqeaczH6UoqWGZL2EPZ8fsJEnuifGnDSK7hpcKGXRsMvQJ keosd-provider-timeout = 5 txn-reference-block-lag = 0 wallet-dir = &quot;.&quot; unlock-timeout = 6000 filter-on = * abi-serializer-max-time-ms=45 plugin = eosio::producer_plugin plugin = eosio::wallet_api_plugin plugin = eosio::wallet_plugin plugin = eosio::chain_api_plugin plugin = eosio::http_plugin plugin = eosio::history_api_plugin producer2： bnet-endpoint = 0.0.0.0:4321 bnet-no-trx = false blocks-dir = &quot;blocks&quot; chain-state-db-size-mb = 1024 reversible-blocks-db-size-mb = 340 contracts-console = false https-client-validate-peers = 1 http-server-address = 127.0.0.1:8022 access-control-allow-origin = * access-control-allow-credentials = false p2p-listen-endpoint = 127.0.0.1:9022 p2p-peer-address = localhost:9011 p2p-max-nodes-per-host = 1 agent-name = &quot;producer2-node&quot; allowed-connection = any max-clients = 20 connection-cleanup-period = 30 network-version-match = 1 sync-fetch-span = 1000 max-implicit-request = 1500 enable-stale-production = true pause-on-startup = false max-transaction-time = 10000 max-irreversible-block-age = -1 producer-name = producer2 signature-provider = EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc=KEY:5Jwq3ve4jGG3uihCj3oLt7bB3NpmgN4WpLyrgvPua9vkJYJzpCp keosd-provider-timeout = 5 txn-reference-block-lag = 0 wallet-dir = &quot;.&quot; unlock-timeout = 6000 filter-on = * abi-serializer-max-time-ms=45 plugin = eosio::producer_plugin plugin = eosio::wallet_api_plugin plugin = eosio::wallet_plugin plugin = eosio::chain_api_plugin plugin = eosio::http_plugin plugin = eosio::history_api_plugin 4.启动“创世纪”节点 创世”节点是我们开始的第一个节点，它将产生区块链网络。所有其他节点都将从创世纪节点中派生出来。在创世纪节点上做以下操作： （以后台进程的方式启动，避免关掉终端进程关闭） nohup nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin &amp; 5.创建钱包 创建一个钱包。在默认情况下，keosd会自动开始管理钱包。 $ cleos wallet create 一定要保存钱包密码，以便将来解锁钱包。 在本教程中，无论哪个节点被访问，相同的钱包都将被用于所有帐户的所有关键管理。在分布式部署中，钱包管理应该是本地的活动。 6.创建重要的系统账户 有几个系统帐户是必需的。这些都是: eosio.bpay eosio.msig eosio.names eosio.ram eosio.ramfee eosio.saving eosio.stake eosio.token eosio.vpay 重复以下步骤，为每个系统账户创建一个账户。在本教程中，我们将为帐户所有者和活动键使用相同的密匙对，因此我们只需要在命令行上提供一次密钥对值。对于大多数一般的帐户，对于所有者和活动使用单独的密钥是一种很好的做法。该脚本对所有的eosio.* 账户都使用相同的密钥。您可以为每个账户使用不同的密钥。 $ cleos create key # for eosio.bpay Private key: 5Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy Public key: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR $ cleos wallet import 5Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy imported private key for: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR 创建各种系统账户： cleos create account eosio eosio.bpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.msig EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.names EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.ram EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.ramfee EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.saving EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.stake EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.token EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.vpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR cleos create account eosio eosio.system EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR 7.安装eosio.token智能合约 安装eosio.token的合约。这个合约使您能够创建、发行、交易和获取代币。 cleos set contract eosio.token ../../contracts/eosio.token 8.创建系统货币，其最大值为10亿个token。然后发行10亿个代币。用你的特定货币名称替换SYS符号。 cleos push action eosio.token create &#39;[ &quot;eosio&quot;, &quot;1000000000.0000 SYS&quot; ]&#39; -p eosio.token cleos push action eosio.token issue &#39;[ &quot;eosio&quot;, &quot;1000000000.0000 SYS&quot;, &quot;memo&quot; ]&#39; -p eosio 9.安装eosio.msig智能合约 msig合约支持和简化定义和管理权限级别和执行多签名操作。 cleos set contract eosio.msig ../../contracts/eosio.msig 10.安装eosio.system智能合约 该合约提供了几乎所有基于代币的操作行为的操作。在安装系统合约之前，操作是独立于账户的。一旦系统合约被启用，操作现在就有了一个经济元素。资源（cpu、网络、内存）必须付费。同样，新账户必须支付费用。 cleos set contract eosio ../../contracts/eosio.system 11.从单一生产者转变为多个生产者 使eosio.msig成为特权帐户（最后一步执行eosio.system合约，否则会被覆盖，eosio.system 必须用eosio来部署） cleos push action eosio setpriv &#39;[&quot;eosio.msig&quot;, 1]&#39; -p eosio@active 11.创建投票账户 创建出块节点并分配代币： cleos system newaccount eosio --transfer producer1 EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r --stake-net &quot;100.0000 SYS&quot; --stake-cpu &quot;100000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; cleos system newaccount eosio --transfer producer2 EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc --stake-net &quot;100.0000 SYS&quot; --stake-cpu &quot;100000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; 创建非出块节点并分配代币： cleos system newaccount eosio --transfer user1 EOS5SWHoG1mgy74uyXQTVuGnaT4gG4JfsCiWxQoY9veiQ4V2sQ753 --stake-net &quot;37500000.0000 SYS&quot; --stake-cpu &quot;37500000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; cleos system newaccount eosio --transfer user2 EOS5bBuPnSmxyU178D8fvYNxfUv8yGqf6UM81NeJBvtKASEusVPzD --stake-net &quot;37500000.0000 SYS&quot; --stake-cpu &quot;37500000.0000 SYS&quot; --buy-ram &quot;100.0000 SYS&quot; --buy-ram-kbytes &quot;100.0000 SYS&quot; 12.登记为出块节点 登记为生产节点： cleos system regproducer producer1 EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r https://producer1.com/EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r cleos system regproducer producer2 EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc https://producer2.com/EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc 为便于投票过程，列出可供选择的生产者。 cleos system listproducers 13.进行投票 只有15％的可用选票被投票后才开始出块。 cleos system voteproducer prods user1 producer1 cleos system voteproducer prods user2 producer2 14.启动生产者 在每个生产者的单独窗口中，运行以下nodeos命令，调整命令行参数为每个生产者。 先清除一下缓存 rm -rf /root/.local/share/eosio/nodeos/data/ 启动生产者 nodeos --config-dir ~/eosio_test/producer1 nodeos --config-dir ~/eosio_test/producer2 看到开始出块，整个过程完毕 阅读更多","@type":"BlogPosting","url":"/2018/07/30/ea39a6d60869970bc5ffb2bb44411dc7.html","headline":"【问链-Eos公开课】第5课 组建单机多节点EOS网络","dateModified":"2018-07-30T00:00:00+08:00","datePublished":"2018-07-30T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/07/30/ea39a6d60869970bc5ffb2bb44411dc7.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>【问链-Eos公开课】第5课 组建单机多节点EOS网络</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <blockquote> 
   <p>1.配置nodeos节点的初始集</p> 
  </blockquote> 
  <p>我们将启动许多nodeos，nodeos，将它们指向彼此，并最终对一组生产者进行投票。所有的nodeos节点都将在同一个服务器上运行。在接下来的章节中，我们将采取各种步骤来准备我们的候选生产者。producer1、producer2作为出块节点，user1、user2作为普通节点。</p> 
  <blockquote> 
   <p>2.为每个nodeos创建配置和数据目录</p> 
  </blockquote> 
  <p>因为所有的nodeos节点都将在同一个服务器上运行，所以我们需要单独的配置和数据目录。下面的例子为每个noedos节点创建~/eosio_test目录。使用任何最适合你的方法来创建多个账户，记住，账户名称的命名限制必须是12个字符，从a-z和1-5的集合。这里我们目录为： <br> producer1、producer2。</p> 
  <blockquote> 
   <p>3.为点对点通信准备IP地址</p> 
  </blockquote> 
  <p>确定每个nodeos节点之间的点对点通信的IP地址和端口号（稍后您将在实际启动生产者节点时使用它）。每个nodeos都可以通过设置p2p-peer-address地址配置属性来配置，也可以在命令行启动nodeos时（每个对等点有一个参数），或者在配置中设置nodeos的config.ini文件（每个节点一行）属性。</p> 
  <p>producer1：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">bnet<span class="hljs-attribute">-endpoint</span> <span class="hljs-subst">=</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">4321</span>

bnet<span class="hljs-attribute">-no</span><span class="hljs-attribute">-trx</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

blocks<span class="hljs-attribute">-dir</span> <span class="hljs-subst">=</span> <span class="hljs-string">"blocks"</span>

chain<span class="hljs-attribute">-state</span><span class="hljs-attribute">-db</span><span class="hljs-attribute">-size</span><span class="hljs-attribute">-mb</span> <span class="hljs-subst">=</span> <span class="hljs-number">1024</span>

reversible<span class="hljs-attribute">-blocks</span><span class="hljs-attribute">-db</span><span class="hljs-attribute">-size</span><span class="hljs-attribute">-mb</span> <span class="hljs-subst">=</span> <span class="hljs-number">340</span>

contracts<span class="hljs-attribute">-console</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

https<span class="hljs-attribute">-client</span><span class="hljs-attribute">-validate</span><span class="hljs-attribute">-peers</span> <span class="hljs-subst">=</span> <span class="hljs-number">1</span>

http<span class="hljs-attribute">-server</span><span class="hljs-attribute">-address</span> <span class="hljs-subst">=</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">8011</span>

access<span class="hljs-attribute">-control</span><span class="hljs-attribute">-allow</span><span class="hljs-attribute">-origin</span> <span class="hljs-subst">=</span> <span class="hljs-subst">*</span>

access<span class="hljs-attribute">-control</span><span class="hljs-attribute">-allow</span><span class="hljs-attribute">-credentials</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

p2p<span class="hljs-attribute">-listen</span><span class="hljs-attribute">-endpoint</span> <span class="hljs-subst">=</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">9011</span>

p2p<span class="hljs-attribute">-peer</span><span class="hljs-attribute">-address</span> <span class="hljs-subst">=</span> localhost:<span class="hljs-number">9022</span>

p2p<span class="hljs-attribute">-max</span><span class="hljs-attribute">-nodes</span><span class="hljs-attribute">-per</span><span class="hljs-attribute">-host</span> <span class="hljs-subst">=</span> <span class="hljs-number">1</span>

agent<span class="hljs-attribute">-name</span> <span class="hljs-subst">=</span> <span class="hljs-string">"producer1-node"</span>

allowed<span class="hljs-attribute">-connection</span> <span class="hljs-subst">=</span> any

<span class="hljs-keyword">max</span><span class="hljs-attribute">-clients</span> <span class="hljs-subst">=</span> <span class="hljs-number">20</span>

connection<span class="hljs-attribute">-cleanup</span><span class="hljs-attribute">-period</span> <span class="hljs-subst">=</span> <span class="hljs-number">30</span>

network<span class="hljs-attribute">-version</span><span class="hljs-attribute">-match</span> <span class="hljs-subst">=</span> <span class="hljs-number">1</span>

sync<span class="hljs-attribute">-fetch</span><span class="hljs-attribute">-span</span> <span class="hljs-subst">=</span> <span class="hljs-number">1000</span>

<span class="hljs-keyword">max</span><span class="hljs-attribute">-implicit</span><span class="hljs-attribute">-request</span> <span class="hljs-subst">=</span> <span class="hljs-number">1500</span>

enable<span class="hljs-attribute">-stale</span><span class="hljs-attribute">-production</span> <span class="hljs-subst">=</span> <span class="hljs-literal">true</span>

pause<span class="hljs-attribute">-on</span><span class="hljs-attribute">-startup</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

<span class="hljs-keyword">max</span><span class="hljs-attribute">-transaction</span><span class="hljs-attribute">-time</span> <span class="hljs-subst">=</span> <span class="hljs-number">10000</span>

<span class="hljs-keyword">max</span><span class="hljs-attribute">-irreversible</span><span class="hljs-attribute">-block</span><span class="hljs-attribute">-age</span> <span class="hljs-subst">=</span> <span class="hljs-subst">-</span><span class="hljs-number">1</span>

producer<span class="hljs-attribute">-name</span> <span class="hljs-subst">=</span> producer1

signature<span class="hljs-attribute">-provider</span> <span class="hljs-subst">=</span> EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r<span class="hljs-subst">=</span>KEY:<span class="hljs-number">5</span>JgGMrqeaczH6UoqWGZL2EPZ8fsJEnuifGnDSK7hpcKGXRsMvQJ

keosd<span class="hljs-attribute">-provider</span><span class="hljs-attribute">-timeout</span> <span class="hljs-subst">=</span> <span class="hljs-number">5</span>

txn<span class="hljs-attribute">-reference</span><span class="hljs-attribute">-block</span><span class="hljs-attribute">-lag</span> <span class="hljs-subst">=</span> <span class="hljs-number">0</span>

wallet<span class="hljs-attribute">-dir</span> <span class="hljs-subst">=</span> <span class="hljs-string">"."</span>

unlock<span class="hljs-attribute">-timeout</span> <span class="hljs-subst">=</span> <span class="hljs-number">6000</span>

filter<span class="hljs-attribute">-on</span> <span class="hljs-subst">=</span> <span class="hljs-subst">*</span>

abi<span class="hljs-attribute">-serializer</span><span class="hljs-attribute">-max</span><span class="hljs-attribute">-time</span><span class="hljs-attribute">-ms</span><span class="hljs-subst">=</span><span class="hljs-number">45</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::producer_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::wallet_api_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::wallet_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::chain_api_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::http_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::history_api_plugin</span>
</code></pre> 
  <p>producer2：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">bnet<span class="hljs-attribute">-endpoint</span> <span class="hljs-subst">=</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">4321</span>

bnet<span class="hljs-attribute">-no</span><span class="hljs-attribute">-trx</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

blocks<span class="hljs-attribute">-dir</span> <span class="hljs-subst">=</span> <span class="hljs-string">"blocks"</span>

chain<span class="hljs-attribute">-state</span><span class="hljs-attribute">-db</span><span class="hljs-attribute">-size</span><span class="hljs-attribute">-mb</span> <span class="hljs-subst">=</span> <span class="hljs-number">1024</span>

reversible<span class="hljs-attribute">-blocks</span><span class="hljs-attribute">-db</span><span class="hljs-attribute">-size</span><span class="hljs-attribute">-mb</span> <span class="hljs-subst">=</span> <span class="hljs-number">340</span>

contracts<span class="hljs-attribute">-console</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

https<span class="hljs-attribute">-client</span><span class="hljs-attribute">-validate</span><span class="hljs-attribute">-peers</span> <span class="hljs-subst">=</span> <span class="hljs-number">1</span>

http<span class="hljs-attribute">-server</span><span class="hljs-attribute">-address</span> <span class="hljs-subst">=</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">8022</span>

access<span class="hljs-attribute">-control</span><span class="hljs-attribute">-allow</span><span class="hljs-attribute">-origin</span> <span class="hljs-subst">=</span> <span class="hljs-subst">*</span>

access<span class="hljs-attribute">-control</span><span class="hljs-attribute">-allow</span><span class="hljs-attribute">-credentials</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

p2p<span class="hljs-attribute">-listen</span><span class="hljs-attribute">-endpoint</span> <span class="hljs-subst">=</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">9022</span>

p2p<span class="hljs-attribute">-peer</span><span class="hljs-attribute">-address</span> <span class="hljs-subst">=</span> localhost:<span class="hljs-number">9011</span>

p2p<span class="hljs-attribute">-max</span><span class="hljs-attribute">-nodes</span><span class="hljs-attribute">-per</span><span class="hljs-attribute">-host</span> <span class="hljs-subst">=</span> <span class="hljs-number">1</span>

agent<span class="hljs-attribute">-name</span> <span class="hljs-subst">=</span> <span class="hljs-string">"producer2-node"</span>

allowed<span class="hljs-attribute">-connection</span> <span class="hljs-subst">=</span> any

<span class="hljs-keyword">max</span><span class="hljs-attribute">-clients</span> <span class="hljs-subst">=</span> <span class="hljs-number">20</span>

connection<span class="hljs-attribute">-cleanup</span><span class="hljs-attribute">-period</span> <span class="hljs-subst">=</span> <span class="hljs-number">30</span>

network<span class="hljs-attribute">-version</span><span class="hljs-attribute">-match</span> <span class="hljs-subst">=</span> <span class="hljs-number">1</span>

sync<span class="hljs-attribute">-fetch</span><span class="hljs-attribute">-span</span> <span class="hljs-subst">=</span> <span class="hljs-number">1000</span>

<span class="hljs-keyword">max</span><span class="hljs-attribute">-implicit</span><span class="hljs-attribute">-request</span> <span class="hljs-subst">=</span> <span class="hljs-number">1500</span>

enable<span class="hljs-attribute">-stale</span><span class="hljs-attribute">-production</span> <span class="hljs-subst">=</span> <span class="hljs-literal">true</span>

pause<span class="hljs-attribute">-on</span><span class="hljs-attribute">-startup</span> <span class="hljs-subst">=</span> <span class="hljs-literal">false</span>

<span class="hljs-keyword">max</span><span class="hljs-attribute">-transaction</span><span class="hljs-attribute">-time</span> <span class="hljs-subst">=</span> <span class="hljs-number">10000</span>

<span class="hljs-keyword">max</span><span class="hljs-attribute">-irreversible</span><span class="hljs-attribute">-block</span><span class="hljs-attribute">-age</span> <span class="hljs-subst">=</span> <span class="hljs-subst">-</span><span class="hljs-number">1</span>

producer<span class="hljs-attribute">-name</span> <span class="hljs-subst">=</span> producer2

signature<span class="hljs-attribute">-provider</span> <span class="hljs-subst">=</span> EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc<span class="hljs-subst">=</span>KEY:<span class="hljs-number">5</span>Jwq3ve4jGG3uihCj3oLt7bB3NpmgN4WpLyrgvPua9vkJYJzpCp

keosd<span class="hljs-attribute">-provider</span><span class="hljs-attribute">-timeout</span> <span class="hljs-subst">=</span> <span class="hljs-number">5</span>

txn<span class="hljs-attribute">-reference</span><span class="hljs-attribute">-block</span><span class="hljs-attribute">-lag</span> <span class="hljs-subst">=</span> <span class="hljs-number">0</span>

wallet<span class="hljs-attribute">-dir</span> <span class="hljs-subst">=</span> <span class="hljs-string">"."</span>

unlock<span class="hljs-attribute">-timeout</span> <span class="hljs-subst">=</span> <span class="hljs-number">6000</span>

filter<span class="hljs-attribute">-on</span> <span class="hljs-subst">=</span> <span class="hljs-subst">*</span>

abi<span class="hljs-attribute">-serializer</span><span class="hljs-attribute">-max</span><span class="hljs-attribute">-time</span><span class="hljs-attribute">-ms</span><span class="hljs-subst">=</span><span class="hljs-number">45</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::producer_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::wallet_api_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::wallet_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::chain_api_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::http_plugin</span>

plugin <span class="hljs-subst">=</span> eosio<span class="hljs-tag">::history_api_plugin</span>
</code></pre> 
  <blockquote> 
   <p>4.启动“创世纪”节点</p> 
  </blockquote> 
  <p>创世”节点是我们开始的第一个节点，它将产生区块链网络。所有其他节点都将从创世纪节点中派生出来。在创世纪节点上做以下操作： <br> （以后台进程的方式启动，避免关掉终端进程关闭）</p> 
  <pre class="prettyprint"><code class=" hljs lasso">nohup nodeos <span class="hljs-attribute">-e</span> <span class="hljs-attribute">-p</span> eosio <span class="hljs-subst">--</span>plugin eosio<span class="hljs-tag">::wallet_api_plugin</span> <span class="hljs-subst">--</span>plugin eosio<span class="hljs-tag">::chain_api_plugin</span> <span class="hljs-subst">&amp;</span></code></pre> 
  <blockquote> 
   <p>5.创建钱包</p> 
  </blockquote> 
  <p>创建一个钱包。在默认情况下，keosd会自动开始管理钱包。</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>cleos wallet create</code></pre> 
  <p>一定要保存钱包密码，以便将来解锁钱包。 <br> 在本教程中，无论哪个节点被访问，相同的钱包都将被用于所有帐户的所有关键管理。在分布式部署中，钱包管理应该是本地的活动。</p> 
  <blockquote> 
   <p>6.创建重要的系统账户</p> 
  </blockquote> 
  <p>有几个系统帐户是必需的。这些都是: <br> eosio.bpay <br> eosio.msig <br> eosio.names <br> eosio.ram <br> eosio.ramfee <br> eosio.saving <br> eosio.stake <br> eosio.token <br> eosio.vpay <br> 重复以下步骤，为每个系统账户创建一个账户。在本教程中，我们将为帐户所有者和活动键使用相同的密匙对，因此我们只需要在命令行上提供一次密钥对值。对于大多数一般的帐户，对于所有者和活动使用单独的密钥是一种很好的做法。该脚本对所有的eosio.* 账户都使用相同的密钥。您可以为每个账户使用不同的密钥。</p> 
  <pre class="prettyprint"><code class=" hljs vbnet">$ cleos create <span class="hljs-keyword">key</span>  <span class="hljs-preprocessor"># for eosio.bpay</span>
<span class="hljs-keyword">Private</span> <span class="hljs-keyword">key</span>: <span class="hljs-number">5</span>Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy
<span class="hljs-keyword">Public</span> <span class="hljs-keyword">key</span>: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR

$ cleos wallet import <span class="hljs-number">5</span>Hye2hueojzGHEhiriWQvedd77De1AuVc2mqa4XD3mgkWF9yENy
imported <span class="hljs-keyword">private</span> <span class="hljs-keyword">key</span> <span class="hljs-keyword">for</span>: EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
</code></pre> 
  <p>创建各种系统账户：</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">cleos <span class="hljs-built_in">create</span> account eosio eosio.bpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.msig EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.names EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.ram EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.ramfee EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.saving EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.stake EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.<span class="hljs-keyword">token</span> EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.vpay EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR
cleos <span class="hljs-built_in">create</span> account eosio eosio.<span class="hljs-keyword">system</span> EOS6WtUR4G5rRRGWrxSZdFd21iYYRgr3Hr7Pymcqg6dG5FVP12JcR</code></pre> 
  <blockquote> 
   <p>7.安装eosio.token智能合约</p> 
  </blockquote> 
  <p>安装eosio.token的合约。这个合约使您能够创建、发行、交易和获取代币。</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">cleos <span class="hljs-built_in">set</span> contract eosio.<span class="hljs-keyword">token</span> ../../contracts/eosio.<span class="hljs-keyword">token</span></code></pre> 
  <blockquote> 
   <p>8.创建系统货币，其最大值为10亿个token。然后发行10亿个代币。用你的特定货币名称替换SYS符号。</p> 
  </blockquote> 
  <pre class="prettyprint"><code class=" hljs scilab">
cleos push action <span class="hljs-transposed_variable">eosio.</span>token create <span class="hljs-string">'[ "</span>eosio<span class="hljs-string">", "</span><span class="hljs-number">1000000000.0000</span> SYS<span class="hljs-string">" ]'</span> -p <span class="hljs-transposed_variable">eosio.</span>token
cleos push action <span class="hljs-transposed_variable">eosio.</span>token issue <span class="hljs-string">'[ "</span>eosio<span class="hljs-string">", "</span><span class="hljs-number">1000000000.0000</span> SYS<span class="hljs-string">", "</span>memo<span class="hljs-string">" ]'</span> -p eosio</code></pre> 
  <blockquote> 
   <p>9.安装eosio.msig智能合约</p> 
  </blockquote> 
  <p>msig合约支持和简化定义和管理权限级别和执行多签名操作。</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">cleos <span class="hljs-keyword">set</span> contract eosio<span class="hljs-preprocessor">.msig</span> ../../contracts/eosio<span class="hljs-preprocessor">.msig</span></code></pre> 
  <blockquote> 
   <p>10.安装eosio.system智能合约</p> 
  </blockquote> 
  <p>该合约提供了几乎所有基于代币的操作行为的操作。在安装系统合约之前，操作是独立于账户的。一旦系统合约被启用，操作现在就有了一个经济元素。资源（cpu、网络、内存）必须付费。同样，新账户必须支付费用。</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">cleos <span class="hljs-built_in">set</span> contract eosio  ../../contracts/eosio.<span class="hljs-keyword">system</span></code></pre> 
  <blockquote> 
   <p>11.从单一生产者转变为多个生产者</p> 
  </blockquote> 
  <p>使eosio.msig成为特权帐户（最后一步执行eosio.system合约，否则会被覆盖，eosio.system 必须用eosio来部署）</p> 
  <pre class="prettyprint"><code class=" hljs perl">cleos <span class="hljs-keyword">push</span> action eosio setpriv <span class="hljs-string">'["eosio.msig", 1]'</span> -p eosio<span class="hljs-variable">@active</span></code></pre> 
  <blockquote> 
   <p>11.创建投票账户</p> 
  </blockquote> 
  <p>创建出块节点并分配代币：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">cleos system newaccount eosio <span class="hljs-subst">--</span>transfer producer1  EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-net</span> <span class="hljs-string">"100.0000 SYS"</span> <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-cpu</span> <span class="hljs-string">"100000.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span> <span class="hljs-string">"100.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span><span class="hljs-attribute">-kbytes</span> <span class="hljs-string">"100.0000 SYS"</span>

cleos system newaccount eosio <span class="hljs-subst">--</span>transfer producer2  EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-net</span> <span class="hljs-string">"100.0000 SYS"</span> <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-cpu</span> <span class="hljs-string">"100000.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span> <span class="hljs-string">"100.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span><span class="hljs-attribute">-kbytes</span> <span class="hljs-string">"100.0000 SYS"</span></code></pre> 
  <p>创建非出块节点并分配代币：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">cleos system newaccount eosio <span class="hljs-subst">--</span>transfer user1  EOS5SWHoG1mgy74uyXQTVuGnaT4gG4JfsCiWxQoY9veiQ4V2sQ753 <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-net</span> <span class="hljs-string">"37500000.0000 SYS"</span> <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-cpu</span> <span class="hljs-string">"37500000.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span> <span class="hljs-string">"100.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span><span class="hljs-attribute">-kbytes</span> <span class="hljs-string">"100.0000 SYS"</span>
cleos system newaccount eosio <span class="hljs-subst">--</span>transfer user2  EOS5bBuPnSmxyU178D8fvYNxfUv8yGqf6UM81NeJBvtKASEusVPzD <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-net</span> <span class="hljs-string">"37500000.0000 SYS"</span> <span class="hljs-subst">--</span>stake<span class="hljs-attribute">-cpu</span> <span class="hljs-string">"37500000.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span> <span class="hljs-string">"100.0000 SYS"</span> <span class="hljs-subst">--</span>buy<span class="hljs-attribute">-ram</span><span class="hljs-attribute">-kbytes</span> <span class="hljs-string">"100.0000 SYS"</span></code></pre> 
  <blockquote> 
   <p>12.登记为出块节点</p> 
  </blockquote> 
  <p>登记为生产节点：</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">cleos <span class="hljs-keyword">system</span> regproducer producer1 EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r <span class="hljs-keyword">https</span>://producer1.com/EOS83GKHM7NLhxmYEB4wiTR57mpVVzgnfnU4SiGEsQjiPuZB9Cu2r

cleos <span class="hljs-keyword">system</span> regproducer producer2 EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc <span class="hljs-keyword">https</span>://producer2.com/EOS81FEATW43yBVGYHqRRCXWBvRjwo8jCHZUSkALYtqbpKJfF3uKc</code></pre> 
  <p>为便于投票过程，列出可供选择的生产者。</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">cleos <span class="hljs-keyword">system</span> listproducers</code></pre> 
  <blockquote> 
   <p>13.进行投票 <br> 只有15％的可用选票被投票后才开始出块。</p> 
  </blockquote> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">
cleos <span class="hljs-keyword">system</span> voteproducer prods user1 producer1
cleos <span class="hljs-keyword">system</span> voteproducer prods user2 producer2</code></pre> 
  <p>14.启动生产者 <br> 在每个生产者的单独窗口中，运行以下nodeos命令，调整命令行参数为每个生产者。 <br> 先清除一下缓存</p> 
  <pre class="prettyprint"><code class=" hljs lasso">rm <span class="hljs-attribute">-rf</span> /root<span class="hljs-subst">/</span><span class="hljs-built_in">.</span><span class="hljs-built_in">local</span>/share/eosio/nodeos/<span class="hljs-built_in">data</span><span class="hljs-subst">/</span>
</code></pre> 
  <p>启动生产者</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">nodeos</span>  <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">config</span><span class="hljs-literal">-</span><span class="hljs-comment">dir</span>  <span class="hljs-comment">~/eosio_test/producer1</span>
<span class="hljs-comment">nodeos</span>  <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">config</span><span class="hljs-literal">-</span><span class="hljs-comment">dir</span>  <span class="hljs-comment">~/eosio_test/producer2</span></code></pre> 
  <p>看到开始出块，整个过程完毕</p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/tiandiwuya/article/details/81279891,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/tiandiwuya/article/details/81279891,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
