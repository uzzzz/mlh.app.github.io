<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>搭建以太坊私链(单节点，多节点，windows，linux) | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="搭建以太坊私链(单节点，多节点，windows，linux)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="网上关于如何搭建私链的文章很多，但是看来看去都是一样的，千篇一律，想找点不一样，新鲜的知识很难，本文总结归纳那些文章的内容，从使用私链的角度出发写了一篇比较全面的博客，内容包含以下几点： windows单节点 windows多节点 linux创建节点并，windows远程使用linux节点 linux节点和Windows节点建立连接（网络原因，提供思路） 1.windows单节点 安装geth 下载地址：https://geth.ethereum.org/downloads/，下载之后是个 .exe文件，然后安装就好了，安装之后把geth的安装目录加入到系统环境变量的path里。验证是否安装成功，打开cmd窗口，输入 geth version 如果出来下面的内容，表示安装好了。（如果不加任何任何参数直接运行&nbsp;geth&nbsp;，会自动连接到以太坊公网，此时会开始同步区块） 初始化创世区块 新建个空文件夹，比如 然后在里面创建个first.json文件，文件名随意自己定吧，里面的内容如下： { &quot;config&quot;: { &quot;chainId&quot;: 10, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;alloc&quot; : {}, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot; } 然后打开cmd窗口，跳转到当前目录下执行命令： geth --datadir .\nodedata0 init first.json 上面的命令的主体是 geth init，表示初始化区块链，命令可以带有选项和参数，其中–datadir选项后面跟一个目录名，这里为nodedata0，表示指定数据存放目录为 nodedata0， first.json是init命令的参数，就是刚才创建的json文件 出现Successfully表示初始化成功了（把这行命令保存为一个.cmd命令备用），这时候你会发现，你的目录下面自动生成了一个nodedata0的文件夹，目录如下： 其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。 启动节点 执行命令： geth --rpc --nodiscover --datadir&nbsp; &quot;./nodedata0&quot;&nbsp; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console 2&gt;&gt;geth.log参数说明 --nodiscover 关闭p2p网络的自动发现，需要手动添加节点，这样有利于我们隐藏私有网络 --rpc 启用ipc服务，默认端口号8545 --datadir 区块链数据存储目录 --port 网络监听端口，默认30303 --rpcapi 表示可以通过ipc调用的对象 --rpccorsdomain 指定可以访问APi的domain地址，设置为“*”则任何地址都可以访问，这样做不安全 --networkid 网络标识，私有链取一个大于4的随意的值 console 打开一个可交互的javascript环境 2&gt;&gt;geth.log 把geth中的log信息导入geth.log，也可以不加这个，把信息直接输出在console里，这样直观 更多参数：https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options http://www.yaozihao.cn/2017/07/07/geth%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E4%BB%8B%E7%BB%8D/ 出现javascript console说明节点启动成功了，geth.log文件也生成了 把这启动命令也保存start0.cmd命令，以后再启动这个节点直接双击这个cmd就行了 节点相关基本操作 查看账户 这时候是没有账户的 创建账户 personal.newAccount() Passphrase是输入密码，下面的repeat passphrase是重复密码，创建的账户地址是： 0x8b2bd44cec6caedcc0664f965d895a17db326e0a 这是我们会看到nodedata0文件夹下面的keystore下面会多出个文件，就是保存账户信息 再查看账户列表，发现有账户了 如果你记不清楚personal有哪些方法，可以执行personal命令查看一下，其它的eth，miner也一样 启动挖矿 miner.start() 看到null，不要慌，因为你的日志信息都保存到了geth.log文件里了，下面这小图标代表啥自己领会哈 挖了半天，到底挖了几个区块了？赚了多少以太币了？看下面的查询余额和查看区块数 另外说明一点，节点挖矿的以太币会自动存入到eth.coinbase账户里，默认是eth.accounts里的第一个，你也可以自己指定coinbase 停止挖矿 miner.stop() 查看账户余额 eth.getBalance eth.accounts[0]得到的是账户地址而已，你可能被这么大的数值吓一跳，怎么这么多以太币？一个以太币等于10的18次方个wei，这里的数值是wei的个数，显示以太币的个数，可以用下面的命令，405个以太币，如果是真的，简直不要太爽，以太坊创始人V神以前肯定也在家里这么偷偷的挖了不少 查看区块数 eth.blockNumber 81个区块，一个区块奖励5个以太币 指定coinbase账户 先创建第二个账户，然后把第二个账户指定为coinbase，修改之前和修改之后已经改变 转账 先创建第三个没有币的账户，从账户1转5个比特币到账户3里，有的同学会问，不是有个账户2吗，你怎么不用呢？因为转账发起了交易，然而发起交易仅仅是发起交易，交易要被确认需要打包进区块里，挖矿就是做这个的，挖矿本身的收益会存进coinbase账户里，而现在coinbase账户是账户2，所以不考虑账户2 再查看coinbase账户2的余额，不仅挖矿奖励，连交易费都收了哦 退出 exit 验证私链 写了这么多，一顿操作猛如虎，这个私链到底能不能用？ 我们用remix验证一样，连接这个私链 账户和余额信息会显示出来，如果你的工具找不到你的私链，请确认启动节点的参数中，有没有设置&nbsp;--rpccorsdomain &quot;*&quot;&nbsp; 单节点就写到这里，下面是多节点的内容 2.windows多节点 我们在上面已经创建了一个节点了，下面我们直接创建第二个节点，然后连接两个节点，第二个节点的创建要满足下面条件 创世区块的信息得一样 就是要用一样的.json配置文件初始化，因为区块链的本质就是所有节点记录的账本都是一样的，所以第一个区块的数据也得一致 rpcport 和 port参数必须和第一个不同 节点1 启动的命令没有这个参数rpcport，默认的值是8545，我们就用9545吧，port用30306 初始化创世区块 geth --datadir .\nodedata1 init first.json 自动创建了存放节点数据的文件夹nodedata1 启动节点 geth --rpc --rpcport 9545 --nodiscover --datadir&nbsp; &quot;./nodedata1&quot;&nbsp; --port 30306 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console nodiscover，ipcdisable，这两个参数很关键，windows没有ipcdisable参数，第二个节点启动会报错的。nodiscover让节点2不会被节点1自动扫描到。 节点1和节点2建立连接 我们用节点2主动添加节点1，两个节点只要一方主动建立连接就可以了，另一方会自动获得这个连接关系的，效果一样的 先查看节点1的enode信息，作为节点2 admin.addPeer()方法的参数 节点1的console: 节点2的console: 再看节点1的console: 再用remix连接一下我们的节点2吧 windows多个节点的私链就是这样了 3.linux创建节点并和windows节点建立连接 下载文件并上传服务器解压：https://geth.ethereum.org/downloads/ 注意你的linux是多少位的就下载多少位的二进制文件，我的是32位的，我就下载32位的 然后把geth复制到/usr/bin目录下面，我们就可以使用geth命令了，geth help，出现下的界面，表示成功。 网上其它的文章都是先安装go语言，再下载geth源码编译安装，最终的效果都是一样的。 然后执行初始化区块的命令： geth --datadir nodedata2 init first.json命令跟在windows差不多，自动生成的nodedata2文件夹也是一样的 启动节点，步骤跟在windous一样 geth --rpc --rpcport 8545 --rpcaddr 65.49.132.28 --nodiscover --datadir&nbsp; &quot;/root/privatechain/nodedata2&quot;&nbsp; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console 命令多了一个： --rpcaddr 65.49.132.28 这个ip是linux服务器的地址，如果我们在windows本地想要访问服务器的私链，这个参数得加上 已经启动，我们可以在命令行窗口执行一些geth的命令 windows电脑上的remix访问一下linux的私链： 一个账户，地址也是一样的，it works。 额外操作：把启动命令保存为linux可运行文件，方便以后启动： linux的私链运行成功了，接下来我们让window的节点和linux的节点连接起来(因为网络原因没实现，只有思路) windows上已经有两个节点了，现在我们的linux要访问这两个节点，所以这两个节点的启动命令得加上--rpcaddr这个参数，但是这部分实现不了了，因为自己电脑连接的是路由器，直接用公网ip+端口号访问不到自己的电脑，要在路由器上做端口映射才能让服务器访问到自己的电脑，我没有路由器的登录权限，所以做不了了 1.端口映射方法：http://service.tp-link.com.cn/detail_article_2441.html 2.节点建立连接方法应该跟windous连接点相连方法是一样的，关键是节点启动的时候加上--rpcaddr参数 3.祝好运！ 阅读更多" />
<meta property="og:description" content="网上关于如何搭建私链的文章很多，但是看来看去都是一样的，千篇一律，想找点不一样，新鲜的知识很难，本文总结归纳那些文章的内容，从使用私链的角度出发写了一篇比较全面的博客，内容包含以下几点： windows单节点 windows多节点 linux创建节点并，windows远程使用linux节点 linux节点和Windows节点建立连接（网络原因，提供思路） 1.windows单节点 安装geth 下载地址：https://geth.ethereum.org/downloads/，下载之后是个 .exe文件，然后安装就好了，安装之后把geth的安装目录加入到系统环境变量的path里。验证是否安装成功，打开cmd窗口，输入 geth version 如果出来下面的内容，表示安装好了。（如果不加任何任何参数直接运行&nbsp;geth&nbsp;，会自动连接到以太坊公网，此时会开始同步区块） 初始化创世区块 新建个空文件夹，比如 然后在里面创建个first.json文件，文件名随意自己定吧，里面的内容如下： { &quot;config&quot;: { &quot;chainId&quot;: 10, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;alloc&quot; : {}, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot; } 然后打开cmd窗口，跳转到当前目录下执行命令： geth --datadir .\nodedata0 init first.json 上面的命令的主体是 geth init，表示初始化区块链，命令可以带有选项和参数，其中–datadir选项后面跟一个目录名，这里为nodedata0，表示指定数据存放目录为 nodedata0， first.json是init命令的参数，就是刚才创建的json文件 出现Successfully表示初始化成功了（把这行命令保存为一个.cmd命令备用），这时候你会发现，你的目录下面自动生成了一个nodedata0的文件夹，目录如下： 其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。 启动节点 执行命令： geth --rpc --nodiscover --datadir&nbsp; &quot;./nodedata0&quot;&nbsp; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console 2&gt;&gt;geth.log参数说明 --nodiscover 关闭p2p网络的自动发现，需要手动添加节点，这样有利于我们隐藏私有网络 --rpc 启用ipc服务，默认端口号8545 --datadir 区块链数据存储目录 --port 网络监听端口，默认30303 --rpcapi 表示可以通过ipc调用的对象 --rpccorsdomain 指定可以访问APi的domain地址，设置为“*”则任何地址都可以访问，这样做不安全 --networkid 网络标识，私有链取一个大于4的随意的值 console 打开一个可交互的javascript环境 2&gt;&gt;geth.log 把geth中的log信息导入geth.log，也可以不加这个，把信息直接输出在console里，这样直观 更多参数：https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options http://www.yaozihao.cn/2017/07/07/geth%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E4%BB%8B%E7%BB%8D/ 出现javascript console说明节点启动成功了，geth.log文件也生成了 把这启动命令也保存start0.cmd命令，以后再启动这个节点直接双击这个cmd就行了 节点相关基本操作 查看账户 这时候是没有账户的 创建账户 personal.newAccount() Passphrase是输入密码，下面的repeat passphrase是重复密码，创建的账户地址是： 0x8b2bd44cec6caedcc0664f965d895a17db326e0a 这是我们会看到nodedata0文件夹下面的keystore下面会多出个文件，就是保存账户信息 再查看账户列表，发现有账户了 如果你记不清楚personal有哪些方法，可以执行personal命令查看一下，其它的eth，miner也一样 启动挖矿 miner.start() 看到null，不要慌，因为你的日志信息都保存到了geth.log文件里了，下面这小图标代表啥自己领会哈 挖了半天，到底挖了几个区块了？赚了多少以太币了？看下面的查询余额和查看区块数 另外说明一点，节点挖矿的以太币会自动存入到eth.coinbase账户里，默认是eth.accounts里的第一个，你也可以自己指定coinbase 停止挖矿 miner.stop() 查看账户余额 eth.getBalance eth.accounts[0]得到的是账户地址而已，你可能被这么大的数值吓一跳，怎么这么多以太币？一个以太币等于10的18次方个wei，这里的数值是wei的个数，显示以太币的个数，可以用下面的命令，405个以太币，如果是真的，简直不要太爽，以太坊创始人V神以前肯定也在家里这么偷偷的挖了不少 查看区块数 eth.blockNumber 81个区块，一个区块奖励5个以太币 指定coinbase账户 先创建第二个账户，然后把第二个账户指定为coinbase，修改之前和修改之后已经改变 转账 先创建第三个没有币的账户，从账户1转5个比特币到账户3里，有的同学会问，不是有个账户2吗，你怎么不用呢？因为转账发起了交易，然而发起交易仅仅是发起交易，交易要被确认需要打包进区块里，挖矿就是做这个的，挖矿本身的收益会存进coinbase账户里，而现在coinbase账户是账户2，所以不考虑账户2 再查看coinbase账户2的余额，不仅挖矿奖励，连交易费都收了哦 退出 exit 验证私链 写了这么多，一顿操作猛如虎，这个私链到底能不能用？ 我们用remix验证一样，连接这个私链 账户和余额信息会显示出来，如果你的工具找不到你的私链，请确认启动节点的参数中，有没有设置&nbsp;--rpccorsdomain &quot;*&quot;&nbsp; 单节点就写到这里，下面是多节点的内容 2.windows多节点 我们在上面已经创建了一个节点了，下面我们直接创建第二个节点，然后连接两个节点，第二个节点的创建要满足下面条件 创世区块的信息得一样 就是要用一样的.json配置文件初始化，因为区块链的本质就是所有节点记录的账本都是一样的，所以第一个区块的数据也得一致 rpcport 和 port参数必须和第一个不同 节点1 启动的命令没有这个参数rpcport，默认的值是8545，我们就用9545吧，port用30306 初始化创世区块 geth --datadir .\nodedata1 init first.json 自动创建了存放节点数据的文件夹nodedata1 启动节点 geth --rpc --rpcport 9545 --nodiscover --datadir&nbsp; &quot;./nodedata1&quot;&nbsp; --port 30306 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console nodiscover，ipcdisable，这两个参数很关键，windows没有ipcdisable参数，第二个节点启动会报错的。nodiscover让节点2不会被节点1自动扫描到。 节点1和节点2建立连接 我们用节点2主动添加节点1，两个节点只要一方主动建立连接就可以了，另一方会自动获得这个连接关系的，效果一样的 先查看节点1的enode信息，作为节点2 admin.addPeer()方法的参数 节点1的console: 节点2的console: 再看节点1的console: 再用remix连接一下我们的节点2吧 windows多个节点的私链就是这样了 3.linux创建节点并和windows节点建立连接 下载文件并上传服务器解压：https://geth.ethereum.org/downloads/ 注意你的linux是多少位的就下载多少位的二进制文件，我的是32位的，我就下载32位的 然后把geth复制到/usr/bin目录下面，我们就可以使用geth命令了，geth help，出现下的界面，表示成功。 网上其它的文章都是先安装go语言，再下载geth源码编译安装，最终的效果都是一样的。 然后执行初始化区块的命令： geth --datadir nodedata2 init first.json命令跟在windows差不多，自动生成的nodedata2文件夹也是一样的 启动节点，步骤跟在windous一样 geth --rpc --rpcport 8545 --rpcaddr 65.49.132.28 --nodiscover --datadir&nbsp; &quot;/root/privatechain/nodedata2&quot;&nbsp; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console 命令多了一个： --rpcaddr 65.49.132.28 这个ip是linux服务器的地址，如果我们在windows本地想要访问服务器的私链，这个参数得加上 已经启动，我们可以在命令行窗口执行一些geth的命令 windows电脑上的remix访问一下linux的私链： 一个账户，地址也是一样的，it works。 额外操作：把启动命令保存为linux可运行文件，方便以后启动： linux的私链运行成功了，接下来我们让window的节点和linux的节点连接起来(因为网络原因没实现，只有思路) windows上已经有两个节点了，现在我们的linux要访问这两个节点，所以这两个节点的启动命令得加上--rpcaddr这个参数，但是这部分实现不了了，因为自己电脑连接的是路由器，直接用公网ip+端口号访问不到自己的电脑，要在路由器上做端口映射才能让服务器访问到自己的电脑，我没有路由器的登录权限，所以做不了了 1.端口映射方法：http://service.tp-link.com.cn/detail_article_2441.html 2.节点建立连接方法应该跟windous连接点相连方法是一样的，关键是节点启动的时候加上--rpcaddr参数 3.祝好运！ 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/07/12/3f420495b566107b4e30f083f8529a4f.html" />
<meta property="og:url" content="https://mlh.app/2018/07/12/3f420495b566107b4e30f083f8529a4f.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-12T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"网上关于如何搭建私链的文章很多，但是看来看去都是一样的，千篇一律，想找点不一样，新鲜的知识很难，本文总结归纳那些文章的内容，从使用私链的角度出发写了一篇比较全面的博客，内容包含以下几点： windows单节点 windows多节点 linux创建节点并，windows远程使用linux节点 linux节点和Windows节点建立连接（网络原因，提供思路） 1.windows单节点 安装geth 下载地址：https://geth.ethereum.org/downloads/，下载之后是个 .exe文件，然后安装就好了，安装之后把geth的安装目录加入到系统环境变量的path里。验证是否安装成功，打开cmd窗口，输入 geth version 如果出来下面的内容，表示安装好了。（如果不加任何任何参数直接运行&nbsp;geth&nbsp;，会自动连接到以太坊公网，此时会开始同步区块） 初始化创世区块 新建个空文件夹，比如 然后在里面创建个first.json文件，文件名随意自己定吧，里面的内容如下： { &quot;config&quot;: { &quot;chainId&quot;: 10, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;alloc&quot; : {}, &quot;coinbase&quot; : &quot;0x0000000000000000000000000000000000000000&quot;, &quot;difficulty&quot; : &quot;0x20000&quot;, &quot;extraData&quot; : &quot;&quot;, &quot;gasLimit&quot; : &quot;0x2fefd8&quot;, &quot;nonce&quot; : &quot;0x0000000000000042&quot;, &quot;mixhash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;parentHash&quot; : &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;timestamp&quot; : &quot;0x00&quot; } 然后打开cmd窗口，跳转到当前目录下执行命令： geth --datadir .\\nodedata0 init first.json 上面的命令的主体是 geth init，表示初始化区块链，命令可以带有选项和参数，其中–datadir选项后面跟一个目录名，这里为nodedata0，表示指定数据存放目录为 nodedata0， first.json是init命令的参数，就是刚才创建的json文件 出现Successfully表示初始化成功了（把这行命令保存为一个.cmd命令备用），这时候你会发现，你的目录下面自动生成了一个nodedata0的文件夹，目录如下： 其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。 启动节点 执行命令： geth --rpc --nodiscover --datadir&nbsp; &quot;./nodedata0&quot;&nbsp; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console 2&gt;&gt;geth.log参数说明 --nodiscover 关闭p2p网络的自动发现，需要手动添加节点，这样有利于我们隐藏私有网络 --rpc 启用ipc服务，默认端口号8545 --datadir 区块链数据存储目录 --port 网络监听端口，默认30303 --rpcapi 表示可以通过ipc调用的对象 --rpccorsdomain 指定可以访问APi的domain地址，设置为“*”则任何地址都可以访问，这样做不安全 --networkid 网络标识，私有链取一个大于4的随意的值 console 打开一个可交互的javascript环境 2&gt;&gt;geth.log 把geth中的log信息导入geth.log，也可以不加这个，把信息直接输出在console里，这样直观 更多参数：https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options http://www.yaozihao.cn/2017/07/07/geth%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E4%BB%8B%E7%BB%8D/ 出现javascript console说明节点启动成功了，geth.log文件也生成了 把这启动命令也保存start0.cmd命令，以后再启动这个节点直接双击这个cmd就行了 节点相关基本操作 查看账户 这时候是没有账户的 创建账户 personal.newAccount() Passphrase是输入密码，下面的repeat passphrase是重复密码，创建的账户地址是： 0x8b2bd44cec6caedcc0664f965d895a17db326e0a 这是我们会看到nodedata0文件夹下面的keystore下面会多出个文件，就是保存账户信息 再查看账户列表，发现有账户了 如果你记不清楚personal有哪些方法，可以执行personal命令查看一下，其它的eth，miner也一样 启动挖矿 miner.start() 看到null，不要慌，因为你的日志信息都保存到了geth.log文件里了，下面这小图标代表啥自己领会哈 挖了半天，到底挖了几个区块了？赚了多少以太币了？看下面的查询余额和查看区块数 另外说明一点，节点挖矿的以太币会自动存入到eth.coinbase账户里，默认是eth.accounts里的第一个，你也可以自己指定coinbase 停止挖矿 miner.stop() 查看账户余额 eth.getBalance eth.accounts[0]得到的是账户地址而已，你可能被这么大的数值吓一跳，怎么这么多以太币？一个以太币等于10的18次方个wei，这里的数值是wei的个数，显示以太币的个数，可以用下面的命令，405个以太币，如果是真的，简直不要太爽，以太坊创始人V神以前肯定也在家里这么偷偷的挖了不少 查看区块数 eth.blockNumber 81个区块，一个区块奖励5个以太币 指定coinbase账户 先创建第二个账户，然后把第二个账户指定为coinbase，修改之前和修改之后已经改变 转账 先创建第三个没有币的账户，从账户1转5个比特币到账户3里，有的同学会问，不是有个账户2吗，你怎么不用呢？因为转账发起了交易，然而发起交易仅仅是发起交易，交易要被确认需要打包进区块里，挖矿就是做这个的，挖矿本身的收益会存进coinbase账户里，而现在coinbase账户是账户2，所以不考虑账户2 再查看coinbase账户2的余额，不仅挖矿奖励，连交易费都收了哦 退出 exit 验证私链 写了这么多，一顿操作猛如虎，这个私链到底能不能用？ 我们用remix验证一样，连接这个私链 账户和余额信息会显示出来，如果你的工具找不到你的私链，请确认启动节点的参数中，有没有设置&nbsp;--rpccorsdomain &quot;*&quot;&nbsp; 单节点就写到这里，下面是多节点的内容 2.windows多节点 我们在上面已经创建了一个节点了，下面我们直接创建第二个节点，然后连接两个节点，第二个节点的创建要满足下面条件 创世区块的信息得一样 就是要用一样的.json配置文件初始化，因为区块链的本质就是所有节点记录的账本都是一样的，所以第一个区块的数据也得一致 rpcport 和 port参数必须和第一个不同 节点1 启动的命令没有这个参数rpcport，默认的值是8545，我们就用9545吧，port用30306 初始化创世区块 geth --datadir .\\nodedata1 init first.json 自动创建了存放节点数据的文件夹nodedata1 启动节点 geth --rpc --rpcport 9545 --nodiscover --datadir&nbsp; &quot;./nodedata1&quot;&nbsp; --port 30306 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console nodiscover，ipcdisable，这两个参数很关键，windows没有ipcdisable参数，第二个节点启动会报错的。nodiscover让节点2不会被节点1自动扫描到。 节点1和节点2建立连接 我们用节点2主动添加节点1，两个节点只要一方主动建立连接就可以了，另一方会自动获得这个连接关系的，效果一样的 先查看节点1的enode信息，作为节点2 admin.addPeer()方法的参数 节点1的console: 节点2的console: 再看节点1的console: 再用remix连接一下我们的节点2吧 windows多个节点的私链就是这样了 3.linux创建节点并和windows节点建立连接 下载文件并上传服务器解压：https://geth.ethereum.org/downloads/ 注意你的linux是多少位的就下载多少位的二进制文件，我的是32位的，我就下载32位的 然后把geth复制到/usr/bin目录下面，我们就可以使用geth命令了，geth help，出现下的界面，表示成功。 网上其它的文章都是先安装go语言，再下载geth源码编译安装，最终的效果都是一样的。 然后执行初始化区块的命令： geth --datadir nodedata2 init first.json命令跟在windows差不多，自动生成的nodedata2文件夹也是一样的 启动节点，步骤跟在windous一样 geth --rpc --rpcport 8545 --rpcaddr 65.49.132.28 --nodiscover --datadir&nbsp; &quot;/root/privatechain/nodedata2&quot;&nbsp; --port 30303 --rpcapi &quot;db,eth,net,web3&quot; --rpccorsdomain &quot;*&quot; --networkid 1001 --ipcdisable console 命令多了一个： --rpcaddr 65.49.132.28 这个ip是linux服务器的地址，如果我们在windows本地想要访问服务器的私链，这个参数得加上 已经启动，我们可以在命令行窗口执行一些geth的命令 windows电脑上的remix访问一下linux的私链： 一个账户，地址也是一样的，it works。 额外操作：把启动命令保存为linux可运行文件，方便以后启动： linux的私链运行成功了，接下来我们让window的节点和linux的节点连接起来(因为网络原因没实现，只有思路) windows上已经有两个节点了，现在我们的linux要访问这两个节点，所以这两个节点的启动命令得加上--rpcaddr这个参数，但是这部分实现不了了，因为自己电脑连接的是路由器，直接用公网ip+端口号访问不到自己的电脑，要在路由器上做端口映射才能让服务器访问到自己的电脑，我没有路由器的登录权限，所以做不了了 1.端口映射方法：http://service.tp-link.com.cn/detail_article_2441.html 2.节点建立连接方法应该跟windous连接点相连方法是一样的，关键是节点启动的时候加上--rpcaddr参数 3.祝好运！ 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/07/12/3f420495b566107b4e30f083f8529a4f.html","headline":"搭建以太坊私链(单节点，多节点，windows，linux)","dateModified":"2018-07-12T00:00:00+08:00","datePublished":"2018-07-12T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/07/12/3f420495b566107b4e30f083f8529a4f.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>搭建以太坊私链(单节点，多节点，windows，linux)</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h2></h2>
  <h1></h1>
  <h2><span style="font-size:16px;">网上关于如何搭建私链的文章很多，但是看来看去都是一样的，千篇一律，想找点不一样，新鲜的知识很难，本文总结归纳那些文章的内容，从使用私链的角度出发写了一篇比较全面的博客，内容包含以下几点：</span></h2>
  <ul>
   <li>windows单节点</li>
   <li>windows多节点</li>
   <li>linux创建节点并，windows远程使用linux节点</li>
   <li>linux节点和Windows节点建立连接（网络原因，提供思路）</li>
  </ul>
  <h1><span style="font-size:24px;"><strong>1.windows单节点</strong></span></h1>
  <h2><strong><span style="font-size:18px;">安装geth</span></strong></h2>
  <p><span style="font-weight:normal;">下载地址：<a href="https://geth.ethereum.org/downloads/" rel="nofollow" style="font-size:16px;">https://geth.ethereum.org/downloads/</a>，下载之后是个 .exe文件，然后安装就好了，安装之后把geth的安装目录加入到系统环境变量的path里。验证是否安装成功，打开cmd窗口，输入 geth version 如果出来下面的内容，表示安装好了。（<span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">如果不加任何任何参数直接运行&nbsp;</span><code style="color:rgb(51,51,51);background-color:rgb(255,255,255);">geth</code><span style="color:rgb(51,51,51);font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(255,255,255);">&nbsp;，会自动连接到以太坊公网，此时会开始同步区块</span>）</span></p>
  <p><span style="font-size:16px;font-weight:normal;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712162655123?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <h2><strong><span style="font-size:18px;">初始化创世区块</span></strong></h2>
  <p>新建个空文件夹，比如</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712163337442?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>然后在里面创建个first.json文件，文件名随意自己定吧，里面的内容如下：</p>
  <pre><code class="language-plain">{
  "config": {
        "chainId": 10, 
        "homesteadBlock": 0,
        "eip155Block": 0,
        "eip158Block": 0
    },
  "alloc"      : {},
  "coinbase"   : "0x0000000000000000000000000000000000000000",
  "difficulty" : "0x20000",
  "extraData"  : "",
  "gasLimit"   : "0x2fefd8",
  "nonce"      : "0x0000000000000042",
  "mixhash"    : "0x0000000000000000000000000000000000000000000000000000000000000000",
  "parentHash" : "0x0000000000000000000000000000000000000000000000000000000000000000",
  "timestamp"  : "0x00"
}</code></pre>
  <p>然后打开cmd窗口，跳转到当前目录下执行命令：</p>
  <pre><code class="language-plain">geth --datadir .\nodedata0 init first.json</code></pre>
  <p>上面的命令的主体是 geth init，表示初始化区块链，命令可以带有选项和参数，其中–datadir选项后面跟一个目录名，这里为nodedata0，表示指定数据存放目录为 nodedata0， first.json是init命令的参数，就是刚才创建的json文件</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712164358392?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>出现Successfully表示初始化成功了（把这行命令保存为一个.cmd命令备用），这时候你会发现，你的目录下面自动生成了一个nodedata0的文件夹，目录如下：</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712164702549?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712164824971?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712164839265?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>其中geth/chaindata中存放的是区块数据，keystore中存放的是账户数据。<br></p>
  <h2><strong><span style="font-size:18px;">启动节点</span></strong></h2>
  <p><span style="font-size:14px;">执行命令：</span></p>
  <pre><code class="language-plain">geth --rpc --nodiscover --datadir&nbsp; "./nodedata0"&nbsp; --port 30303 --rpcapi "db,eth,net,web3" --rpccorsdomain "*" --networkid 1001 --ipcdisable console 2&gt;&gt;geth.log</code></pre>参数说明
  <br>
  <pre><code class="language-plain">--nodiscover 关闭p2p网络的自动发现，需要手动添加节点，这样有利于我们隐藏私有网络
--rpc 启用ipc服务，默认端口号8545
--datadir 区块链数据存储目录
--port 网络监听端口，默认30303
--rpcapi 表示可以通过ipc调用的对象
--rpccorsdomain 指定可以访问APi的domain地址，设置为“*”则任何地址都可以访问，这样做不安全
--networkid 网络标识，私有链取一个大于4的随意的值
console 打开一个可交互的javascript环境
2&gt;&gt;geth.log 把geth中的log信息导入geth.log，也可以不加这个，把信息直接输出在console里，这样直观
更多参数：https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options
http://www.yaozihao.cn/2017/07/07/geth%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E4%BB%8B%E7%BB%8D/
</code></pre>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713154013775?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><span style="font-size:14px;">出现javascript console说明节点启动成功了，geth.log文件也生成了</span></p>
  <p><span style="font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/201807121733491?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <p><span style="font-size:14px;">把这启动命令也保存start0.cmd命令，以后再启动这个节点直接双击这个cmd就行了</span></p>
  <h2><strong><span style="font-size:16px;">节点相关基本操作</span></strong></h2>
  <p></p>
  <ul>
   <li><strong>查看账户</strong></li>
  </ul>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712174340288?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
  <p>这时候是没有账户的</p>
  <ul>
   <li><strong>创建账户</strong></li>
  </ul>personal.newAccount()
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712173928764?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>Passphrase是输入密码，下面的repeat passphrase是重复密码，创建的账户地址是：</p>
  <p>0x8b2bd44cec6caedcc0664f965d895a17db326e0a</p>
  <p>这是我们会看到nodedata0文件夹下面的keystore下面会多出个文件，就是保存账户信息</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712174234123?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>再查看账户列表，发现有账户了</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712175740347?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><span style="color:#ff6666;">如果你记不清楚personal有哪些方法，可以执行personal命令查看一下，其它的eth，miner也一样</span></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712174511189?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p></p>
  <ul>
   <li><strong>启动挖矿</strong></li>
  </ul>
  <p>miner.start()</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712175045482?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>看到null，不要慌，因为你的日志信息都保存到了geth.log文件里了，下面这小图标代表啥自己领会哈</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712175213657?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>挖了半天，到底挖了几个区块了？赚了多少以太币了？看下面的查询余额和查看区块数</p>
  <p><span style="color:#ff6666;">另外说明一点，节点挖矿的以太币会自动存入到eth.coinbase账户里，默认是eth.accounts里的第一个，你也可以自己指定coinbase</span></p>
  <ul>
   <li><strong>停止挖矿</strong></li>
  </ul>miner.stop()
  <br>
  <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712175433818?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="">
  <br>
  <ul>
   <li><strong>查看账户余额</strong></li>
  </ul>
  <p>eth.getBalance</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712180311148?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
  <p>eth.accounts[0]得到的是账户地址而已，你可能被这么大的数值吓一跳，怎么这么多以太币？一个以太币等于10的18次方个wei，这里的数值是wei的个数，显示以太币的个数，可以用下面的命令，405个以太币，如果是真的，简直不要太爽，<del>以太坊创始人V神以前肯定也在家里这么偷偷的挖了不少</del><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712180812562?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <ul>
   <li><strong>查看区块数</strong></li>
  </ul>eth.blockNumber
  <br>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/2018071218172283?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
  <p>81个区块，一个区块奖励5个以太币</p>
  <ul>
   <li><strong>指定coinbase账户</strong></li>
  </ul>
  <p>先创建第二个账户，然后把第二个账户指定为coinbase，修改之前和修改之后已经改变</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712182119289?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <ul>
   <li><strong>转账</strong></li>
  </ul>
  <p>先创建第三个没有币的账户，从账户1转5个比特币到账户3里，有的同学会问，不是有个账户2吗，你怎么不用呢？因为转账发起了交易，然而发起交易仅仅是发起交易，交易要被确认需要打包进区块里，挖矿就是做这个的，挖矿本身的收益会存进coinbase账户里，而现在coinbase账户是账户2，所以不考虑账户2</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/2018071218391793?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>再查看coinbase账户2的余额，不仅挖矿奖励，连交易费都收了哦</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180712184031607?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <ul>
   <li><strong>退出</strong></li>
  </ul>
  <p><strong>exit</strong></p>
  <p><strong><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713092637323?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></strong></p>
  <h2><strong>验证私链</strong></h2>
  <p>写了这么多，一顿操作猛如虎，这个私链到底能不能用？</p>
  <p>我们用remix验证一样，连接这个私链</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713093027204?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/201807130930488?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713093117458?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/2018071310180268?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>账户和余额信息会显示出来，<span style="color:#ff9966;">如果你的工具找不到你的私链，请确认启动节点的参数中，有没有设置&nbsp;--rpccorsdomain "*"</span>&nbsp;</p>
  <p>单节点就写到这里，下面是多节点的内容</p>
  <p></p>
  <h1><span style="font-size:24px;">2.windows多节点</span></h1>
  <p>我们在上面已经创建了一个节点了，下面我们直接创建第二个节点，然后连接两个节点，第二个节点的创建要满足下面条件</p>
  <p></p>
  <ul>
   <li>创世区块的信息得一样</li>
  </ul>就是要用一样的.json配置文件初始化，因为区块链的本质就是所有节点记录的账本都是一样的，所以第一个区块的数据也得一致
  <br>
  <ul>
   <li>rpcport 和 port参数必须和第一个不同<br></li>
  </ul>
  <p>节点1 启动的命令没有这个参数rpcport，默认的值是8545，我们就用9545吧，port用30306</p>
  <p></p>
  <h2><span style="font-size:18px;">初始化创世区块</span></h2>
  <pre><code class="language-plain">geth --datadir .\nodedata1 init first.json</code></pre>
  <p>自动创建了存放节点数据的文件夹nodedata1</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713150705383?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713150717779?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p></p>
  <h2><span style="font-size:18px;">启动节点</span></h2>
  <pre><code class="language-plain">geth --rpc --rpcport 9545 --nodiscover --datadir&nbsp; "./nodedata1"&nbsp; --port 30306 --rpcapi "db,eth,net,web3" --rpccorsdomain "*" --networkid 1001 --ipcdisable console</code></pre>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713164201720?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>nodiscover，ipcdisable，这两个参数很关键，windows没有ipcdisable参数，第二个节点启动会报错的。nodiscover让节点2不会被节点1自动扫描到。</p>
  <p><strong><span style="font-size:16px;">节点1和节点2建立连接</span></strong></p>
  <p><span style="font-size:14px;">我们用节点2主动添加节点1，两个节点只要一方主动建立连接就可以了，另一方会自动获得这个连接关系的，效果一样的</span></p>
  <p><span style="font-size:14px;">先查看节点1的enode信息，作为节点2 admin.addPeer()方法的参数</span></p>
  <p><span style="font-size:14px;"><strong>节点1的console:</strong></span></p>
  <p><span style="font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713165427324?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <p><strong><span style="font-size:16px;">节点2的console:</span></strong></p>
  <p><span style="font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713170002921?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <p><strong><span style="font-size:16px;">再看节点1的console:</span></strong></p>
  <p><span style="font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713170219629?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <p><span style="font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713170731518?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <p><span style="font-size:14px;">再用remix连接一下我们的节点2吧</span></p>
  <p><span style="font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713170417726?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <p><span style="font-size:14px;"><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180713170457940?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p>
  <p><span style="font-size:14px;">windows多个节点的私链就是这样了</span></p>
  <h2><span style="font-size:18px;">3.linux创建节点并和windows节点建立连接</span></h2>
  <div>
   <span style="font-size:16px;">下载文件并上传服务器解压：<a href="https://geth.ethereum.org/downloads/" rel="nofollow">https://geth.ethereum.org/downloads/</a></span>
  </div>
  <div>
   <span style="color:#ff9966;">注意你的linux是多少位的就下载多少位的二进制文件，我的是32位的，我就下载32位的</span>
  </div>
  <div>
   <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716095959548?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="">
   <br>
  </div>
  <div>
   <img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716100036228?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="">
   <br>
  </div>
  <div>
   然后把geth复制到/usr/bin目录下面，我们就可以使用geth命令了，geth help，出现下的界面，表示成功。
  </div>
  <p><span style="color:#ff9966;">网上其它的文章都是先安装go语言，再下载geth源码编译安装，最终的效果都是一样的。</span></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716100813631?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716102513925?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>然后执行初始化区块的命令：</p>
  <pre><code class="language-plain">geth --datadir nodedata2 init first.json</code></pre>命令跟在windows差不多，自动生成的nodedata2文件夹也是一样的
  <br>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716102847321?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>启动节点，步骤跟在windous一样</p>
  <pre><code class="language-plain">geth --rpc --rpcport 8545 --rpcaddr 65.49.132.28 --nodiscover --datadir&nbsp; "/root/privatechain/nodedata2"&nbsp; --port 30303 --rpcapi "db,eth,net,web3" --rpccorsdomain "*" --networkid 1001 --ipcdisable console</code></pre>
  <p>命令多了一个：</p>
  <p>--rpcaddr 65.49.132.28</p>
  <p><span style="color:#ff9966;">这个ip是linux服务器的地址，如果我们在windows本地想要访问服务器的私链，这个参数得加上</span></p>
  <p>已经启动，我们可以在命令行窗口执行一些geth的命令</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716150719782?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>windows电脑上的remix访问一下linux的私链：</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716104310179?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716150855592?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p>一个账户，地址也是一样的，it works。</p>
  <p><strong>额外操作：把启动命令保存为linux可运行文件，方便以后启动</strong>：</p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716151147770?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180716151622787?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhbnRhbmdkdWhleQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p>
  <p><strong><span style="font-size:16px;">linux的私链运行成功了，接下来我们让window的节点和linux的节点连接起来(<span style="color:#ff9966;">因为网络原因没实现，只有思路</span>)</span></strong></p>
  <p>windows上已经有两个节点了，现在我们的linux要访问这两个节点，所以这两个节点的启动命令得加上--rpcaddr这个参数，但是<span style="color:#ff9966;">这部分实现不了了，因为自己电脑连接的是路由器，直接用公网ip+端口号访问不到自己的电脑，要在路由器上做端口映射才能让服务器访问到自己的电脑，我没有路由器的登录权限，所以做不了了</span></p>
  <p>1.端口映射方法：<a href="http://service.tp-link.com.cn/detail_article_2441.html" rel="nofollow">http://service.tp-link.com.cn/detail_article_2441.html</a></p>
  <p><span style="color:#ff9966;">2.节点建立连接方法应该跟windous连接点相连方法是一样的，关键是节点启动的时候加上--rpcaddr参数</span></p>
  <p><span style="color:#ff9966;">3.祝好运！</span></p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/hantangduhey/article/details/81017602,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/hantangduhey/article/details/81017602,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
