<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>以太坊学习3–私链的部署使用 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="以太坊学习3–私链的部署使用" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="导语： 主链和测试链同步速度太慢了，所以说初次学习最好在自己的电脑上搭建私链去学习它的基本用法。以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，配置自己的创世块是为了区分公有链，同一个网络中，创世块必须是一样的，否则无法联通。在D:\blockchain目录下放置初始化创世块文件名字为genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 123456, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;nonce&quot;: &quot;0x0000000000000042&quot;, &quot;difficulty&quot;: &quot;0x020000&quot;, &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa&quot;, &quot;gasLimit&quot;: &quot;0x4c4b40&quot;, &quot;alloc&quot;: {} } 个别参数说明： difficulty：挖矿难度 gasLimit：每块的最大数量 &nbsp; 进入D:\blockchain目录，新建一个data文件夹，不创建也可以，不创建的话下面的datadir参数后面跟的就是”./”，这里是将新生成的文件都放到data目录下方便管理。 &nbsp; 初始化： geth --datadir data init genesis.json 个别参数说明： init：表示初始化区块，后面跟着创世块的配置文件genesis.json datadir：数据存放的位置 &nbsp; 启动节点： geth --datadir data --networkid 123456 --rpc --rpccorsdomain &quot;*&quot; --nodiscover console 个别参数说明： network：设置当前区块链的网络ID，用于区分不同的网络，1表示公链 rpc：表示启动rpc通信，可以进行智能合约的部署和调试 nodiscover：别人不能发现连接你 console：表示启动命令行模式，可以在Geth中执行命令 也可以指定端口号启动： geth --datadir D:\blockchain\30304 --port 30304 --ipcpath &quot;D:\blockchain\30304\geth.ipc&quot; D:\blockchain\30304：代表指定的存储目录。需要注意的时，每次运行geth命令都需要指定目录，否则geth会调用默认的C盘目录。 –port 30304：代表指定的端口，默认是30303端口。 –ipcpath “D:\blockchain\30304\geth.ipc”：代表指定的IPC，默认的是\geth.ipc。 通过以上的命令，可以实现一台主机开启多个geth。 &nbsp; 创建新账号： &gt; personal.newAccount() Passphrase: Repeat passphrase: &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot; 或者 &gt; personal.newAccount(&quot;123456&quot;) &quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot; 注：括号里的是账户密码，这个一定要记住，下面解锁账号的时候会用到 &nbsp; 查看节点信息： &gt; admin.nodeInfo { enode: &quot;enode://9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8@[::]:30303?discport=0&quot;, id: &quot;9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:30303&quot;, name: &quot;Geth/v1.8.11-stable-dea1ce05/windows-amd64/go1.10.2&quot;, ports: { discovery: 0, listener: 30303 }, protocols: { eth: { config: { chainId: 123456, eip150Hash: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, eip155Block: 0, eip158Block: 0, homesteadBlock: 0 }, difficulty: 131072, genesis: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, head: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, network: 123456 } } } &nbsp; 查看账户余额： &gt; eth.getBalance(eth.accounts[0]) 0 或者 web3.fromWei(eth.getBalance(eth.accounts[0]), &quot;ether&quot;) &nbsp; 查看当前矿工账号（挖矿所得会到这个账号里，默认为第一个账户）： &gt; eth.coinbase &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot; &nbsp; 挖矿： 开始挖矿 miner.start(1) &gt; miner.start(1) INFO [07-01|15:26:22] Updated mining threads threads=1 INFO [07-01|15:26:22] Transaction pool price threshold updated price=18000000000 INFO [07-01|15:26:22] Starting mining operation INFO [07-01|15:26:22] Commit new mining work number=1 txs=0 uncles=0 elapsed=0s INFO [07-01|15:26:24] Successfully sealed new block number=1 hash=9ed59f…01cb1c INFO [07-01|15:26:24] �� mined potential block number=1 hash=9ed59f…01cb1c INFO [07-01|15:26:24] Commit new mining work number=2 txs=0 uncles=0 elapsed=0s INFO [07-01|15:26:28] Successfully sealed new block number=2 hash=1f7e1c…03cd35 说明：括号里的1的意思就是用1个CPU的内核去挖矿 停止挖矿 miner.stop() &nbsp; 修改矿工账号： miner.setEtherbase(eth.accounts[1]) &nbsp; 查看账户信息： eth.accounts[0] &nbsp; 转账： eth.sendTransaction({from:eth.accounts[0],to:&quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot;,value:web3.toWei(1,&quot;ether&quot;)}) 或者 eth.sendTransaction({from:eth.accounts[0],to:eth.accounts[1],value:web3.toWei(1,&quot;ether&quot;)}) 说明：web3.toWei(1,”ether”)方法为单位转换，就是把1eth转换为多少为 可能会报错： Error: authentication needed: password or unlock at web3.js:3143:20 at web3.js:6347:15 at web3.js:5081:36 at &lt;anonymous&gt;:1:1 解决：解锁账号，使用账户资金前都需要先解锁账号 &gt; personal.unlockAccount(eth.accounts[0]) Unlock account 0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b Passphrase: true &nbsp; 再执行转账命令： &gt; eth.sendTransaction({from:eth.accounts[0],to:&quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot;,value:web3.toWei(1,&quot;ether&quot;)}) INFO [07-01|15:40:18] Submitted transaction fullhash=0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54 recipient=0xEdf21069693886B60f56A51dAE075e7385e4b959 &quot;0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54&quot; 注：执行完转账命令后这笔交易还并没有成功，需要等待别人挖矿去把这笔交易记录下来 &nbsp; 查看交易状态： &gt; txpool.status { pending: 1, queued: 0 } &nbsp; 查看两个账户的余额是没有变化的： &gt; eth.getBalance(eth.accounts[0]) 595000000000000000000 &gt; eth.getBalance(eth.accounts[1]) 0 &nbsp; 我们再启动挖矿：miner.start(2) 当挖到矿再查看交易状态的时候pending已经为0说明交易成功了，这时候我们就可以停止挖矿了： &gt; txpool.status { pending: 0, queued: 0 } miner.stop() &nbsp; 我们再查两个账户的余额会有变化： &gt; eth.getBalance(eth.accounts[0]) 914000000000000000000 注：余额会比一开始的还要大是因为刚才又执行了挖矿，则挖矿所得又会给这个账户 &gt; eth.getBalance(eth.accounts[1]) 1000000000000000000 &nbsp; 查看区块数据： &gt; eth.blockNumber 183 &nbsp; 通过区块号查看区块： &gt; eth.getBlock(1) { difficulty: 131072, extraData: &quot;0xda8301080b846765746888676f312e31302e328777696e646f7773&quot;, gasLimit: 4995119, gasUsed: 0, hash: &quot;0x9ed59f854b3eb22be71c94a8260b7bc643f556db947ae2ce4ba267eaf501cb1c&quot;, logsBloom: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;, miner: &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot;, mixHash: &quot;0xb6114b20b28de686952d2775f2ca534d978b1ec926812505fa671bbd25ba9f69&quot;, nonce: &quot;0x4745c6e4eb5bc837&quot;, number: 1, parentHash: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, receiptsRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;, sha3Uncles: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;, size: 538, stateRoot: &quot;0x68dadec0e6352f2f1819a462d6b734caa0415c029d764a8904931aadb6919ccf&quot;, timestamp: 1530429982, totalDifficulty: 262144, transactions: [], transactionsRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;, uncles: [] } 注：我们主要还是在测试链上开发测试，因为私链上一些数据还不是很全，不完整，所以最好还是在测试链上开发，在主链上进行生产部署 阅读更多" />
<meta property="og:description" content="导语： 主链和测试链同步速度太慢了，所以说初次学习最好在自己的电脑上搭建私链去学习它的基本用法。以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，配置自己的创世块是为了区分公有链，同一个网络中，创世块必须是一样的，否则无法联通。在D:\blockchain目录下放置初始化创世块文件名字为genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 123456, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;nonce&quot;: &quot;0x0000000000000042&quot;, &quot;difficulty&quot;: &quot;0x020000&quot;, &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa&quot;, &quot;gasLimit&quot;: &quot;0x4c4b40&quot;, &quot;alloc&quot;: {} } 个别参数说明： difficulty：挖矿难度 gasLimit：每块的最大数量 &nbsp; 进入D:\blockchain目录，新建一个data文件夹，不创建也可以，不创建的话下面的datadir参数后面跟的就是”./”，这里是将新生成的文件都放到data目录下方便管理。 &nbsp; 初始化： geth --datadir data init genesis.json 个别参数说明： init：表示初始化区块，后面跟着创世块的配置文件genesis.json datadir：数据存放的位置 &nbsp; 启动节点： geth --datadir data --networkid 123456 --rpc --rpccorsdomain &quot;*&quot; --nodiscover console 个别参数说明： network：设置当前区块链的网络ID，用于区分不同的网络，1表示公链 rpc：表示启动rpc通信，可以进行智能合约的部署和调试 nodiscover：别人不能发现连接你 console：表示启动命令行模式，可以在Geth中执行命令 也可以指定端口号启动： geth --datadir D:\blockchain\30304 --port 30304 --ipcpath &quot;D:\blockchain\30304\geth.ipc&quot; D:\blockchain\30304：代表指定的存储目录。需要注意的时，每次运行geth命令都需要指定目录，否则geth会调用默认的C盘目录。 –port 30304：代表指定的端口，默认是30303端口。 –ipcpath “D:\blockchain\30304\geth.ipc”：代表指定的IPC，默认的是\geth.ipc。 通过以上的命令，可以实现一台主机开启多个geth。 &nbsp; 创建新账号： &gt; personal.newAccount() Passphrase: Repeat passphrase: &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot; 或者 &gt; personal.newAccount(&quot;123456&quot;) &quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot; 注：括号里的是账户密码，这个一定要记住，下面解锁账号的时候会用到 &nbsp; 查看节点信息： &gt; admin.nodeInfo { enode: &quot;enode://9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8@[::]:30303?discport=0&quot;, id: &quot;9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:30303&quot;, name: &quot;Geth/v1.8.11-stable-dea1ce05/windows-amd64/go1.10.2&quot;, ports: { discovery: 0, listener: 30303 }, protocols: { eth: { config: { chainId: 123456, eip150Hash: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, eip155Block: 0, eip158Block: 0, homesteadBlock: 0 }, difficulty: 131072, genesis: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, head: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, network: 123456 } } } &nbsp; 查看账户余额： &gt; eth.getBalance(eth.accounts[0]) 0 或者 web3.fromWei(eth.getBalance(eth.accounts[0]), &quot;ether&quot;) &nbsp; 查看当前矿工账号（挖矿所得会到这个账号里，默认为第一个账户）： &gt; eth.coinbase &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot; &nbsp; 挖矿： 开始挖矿 miner.start(1) &gt; miner.start(1) INFO [07-01|15:26:22] Updated mining threads threads=1 INFO [07-01|15:26:22] Transaction pool price threshold updated price=18000000000 INFO [07-01|15:26:22] Starting mining operation INFO [07-01|15:26:22] Commit new mining work number=1 txs=0 uncles=0 elapsed=0s INFO [07-01|15:26:24] Successfully sealed new block number=1 hash=9ed59f…01cb1c INFO [07-01|15:26:24] �� mined potential block number=1 hash=9ed59f…01cb1c INFO [07-01|15:26:24] Commit new mining work number=2 txs=0 uncles=0 elapsed=0s INFO [07-01|15:26:28] Successfully sealed new block number=2 hash=1f7e1c…03cd35 说明：括号里的1的意思就是用1个CPU的内核去挖矿 停止挖矿 miner.stop() &nbsp; 修改矿工账号： miner.setEtherbase(eth.accounts[1]) &nbsp; 查看账户信息： eth.accounts[0] &nbsp; 转账： eth.sendTransaction({from:eth.accounts[0],to:&quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot;,value:web3.toWei(1,&quot;ether&quot;)}) 或者 eth.sendTransaction({from:eth.accounts[0],to:eth.accounts[1],value:web3.toWei(1,&quot;ether&quot;)}) 说明：web3.toWei(1,”ether”)方法为单位转换，就是把1eth转换为多少为 可能会报错： Error: authentication needed: password or unlock at web3.js:3143:20 at web3.js:6347:15 at web3.js:5081:36 at &lt;anonymous&gt;:1:1 解决：解锁账号，使用账户资金前都需要先解锁账号 &gt; personal.unlockAccount(eth.accounts[0]) Unlock account 0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b Passphrase: true &nbsp; 再执行转账命令： &gt; eth.sendTransaction({from:eth.accounts[0],to:&quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot;,value:web3.toWei(1,&quot;ether&quot;)}) INFO [07-01|15:40:18] Submitted transaction fullhash=0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54 recipient=0xEdf21069693886B60f56A51dAE075e7385e4b959 &quot;0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54&quot; 注：执行完转账命令后这笔交易还并没有成功，需要等待别人挖矿去把这笔交易记录下来 &nbsp; 查看交易状态： &gt; txpool.status { pending: 1, queued: 0 } &nbsp; 查看两个账户的余额是没有变化的： &gt; eth.getBalance(eth.accounts[0]) 595000000000000000000 &gt; eth.getBalance(eth.accounts[1]) 0 &nbsp; 我们再启动挖矿：miner.start(2) 当挖到矿再查看交易状态的时候pending已经为0说明交易成功了，这时候我们就可以停止挖矿了： &gt; txpool.status { pending: 0, queued: 0 } miner.stop() &nbsp; 我们再查两个账户的余额会有变化： &gt; eth.getBalance(eth.accounts[0]) 914000000000000000000 注：余额会比一开始的还要大是因为刚才又执行了挖矿，则挖矿所得又会给这个账户 &gt; eth.getBalance(eth.accounts[1]) 1000000000000000000 &nbsp; 查看区块数据： &gt; eth.blockNumber 183 &nbsp; 通过区块号查看区块： &gt; eth.getBlock(1) { difficulty: 131072, extraData: &quot;0xda8301080b846765746888676f312e31302e328777696e646f7773&quot;, gasLimit: 4995119, gasUsed: 0, hash: &quot;0x9ed59f854b3eb22be71c94a8260b7bc643f556db947ae2ce4ba267eaf501cb1c&quot;, logsBloom: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;, miner: &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot;, mixHash: &quot;0xb6114b20b28de686952d2775f2ca534d978b1ec926812505fa671bbd25ba9f69&quot;, nonce: &quot;0x4745c6e4eb5bc837&quot;, number: 1, parentHash: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, receiptsRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;, sha3Uncles: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;, size: 538, stateRoot: &quot;0x68dadec0e6352f2f1819a462d6b734caa0415c029d764a8904931aadb6919ccf&quot;, timestamp: 1530429982, totalDifficulty: 262144, transactions: [], transactionsRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;, uncles: [] } 注：我们主要还是在测试链上开发测试，因为私链上一些数据还不是很全，不完整，所以最好还是在测试链上开发，在主链上进行生产部署 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/07/15/e51ce2ed7afa4970cb3eb2a36c9132b2.html" />
<meta property="og:url" content="https://mlh.app/2018/07/15/e51ce2ed7afa4970cb3eb2a36c9132b2.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-15T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"导语： 主链和测试链同步速度太慢了，所以说初次学习最好在自己的电脑上搭建私链去学习它的基本用法。以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，配置自己的创世块是为了区分公有链，同一个网络中，创世块必须是一样的，否则无法联通。在D:\\blockchain目录下放置初始化创世块文件名字为genesis.json { &quot;config&quot;: { &quot;chainId&quot;: 123456, &quot;homesteadBlock&quot;: 0, &quot;eip155Block&quot;: 0, &quot;eip158Block&quot;: 0 }, &quot;nonce&quot;: &quot;0x0000000000000042&quot;, &quot;difficulty&quot;: &quot;0x020000&quot;, &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa&quot;, &quot;gasLimit&quot;: &quot;0x4c4b40&quot;, &quot;alloc&quot;: {} } 个别参数说明： difficulty：挖矿难度 gasLimit：每块的最大数量 &nbsp; 进入D:\\blockchain目录，新建一个data文件夹，不创建也可以，不创建的话下面的datadir参数后面跟的就是”./”，这里是将新生成的文件都放到data目录下方便管理。 &nbsp; 初始化： geth --datadir data init genesis.json 个别参数说明： init：表示初始化区块，后面跟着创世块的配置文件genesis.json datadir：数据存放的位置 &nbsp; 启动节点： geth --datadir data --networkid 123456 --rpc --rpccorsdomain &quot;*&quot; --nodiscover console 个别参数说明： network：设置当前区块链的网络ID，用于区分不同的网络，1表示公链 rpc：表示启动rpc通信，可以进行智能合约的部署和调试 nodiscover：别人不能发现连接你 console：表示启动命令行模式，可以在Geth中执行命令 也可以指定端口号启动： geth --datadir D:\\blockchain\\30304 --port 30304 --ipcpath &quot;D:\\blockchain\\30304\\geth.ipc&quot; D:\\blockchain\\30304：代表指定的存储目录。需要注意的时，每次运行geth命令都需要指定目录，否则geth会调用默认的C盘目录。 –port 30304：代表指定的端口，默认是30303端口。 –ipcpath “D:\\blockchain\\30304\\geth.ipc”：代表指定的IPC，默认的是\\geth.ipc。 通过以上的命令，可以实现一台主机开启多个geth。 &nbsp; 创建新账号： &gt; personal.newAccount() Passphrase: Repeat passphrase: &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot; 或者 &gt; personal.newAccount(&quot;123456&quot;) &quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot; 注：括号里的是账户密码，这个一定要记住，下面解锁账号的时候会用到 &nbsp; 查看节点信息： &gt; admin.nodeInfo { enode: &quot;enode://9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8@[::]:30303?discport=0&quot;, id: &quot;9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8&quot;, ip: &quot;::&quot;, listenAddr: &quot;[::]:30303&quot;, name: &quot;Geth/v1.8.11-stable-dea1ce05/windows-amd64/go1.10.2&quot;, ports: { discovery: 0, listener: 30303 }, protocols: { eth: { config: { chainId: 123456, eip150Hash: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, eip155Block: 0, eip158Block: 0, homesteadBlock: 0 }, difficulty: 131072, genesis: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, head: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, network: 123456 } } } &nbsp; 查看账户余额： &gt; eth.getBalance(eth.accounts[0]) 0 或者 web3.fromWei(eth.getBalance(eth.accounts[0]), &quot;ether&quot;) &nbsp; 查看当前矿工账号（挖矿所得会到这个账号里，默认为第一个账户）： &gt; eth.coinbase &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot; &nbsp; 挖矿： 开始挖矿 miner.start(1) &gt; miner.start(1) INFO [07-01|15:26:22] Updated mining threads threads=1 INFO [07-01|15:26:22] Transaction pool price threshold updated price=18000000000 INFO [07-01|15:26:22] Starting mining operation INFO [07-01|15:26:22] Commit new mining work number=1 txs=0 uncles=0 elapsed=0s INFO [07-01|15:26:24] Successfully sealed new block number=1 hash=9ed59f…01cb1c INFO [07-01|15:26:24] �� mined potential block number=1 hash=9ed59f…01cb1c INFO [07-01|15:26:24] Commit new mining work number=2 txs=0 uncles=0 elapsed=0s INFO [07-01|15:26:28] Successfully sealed new block number=2 hash=1f7e1c…03cd35 说明：括号里的1的意思就是用1个CPU的内核去挖矿 停止挖矿 miner.stop() &nbsp; 修改矿工账号： miner.setEtherbase(eth.accounts[1]) &nbsp; 查看账户信息： eth.accounts[0] &nbsp; 转账： eth.sendTransaction({from:eth.accounts[0],to:&quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot;,value:web3.toWei(1,&quot;ether&quot;)}) 或者 eth.sendTransaction({from:eth.accounts[0],to:eth.accounts[1],value:web3.toWei(1,&quot;ether&quot;)}) 说明：web3.toWei(1,”ether”)方法为单位转换，就是把1eth转换为多少为 可能会报错： Error: authentication needed: password or unlock at web3.js:3143:20 at web3.js:6347:15 at web3.js:5081:36 at &lt;anonymous&gt;:1:1 解决：解锁账号，使用账户资金前都需要先解锁账号 &gt; personal.unlockAccount(eth.accounts[0]) Unlock account 0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b Passphrase: true &nbsp; 再执行转账命令： &gt; eth.sendTransaction({from:eth.accounts[0],to:&quot;0xedf21069693886b60f56a51dae075e7385e4b959&quot;,value:web3.toWei(1,&quot;ether&quot;)}) INFO [07-01|15:40:18] Submitted transaction fullhash=0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54 recipient=0xEdf21069693886B60f56A51dAE075e7385e4b959 &quot;0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54&quot; 注：执行完转账命令后这笔交易还并没有成功，需要等待别人挖矿去把这笔交易记录下来 &nbsp; 查看交易状态： &gt; txpool.status { pending: 1, queued: 0 } &nbsp; 查看两个账户的余额是没有变化的： &gt; eth.getBalance(eth.accounts[0]) 595000000000000000000 &gt; eth.getBalance(eth.accounts[1]) 0 &nbsp; 我们再启动挖矿：miner.start(2) 当挖到矿再查看交易状态的时候pending已经为0说明交易成功了，这时候我们就可以停止挖矿了： &gt; txpool.status { pending: 0, queued: 0 } miner.stop() &nbsp; 我们再查两个账户的余额会有变化： &gt; eth.getBalance(eth.accounts[0]) 914000000000000000000 注：余额会比一开始的还要大是因为刚才又执行了挖矿，则挖矿所得又会给这个账户 &gt; eth.getBalance(eth.accounts[1]) 1000000000000000000 &nbsp; 查看区块数据： &gt; eth.blockNumber 183 &nbsp; 通过区块号查看区块： &gt; eth.getBlock(1) { difficulty: 131072, extraData: &quot;0xda8301080b846765746888676f312e31302e328777696e646f7773&quot;, gasLimit: 4995119, gasUsed: 0, hash: &quot;0x9ed59f854b3eb22be71c94a8260b7bc643f556db947ae2ce4ba267eaf501cb1c&quot;, logsBloom: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;, miner: &quot;0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b&quot;, mixHash: &quot;0xb6114b20b28de686952d2775f2ca534d978b1ec926812505fa671bbd25ba9f69&quot;, nonce: &quot;0x4745c6e4eb5bc837&quot;, number: 1, parentHash: &quot;0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04&quot;, receiptsRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;, sha3Uncles: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;, size: 538, stateRoot: &quot;0x68dadec0e6352f2f1819a462d6b734caa0415c029d764a8904931aadb6919ccf&quot;, timestamp: 1530429982, totalDifficulty: 262144, transactions: [], transactionsRoot: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;, uncles: [] } 注：我们主要还是在测试链上开发测试，因为私链上一些数据还不是很全，不完整，所以最好还是在测试链上开发，在主链上进行生产部署 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/07/15/e51ce2ed7afa4970cb3eb2a36c9132b2.html","headline":"以太坊学习3–私链的部署使用","dateModified":"2018-07-15T00:00:00+08:00","datePublished":"2018-07-15T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/07/15/e51ce2ed7afa4970cb3eb2a36c9132b2.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>以太坊学习3--私链的部署使用</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <h3 id="导语">导语：</h3> 
  <p>主链和测试链同步速度太慢了，所以说初次学习最好在自己的电脑上搭建私链去学习它的基本用法。以太坊支持自定义创世区块，要运行私有链，我们就需要定义自己的创世区块，配置自己的创世块是为了区分公有链，同一个网络中，创世块必须是一样的，否则无法联通。在D:\blockchain目录下放置初始化创世块文件名字为genesis.json</p> 
  <pre class="prettyprint"><code class=" hljs json">{
"<span class="hljs-attribute">config</span>": <span class="hljs-value">{ "<span class="hljs-attribute">chainId</span>": <span class="hljs-value"><span class="hljs-number">123456</span></span>, "<span class="hljs-attribute">homesteadBlock</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>, "<span class="hljs-attribute">eip155Block</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>, "<span class="hljs-attribute">eip158Block</span>": <span class="hljs-value"><span class="hljs-number">0</span> </span>}</span>,
"<span class="hljs-attribute">nonce</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000042"</span></span>,
"<span class="hljs-attribute">difficulty</span>": <span class="hljs-value"><span class="hljs-string">"0x020000"</span></span>,
"<span class="hljs-attribute">mixhash</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
"<span class="hljs-attribute">coinbase</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000"</span></span>,
"<span class="hljs-attribute">timestamp</span>": <span class="hljs-value"><span class="hljs-string">"0x00"</span></span>,
"<span class="hljs-attribute">parentHash</span>": <span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
"<span class="hljs-attribute">extraData</span>": <span class="hljs-value"><span class="hljs-string">"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"</span></span>,
"<span class="hljs-attribute">gasLimit</span>": <span class="hljs-value"><span class="hljs-string">"0x4c4b40"</span></span>,
"<span class="hljs-attribute">alloc</span>": <span class="hljs-value">{} </span>}</code></pre> 
  <p><font color="red">个别参数说明：</font> <br> <font color="green">difficulty：</font>挖矿难度 <br> <font color="green">gasLimit：</font>每块的最大数量 <br> &nbsp; <br> 进入D:\blockchain目录，新建一个data文件夹，不创建也可以，不创建的话下面的datadir参数后面跟的就是”./”，这里是将新生成的文件都放到data目录下方便管理。 <br> &nbsp;</p> 
  <h4 id="初始化">初始化：</h4> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-comment">data</span> <span class="hljs-comment">init</span> <span class="hljs-comment">genesis</span><span class="hljs-string">.</span><span class="hljs-comment">json</span></code></pre> 
  <p><font color="red">个别参数说明：</font> <br> <font color="green">init：</font>表示初始化区块，后面跟着创世块的配置文件genesis.json <br> <font color="green">datadir：</font>数据存放的位置 <br> &nbsp;</p> 
  <h4 id="启动节点">启动节点：</h4> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-comment">data</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">networkid</span> <span class="hljs-comment">123456</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpc</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">rpccorsdomain</span> <span class="hljs-comment">"*"</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">nodiscover</span> <span class="hljs-comment">console</span></code></pre> 
  <p><font color="red">个别参数说明：</font> <br> <font color="green">network：</font>设置当前区块链的网络ID，用于区分不同的网络，1表示公链 <br> <font color="green">rpc：</font>表示启动rpc通信，可以进行智能合约的部署和调试 <br> <font color="green">nodiscover：</font>别人不能发现连接你 <br> <font color="green">console：</font>表示启动命令行模式，可以在Geth中执行命令 <br> <font color="blue">也可以指定端口号启动：</font></p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">geth</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">datadir</span> <span class="hljs-comment">D:\blockchain\30304</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">port</span> <span class="hljs-comment">30304</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">ipcpath</span> <span class="hljs-comment">"D:\blockchain\30304\geth</span><span class="hljs-string">.</span><span class="hljs-comment">ipc"</span></code></pre> 
  <p><font color="green">D:\blockchain\30304：</font>代表指定的存储目录。需要注意的时，每次运行geth命令都需要指定目录，否则geth会调用默认的C盘目录。 <br> <font color="green">–port 30304：</font>代表指定的端口，默认是30303端口。 <br> <font color="green">–ipcpath “D:\blockchain\30304\geth.ipc”：</font>代表指定的IPC，默认的是\geth.ipc。 <br> 通过以上的命令，可以实现一台主机开启多个geth。 <br> &nbsp;</p> 
  <h4 id="创建新账号">创建新账号：</h4> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; personal<span class="hljs-preprocessor">.newAccount</span>()
<span class="hljs-label">Passphrase:</span>
Repeat passphrase:
<span class="hljs-string">"0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b"</span></code></pre> 
  <p>或者</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; personal<span class="hljs-preprocessor">.newAccount</span>(<span class="hljs-string">"123456"</span>)
<span class="hljs-string">"0xedf21069693886b60f56a51dae075e7385e4b959"</span></code></pre> 
  <p><font color="red">注：</font>括号里的是账户密码，这个一定要记住，下面解锁账号的时候会用到 <br> &nbsp;</p> 
  <h4 id="查看节点信息">查看节点信息：</h4> 
  <pre class="prettyprint"><code class=" hljs css">&gt; <span class="hljs-tag">admin</span><span class="hljs-class">.nodeInfo</span>
<span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">enode</span>:<span class="hljs-value"> <span class="hljs-string">"enode://9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8@[::]:30303?discport=0"</span>, id: <span class="hljs-string">"9e46c339f5862c129bb0349e568fa9d384e59deb6b947c289347b4aec900145832ef1756f1e880bbe3db1e30658d4a21ba2f23270e4aeec4985a7a624cedbbe8"</span>, ip: <span class="hljs-string">"::"</span>, listenAddr: <span class="hljs-string">"[::]:30303"</span>, name: <span class="hljs-string">"Geth/v1.8.11-stable-dea1ce05/windows-amd64/go1.10.2"</span>, ports: { discovery: <span class="hljs-number">0</span>, listener: <span class="hljs-number">30303</span> </span></span></span>},
  <span class="hljs-tag">protocols</span>: <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">eth</span>:<span class="hljs-value"> { config: { chainId: <span class="hljs-number">123456</span>, eip150Hash: <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>, eip155Block: <span class="hljs-number">0</span>, eip158Block: <span class="hljs-number">0</span>, homesteadBlock: <span class="hljs-number">0</span> </span></span></span>},
      <span class="hljs-tag">difficulty</span>: 131072,
      <span class="hljs-tag">genesis</span>: "0<span class="hljs-tag">x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04</span>",
      <span class="hljs-tag">head</span>: "0<span class="hljs-tag">x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04</span>",
      <span class="hljs-tag">network</span>: 123456
    }
  }
}</code></pre> 
  <p>&nbsp;</p> 
  <h4 id="查看账户余额">查看账户余额：</h4> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])
<span class="hljs-number">0</span></code></pre> 
  <p>或者</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">web3<span class="hljs-preprocessor">.fromWei</span>(eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>]), <span class="hljs-string">"ether"</span>)</code></pre> 
  <p>&nbsp;</p> 
  <h4 id="查看当前矿工账号挖矿所得会到这个账号里默认为第一个账户">查看当前矿工账号（挖矿所得会到这个账号里，默认为第一个账户）：</h4> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; eth<span class="hljs-preprocessor">.coinbase</span>
<span class="hljs-string">"0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b"</span></code></pre> 
  <p>&nbsp;</p> 
  <h4 id="挖矿">挖矿：</h4> 
  <p><font color="blue">开始挖矿 miner.start(1)</font></p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">&gt; miner.start(<span class="hljs-number">1</span>)
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">22</span>] Updated mining threads                   threads=<span class="hljs-number">1</span>
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">22</span>] Transaction pool price threshold updated price=<span class="hljs-number">18000000000</span>
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">22</span>] Starting mining operation
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">22</span>] Commit <span class="hljs-built_in">new</span> mining work                   <span class="hljs-built_in">number</span>=<span class="hljs-number">1</span> txs=<span class="hljs-number">0</span> uncles=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">0</span>s
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">24</span>] Successfully sealed <span class="hljs-built_in">new</span> block            <span class="hljs-built_in">number</span>=<span class="hljs-number">1</span> hash=<span class="hljs-number">9</span>ed59f…<span class="hljs-number">01</span>cb1c
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">24</span>] �� mined potential block                  <span class="hljs-built_in">number</span>=<span class="hljs-number">1</span> hash=<span class="hljs-number">9</span>ed59f…<span class="hljs-number">01</span>cb1c
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">24</span>] Commit <span class="hljs-built_in">new</span> mining work                   <span class="hljs-built_in">number</span>=<span class="hljs-number">2</span> txs=<span class="hljs-number">0</span> uncles=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">0</span>s
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">26</span>:<span class="hljs-number">28</span>] Successfully sealed <span class="hljs-built_in">new</span> block            <span class="hljs-built_in">number</span>=<span class="hljs-number">2</span> hash=<span class="hljs-number">1</span>f7e1c…<span class="hljs-number">03</span>cd35</code></pre> 
  <p><font color="red">说明：</font>括号里的1的意思就是用1个CPU的内核去挖矿 <br> <font color="blue">停止挖矿 miner.stop()</font> <br> &nbsp;</p> 
  <h4 id="修改矿工账号">修改矿工账号：</h4> 
  <pre class="prettyprint"><code class=" hljs avrasm">miner<span class="hljs-preprocessor">.setEtherbase</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">1</span>])</code></pre> 
  <p>&nbsp;</p> 
  <h4 id="查看账户信息">查看账户信息：</h4> 
  <pre class="prettyprint"><code class=" hljs css"><span class="hljs-tag">eth</span><span class="hljs-class">.accounts</span><span class="hljs-attr_selector">[0]</span></code></pre> 
  <p>&nbsp;</p> 
  <h4 id="转账">转账：</h4> 
  <pre class="prettyprint"><code class=" hljs css"><span class="hljs-tag">eth</span><span class="hljs-class">.sendTransaction</span>(<span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">from</span>:<span class="hljs-value">eth.accounts[<span class="hljs-number">0</span>],to:<span class="hljs-string">"0xedf21069693886b60f56a51dae075e7385e4b959"</span>,value:web3.<span class="hljs-function">toWei(<span class="hljs-number">1</span>,<span class="hljs-string">"ether"</span>)</span></span></span></span>})</code></pre> 
  <p>或者</p> 
  <pre class="prettyprint"><code class=" hljs css"><span class="hljs-tag">eth</span><span class="hljs-class">.sendTransaction</span>(<span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">from</span>:<span class="hljs-value">eth.accounts[<span class="hljs-number">0</span>],to:eth.accounts[<span class="hljs-number">1</span>],value:web3.<span class="hljs-function">toWei(<span class="hljs-number">1</span>,<span class="hljs-string">"ether"</span>)</span></span></span></span>})</code></pre> 
  <p><font color="red">说明：</font>web3.toWei(1,”ether”)方法为单位转换，就是把1eth转换为多少为 <br> <font color="red">可能会报错：</font></p> 
  <pre class="prettyprint"><code class=" hljs css"><span class="hljs-tag">Error</span>: <span class="hljs-tag">authentication</span> <span class="hljs-tag">needed</span>: <span class="hljs-tag">password</span> <span class="hljs-tag">or</span> <span class="hljs-tag">unlock</span>
    <span class="hljs-tag">at</span> <span class="hljs-tag">web3</span><span class="hljs-class">.js</span><span class="hljs-pseudo">:3143</span><span class="hljs-pseudo">:20</span>
    <span class="hljs-tag">at</span> <span class="hljs-tag">web3</span><span class="hljs-class">.js</span><span class="hljs-pseudo">:6347</span><span class="hljs-pseudo">:15</span>
    <span class="hljs-tag">at</span> <span class="hljs-tag">web3</span><span class="hljs-class">.js</span><span class="hljs-pseudo">:5081</span><span class="hljs-pseudo">:36</span>
    <span class="hljs-tag">at</span> &lt;<span class="hljs-tag">anonymous</span>&gt;<span class="hljs-pseudo">:1</span><span class="hljs-pseudo">:1</span></code></pre> 
  <p><font color="blue">解决：</font>解锁账号，使用账户资金前都需要先解锁账号</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; personal<span class="hljs-preprocessor">.unlockAccount</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])
Unlock account <span class="hljs-number">0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b</span>
<span class="hljs-label">Passphrase:</span>
true</code></pre> 
  <p>&nbsp;</p> 
  <h4 id="再执行转账命令">再执行转账命令：</h4> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">&gt; eth.sendTransaction({<span class="hljs-built_in">from</span>:eth.accounts[<span class="hljs-number">0</span>],<span class="hljs-built_in">to</span>:<span class="hljs-string">"0xedf21069693886b60f56a51dae075e7385e4b959"</span>,<span class="hljs-built_in">value</span>:web3.toWei(<span class="hljs-number">1</span>,<span class="hljs-string">"ether"</span>)})
INFO [<span class="hljs-number">07</span>-<span class="hljs-number">01</span>|<span class="hljs-number">15</span>:<span class="hljs-number">40</span>:<span class="hljs-number">18</span>] Submitted transaction                    fullhash=<span class="hljs-number">0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54</span> recipient=<span class="hljs-number">0xEdf21069693886B60f56A51dAE075e7385e4b959</span>
<span class="hljs-string">"0xf05fc26979159eebab2b6d491672039261f73912e62bf71eaf56cde25ef17b54"</span></code></pre> 
  <p><font color="red">注：</font>执行完转账命令后这笔交易还并没有成功，需要等待别人挖矿去把这笔交易记录下来 <br> &nbsp;</p> 
  <h4 id="查看交易状态">查看交易状态：</h4> 
  <pre class="prettyprint"><code class=" hljs css">&gt; <span class="hljs-tag">txpool</span><span class="hljs-class">.status</span>
<span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">pending</span>:<span class="hljs-value"> <span class="hljs-number">1</span>, queued: <span class="hljs-number">0</span> </span></span></span>}</code></pre> 
  <p>&nbsp;</p> 
  <h4 id="查看两个账户的余额是没有变化的">查看两个账户的余额是没有变化的：</h4> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])
<span class="hljs-number">595000000000000000000</span>
&gt; eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">1</span>])
<span class="hljs-number">0</span></code></pre> 
  <p>&nbsp; <br> <font color="blue">我们再启动挖矿：miner.start(2)</font> <br> 当挖到矿再查看交易状态的时候pending已经为0说明交易成功了，这时候我们就可以停止挖矿了：</p> 
  <pre class="prettyprint"><code class=" hljs css">&gt; <span class="hljs-tag">txpool</span><span class="hljs-class">.status</span>
<span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">pending</span>:<span class="hljs-value"> <span class="hljs-number">0</span>, queued: <span class="hljs-number">0</span> </span></span></span>}
<span class="hljs-tag">miner</span><span class="hljs-class">.stop</span>()</code></pre> 
  <p>&nbsp;</p> 
  <h4 id="我们再查两个账户的余额会有变化">我们再查两个账户的余额会有变化：</h4> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>])
<span class="hljs-number">914000000000000000000</span></code></pre> 
  <p><font color="red">注：</font>余额会比一开始的还要大是因为刚才又执行了挖矿，则挖矿所得又会给这个账户</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; eth<span class="hljs-preprocessor">.getBalance</span>(eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">1</span>])
<span class="hljs-number">1000000000000000000</span></code></pre> 
  <p>&nbsp;</p> 
  <h4 id="查看区块数据">查看区块数据：</h4> 
  <pre class="prettyprint"><code class=" hljs markdown"><span class="hljs-blockquote">&gt; eth.blockNumber</span>
183</code></pre> 
  <p>&nbsp;</p> 
  <h4 id="通过区块号查看区块">通过区块号查看区块：</h4> 
  <pre class="prettyprint"><code class=" hljs css">&gt; <span class="hljs-tag">eth</span><span class="hljs-class">.getBlock</span>(1)
<span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">difficulty</span>:<span class="hljs-value"> <span class="hljs-number">131072</span>, extraData: <span class="hljs-string">"0xda8301080b846765746888676f312e31302e328777696e646f7773"</span>, gasLimit: <span class="hljs-number">4995119</span>, gasUsed: <span class="hljs-number">0</span>, hash: <span class="hljs-string">"0x9ed59f854b3eb22be71c94a8260b7bc643f556db947ae2ce4ba267eaf501cb1c"</span>, logsBloom: <span class="hljs-string">"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"</span>, miner: <span class="hljs-string">"0xa9ab17e577fba6ddd1c27d1785add6f48f678a8b"</span>, mixHash: <span class="hljs-string">"0xb6114b20b28de686952d2775f2ca534d978b1ec926812505fa671bbd25ba9f69"</span>, nonce: <span class="hljs-string">"0x4745c6e4eb5bc837"</span>, number: <span class="hljs-number">1</span>, parentHash: <span class="hljs-string">"0x611596e7979cd4e7ca1531260fa706093a5492ecbdf58f20a39545397e424d04"</span>, receiptsRoot: <span class="hljs-string">"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"</span>, sha3Uncles: <span class="hljs-string">"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"</span>, size: <span class="hljs-number">538</span>, stateRoot: <span class="hljs-string">"0x68dadec0e6352f2f1819a462d6b734caa0415c029d764a8904931aadb6919ccf"</span>, timestamp: <span class="hljs-number">1530429982</span>, totalDifficulty: <span class="hljs-number">262144</span>, transactions: [], transactionsRoot: <span class="hljs-string">"0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"</span>, uncles: [] </span></span></span>}</code></pre> 
  <p><font color="red">注：</font>我们主要还是在测试链上开发测试，因为私链上一些数据还不是很全，不完整，所以最好还是在测试链上开发，在主链上进行生产部署</p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/m0_37739193/article/details/81056921,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/m0_37739193/article/details/81056921,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
