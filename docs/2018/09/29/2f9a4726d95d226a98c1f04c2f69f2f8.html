<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>UBUNTU16 64位 编译VLC3.0.4 WIN32版本，遇到的问题及解决方案 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="UBUNTU16 64位 编译VLC3.0.4 WIN32版本，遇到的问题及解决方案" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="参考官网： https://wiki.videolan.org/Win32Compile/&nbsp; &nbsp;使用MAKE FETCH 1,编译过程中提示需要安装：gperf &nbsp; &nbsp;flex &nbsp; bison&nbsp; 2,dxgi1_2.h错误： i686-w64-mingw32-widl -DBOOL=WINBOOL -I/usr/include/wine/windows/ -h -o /home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h dxgi12/dxgi1_2.idl dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT ../../contrib/src/d3d11/rules.mak:65: recipe for target &#39;/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h&#39; failed make: *** [/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h] Error 1 https://forum.videolan.org/viewtopic.php?f=32&amp;t=134115 &nbsp;解决：dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT 解决方案： apt-get install wine64-development-tools&nbsp; motify contib\src\d3d9\rules.mak and contrib\src\d3d11\rules.mak IDL_INC_PATH = /usr/include/wine/windows/ to IDL_INC_PATH = /usr/include/wine-development/windows/ 可以使用GEDIT等编辑工具修改，也可如下： nano ../src/d3d9/rules.mak [manually change IDL_INC_PATH from wine to wine-development] nano ../src/d3d11/rules.mak [manually change IDL_INC_PATH from wine to wine-development] 3，versioninfo.rc错误： i686-w64-mingw32-windres: versioninfo.rc.in:21: syntax error&nbsp; i686-w64-mingw32-windres: preprocessing failed.&nbsp; Makefile:1224: recipe for target &#39;versioninfo.lo&#39; failed&nbsp; make[2]: *** [versioninfo.lo] Error 1&nbsp; make[2]: Leaving directory &#39;/home/d/vlc-3.0.0/contrib/win32/gcrypt/src&#39;&nbsp; Makefile:487: recipe for target &#39;install-recursive&#39; failed&nbsp; make[1]: *** [install-recursive] Error 1&nbsp; make[1]: Leaving directory &#39;/home/d/vlc-3.0.0/contrib/win32/gcrypt&#39;&nbsp; ../../contrib/src/gcrypt/rules.mak:72: recipe for target &#39;.gcrypt&#39; failed&nbsp; make: *** [.gcrypt] Error 2&nbsp; 解决方案： https://forum.videolan.org/viewtopic.php?f=32&amp;t=143536&amp;p=478964&amp;hilit=versioninfo.rc#p478964 https://bugs.debian.org/cgi-bin/bugrepo ... bug=814954 you need to modify the configure.ac (Row 42) file inside contrib/win32/gcrypt/configure.ac &nbsp; - m4_esyscmd([git rev-parse --short HEAD | tr -d &#39;\n\r&#39;])) + m4_esyscmd([printf %x $(wc -l &lt; debian/changelog)])) &nbsp; 4，proto错误： 缺PROTOCBUF 或版本不匹配的问题： ../../contrib/src/protobuf/rules.mak:24: *** Protobuf compiler (protoc) not found!. &nbsp;Stop. $ sudo apt-get install &nbsp;libprotobuf-dev protobuf-compiler $ protoc --version libprotoc 2.6.1 google/protobuf/any_test.proto:31:10: Unrecognized syntax identifier &quot;proto3&quot;. &nbsp;This parser only recognizes &quot;proto2&quot;. Makefile:7304: recipe for target &#39;unittest_proto_middleman&#39; failed make[3]: *** [unittest_proto_middleman] Error 1 （VLC3.0.X需要版本须大于UBUNTU提供的2.6.1，我安装了3.6.1） 将PROTOCBUF升级到3.6.1版本，此问题消失，升级办法：apt-get update apt-get upgrade apt-get build-dep vlc&nbsp; 如果还不行，就下载最新版本手动安装。 https://github.com/protocolbuffers/protobuf/releases/ &nbsp;最新版本位置 https://blog.csdn.net/blue_it/article/details/53996216 &nbsp;ubuntu下protobuf安装 &nbsp;相关问题里面有明确表述 5，mta_holder.h &nbsp;&nbsp;&nbsp;错误 缺文件问题及解决出处 dshow.cpp:55:37: fatal error: ../src/win32/mta_holder.h: No such file or directory https://forum.videolan.org/viewtopic.php?f=14&amp;t=144321&amp;p=472846&amp;hilit=dshow.cpp%3A55%3A37%3A+fatal#p472846 https://raw.githubusercontent.com/videolan/vlc/master/src/win32/mta_holder.h 6，MINGW-W64错误：缺如下：wrl文件夹，roapi.h dwrite.h &nbsp;dwrite_1.h&nbsp; dwrite_2.h&nbsp;&nbsp;&nbsp;versionhelpers.h 以下文件在MINGW-W64中取。 fatal error: wrl/client.h: No such file or directory https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 将\mingw-w64-mingw-w64-2c51561eda7874ad79add69b9efdb0d6ba83c17c\mingw-w64-headers\include\wrl 文件夹放在编译包的contrib/i686-w64-mingw32/include https://sourceforge.net/p/mingw-w64/mingw-w64/ci/v5.x/tree/mingw-w64-headers/include/wrl/wrappers/ /usr/share/mingw-w64/include/roapi.h: In function ‘void ABI::Windows::Foundation::Uninitialize()’: /usr/share/mingw-w64/include/roapi.h:80:25: error: ‘RoUninitialize’ was not declared in this scope 解决办法： https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 mingw-w64-headers/include/roapi.h&quot; and copy to contrib/i686-w64-mingw32/include/ https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 dwrite.h&nbsp; dwrite_1.h&nbsp; dwrite_2.h 新问题1： versionhelpers.h &nbsp; 此文件拷贝成功后， &nbsp; &nbsp; 9月30号更新：如果版本太新，70行也有一个_WIN32_WINNT_WINBLUE 报错不能识别，我改成了_WIN32_WINNT_WIN8 如果取最新版本的这个头文件，可能有其它报错未定义的，应该是版本未识别，我都按WIN8处理了。 7，PROTOBUF的错误： from ../../modules/stream_out/chromecast/cast.cpp:33: stream_out/chromecast/cast_channel.pb.h:10:40: fatal error: i686_w64-mingw32/include/google/protobuf/port_def.inc: No such file or directory port_def.inc port_undef.inc generated_message_table_driven.h&nbsp; inlined_string_field.h port.h &nbsp; metadata_lite.h 这些文件需要在PROTOBU文件中取。 09月30号更新：应该是与PROTOBUF 版本有关，我看了下MIGW-W64中的下载下来的版本是3.1.0，而我使用了最新的3.6.1，造成了这些头文件错误与下面的错误8 如果安装3.1.0问题就都没有了。 8，最后MAKE时 &nbsp; 09月30号更新：此问题已在7解决，安装PROTOBUF3.1.0 版本，或与MAKE &nbsp;FETCH 下来的版本一致应该没这个问题了。 新问题1 stream_out/chromecast/cast_channel.pb.h:1324:35: error: ‘struct google::protobuf::internal::ArenaStringPtr’ has no member named ‘ReleaseNonDefaultNoArena’ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:45: error: ‘numeric_limits’ is not a member of ‘std’ &nbsp; &nbsp; &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max( &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:73: error: expected primary-expression before ‘&gt;’ token &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max() :&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:74: error: ‘::max’ has not been declared CMakeFiles/ebml.dir/build.make:313: recipe for target &#39;CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj&#39; failed make[3]: *** [CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj] Error 1 不得以采用了配置：../configure --host=i686-w64-mingw32 --disable-chromecast &nbsp; &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。 如果有QT错误需要：--disable-qt &nbsp;有这个VLC可执行程序打不开，但库文件可正常使用。 至此重新MAKE成功： &nbsp;经测试库文件可用。 9，打包失败： &nbsp;如有解决这个问题的请告知我。多谢。 打包失败 cp: cannot stat &#39;../share/hrtfs&#39;: No such file or directory Makefile:2388: recipe for target &#39;package-win-common&#39; failed 我手动建了这个vlc-3.0.4/share/hrtfs（空文件），打包成功，不知有没有其它解决方案。 10，如果编译过程中有其它问题请看我的：https://mp.csdn.net/postedit/82782293&nbsp; 说不定解决过了。 另我9月30号也按网上的说法将gettext版本升级到了最新版本，如果您的现象和我的不一样，不防也更新下这个。 &nbsp; 另，打包好的VLC.EXE不能运行，即使只DISABLE CHROMECAST也不行， UBUNTU下报错为无LIBSSP-0.DLL, &nbsp; 我从网上DOWN了此库，运行报错如下：有高手请帮看下，不胜感激。 9月30号将新打包好的程序加入此库文件运行正常。！！！终于Everything is Ok &nbsp;以下错误保留。 Unhandled exception: unimplemented function KERNEL32.dll.InitializeConditionVariable called in 32-bit code (0x7bc4cf69). Register dump: &nbsp;CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b &nbsp;EIP:7bc4cf69 ESP:0064f758 EBP:0064f7cc EFLAGS:00200212( &nbsp; - -- &nbsp;I &nbsp; -A- - ) &nbsp;EAX:6e34d4ba EBX:7bcbe000 ECX:001551d0 EDX:6a7f545c &nbsp;ESI:0064f770 EDI:001551b8 Stack dump: 0x0064f758: &nbsp;0064f780 7b8ae000 7bc4cf43 001551b8 0x0064f768: &nbsp;0064f798 7b86c67f 80000100 00000001 0x0064f778: &nbsp;00000000 7bc4cf69 00000002 6e34d828 0x0064f788: &nbsp;6e34d4ba 6a7f545c 0064f7b0 7b8ae000 0x0064f798: &nbsp;0064f7c8 7b86c6d8 0015559c 001555a0 0x0064f7a8: &nbsp;00000000 7b86c6d8 001551b8 00000000 Backtrace: =&gt;0 0x7bc4cf69 call_dll_entry_point+0x449() in ntdll (0x0064f7cc) &nbsp; 1 0x0024000f (0x001551d4) 0x7bc4cf69 call_dll_entry_point+0x449 in ntdll: addl&nbsp;&nbsp; &nbsp;$12,%esp Modules: Module&nbsp;&nbsp; &nbsp;Address&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Debug info&nbsp;&nbsp; &nbsp;Name (462 modules) PE&nbsp;&nbsp; &nbsp; &nbsp;3d0000- &nbsp;3f2000&nbsp;&nbsp; &nbsp;Deferred &nbsp; &nbsp; &nbsp; &nbsp;libstream_out_cycle_plugin &nbsp; 10，UBUNTU18下不能编译成功，有如下报错： &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。 i686-w64-mingw32-ld: cannot find -lglu32 i686-w64-mingw32-ld: cannot find -lopengl32 i686-w64-mingw32-ld: cannot find -lgdi32 i686-w64-mingw32-ld: cannot find -luser32 i686-w64-mingw32-ld: cannot find -lkernel32 Makefile:101: recipe for target &#39;lib/glew32.dll&#39; failed make[1]: *** [lib/glew32.dll] Error 1 make[1]: Leaving directory &#39;/home/d/vlc-3.0.4/contrib/win32/glew&#39; ../../contrib/src/glew/rules.mak:22: recipe for target &#39;.glew&#39; failed make: *** [.glew] Error 2 &nbsp; &nbsp; 阅读更多" />
<meta property="og:description" content="参考官网： https://wiki.videolan.org/Win32Compile/&nbsp; &nbsp;使用MAKE FETCH 1,编译过程中提示需要安装：gperf &nbsp; &nbsp;flex &nbsp; bison&nbsp; 2,dxgi1_2.h错误： i686-w64-mingw32-widl -DBOOL=WINBOOL -I/usr/include/wine/windows/ -h -o /home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h dxgi12/dxgi1_2.idl dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT ../../contrib/src/d3d11/rules.mak:65: recipe for target &#39;/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h&#39; failed make: *** [/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h] Error 1 https://forum.videolan.org/viewtopic.php?f=32&amp;t=134115 &nbsp;解决：dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT 解决方案： apt-get install wine64-development-tools&nbsp; motify contib\src\d3d9\rules.mak and contrib\src\d3d11\rules.mak IDL_INC_PATH = /usr/include/wine/windows/ to IDL_INC_PATH = /usr/include/wine-development/windows/ 可以使用GEDIT等编辑工具修改，也可如下： nano ../src/d3d9/rules.mak [manually change IDL_INC_PATH from wine to wine-development] nano ../src/d3d11/rules.mak [manually change IDL_INC_PATH from wine to wine-development] 3，versioninfo.rc错误： i686-w64-mingw32-windres: versioninfo.rc.in:21: syntax error&nbsp; i686-w64-mingw32-windres: preprocessing failed.&nbsp; Makefile:1224: recipe for target &#39;versioninfo.lo&#39; failed&nbsp; make[2]: *** [versioninfo.lo] Error 1&nbsp; make[2]: Leaving directory &#39;/home/d/vlc-3.0.0/contrib/win32/gcrypt/src&#39;&nbsp; Makefile:487: recipe for target &#39;install-recursive&#39; failed&nbsp; make[1]: *** [install-recursive] Error 1&nbsp; make[1]: Leaving directory &#39;/home/d/vlc-3.0.0/contrib/win32/gcrypt&#39;&nbsp; ../../contrib/src/gcrypt/rules.mak:72: recipe for target &#39;.gcrypt&#39; failed&nbsp; make: *** [.gcrypt] Error 2&nbsp; 解决方案： https://forum.videolan.org/viewtopic.php?f=32&amp;t=143536&amp;p=478964&amp;hilit=versioninfo.rc#p478964 https://bugs.debian.org/cgi-bin/bugrepo ... bug=814954 you need to modify the configure.ac (Row 42) file inside contrib/win32/gcrypt/configure.ac &nbsp; - m4_esyscmd([git rev-parse --short HEAD | tr -d &#39;\n\r&#39;])) + m4_esyscmd([printf %x $(wc -l &lt; debian/changelog)])) &nbsp; 4，proto错误： 缺PROTOCBUF 或版本不匹配的问题： ../../contrib/src/protobuf/rules.mak:24: *** Protobuf compiler (protoc) not found!. &nbsp;Stop. $ sudo apt-get install &nbsp;libprotobuf-dev protobuf-compiler $ protoc --version libprotoc 2.6.1 google/protobuf/any_test.proto:31:10: Unrecognized syntax identifier &quot;proto3&quot;. &nbsp;This parser only recognizes &quot;proto2&quot;. Makefile:7304: recipe for target &#39;unittest_proto_middleman&#39; failed make[3]: *** [unittest_proto_middleman] Error 1 （VLC3.0.X需要版本须大于UBUNTU提供的2.6.1，我安装了3.6.1） 将PROTOCBUF升级到3.6.1版本，此问题消失，升级办法：apt-get update apt-get upgrade apt-get build-dep vlc&nbsp; 如果还不行，就下载最新版本手动安装。 https://github.com/protocolbuffers/protobuf/releases/ &nbsp;最新版本位置 https://blog.csdn.net/blue_it/article/details/53996216 &nbsp;ubuntu下protobuf安装 &nbsp;相关问题里面有明确表述 5，mta_holder.h &nbsp;&nbsp;&nbsp;错误 缺文件问题及解决出处 dshow.cpp:55:37: fatal error: ../src/win32/mta_holder.h: No such file or directory https://forum.videolan.org/viewtopic.php?f=14&amp;t=144321&amp;p=472846&amp;hilit=dshow.cpp%3A55%3A37%3A+fatal#p472846 https://raw.githubusercontent.com/videolan/vlc/master/src/win32/mta_holder.h 6，MINGW-W64错误：缺如下：wrl文件夹，roapi.h dwrite.h &nbsp;dwrite_1.h&nbsp; dwrite_2.h&nbsp;&nbsp;&nbsp;versionhelpers.h 以下文件在MINGW-W64中取。 fatal error: wrl/client.h: No such file or directory https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 将\mingw-w64-mingw-w64-2c51561eda7874ad79add69b9efdb0d6ba83c17c\mingw-w64-headers\include\wrl 文件夹放在编译包的contrib/i686-w64-mingw32/include https://sourceforge.net/p/mingw-w64/mingw-w64/ci/v5.x/tree/mingw-w64-headers/include/wrl/wrappers/ /usr/share/mingw-w64/include/roapi.h: In function ‘void ABI::Windows::Foundation::Uninitialize()’: /usr/share/mingw-w64/include/roapi.h:80:25: error: ‘RoUninitialize’ was not declared in this scope 解决办法： https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 mingw-w64-headers/include/roapi.h&quot; and copy to contrib/i686-w64-mingw32/include/ https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 dwrite.h&nbsp; dwrite_1.h&nbsp; dwrite_2.h 新问题1： versionhelpers.h &nbsp; 此文件拷贝成功后， &nbsp; &nbsp; 9月30号更新：如果版本太新，70行也有一个_WIN32_WINNT_WINBLUE 报错不能识别，我改成了_WIN32_WINNT_WIN8 如果取最新版本的这个头文件，可能有其它报错未定义的，应该是版本未识别，我都按WIN8处理了。 7，PROTOBUF的错误： from ../../modules/stream_out/chromecast/cast.cpp:33: stream_out/chromecast/cast_channel.pb.h:10:40: fatal error: i686_w64-mingw32/include/google/protobuf/port_def.inc: No such file or directory port_def.inc port_undef.inc generated_message_table_driven.h&nbsp; inlined_string_field.h port.h &nbsp; metadata_lite.h 这些文件需要在PROTOBU文件中取。 09月30号更新：应该是与PROTOBUF 版本有关，我看了下MIGW-W64中的下载下来的版本是3.1.0，而我使用了最新的3.6.1，造成了这些头文件错误与下面的错误8 如果安装3.1.0问题就都没有了。 8，最后MAKE时 &nbsp; 09月30号更新：此问题已在7解决，安装PROTOBUF3.1.0 版本，或与MAKE &nbsp;FETCH 下来的版本一致应该没这个问题了。 新问题1 stream_out/chromecast/cast_channel.pb.h:1324:35: error: ‘struct google::protobuf::internal::ArenaStringPtr’ has no member named ‘ReleaseNonDefaultNoArena’ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:45: error: ‘numeric_limits’ is not a member of ‘std’ &nbsp; &nbsp; &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max( &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:73: error: expected primary-expression before ‘&gt;’ token &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max() :&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:74: error: ‘::max’ has not been declared CMakeFiles/ebml.dir/build.make:313: recipe for target &#39;CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj&#39; failed make[3]: *** [CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj] Error 1 不得以采用了配置：../configure --host=i686-w64-mingw32 --disable-chromecast &nbsp; &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。 如果有QT错误需要：--disable-qt &nbsp;有这个VLC可执行程序打不开，但库文件可正常使用。 至此重新MAKE成功： &nbsp;经测试库文件可用。 9，打包失败： &nbsp;如有解决这个问题的请告知我。多谢。 打包失败 cp: cannot stat &#39;../share/hrtfs&#39;: No such file or directory Makefile:2388: recipe for target &#39;package-win-common&#39; failed 我手动建了这个vlc-3.0.4/share/hrtfs（空文件），打包成功，不知有没有其它解决方案。 10，如果编译过程中有其它问题请看我的：https://mp.csdn.net/postedit/82782293&nbsp; 说不定解决过了。 另我9月30号也按网上的说法将gettext版本升级到了最新版本，如果您的现象和我的不一样，不防也更新下这个。 &nbsp; 另，打包好的VLC.EXE不能运行，即使只DISABLE CHROMECAST也不行， UBUNTU下报错为无LIBSSP-0.DLL, &nbsp; 我从网上DOWN了此库，运行报错如下：有高手请帮看下，不胜感激。 9月30号将新打包好的程序加入此库文件运行正常。！！！终于Everything is Ok &nbsp;以下错误保留。 Unhandled exception: unimplemented function KERNEL32.dll.InitializeConditionVariable called in 32-bit code (0x7bc4cf69). Register dump: &nbsp;CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b &nbsp;EIP:7bc4cf69 ESP:0064f758 EBP:0064f7cc EFLAGS:00200212( &nbsp; - -- &nbsp;I &nbsp; -A- - ) &nbsp;EAX:6e34d4ba EBX:7bcbe000 ECX:001551d0 EDX:6a7f545c &nbsp;ESI:0064f770 EDI:001551b8 Stack dump: 0x0064f758: &nbsp;0064f780 7b8ae000 7bc4cf43 001551b8 0x0064f768: &nbsp;0064f798 7b86c67f 80000100 00000001 0x0064f778: &nbsp;00000000 7bc4cf69 00000002 6e34d828 0x0064f788: &nbsp;6e34d4ba 6a7f545c 0064f7b0 7b8ae000 0x0064f798: &nbsp;0064f7c8 7b86c6d8 0015559c 001555a0 0x0064f7a8: &nbsp;00000000 7b86c6d8 001551b8 00000000 Backtrace: =&gt;0 0x7bc4cf69 call_dll_entry_point+0x449() in ntdll (0x0064f7cc) &nbsp; 1 0x0024000f (0x001551d4) 0x7bc4cf69 call_dll_entry_point+0x449 in ntdll: addl&nbsp;&nbsp; &nbsp;$12,%esp Modules: Module&nbsp;&nbsp; &nbsp;Address&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Debug info&nbsp;&nbsp; &nbsp;Name (462 modules) PE&nbsp;&nbsp; &nbsp; &nbsp;3d0000- &nbsp;3f2000&nbsp;&nbsp; &nbsp;Deferred &nbsp; &nbsp; &nbsp; &nbsp;libstream_out_cycle_plugin &nbsp; 10，UBUNTU18下不能编译成功，有如下报错： &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。 i686-w64-mingw32-ld: cannot find -lglu32 i686-w64-mingw32-ld: cannot find -lopengl32 i686-w64-mingw32-ld: cannot find -lgdi32 i686-w64-mingw32-ld: cannot find -luser32 i686-w64-mingw32-ld: cannot find -lkernel32 Makefile:101: recipe for target &#39;lib/glew32.dll&#39; failed make[1]: *** [lib/glew32.dll] Error 1 make[1]: Leaving directory &#39;/home/d/vlc-3.0.4/contrib/win32/glew&#39; ../../contrib/src/glew/rules.mak:22: recipe for target &#39;.glew&#39; failed make: *** [.glew] Error 2 &nbsp; &nbsp; 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/09/29/2f9a4726d95d226a98c1f04c2f69f2f8.html" />
<meta property="og:url" content="https://mlh.app/2018/09/29/2f9a4726d95d226a98c1f04c2f69f2f8.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-29T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"参考官网： https://wiki.videolan.org/Win32Compile/&nbsp; &nbsp;使用MAKE FETCH 1,编译过程中提示需要安装：gperf &nbsp; &nbsp;flex &nbsp; bison&nbsp; 2,dxgi1_2.h错误： i686-w64-mingw32-widl -DBOOL=WINBOOL -I/usr/include/wine/windows/ -h -o /home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h dxgi12/dxgi1_2.idl dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT ../../contrib/src/d3d11/rules.mak:65: recipe for target &#39;/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h&#39; failed make: *** [/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h] Error 1 https://forum.videolan.org/viewtopic.php?f=32&amp;t=134115 &nbsp;解决：dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT 解决方案： apt-get install wine64-development-tools&nbsp; motify contib\\src\\d3d9\\rules.mak and contrib\\src\\d3d11\\rules.mak IDL_INC_PATH = /usr/include/wine/windows/ to IDL_INC_PATH = /usr/include/wine-development/windows/ 可以使用GEDIT等编辑工具修改，也可如下： nano ../src/d3d9/rules.mak [manually change IDL_INC_PATH from wine to wine-development] nano ../src/d3d11/rules.mak [manually change IDL_INC_PATH from wine to wine-development] 3，versioninfo.rc错误： i686-w64-mingw32-windres: versioninfo.rc.in:21: syntax error&nbsp; i686-w64-mingw32-windres: preprocessing failed.&nbsp; Makefile:1224: recipe for target &#39;versioninfo.lo&#39; failed&nbsp; make[2]: *** [versioninfo.lo] Error 1&nbsp; make[2]: Leaving directory &#39;/home/d/vlc-3.0.0/contrib/win32/gcrypt/src&#39;&nbsp; Makefile:487: recipe for target &#39;install-recursive&#39; failed&nbsp; make[1]: *** [install-recursive] Error 1&nbsp; make[1]: Leaving directory &#39;/home/d/vlc-3.0.0/contrib/win32/gcrypt&#39;&nbsp; ../../contrib/src/gcrypt/rules.mak:72: recipe for target &#39;.gcrypt&#39; failed&nbsp; make: *** [.gcrypt] Error 2&nbsp; 解决方案： https://forum.videolan.org/viewtopic.php?f=32&amp;t=143536&amp;p=478964&amp;hilit=versioninfo.rc#p478964 https://bugs.debian.org/cgi-bin/bugrepo ... bug=814954 you need to modify the configure.ac (Row 42) file inside contrib/win32/gcrypt/configure.ac &nbsp; - m4_esyscmd([git rev-parse --short HEAD | tr -d &#39;\\n\\r&#39;])) + m4_esyscmd([printf %x $(wc -l &lt; debian/changelog)])) &nbsp; 4，proto错误： 缺PROTOCBUF 或版本不匹配的问题： ../../contrib/src/protobuf/rules.mak:24: *** Protobuf compiler (protoc) not found!. &nbsp;Stop. $ sudo apt-get install &nbsp;libprotobuf-dev protobuf-compiler $ protoc --version libprotoc 2.6.1 google/protobuf/any_test.proto:31:10: Unrecognized syntax identifier &quot;proto3&quot;. &nbsp;This parser only recognizes &quot;proto2&quot;. Makefile:7304: recipe for target &#39;unittest_proto_middleman&#39; failed make[3]: *** [unittest_proto_middleman] Error 1 （VLC3.0.X需要版本须大于UBUNTU提供的2.6.1，我安装了3.6.1） 将PROTOCBUF升级到3.6.1版本，此问题消失，升级办法：apt-get update apt-get upgrade apt-get build-dep vlc&nbsp; 如果还不行，就下载最新版本手动安装。 https://github.com/protocolbuffers/protobuf/releases/ &nbsp;最新版本位置 https://blog.csdn.net/blue_it/article/details/53996216 &nbsp;ubuntu下protobuf安装 &nbsp;相关问题里面有明确表述 5，mta_holder.h &nbsp;&nbsp;&nbsp;错误 缺文件问题及解决出处 dshow.cpp:55:37: fatal error: ../src/win32/mta_holder.h: No such file or directory https://forum.videolan.org/viewtopic.php?f=14&amp;t=144321&amp;p=472846&amp;hilit=dshow.cpp%3A55%3A37%3A+fatal#p472846 https://raw.githubusercontent.com/videolan/vlc/master/src/win32/mta_holder.h 6，MINGW-W64错误：缺如下：wrl文件夹，roapi.h dwrite.h &nbsp;dwrite_1.h&nbsp; dwrite_2.h&nbsp;&nbsp;&nbsp;versionhelpers.h 以下文件在MINGW-W64中取。 fatal error: wrl/client.h: No such file or directory https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 将\\mingw-w64-mingw-w64-2c51561eda7874ad79add69b9efdb0d6ba83c17c\\mingw-w64-headers\\include\\wrl 文件夹放在编译包的contrib/i686-w64-mingw32/include https://sourceforge.net/p/mingw-w64/mingw-w64/ci/v5.x/tree/mingw-w64-headers/include/wrl/wrappers/ /usr/share/mingw-w64/include/roapi.h: In function ‘void ABI::Windows::Foundation::Uninitialize()’: /usr/share/mingw-w64/include/roapi.h:80:25: error: ‘RoUninitialize’ was not declared in this scope 解决办法： https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 mingw-w64-headers/include/roapi.h&quot; and copy to contrib/i686-w64-mingw32/include/ https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684 dwrite.h&nbsp; dwrite_1.h&nbsp; dwrite_2.h 新问题1： versionhelpers.h &nbsp; 此文件拷贝成功后， &nbsp; &nbsp; 9月30号更新：如果版本太新，70行也有一个_WIN32_WINNT_WINBLUE 报错不能识别，我改成了_WIN32_WINNT_WIN8 如果取最新版本的这个头文件，可能有其它报错未定义的，应该是版本未识别，我都按WIN8处理了。 7，PROTOBUF的错误： from ../../modules/stream_out/chromecast/cast.cpp:33: stream_out/chromecast/cast_channel.pb.h:10:40: fatal error: i686_w64-mingw32/include/google/protobuf/port_def.inc: No such file or directory port_def.inc port_undef.inc generated_message_table_driven.h&nbsp; inlined_string_field.h port.h &nbsp; metadata_lite.h 这些文件需要在PROTOBU文件中取。 09月30号更新：应该是与PROTOBUF 版本有关，我看了下MIGW-W64中的下载下来的版本是3.1.0，而我使用了最新的3.6.1，造成了这些头文件错误与下面的错误8 如果安装3.1.0问题就都没有了。 8，最后MAKE时 &nbsp; 09月30号更新：此问题已在7解决，安装PROTOBUF3.1.0 版本，或与MAKE &nbsp;FETCH 下来的版本一致应该没这个问题了。 新问题1 stream_out/chromecast/cast_channel.pb.h:1324:35: error: ‘struct google::protobuf::internal::ArenaStringPtr’ has no member named ‘ReleaseNonDefaultNoArena’ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:45: error: ‘numeric_limits’ is not a member of ‘std’ &nbsp; &nbsp; &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max( &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:73: error: expected primary-expression before ‘&gt;’ token &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max() :&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^ /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:74: error: ‘::max’ has not been declared CMakeFiles/ebml.dir/build.make:313: recipe for target &#39;CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj&#39; failed make[3]: *** [CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj] Error 1 不得以采用了配置：../configure --host=i686-w64-mingw32 --disable-chromecast &nbsp; &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。 如果有QT错误需要：--disable-qt &nbsp;有这个VLC可执行程序打不开，但库文件可正常使用。 至此重新MAKE成功： &nbsp;经测试库文件可用。 9，打包失败： &nbsp;如有解决这个问题的请告知我。多谢。 打包失败 cp: cannot stat &#39;../share/hrtfs&#39;: No such file or directory Makefile:2388: recipe for target &#39;package-win-common&#39; failed 我手动建了这个vlc-3.0.4/share/hrtfs（空文件），打包成功，不知有没有其它解决方案。 10，如果编译过程中有其它问题请看我的：https://mp.csdn.net/postedit/82782293&nbsp; 说不定解决过了。 另我9月30号也按网上的说法将gettext版本升级到了最新版本，如果您的现象和我的不一样，不防也更新下这个。 &nbsp; 另，打包好的VLC.EXE不能运行，即使只DISABLE CHROMECAST也不行， UBUNTU下报错为无LIBSSP-0.DLL, &nbsp; 我从网上DOWN了此库，运行报错如下：有高手请帮看下，不胜感激。 9月30号将新打包好的程序加入此库文件运行正常。！！！终于Everything is Ok &nbsp;以下错误保留。 Unhandled exception: unimplemented function KERNEL32.dll.InitializeConditionVariable called in 32-bit code (0x7bc4cf69). Register dump: &nbsp;CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b &nbsp;EIP:7bc4cf69 ESP:0064f758 EBP:0064f7cc EFLAGS:00200212( &nbsp; - -- &nbsp;I &nbsp; -A- - ) &nbsp;EAX:6e34d4ba EBX:7bcbe000 ECX:001551d0 EDX:6a7f545c &nbsp;ESI:0064f770 EDI:001551b8 Stack dump: 0x0064f758: &nbsp;0064f780 7b8ae000 7bc4cf43 001551b8 0x0064f768: &nbsp;0064f798 7b86c67f 80000100 00000001 0x0064f778: &nbsp;00000000 7bc4cf69 00000002 6e34d828 0x0064f788: &nbsp;6e34d4ba 6a7f545c 0064f7b0 7b8ae000 0x0064f798: &nbsp;0064f7c8 7b86c6d8 0015559c 001555a0 0x0064f7a8: &nbsp;00000000 7b86c6d8 001551b8 00000000 Backtrace: =&gt;0 0x7bc4cf69 call_dll_entry_point+0x449() in ntdll (0x0064f7cc) &nbsp; 1 0x0024000f (0x001551d4) 0x7bc4cf69 call_dll_entry_point+0x449 in ntdll: addl&nbsp;&nbsp; &nbsp;$12,%esp Modules: Module&nbsp;&nbsp; &nbsp;Address&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Debug info&nbsp;&nbsp; &nbsp;Name (462 modules) PE&nbsp;&nbsp; &nbsp; &nbsp;3d0000- &nbsp;3f2000&nbsp;&nbsp; &nbsp;Deferred &nbsp; &nbsp; &nbsp; &nbsp;libstream_out_cycle_plugin &nbsp; 10，UBUNTU18下不能编译成功，有如下报错： &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。 i686-w64-mingw32-ld: cannot find -lglu32 i686-w64-mingw32-ld: cannot find -lopengl32 i686-w64-mingw32-ld: cannot find -lgdi32 i686-w64-mingw32-ld: cannot find -luser32 i686-w64-mingw32-ld: cannot find -lkernel32 Makefile:101: recipe for target &#39;lib/glew32.dll&#39; failed make[1]: *** [lib/glew32.dll] Error 1 make[1]: Leaving directory &#39;/home/d/vlc-3.0.4/contrib/win32/glew&#39; ../../contrib/src/glew/rules.mak:22: recipe for target &#39;.glew&#39; failed make: *** [.glew] Error 2 &nbsp; &nbsp; 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/09/29/2f9a4726d95d226a98c1f04c2f69f2f8.html","headline":"UBUNTU16 64位 编译VLC3.0.4 WIN32版本，遇到的问题及解决方案","dateModified":"2018-09-29T00:00:00+08:00","datePublished":"2018-09-29T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/09/29/2f9a4726d95d226a98c1f04c2f69f2f8.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>UBUNTU16 64位 编译VLC3.0.4 WIN32版本，遇到的问题及解决方案</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e4c7a3727d.css"> 
 <div class="htmledit_views"> 
  <p>参考官网：</p> 
  <p><a href="https://wiki.videolan.org/Win32Compile/" rel="nofollow">https://wiki.videolan.org/Win32Compile/</a>&nbsp; &nbsp;使用MAKE FETCH</p> 
  <p>1,编译过程中提示需要安装：gperf &nbsp; &nbsp;flex &nbsp; bison&nbsp;</p> 
  <p>2,dxgi1_2.h错误：</p> 
  <p>i686-w64-mingw32-widl -DBOOL=WINBOOL -I/usr/include/wine/windows/ -h -o /home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h dxgi12/dxgi1_2.idl<br> dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT<br> ../../contrib/src/d3d11/rules.mak:65: recipe for target '/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h' failed<br> make: *** [/home/d/vlc-3.0.0/contrib/i686-w64-mingw32/include/dxgi1_2.h] Error 1</p> 
  <p>https://forum.videolan.org/viewtopic.php?f=32&amp;t=134115 &nbsp;解决：dxgi12/dxgi1_2.idl:43: error: syntax error, unexpected aKNOWNTYPE, expecting tIMPORT<br> 解决方案：<br> apt-get install wine64-development-tools&nbsp;<br> motify contib\src\d3d9\rules.mak and contrib\src\d3d11\rules.mak IDL_INC_PATH = /usr/include/wine/windows/ to IDL_INC_PATH = /usr/include/wine-development/windows/</p> 
  <p>可以使用GEDIT等编辑工具修改，也可如下：</p> 
  <p>nano ../src/d3d9/rules.mak [manually change IDL_INC_PATH from wine to wine-development]<br> nano ../src/d3d11/rules.mak [manually change IDL_INC_PATH from wine to wine-development]</p> 
  <p>3，versioninfo.rc错误：</p> 
  <p>i686-w64-mingw32-windres: versioninfo.rc.in:21: syntax error&nbsp;<br> i686-w64-mingw32-windres: preprocessing failed.&nbsp;<br> Makefile:1224: recipe for target 'versioninfo.lo' failed&nbsp;<br> make[2]: *** [versioninfo.lo] Error 1&nbsp;<br> make[2]: Leaving directory '/home/d/vlc-3.0.0/contrib/win32/gcrypt/src'&nbsp;<br> Makefile:487: recipe for target 'install-recursive' failed&nbsp;<br> make[1]: *** [install-recursive] Error 1&nbsp;<br> make[1]: Leaving directory '/home/d/vlc-3.0.0/contrib/win32/gcrypt'&nbsp;<br> ../../contrib/src/gcrypt/rules.mak:72: recipe for target '.gcrypt' failed&nbsp;<br> make: *** [.gcrypt] Error 2&nbsp;</p> 
  <p>解决方案：</p> 
  <p>https://forum.videolan.org/viewtopic.php?f=32&amp;t=143536&amp;p=478964&amp;hilit=versioninfo.rc#p478964<br> https://bugs.debian.org/cgi-bin/bugrepo ... bug=814954</p> 
  <p>you need to modify the configure.ac (Row 42) file inside contrib/win32/gcrypt/configure.ac &nbsp;</p> 
  <p>- m4_esyscmd([git rev-parse --short HEAD | tr -d '\n\r']))<br> + m4_esyscmd([printf %x $(wc -l &lt; debian/changelog)]))</p> 
  <p>&nbsp;</p> 
  <p>4，proto错误：</p> 
  <p>缺PROTOCBUF 或版本不匹配的问题：<br> ../../contrib/src/protobuf/rules.mak:24: *** Protobuf compiler (protoc) not found!. &nbsp;Stop.<br> $ sudo apt-get install &nbsp;libprotobuf-dev protobuf-compiler<br> $ protoc --version<br> libprotoc 2.6.1</p> 
  <p>google/protobuf/any_test.proto:31:10: Unrecognized syntax identifier "proto3". &nbsp;This parser only recognizes "proto2".<br> Makefile:7304: recipe for target 'unittest_proto_middleman' failed<br> make[3]: *** [unittest_proto_middleman] Error 1</p> 
  <p>（VLC3.0.X需要版本须大于UBUNTU提供的2.6.1，我安装了3.6.1）</p> 
  <p>将PROTOCBUF升级到3.6.1版本，此问题消失，升级办法：apt-get update apt-get upgrade apt-get build-dep vlc&nbsp;<br> 如果还不行，就下载最新版本手动安装。<br> https://github.com/protocolbuffers/protobuf/releases/ &nbsp;最新版本位置<br> https://blog.csdn.net/blue_it/article/details/53996216 &nbsp;ubuntu下protobuf安装 &nbsp;相关问题里面有明确表述</p> 
  <p>5，mta_holder.h &nbsp;&nbsp;&nbsp;错误</p> 
  <p>缺文件问题及解决出处<br> dshow.cpp:55:37: fatal error: ../src/win32/mta_holder.h: No such file or directory</p> 
  <p>https://forum.videolan.org/viewtopic.php?f=14&amp;t=144321&amp;p=472846&amp;hilit=dshow.cpp%3A55%3A37%3A+fatal#p472846<br> https://raw.githubusercontent.com/videolan/vlc/master/src/win32/mta_holder.h</p> 
  <p>6，MINGW-W64错误：缺如下：wrl文件夹，roapi.h dwrite.h &nbsp;dwrite_1.h&nbsp; dwrite_2.h&nbsp;&nbsp;&nbsp;versionhelpers.h</p> 
  <p>以下文件在MINGW-W64中取。<br> fatal error: wrl/client.h: No such file or directory<br> https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684<br> 将\mingw-w64-mingw-w64-2c51561eda7874ad79add69b9efdb0d6ba83c17c\mingw-w64-headers\include\wrl 文件夹放在编译包的contrib/i686-w64-mingw32/include</p> 
  <p>https://sourceforge.net/p/mingw-w64/mingw-w64/ci/v5.x/tree/mingw-w64-headers/include/wrl/wrappers/</p> 
  <p><br> /usr/share/mingw-w64/include/roapi.h: In function ‘void ABI::Windows::Foundation::Uninitialize()’:<br> /usr/share/mingw-w64/include/roapi.h:80:25: error: ‘RoUninitialize’ was not declared in this scope<br> 解决办法：<br> https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684<br> mingw-w64-headers/include/roapi.h" and copy to contrib/i686-w64-mingw32/include/</p> 
  <p>https://forum.videolan.org/viewtopic.php?f=32&amp;t=137580&amp;p=453684&amp;hilit=roapi.h%3A80%3A25#p453684</p> 
  <p>dwrite.h&nbsp;<br> dwrite_1.h&nbsp;<br> dwrite_2.h<br> 新问题1：</p> 
  <p>versionhelpers.h &nbsp; 此文件拷贝成功后， &nbsp; &nbsp;</p> 
  <p>9月30号更新：如果版本太新，70行也有一个_WIN32_WINNT_WINBLUE 报错不能识别，我改成了_WIN32_WINNT_WIN8</p> 
  <p>如果取最新版本的这个头文件，可能有其它报错未定义的，应该是版本未识别，我都按WIN8处理了。</p> 
  <p>7，PROTOBUF的错误：</p> 
  <p>from ../../modules/stream_out/chromecast/cast.cpp:33:<br> stream_out/chromecast/cast_channel.pb.h:10:40: fatal error: i686_w64-mingw32/include/google/protobuf/port_def.inc: No such file or directory</p> 
  <p>port_def.inc<br> port_undef.inc<br> generated_message_table_driven.h&nbsp;<br> inlined_string_field.h<br> port.h &nbsp;<br> metadata_lite.h<br> 这些文件需要在PROTOBU文件中取。</p> 
  <p>09月30号更新：应该是与PROTOBUF 版本有关，我看了下MIGW-W64中的下载下来的版本是3.1.0，而我使用了最新的3.6.1，造成了这些头文件错误与下面的错误8 如果安装3.1.0问题就都没有了。</p> 
  <p>8，最后MAKE时 &nbsp;</p> 
  <p>09月30号更新：此问题已在7解决，安装PROTOBUF3.1.0 版本，或与MAKE &nbsp;FETCH 下来的版本一致应该没这个问题了。</p> 
  <p>新问题1<br> stream_out/chromecast/cast_channel.pb.h:1324:35: error: ‘struct google::protobuf::internal::ArenaStringPtr’ has no member named ‘ReleaseNonDefaultNoArena’</p> 
  <p>/home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:45: error: ‘numeric_limits’ is not a member of ‘std’<br> &nbsp; &nbsp; &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max(<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br> /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:73: error: expected primary-expression before ‘&gt;’ token<br> &nbsp;uint64_t TempValue = Buffer[0] &amp; 0x80 ? std::numeric_limits&lt;uint64_t&gt;::max() :&nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br> /home/d/vlc-3.0.3/contrib/win32/ebml/src/EbmlSInteger.cpp:147:74: error: ‘::max’ has not been declared<br> CMakeFiles/ebml.dir/build.make:313: recipe for target 'CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj' failed<br> make[3]: *** [CMakeFiles/ebml.dir/src/EbmlSInteger.cpp.obj] Error 1</p> 
  <p>不得以采用了配置：../configure --host=i686-w64-mingw32 --disable-chromecast &nbsp; &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。</p> 
  <p>如果有QT错误需要：--disable-qt &nbsp;有这个VLC可执行程序打不开，但库文件可正常使用。</p> 
  <p>至此重新MAKE成功： &nbsp;经测试库文件可用。</p> 
  <p>9，打包失败： &nbsp;如有解决这个问题的请告知我。多谢。</p> 
  <p>打包失败<br> cp: cannot stat '../share/hrtfs': No such file or directory<br> Makefile:2388: recipe for target 'package-win-common' failed</p> 
  <p>我手动建了这个vlc-3.0.4/share/hrtfs（空文件），打包成功，不知有没有其它解决方案。</p> 
  <p>10，如果编译过程中有其它问题请看我的：<a href="https://mp.csdn.net/postedit/82782293" rel="nofollow">https://mp.csdn.net/postedit/82782293</a>&nbsp; 说不定解决过了。</p> 
  <p>另我9月30号也按网上的说法将gettext版本升级到了最新版本，如果您的现象和我的不一样，不防也更新下这个。</p> 
  <p>&nbsp;</p> 
  <p>另，<s>打包好的VLC.EXE不能运行，即使只DISABLE CHROMECAST也不行，</s></p> 
  <p>UBUNTU下报错为无LIBSSP-0.DLL,</p> 
  <p>&nbsp;</p> 
  <p>我从网上DOWN了此库，运行报错如下：有高手请帮看下，不胜感激。</p> 
  <p>9月30号将新打包好的程序加入此库文件运行正常。！！！终于Everything is Ok &nbsp;以下错误保留。</p> 
  <p><s>Unhandled exception: unimplemented function KERNEL32.dll.InitializeConditionVariable called in 32-bit code (0x7bc4cf69).<br> Register dump:<br> &nbsp;CS:0023 SS:002b DS:002b ES:002b FS:0063 GS:006b<br> &nbsp;EIP:7bc4cf69 ESP:0064f758 EBP:0064f7cc EFLAGS:00200212( &nbsp; - -- &nbsp;I &nbsp; -A- - )<br> &nbsp;EAX:6e34d4ba EBX:7bcbe000 ECX:001551d0 EDX:6a7f545c<br> &nbsp;ESI:0064f770 EDI:001551b8<br> Stack dump:<br> 0x0064f758: &nbsp;0064f780 7b8ae000 7bc4cf43 001551b8<br> 0x0064f768: &nbsp;0064f798 7b86c67f 80000100 00000001<br> 0x0064f778: &nbsp;00000000 7bc4cf69 00000002 6e34d828<br> 0x0064f788: &nbsp;6e34d4ba 6a7f545c 0064f7b0 7b8ae000<br> 0x0064f798: &nbsp;0064f7c8 7b86c6d8 0015559c 001555a0<br> 0x0064f7a8: &nbsp;00000000 7b86c6d8 001551b8 00000000<br> Backtrace:<br> =&gt;0 0x7bc4cf69 call_dll_entry_point+0x449() in ntdll (0x0064f7cc)<br> &nbsp; 1 0x0024000f (0x001551d4)<br> 0x7bc4cf69 call_dll_entry_point+0x449 in ntdll: addl&nbsp;&nbsp; &nbsp;$12,%esp<br> Modules:<br> Module&nbsp;&nbsp; &nbsp;Address&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Debug info&nbsp;&nbsp; &nbsp;Name (462 modules)<br> PE&nbsp;&nbsp; &nbsp; &nbsp;3d0000- &nbsp;3f2000&nbsp;&nbsp; &nbsp;Deferred &nbsp; &nbsp; &nbsp; &nbsp;libstream_out_cycle_plugin</s><br><br> &nbsp;</p> 
  <p>10，UBUNTU18下不能编译成功，有如下报错： &nbsp;&nbsp;如有解决这个问题的请告知我。多谢。</p> 
  <p>i686-w64-mingw32-ld: cannot find -lglu32<br> i686-w64-mingw32-ld: cannot find -lopengl32<br> i686-w64-mingw32-ld: cannot find -lgdi32<br> i686-w64-mingw32-ld: cannot find -luser32<br> i686-w64-mingw32-ld: cannot find -lkernel32<br> Makefile:101: recipe for target 'lib/glew32.dll' failed<br> make[1]: *** [lib/glew32.dll] Error 1<br> make[1]: Leaving directory '/home/d/vlc-3.0.4/contrib/win32/glew'<br> ../../contrib/src/glew/rules.mak:22: recipe for target '.glew' failed<br> make: *** [.glew] Error 2</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DANFBAORE/article/details/82892467,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/DANFBAORE/article/details/82892467,&quot;}">阅读更多</a> 
</div> 
<script>
						(function(){
							function setArticleH(btnReadmore,posi){
								var winH = $(window).height();
								var articleBox = $("div.article_content");
								var artH = articleBox.height();
								if(artH > winH*posi){
									articleBox.css({
										'height':winH*posi+'px',
										'overflow':'hidden'
									})
									btnReadmore.click(function(){
										articleBox.removeAttr("style");
										$(this).parent().remove();
									})
								}else{
									btnReadmore.parent().remove();
								}
							}
							var btnReadmore = $("#btn-readmore");
							if(btnReadmore.length>0){
								if(currentUserName){
									setArticleH(btnReadmore,3);
								}else{
									setArticleH(btnReadmore,1.2);
								}
							}
						})()
					</script>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
