<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>lnmp | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="lnmp" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="lnmp = linux + nginx + mysql + php/python mysql 源码安装 [root@server1 ~]# mkdir /var/local/lnmp [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-boost-5.7.17.tar.gz [root@server1 ~]# yum install cmake-2.8.12.2-4.el6.x86_64.rpm [root@server1 ~]# yum install gcc gcc-c++ [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-boost-5.7.17.tar.gz [root@server1 ~]# tar -zxf mysql-boost-5.7.17.tar.gz [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-5.7.17 mysql-boost-5.7.17.tar.gz [root@server1 ~]# cd mysql-5.7.17/ [root@server1 mysql-5.7.17]# ls boost dbug libmysql rapid testclients BUILD Docs libmysqld README unittest client Doxyfile-perfschema libservices regex VERSION cmake extra man scripts vio CMakeLists.txt include mysql-test sql win cmd-line-utils INSTALL mysys sql-common zlib config.h.cmake libbinlogevents mysys_ssl storage configure.cmake libbinlogstandalone packaging strings COPYING libevent plugin support-files [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql ##指定目录 -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data ##指定数据库路径 -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock ##Unix socket 存放路径 -DWITH_MYISAM_STORAGE_ENGINE=1 ##安装 myisam 存储引擎 -DWITH_INNOBASE_STORAGE_ENGINE=1 ##安装 innodb 存储引擎 -DWITH_PARTITION_STORAGE_ENGINE=1 ##安装数据库分区 -DDEFAULT_CHARSET=utf8 ##使用 utf8 字符 -DDEFAULT_COLLATION=utf8_general_ci ##校验字符 -DEXTRA_CHARSETS=all ##安装所有扩展字符集 -DWITH_BOOST=boost/boost_1_59_0/ ##指定 boost 路径 依赖软件。按照提示安装。 [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all CMake Error at cmake/boost.cmake:81 (MESSAGE): You can download it with -DDOWNLOAD_BOOST=1 -DWITH_BOOST=&lt;directory&gt; [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ Curses library not found. Please install appropriate package, remove CMakeCache.txt and rerun cmake.On Debian/Ubuntu, package name is libncurses5-dev, on Redhat and derivates it is ncurses-devel. Call Stack (most recent call first): [root@server1 mysql-5.7.17]# rm -rf CMakeCache.txt [root@server1 mysql-5.7.17]# yum install ncurses-devel [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ CMake Warning at cmake/bison.cmake:20 (MESSAGE): Bison executable not found in PATH [root@server1 mysql-5.7.17]# yum install bison [root@server1 mysql-5.7.17]# rm -rf CMakeCache.txt [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ make &amp;&amp; make install 初始化： [root@server1 mysql-5.7.17]# cd /usr/local/lnmp/mysql/ [root@server1 mysql]# cd support-files/ [root@server1 support-files]# ls magic my-default.cnf mysqld_multi.server mysql-log-rotate mysql.server [root@server1 support-files]# cp my-default.cnf /etc/my.cnf cp: overwrite `/etc/my.cnf&#39;? y [root@server1 support-files]# vim /etc/my.cnf 配置一下 [root@server1 support-files]# cp mysql.server /etc/init.d/mysqld [root@server1 support-files]# groupadd -g 27 mysql [root@server1 mysql]# useradd -u 27 -g 27 -M -d /usr/local/lnmp/mysql/data -s /sbin/nologin mysql [root@server1 mysql]# cd bin/ [root@server1 bin]# pwd /usr/local/lnmp/mysql/bin [root@server1 bin]# cd ~ [root@server1 ~]# vim .bash_profile [root@server1 ~]# source .bash_profile [root@server1 mysql]# mysqld --initialize --user=mysql 2018-08-05T03:08:09.732491Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details). 2018-08-05T03:08:09.732538Z 0 [Warning] &#39;NO_ZERO_DATE&#39;, &#39;NO_ZERO_IN_DATE&#39; and &#39;ERROR_FOR_DIVISION_BY_ZERO&#39; sql modes should be used with strict mode. They will be merged with strict mode in a future release. 2018-08-05T03:08:09.732542Z 0 [Warning] &#39;NO_AUTO_CREATE_USER&#39; sql mode was not set. 2018-08-05T03:08:11.826611Z 0 [Warning] InnoDB: New log files created, LSN=45790 2018-08-05T03:08:12.184322Z 0 [Warning] InnoDB: Creating foreign key constraint system tables. 2018-08-05T03:08:12.295367Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: c9afc6b8-985c-11e8-bdda-525400d0916d. 2018-08-05T03:08:12.377937Z 0 [Warning] Gtid table is not ready to be used. Table &#39;mysql.gtid_executed&#39; cannot be opened. 2018-08-05T03:08:12.378588Z 1 [Note] A temporary password is generated for root@localhost: WG.wto%gk4l! 这是mysql初始密码，等会修改密码会用到。 [root@server1 mysql]# chgrp -R root data/ [root@server1 mysql]# ls bin data include man README support-files COPYING docs lib mysql-test share [root@server1 mysql]# /etc/init.d/mysqld start Starting MySQL.Logging to &#39;/usr/local/lnmp/mysql/data/server1.err&#39;. SUCCESS! [root@server1 mysql]# /etc/init.d/mysqld stop Shutting down MySQL.. SUCCESS! [root@server1 mysql]# mysql_secure_installation [root@server1 mysql]# /etc/init.d/mysqld start Starting MySQL.Logging to &#39;/usr/local/lnmp/mysql/data/server1.err&#39;. SUCCESS! [root@server1 mysql]# mysql_secure_installation mysql安全配置，密码就是刚才初始化的，修改 [root@server1 mysql]# mysql -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 6 Server version: 5.7.17 Source distribution Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; show databases; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | | sys | +--------------------+ 4 rows in set (0.00 sec) mysql&gt; php源码编译安装 [root@server1 ~]# tar -jxf php-5.6.35.tar.bz2 [root@server1 ~]# ls gd-devel-2.0.35-11.el6.x86_64.rpm php-5.6.35.tar.bz2 php-5.6.35 re2c-0.13.5-1.el6.x86_64.rpm [root@server1 ~]# cd php-5.6.35 [root@server1 ~]# ./configure –prefix=/usr/local/lnmp/php –with-config-file-path=/usr/local/lnmp/php/etc –with-mysql=mysqlnd –enable-mysqlnd –with-mysqli=mysqlnd –with-pdo-mysql=mysqlnd –with-openssl –with-snmp –with-gd –with-zlib –with-curl –with-libxml-dir –with-png-dir –with-jpeg-dir –with-freetype-dir –with-pear –with-gettext –with-gmp –enable-inline-optimization –enable-soap –enable-ftp –enable-sockets –enable-mbstring –enable-fpm –with-fpm-user=nginx –with-fpm-group=nginx –with-mcrypt –with-mhash php源码编译时不会生成缓存文件，看报错缺少啥就安装啥！！（devel） 这几个包要到网上下，其他的yum都有 gd-devel-2.0.35-11.el6.x86_64.rpm libmcrypt-2.5.8-9.el6.x86_64.rpm libmcrypt-devel-2.5.8-9.el6.x86_64.rpm re2c-0.13.5-1.el6.x86_64.rpm 这是个警告需要的包 这里不一一列举了。。。 配置： [root@server1 ~]# cd /usr/local/lnmp/ [root@server1 lnmp]# ls mysql php [root@server1 lnmp]# cd php/ [root@server1 php]# cd etc/ [root@server1 etc]# ls pear.conf php-fpm.conf.default [root@server1 etc]# cp php-fpm.conf.default php-fpm.conf [root@server1 etc]# ls pear.conf php-fpm.conf php-fpm.conf.default [root@server1 etc]# cd ~ [root@server1 ~]# cd php-5.6.35 [root@server1 php-5.6.35]# cp php.ini-production /usr/local/lnmp/php/etc/php.ini [root@server1 php-5.6.35]# vim /usr/local/lnmp/php/etc/php.ini ------------------ 修改date.timezone =Asia/Shanghai ------------------ [root@server1 php-5.6.35]# cd /usr/local/lnmp/php/etc/ [root@server1 etc]# ls pear.conf php-fpm.conf php-fpm.conf.default php.ini [root@server1 etc]# vim php-fpm.conf [root@server1 etc]# id nginx id: nginx: No such user [root@server1 etc]# useradd -M -d /usr/local/lnmp/nginx -s /sbin/nologin nginx [root@server1 etc]# cd ~ [root@server1 ~]# cd php-5.6.35 [root@server1 php-5.6.35]# cd sapi/ [root@server1 sapi]# cd fpm/ [root@server1 fpm]# ls config.m4 init.d.php-fpm.in php-fpm.8 php-fpm.service tests CREDITS LICENSE php-fpm.8.in php-fpm.service.in www.conf.in fpm Makefile.frag php-fpm.conf status.html init.d.php-fpm php-fpm php-fpm.conf.in status.html.in [root@server1 fpm]# cp init.d.php-fpm /etc/init.d/php-fpm [root@server1 fpm]# chmod +x /etc/init.d/php-fpm [root@server1 fpm]# /etc/init.d/php-fpm start Starting php-fpm done [root@server1 fpm]# nginx解压与安装: [root@server1 ~]# tar zxf nginx-1.10.1.tar.gz [root@server1 ~]# tar zxf nginx-sticky-module-1.1.tar.gz [root@server1 ~]# ls nginx-1.10.1 nginx-sticky-module-1.1 nginx-1.10.1.tar.gz nginx-sticky-module-1.1.tar.gz [root@server1 ~]# rm -rf nginx-1.10.1.tar.gz nginx-sticky-module-1.1.tar.gz [root@server1 ~]# ls nginx-1.10.1 nginx-sticky-module-1.1 [root@server1 ~]# cd nginx-1.10.1/ cd src/core/ vim nginx.h ##修改标示符 ------------------------ 14 #define NGINX_VER &quot;nginx&quot; ------------------------ cd ../.. cd auto/cc vim gcc ##关掉debug 加快编译进度 --------------- 171 # debug 172 #CFLAGS=&quot;$CFLAGS -g&quot; --------------- cd - ./configure --help ./configure --prefix=/usr/local/lnmp/nginx --with-http_ssl_module --with-http_stub_status_module --with-threads --with-file-aio --user=nginx --group=nginx ##报错:安装pcre-devel ------------------------------ ./configure: error: the HTTP rewrite module requires the PCRE library. ----------------------------- yum install -y pcre-devel ##报错:安装openssl ---------------------------- ./configure: error: SSL modules require the OpenSSL library. ----------------------------- yum install -y openssl-devel make &amp;&amp; make install cd /usr/local/lnmp cd nginx/sbin cd conf/ ln -s /usr/local/lnmp/nginx/sbin/nginx /sbin/ ##建立启动命令 nginx -t ##检测nginx配置有没有问题 vim /etc/security/limits.conf ---------------------------- 54 nginx - nofile 65536 ----------------------------- useradd -u 800 nginx [root@server1 conf]# vim nginx.conf 检测： vim /usr/local/lnmp/nginx/html/index.php [root@server1 ~]# cd /usr/local/lnmp/nginx/html/ [root@server1 html]# ls 50x.html index.html index.php readme upload utility [root@server1 html]# mv ./upload/ bbs [root@server1 html]# ls 50x.html bbs index.html index.php readme utility [root@server1 mysql]# chmod 755 data /usr/local/lnmp/mysql/data/mysql.sock 添加mysqlsock路径，三个。 *socket= /usr/local/lnmp/mysql/data/mysql.sock [root@server1 data]# vim /usr/local/lnmp/php/etc/php.ini [root@server1 data]# /etc/init.d/php-fpm reload Reload service php-fpm done [root@server1 ~]# cd /usr/local/lnmp/nginx/html/bbs/ [root@server1 bbs]# chmod 777 config/ data/ uc_server/ uc_client/ -R 登陆172.25.5.1/bbs/install 简单设置后；" />
<meta property="og:description" content="lnmp = linux + nginx + mysql + php/python mysql 源码安装 [root@server1 ~]# mkdir /var/local/lnmp [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-boost-5.7.17.tar.gz [root@server1 ~]# yum install cmake-2.8.12.2-4.el6.x86_64.rpm [root@server1 ~]# yum install gcc gcc-c++ [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-boost-5.7.17.tar.gz [root@server1 ~]# tar -zxf mysql-boost-5.7.17.tar.gz [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-5.7.17 mysql-boost-5.7.17.tar.gz [root@server1 ~]# cd mysql-5.7.17/ [root@server1 mysql-5.7.17]# ls boost dbug libmysql rapid testclients BUILD Docs libmysqld README unittest client Doxyfile-perfschema libservices regex VERSION cmake extra man scripts vio CMakeLists.txt include mysql-test sql win cmd-line-utils INSTALL mysys sql-common zlib config.h.cmake libbinlogevents mysys_ssl storage configure.cmake libbinlogstandalone packaging strings COPYING libevent plugin support-files [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql ##指定目录 -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data ##指定数据库路径 -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock ##Unix socket 存放路径 -DWITH_MYISAM_STORAGE_ENGINE=1 ##安装 myisam 存储引擎 -DWITH_INNOBASE_STORAGE_ENGINE=1 ##安装 innodb 存储引擎 -DWITH_PARTITION_STORAGE_ENGINE=1 ##安装数据库分区 -DDEFAULT_CHARSET=utf8 ##使用 utf8 字符 -DDEFAULT_COLLATION=utf8_general_ci ##校验字符 -DEXTRA_CHARSETS=all ##安装所有扩展字符集 -DWITH_BOOST=boost/boost_1_59_0/ ##指定 boost 路径 依赖软件。按照提示安装。 [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all CMake Error at cmake/boost.cmake:81 (MESSAGE): You can download it with -DDOWNLOAD_BOOST=1 -DWITH_BOOST=&lt;directory&gt; [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ Curses library not found. Please install appropriate package, remove CMakeCache.txt and rerun cmake.On Debian/Ubuntu, package name is libncurses5-dev, on Redhat and derivates it is ncurses-devel. Call Stack (most recent call first): [root@server1 mysql-5.7.17]# rm -rf CMakeCache.txt [root@server1 mysql-5.7.17]# yum install ncurses-devel [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ CMake Warning at cmake/bison.cmake:20 (MESSAGE): Bison executable not found in PATH [root@server1 mysql-5.7.17]# yum install bison [root@server1 mysql-5.7.17]# rm -rf CMakeCache.txt [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ make &amp;&amp; make install 初始化： [root@server1 mysql-5.7.17]# cd /usr/local/lnmp/mysql/ [root@server1 mysql]# cd support-files/ [root@server1 support-files]# ls magic my-default.cnf mysqld_multi.server mysql-log-rotate mysql.server [root@server1 support-files]# cp my-default.cnf /etc/my.cnf cp: overwrite `/etc/my.cnf&#39;? y [root@server1 support-files]# vim /etc/my.cnf 配置一下 [root@server1 support-files]# cp mysql.server /etc/init.d/mysqld [root@server1 support-files]# groupadd -g 27 mysql [root@server1 mysql]# useradd -u 27 -g 27 -M -d /usr/local/lnmp/mysql/data -s /sbin/nologin mysql [root@server1 mysql]# cd bin/ [root@server1 bin]# pwd /usr/local/lnmp/mysql/bin [root@server1 bin]# cd ~ [root@server1 ~]# vim .bash_profile [root@server1 ~]# source .bash_profile [root@server1 mysql]# mysqld --initialize --user=mysql 2018-08-05T03:08:09.732491Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details). 2018-08-05T03:08:09.732538Z 0 [Warning] &#39;NO_ZERO_DATE&#39;, &#39;NO_ZERO_IN_DATE&#39; and &#39;ERROR_FOR_DIVISION_BY_ZERO&#39; sql modes should be used with strict mode. They will be merged with strict mode in a future release. 2018-08-05T03:08:09.732542Z 0 [Warning] &#39;NO_AUTO_CREATE_USER&#39; sql mode was not set. 2018-08-05T03:08:11.826611Z 0 [Warning] InnoDB: New log files created, LSN=45790 2018-08-05T03:08:12.184322Z 0 [Warning] InnoDB: Creating foreign key constraint system tables. 2018-08-05T03:08:12.295367Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: c9afc6b8-985c-11e8-bdda-525400d0916d. 2018-08-05T03:08:12.377937Z 0 [Warning] Gtid table is not ready to be used. Table &#39;mysql.gtid_executed&#39; cannot be opened. 2018-08-05T03:08:12.378588Z 1 [Note] A temporary password is generated for root@localhost: WG.wto%gk4l! 这是mysql初始密码，等会修改密码会用到。 [root@server1 mysql]# chgrp -R root data/ [root@server1 mysql]# ls bin data include man README support-files COPYING docs lib mysql-test share [root@server1 mysql]# /etc/init.d/mysqld start Starting MySQL.Logging to &#39;/usr/local/lnmp/mysql/data/server1.err&#39;. SUCCESS! [root@server1 mysql]# /etc/init.d/mysqld stop Shutting down MySQL.. SUCCESS! [root@server1 mysql]# mysql_secure_installation [root@server1 mysql]# /etc/init.d/mysqld start Starting MySQL.Logging to &#39;/usr/local/lnmp/mysql/data/server1.err&#39;. SUCCESS! [root@server1 mysql]# mysql_secure_installation mysql安全配置，密码就是刚才初始化的，修改 [root@server1 mysql]# mysql -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 6 Server version: 5.7.17 Source distribution Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; show databases; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | | sys | +--------------------+ 4 rows in set (0.00 sec) mysql&gt; php源码编译安装 [root@server1 ~]# tar -jxf php-5.6.35.tar.bz2 [root@server1 ~]# ls gd-devel-2.0.35-11.el6.x86_64.rpm php-5.6.35.tar.bz2 php-5.6.35 re2c-0.13.5-1.el6.x86_64.rpm [root@server1 ~]# cd php-5.6.35 [root@server1 ~]# ./configure –prefix=/usr/local/lnmp/php –with-config-file-path=/usr/local/lnmp/php/etc –with-mysql=mysqlnd –enable-mysqlnd –with-mysqli=mysqlnd –with-pdo-mysql=mysqlnd –with-openssl –with-snmp –with-gd –with-zlib –with-curl –with-libxml-dir –with-png-dir –with-jpeg-dir –with-freetype-dir –with-pear –with-gettext –with-gmp –enable-inline-optimization –enable-soap –enable-ftp –enable-sockets –enable-mbstring –enable-fpm –with-fpm-user=nginx –with-fpm-group=nginx –with-mcrypt –with-mhash php源码编译时不会生成缓存文件，看报错缺少啥就安装啥！！（devel） 这几个包要到网上下，其他的yum都有 gd-devel-2.0.35-11.el6.x86_64.rpm libmcrypt-2.5.8-9.el6.x86_64.rpm libmcrypt-devel-2.5.8-9.el6.x86_64.rpm re2c-0.13.5-1.el6.x86_64.rpm 这是个警告需要的包 这里不一一列举了。。。 配置： [root@server1 ~]# cd /usr/local/lnmp/ [root@server1 lnmp]# ls mysql php [root@server1 lnmp]# cd php/ [root@server1 php]# cd etc/ [root@server1 etc]# ls pear.conf php-fpm.conf.default [root@server1 etc]# cp php-fpm.conf.default php-fpm.conf [root@server1 etc]# ls pear.conf php-fpm.conf php-fpm.conf.default [root@server1 etc]# cd ~ [root@server1 ~]# cd php-5.6.35 [root@server1 php-5.6.35]# cp php.ini-production /usr/local/lnmp/php/etc/php.ini [root@server1 php-5.6.35]# vim /usr/local/lnmp/php/etc/php.ini ------------------ 修改date.timezone =Asia/Shanghai ------------------ [root@server1 php-5.6.35]# cd /usr/local/lnmp/php/etc/ [root@server1 etc]# ls pear.conf php-fpm.conf php-fpm.conf.default php.ini [root@server1 etc]# vim php-fpm.conf [root@server1 etc]# id nginx id: nginx: No such user [root@server1 etc]# useradd -M -d /usr/local/lnmp/nginx -s /sbin/nologin nginx [root@server1 etc]# cd ~ [root@server1 ~]# cd php-5.6.35 [root@server1 php-5.6.35]# cd sapi/ [root@server1 sapi]# cd fpm/ [root@server1 fpm]# ls config.m4 init.d.php-fpm.in php-fpm.8 php-fpm.service tests CREDITS LICENSE php-fpm.8.in php-fpm.service.in www.conf.in fpm Makefile.frag php-fpm.conf status.html init.d.php-fpm php-fpm php-fpm.conf.in status.html.in [root@server1 fpm]# cp init.d.php-fpm /etc/init.d/php-fpm [root@server1 fpm]# chmod +x /etc/init.d/php-fpm [root@server1 fpm]# /etc/init.d/php-fpm start Starting php-fpm done [root@server1 fpm]# nginx解压与安装: [root@server1 ~]# tar zxf nginx-1.10.1.tar.gz [root@server1 ~]# tar zxf nginx-sticky-module-1.1.tar.gz [root@server1 ~]# ls nginx-1.10.1 nginx-sticky-module-1.1 nginx-1.10.1.tar.gz nginx-sticky-module-1.1.tar.gz [root@server1 ~]# rm -rf nginx-1.10.1.tar.gz nginx-sticky-module-1.1.tar.gz [root@server1 ~]# ls nginx-1.10.1 nginx-sticky-module-1.1 [root@server1 ~]# cd nginx-1.10.1/ cd src/core/ vim nginx.h ##修改标示符 ------------------------ 14 #define NGINX_VER &quot;nginx&quot; ------------------------ cd ../.. cd auto/cc vim gcc ##关掉debug 加快编译进度 --------------- 171 # debug 172 #CFLAGS=&quot;$CFLAGS -g&quot; --------------- cd - ./configure --help ./configure --prefix=/usr/local/lnmp/nginx --with-http_ssl_module --with-http_stub_status_module --with-threads --with-file-aio --user=nginx --group=nginx ##报错:安装pcre-devel ------------------------------ ./configure: error: the HTTP rewrite module requires the PCRE library. ----------------------------- yum install -y pcre-devel ##报错:安装openssl ---------------------------- ./configure: error: SSL modules require the OpenSSL library. ----------------------------- yum install -y openssl-devel make &amp;&amp; make install cd /usr/local/lnmp cd nginx/sbin cd conf/ ln -s /usr/local/lnmp/nginx/sbin/nginx /sbin/ ##建立启动命令 nginx -t ##检测nginx配置有没有问题 vim /etc/security/limits.conf ---------------------------- 54 nginx - nofile 65536 ----------------------------- useradd -u 800 nginx [root@server1 conf]# vim nginx.conf 检测： vim /usr/local/lnmp/nginx/html/index.php [root@server1 ~]# cd /usr/local/lnmp/nginx/html/ [root@server1 html]# ls 50x.html index.html index.php readme upload utility [root@server1 html]# mv ./upload/ bbs [root@server1 html]# ls 50x.html bbs index.html index.php readme utility [root@server1 mysql]# chmod 755 data /usr/local/lnmp/mysql/data/mysql.sock 添加mysqlsock路径，三个。 *socket= /usr/local/lnmp/mysql/data/mysql.sock [root@server1 data]# vim /usr/local/lnmp/php/etc/php.ini [root@server1 data]# /etc/init.d/php-fpm reload Reload service php-fpm done [root@server1 ~]# cd /usr/local/lnmp/nginx/html/bbs/ [root@server1 bbs]# chmod 777 config/ data/ uc_server/ uc_client/ -R 登陆172.25.5.1/bbs/install 简单设置后；" />
<link rel="canonical" href="https://mlh.app/2018/08/04/730167.html" />
<meta property="og:url" content="https://mlh.app/2018/08/04/730167.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-04T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"lnmp = linux + nginx + mysql + php/python mysql 源码安装 [root@server1 ~]# mkdir /var/local/lnmp [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-boost-5.7.17.tar.gz [root@server1 ~]# yum install cmake-2.8.12.2-4.el6.x86_64.rpm [root@server1 ~]# yum install gcc gcc-c++ [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-boost-5.7.17.tar.gz [root@server1 ~]# tar -zxf mysql-boost-5.7.17.tar.gz [root@server1 ~]# ls cmake-2.8.12.2-4.el6.x86_64.rpm mysql-5.7.17 mysql-boost-5.7.17.tar.gz [root@server1 ~]# cd mysql-5.7.17/ [root@server1 mysql-5.7.17]# ls boost dbug libmysql rapid testclients BUILD Docs libmysqld README unittest client Doxyfile-perfschema libservices regex VERSION cmake extra man scripts vio CMakeLists.txt include mysql-test sql win cmd-line-utils INSTALL mysys sql-common zlib config.h.cmake libbinlogevents mysys_ssl storage configure.cmake libbinlogstandalone packaging strings COPYING libevent plugin support-files [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql ##指定目录 -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data ##指定数据库路径 -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock ##Unix socket 存放路径 -DWITH_MYISAM_STORAGE_ENGINE=1 ##安装 myisam 存储引擎 -DWITH_INNOBASE_STORAGE_ENGINE=1 ##安装 innodb 存储引擎 -DWITH_PARTITION_STORAGE_ENGINE=1 ##安装数据库分区 -DDEFAULT_CHARSET=utf8 ##使用 utf8 字符 -DDEFAULT_COLLATION=utf8_general_ci ##校验字符 -DEXTRA_CHARSETS=all ##安装所有扩展字符集 -DWITH_BOOST=boost/boost_1_59_0/ ##指定 boost 路径 依赖软件。按照提示安装。 [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all CMake Error at cmake/boost.cmake:81 (MESSAGE): You can download it with -DDOWNLOAD_BOOST=1 -DWITH_BOOST=&lt;directory&gt; [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ Curses library not found. Please install appropriate package, remove CMakeCache.txt and rerun cmake.On Debian/Ubuntu, package name is libncurses5-dev, on Redhat and derivates it is ncurses-devel. Call Stack (most recent call first): [root@server1 mysql-5.7.17]# rm -rf CMakeCache.txt [root@server1 mysql-5.7.17]# yum install ncurses-devel [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ CMake Warning at cmake/bison.cmake:20 (MESSAGE): Bison executable not found in PATH [root@server1 mysql-5.7.17]# yum install bison [root@server1 mysql-5.7.17]# rm -rf CMakeCache.txt [root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/ make &amp;&amp; make install 初始化： [root@server1 mysql-5.7.17]# cd /usr/local/lnmp/mysql/ [root@server1 mysql]# cd support-files/ [root@server1 support-files]# ls magic my-default.cnf mysqld_multi.server mysql-log-rotate mysql.server [root@server1 support-files]# cp my-default.cnf /etc/my.cnf cp: overwrite `/etc/my.cnf&#39;? y [root@server1 support-files]# vim /etc/my.cnf 配置一下 [root@server1 support-files]# cp mysql.server /etc/init.d/mysqld [root@server1 support-files]# groupadd -g 27 mysql [root@server1 mysql]# useradd -u 27 -g 27 -M -d /usr/local/lnmp/mysql/data -s /sbin/nologin mysql [root@server1 mysql]# cd bin/ [root@server1 bin]# pwd /usr/local/lnmp/mysql/bin [root@server1 bin]# cd ~ [root@server1 ~]# vim .bash_profile [root@server1 ~]# source .bash_profile [root@server1 mysql]# mysqld --initialize --user=mysql 2018-08-05T03:08:09.732491Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details). 2018-08-05T03:08:09.732538Z 0 [Warning] &#39;NO_ZERO_DATE&#39;, &#39;NO_ZERO_IN_DATE&#39; and &#39;ERROR_FOR_DIVISION_BY_ZERO&#39; sql modes should be used with strict mode. They will be merged with strict mode in a future release. 2018-08-05T03:08:09.732542Z 0 [Warning] &#39;NO_AUTO_CREATE_USER&#39; sql mode was not set. 2018-08-05T03:08:11.826611Z 0 [Warning] InnoDB: New log files created, LSN=45790 2018-08-05T03:08:12.184322Z 0 [Warning] InnoDB: Creating foreign key constraint system tables. 2018-08-05T03:08:12.295367Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: c9afc6b8-985c-11e8-bdda-525400d0916d. 2018-08-05T03:08:12.377937Z 0 [Warning] Gtid table is not ready to be used. Table &#39;mysql.gtid_executed&#39; cannot be opened. 2018-08-05T03:08:12.378588Z 1 [Note] A temporary password is generated for root@localhost: WG.wto%gk4l! 这是mysql初始密码，等会修改密码会用到。 [root@server1 mysql]# chgrp -R root data/ [root@server1 mysql]# ls bin data include man README support-files COPYING docs lib mysql-test share [root@server1 mysql]# /etc/init.d/mysqld start Starting MySQL.Logging to &#39;/usr/local/lnmp/mysql/data/server1.err&#39;. SUCCESS! [root@server1 mysql]# /etc/init.d/mysqld stop Shutting down MySQL.. SUCCESS! [root@server1 mysql]# mysql_secure_installation [root@server1 mysql]# /etc/init.d/mysqld start Starting MySQL.Logging to &#39;/usr/local/lnmp/mysql/data/server1.err&#39;. SUCCESS! [root@server1 mysql]# mysql_secure_installation mysql安全配置，密码就是刚才初始化的，修改 [root@server1 mysql]# mysql -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g. Your MySQL connection id is 6 Server version: 5.7.17 Source distribution Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement. mysql&gt; show databases; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | | sys | +--------------------+ 4 rows in set (0.00 sec) mysql&gt; php源码编译安装 [root@server1 ~]# tar -jxf php-5.6.35.tar.bz2 [root@server1 ~]# ls gd-devel-2.0.35-11.el6.x86_64.rpm php-5.6.35.tar.bz2 php-5.6.35 re2c-0.13.5-1.el6.x86_64.rpm [root@server1 ~]# cd php-5.6.35 [root@server1 ~]# ./configure –prefix=/usr/local/lnmp/php –with-config-file-path=/usr/local/lnmp/php/etc –with-mysql=mysqlnd –enable-mysqlnd –with-mysqli=mysqlnd –with-pdo-mysql=mysqlnd –with-openssl –with-snmp –with-gd –with-zlib –with-curl –with-libxml-dir –with-png-dir –with-jpeg-dir –with-freetype-dir –with-pear –with-gettext –with-gmp –enable-inline-optimization –enable-soap –enable-ftp –enable-sockets –enable-mbstring –enable-fpm –with-fpm-user=nginx –with-fpm-group=nginx –with-mcrypt –with-mhash php源码编译时不会生成缓存文件，看报错缺少啥就安装啥！！（devel） 这几个包要到网上下，其他的yum都有 gd-devel-2.0.35-11.el6.x86_64.rpm libmcrypt-2.5.8-9.el6.x86_64.rpm libmcrypt-devel-2.5.8-9.el6.x86_64.rpm re2c-0.13.5-1.el6.x86_64.rpm 这是个警告需要的包 这里不一一列举了。。。 配置： [root@server1 ~]# cd /usr/local/lnmp/ [root@server1 lnmp]# ls mysql php [root@server1 lnmp]# cd php/ [root@server1 php]# cd etc/ [root@server1 etc]# ls pear.conf php-fpm.conf.default [root@server1 etc]# cp php-fpm.conf.default php-fpm.conf [root@server1 etc]# ls pear.conf php-fpm.conf php-fpm.conf.default [root@server1 etc]# cd ~ [root@server1 ~]# cd php-5.6.35 [root@server1 php-5.6.35]# cp php.ini-production /usr/local/lnmp/php/etc/php.ini [root@server1 php-5.6.35]# vim /usr/local/lnmp/php/etc/php.ini ------------------ 修改date.timezone =Asia/Shanghai ------------------ [root@server1 php-5.6.35]# cd /usr/local/lnmp/php/etc/ [root@server1 etc]# ls pear.conf php-fpm.conf php-fpm.conf.default php.ini [root@server1 etc]# vim php-fpm.conf [root@server1 etc]# id nginx id: nginx: No such user [root@server1 etc]# useradd -M -d /usr/local/lnmp/nginx -s /sbin/nologin nginx [root@server1 etc]# cd ~ [root@server1 ~]# cd php-5.6.35 [root@server1 php-5.6.35]# cd sapi/ [root@server1 sapi]# cd fpm/ [root@server1 fpm]# ls config.m4 init.d.php-fpm.in php-fpm.8 php-fpm.service tests CREDITS LICENSE php-fpm.8.in php-fpm.service.in www.conf.in fpm Makefile.frag php-fpm.conf status.html init.d.php-fpm php-fpm php-fpm.conf.in status.html.in [root@server1 fpm]# cp init.d.php-fpm /etc/init.d/php-fpm [root@server1 fpm]# chmod +x /etc/init.d/php-fpm [root@server1 fpm]# /etc/init.d/php-fpm start Starting php-fpm done [root@server1 fpm]# nginx解压与安装: [root@server1 ~]# tar zxf nginx-1.10.1.tar.gz [root@server1 ~]# tar zxf nginx-sticky-module-1.1.tar.gz [root@server1 ~]# ls nginx-1.10.1 nginx-sticky-module-1.1 nginx-1.10.1.tar.gz nginx-sticky-module-1.1.tar.gz [root@server1 ~]# rm -rf nginx-1.10.1.tar.gz nginx-sticky-module-1.1.tar.gz [root@server1 ~]# ls nginx-1.10.1 nginx-sticky-module-1.1 [root@server1 ~]# cd nginx-1.10.1/ cd src/core/ vim nginx.h ##修改标示符 ------------------------ 14 #define NGINX_VER &quot;nginx&quot; ------------------------ cd ../.. cd auto/cc vim gcc ##关掉debug 加快编译进度 --------------- 171 # debug 172 #CFLAGS=&quot;$CFLAGS -g&quot; --------------- cd - ./configure --help ./configure --prefix=/usr/local/lnmp/nginx --with-http_ssl_module --with-http_stub_status_module --with-threads --with-file-aio --user=nginx --group=nginx ##报错:安装pcre-devel ------------------------------ ./configure: error: the HTTP rewrite module requires the PCRE library. ----------------------------- yum install -y pcre-devel ##报错:安装openssl ---------------------------- ./configure: error: SSL modules require the OpenSSL library. ----------------------------- yum install -y openssl-devel make &amp;&amp; make install cd /usr/local/lnmp cd nginx/sbin cd conf/ ln -s /usr/local/lnmp/nginx/sbin/nginx /sbin/ ##建立启动命令 nginx -t ##检测nginx配置有没有问题 vim /etc/security/limits.conf ---------------------------- 54 nginx - nofile 65536 ----------------------------- useradd -u 800 nginx [root@server1 conf]# vim nginx.conf 检测： vim /usr/local/lnmp/nginx/html/index.php [root@server1 ~]# cd /usr/local/lnmp/nginx/html/ [root@server1 html]# ls 50x.html index.html index.php readme upload utility [root@server1 html]# mv ./upload/ bbs [root@server1 html]# ls 50x.html bbs index.html index.php readme utility [root@server1 mysql]# chmod 755 data /usr/local/lnmp/mysql/data/mysql.sock 添加mysqlsock路径，三个。 *socket= /usr/local/lnmp/mysql/data/mysql.sock [root@server1 data]# vim /usr/local/lnmp/php/etc/php.ini [root@server1 data]# /etc/init.d/php-fpm reload Reload service php-fpm done [root@server1 ~]# cd /usr/local/lnmp/nginx/html/bbs/ [root@server1 bbs]# chmod 777 config/ data/ uc_server/ uc_client/ -R 登陆172.25.5.1/bbs/install 简单设置后；","@type":"BlogPosting","url":"https://mlh.app/2018/08/04/730167.html","headline":"lnmp","dateModified":"2018-08-04T00:00:00+08:00","datePublished":"2018-08-04T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/04/730167.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>lnmp</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f57960eb32.css"> 
 <div id="content_views" class="markdown_views prism-tomorrow-night-eighties"> 
  <!-- flowchart 箭头图标 勿删 --> 
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> 
  <h3 id="lnmp-linux-nginx-mysql-phppython">lnmp = linux + nginx + mysql + php/python</h3> 
  <h3 id="mysql-源码安装">mysql 源码安装</h3> 
  <pre class="prettyprint"><code class=" hljs avrasm">[root@server1 ~]<span class="hljs-preprocessor"># mkdir /var/local/lnmp</span>

[root@server1 ~]<span class="hljs-preprocessor"># ls</span>
cmake-<span class="hljs-number">2.8</span><span class="hljs-number">.12</span><span class="hljs-number">.2</span>-<span class="hljs-number">4.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>  mysql-boost-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span><span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.gz</span>
[root@server1 ~]<span class="hljs-preprocessor"># yum install cmake-2.8.12.2-4.el6.x86_64.rpm</span>

[root@server1 ~]<span class="hljs-preprocessor"># yum install gcc gcc-c++</span>

[root@server1 ~]<span class="hljs-preprocessor"># ls</span>
cmake-<span class="hljs-number">2.8</span><span class="hljs-number">.12</span><span class="hljs-number">.2</span>-<span class="hljs-number">4.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>  mysql-boost-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span><span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.gz</span>
[root@server1 ~]<span class="hljs-preprocessor"># tar -zxf mysql-boost-5.7.17.tar.gz </span>
[root@server1 ~]<span class="hljs-preprocessor"># ls</span>
cmake-<span class="hljs-number">2.8</span><span class="hljs-number">.12</span><span class="hljs-number">.2</span>-<span class="hljs-number">4.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>  mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>  mysql-boost-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span><span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.gz</span>
[root@server1 ~]<span class="hljs-preprocessor"># cd mysql-5.7.17/</span>
[root@server1 mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-preprocessor"># ls</span>
boost            dbug                 libmysql     rapid          testclients
BUILD            Docs                 libmysqld    README         unittest
client           Doxyfile-perfschema  libservices  regex          VERSION
cmake            extra                man          scripts        vio
CMakeLists<span class="hljs-preprocessor">.txt</span>   include              mysql-test   sql            win
cmd-line-utils   INSTALL              mysys        sql-common     zlib
config<span class="hljs-preprocessor">.h</span><span class="hljs-preprocessor">.cmake</span>   libbinlogevents      mysys_ssl    storage
configure<span class="hljs-preprocessor">.cmake</span>  libbinlogstandalone  packaging    strings
COPYING          libevent             plugin       support-files


</code></pre> 
  <blockquote> 
   <p>[root@server1 mysql-5.7.17]# cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all</p> 
  </blockquote> 
  <pre class="prettyprint"><code class=" hljs haml">-<span class="ruby"><span class="hljs-constant">DCMAKE_INSTALL_PREFIX</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/lnmp/mysql</span> <span class="hljs-comment">##指定目录</span> </span>-<span class="ruby"><span class="hljs-constant">DMYSQL_DATADIR</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/lnmp/mysql</span><span class="hljs-regexp">/data ##指定数据库路径 </span></span>-<span class="ruby"><span class="hljs-constant">DMYSQL_UNIX_ADDR</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/lnmp/mysql</span><span class="hljs-regexp">/data/mysql</span>.sock <span class="hljs-comment">##Unix socket 存放路径</span> </span>-<span class="ruby"><span class="hljs-constant">DWITH_MYISAM_STORAGE_ENGINE</span>=<span class="hljs-number">1</span> <span class="hljs-comment">##安装 myisam 存储引擎</span> </span>-<span class="ruby"><span class="hljs-constant">DWITH_INNOBASE_STORAGE_ENGINE</span>=<span class="hljs-number">1</span> <span class="hljs-comment">##安装 innodb 存储引擎</span> </span>-<span class="ruby"><span class="hljs-constant">DWITH_PARTITION_STORAGE_ENGINE</span>=<span class="hljs-number">1</span> <span class="hljs-comment">##安装数据库分区</span> </span>-<span class="ruby"><span class="hljs-constant">DDEFAULT_CHARSET</span>=utf8 <span class="hljs-comment">##使用 utf8 字符</span> </span>-<span class="ruby"><span class="hljs-constant">DDEFAULT_COLLATION</span>=utf8_general_ci <span class="hljs-comment">##校验字符</span> </span>-<span class="ruby"><span class="hljs-constant">DEXTRA_CHARSETS</span>=all <span class="hljs-comment">##安装所有扩展字符集</span> </span>-<span class="ruby"><span class="hljs-constant">DWITH_BOOST</span>=boost/boost_1_59_<span class="hljs-number">0</span>/ <span class="hljs-comment">##指定 boost 路径</span></span></code></pre> 
  <h5 id="依赖软件按照提示安装">依赖软件。按照提示安装。</h5> 
  <pre class="prettyprint"><code class=" hljs coffeescript">[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all</span>

CMake Error at cmake/boost.<span class="hljs-attribute">cmake</span>:<span class="hljs-number">81</span> (MESSAGE):
  You can download it <span class="hljs-reserved">with</span> -DDOWNLOAD_BOOST=<span class="hljs-number">1</span> -DWITH_BOOST=&lt;directory&gt;


[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/</span>

  Curses library <span class="hljs-keyword">not</span> found.  Please install appropriate package,

      remove CMakeCache.txt <span class="hljs-keyword">and</span> rerun cmake.On Debian/Ubuntu, package name <span class="hljs-keyword">is</span> libncurses5-dev, <span class="hljs-literal">on</span> Redhat <span class="hljs-keyword">and</span> derivates it <span class="hljs-keyword">is</span> ncurses-devel.
Call Stack (most recent call first):

[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># rm -rf CMakeCache.txt</span>
[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># yum install ncurses-devel</span>

[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/</span>

CMake Warning at cmake/bison.<span class="hljs-attribute">cmake</span>:<span class="hljs-number">20</span> (MESSAGE):
  Bison executable <span class="hljs-keyword">not</span> found <span class="hljs-keyword">in</span> PATH

[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># yum install bison</span>
[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># rm -rf CMakeCache.txt</span>

[root<span class="hljs-property">@server1</span> mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># cmake -DCMAKE_INSTALL_PREFIX=/usr/local/lnmp/mysql -DMYSQL_DATADIR=/usr/local/lnmp/mysql/data -DMYSQL_UNIX_ADDR=/usr/local/lnmp/mysql/data/mysql.sock -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DEXTRA_CHARSETS=all -DWITH_BOOST=boost/boost_1_59_0/</span>
</code></pre> 
  <pre class="prettyprint"><code class=" hljs go"><span class="hljs-built_in">make</span> &amp;&amp; <span class="hljs-built_in">make</span> install</code></pre> 
  <ul> 
   <li>初始化：</li> 
  </ul> 
  <pre class="prettyprint"><code class=" hljs applescript">
[root@server1 mysql-<span class="hljs-number">5.7</span><span class="hljs-number">.17</span>]<span class="hljs-comment"># cd /usr/local/lnmp/mysql/</span>

[root@server1 mysql]<span class="hljs-comment"># cd support-files/</span>
[root@server1 support-files]<span class="hljs-comment"># ls</span>
magic  <span class="hljs-keyword">my</span>-default.cnf  mysqld_multi.server  mysql-<span class="hljs-command">log</span>-rotate  mysql.server
[root@server1 support-files]<span class="hljs-comment"># cp my-default.cnf /etc/my.cnf</span>
cp: overwrite `/etc/<span class="hljs-keyword">my</span>.cnf'? y
[root@server1 support-files]<span class="hljs-comment"># vim /etc/my.cnf 配置一下</span>

[root@server1 support-files]<span class="hljs-comment"># cp mysql.server /etc/init.d/mysqld</span>

[root@server1 support-files]<span class="hljs-comment"># groupadd -g 27 mysql</span>
[root@server1 mysql]<span class="hljs-comment"># useradd -u 27 -g 27 -M -d /usr/local/lnmp/mysql/data -s /sbin/nologin mysql</span>
[root@server1 mysql]<span class="hljs-comment"># cd bin/</span>
[root@server1 bin]<span class="hljs-comment"># pwd</span>
/usr/<span class="hljs-keyword">local</span>/lnmp/mysql/bin
[root@server1 bin]<span class="hljs-comment"># cd ~</span>
[root@server1 ~]<span class="hljs-comment"># vim .bash_profile </span>
[root@server1 ~]<span class="hljs-comment"># source .bash_profile </span>

[root@server1 mysql]<span class="hljs-comment"># mysqld --initialize --user=mysql</span>
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">09.732491</span>Z <span class="hljs-number">0</span> [Warning] TIMESTAMP <span class="hljs-keyword">with</span> implicit DEFAULT value <span class="hljs-keyword">is</span> deprecated. Please use <span class="hljs-comment">--explicit_defaults_for_timestamp server option (see documentation for more details).</span>
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">09.732538</span>Z <span class="hljs-number">0</span> [Warning] 'NO_ZERO_DATE', 'NO_ZERO_IN_DATE' <span class="hljs-keyword">and</span> 'ERROR_FOR_DIVISION_BY_ZERO' sql modes should be used <span class="hljs-keyword">with</span> strict mode. They will be merged <span class="hljs-keyword">with</span> strict mode <span class="hljs-keyword">in</span> a future release.
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">09.732542</span>Z <span class="hljs-number">0</span> [Warning] 'NO_AUTO_CREATE_USER' sql mode was <span class="hljs-keyword">not</span> <span class="hljs-keyword">set</span>.
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">11.826611</span>Z <span class="hljs-number">0</span> [Warning] InnoDB: New <span class="hljs-command">log</span> files created, LSN=<span class="hljs-number">45790</span>
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">12.184322</span>Z <span class="hljs-number">0</span> [Warning] InnoDB: Creating foreign key constraint system tables.
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">12.295367</span>Z <span class="hljs-number">0</span> [Warning] No existing UUID has been found, so we assume <span class="hljs-keyword">that</span> this <span class="hljs-keyword">is</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">first</span> <span class="hljs-property">time</span> <span class="hljs-keyword">that</span> this server has been started. Generating a new UUID: c9afc6b8-<span class="hljs-number">985</span>c-<span class="hljs-number">11e8</span>-bdda-<span class="hljs-number">525400</span>d0916d.
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">12.377937</span>Z <span class="hljs-number">0</span> [Warning] Gtid table <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> ready <span class="hljs-keyword">to</span> be used. Table 'mysql.gtid_executed' cannot be opened.
<span class="hljs-number">2018</span>-<span class="hljs-number">08</span>-<span class="hljs-number">05</span>T03:<span class="hljs-number">08</span>:<span class="hljs-number">12.378588</span>Z <span class="hljs-number">1</span> [Note] A temporary password <span class="hljs-keyword">is</span> generated <span class="hljs-keyword">for</span> 
root@localhost: WG.wto%gk4l!    这是mysql初始密码，等会修改密码会用到。


[root@server1 mysql]<span class="hljs-comment"># chgrp -R root data/</span>
[root@server1 mysql]<span class="hljs-comment"># ls</span>
bin      data  include  man         README  support-files
COPYING  docs  lib      mysql-test  share

[root@server1 mysql]<span class="hljs-comment"># /etc/init.d/mysqld start</span>
Starting MySQL.Logging <span class="hljs-keyword">to</span> '/usr/<span class="hljs-keyword">local</span>/lnmp/mysql/data/server1.err'.
 SUCCESS! 
[root@server1 mysql]<span class="hljs-comment"># /etc/init.d/mysqld stop</span>
Shutting down MySQL.. SUCCESS! 

[root@server1 mysql]<span class="hljs-comment"># mysql_secure_installation </span>


[root@server1 mysql]<span class="hljs-comment"># /etc/init.d/mysqld start</span>
Starting MySQL.Logging <span class="hljs-keyword">to</span> '/usr/<span class="hljs-keyword">local</span>/lnmp/mysql/data/server1.err'.
 SUCCESS! 
[root@server1 mysql]<span class="hljs-comment"># mysql_secure_installation </span>

mysql安全配置，密码就是刚才初始化的，修改

[root@server1 mysql]<span class="hljs-comment"># mysql -p</span>
Enter password: 
Welcome <span class="hljs-keyword">to</span> <span class="hljs-keyword">the</span> MySQL monitor.  Commands <span class="hljs-keyword">end</span> <span class="hljs-keyword">with</span> ; <span class="hljs-keyword">or</span> \g.
Your MySQL connection <span class="hljs-property">id</span> <span class="hljs-keyword">is</span> <span class="hljs-number">6</span>
Server <span class="hljs-property">version</span>: <span class="hljs-number">5.7</span><span class="hljs-number">.17</span> Source distribution

Copyright (c) <span class="hljs-number">2000</span>, <span class="hljs-number">2016</span>, Oracle <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> <span class="hljs-keyword">its</span> affiliates. All rights reserved.

Oracle <span class="hljs-keyword">is</span> a registered trademark <span class="hljs-keyword">of</span> Oracle Corporation <span class="hljs-keyword">and</span>/<span class="hljs-keyword">or</span> <span class="hljs-keyword">its</span>
affiliates. Other names may be trademarks <span class="hljs-keyword">of</span> their respective
owners.

Type 'help;' <span class="hljs-keyword">or</span> '\h' <span class="hljs-keyword">for</span> help. Type '\c' <span class="hljs-keyword">to</span> clear <span class="hljs-keyword">the</span> current input statement.


mysql&gt; show databases;
+<span class="hljs-comment">--------------------+</span>
| Database           |
+<span class="hljs-comment">--------------------+</span>
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+<span class="hljs-comment">--------------------+</span>
<span class="hljs-number">4</span> rows <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)

mysql&gt;



</code></pre> 
  <hr> 
  <h4 id="php源码编译安装">php源码编译安装</h4> 
  <pre class="prettyprint"><code class=" hljs avrasm">[root@server1 ~]<span class="hljs-preprocessor"># tar -jxf php-5.6.35.tar.bz2 </span>
[root@server1 ~]<span class="hljs-preprocessor"># ls</span>
gd-devel-<span class="hljs-number">2.0</span><span class="hljs-number">.35</span>-<span class="hljs-number">11.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>  php-<span class="hljs-number">5.6</span><span class="hljs-number">.35</span><span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.bz</span>2
php-<span class="hljs-number">5.6</span><span class="hljs-number">.35</span>                         re2c-<span class="hljs-number">0.13</span><span class="hljs-number">.5</span>-<span class="hljs-number">1.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>
[root@server1 ~]<span class="hljs-preprocessor"># cd php-5.6.35</span>

</code></pre> 
  <blockquote> 
   <p>[root@server1 ~]# ./configure –prefix=/usr/local/lnmp/php –with-config-file-path=/usr/local/lnmp/php/etc –with-mysql=mysqlnd –enable-mysqlnd –with-mysqli=mysqlnd –with-pdo-mysql=mysqlnd –with-openssl –with-snmp –with-gd –with-zlib –with-curl –with-libxml-dir –with-png-dir –with-jpeg-dir –with-freetype-dir –with-pear –with-gettext –with-gmp –enable-inline-optimization –enable-soap –enable-ftp –enable-sockets –enable-mbstring –enable-fpm –with-fpm-user=nginx –with-fpm-group=nginx –with-mcrypt –with-mhash</p> 
  </blockquote> 
  <h4 id="php源码编译时不会生成缓存文件看报错缺少啥就安装啥devel">php源码编译时不会生成缓存文件，看报错缺少啥就安装啥！！（devel）</h4> 
  <p>这几个包要到网上下，其他的yum都有</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">gd-devel-<span class="hljs-number">2.0</span><span class="hljs-number">.35</span>-<span class="hljs-number">11.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>       
libmcrypt-<span class="hljs-number">2.5</span><span class="hljs-number">.8</span>-<span class="hljs-number">9.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>       
libmcrypt-devel-<span class="hljs-number">2.5</span><span class="hljs-number">.8</span>-<span class="hljs-number">9.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>  
re2c-<span class="hljs-number">0.13</span><span class="hljs-number">.5</span>-<span class="hljs-number">1.</span>el6<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>    这是个警告需要的包</code></pre> 
  <p>这里不一一列举了。。。</p> 
  <p>配置：</p> 
  <pre class="prettyprint"><code class=" hljs coffeescript">[root<span class="hljs-property">@server1</span> ~]<span class="hljs-comment"># cd /usr/local/lnmp/</span>
[root<span class="hljs-property">@server1</span> lnmp]<span class="hljs-comment"># ls</span>
mysql  php
[root<span class="hljs-property">@server1</span> lnmp]<span class="hljs-comment"># cd php/</span>
[root<span class="hljs-property">@server1</span> php]<span class="hljs-comment"># cd etc/</span>
[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># ls</span>
pear.conf  php-fpm.conf.<span class="hljs-reserved">default</span>
[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># cp php-fpm.conf.default php-fpm.conf</span>
[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># ls</span>
pear.conf  php-fpm.conf  php-fpm.conf.<span class="hljs-reserved">default</span>
[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># cd ~</span>
[root<span class="hljs-property">@server1</span> ~]<span class="hljs-comment"># cd php-5.6.35</span>

[root<span class="hljs-property">@server1</span> php-<span class="hljs-number">5.6</span><span class="hljs-number">.35</span>]<span class="hljs-comment"># cp php.ini-production /usr/local/lnmp/php/etc/php.ini</span>
[root<span class="hljs-property">@server1</span> php-<span class="hljs-number">5.6</span><span class="hljs-number">.35</span>]<span class="hljs-comment"># vim /usr/local/lnmp/php/etc/php.ini</span>
------------------
    修改date.timezone =Asia/Shanghai
------------------

[root<span class="hljs-property">@server1</span> php-<span class="hljs-number">5.6</span><span class="hljs-number">.35</span>]<span class="hljs-comment"># cd /usr/local/lnmp/php/etc/</span>
[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># ls</span>
pear.conf  php-fpm.conf  php-fpm.conf.<span class="hljs-reserved">default</span>  php.ini
[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># vim php-fpm.conf</span>


[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># id nginx</span>
<span class="hljs-attribute">id</span>: <span class="hljs-attribute">nginx</span>: No such user

[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># useradd -M -d /usr/local/lnmp/nginx -s /sbin/nologin nginx</span>
[root<span class="hljs-property">@server1</span> etc]<span class="hljs-comment"># cd ~</span>
[root<span class="hljs-property">@server1</span> ~]<span class="hljs-comment"># cd php-5.6.35</span>
[root<span class="hljs-property">@server1</span> php-<span class="hljs-number">5.6</span><span class="hljs-number">.35</span>]<span class="hljs-comment"># cd sapi/</span>
[root<span class="hljs-property">@server1</span> sapi]<span class="hljs-comment"># cd fpm/</span>
[root<span class="hljs-property">@server1</span> fpm]<span class="hljs-comment"># ls</span>
config.m4       init.d.php-fpm.<span class="hljs-keyword">in</span>  php-fpm<span class="hljs-number">.8</span>        php-fpm.service     tests
CREDITS         LICENSE            php-fpm<span class="hljs-number">.8</span>.<span class="hljs-keyword">in</span>     php-fpm.service.<span class="hljs-keyword">in</span>  www.conf.<span class="hljs-keyword">in</span>
fpm             Makefile.frag      php-fpm.conf     status.html
init.d.php-fpm  php-fpm            php-fpm.conf.<span class="hljs-keyword">in</span>  status.html.<span class="hljs-keyword">in</span>
[root<span class="hljs-property">@server1</span> fpm]<span class="hljs-comment"># cp init.d.php-fpm /etc/init.d/php-fpm</span>
[root<span class="hljs-property">@server1</span> fpm]<span class="hljs-comment"># chmod +x /etc/init.d/php-fpm</span>
[root<span class="hljs-property">@server1</span> fpm]<span class="hljs-comment"># /etc/init.d/php-fpm start</span>
Starting php-fpm  done
[root<span class="hljs-property">@server1</span> fpm]<span class="hljs-comment"># </span></code></pre> 
  <h4 id="nginx解压与安装">nginx解压与安装:</h4> 
  <pre class="prettyprint"><code class=" hljs ruby">
[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># tar zxf nginx-1.10.1.tar.gz </span>
[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># tar zxf nginx-sticky-module-1.1.tar.gz </span>
[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># ls</span>
nginx-<span class="hljs-number">1.10</span>.<span class="hljs-number">1</span>         nginx-sticky-<span class="hljs-class"><span class="hljs-keyword">module</span>-1.1</span>
nginx-<span class="hljs-number">1.10</span>.<span class="hljs-number">1</span>.tar.gz  nginx-sticky-<span class="hljs-class"><span class="hljs-keyword">module</span>-1.1.<span class="hljs-title">tar</span>.<span class="hljs-title">gz</span></span>
[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># rm -rf nginx-1.10.1.tar.gz nginx-sticky-module-1.1.tar.gz</span>
[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># ls</span>
nginx-<span class="hljs-number">1.10</span>.<span class="hljs-number">1</span>  nginx-sticky-<span class="hljs-class"><span class="hljs-keyword">module</span>-1.1</span>
[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># cd nginx-1.10.1/</span>
     cd src/core/
     vim nginx.h
       <span class="hljs-comment">##修改标示符</span>
       ------------------------
       <span class="hljs-number">14</span> <span class="hljs-comment">#define NGINX_VER "nginx"</span>
       ------------------------

     cd ../..
     cd auto/cc
     vim gcc 
       <span class="hljs-comment">##关掉debug 加快编译进度</span>
       ---------------
       <span class="hljs-number">171</span> <span class="hljs-comment"># debug</span>
       <span class="hljs-number">172</span> <span class="hljs-comment">#CFLAGS="$CFLAGS -g"</span>
       ---------------

     cd -
     ./configure --help
     ./configure --prefix=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/lnmp/nginx</span> --with-http_ssl_module --with-http_stub_status_module --with-threads --with-file-aio --user=nginx --group=nginx

      <span class="hljs-comment">##报错:安装pcre-devel</span>
      ------------------------------
       ./<span class="hljs-symbol">configure:</span> <span class="hljs-symbol">error:</span> the <span class="hljs-constant">HTTP</span> rewrite <span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">requires</span> <span class="hljs-title">the</span> <span class="hljs-title">PCRE</span> <span class="hljs-title">library</span>.</span>
      -----------------------------

    yum install -y pcre-devel

      <span class="hljs-comment">##报错:安装openssl</span>
     ----------------------------
     ./<span class="hljs-symbol">configure:</span> <span class="hljs-symbol">error:</span> <span class="hljs-constant">SSL</span> modules <span class="hljs-keyword">require</span> the <span class="hljs-constant">OpenSSL</span> library.
     -----------------------------

    yum install -y openssl-devel

    make &amp;&amp; make install
</code></pre> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">    cd /usr/<span class="hljs-built_in">local</span>/lnmp
    cd nginx/sbin
    cd conf/
    <span class="hljs-built_in">ln</span> -s /usr/<span class="hljs-built_in">local</span>/lnmp/nginx/sbin/nginx  /sbin/  <span class="hljs-comment">##建立启动命令</span>

    nginx -t  <span class="hljs-comment">##检测nginx配置有没有问题</span>

    vim /etc/security/limits.conf 
      <span class="hljs-comment">----------------------------</span>
      <span class="hljs-number">54</span> nginx           -           nofile      <span class="hljs-number">65536</span>
      <span class="hljs-comment">-----------------------------</span>

    useradd -u <span class="hljs-number">800</span> nginx

    [root@server1 conf]<span class="hljs-comment"># vim nginx.conf</span></code></pre> 
  <p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180805145607523?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N1X3VzZQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <p>检测： <br> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180805150955551?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N1X3VzZQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <ul> 
   <li>vim /usr/local/lnmp/nginx/html/index.php <br> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180805151053296?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N1X3VzZQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></li> 
  </ul> 
  <hr> 
  <pre class="prettyprint"><code class=" hljs perl">[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># cd /usr/local/lnmp/nginx/html/</span>
[root<span class="hljs-variable">@server1</span> html]<span class="hljs-comment"># ls</span>
<span class="hljs-number">50</span><span class="hljs-keyword">x</span>.html  <span class="hljs-keyword">index</span>.html  <span class="hljs-keyword">index</span>.php  readme  upload  utility
[root<span class="hljs-variable">@server1</span> html]<span class="hljs-comment"># mv ./upload/ bbs</span>
[root<span class="hljs-variable">@server1</span> html]<span class="hljs-comment"># ls</span>
<span class="hljs-number">50</span><span class="hljs-keyword">x</span>.html  bbs  <span class="hljs-keyword">index</span>.html  <span class="hljs-keyword">index</span>.php  readme  utility


[root<span class="hljs-variable">@server1</span> mysql]<span class="hljs-comment"># chmod 755 data </span>


/usr/<span class="hljs-keyword">local</span>/lnmp/mysql/data/mysql.sock
添加mysqlsock路径，三个。 <span class="hljs-variable">*socket</span>= <span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/lnmp/mysql</span><span class="hljs-regexp">/data/mysql</span>.sock

[root<span class="hljs-variable">@server1</span> data]<span class="hljs-comment"># vim /usr/local/lnmp/php/etc/php.ini </span>
[root<span class="hljs-variable">@server1</span> data]<span class="hljs-comment"># /etc/init.d/php-fpm reload</span>
Reload service php-fpm  done

[root<span class="hljs-variable">@server1</span> ~]<span class="hljs-comment"># cd /usr/local/lnmp/nginx/html/bbs/</span>
[root<span class="hljs-variable">@server1</span> bbs]<span class="hljs-comment"># chmod 777 config/ data/ uc_server/ uc_client/ -R</span>
</code></pre> 
  <p>登陆172.25.5.1/bbs/install <br> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180805155612827?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N1X3VzZQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
  <p>简单设置后； <br> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180805155645359?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N1X3VzZQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p> 
 </div> 
 <link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-258a4616f7.css" rel="stylesheet"> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?aee162ba0c05d8e682055e28ff964fa2";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
