<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>使用 Go-Ethereum 1.7.2搭建以太坊私有链 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="使用 Go-Ethereum 1.7.2搭建以太坊私有链" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="系统环境：VMWARE Ubuntu 16系统 部分资料摘抄自：使用 Go-Ethereum 1.7.2搭建以太坊私有链 go-ethereum客户端 下载地址&amp;参考手册 首先，可以查看一下go-ethereum项目在git上的地址： https://github.com/ethereum/Go-ethereum 、 可以在点击项目上的wiki标签，也可以通过一下地址访问wiki： https://github.com/ethereum/Go-ethereum/wiki/Building-Ethereum 在wiki页面选择ubuntu系统的安装说明，也可以直接访问下面链接： https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Ubuntu ubuntu下安装命令 打开命令行窗口，或通过快捷键CTL+ALT+T，依次输入以下命令，即可安装成功： sudo apt-get install software-properties-common sudo add-apt-repository -y ppa:ethereum/ethereum sudo add-apt-repository -y ppa:ethereum/ethereum-dev sudo apt-get update sudo apt-get install ethereum PS：如果安装过程中需要依赖其他组件，则先安装其他组件。另外，在ubuntu16.04版本，sudo apt-get install命令可精简为sudo apt install。 PS:通过Git下载源码，本地编译Go-Ethereum 1.7.2 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum git checkout v1.7.2 make geth make all 　　查看安装好的geth版本号 ➜ /Users/lion &gt;geth version Geth Version: 1.7.2-stable Git Commit: 1db4ecdc0b9e828ff65777fb466fc7c1d04e0de9 Architecture: amd64 Protocol Versions: [63 62] Network Id: 1 Go Version: go1.9.1 Operating System: darwin GOPATH=/Users/lion/my_project/_golang GOROOT=/usr/local/Cellar/go/1.9.1/libexec 其次：golang的安装，要到https://www.golangtc.com/download下载go1.9.2.linux-amd64.tar.gz，进行编译安装。因为apt-get下载后的版本是1.6，而go-ethereum需要的最低版本是1.7。报错信息为：go-ethereum 1.6 Makefile:15: recipe for target ‘geth’ failed。编译步骤： tar -xvf go1.9.linux-amd64.tar.gz mv go /usr/local/src mkdir $HOME/gosrc &amp;&amp; cd $HOME/gosrc mkdir bin pkg src 更新系统变量： vim ~/.profile export GOROOT=/usr/local/src/go export GOPATH=$HOME/gosrc export GOBIN=$GOROOT/bin export PATH=$PATH:$GOROOT/bin source ~/.profile 安装完Golang之后，再进入/go-ethereum，进行make geth，就可以顺利编译了。成功之后执行/go-ethereum/build/bin/geth -h，有如下回显则说明安装成功： 安装测试 安装完成之后在命令行输入： geth –help 如果现实出命令行各种参数提示信息，则说明安装成功。 创世块 在以上安装成功之后，直接启动，即可连接公有链。现在通过配置创世块来创建私有链。同一个网络中，创世块必须是一样的，否则无法联通。 创建一个eth的根目录，在根目录下新建创世块json文件piccgenesis.json。内容如下： { &quot;nonce&quot;:&quot;0x0000000000000042&quot;, &quot;mixhash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;difficulty&quot;: &quot;0x4000&quot;, &quot;alloc&quot;: {}, &quot;coinbase&quot;:&quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;SecBroBlock&quot;, &quot;gasLimit&quot;:&quot;0x0000ffff&quot; } 参数解释： 参数名称 参数描述 mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase 矿工的账号，随便填 timestamp 设置创世块的时间戳 parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 extraData 附加信息，随便填，可以填你的个性信息 gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 初始化 接下来，我们使用geth init ./genesis.json –datadir “./chain”命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在chain目录中： ➜ /Users/lion/my_project/_eth/test &gt;geth init ./genesis.json --datadir &quot;./chain&quot; WARN [10-22|14:49:09] No etherbase set and no accounts found as default INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 启用私有链 　　使用以下命令，启用私有链： geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log 　　 　　启动后的效果如下： ➜ /Users/lion/my_project/_eth/test &gt;geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log Welcome to the Geth JavaScript console! instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 参数名称 参数描述 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在Geth中执行命令 nodiscover 私有链地址，不会被网上看到 　　 　　在当前目录执行tail -f eth_output.log，可以看到输出日志。 ➜ /Users/lion/my_project/_eth/test &gt;tail -f eth_output.log INFO [10-22|14:50:04] Bloom-bin upgrade completed elapsed=149.285µs INFO [10-22|14:50:04] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [10-22|14:50:04] Database conversion successful INFO [10-22|14:50:04] Loaded most recent local header number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local full block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local fast block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Starting P2P networking INFO [10-22|14:50:04] RLPx listener up self=&quot;enode://bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0&quot; INFO [10-22|14:50:04] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc INFO [10-22|14:50:05] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(10.0.0.1) 后面章节中的命令，都是在启动私有链后的Geth javascript console中操作 帐户的添加和查看 　　查看帐户，可以看到当前帐户是空的 web3.eth.accounts [] 　　 　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码 &gt; web3.personal.newAccount(&quot;123456&quot;) &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; 其中返回的0xbe323cc4fde114269a9513a27d3e985f82b9e25d是帐户，123456是帐户的密码 　　 　　第二种方法是先创建账户，然后输入密码 &gt; web3.personal.newAccount() Passphrase: Repeat passphrase: &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; 　　 　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了 &gt; web3.eth.accounts [&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;, &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;] 5.2.2、开始挖矿和停止挖矿 　　挖矿执行以下命令： &gt; miner.start(1) 　　 　　执行以后，通过刚才查看日志的方法tail -f eth_output.log,能够看到类似下面的日志，说明挖矿已经在进行. INFO [10-22|15:01:32] Commit new mining work number=70 txs=0 uncles=0 elapsed=2.000s INFO [10-22|15:01:34] Successfully sealed new block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] block reached canonical chain number=65 hash=3f6d16…586aba INFO [10-22|15:01:34] mined potential block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] Commit new mining work number=71 txs=0 uncles=0 elapsed=163.977µs INFO [10-22|15:01:34] Successfully sealed new block number=71 hash=f84b8a…7468e1 INFO [10-22|15:01:34] block reached canonical chain number=66 hash=6ca3b9…e959e8 INFO [10-22|15:01:34] mined potential block number=71 hash=f84b8a…7468e1 挖矿会默认保存到创建的第一个帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d中。 block number=66，说明我们已经创建了66个区块 在以太坊官方的网络上，平均每15秒产生一个区块 　　停止挖矿执行以下命令： &gt; miner.stop() 停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 查看帐户余额 　　查看帐户余额的方法如下： &gt; web3.eth.getBalance(&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;) 1.245e+21 &gt; web3.eth.getBalance(&quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;) 0 　　 　　每次记一长串的地址很麻烦，我们可以通过设置变量来acc0表示帐户10xbe323cc4fde114269a9513a27d3e985f82b9e25d,acc1表示帐户20x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70. &gt; acc0 = web3.eth.accounts[0] &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; &gt; acc1 = web3.eth.accounts[1] &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; &gt; web3.eth.getBalance(acc0) 1.245e+21 &gt; web3.eth.getBalance(acc1) 0 使用这个方法可以查看格式化的以太币 &gt; web3.fromWei(web3.eth.getBalance(acc0)) 1245 以太币最小的单位是wei（18个0） 　　 　　因为geth javascript console是基于javascript的，所以也可以创建js函数，查看所有帐户余额 &gt; function checkAllBalances() { var totalBal = 0; for (var acctNum in eth.accounts) { var acct = eth.accounts[acctNum]; var acctBal = web3.fromWei(eth.getBalance(acct), &quot;ether&quot;); totalBal += parseFloat(acctBal); console.log(&quot; eth.accounts[&quot; + acctNum + &quot;]: \t&quot; + acct + &quot; \tbalance: &quot; + acctBal + &quot; ether&quot;); } console.log(&quot; Total balance: &quot; + totalBal + &quot; ether&quot;); }; &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether 如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript(‘/path/script/here.js’) 转帐操作 　　从帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d转3个以太币到0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70,如果不指定单位ether，默认转的是wei。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) Error: authentication needed: password or unlock at web3.js:3104:20 at web3.js:6191:15 at web3.js:5004:36 at &lt;anonymous&gt;:1:1 当直接执行此方法时会抛出异常，显示帐号被锁 　　 　　解锁转帐帐户 &gt; web3.personal.unlockAccount(acc0,&quot;123456&quot;) true 　　 　　解锁完成之后，即可执行转账操作。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) &quot;0x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056&quot; 　　 　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。 &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether undefined &gt; miner.start() null &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1257 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 3 ether Total balance: 1260 ether undefined &gt; miner.stop() true 阅读更多" />
<meta property="og:description" content="系统环境：VMWARE Ubuntu 16系统 部分资料摘抄自：使用 Go-Ethereum 1.7.2搭建以太坊私有链 go-ethereum客户端 下载地址&amp;参考手册 首先，可以查看一下go-ethereum项目在git上的地址： https://github.com/ethereum/Go-ethereum 、 可以在点击项目上的wiki标签，也可以通过一下地址访问wiki： https://github.com/ethereum/Go-ethereum/wiki/Building-Ethereum 在wiki页面选择ubuntu系统的安装说明，也可以直接访问下面链接： https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Ubuntu ubuntu下安装命令 打开命令行窗口，或通过快捷键CTL+ALT+T，依次输入以下命令，即可安装成功： sudo apt-get install software-properties-common sudo add-apt-repository -y ppa:ethereum/ethereum sudo add-apt-repository -y ppa:ethereum/ethereum-dev sudo apt-get update sudo apt-get install ethereum PS：如果安装过程中需要依赖其他组件，则先安装其他组件。另外，在ubuntu16.04版本，sudo apt-get install命令可精简为sudo apt install。 PS:通过Git下载源码，本地编译Go-Ethereum 1.7.2 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum git checkout v1.7.2 make geth make all 　　查看安装好的geth版本号 ➜ /Users/lion &gt;geth version Geth Version: 1.7.2-stable Git Commit: 1db4ecdc0b9e828ff65777fb466fc7c1d04e0de9 Architecture: amd64 Protocol Versions: [63 62] Network Id: 1 Go Version: go1.9.1 Operating System: darwin GOPATH=/Users/lion/my_project/_golang GOROOT=/usr/local/Cellar/go/1.9.1/libexec 其次：golang的安装，要到https://www.golangtc.com/download下载go1.9.2.linux-amd64.tar.gz，进行编译安装。因为apt-get下载后的版本是1.6，而go-ethereum需要的最低版本是1.7。报错信息为：go-ethereum 1.6 Makefile:15: recipe for target ‘geth’ failed。编译步骤： tar -xvf go1.9.linux-amd64.tar.gz mv go /usr/local/src mkdir $HOME/gosrc &amp;&amp; cd $HOME/gosrc mkdir bin pkg src 更新系统变量： vim ~/.profile export GOROOT=/usr/local/src/go export GOPATH=$HOME/gosrc export GOBIN=$GOROOT/bin export PATH=$PATH:$GOROOT/bin source ~/.profile 安装完Golang之后，再进入/go-ethereum，进行make geth，就可以顺利编译了。成功之后执行/go-ethereum/build/bin/geth -h，有如下回显则说明安装成功： 安装测试 安装完成之后在命令行输入： geth –help 如果现实出命令行各种参数提示信息，则说明安装成功。 创世块 在以上安装成功之后，直接启动，即可连接公有链。现在通过配置创世块来创建私有链。同一个网络中，创世块必须是一样的，否则无法联通。 创建一个eth的根目录，在根目录下新建创世块json文件piccgenesis.json。内容如下： { &quot;nonce&quot;:&quot;0x0000000000000042&quot;, &quot;mixhash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;difficulty&quot;: &quot;0x4000&quot;, &quot;alloc&quot;: {}, &quot;coinbase&quot;:&quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;SecBroBlock&quot;, &quot;gasLimit&quot;:&quot;0x0000ffff&quot; } 参数解释： 参数名称 参数描述 mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase 矿工的账号，随便填 timestamp 设置创世块的时间戳 parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 extraData 附加信息，随便填，可以填你的个性信息 gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 初始化 接下来，我们使用geth init ./genesis.json –datadir “./chain”命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在chain目录中： ➜ /Users/lion/my_project/_eth/test &gt;geth init ./genesis.json --datadir &quot;./chain&quot; WARN [10-22|14:49:09] No etherbase set and no accounts found as default INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 启用私有链 　　使用以下命令，启用私有链： geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log 　　 　　启动后的效果如下： ➜ /Users/lion/my_project/_eth/test &gt;geth \ --datadir &quot;./chain&quot; \ --nodiscover \ console 2&gt;&gt;eth_output.log Welcome to the Geth JavaScript console! instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 参数名称 参数描述 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在Geth中执行命令 nodiscover 私有链地址，不会被网上看到 　　 　　在当前目录执行tail -f eth_output.log，可以看到输出日志。 ➜ /Users/lion/my_project/_eth/test &gt;tail -f eth_output.log INFO [10-22|14:50:04] Bloom-bin upgrade completed elapsed=149.285µs INFO [10-22|14:50:04] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [10-22|14:50:04] Database conversion successful INFO [10-22|14:50:04] Loaded most recent local header number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local full block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local fast block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Starting P2P networking INFO [10-22|14:50:04] RLPx listener up self=&quot;enode://bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0&quot; INFO [10-22|14:50:04] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc INFO [10-22|14:50:05] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(10.0.0.1) 后面章节中的命令，都是在启动私有链后的Geth javascript console中操作 帐户的添加和查看 　　查看帐户，可以看到当前帐户是空的 web3.eth.accounts [] 　　 　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码 &gt; web3.personal.newAccount(&quot;123456&quot;) &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; 其中返回的0xbe323cc4fde114269a9513a27d3e985f82b9e25d是帐户，123456是帐户的密码 　　 　　第二种方法是先创建账户，然后输入密码 &gt; web3.personal.newAccount() Passphrase: Repeat passphrase: &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; 　　 　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了 &gt; web3.eth.accounts [&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;, &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;] 5.2.2、开始挖矿和停止挖矿 　　挖矿执行以下命令： &gt; miner.start(1) 　　 　　执行以后，通过刚才查看日志的方法tail -f eth_output.log,能够看到类似下面的日志，说明挖矿已经在进行. INFO [10-22|15:01:32] Commit new mining work number=70 txs=0 uncles=0 elapsed=2.000s INFO [10-22|15:01:34] Successfully sealed new block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] block reached canonical chain number=65 hash=3f6d16…586aba INFO [10-22|15:01:34] mined potential block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] Commit new mining work number=71 txs=0 uncles=0 elapsed=163.977µs INFO [10-22|15:01:34] Successfully sealed new block number=71 hash=f84b8a…7468e1 INFO [10-22|15:01:34] block reached canonical chain number=66 hash=6ca3b9…e959e8 INFO [10-22|15:01:34] mined potential block number=71 hash=f84b8a…7468e1 挖矿会默认保存到创建的第一个帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d中。 block number=66，说明我们已经创建了66个区块 在以太坊官方的网络上，平均每15秒产生一个区块 　　停止挖矿执行以下命令： &gt; miner.stop() 停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 查看帐户余额 　　查看帐户余额的方法如下： &gt; web3.eth.getBalance(&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;) 1.245e+21 &gt; web3.eth.getBalance(&quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;) 0 　　 　　每次记一长串的地址很麻烦，我们可以通过设置变量来acc0表示帐户10xbe323cc4fde114269a9513a27d3e985f82b9e25d,acc1表示帐户20x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70. &gt; acc0 = web3.eth.accounts[0] &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; &gt; acc1 = web3.eth.accounts[1] &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; &gt; web3.eth.getBalance(acc0) 1.245e+21 &gt; web3.eth.getBalance(acc1) 0 使用这个方法可以查看格式化的以太币 &gt; web3.fromWei(web3.eth.getBalance(acc0)) 1245 以太币最小的单位是wei（18个0） 　　 　　因为geth javascript console是基于javascript的，所以也可以创建js函数，查看所有帐户余额 &gt; function checkAllBalances() { var totalBal = 0; for (var acctNum in eth.accounts) { var acct = eth.accounts[acctNum]; var acctBal = web3.fromWei(eth.getBalance(acct), &quot;ether&quot;); totalBal += parseFloat(acctBal); console.log(&quot; eth.accounts[&quot; + acctNum + &quot;]: \t&quot; + acct + &quot; \tbalance: &quot; + acctBal + &quot; ether&quot;); } console.log(&quot; Total balance: &quot; + totalBal + &quot; ether&quot;); }; &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether 如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript(‘/path/script/here.js’) 转帐操作 　　从帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d转3个以太币到0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70,如果不指定单位ether，默认转的是wei。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) Error: authentication needed: password or unlock at web3.js:3104:20 at web3.js:6191:15 at web3.js:5004:36 at &lt;anonymous&gt;:1:1 当直接执行此方法时会抛出异常，显示帐号被锁 　　 　　解锁转帐帐户 &gt; web3.personal.unlockAccount(acc0,&quot;123456&quot;) true 　　 　　解锁完成之后，即可执行转账操作。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) &quot;0x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056&quot; 　　 　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。 &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether undefined &gt; miner.start() null &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1257 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 3 ether Total balance: 1260 ether undefined &gt; miner.stop() true 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/08/04/0b78a665a2f3ab8d1d66fb006da87ea4.html" />
<meta property="og:url" content="https://mlh.app/2018/08/04/0b78a665a2f3ab8d1d66fb006da87ea4.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-04T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"系统环境：VMWARE Ubuntu 16系统 部分资料摘抄自：使用 Go-Ethereum 1.7.2搭建以太坊私有链 go-ethereum客户端 下载地址&amp;参考手册 首先，可以查看一下go-ethereum项目在git上的地址： https://github.com/ethereum/Go-ethereum 、 可以在点击项目上的wiki标签，也可以通过一下地址访问wiki： https://github.com/ethereum/Go-ethereum/wiki/Building-Ethereum 在wiki页面选择ubuntu系统的安装说明，也可以直接访问下面链接： https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Ubuntu ubuntu下安装命令 打开命令行窗口，或通过快捷键CTL+ALT+T，依次输入以下命令，即可安装成功： sudo apt-get install software-properties-common sudo add-apt-repository -y ppa:ethereum/ethereum sudo add-apt-repository -y ppa:ethereum/ethereum-dev sudo apt-get update sudo apt-get install ethereum PS：如果安装过程中需要依赖其他组件，则先安装其他组件。另外，在ubuntu16.04版本，sudo apt-get install命令可精简为sudo apt install。 PS:通过Git下载源码，本地编译Go-Ethereum 1.7.2 git clone https://github.com/ethereum/go-ethereum.git cd go-ethereum git checkout v1.7.2 make geth make all 　　查看安装好的geth版本号 ➜ /Users/lion &gt;geth version Geth Version: 1.7.2-stable Git Commit: 1db4ecdc0b9e828ff65777fb466fc7c1d04e0de9 Architecture: amd64 Protocol Versions: [63 62] Network Id: 1 Go Version: go1.9.1 Operating System: darwin GOPATH=/Users/lion/my_project/_golang GOROOT=/usr/local/Cellar/go/1.9.1/libexec 其次：golang的安装，要到https://www.golangtc.com/download下载go1.9.2.linux-amd64.tar.gz，进行编译安装。因为apt-get下载后的版本是1.6，而go-ethereum需要的最低版本是1.7。报错信息为：go-ethereum 1.6 Makefile:15: recipe for target ‘geth’ failed。编译步骤： tar -xvf go1.9.linux-amd64.tar.gz mv go /usr/local/src mkdir $HOME/gosrc &amp;&amp; cd $HOME/gosrc mkdir bin pkg src 更新系统变量： vim ~/.profile export GOROOT=/usr/local/src/go export GOPATH=$HOME/gosrc export GOBIN=$GOROOT/bin export PATH=$PATH:$GOROOT/bin source ~/.profile 安装完Golang之后，再进入/go-ethereum，进行make geth，就可以顺利编译了。成功之后执行/go-ethereum/build/bin/geth -h，有如下回显则说明安装成功： 安装测试 安装完成之后在命令行输入： geth –help 如果现实出命令行各种参数提示信息，则说明安装成功。 创世块 在以上安装成功之后，直接启动，即可连接公有链。现在通过配置创世块来创建私有链。同一个网络中，创世块必须是一样的，否则无法联通。 创建一个eth的根目录，在根目录下新建创世块json文件piccgenesis.json。内容如下： { &quot;nonce&quot;:&quot;0x0000000000000042&quot;, &quot;mixhash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;difficulty&quot;: &quot;0x4000&quot;, &quot;alloc&quot;: {}, &quot;coinbase&quot;:&quot;0x0000000000000000000000000000000000000000&quot;, &quot;timestamp&quot;: &quot;0x00&quot;, &quot;parentHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;, &quot;extraData&quot;: &quot;SecBroBlock&quot;, &quot;gasLimit&quot;:&quot;0x0000ffff&quot; } 参数解释： 参数名称 参数描述 mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 coinbase 矿工的账号，随便填 timestamp 设置创世块的时间戳 parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 extraData 附加信息，随便填，可以填你的个性信息 gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。 初始化 接下来，我们使用geth init ./genesis.json –datadir “./chain”命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在chain目录中： ➜ /Users/lion/my_project/_eth/test &gt;geth init ./genesis.json --datadir &quot;./chain&quot; WARN [10-22|14:49:09] No etherbase set and no accounts found as default INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=chaindata hash=5e1fc7…d790e0 INFO [10-22|14:49:09] Allocated cache and file handles database=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache=16 handles=16 INFO [10-22|14:49:09] Writing custom genesis block INFO [10-22|14:49:09] Successfully wrote genesis state database=lightchaindata hash=5e1fc7…d790e0 启用私有链 　　使用以下命令，启用私有链： geth \\ --datadir &quot;./chain&quot; \\ --nodiscover \\ console 2&gt;&gt;eth_output.log 　　 　　启动后的效果如下： ➜ /Users/lion/my_project/_eth/test &gt;geth \\ --datadir &quot;./chain&quot; \\ --nodiscover \\ console 2&gt;&gt;eth_output.log Welcome to the Geth JavaScript console! instance: Geth/v1.6.7-stable-ab5646c5/darwin-amd64/go1.9.1 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0 参数名称 参数描述 datadir 设置当前区块链网络数据存放的位置 console 启动命令行模式，可以在Geth中执行命令 nodiscover 私有链地址，不会被网上看到 　　 　　在当前目录执行tail -f eth_output.log，可以看到输出日志。 ➜ /Users/lion/my_project/_eth/test &gt;tail -f eth_output.log INFO [10-22|14:50:04] Bloom-bin upgrade completed elapsed=149.285µs INFO [10-22|14:50:04] Initialising Ethereum protocol versions=&quot;[63 62]&quot; network=1 INFO [10-22|14:50:04] Database conversion successful INFO [10-22|14:50:04] Loaded most recent local header number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local full block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Loaded most recent local fast block number=0 hash=5e1fc7…d790e0 td=131072 INFO [10-22|14:50:04] Starting P2P networking INFO [10-22|14:50:04] RLPx listener up self=&quot;enode://bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0&quot; INFO [10-22|14:50:04] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc INFO [10-22|14:50:05] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(10.0.0.1) 后面章节中的命令，都是在启动私有链后的Geth javascript console中操作 帐户的添加和查看 　　查看帐户，可以看到当前帐户是空的 web3.eth.accounts [] 　　 　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码 &gt; web3.personal.newAccount(&quot;123456&quot;) &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; 其中返回的0xbe323cc4fde114269a9513a27d3e985f82b9e25d是帐户，123456是帐户的密码 　　 　　第二种方法是先创建账户，然后输入密码 &gt; web3.personal.newAccount() Passphrase: Repeat passphrase: &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; 　　 　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了 &gt; web3.eth.accounts [&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;, &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;] 5.2.2、开始挖矿和停止挖矿 　　挖矿执行以下命令： &gt; miner.start(1) 　　 　　执行以后，通过刚才查看日志的方法tail -f eth_output.log,能够看到类似下面的日志，说明挖矿已经在进行. INFO [10-22|15:01:32] Commit new mining work number=70 txs=0 uncles=0 elapsed=2.000s INFO [10-22|15:01:34] Successfully sealed new block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] block reached canonical chain number=65 hash=3f6d16…586aba INFO [10-22|15:01:34] mined potential block number=70 hash=a0cfd2…f99c06 INFO [10-22|15:01:34] Commit new mining work number=71 txs=0 uncles=0 elapsed=163.977µs INFO [10-22|15:01:34] Successfully sealed new block number=71 hash=f84b8a…7468e1 INFO [10-22|15:01:34] block reached canonical chain number=66 hash=6ca3b9…e959e8 INFO [10-22|15:01:34] mined potential block number=71 hash=f84b8a…7468e1 挖矿会默认保存到创建的第一个帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d中。 block number=66，说明我们已经创建了66个区块 在以太坊官方的网络上，平均每15秒产生一个区块 　　停止挖矿执行以下命令： &gt; miner.stop() 停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。 查看帐户余额 　　查看帐户余额的方法如下： &gt; web3.eth.getBalance(&quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot;) 1.245e+21 &gt; web3.eth.getBalance(&quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot;) 0 　　 　　每次记一长串的地址很麻烦，我们可以通过设置变量来acc0表示帐户10xbe323cc4fde114269a9513a27d3e985f82b9e25d,acc1表示帐户20x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70. &gt; acc0 = web3.eth.accounts[0] &quot;0xbe323cc4fde114269a9513a27d3e985f82b9e25d&quot; &gt; acc1 = web3.eth.accounts[1] &quot;0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70&quot; &gt; web3.eth.getBalance(acc0) 1.245e+21 &gt; web3.eth.getBalance(acc1) 0 使用这个方法可以查看格式化的以太币 &gt; web3.fromWei(web3.eth.getBalance(acc0)) 1245 以太币最小的单位是wei（18个0） 　　 　　因为geth javascript console是基于javascript的，所以也可以创建js函数，查看所有帐户余额 &gt; function checkAllBalances() { var totalBal = 0; for (var acctNum in eth.accounts) { var acct = eth.accounts[acctNum]; var acctBal = web3.fromWei(eth.getBalance(acct), &quot;ether&quot;); totalBal += parseFloat(acctBal); console.log(&quot; eth.accounts[&quot; + acctNum + &quot;]: \\t&quot; + acct + &quot; \\tbalance: &quot; + acctBal + &quot; ether&quot;); } console.log(&quot; Total balance: &quot; + totalBal + &quot; ether&quot;); }; &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether 如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript(‘/path/script/here.js’) 转帐操作 　　从帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d转3个以太币到0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70,如果不指定单位ether，默认转的是wei。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) Error: authentication needed: password or unlock at web3.js:3104:20 at web3.js:6191:15 at web3.js:5004:36 at &lt;anonymous&gt;:1:1 当直接执行此方法时会抛出异常，显示帐号被锁 　　 　　解锁转帐帐户 &gt; web3.personal.unlockAccount(acc0,&quot;123456&quot;) true 　　 　　解锁完成之后，即可执行转账操作。 &gt; web3.eth.sendTransaction({from:acc0,to:acc1,value:web3.toWei(3,&quot;ether&quot;)}) &quot;0x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056&quot; 　　 　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。 &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1245 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 0 ether Total balance: 1245 ether undefined &gt; miner.start() null &gt; checkAllBalances() eth.accounts[0]: 0xbe323cc4fde114269a9513a27d3e985f82b9e25d balance: 1257 ether eth.accounts[1]: 0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70 balance: 3 ether Total balance: 1260 ether undefined &gt; miner.stop() true 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/08/04/0b78a665a2f3ab8d1d66fb006da87ea4.html","headline":"使用 Go-Ethereum 1.7.2搭建以太坊私有链","dateModified":"2018-08-04T00:00:00+08:00","datePublished":"2018-08-04T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/04/0b78a665a2f3ab8d1d66fb006da87ea4.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>使用 Go-Ethereum 1.7.2搭建以太坊私有链</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>系统环境：VMWARE Ubuntu 16系统 <br> 部分资料摘抄自：<a href="https://mshk.top/2017/11/go-ethereum-1-7-2/" rel="nofollow">使用 Go-Ethereum 1.7.2搭建以太坊私有链</a></p> 
  <h1 id="go-ethereum客户端">go-ethereum客户端</h1> 
  <p>下载地址&amp;参考手册 <br> 首先，可以查看一下go-ethereum项目在git上的地址： <br> <a href="https://github.com/ethereum/Go-ethereum" rel="nofollow">https://github.com/ethereum/Go-ethereum</a> <br> 、 <br> 可以在点击项目上的wiki标签，也可以通过一下地址访问wiki： <br> <a href="https://github.com/ethereum/Go-ethereum/wiki/Building-Ethereum" rel="nofollow">https://github.com/ethereum/Go-ethereum/wiki/Building-Ethereum</a></p> 
  <p>在wiki页面选择ubuntu系统的安装说明，也可以直接访问下面链接： <br> <a href="https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Ubuntu" rel="nofollow">https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Ubuntu</a></p> 
  <p>ubuntu下安装命令 <br> 打开命令行窗口，或通过快捷键CTL+ALT+T，依次输入以下命令，即可安装成功：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">sudo apt<span class="hljs-attribute">-get</span> install software<span class="hljs-attribute">-properties</span><span class="hljs-attribute">-common</span>
sudo add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> <span class="hljs-attribute">-y</span> ppa:ethereum/ethereum
sudo add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> <span class="hljs-attribute">-y</span> ppa:ethereum/ethereum<span class="hljs-attribute">-dev</span>
sudo apt<span class="hljs-attribute">-get</span> update
sudo apt<span class="hljs-attribute">-get</span> install ethereum</code></pre> 
  <p>PS：如果安装过程中需要依赖其他组件，则先安装其他组件。另外，在ubuntu16.04版本，sudo apt-get install命令可精简为sudo apt install。</p> 
  <h2 id="ps通过git下载源码本地编译go-ethereum-172">PS:通过Git下载源码，本地编译Go-Ethereum 1.7.2</h2> 
  <pre class="prettyprint"><code class=" hljs go">git clone https:<span class="hljs-comment">//github.com/ethereum/go-ethereum.git</span>
cd  <span class="hljs-keyword">go</span>-ethereum
git checkout v1<span class="hljs-number">.7.2</span>
<span class="hljs-built_in">make</span> geth
<span class="hljs-built_in">make</span> all</code></pre> 
  <p>　　查看安装好的geth版本号</p> 
  <pre class="prettyprint"><code class=" hljs ruby">➜ /<span class="hljs-constant">Users</span>/lion &gt;geth version
<span class="hljs-constant">Geth</span>
<span class="hljs-constant">Version</span><span class="hljs-symbol">:</span> <span class="hljs-number">1.7</span>.<span class="hljs-number">2</span>-stable
<span class="hljs-constant">Git</span> <span class="hljs-constant">Commit</span><span class="hljs-symbol">:</span> <span class="hljs-number">1</span>db4ecdc0b9e828ff65777fb466fc7c1d04e0de9
<span class="hljs-constant">Architecture</span><span class="hljs-symbol">:</span> amd64
<span class="hljs-constant">Protocol</span> <span class="hljs-constant">Versions</span><span class="hljs-symbol">:</span> [<span class="hljs-number">63</span> <span class="hljs-number">62</span>]
<span class="hljs-constant">Network</span> <span class="hljs-constant">Id</span><span class="hljs-symbol">:</span> <span class="hljs-number">1</span>
<span class="hljs-constant">Go</span> <span class="hljs-constant">Version</span><span class="hljs-symbol">:</span> go1.<span class="hljs-number">9.1</span>
<span class="hljs-constant">Operating</span> <span class="hljs-constant">System</span><span class="hljs-symbol">:</span> darwin
<span class="hljs-constant">GOPATH</span>=<span class="hljs-regexp">/Users/lion</span><span class="hljs-regexp">/my_project/</span>_golang
<span class="hljs-constant">GOROOT</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/Cellar/go</span><span class="hljs-regexp">/1.9.1/libexec</span></code></pre> 
  <p>其次：golang的安装，要到<a href="https://www.golangtc.com/download" rel="nofollow">https://www.golangtc.com/download</a>下载go1.9.2.linux-amd64.tar.gz，进行编译安装。因为apt-get下载后的版本是1.6，而go-ethereum需要的最低版本是1.7。报错信息为：go-ethereum 1.6 Makefile:15: recipe for target ‘geth’ failed。编译步骤：</p> 
  <pre class="prettyprint"><code class=" hljs perl">tar -xvf go1.<span class="hljs-number">9</span>.linux-amd64.tar.gz
mv go /usr/<span class="hljs-keyword">local</span>/src 
<span class="hljs-keyword">mkdir</span> <span class="hljs-variable">$HOME</span>/gosrc &amp;&amp; cd <span class="hljs-variable">$HOME</span>/gosrc
<span class="hljs-keyword">mkdir</span> bin  pkg  src</code></pre> 
  <p>更新系统变量：</p> 
  <pre class="prettyprint"><code class=" hljs bash">vim ~/.profile

<span class="hljs-keyword">export</span> GOROOT=/usr/local/src/go
<span class="hljs-keyword">export</span> GOPATH=<span class="hljs-variable">$HOME</span>/gosrc
<span class="hljs-keyword">export</span> GOBIN=<span class="hljs-variable">$GOROOT</span>/bin
<span class="hljs-keyword">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$GOROOT</span>/bin

<span class="hljs-built_in">source</span> ~/.profile</code></pre> 
  <p>安装完Golang之后，再进入/go-ethereum，进行make geth，就可以顺利编译了。成功之后执行/go-ethereum/build/bin/geth -h，有如下回显则说明安装成功：</p> 
  <h1 id="安装测试">安装测试</h1> 
  <p>安装完成之后在命令行输入：</p> 
  <p>geth –help <br> 如果现实出命令行各种参数提示信息，则说明安装成功。</p> 
  <h1 id="创世块">创世块</h1> 
  <p>在以上安装成功之后，直接启动，即可连接公有链。现在通过配置创世块来创建私有链。同一个网络中，创世块必须是一样的，否则无法联通。</p> 
  <p>创建一个eth的根目录，在根目录下新建创世块json文件piccgenesis.json。内容如下：</p> 
  <pre class="prettyprint"><code class=" hljs json">{
 "<span class="hljs-attribute">nonce</span>":<span class="hljs-value"><span class="hljs-string">"0x0000000000000042"</span></span>,
 "<span class="hljs-attribute">mixhash</span>":<span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
 "<span class="hljs-attribute">difficulty</span>": <span class="hljs-value"><span class="hljs-string">"0x4000"</span></span>,
 "<span class="hljs-attribute">alloc</span>": <span class="hljs-value">{}</span>,
 "<span class="hljs-attribute">coinbase</span>":<span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000"</span></span>,
 "<span class="hljs-attribute">timestamp</span>": <span class="hljs-value"><span class="hljs-string">"0x00"</span></span>,
 "<span class="hljs-attribute">parentHash</span>":<span class="hljs-value"><span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span></span>,
 "<span class="hljs-attribute">extraData</span>": <span class="hljs-value"><span class="hljs-string">"SecBroBlock"</span></span>,
 "<span class="hljs-attribute">gasLimit</span>":<span class="hljs-value"><span class="hljs-string">"0x0000ffff"</span> </span>}</code></pre> 
  <p>参数解释：</p> 
  <p>参数名称 参数描述 <br> mixhash 与nonce配合用于挖矿，由上一个区块的一部分生成的hash。注意他和nonce的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 <br> nonce nonce就是一个64位随机数，用于挖矿，注意他和mixhash的设置需要满足以太坊的Yellow paper, 4.3.4. Block Header Validity, (44)章节所描述的条件。 <br> difficulty 设置当前区块的难度，如果难度过大，cpu挖矿就很难，这里设置较小难度 <br> alloc 用来预置账号以及账号的以太币数量，因为私有链挖矿比较容易，所以我们不需要预置有币的账号，需要的时候自己创建即可以。 <br> coinbase 矿工的账号，随便填 <br> timestamp 设置创世块的时间戳 <br> parentHash 上一个区块的hash值，因为是创世块，所以这个值是0 <br> extraData 附加信息，随便填，可以填你的个性信息 <br> gasLimit 该值设置对GAS的消耗总量限制，用来限制区块能包含的交易信息总和，因为我们是私有链，所以填最大。</p> 
  <h1 id="初始化">初始化</h1> 
  <p>接下来，我们使用geth init ./genesis.json –datadir “./chain”命令，来进行创世区块的初始化，当前区块链网络数据存放的位置会保存在chain目录中：</p> 
  <pre class="prettyprint"><code class=" hljs vbnet">➜ /Users/lion/my_project/_eth/test &gt;geth init ./genesis.json --datadir <span class="hljs-string">"./chain"</span>
WARN [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">09</span>] No etherbase <span class="hljs-keyword">set</span> <span class="hljs-keyword">and</span> no accounts found <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">09</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/Users/lion/my_project/_eth/test/chain/geth/chaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">09</span>] Writing <span class="hljs-keyword">custom</span> genesis block
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">09</span>] Successfully wrote genesis state         database=chaindata                                             hash=<span class="hljs-number">5e1</span>fc7…d790e0
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">09</span>] Allocated cache <span class="hljs-keyword">and</span> file <span class="hljs-keyword">handles</span>         database=/Users/lion/my_project/_eth/test/chain/geth/lightchaindata cache=<span class="hljs-number">16</span> <span class="hljs-keyword">handles</span>=<span class="hljs-number">16</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">09</span>] Writing <span class="hljs-keyword">custom</span> genesis block
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">14</span>:<span class="hljs-number">49</span>:<span class="hljs-number">09</span>] Successfully wrote genesis state         database=lightchaindata                                             hash=<span class="hljs-number">5e1</span>fc7…d790e0</code></pre> 
  <h1 id="启用私有链">启用私有链</h1> 
  <p>　　使用以下命令，启用私有链：</p> 
  <pre class="prettyprint"><code class=" hljs haml">geth \
  -<span class="ruby">-datadir <span class="hljs-string">"./chain"</span> \ </span>  -<span class="ruby">-nodiscover \ </span>  console 2&gt;&gt;eth_output.log</code></pre> 
  <p>　　 <br> 　　启动后的效果如下：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">➜ /Users/lion/my_project/_eth/test <span class="hljs-subst">&gt;</span>geth <span class="hljs-subst">\</span>
  <span class="hljs-subst">--</span>datadir <span class="hljs-string">"./chain"</span> <span class="hljs-subst">\</span>
  <span class="hljs-subst">--</span>nodiscover <span class="hljs-subst">\</span>
  console <span class="hljs-number">2</span><span class="hljs-subst">&gt;&gt;</span>eth_output<span class="hljs-built_in">.</span><span class="hljs-keyword">log</span>
Welcome <span class="hljs-keyword">to</span> the Geth JavaScript console<span class="hljs-subst">!</span>

instance: Geth/v1<span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-attribute">-stable</span><span class="hljs-attribute">-ab5646c5</span>/darwin<span class="hljs-attribute">-amd64</span>/go1<span class="hljs-number">.9</span><span class="hljs-number">.1</span>
 modules: admin:<span class="hljs-number">1.0</span> debug:<span class="hljs-number">1.0</span> eth:<span class="hljs-number">1.0</span> miner:<span class="hljs-number">1.0</span> net:<span class="hljs-number">1.0</span> personal:<span class="hljs-number">1.0</span> rpc:<span class="hljs-number">1.0</span> txpool:<span class="hljs-number">1.0</span> web3:<span class="hljs-number">1.0</span></code></pre> 
  <p>参数名称 参数描述 <br> datadir 设置当前区块链网络数据存放的位置 <br> console 启动命令行模式，可以在Geth中执行命令 <br> nodiscover 私有链地址，不会被网上看到 <br> 　　</p> 
  <p>　　在当前目录执行tail -f eth_output.log，可以看到输出日志。</p> 
  <pre class="prettyprint"><code class=" hljs 1c">➜ /Users/lion/my_project/_eth/test &gt;tail -f eth_output.log
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] Bloom-bin upgrade completed elapsed=149.285µs</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] Initialising Ethereum protocol versions="</span>[<span class="hljs-number">63</span> <span class="hljs-number">62</span>]<span class="hljs-string">" network=1</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] Database conversion successful</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] Loaded most recent local header number=0 hash=5e1fc7…d790e0 td=131072</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] Loaded most recent local full block number=0 hash=5e1fc7…d790e0 td=131072</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] Loaded most recent local fast block number=0 hash=5e1fc7…d790e0 td=131072</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] Starting P2P networking</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] RLPx listener up self="</span>enode:<span class="hljs-comment">//bcc414219b7423f56da261857508771c229a5ee370e2d5bee7a9d1a3886ae9c207956a80e03f7ba44ed5f9f7777ac64db9b6939d18f3f44786dc6fc5690035b1@[::]:30303?discport=0"</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:04] IPC endpoint opened: /Users/lion/my_project/_eth/test/chain/geth.ipc</span>
INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span><span class="hljs-string">|14:50:05] Mapped network port proto=tcp extport=30303 intport=30303 interface=NAT-PMP(10.0.0.1)</span></code></pre> 
  <p>后面章节中的命令，都是在启动私有链后的Geth javascript console中操作</p> 
  <h1 id="帐户的添加和查看">帐户的添加和查看</h1> 
  <p>　　查看帐户，可以看到当前帐户是空的</p> 
  <blockquote> 
   <p>web3.eth.accounts <br> []</p> 
  </blockquote> 
  <p>　　 <br> 　　创建帐户的方式有两种，第一种创建帐户时直接初始化密码</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; web3<span class="hljs-preprocessor">.personal</span><span class="hljs-preprocessor">.newAccount</span>(<span class="hljs-string">"123456"</span>)
<span class="hljs-string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d"</span>
其中返回的<span class="hljs-number">0xbe323cc4fde114269a9513a27d3e985f82b9e25d</span>是帐户，<span class="hljs-number">123456</span>是帐户的密码</code></pre> 
  <p>　　 <br> 　　第二种方法是先创建账户，然后输入密码</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; web3<span class="hljs-preprocessor">.personal</span><span class="hljs-preprocessor">.newAccount</span>()
<span class="hljs-label">Passphrase:</span>
Repeat passphrase:
<span class="hljs-string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70"</span></code></pre> 
  <p>　　 <br> 　　这时我们再查看帐户，能够看到刚才创建的两个帐户已经存在了</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.accounts</span>
[<span class="hljs-string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d"</span>, <span class="hljs-string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70"</span>]</code></pre> 
  <p>5.2.2、开始挖矿和停止挖矿 <br> 　　挖矿执行以下命令：</p> 
  <pre class="prettyprint"><code class=" hljs markdown"><span class="hljs-blockquote">&gt; miner.start(1)</span></code></pre> 
  <p>　　 <br> 　　执行以后，通过刚才查看日志的方法tail -f eth_output.log,能够看到类似下面的日志，说明挖矿已经在进行.</p> 
  <pre class="prettyprint"><code class=" hljs sql">INFO [10-22|15:01:32] <span class="hljs-operator"><span class="hljs-keyword">Commit</span> new mining <span class="hljs-keyword">work</span> <span class="hljs-keyword">number</span>=<span class="hljs-number">70</span> txs=<span class="hljs-number">0</span> uncles=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">2.000</span>s INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">34</span>] Successfully sealed new block <span class="hljs-keyword">number</span>=<span class="hljs-number">70</span> hash=a0cfd2…f99c06 INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">34</span>] block reached canonical chain <span class="hljs-keyword">number</span>=<span class="hljs-number">65</span> hash=<span class="hljs-number">3</span>f6d16…<span class="hljs-number">586</span>aba INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">34</span>] mined potential block <span class="hljs-keyword">number</span>=<span class="hljs-number">70</span> hash=a0cfd2…f99c06 INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">34</span>] <span class="hljs-keyword">Commit</span> new mining <span class="hljs-keyword">work</span> <span class="hljs-keyword">number</span>=<span class="hljs-number">71</span> txs=<span class="hljs-number">0</span> uncles=<span class="hljs-number">0</span> elapsed=<span class="hljs-number">163.977</span>µs INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">34</span>] Successfully sealed new block <span class="hljs-keyword">number</span>=<span class="hljs-number">71</span> hash=f84b8a…<span class="hljs-number">7468e1</span> INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">34</span>] block reached canonical chain <span class="hljs-keyword">number</span>=<span class="hljs-number">66</span> hash=<span class="hljs-number">6</span>ca3b9…e959e8 INFO [<span class="hljs-number">10</span>-<span class="hljs-number">22</span>|<span class="hljs-number">15</span>:<span class="hljs-number">01</span>:<span class="hljs-number">34</span>] mined potential block <span class="hljs-keyword">number</span>=<span class="hljs-number">71</span> hash=f84b8a…<span class="hljs-number">7468e1</span></span></code></pre> 
  <p>挖矿会默认保存到创建的第一个帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d中。 <br> block number=66，说明我们已经创建了66个区块 <br> 在以太坊官方的网络上，平均每15秒产生一个区块</p> 
  <p>　　停止挖矿执行以下命令：</p> 
  <pre class="prettyprint"><code class=" hljs markdown"><span class="hljs-blockquote">&gt; miner.stop()</span></code></pre> 
  <p>停止挖矿后，以太币则不会产生，同样智能合约、转帐等操作也不会起作用。</p> 
  <h1 id="查看帐户余额">查看帐户余额</h1> 
  <p>　　查看帐户余额的方法如下：</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.getBalance</span>(<span class="hljs-string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d"</span>)
<span class="hljs-number">1.245e+21</span>
&gt; web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.getBalance</span>(<span class="hljs-string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70"</span>)
<span class="hljs-number">0</span></code></pre> 
  <p>　　 <br> 　　每次记一长串的地址很麻烦，我们可以通过设置变量来acc0表示帐户10xbe323cc4fde114269a9513a27d3e985f82b9e25d,acc1表示帐户20x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70.</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; acc0 = web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>]
<span class="hljs-string">"0xbe323cc4fde114269a9513a27d3e985f82b9e25d"</span>
&gt; acc1 = web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">1</span>]
<span class="hljs-string">"0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70"</span>
&gt; web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.getBalance</span>(acc0)
<span class="hljs-number">1.245e+21</span>
&gt; web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.getBalance</span>(acc1)
<span class="hljs-number">0</span></code></pre> 
  <h2 id="使用这个方法可以查看格式化的以太币">使用这个方法可以查看格式化的以太币</h2> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; web3<span class="hljs-preprocessor">.fromWei</span>(web3<span class="hljs-preprocessor">.eth</span><span class="hljs-preprocessor">.getBalance</span>(acc0))
<span class="hljs-number">1245</span></code></pre> 
  <h2 id="以太币最小的单位是wei18个0">以太币最小的单位是wei（18个0）</h2> 
  <p>　　 <br> 　　因为geth javascript console是基于javascript的，所以也可以创建js函数，查看所有帐户余额</p> 
  <pre class="prettyprint"><code class=" hljs javascript">&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkAllBalances</span><span class="hljs-params">()</span> {</span>
     <span class="hljs-keyword">var</span> totalBal = <span class="hljs-number">0</span>;
     <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> acctNum <span class="hljs-keyword">in</span> eth.accounts) {
         <span class="hljs-keyword">var</span> acct = eth.accounts[acctNum];
         <span class="hljs-keyword">var</span> acctBal = web3.fromWei(eth.getBalance(acct), <span class="hljs-string">"ether"</span>);
         totalBal += <span class="hljs-built_in">parseFloat</span>(acctBal);
         console.log(<span class="hljs-string">" eth.accounts["</span> + acctNum + <span class="hljs-string">"]: \t"</span> + acct + <span class="hljs-string">" \tbalance: "</span> + acctBal + <span class="hljs-string">" ether"</span>);
     }
     console.log(<span class="hljs-string">" Total balance: "</span> + totalBal + <span class="hljs-string">" ether"</span>);
 };
&gt; checkAllBalances()
  eth.accounts[<span class="hljs-number">0</span>]:  <span class="hljs-number">0xbe323cc4fde114269a9513a27d3e985f82b9e25d</span>  balance: <span class="hljs-number">1245</span> ether
  eth.accounts[<span class="hljs-number">1</span>]:  <span class="hljs-number">0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70</span>  balance: <span class="hljs-number">0</span> ether
  Total balance: <span class="hljs-number">1245</span> ether</code></pre> 
  <p>如果命令较多，可以保存到一个脚本里，使用命令载入脚本：loadScript(‘/path/script/here.js’)</p> 
  <h1 id="转帐操作">转帐操作</h1> 
  <p>　　从帐户0xbe323cc4fde114269a9513a27d3e985f82b9e25d转3个以太币到0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70,如果不指定单位ether，默认转的是wei。</p> 
  <pre class="prettyprint"><code class=" hljs css">&gt; <span class="hljs-tag">web3</span><span class="hljs-class">.eth</span><span class="hljs-class">.sendTransaction</span>(<span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">from</span>:<span class="hljs-value">acc0,to:acc1,value:web3.<span class="hljs-function">toWei(<span class="hljs-number">3</span>,<span class="hljs-string">"ether"</span>)</span></span></span></span>})
<span class="hljs-tag">Error</span>: <span class="hljs-tag">authentication</span> <span class="hljs-tag">needed</span>: <span class="hljs-tag">password</span> <span class="hljs-tag">or</span> <span class="hljs-tag">unlock</span>
    <span class="hljs-tag">at</span> <span class="hljs-tag">web3</span><span class="hljs-class">.js</span><span class="hljs-pseudo">:3104</span><span class="hljs-pseudo">:20</span>
    <span class="hljs-tag">at</span> <span class="hljs-tag">web3</span><span class="hljs-class">.js</span><span class="hljs-pseudo">:6191</span><span class="hljs-pseudo">:15</span>
    <span class="hljs-tag">at</span> <span class="hljs-tag">web3</span><span class="hljs-class">.js</span><span class="hljs-pseudo">:5004</span><span class="hljs-pseudo">:36</span>
    <span class="hljs-tag">at</span> &lt;<span class="hljs-tag">anonymous</span>&gt;<span class="hljs-pseudo">:1</span><span class="hljs-pseudo">:1</span></code></pre> 
  <p>当直接执行此方法时会抛出异常，显示帐号被锁</p> 
  <p>　　 <br> 　　解锁转帐帐户</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; web3<span class="hljs-preprocessor">.personal</span><span class="hljs-preprocessor">.unlockAccount</span>(acc0,<span class="hljs-string">"123456"</span>)
true</code></pre> 
  <p>　　 <br> 　　解锁完成之后，即可执行转账操作。</p> 
  <pre class="prettyprint"><code class=" hljs css">&gt; <span class="hljs-tag">web3</span><span class="hljs-class">.eth</span><span class="hljs-class">.sendTransaction</span>(<span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">from</span>:<span class="hljs-value">acc0,to:acc1,value:web3.<span class="hljs-function">toWei(<span class="hljs-number">3</span>,<span class="hljs-string">"ether"</span>)</span></span></span></span>})
"0<span class="hljs-tag">x472f26a00d244b91fea9ff05d9cd5ff5259d8618301bb14af4499827eb159056</span>"</code></pre> 
  <p>　　 <br> 　　但此时查看时会发现接收账户依旧为原来数值。此时需要执行挖矿命令，才会把转账真正完成。</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">&gt; checkAllBalances()
  eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>]:  <span class="hljs-number">0xbe323cc4fde114269a9513a27d3e985f82b9e25d</span>  balance: <span class="hljs-number">1245</span> ether
  eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">1</span>]:  <span class="hljs-number">0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70</span>  balance: <span class="hljs-number">0</span> ether
  Total balance: <span class="hljs-number">1245</span> ether
undefined
&gt; miner<span class="hljs-preprocessor">.start</span>()
null
&gt; checkAllBalances()
  eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">0</span>]:  <span class="hljs-number">0xbe323cc4fde114269a9513a27d3e985f82b9e25d</span>  balance: <span class="hljs-number">1257</span> ether
  eth<span class="hljs-preprocessor">.accounts</span>[<span class="hljs-number">1</span>]:  <span class="hljs-number">0x3b0ec02b4193d14abdc9cc5b264b5e3f39624d70</span>  balance: <span class="hljs-number">3</span> ether
  Total balance: <span class="hljs-number">1260</span> ether
undefined
&gt; miner<span class="hljs-preprocessor">.stop</span>()
true</code></pre> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Pieces_thinking/article/details/81413997,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Pieces_thinking/article/details/81413997,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
