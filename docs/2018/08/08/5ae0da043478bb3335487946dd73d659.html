<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>web3j 查询ERC20 代币余额 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="web3j 查询ERC20 代币余额" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="一.通过web3j 来查询 这里使用的是ropsten 测试网络 1.连接以太网网络 web3j 连接以太网的第一步是要有一个以太网客户端,(例如本地客户端,或云客户端),web3j推荐的使用infura 的云客户端 例如: Web3j web3j&nbsp; = Web3j.build(new HttpService(&quot;https://ropsten.infura.io/mew&quot;)); 这里token是mew,是MyEtherWallet 在infura 的token 我这里使用的是infura的云客户端,可以去infura 注册自己的token,然后就可以连上以太坊网络了 2.获得 ERC20 合约的java 实现版本,这里 web3j 是通过web3j 自带的命令行工具实现的(需要合约的二进制文件 和 abi 接口) /*TODO通过编译器 获得 bin 有问题,验证的时候,无法验证通过 比如我在http://remix.ethereum.org 这个在线编译器上编写了一个合约(这个时候可以在remix 的右边compiler 工具框中选择 Details 可以查看合约的二进制代码和 abi 接口)*/ 实际上发布了合约之后,应该在区块链浏览器(tetherscan.io)中,验证合约代码,验证通过后,会看到合约的创建的二进制代码,在abi 文件的下面,这里的二进制代码才是完整的,然后生成的合约对象,通过 合约对象.isValid(),返回true ,可以验证通过 在本地启动命令行工具,工具会一闪而过,web3j.bat 不是双击运行,进入文件位置,直接web3j.bat回车 ,出现web3j.io 图标说明成功,然后直接输入web3j 命令. 例如: 需要通过web3j 命令行工具生成 合约的java 对象 &nbsp;*&nbsp; 需要获得合约的二进制代码 保存: 名称.bin &nbsp;*&nbsp; 需要获得合约的abi数据&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 保存为: 名称.abi -o 是输出的文件夹名称 -p 后面是保存的包名 &nbsp;*&nbsp; 命令实例: web3j solidity generate TokenDemo.bin TokenDemo.abi -o /java -p com.your.organisation.name 3. 获得查询对象余额 package test; import java.io.IOException; import java.math.BigDecimal; import java.math.BigInteger; import org.web3j.crypto.Credentials; import org.web3j.protocol.Web3j; import org.web3j.protocol.admin.Admin; import org.web3j.protocol.core.DefaultBlockParameterName; import org.web3j.protocol.core.RemoteCall; import org.web3j.protocol.http.HttpService; import org.web3j.tx.Contract; import contract.MttContract; /** * 获取用户钱包地址 余额,包括 智能合约地址余额 */ public class TestGetBalance { /** * 查询以太币 * @param args * @throws Exception */ public static void main(String[] args) throws Exception { Web3j web3j = getWeb3j(StaticValue.ropstenService); getEthBanlance(web3j,StaticValue.account2); //获取指定钱包的指定币种余额 Contract erc20Contract = getERC20Contract(web3j, StaticValue.MttContractAddress, StaticValue.account2Pri); getERC20Balance(web3j,erc20Contract,StaticValue.account2,8); close(web3j); } /** * 连接网络 * @param netUrl * @return */ public static Web3j getWeb3j(String netUrl){ Admin web3j = Admin.build(new HttpService(netUrl)); return web3j; } /** * 关闭网络 * @param web3j */ public static void close(Web3j web3j){ web3j.shutdown(); } /** * 查询以太币账户余额 * @throws IOException */ public static String getEthBanlance(Web3j web3j,String userAddress) throws IOException { //获取指定钱包的以太币余额 BigInteger integer=web3j.ethGetBalance(userAddress,DefaultBlockParameterName.LATEST).send().getBalance(); //eth默认会部18个0这里处理比较随意 String decimal = toDecimal(18,integer); System.out.println(decimal); //因为是按18位来算的,所有在倒数18位前面加 小数点 /*String str = integer.toString(); String decimal = toDecimal(18,str); System.out.println(decimal);*/ return decimal; } /** * 获得 erc20 合约 实例 * @return */ public static Contract getERC20Contract(Web3j web3j,String contractAddress,String userPri){ BigInteger GAS_PRICE = BigInteger.valueOf(22_000_000_000L); BigInteger GAS_LIMIT = BigInteger.valueOf(4_300_000); Credentials credentials = Credentials.create(userPri);//获得信任凭证 MttContract contract = MttContract.load( contractAddress, web3j, credentials, GAS_PRICE, GAS_LIMIT); return contract; } /** * 查询erc 20 代币价格 * @throws Exception */ public static String getERC20Balance(Web3j web3j,Contract contract,String userAddress,int decimal) throws Exception{ // Web3ClientVersion web3ClientVersion = web3j.web3ClientVersion().send();//send 是同步请求 // Web3ClientVersion web3ClientVersion = web3.web3ClientVersion().sendAsync().get(); //sendAsync(), 使用CompletableFuture（Android上的Future）发送异步请求： // String clientVersion = web3ClientVersion.getWeb3ClientVersion(); // System.out.println(clientVersion);//查看版本信息 //或者 RxJava Observable： /*Web3j web3 = Web3j.build(new HttpService()); // defaults to http://localhost:8545/ web3.web3ClientVersion().observable().subscribe(x -&gt; { String clientVersion = x.getWeb3ClientVersion(); ... });*/ RemoteCall&lt;BigInteger&gt; balanceOf = ((MttContract) contract).balanceOf(userAddress); BigInteger send2 = balanceOf.send(); String result = toDecimal(8, send2); System.out.println(result); return result; } /** * 转换成符合 decimal 的数值 * @param decimal * @param str * @return */ public static String toDecimal(int decimal,BigInteger integer){ // String substring = str.substring(str.length() - decimal); StringBuffer sbf = new StringBuffer(&quot;1&quot;); for (int i = 0; i &lt; decimal; i++) { sbf.append(&quot;0&quot;); } String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString(); return balance; } } StaticValue.class package test; public class StaticValue { public static final String ropstenService = &quot;https://ropsten.infura.io/mew&quot;;//模仿 myEtherWallet 钱包请求 infura 网络 public static final String account1 = &quot;我的测试钱包地址&quot;; public static final String account2 = &quot;我的测试钱包地址2&quot;; public static final String account1Pri = &quot;我的测试钱包地址1私钥&quot;;//私钥 public static final String account2Pri = &quot;我的测试钱包地址2私钥&quot;;//私钥 public static final String MttContractAddress = &quot;部署的erc20 的合约地址&quot;; } 二.通过etherscan.io 的接口来查询ERC20 代币余额 decimal 是合约创建时指定的精度,这里url 是指etherscan连接的网络,例如ropsten测试网络 : http://api-ropsten.etherscan.io/api apikey 是指在etherscan 获得token,contractAddress 是合约地址,address 账户地址, 这里请求使用的okhttp3,TestOKHttp 类是自己封装过,对结果的json 进行处理使用的是jackson 2.8.5 /** * https://api.etherscan.io/api?module=account&amp;action=tokenbalance&amp;contractaddress=0x57d90b64a1a57749b0f932f1a3395792e12e7055&amp;address=0xe04f27eb70e025b78871a2ad7eabe85e61212761&amp;tag=latest&amp;apikey=YourApiKeyToken * 查询 账户 ERC20 代币余额 * @param url * @param contractAddress * @param address * @param decimal * @return */ public static String getERC20Balance(String url,String contractAddress,String address,int decimal){ TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;(); treeMap.put(&quot;module&quot;, &quot;account&quot;); treeMap.put(&quot;action&quot;, &quot;tokenbalance&quot;); treeMap.put(&quot;contractaddress&quot;, contractAddress); treeMap.put(&quot;address&quot;, address); treeMap.put(&quot;tag&quot;, &quot;latest&quot;); treeMap.put(&quot;apikey&quot;, StaticValue.etherscanToken); StringBuffer sbf = new StringBuffer(); for (String str : treeMap.keySet()) { sbf.append(str).append(&quot;=&quot;).append(treeMap.get(str)).append(&quot;&amp;&quot;); } url = url.concat(&quot;?&quot;).concat(sbf.substring(0, sbf.length() - 1)); Object send = send(url); return TestUtil.toDecimal(decimal,new BigInteger(String.valueOf(send))); } /** * 获得以太币价格 * @param url * @return */ public static String getEthPrice(String url){ TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;(); treeMap.put(&quot;module&quot;, &quot;stats&quot;); treeMap.put(&quot;action&quot;, &quot;ethprice&quot;); treeMap.put(&quot;apikey&quot;, StaticValue.etherscanToken); StringBuffer sbf = new StringBuffer(); for (String str : treeMap.keySet()) { sbf.append(str).append(&quot;=&quot;).append(treeMap.get(str)).append(&quot;&amp;&quot;); } url = url.concat(&quot;?&quot;).concat(sbf.substring(0, sbf.length() - 1)); Object send = send(url); return String.valueOf(send); } public static Object send(String url){ String responseMessageGet = TestOKHttp.getResponseMessageGet(url); ObjectMapper mapper = new ObjectMapper(); Map&lt;String,String&gt; reMap = null; try { reMap = mapper.readValue(responseMessageGet, new TypeReference&lt;Map&lt;String,Object&gt;&gt;(){}); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return reMap.get(&quot;result&quot;); } &nbsp;decimal 方法是转换精度的,以太坊默认是18,但其他代币就不一定, /** * 转换成符合 decimal 的数值 * @param decimal * @param str * @return */ public static String toDecimal(int decimal,BigInteger integer){ // String substring = str.substring(str.length() - decimal); StringBuffer sbf = new StringBuffer(&quot;1&quot;); for (int i = 0; i &lt; decimal; i++) { sbf.append(&quot;0&quot;); } String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString(); return balance; } TestOKHttp 类 /** * okhttp get 请求 */ public static ResponseBody testGetClient(String url){ OkHttpClient okClient = new OkHttpClient(); Request request = new Request.Builder() .get().url(url).build(); ResponseBody resBody = null; try { Response response = okClient.newCall(request).execute(); resBody = response.body(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return resBody; } public static String getResponseMessageGet(String url) { ResponseBody body = null;String string = null; body = testGetClient(url); if(checkEmpty(body)) return null; try { string = body.string(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return string; } public static boolean checkEmpty(Object obj){ if(null!=obj &amp;&amp; !obj.toString().trim().equals(&quot;&quot;)){ return false; } return true; } 转载请注明来处 阅读更多" />
<meta property="og:description" content="一.通过web3j 来查询 这里使用的是ropsten 测试网络 1.连接以太网网络 web3j 连接以太网的第一步是要有一个以太网客户端,(例如本地客户端,或云客户端),web3j推荐的使用infura 的云客户端 例如: Web3j web3j&nbsp; = Web3j.build(new HttpService(&quot;https://ropsten.infura.io/mew&quot;)); 这里token是mew,是MyEtherWallet 在infura 的token 我这里使用的是infura的云客户端,可以去infura 注册自己的token,然后就可以连上以太坊网络了 2.获得 ERC20 合约的java 实现版本,这里 web3j 是通过web3j 自带的命令行工具实现的(需要合约的二进制文件 和 abi 接口) /*TODO通过编译器 获得 bin 有问题,验证的时候,无法验证通过 比如我在http://remix.ethereum.org 这个在线编译器上编写了一个合约(这个时候可以在remix 的右边compiler 工具框中选择 Details 可以查看合约的二进制代码和 abi 接口)*/ 实际上发布了合约之后,应该在区块链浏览器(tetherscan.io)中,验证合约代码,验证通过后,会看到合约的创建的二进制代码,在abi 文件的下面,这里的二进制代码才是完整的,然后生成的合约对象,通过 合约对象.isValid(),返回true ,可以验证通过 在本地启动命令行工具,工具会一闪而过,web3j.bat 不是双击运行,进入文件位置,直接web3j.bat回车 ,出现web3j.io 图标说明成功,然后直接输入web3j 命令. 例如: 需要通过web3j 命令行工具生成 合约的java 对象 &nbsp;*&nbsp; 需要获得合约的二进制代码 保存: 名称.bin &nbsp;*&nbsp; 需要获得合约的abi数据&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 保存为: 名称.abi -o 是输出的文件夹名称 -p 后面是保存的包名 &nbsp;*&nbsp; 命令实例: web3j solidity generate TokenDemo.bin TokenDemo.abi -o /java -p com.your.organisation.name 3. 获得查询对象余额 package test; import java.io.IOException; import java.math.BigDecimal; import java.math.BigInteger; import org.web3j.crypto.Credentials; import org.web3j.protocol.Web3j; import org.web3j.protocol.admin.Admin; import org.web3j.protocol.core.DefaultBlockParameterName; import org.web3j.protocol.core.RemoteCall; import org.web3j.protocol.http.HttpService; import org.web3j.tx.Contract; import contract.MttContract; /** * 获取用户钱包地址 余额,包括 智能合约地址余额 */ public class TestGetBalance { /** * 查询以太币 * @param args * @throws Exception */ public static void main(String[] args) throws Exception { Web3j web3j = getWeb3j(StaticValue.ropstenService); getEthBanlance(web3j,StaticValue.account2); //获取指定钱包的指定币种余额 Contract erc20Contract = getERC20Contract(web3j, StaticValue.MttContractAddress, StaticValue.account2Pri); getERC20Balance(web3j,erc20Contract,StaticValue.account2,8); close(web3j); } /** * 连接网络 * @param netUrl * @return */ public static Web3j getWeb3j(String netUrl){ Admin web3j = Admin.build(new HttpService(netUrl)); return web3j; } /** * 关闭网络 * @param web3j */ public static void close(Web3j web3j){ web3j.shutdown(); } /** * 查询以太币账户余额 * @throws IOException */ public static String getEthBanlance(Web3j web3j,String userAddress) throws IOException { //获取指定钱包的以太币余额 BigInteger integer=web3j.ethGetBalance(userAddress,DefaultBlockParameterName.LATEST).send().getBalance(); //eth默认会部18个0这里处理比较随意 String decimal = toDecimal(18,integer); System.out.println(decimal); //因为是按18位来算的,所有在倒数18位前面加 小数点 /*String str = integer.toString(); String decimal = toDecimal(18,str); System.out.println(decimal);*/ return decimal; } /** * 获得 erc20 合约 实例 * @return */ public static Contract getERC20Contract(Web3j web3j,String contractAddress,String userPri){ BigInteger GAS_PRICE = BigInteger.valueOf(22_000_000_000L); BigInteger GAS_LIMIT = BigInteger.valueOf(4_300_000); Credentials credentials = Credentials.create(userPri);//获得信任凭证 MttContract contract = MttContract.load( contractAddress, web3j, credentials, GAS_PRICE, GAS_LIMIT); return contract; } /** * 查询erc 20 代币价格 * @throws Exception */ public static String getERC20Balance(Web3j web3j,Contract contract,String userAddress,int decimal) throws Exception{ // Web3ClientVersion web3ClientVersion = web3j.web3ClientVersion().send();//send 是同步请求 // Web3ClientVersion web3ClientVersion = web3.web3ClientVersion().sendAsync().get(); //sendAsync(), 使用CompletableFuture（Android上的Future）发送异步请求： // String clientVersion = web3ClientVersion.getWeb3ClientVersion(); // System.out.println(clientVersion);//查看版本信息 //或者 RxJava Observable： /*Web3j web3 = Web3j.build(new HttpService()); // defaults to http://localhost:8545/ web3.web3ClientVersion().observable().subscribe(x -&gt; { String clientVersion = x.getWeb3ClientVersion(); ... });*/ RemoteCall&lt;BigInteger&gt; balanceOf = ((MttContract) contract).balanceOf(userAddress); BigInteger send2 = balanceOf.send(); String result = toDecimal(8, send2); System.out.println(result); return result; } /** * 转换成符合 decimal 的数值 * @param decimal * @param str * @return */ public static String toDecimal(int decimal,BigInteger integer){ // String substring = str.substring(str.length() - decimal); StringBuffer sbf = new StringBuffer(&quot;1&quot;); for (int i = 0; i &lt; decimal; i++) { sbf.append(&quot;0&quot;); } String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString(); return balance; } } StaticValue.class package test; public class StaticValue { public static final String ropstenService = &quot;https://ropsten.infura.io/mew&quot;;//模仿 myEtherWallet 钱包请求 infura 网络 public static final String account1 = &quot;我的测试钱包地址&quot;; public static final String account2 = &quot;我的测试钱包地址2&quot;; public static final String account1Pri = &quot;我的测试钱包地址1私钥&quot;;//私钥 public static final String account2Pri = &quot;我的测试钱包地址2私钥&quot;;//私钥 public static final String MttContractAddress = &quot;部署的erc20 的合约地址&quot;; } 二.通过etherscan.io 的接口来查询ERC20 代币余额 decimal 是合约创建时指定的精度,这里url 是指etherscan连接的网络,例如ropsten测试网络 : http://api-ropsten.etherscan.io/api apikey 是指在etherscan 获得token,contractAddress 是合约地址,address 账户地址, 这里请求使用的okhttp3,TestOKHttp 类是自己封装过,对结果的json 进行处理使用的是jackson 2.8.5 /** * https://api.etherscan.io/api?module=account&amp;action=tokenbalance&amp;contractaddress=0x57d90b64a1a57749b0f932f1a3395792e12e7055&amp;address=0xe04f27eb70e025b78871a2ad7eabe85e61212761&amp;tag=latest&amp;apikey=YourApiKeyToken * 查询 账户 ERC20 代币余额 * @param url * @param contractAddress * @param address * @param decimal * @return */ public static String getERC20Balance(String url,String contractAddress,String address,int decimal){ TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;(); treeMap.put(&quot;module&quot;, &quot;account&quot;); treeMap.put(&quot;action&quot;, &quot;tokenbalance&quot;); treeMap.put(&quot;contractaddress&quot;, contractAddress); treeMap.put(&quot;address&quot;, address); treeMap.put(&quot;tag&quot;, &quot;latest&quot;); treeMap.put(&quot;apikey&quot;, StaticValue.etherscanToken); StringBuffer sbf = new StringBuffer(); for (String str : treeMap.keySet()) { sbf.append(str).append(&quot;=&quot;).append(treeMap.get(str)).append(&quot;&amp;&quot;); } url = url.concat(&quot;?&quot;).concat(sbf.substring(0, sbf.length() - 1)); Object send = send(url); return TestUtil.toDecimal(decimal,new BigInteger(String.valueOf(send))); } /** * 获得以太币价格 * @param url * @return */ public static String getEthPrice(String url){ TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;(); treeMap.put(&quot;module&quot;, &quot;stats&quot;); treeMap.put(&quot;action&quot;, &quot;ethprice&quot;); treeMap.put(&quot;apikey&quot;, StaticValue.etherscanToken); StringBuffer sbf = new StringBuffer(); for (String str : treeMap.keySet()) { sbf.append(str).append(&quot;=&quot;).append(treeMap.get(str)).append(&quot;&amp;&quot;); } url = url.concat(&quot;?&quot;).concat(sbf.substring(0, sbf.length() - 1)); Object send = send(url); return String.valueOf(send); } public static Object send(String url){ String responseMessageGet = TestOKHttp.getResponseMessageGet(url); ObjectMapper mapper = new ObjectMapper(); Map&lt;String,String&gt; reMap = null; try { reMap = mapper.readValue(responseMessageGet, new TypeReference&lt;Map&lt;String,Object&gt;&gt;(){}); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return reMap.get(&quot;result&quot;); } &nbsp;decimal 方法是转换精度的,以太坊默认是18,但其他代币就不一定, /** * 转换成符合 decimal 的数值 * @param decimal * @param str * @return */ public static String toDecimal(int decimal,BigInteger integer){ // String substring = str.substring(str.length() - decimal); StringBuffer sbf = new StringBuffer(&quot;1&quot;); for (int i = 0; i &lt; decimal; i++) { sbf.append(&quot;0&quot;); } String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString(); return balance; } TestOKHttp 类 /** * okhttp get 请求 */ public static ResponseBody testGetClient(String url){ OkHttpClient okClient = new OkHttpClient(); Request request = new Request.Builder() .get().url(url).build(); ResponseBody resBody = null; try { Response response = okClient.newCall(request).execute(); resBody = response.body(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return resBody; } public static String getResponseMessageGet(String url) { ResponseBody body = null;String string = null; body = testGetClient(url); if(checkEmpty(body)) return null; try { string = body.string(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return string; } public static boolean checkEmpty(Object obj){ if(null!=obj &amp;&amp; !obj.toString().trim().equals(&quot;&quot;)){ return false; } return true; } 转载请注明来处 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/08/08/5ae0da043478bb3335487946dd73d659.html" />
<meta property="og:url" content="https://mlh.app/2018/08/08/5ae0da043478bb3335487946dd73d659.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-08T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"一.通过web3j 来查询 这里使用的是ropsten 测试网络 1.连接以太网网络 web3j 连接以太网的第一步是要有一个以太网客户端,(例如本地客户端,或云客户端),web3j推荐的使用infura 的云客户端 例如: Web3j web3j&nbsp; = Web3j.build(new HttpService(&quot;https://ropsten.infura.io/mew&quot;)); 这里token是mew,是MyEtherWallet 在infura 的token 我这里使用的是infura的云客户端,可以去infura 注册自己的token,然后就可以连上以太坊网络了 2.获得 ERC20 合约的java 实现版本,这里 web3j 是通过web3j 自带的命令行工具实现的(需要合约的二进制文件 和 abi 接口) /*TODO通过编译器 获得 bin 有问题,验证的时候,无法验证通过 比如我在http://remix.ethereum.org 这个在线编译器上编写了一个合约(这个时候可以在remix 的右边compiler 工具框中选择 Details 可以查看合约的二进制代码和 abi 接口)*/ 实际上发布了合约之后,应该在区块链浏览器(tetherscan.io)中,验证合约代码,验证通过后,会看到合约的创建的二进制代码,在abi 文件的下面,这里的二进制代码才是完整的,然后生成的合约对象,通过 合约对象.isValid(),返回true ,可以验证通过 在本地启动命令行工具,工具会一闪而过,web3j.bat 不是双击运行,进入文件位置,直接web3j.bat回车 ,出现web3j.io 图标说明成功,然后直接输入web3j 命令. 例如: 需要通过web3j 命令行工具生成 合约的java 对象 &nbsp;*&nbsp; 需要获得合约的二进制代码 保存: 名称.bin &nbsp;*&nbsp; 需要获得合约的abi数据&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 保存为: 名称.abi -o 是输出的文件夹名称 -p 后面是保存的包名 &nbsp;*&nbsp; 命令实例: web3j solidity generate TokenDemo.bin TokenDemo.abi -o /java -p com.your.organisation.name 3. 获得查询对象余额 package test; import java.io.IOException; import java.math.BigDecimal; import java.math.BigInteger; import org.web3j.crypto.Credentials; import org.web3j.protocol.Web3j; import org.web3j.protocol.admin.Admin; import org.web3j.protocol.core.DefaultBlockParameterName; import org.web3j.protocol.core.RemoteCall; import org.web3j.protocol.http.HttpService; import org.web3j.tx.Contract; import contract.MttContract; /** * 获取用户钱包地址 余额,包括 智能合约地址余额 */ public class TestGetBalance { /** * 查询以太币 * @param args * @throws Exception */ public static void main(String[] args) throws Exception { Web3j web3j = getWeb3j(StaticValue.ropstenService); getEthBanlance(web3j,StaticValue.account2); //获取指定钱包的指定币种余额 Contract erc20Contract = getERC20Contract(web3j, StaticValue.MttContractAddress, StaticValue.account2Pri); getERC20Balance(web3j,erc20Contract,StaticValue.account2,8); close(web3j); } /** * 连接网络 * @param netUrl * @return */ public static Web3j getWeb3j(String netUrl){ Admin web3j = Admin.build(new HttpService(netUrl)); return web3j; } /** * 关闭网络 * @param web3j */ public static void close(Web3j web3j){ web3j.shutdown(); } /** * 查询以太币账户余额 * @throws IOException */ public static String getEthBanlance(Web3j web3j,String userAddress) throws IOException { //获取指定钱包的以太币余额 BigInteger integer=web3j.ethGetBalance(userAddress,DefaultBlockParameterName.LATEST).send().getBalance(); //eth默认会部18个0这里处理比较随意 String decimal = toDecimal(18,integer); System.out.println(decimal); //因为是按18位来算的,所有在倒数18位前面加 小数点 /*String str = integer.toString(); String decimal = toDecimal(18,str); System.out.println(decimal);*/ return decimal; } /** * 获得 erc20 合约 实例 * @return */ public static Contract getERC20Contract(Web3j web3j,String contractAddress,String userPri){ BigInteger GAS_PRICE = BigInteger.valueOf(22_000_000_000L); BigInteger GAS_LIMIT = BigInteger.valueOf(4_300_000); Credentials credentials = Credentials.create(userPri);//获得信任凭证 MttContract contract = MttContract.load( contractAddress, web3j, credentials, GAS_PRICE, GAS_LIMIT); return contract; } /** * 查询erc 20 代币价格 * @throws Exception */ public static String getERC20Balance(Web3j web3j,Contract contract,String userAddress,int decimal) throws Exception{ // Web3ClientVersion web3ClientVersion = web3j.web3ClientVersion().send();//send 是同步请求 // Web3ClientVersion web3ClientVersion = web3.web3ClientVersion().sendAsync().get(); //sendAsync(), 使用CompletableFuture（Android上的Future）发送异步请求： // String clientVersion = web3ClientVersion.getWeb3ClientVersion(); // System.out.println(clientVersion);//查看版本信息 //或者 RxJava Observable： /*Web3j web3 = Web3j.build(new HttpService()); // defaults to http://localhost:8545/ web3.web3ClientVersion().observable().subscribe(x -&gt; { String clientVersion = x.getWeb3ClientVersion(); ... });*/ RemoteCall&lt;BigInteger&gt; balanceOf = ((MttContract) contract).balanceOf(userAddress); BigInteger send2 = balanceOf.send(); String result = toDecimal(8, send2); System.out.println(result); return result; } /** * 转换成符合 decimal 的数值 * @param decimal * @param str * @return */ public static String toDecimal(int decimal,BigInteger integer){ // String substring = str.substring(str.length() - decimal); StringBuffer sbf = new StringBuffer(&quot;1&quot;); for (int i = 0; i &lt; decimal; i++) { sbf.append(&quot;0&quot;); } String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString(); return balance; } } StaticValue.class package test; public class StaticValue { public static final String ropstenService = &quot;https://ropsten.infura.io/mew&quot;;//模仿 myEtherWallet 钱包请求 infura 网络 public static final String account1 = &quot;我的测试钱包地址&quot;; public static final String account2 = &quot;我的测试钱包地址2&quot;; public static final String account1Pri = &quot;我的测试钱包地址1私钥&quot;;//私钥 public static final String account2Pri = &quot;我的测试钱包地址2私钥&quot;;//私钥 public static final String MttContractAddress = &quot;部署的erc20 的合约地址&quot;; } 二.通过etherscan.io 的接口来查询ERC20 代币余额 decimal 是合约创建时指定的精度,这里url 是指etherscan连接的网络,例如ropsten测试网络 : http://api-ropsten.etherscan.io/api apikey 是指在etherscan 获得token,contractAddress 是合约地址,address 账户地址, 这里请求使用的okhttp3,TestOKHttp 类是自己封装过,对结果的json 进行处理使用的是jackson 2.8.5 /** * https://api.etherscan.io/api?module=account&amp;action=tokenbalance&amp;contractaddress=0x57d90b64a1a57749b0f932f1a3395792e12e7055&amp;address=0xe04f27eb70e025b78871a2ad7eabe85e61212761&amp;tag=latest&amp;apikey=YourApiKeyToken * 查询 账户 ERC20 代币余额 * @param url * @param contractAddress * @param address * @param decimal * @return */ public static String getERC20Balance(String url,String contractAddress,String address,int decimal){ TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;(); treeMap.put(&quot;module&quot;, &quot;account&quot;); treeMap.put(&quot;action&quot;, &quot;tokenbalance&quot;); treeMap.put(&quot;contractaddress&quot;, contractAddress); treeMap.put(&quot;address&quot;, address); treeMap.put(&quot;tag&quot;, &quot;latest&quot;); treeMap.put(&quot;apikey&quot;, StaticValue.etherscanToken); StringBuffer sbf = new StringBuffer(); for (String str : treeMap.keySet()) { sbf.append(str).append(&quot;=&quot;).append(treeMap.get(str)).append(&quot;&amp;&quot;); } url = url.concat(&quot;?&quot;).concat(sbf.substring(0, sbf.length() - 1)); Object send = send(url); return TestUtil.toDecimal(decimal,new BigInteger(String.valueOf(send))); } /** * 获得以太币价格 * @param url * @return */ public static String getEthPrice(String url){ TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;(); treeMap.put(&quot;module&quot;, &quot;stats&quot;); treeMap.put(&quot;action&quot;, &quot;ethprice&quot;); treeMap.put(&quot;apikey&quot;, StaticValue.etherscanToken); StringBuffer sbf = new StringBuffer(); for (String str : treeMap.keySet()) { sbf.append(str).append(&quot;=&quot;).append(treeMap.get(str)).append(&quot;&amp;&quot;); } url = url.concat(&quot;?&quot;).concat(sbf.substring(0, sbf.length() - 1)); Object send = send(url); return String.valueOf(send); } public static Object send(String url){ String responseMessageGet = TestOKHttp.getResponseMessageGet(url); ObjectMapper mapper = new ObjectMapper(); Map&lt;String,String&gt; reMap = null; try { reMap = mapper.readValue(responseMessageGet, new TypeReference&lt;Map&lt;String,Object&gt;&gt;(){}); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return reMap.get(&quot;result&quot;); } &nbsp;decimal 方法是转换精度的,以太坊默认是18,但其他代币就不一定, /** * 转换成符合 decimal 的数值 * @param decimal * @param str * @return */ public static String toDecimal(int decimal,BigInteger integer){ // String substring = str.substring(str.length() - decimal); StringBuffer sbf = new StringBuffer(&quot;1&quot;); for (int i = 0; i &lt; decimal; i++) { sbf.append(&quot;0&quot;); } String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString(); return balance; } TestOKHttp 类 /** * okhttp get 请求 */ public static ResponseBody testGetClient(String url){ OkHttpClient okClient = new OkHttpClient(); Request request = new Request.Builder() .get().url(url).build(); ResponseBody resBody = null; try { Response response = okClient.newCall(request).execute(); resBody = response.body(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return resBody; } public static String getResponseMessageGet(String url) { ResponseBody body = null;String string = null; body = testGetClient(url); if(checkEmpty(body)) return null; try { string = body.string(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return string; } public static boolean checkEmpty(Object obj){ if(null!=obj &amp;&amp; !obj.toString().trim().equals(&quot;&quot;)){ return false; } return true; } 转载请注明来处 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/08/08/5ae0da043478bb3335487946dd73d659.html","headline":"web3j 查询ERC20 代币余额","dateModified":"2018-08-08T00:00:00+08:00","datePublished":"2018-08-08T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/08/5ae0da043478bb3335487946dd73d659.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>web3j 查询ERC20 代币余额</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p>一.通过web3j 来查询</p> 
  <p>这里使用的是ropsten 测试网络</p> 
  <p>1.连接以太网网络</p> 
  <p>web3j 连接以太网的第一步是要有一个以太网客户端,(例如本地客户端,或云客户端),web3j推荐的使用infura 的云客户端</p> 
  <p>例如: Web3j web3j&nbsp; = Web3j.build(new HttpService("<a href="https://ropsten.infura.io/mew" rel="nofollow">https://ropsten.infura.io/mew</a>")); 这里token是mew,是MyEtherWallet 在infura 的token</p> 
  <p>我这里使用的是infura的云客户端,可以去infura 注册自己的token,然后就可以连上以太坊网络了</p> 
  <p>2.获得 ERC20 合约的java 实现版本,这里 web3j 是通过web3j 自带的命令行工具实现的(需要<strong>合约的二进制文件 和 abi 接口</strong>)</p> 
  <p>/*<strong>TODO</strong>通过编译器 获得 bin 有问题,验证的时候,无法验证通过</p> 
  <p>比如我在<a href="http://remix.ethereum.org" rel="nofollow">http://remix.ethereum.org </a>这个在线编译器上编写了一个合约(这个时候可以在remix 的右边compiler 工具框中选择 Details 可以查看合约的二进制代码和 abi 接口)*/</p> 
  <p>实际上发布了合约之后,应该在区块链浏览器(tetherscan.io)中,验证合约代码,验证通过后,会看到合约的创建的二进制代码,在abi 文件的下面,这里的二进制代码才是完整的,然后生成的合约对象,通过 合约对象.isValid(),返回true ,可以验证通过</p> 
  <p>在本地启动命令行工具,工具会一闪而过,web3j.bat 不是双击运行,进入文件位置,直接web3j.bat回车 ,出现web3j.io 图标说明成功,然后直接输入web3j 命令.</p> 
  <p>例如: 需要通过web3j 命令行工具生成 合约的java 对象<br> &nbsp;*&nbsp; 需要获得合约的二进制代码 保存: 名称.bin<br> &nbsp;*&nbsp; 需要获得合约的abi数据&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 保存为: 名称.abi</p> 
  <p>-o 是输出的文件夹名称</p> 
  <p>-p 后面是保存的包名<br> &nbsp;*&nbsp; 命令实例: web3j solidity generate TokenDemo.bin TokenDemo.abi -o /java -p com.your.organisation.name</p> 
  <p>3. 获得查询对象余额</p> 
  <pre class="has">
<code class="language-java">package test;

import java.io.IOException;
import java.math.BigDecimal;
import java.math.BigInteger;

import org.web3j.crypto.Credentials;
import org.web3j.protocol.Web3j;
import org.web3j.protocol.admin.Admin;
import org.web3j.protocol.core.DefaultBlockParameterName;
import org.web3j.protocol.core.RemoteCall;
import org.web3j.protocol.http.HttpService;
import org.web3j.tx.Contract;

import contract.MttContract;

/**
 * 获取用户钱包地址 余额,包括 智能合约地址余额
 */
public class TestGetBalance {
	
	
	
	/**
	 * 查询以太币
	 * @param args
	 * @throws Exception 
	 */
	public static void main(String[] args) throws Exception {
		Web3j web3j = getWeb3j(StaticValue.ropstenService);
		getEthBanlance(web3j,StaticValue.account2);
		//获取指定钱包的指定币种余额

		Contract erc20Contract = getERC20Contract(web3j, StaticValue.MttContractAddress, StaticValue.account2Pri);
		getERC20Balance(web3j,erc20Contract,StaticValue.account2,8);
		close(web3j);
	}
	
	/**
	 * 连接网络
	 * @param netUrl
	 * @return
	 */
	public static Web3j getWeb3j(String netUrl){
		Admin web3j = Admin.build(new HttpService(netUrl));
		return web3j;
	}
	
	/**
	 * 关闭网络
	 * @param web3j
	 */
	public static void close(Web3j web3j){
		web3j.shutdown();
	}

	/**
	 * 查询以太币账户余额
	 * @throws IOException
	 */
	public static String getEthBanlance(Web3j web3j,String userAddress) throws IOException {
		//获取指定钱包的以太币余额
		BigInteger integer=web3j.ethGetBalance(userAddress,DefaultBlockParameterName.LATEST).send().getBalance();
		
		
		//eth默认会部18个0这里处理比较随意
		String decimal = toDecimal(18,integer);
		System.out.println(decimal);

		
		//因为是按18位来算的,所有在倒数18位前面加 小数点
		/*String str = integer.toString();
		String decimal = toDecimal(18,str);
		System.out.println(decimal);*/
		return decimal;
	}
	
	
	/**
	 * 获得 erc20 合约 实例
	 * @return
	 */
	public static Contract getERC20Contract(Web3j web3j,String contractAddress,String userPri){
		BigInteger GAS_PRICE = BigInteger.valueOf(22_000_000_000L);
        BigInteger GAS_LIMIT = BigInteger.valueOf(4_300_000);
        
        Credentials credentials = Credentials.create(userPri);//获得信任凭证
		
		MttContract contract = MttContract.load(
				contractAddress, web3j, credentials, GAS_PRICE, GAS_LIMIT);
		return contract;
	}
	
	/**
	 * 查询erc 20 代币价格
	 * @throws Exception 
	 */
	public static String getERC20Balance(Web3j web3j,Contract contract,String userAddress,int decimal) throws Exception{
		
//		Web3ClientVersion web3ClientVersion = web3j.web3ClientVersion().send();//send 是同步请求 
//		Web3ClientVersion web3ClientVersion = web3.web3ClientVersion().sendAsync().get(); //sendAsync(), 使用CompletableFuture（Android上的Future）发送异步请求：
//		String clientVersion = web3ClientVersion.getWeb3ClientVersion();
//		System.out.println(clientVersion);//查看版本信息
		//或者 RxJava Observable：
		/*Web3j web3 = Web3j.build(new HttpService());  // defaults to http://localhost:8545/
		web3.web3ClientVersion().observable().subscribe(x -&gt; {
		    String clientVersion = x.getWeb3ClientVersion();
		    ...
		});*/
		
		
		RemoteCall&lt;BigInteger&gt; balanceOf = ((MttContract) contract).balanceOf(userAddress);
		BigInteger send2 = balanceOf.send();
		String result = toDecimal(8, send2);
		System.out.println(result);
		return result;
	}
	
	
	
	
	
	
	/**
	 * 转换成符合 decimal 的数值
	 * @param decimal
	 * @param str
	 * @return
	 */
	public static String toDecimal(int decimal,BigInteger integer){
//		String substring = str.substring(str.length() - decimal);
		StringBuffer sbf = new StringBuffer("1");
		for (int i = 0; i &lt; decimal; i++) {
			sbf.append("0");
		}
		String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString();
		return balance;
	}
	

}
</code></pre> 
  <p>StaticValue.class</p> 
  <pre class="has">
<code class="language-java">package test;

public class StaticValue {

	public static final String ropstenService = "https://ropsten.infura.io/mew";//模仿 myEtherWallet 钱包请求 infura 网络
	
	public static final String account1 = "我的测试钱包地址";
	public static final String account2 = "我的测试钱包地址2";
	
	public static final String account1Pri = "我的测试钱包地址1私钥";//私钥
	public static final String account2Pri = "我的测试钱包地址2私钥";//私钥
	
	public static final String MttContractAddress = "部署的erc20 的合约地址";
	
}
</code></pre> 
  <p>二.通过etherscan.io 的接口来查询ERC20 代币余额</p> 
  <p>decimal 是合约创建时指定的精度,这里url 是指etherscan连接的网络,例如ropsten测试网络 : <a href="http://api-ropsten.etherscan.io/api" rel="nofollow">http://api-ropsten.etherscan.io/api</a></p> 
  <p>apikey 是指在etherscan 获得token,contractAddress 是合约地址,address 账户地址,</p> 
  <p>这里请求使用的okhttp3,TestOKHttp 类是自己封装过,对结果的json 进行处理使用的是jackson 2.8.5</p> 
  <pre class="has">
<code class="language-java">/**
	 * https://api.etherscan.io/api?module=account&amp;action=tokenbalance&amp;contractaddress=0x57d90b64a1a57749b0f932f1a3395792e12e7055&amp;address=0xe04f27eb70e025b78871a2ad7eabe85e61212761&amp;tag=latest&amp;apikey=YourApiKeyToken
	 * 查询 账户 ERC20 代币余额
	 * @param url
	 * @param contractAddress
	 * @param address
	 * @param decimal
	 * @return
	 */
	public static String getERC20Balance(String url,String contractAddress,String address,int decimal){
		TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;();
		treeMap.put("module", "account");
		treeMap.put("action", "tokenbalance");
		treeMap.put("contractaddress", contractAddress);
		treeMap.put("address", address);
		treeMap.put("tag", "latest");
		treeMap.put("apikey", StaticValue.etherscanToken);
		StringBuffer sbf = new StringBuffer();
		for (String str : treeMap.keySet()) {
			sbf.append(str).append("=").append(treeMap.get(str)).append("&amp;");
		}
		url = url.concat("?").concat(sbf.substring(0, sbf.length() - 1));
		 Object send = send(url);
		 return TestUtil.toDecimal(decimal,new BigInteger(String.valueOf(send)));
	}
	
	/**
	 * 获得以太币价格
	 * @param url
	 * @return
	 */
	public static String getEthPrice(String url){
		TreeMap&lt;String,String&gt; treeMap = new TreeMap&lt;&gt;();
		treeMap.put("module", "stats");
		treeMap.put("action", "ethprice");
		treeMap.put("apikey", StaticValue.etherscanToken);
		StringBuffer sbf = new StringBuffer();
		for (String str : treeMap.keySet()) {
			sbf.append(str).append("=").append(treeMap.get(str)).append("&amp;");
		}
		url = url.concat("?").concat(sbf.substring(0, sbf.length() - 1));
		 Object send = send(url);
		 return String.valueOf(send);
	}
	
	public static Object send(String url){
		String responseMessageGet = TestOKHttp.getResponseMessageGet(url);
		 ObjectMapper mapper = new ObjectMapper();
		 Map&lt;String,String&gt; reMap = null;
		 try {
			reMap = mapper.readValue(responseMessageGet, new TypeReference&lt;Map&lt;String,Object&gt;&gt;(){});
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		 
		 return reMap.get("result");
	}</code></pre> 
  <p>&nbsp;decimal 方法是转换精度的,以太坊默认是18,但其他代币就不一定,</p> 
  <pre class="has">
<code class="language-java">/**
	 * 转换成符合 decimal 的数值
	 * @param decimal
	 * @param str
	 * @return
	 */
	public static String toDecimal(int decimal,BigInteger integer){
//		String substring = str.substring(str.length() - decimal);
		StringBuffer sbf = new StringBuffer("1");
		for (int i = 0; i &lt; decimal; i++) {
			sbf.append("0");
		}
		String balance = new BigDecimal(integer).divide(new BigDecimal(sbf.toString()), 18, BigDecimal.ROUND_DOWN).toPlainString();
		return balance;
	}</code></pre> 
  <p>TestOKHttp 类</p> 
  <pre class="has">
<code class="language-java">/**
	 * okhttp get 请求
	 */
	public static ResponseBody testGetClient(String url){
		OkHttpClient okClient = new OkHttpClient();
		
		Request request = new Request.Builder()
		  .get().url(url).build();
		ResponseBody resBody = null;
		try {
			
			Response response = okClient.newCall(request).execute();
			resBody = response.body();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return resBody;
	}

	
	public static String getResponseMessageGet(String url) {
		ResponseBody body = null;String string = null;
		body = testGetClient(url);
		if(checkEmpty(body)) return null;
		try {
			string = body.string();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return string;
		
	}
	
	public static boolean checkEmpty(Object obj){
		if(null!=obj &amp;&amp; !obj.toString().trim().equals("")){
			return false;
		}
		return true;
		
	}</code></pre> 
  <p><strong>转载请注明来处</strong></p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/kzcming/article/details/81510730,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/kzcming/article/details/81510730,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
