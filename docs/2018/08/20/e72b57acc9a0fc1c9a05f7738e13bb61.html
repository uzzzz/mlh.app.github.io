<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>最好用的python以太坊开发框架Populus | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="最好用的python以太坊开发框架Populus" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="欢迎学习Populus框架！Populus几乎拥有以太坊区块链开发所需的一切。 Populus有以下系统依赖关系： solidity编译器：智能合约是以solidity语言编写的，然后编译到以太坊虚拟机（EVM）的二进制代码中。 Geth：官方go语言的以太坊协议的实现。Geth客户端运行区块链节点，让我们与区块链进行交互，并可以在开发过程中运行并部署到测试区块链。 此外，杨树需要一些其他的系统依赖性，才能安装PyEthereum库。 Debian, Ubuntu, Mint sudo apt-get install libssl-dev Fedora, CentOS, RedHat sudo yum install openssl-devel OSX brew install pkg-config libffi autoconf automake libtool openssl 安装Populus Populus可以通过pip来进行安装： $ pip install populus 如果你在Ubuntu上安装，python3（推荐）上运行的话 : $ pip3 install populus 重要的提示： Ubuntu下使用Ubuntu’s pip: $sudo apt-get install python-pip 或者python 3: $sudo apt-get install python3-pip 你可能需要安装populus用sudo权限: $ sudo -H pip install populus 从源代码安装可以通过以下命令从项目的根目录完成。 $ python setup.py install 验证安装： $ populus Usage: populus [OPTIONS] COMMAND [ARGS]... Populus Options: -p, --project PATH Specify a populus project directory -l, --logging TEXT Specify the logging level. Allowed values are DEBUG/INFO or their numeric equivalents 10/20 -h, --help Show this message and exit. Commands: chain Manage and run ethereum blockchains. compile Compile project contracts, storing their... config Manage and run ethereum blockchains. deploy Deploys the specified contracts to a chain. init Generate project layout with an example... 没问题的话，就可以开始第一个项目了。 忠告 Populus是一个开发环境。它的设计目的是为了让Python以太坊开发者轻松和有趣。我们使用测试区块链、演示帐户、简单密码、帮助你专注于代码本身。 但是一旦代码准备好用真实的以太坊进行工作和部署，你就应该小心了。因为在Xcode模拟器中运行iOS应用程序和iPhone上的应用程序的实际操作之间有明显的区别，或者在另一个示例中，在一个运行在127.0.0.1的网站上，而不是在一个真正的服务器上运行它，这个服务器被链接到整个互联网，当你在真实以太坊部署和发送时，区块链开发环境，是有明显区别的。 作为开发人员的核心问题是，一旦你打开帐户，就有一个进程运行访问你的以太坊。任何错误或安全漏洞都会导致一些损失。这不是测试区块链和测试时的以太币的问题，而是真实的。 通常情况下： 1.当你解锁一个帐户使用真正的Ether，解锁帐户应该只有需要满足gas和你的转账所需要的最小以太币。以太坊账户是免费的，所以不必为你的开发提供专用帐户，你只需要不时地发送你需要的以太币。 2.永远不要在远程节点上打开真正的以太网帐户。可以使用远程节点，但不可以使用需要解锁帐户的操作。当你在远程节点上打开帐户时，访问该节点的任何人都可以访问你的资金。换句话说，解锁你的帐号的Geth实例应该在本地受保护的机器上运行。 3.Geth允许你提供密码文件，这是为了方便的（稍后再讨论）。密码文件应该受权限保护。 幸运的是，有简单有效的方法来保障你的账户和资金安全，看这里。 初始化一个新的项目 Populus可以初始化你的项目通过$ populus init命令： $ populus init Wrote default populus configuration to `./populus.json`. Created Directory: ./contracts Created Example Contract: ./contracts/Greeter.sol Created Directory: ./tests Created Example Tests: ./tests/test_greeter.py 这样你的项目就会有一个./contracts目录，和一个名字为Greeter.sol的solidity源文件；还有一个./tests目录，和一个名字为test_greeter.py测试文件。 你也可以通过新建一个自己的目录初始化一个新项目： $ populus -p /path/to/my/project/ init 编译智能合约 在编译我们的项目之前，让我们先看一下作为项目初始化的一部分生成的Greeter智能合约。 $ nano contracts/Greeter.sol 注意检查你的IDE是否安装好了solidity的扩展包。 智能合约的代码是这样的： pragma solidity ^0.4.11; contract Greeter { string public greeting; function Greeter() { greeting = &quot;Hello&quot;; } function setGreeting(string _greeting) public { greeting = _greeting; } function greet() constant returns (string) { return greeting; } } Greeter是一个简单的智能合约： contract关键字开始合约定义。 该合约有一个公共state变量，命名为greeting。 具有相同名称的合约构造函数，函数function Greeter()，以字符串Hello的默认问候来初始化。 greet函数被公开，并返回设置的任何字符串作为问候语。 setGreeting功能可用，并允许问候语被改变。 你可以使用命令$ populus compile进行编译： $ populus compile ============ Compiling ============== &gt; Loading source files from: ./contracts &gt; Found 1 contract source files - contracts/Greeter.sol &gt; Compiled 1 contracts - Greeter &gt; Wrote compiled assets to: ./build/contracts.json 可以指定编译后的目录： $ populus -p /path/to/my/project/ compile build/contracts.json文件包含了solidity编译器产生的大量信息。这是部署和使用合约所必需的。一些重要的信息是合约的应用程序二进制接口（ABI），它允许在编译后调用合约的函数，以及部署合同所需的二进制代码，一旦合约部署到区块链链上的二进制代码就开始运行了。 测试你的合约 现在你有了一个基本的合约，你会想测试它的行为是否符合预期。项目应该已经有一个名为test_greeter.py的测试模块，它位于./tests目录中，如下所示： def test_greeter(chain): greeter, _ = chain.provider.get_or_deploy_contract(&#39;Greeter&#39;) greeting = greeter.call().greet() assert greeting == &#39;Hello&#39; def test_custom_greeting(chain): greeter, _ = chain.provider.get_or_deploy_contract(&#39;Greeter&#39;) set_txn_hash = greeter.transact().setGreeting(&#39;Guten Tag&#39;) chain.wait.for_receipt(set_txn_hash) greeting = greeter.call().greet() assert greeting == &#39;Guten Tag&#39; 你应该看到两个测试，一个测试默认问候语，一个测试我们可以设置自定义问候语。 注意，两个测试函数都接受chain参数。这个chain实际上是py.test fixture，由populus的 pytest插件提供。测试中的链是一个populus chain对象，运行一个称为tester的临时区块链。测试链是短暂的。所有区块链状态在每次测试运行开始时会被重置，并且只存储在内存中，因此显然不能长期运行智能合约，但对测试非常有用。 可以安装Populus时安装py.test在线实用测试工具。 $ py.test tests/ collected 2 items tests/test_greeter.py::test_greeter PASSED tests/test_greeter.py::test_custom_greeting PASSED 你应该看到一些类似于上述输出的三个测试通过。 最后，类似于测试部署，从命令行测试相同的部署： $ populus deploy --chain tester --no-wait-for-sync &gt; Found 1 contract source files - contracts/Greeter.sol &gt; Compiled 1 contracts - contracts/Greeter.sol:Greeter Please select the desired contract: 0: Greeter 在提示符下键入0，然后回车： Beginning contract deployment. Deploying 1 total contracts (1 Specified, 0 because of library dependencies). Greeter Deploying Greeter Deploy Transaction Sent: 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe Waiting for confirmation... Transaction Mined ================= Tx Hash : 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe Address : 0xc305c901078781c232a2a521c2af7980f8385ee9 Gas Provided : 465729 Gas Used : 365729 Verified contract bytecode @ 0xc305c901078781c232a2a521c2af7980f8385ee9 Deployment Successful. ok。当然，由于这是一个特设的tester区块链，它立即退出，什么都没有真正保存。但是部署工作，应该工作在一个永久性的区块链上，如主干网（公有链）或TestNET（测试链）. 下面是在项目目录之外时使用： $ populus -p /path/to/my/project/ deploy --chain tester --no-wait-for-sync 设置开发环境 为了在本地配置项目并使整个测试套件通过，需要确保你使用的是正确版本的solc编译器。按照以下步骤安装所有依赖项： 虚拟环境 如果你还没有，请继续安装virtualenv使用pip install virtualenv。然后可以用以下命令创建和激活Populus环境： $ cd populus $ virtualenv populus $ source populus/bin/activate 这允许你安装特定版本的Populus依赖，而不必与你在计算机上已经拥有的全局安装相冲突。 安装依赖项 现在，运行以下命令以安装除solc之外的项目中指定的所有依赖项： $ pip install -r requirements-dev.txt $ pip install -r requirements-docs.txt $ pip install -e . 安装Solidity 你必须安装Solidity，建议0.4.11或更高的发布版本。 二进制的安装脚本： https://github.com/ethereum/py-solc#installing-the-solc-binary 安装脚本： 首先，复制存储库并切换到合适的分支： $ git clone --recursive https://github.com/ethereum/solidity.git $ cd solidity $ git checkout release_0.4.13 你也可以下载压缩文件： https://github.com/ethereum/solidity/releases 注意使用tar.gz文件从源代码构建的话，确保在解压文件之后，deps目录不是空的，实际上包含依赖项。 如果你在Mac上，你也可能需要接受Xcode许可证。请确保安装了最新版本，如果遇到错误，请尝试以下操作： $ sudo xcodebuild -license accept 如果你在Windows上，请确保你安装了Git、CMake和VisualStudio 2015以上。 现在，安装所有外部依赖项。如果是Mac： $ ./scripts/install_deps.sh 如果是Windows下： $ scripts\install_deps.bat 最后，继续构建solidity。如果是Mac： $ mkdir build $ cd build $ cmake .. &amp;&amp; make 如果是Windows： $ mkdir build $ cd build $ cmake -G &quot;Visual Studio 14 2015 Win64&quot; .. 下面的命令也在windows下工作： $ cmake --build . --config RelWithDebInfo 确认 这应该已经安装了你需要的一切，但我们可以确认下。第一，尝试运行： $ which solc 如果没有看到任何输出，则需要将solc可执行文件移动到环境设置PATH指定的目录中，或者在bash配置文件中添加一个精确路径。如果找不到文件，可能需要运行： $ npm install -g solc 这应该在节点包所在的任何地方都安装了可执行文件。 一旦从solc命令中看到输出（并且在Populus目录中激活了virtualenv），就可以运行测试。 $ py.test tests/ 这样，所有的测试都应该通过。如果他们不是这样，你很可能在某个地方错过了一个依赖关系。只要重复以上的步骤，你就会搞定的。 当然python也有专门的web3.py库，对于python开发以太坊来说非常的方便，有兴趣的用户可以关注我们的python以太坊教程，主要是针对python工程师使用web3.py进行区块链以太坊开发的详解。 另外其他语言可以学习的以太坊教程如下： web3j教程，主要是针对java和android程序员进行区块链以太坊开发的web3j详解。 以太坊教程，主要介绍智能合约与dapp应用开发，适合入门。 以太坊开发，主要是介绍使用node.js、mongodb、区块链、ipfs实现去中心化电商DApp实战，适合进阶。 php以太坊，主要是介绍使用php进行智能合约开发交互，进行账号创建、交易、转账、代币开发以及过滤器和事件等内容。 C#以太坊，主要讲解如何使用C#开发基于.Net的以太坊应用，包括账户管理、状态与交易、智能合约开发与交互、过滤器和事件等。 汇智网原创翻译，转载请标明出处。这里是原文 阅读更多" />
<meta property="og:description" content="欢迎学习Populus框架！Populus几乎拥有以太坊区块链开发所需的一切。 Populus有以下系统依赖关系： solidity编译器：智能合约是以solidity语言编写的，然后编译到以太坊虚拟机（EVM）的二进制代码中。 Geth：官方go语言的以太坊协议的实现。Geth客户端运行区块链节点，让我们与区块链进行交互，并可以在开发过程中运行并部署到测试区块链。 此外，杨树需要一些其他的系统依赖性，才能安装PyEthereum库。 Debian, Ubuntu, Mint sudo apt-get install libssl-dev Fedora, CentOS, RedHat sudo yum install openssl-devel OSX brew install pkg-config libffi autoconf automake libtool openssl 安装Populus Populus可以通过pip来进行安装： $ pip install populus 如果你在Ubuntu上安装，python3（推荐）上运行的话 : $ pip3 install populus 重要的提示： Ubuntu下使用Ubuntu’s pip: $sudo apt-get install python-pip 或者python 3: $sudo apt-get install python3-pip 你可能需要安装populus用sudo权限: $ sudo -H pip install populus 从源代码安装可以通过以下命令从项目的根目录完成。 $ python setup.py install 验证安装： $ populus Usage: populus [OPTIONS] COMMAND [ARGS]... Populus Options: -p, --project PATH Specify a populus project directory -l, --logging TEXT Specify the logging level. Allowed values are DEBUG/INFO or their numeric equivalents 10/20 -h, --help Show this message and exit. Commands: chain Manage and run ethereum blockchains. compile Compile project contracts, storing their... config Manage and run ethereum blockchains. deploy Deploys the specified contracts to a chain. init Generate project layout with an example... 没问题的话，就可以开始第一个项目了。 忠告 Populus是一个开发环境。它的设计目的是为了让Python以太坊开发者轻松和有趣。我们使用测试区块链、演示帐户、简单密码、帮助你专注于代码本身。 但是一旦代码准备好用真实的以太坊进行工作和部署，你就应该小心了。因为在Xcode模拟器中运行iOS应用程序和iPhone上的应用程序的实际操作之间有明显的区别，或者在另一个示例中，在一个运行在127.0.0.1的网站上，而不是在一个真正的服务器上运行它，这个服务器被链接到整个互联网，当你在真实以太坊部署和发送时，区块链开发环境，是有明显区别的。 作为开发人员的核心问题是，一旦你打开帐户，就有一个进程运行访问你的以太坊。任何错误或安全漏洞都会导致一些损失。这不是测试区块链和测试时的以太币的问题，而是真实的。 通常情况下： 1.当你解锁一个帐户使用真正的Ether，解锁帐户应该只有需要满足gas和你的转账所需要的最小以太币。以太坊账户是免费的，所以不必为你的开发提供专用帐户，你只需要不时地发送你需要的以太币。 2.永远不要在远程节点上打开真正的以太网帐户。可以使用远程节点，但不可以使用需要解锁帐户的操作。当你在远程节点上打开帐户时，访问该节点的任何人都可以访问你的资金。换句话说，解锁你的帐号的Geth实例应该在本地受保护的机器上运行。 3.Geth允许你提供密码文件，这是为了方便的（稍后再讨论）。密码文件应该受权限保护。 幸运的是，有简单有效的方法来保障你的账户和资金安全，看这里。 初始化一个新的项目 Populus可以初始化你的项目通过$ populus init命令： $ populus init Wrote default populus configuration to `./populus.json`. Created Directory: ./contracts Created Example Contract: ./contracts/Greeter.sol Created Directory: ./tests Created Example Tests: ./tests/test_greeter.py 这样你的项目就会有一个./contracts目录，和一个名字为Greeter.sol的solidity源文件；还有一个./tests目录，和一个名字为test_greeter.py测试文件。 你也可以通过新建一个自己的目录初始化一个新项目： $ populus -p /path/to/my/project/ init 编译智能合约 在编译我们的项目之前，让我们先看一下作为项目初始化的一部分生成的Greeter智能合约。 $ nano contracts/Greeter.sol 注意检查你的IDE是否安装好了solidity的扩展包。 智能合约的代码是这样的： pragma solidity ^0.4.11; contract Greeter { string public greeting; function Greeter() { greeting = &quot;Hello&quot;; } function setGreeting(string _greeting) public { greeting = _greeting; } function greet() constant returns (string) { return greeting; } } Greeter是一个简单的智能合约： contract关键字开始合约定义。 该合约有一个公共state变量，命名为greeting。 具有相同名称的合约构造函数，函数function Greeter()，以字符串Hello的默认问候来初始化。 greet函数被公开，并返回设置的任何字符串作为问候语。 setGreeting功能可用，并允许问候语被改变。 你可以使用命令$ populus compile进行编译： $ populus compile ============ Compiling ============== &gt; Loading source files from: ./contracts &gt; Found 1 contract source files - contracts/Greeter.sol &gt; Compiled 1 contracts - Greeter &gt; Wrote compiled assets to: ./build/contracts.json 可以指定编译后的目录： $ populus -p /path/to/my/project/ compile build/contracts.json文件包含了solidity编译器产生的大量信息。这是部署和使用合约所必需的。一些重要的信息是合约的应用程序二进制接口（ABI），它允许在编译后调用合约的函数，以及部署合同所需的二进制代码，一旦合约部署到区块链链上的二进制代码就开始运行了。 测试你的合约 现在你有了一个基本的合约，你会想测试它的行为是否符合预期。项目应该已经有一个名为test_greeter.py的测试模块，它位于./tests目录中，如下所示： def test_greeter(chain): greeter, _ = chain.provider.get_or_deploy_contract(&#39;Greeter&#39;) greeting = greeter.call().greet() assert greeting == &#39;Hello&#39; def test_custom_greeting(chain): greeter, _ = chain.provider.get_or_deploy_contract(&#39;Greeter&#39;) set_txn_hash = greeter.transact().setGreeting(&#39;Guten Tag&#39;) chain.wait.for_receipt(set_txn_hash) greeting = greeter.call().greet() assert greeting == &#39;Guten Tag&#39; 你应该看到两个测试，一个测试默认问候语，一个测试我们可以设置自定义问候语。 注意，两个测试函数都接受chain参数。这个chain实际上是py.test fixture，由populus的 pytest插件提供。测试中的链是一个populus chain对象，运行一个称为tester的临时区块链。测试链是短暂的。所有区块链状态在每次测试运行开始时会被重置，并且只存储在内存中，因此显然不能长期运行智能合约，但对测试非常有用。 可以安装Populus时安装py.test在线实用测试工具。 $ py.test tests/ collected 2 items tests/test_greeter.py::test_greeter PASSED tests/test_greeter.py::test_custom_greeting PASSED 你应该看到一些类似于上述输出的三个测试通过。 最后，类似于测试部署，从命令行测试相同的部署： $ populus deploy --chain tester --no-wait-for-sync &gt; Found 1 contract source files - contracts/Greeter.sol &gt; Compiled 1 contracts - contracts/Greeter.sol:Greeter Please select the desired contract: 0: Greeter 在提示符下键入0，然后回车： Beginning contract deployment. Deploying 1 total contracts (1 Specified, 0 because of library dependencies). Greeter Deploying Greeter Deploy Transaction Sent: 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe Waiting for confirmation... Transaction Mined ================= Tx Hash : 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe Address : 0xc305c901078781c232a2a521c2af7980f8385ee9 Gas Provided : 465729 Gas Used : 365729 Verified contract bytecode @ 0xc305c901078781c232a2a521c2af7980f8385ee9 Deployment Successful. ok。当然，由于这是一个特设的tester区块链，它立即退出，什么都没有真正保存。但是部署工作，应该工作在一个永久性的区块链上，如主干网（公有链）或TestNET（测试链）. 下面是在项目目录之外时使用： $ populus -p /path/to/my/project/ deploy --chain tester --no-wait-for-sync 设置开发环境 为了在本地配置项目并使整个测试套件通过，需要确保你使用的是正确版本的solc编译器。按照以下步骤安装所有依赖项： 虚拟环境 如果你还没有，请继续安装virtualenv使用pip install virtualenv。然后可以用以下命令创建和激活Populus环境： $ cd populus $ virtualenv populus $ source populus/bin/activate 这允许你安装特定版本的Populus依赖，而不必与你在计算机上已经拥有的全局安装相冲突。 安装依赖项 现在，运行以下命令以安装除solc之外的项目中指定的所有依赖项： $ pip install -r requirements-dev.txt $ pip install -r requirements-docs.txt $ pip install -e . 安装Solidity 你必须安装Solidity，建议0.4.11或更高的发布版本。 二进制的安装脚本： https://github.com/ethereum/py-solc#installing-the-solc-binary 安装脚本： 首先，复制存储库并切换到合适的分支： $ git clone --recursive https://github.com/ethereum/solidity.git $ cd solidity $ git checkout release_0.4.13 你也可以下载压缩文件： https://github.com/ethereum/solidity/releases 注意使用tar.gz文件从源代码构建的话，确保在解压文件之后，deps目录不是空的，实际上包含依赖项。 如果你在Mac上，你也可能需要接受Xcode许可证。请确保安装了最新版本，如果遇到错误，请尝试以下操作： $ sudo xcodebuild -license accept 如果你在Windows上，请确保你安装了Git、CMake和VisualStudio 2015以上。 现在，安装所有外部依赖项。如果是Mac： $ ./scripts/install_deps.sh 如果是Windows下： $ scripts\install_deps.bat 最后，继续构建solidity。如果是Mac： $ mkdir build $ cd build $ cmake .. &amp;&amp; make 如果是Windows： $ mkdir build $ cd build $ cmake -G &quot;Visual Studio 14 2015 Win64&quot; .. 下面的命令也在windows下工作： $ cmake --build . --config RelWithDebInfo 确认 这应该已经安装了你需要的一切，但我们可以确认下。第一，尝试运行： $ which solc 如果没有看到任何输出，则需要将solc可执行文件移动到环境设置PATH指定的目录中，或者在bash配置文件中添加一个精确路径。如果找不到文件，可能需要运行： $ npm install -g solc 这应该在节点包所在的任何地方都安装了可执行文件。 一旦从solc命令中看到输出（并且在Populus目录中激活了virtualenv），就可以运行测试。 $ py.test tests/ 这样，所有的测试都应该通过。如果他们不是这样，你很可能在某个地方错过了一个依赖关系。只要重复以上的步骤，你就会搞定的。 当然python也有专门的web3.py库，对于python开发以太坊来说非常的方便，有兴趣的用户可以关注我们的python以太坊教程，主要是针对python工程师使用web3.py进行区块链以太坊开发的详解。 另外其他语言可以学习的以太坊教程如下： web3j教程，主要是针对java和android程序员进行区块链以太坊开发的web3j详解。 以太坊教程，主要介绍智能合约与dapp应用开发，适合入门。 以太坊开发，主要是介绍使用node.js、mongodb、区块链、ipfs实现去中心化电商DApp实战，适合进阶。 php以太坊，主要是介绍使用php进行智能合约开发交互，进行账号创建、交易、转账、代币开发以及过滤器和事件等内容。 C#以太坊，主要讲解如何使用C#开发基于.Net的以太坊应用，包括账户管理、状态与交易、智能合约开发与交互、过滤器和事件等。 汇智网原创翻译，转载请标明出处。这里是原文 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/08/20/e72b57acc9a0fc1c9a05f7738e13bb61.html" />
<meta property="og:url" content="https://mlh.app/2018/08/20/e72b57acc9a0fc1c9a05f7738e13bb61.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-20T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"欢迎学习Populus框架！Populus几乎拥有以太坊区块链开发所需的一切。 Populus有以下系统依赖关系： solidity编译器：智能合约是以solidity语言编写的，然后编译到以太坊虚拟机（EVM）的二进制代码中。 Geth：官方go语言的以太坊协议的实现。Geth客户端运行区块链节点，让我们与区块链进行交互，并可以在开发过程中运行并部署到测试区块链。 此外，杨树需要一些其他的系统依赖性，才能安装PyEthereum库。 Debian, Ubuntu, Mint sudo apt-get install libssl-dev Fedora, CentOS, RedHat sudo yum install openssl-devel OSX brew install pkg-config libffi autoconf automake libtool openssl 安装Populus Populus可以通过pip来进行安装： $ pip install populus 如果你在Ubuntu上安装，python3（推荐）上运行的话 : $ pip3 install populus 重要的提示： Ubuntu下使用Ubuntu’s pip: $sudo apt-get install python-pip 或者python 3: $sudo apt-get install python3-pip 你可能需要安装populus用sudo权限: $ sudo -H pip install populus 从源代码安装可以通过以下命令从项目的根目录完成。 $ python setup.py install 验证安装： $ populus Usage: populus [OPTIONS] COMMAND [ARGS]... Populus Options: -p, --project PATH Specify a populus project directory -l, --logging TEXT Specify the logging level. Allowed values are DEBUG/INFO or their numeric equivalents 10/20 -h, --help Show this message and exit. Commands: chain Manage and run ethereum blockchains. compile Compile project contracts, storing their... config Manage and run ethereum blockchains. deploy Deploys the specified contracts to a chain. init Generate project layout with an example... 没问题的话，就可以开始第一个项目了。 忠告 Populus是一个开发环境。它的设计目的是为了让Python以太坊开发者轻松和有趣。我们使用测试区块链、演示帐户、简单密码、帮助你专注于代码本身。 但是一旦代码准备好用真实的以太坊进行工作和部署，你就应该小心了。因为在Xcode模拟器中运行iOS应用程序和iPhone上的应用程序的实际操作之间有明显的区别，或者在另一个示例中，在一个运行在127.0.0.1的网站上，而不是在一个真正的服务器上运行它，这个服务器被链接到整个互联网，当你在真实以太坊部署和发送时，区块链开发环境，是有明显区别的。 作为开发人员的核心问题是，一旦你打开帐户，就有一个进程运行访问你的以太坊。任何错误或安全漏洞都会导致一些损失。这不是测试区块链和测试时的以太币的问题，而是真实的。 通常情况下： 1.当你解锁一个帐户使用真正的Ether，解锁帐户应该只有需要满足gas和你的转账所需要的最小以太币。以太坊账户是免费的，所以不必为你的开发提供专用帐户，你只需要不时地发送你需要的以太币。 2.永远不要在远程节点上打开真正的以太网帐户。可以使用远程节点，但不可以使用需要解锁帐户的操作。当你在远程节点上打开帐户时，访问该节点的任何人都可以访问你的资金。换句话说，解锁你的帐号的Geth实例应该在本地受保护的机器上运行。 3.Geth允许你提供密码文件，这是为了方便的（稍后再讨论）。密码文件应该受权限保护。 幸运的是，有简单有效的方法来保障你的账户和资金安全，看这里。 初始化一个新的项目 Populus可以初始化你的项目通过$ populus init命令： $ populus init Wrote default populus configuration to `./populus.json`. Created Directory: ./contracts Created Example Contract: ./contracts/Greeter.sol Created Directory: ./tests Created Example Tests: ./tests/test_greeter.py 这样你的项目就会有一个./contracts目录，和一个名字为Greeter.sol的solidity源文件；还有一个./tests目录，和一个名字为test_greeter.py测试文件。 你也可以通过新建一个自己的目录初始化一个新项目： $ populus -p /path/to/my/project/ init 编译智能合约 在编译我们的项目之前，让我们先看一下作为项目初始化的一部分生成的Greeter智能合约。 $ nano contracts/Greeter.sol 注意检查你的IDE是否安装好了solidity的扩展包。 智能合约的代码是这样的： pragma solidity ^0.4.11; contract Greeter { string public greeting; function Greeter() { greeting = &quot;Hello&quot;; } function setGreeting(string _greeting) public { greeting = _greeting; } function greet() constant returns (string) { return greeting; } } Greeter是一个简单的智能合约： contract关键字开始合约定义。 该合约有一个公共state变量，命名为greeting。 具有相同名称的合约构造函数，函数function Greeter()，以字符串Hello的默认问候来初始化。 greet函数被公开，并返回设置的任何字符串作为问候语。 setGreeting功能可用，并允许问候语被改变。 你可以使用命令$ populus compile进行编译： $ populus compile ============ Compiling ============== &gt; Loading source files from: ./contracts &gt; Found 1 contract source files - contracts/Greeter.sol &gt; Compiled 1 contracts - Greeter &gt; Wrote compiled assets to: ./build/contracts.json 可以指定编译后的目录： $ populus -p /path/to/my/project/ compile build/contracts.json文件包含了solidity编译器产生的大量信息。这是部署和使用合约所必需的。一些重要的信息是合约的应用程序二进制接口（ABI），它允许在编译后调用合约的函数，以及部署合同所需的二进制代码，一旦合约部署到区块链链上的二进制代码就开始运行了。 测试你的合约 现在你有了一个基本的合约，你会想测试它的行为是否符合预期。项目应该已经有一个名为test_greeter.py的测试模块，它位于./tests目录中，如下所示： def test_greeter(chain): greeter, _ = chain.provider.get_or_deploy_contract(&#39;Greeter&#39;) greeting = greeter.call().greet() assert greeting == &#39;Hello&#39; def test_custom_greeting(chain): greeter, _ = chain.provider.get_or_deploy_contract(&#39;Greeter&#39;) set_txn_hash = greeter.transact().setGreeting(&#39;Guten Tag&#39;) chain.wait.for_receipt(set_txn_hash) greeting = greeter.call().greet() assert greeting == &#39;Guten Tag&#39; 你应该看到两个测试，一个测试默认问候语，一个测试我们可以设置自定义问候语。 注意，两个测试函数都接受chain参数。这个chain实际上是py.test fixture，由populus的 pytest插件提供。测试中的链是一个populus chain对象，运行一个称为tester的临时区块链。测试链是短暂的。所有区块链状态在每次测试运行开始时会被重置，并且只存储在内存中，因此显然不能长期运行智能合约，但对测试非常有用。 可以安装Populus时安装py.test在线实用测试工具。 $ py.test tests/ collected 2 items tests/test_greeter.py::test_greeter PASSED tests/test_greeter.py::test_custom_greeting PASSED 你应该看到一些类似于上述输出的三个测试通过。 最后，类似于测试部署，从命令行测试相同的部署： $ populus deploy --chain tester --no-wait-for-sync &gt; Found 1 contract source files - contracts/Greeter.sol &gt; Compiled 1 contracts - contracts/Greeter.sol:Greeter Please select the desired contract: 0: Greeter 在提示符下键入0，然后回车： Beginning contract deployment. Deploying 1 total contracts (1 Specified, 0 because of library dependencies). Greeter Deploying Greeter Deploy Transaction Sent: 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe Waiting for confirmation... Transaction Mined ================= Tx Hash : 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe Address : 0xc305c901078781c232a2a521c2af7980f8385ee9 Gas Provided : 465729 Gas Used : 365729 Verified contract bytecode @ 0xc305c901078781c232a2a521c2af7980f8385ee9 Deployment Successful. ok。当然，由于这是一个特设的tester区块链，它立即退出，什么都没有真正保存。但是部署工作，应该工作在一个永久性的区块链上，如主干网（公有链）或TestNET（测试链）. 下面是在项目目录之外时使用： $ populus -p /path/to/my/project/ deploy --chain tester --no-wait-for-sync 设置开发环境 为了在本地配置项目并使整个测试套件通过，需要确保你使用的是正确版本的solc编译器。按照以下步骤安装所有依赖项： 虚拟环境 如果你还没有，请继续安装virtualenv使用pip install virtualenv。然后可以用以下命令创建和激活Populus环境： $ cd populus $ virtualenv populus $ source populus/bin/activate 这允许你安装特定版本的Populus依赖，而不必与你在计算机上已经拥有的全局安装相冲突。 安装依赖项 现在，运行以下命令以安装除solc之外的项目中指定的所有依赖项： $ pip install -r requirements-dev.txt $ pip install -r requirements-docs.txt $ pip install -e . 安装Solidity 你必须安装Solidity，建议0.4.11或更高的发布版本。 二进制的安装脚本： https://github.com/ethereum/py-solc#installing-the-solc-binary 安装脚本： 首先，复制存储库并切换到合适的分支： $ git clone --recursive https://github.com/ethereum/solidity.git $ cd solidity $ git checkout release_0.4.13 你也可以下载压缩文件： https://github.com/ethereum/solidity/releases 注意使用tar.gz文件从源代码构建的话，确保在解压文件之后，deps目录不是空的，实际上包含依赖项。 如果你在Mac上，你也可能需要接受Xcode许可证。请确保安装了最新版本，如果遇到错误，请尝试以下操作： $ sudo xcodebuild -license accept 如果你在Windows上，请确保你安装了Git、CMake和VisualStudio 2015以上。 现在，安装所有外部依赖项。如果是Mac： $ ./scripts/install_deps.sh 如果是Windows下： $ scripts\\install_deps.bat 最后，继续构建solidity。如果是Mac： $ mkdir build $ cd build $ cmake .. &amp;&amp; make 如果是Windows： $ mkdir build $ cd build $ cmake -G &quot;Visual Studio 14 2015 Win64&quot; .. 下面的命令也在windows下工作： $ cmake --build . --config RelWithDebInfo 确认 这应该已经安装了你需要的一切，但我们可以确认下。第一，尝试运行： $ which solc 如果没有看到任何输出，则需要将solc可执行文件移动到环境设置PATH指定的目录中，或者在bash配置文件中添加一个精确路径。如果找不到文件，可能需要运行： $ npm install -g solc 这应该在节点包所在的任何地方都安装了可执行文件。 一旦从solc命令中看到输出（并且在Populus目录中激活了virtualenv），就可以运行测试。 $ py.test tests/ 这样，所有的测试都应该通过。如果他们不是这样，你很可能在某个地方错过了一个依赖关系。只要重复以上的步骤，你就会搞定的。 当然python也有专门的web3.py库，对于python开发以太坊来说非常的方便，有兴趣的用户可以关注我们的python以太坊教程，主要是针对python工程师使用web3.py进行区块链以太坊开发的详解。 另外其他语言可以学习的以太坊教程如下： web3j教程，主要是针对java和android程序员进行区块链以太坊开发的web3j详解。 以太坊教程，主要介绍智能合约与dapp应用开发，适合入门。 以太坊开发，主要是介绍使用node.js、mongodb、区块链、ipfs实现去中心化电商DApp实战，适合进阶。 php以太坊，主要是介绍使用php进行智能合约开发交互，进行账号创建、交易、转账、代币开发以及过滤器和事件等内容。 C#以太坊，主要讲解如何使用C#开发基于.Net的以太坊应用，包括账户管理、状态与交易、智能合约开发与交互、过滤器和事件等。 汇智网原创翻译，转载请标明出处。这里是原文 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/08/20/e72b57acc9a0fc1c9a05f7738e13bb61.html","headline":"最好用的python以太坊开发框架Populus","dateModified":"2018-08-20T00:00:00+08:00","datePublished":"2018-08-20T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/20/e72b57acc9a0fc1c9a05f7738e13bb61.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>最好用的python以太坊开发框架Populus</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>欢迎学习Populus框架！Populus几乎拥有以太坊区块链开发所需的一切。</p> 
  <p>Populus有以下系统依赖关系：</p> 
  <ul> 
   <li><a href="https://github.com/ethereum/solidity/" rel="nofollow">solidity</a>编译器：智能合约是以solidity语言编写的，然后编译到以太坊虚拟机（EVM）的二进制代码中。</li> 
   <li><a href="https://github.com/ethereum/go-ethereum/" rel="nofollow">Geth</a>：官方go语言的以太坊协议的实现。Geth客户端运行区块链节点，让我们与区块链进行交互，并可以在开发过程中运行并部署到测试区块链。</li> 
  </ul> 
  <p>此外，杨树需要一些其他的系统依赖性，才能安装<a href="https://github.com/ethereum/pyethereum/" rel="nofollow">PyEthereum</a>库。</p> 
  <h4 id="debian-ubuntu-mint">Debian, Ubuntu, Mint</h4> 
  <pre class="prettyprint"><code class=" hljs lasso">sudo apt<span class="hljs-attribute">-get</span> install libssl<span class="hljs-attribute">-dev</span></code></pre> 
  <h4 id="fedora-centos-redhat">Fedora, CentOS, RedHat</h4> 
  <pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> yum install openssl-devel</code></pre> 
  <h4 id="osx">OSX</h4> 
  <pre class="prettyprint"><code class=" hljs cmake">brew <span class="hljs-keyword">install</span> pkg-config libffi autoconf automake libtool openssl</code></pre> 
  <h3 id="安装populus">安装Populus</h3> 
  <p>Populus可以通过pip来进行安装：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>pip install populus</code></pre> 
  <p>如果你在Ubuntu上安装，python3（推荐）上运行的话 :</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>pip3 install populus</code></pre> 
  <p>重要的提示：</p> 
  <p>Ubuntu下使用Ubuntu’s pip:</p> 
  <pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-variable">$sudo</span> apt<span class="hljs-attribute">-get</span> install python<span class="hljs-attribute">-pip</span></code></pre> 
  <p>或者python 3:</p> 
  <pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-variable">$sudo</span> apt<span class="hljs-attribute">-get</span> install python3<span class="hljs-attribute">-pip</span></code></pre> 
  <p>你可能需要安装populus用sudo权限: </p> 
  <pre class="prettyprint"><code class=" hljs bash">$ <span class="hljs-built_in">sudo</span> -H pip install populus</code></pre> 
  <p>从源代码安装可以通过以下命令从项目的根目录完成。</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>python setup.py install</code></pre> 
  <p>验证安装：</p> 
  <pre class="prettyprint"><code class=" hljs livecodeserver">$ populus

Usage: populus [OPTIONS] COMMAND [ARGS]...

  Populus

Options:
  -p, <span class="hljs-comment">--project PATH Specify a populus project directory</span>
  -l, <span class="hljs-comment">--logging TEXT Specify the logging level. Allowed values are</span>
                      DEBUG/INFO <span class="hljs-operator">or</span> their <span class="hljs-keyword">numeric</span> equivalents <span class="hljs-number">10</span>/<span class="hljs-number">20</span>
  -h, <span class="hljs-comment">--help Show this message and exit.</span>

Commands:
  chain    Manage <span class="hljs-operator">and</span> run ethereum blockchains.
  compile  Compile project contracts, storing their...
  config   Manage <span class="hljs-operator">and</span> run ethereum blockchains.
  deploy   Deploys <span class="hljs-operator">the</span> specified contracts <span class="hljs-built_in">to</span> <span class="hljs-operator">a</span> chain.
  init     Generate project layout <span class="hljs-operator">with</span> <span class="hljs-operator">an</span> example...</code></pre> 
  <p>没问题的话，就可以开始第一个项目了。</p> 
  <h3 id="忠告">忠告</h3> 
  <p>Populus是一个开发环境。它的设计目的是为了让<a href="http://xc.hubwiz.com/course/5b40462cc02e6b6a59171de4?affid=820csdn" rel="nofollow">Python以太坊</a>开发者轻松和有趣。我们使用测试区块链、演示帐户、简单密码、帮助你专注于代码本身。</p> 
  <p>但是一旦代码准备好用真实的以太坊进行工作和部署，你就应该小心了。因为在Xcode模拟器中运行iOS应用程序和iPhone上的应用程序的实际操作之间有明显的区别，或者在另一个示例中，在一个运行在127.0.0.1的网站上，而不是在一个真正的服务器上运行它，这个服务器被链接到整个互联网，当你在真实以太坊部署和发送时，区块链开发环境，是有明显区别的。</p> 
  <p>作为开发人员的核心问题是，一旦你打开帐户，就有一个进程运行访问你的以太坊。任何错误或安全漏洞都会导致一些损失。这不是测试区块链和测试时的以太币的问题，而是真实的。</p> 
  <p>通常情况下：</p> 
  <ul> 
   <li>1.当你解锁一个帐户使用真正的Ether，解锁帐户应该只有需要满足gas和你的转账所需要的最小以太币。以太坊账户是免费的，所以不必为你的开发提供专用帐户，你只需要不时地发送你需要的以太币。</li> 
   <li>2.永远不要在远程节点上打开真正的以太网帐户。可以使用远程节点，但不可以使用需要解锁帐户的操作。当你在远程节点上打开帐户时，访问该节点的任何人都可以访问你的资金。换句话说，解锁你的帐号的Geth实例应该在本地受保护的机器上运行。</li> 
   <li>3.Geth允许你提供密码文件，这是为了方便的（稍后再讨论）。密码文件应该受权限保护。</li> 
  </ul> 
  <p>幸运的是，有简单有效的方法来保障你的账户和资金安全，看<a href="https://myetherwallet.github.io/knowledge-base/getting-started/protecting-yourself-and-your-funds.html" rel="nofollow">这里</a>。</p> 
  <h3 id="初始化一个新的项目">初始化一个新的项目</h3> 
  <p>Populus可以初始化你的项目通过<code>$ populus init</code>命令：</p> 
  <pre class="prettyprint"><code class=" hljs avrasm">$ populus init
Wrote default populus configuration to `./populus<span class="hljs-preprocessor">.json</span>`.
Created Directory: ./contracts
Created Example Contract: ./contracts/Greeter<span class="hljs-preprocessor">.sol</span>
Created Directory: ./tests
Created Example Tests: ./tests/test_greeter<span class="hljs-preprocessor">.py</span></code></pre> 
  <p>这样你的项目就会有一个<code>./contracts</code>目录，和一个名字为<code>Greeter.sol</code>的solidity源文件；还有一个<code>./tests</code>目录，和一个名字为<code>test_greeter.py</code>测试文件。</p> 
  <p>你也可以通过新建一个自己的目录初始化一个新项目：</p> 
  <pre class="prettyprint"><code class=" hljs applescript">$ populus -p /path/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">my</span>/project/ init</code></pre> 
  <h3 id="编译智能合约">编译智能合约</h3> 
  <p>在编译我们的项目之前，让我们先看一下作为项目初始化的一部分生成的Greeter智能合约。</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>nano contracts/<span class="hljs-constant">Greeter</span>.sol</code></pre> 
  <p>注意检查你的IDE是否安装好了solidity的扩展包。</p> 
  <p>智能合约的代码是这样的：</p> 
  <pre class="prettyprint"><code class=" hljs lua">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;

contract Greeter {
    <span class="hljs-built_in">string</span> public greeting;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Greeter</span><span class="hljs-params">()</span></span> {
        greeting = <span class="hljs-string">"Hello"</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setGreeting</span><span class="hljs-params">(string _greeting)</span></span> public {
        greeting = _greeting;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span><span class="hljs-params">()</span></span> constant returns (<span class="hljs-built_in">string</span>) {
        <span class="hljs-keyword">return</span> greeting;
    }
}</code></pre> 
  <p>Greeter是一个简单的智能合约：</p> 
  <ul> 
   <li><code>contract</code>关键字开始合约定义。</li> 
   <li>该合约有一个公共<code>state</code>变量，命名为<code>greeting</code>。</li> 
   <li>具有相同名称的合约构造函数，函数<code>function Greeter()</code>，以字符串<code>Hello</code>的默认问候来初始化。</li> 
   <li><code>greet</code>函数被公开，并返回设置的任何字符串作为问候语。</li> 
   <li><code>setGreeting</code>功能可用，并允许问候语被改变。</li> 
  </ul> 
  <p>你可以使用命令<code>$ populus compile</code>进行编译：</p> 
  <pre class="prettyprint"><code class=" hljs haml">$ populus compile
=<span class="ruby">=========== <span class="hljs-constant">Compiling</span> ============== </span>&gt; Loading source files from: ./contracts

&gt; Found 1 contract source files
-<span class="ruby"> contracts/<span class="hljs-constant">Greeter</span>.sol </span>
&gt; Compiled 1 contracts
-<span class="ruby"> <span class="hljs-constant">Greeter</span> </span>
&gt; Wrote compiled assets to: ./build/contracts.json</code></pre> 
  <p>可以指定编译后的目录：</p> 
  <pre class="prettyprint"><code class=" hljs applescript">$ populus -p /path/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">my</span>/project/ compile</code></pre> 
  <p><code>build/contracts.json</code>文件包含了solidity编译器产生的大量信息。这是部署和使用合约所必需的。一些重要的信息是合约的应用程序二进制接口（ABI），它允许在编译后调用合约的函数，以及部署合同所需的二进制代码，一旦合约部署到区块链链上的二进制代码就开始运行了。</p> 
  <h3 id="测试你的合约">测试你的合约</h3> 
  <p>现在你有了一个基本的合约，你会想测试它的行为是否符合预期。项目应该已经有一个名为<code>test_greeter.py</code>的测试模块，它位于<code>./tests</code>目录中，如下所示：</p> 
  <pre class="prettyprint"><code class=" hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_greeter</span><span class="hljs-params">(chain)</span>:</span>
    greeter, _ = chain.provider.get_or_deploy_contract(<span class="hljs-string">'Greeter'</span>)

    greeting = greeter.call().greet()
    <span class="hljs-keyword">assert</span> greeting == <span class="hljs-string">'Hello'</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_custom_greeting</span><span class="hljs-params">(chain)</span>:</span>
    greeter, _ = chain.provider.get_or_deploy_contract(<span class="hljs-string">'Greeter'</span>)

    set_txn_hash = greeter.transact().setGreeting(<span class="hljs-string">'Guten Tag'</span>)
    chain.wait.for_receipt(set_txn_hash)

    greeting = greeter.call().greet()
    <span class="hljs-keyword">assert</span> greeting == <span class="hljs-string">'Guten Tag'</span></code></pre> 
  <p>你应该看到两个测试，一个测试默认问候语，一个测试我们可以设置自定义问候语。</p> 
  <p>注意，两个测试函数都接受<code>chain</code>参数。这个<code>chain</code>实际上是<a href="https://docs.pytest.org/en/latest/fixture.html" rel="nofollow">py.test fixture</a>，由populus的 pytest插件提供。测试中的链是一个populus <code>chain</code>对象，运行一个称为<code>tester</code>的临时区块链。测试链是短暂的。所有区块链状态在每次测试运行开始时会被重置，并且只存储在内存中，因此显然不能长期运行智能合约，但对测试非常有用。</p> 
  <p>可以安装Populus时安装<code>py.test</code>在线实用测试工具。</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>py.test tests/
collected <span class="hljs-number">2</span> items

tests/test_greeter.<span class="hljs-symbol">py:</span><span class="hljs-symbol">:test_greeter</span> <span class="hljs-constant">PASSED</span>
tests/test_greeter.<span class="hljs-symbol">py:</span><span class="hljs-symbol">:test_custom_greeting</span> <span class="hljs-constant">PASSED</span></code></pre> 
  <p>你应该看到一些类似于上述输出的三个测试通过。</p> 
  <p>最后，类似于测试部署，从命令行测试相同的部署：</p> 
  <pre class="prettyprint"><code class=" hljs haml">$ populus deploy --chain tester --no-wait-for-sync
&gt; Found 1 contract source files
-<span class="ruby"> contracts/<span class="hljs-constant">Greeter</span>.sol </span>&gt; Compiled 1 contracts
-<span class="ruby"> contracts/<span class="hljs-constant">Greeter</span>.<span class="hljs-symbol">sol:</span><span class="hljs-constant">Greeter</span> </span>Please select the desired contract:

    0: Greeter</code></pre> 
  <p>在提示符下键入0，然后回车：</p> 
  <pre class="prettyprint"><code class=" hljs asciidoc">Beginning contract deployment.  Deploying 1 total contracts (1 Specified, 0 because of library dependencies).

Greeter
Deploying Greeter
Deploy Transaction Sent: 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe
Waiting for confirmation...

<span class="hljs-header">Transaction Mined =================</span>
Tx Hash      : 0x84d23fa8c38a09a3b29c4689364f71343058879639a617763ce675a336033bbe
Address      : 0xc305c901078781c232a2a521c2af7980f8385ee9
Gas Provided : 465729
Gas Used     : 365729


Verified contract bytecode @ 0xc305c901078781c232a2a521c2af7980f8385ee9
Deployment Successful.</code></pre> 
  <p>ok。当然，由于这是一个特设的<code>tester</code>区块链，它立即退出，什么都没有真正保存。但是部署工作，应该工作在一个永久性的区块链上，如主干网（公有链）或TestNET（测试链）.</p> 
  <p>下面是在项目目录之外时使用：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">$ populus <span class="hljs-attribute">-p</span> /path/<span class="hljs-keyword">to</span>/my/project<span class="hljs-subst">/</span> deploy <span class="hljs-subst">--</span>chain tester <span class="hljs-subst">--</span>no<span class="hljs-attribute">-wait</span><span class="hljs-attribute">-for</span><span class="hljs-attribute">-sync</span></code></pre> 
  <h3 id="设置开发环境">设置开发环境</h3> 
  <p>为了在本地配置项目并使整个测试套件通过，需要确保你使用的是正确版本的<code>solc</code>编译器。按照以下步骤安装所有依赖项：</p> 
  <h4 id="虚拟环境">虚拟环境</h4> 
  <p>如果你还没有，请继续安装<code>virtualenv</code>使用<code>pip install virtualenv</code>。然后可以用以下命令创建和激活Populus环境：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>cd populus
<span class="hljs-variable">$ </span>virtualenv populus
<span class="hljs-variable">$ </span>source populus/bin/activate</code></pre> 
  <p>这允许你安装特定版本的Populus依赖，而不必与你在计算机上已经拥有的全局安装相冲突。</p> 
  <h4 id="安装依赖项">安装依赖项</h4> 
  <p>现在，运行以下命令以安装除<code>solc</code>之外的项目中指定的所有依赖项：</p> 
  <pre class="prettyprint"><code class=" hljs lasso">$ pip install <span class="hljs-attribute">-r</span> requirements<span class="hljs-attribute">-dev</span><span class="hljs-built_in">.</span>txt
$ pip install <span class="hljs-attribute">-r</span> requirements<span class="hljs-attribute">-docs</span><span class="hljs-built_in">.</span>txt
$ pip install <span class="hljs-attribute">-e</span> <span class="hljs-built_in">.</span></code></pre> 
  <h4 id="安装solidity">安装Solidity</h4> 
  <p>你必须安装Solidity，建议0.4.11或更高的发布版本。</p> 
  <p>二进制的安装脚本：</p> 
  <p><a href="https://github.com/ethereum/py-solc#installing-the-solc-binary" rel="nofollow">https://github.com/ethereum/py-solc#installing-the-solc-binary</a></p> 
  <p>安装脚本：</p> 
  <p>首先，复制存储库并切换到合适的分支：</p> 
  <pre class="prettyprint"><code class=" hljs smalltalk"><span class="hljs-char">$ </span>git clone --recursive <span class="hljs-method">https:</span>//github.com/ethereum/solidity.git
<span class="hljs-char">$ </span>cd solidity
<span class="hljs-char">$ </span>git checkout release_0<span class="hljs-number">.4</span><span class="hljs-number">.13</span></code></pre> 
  <p>你也可以下载压缩文件：</p> 
  <p><a href="https://github.com/ethereum/solidity/releases" rel="nofollow">https://github.com/ethereum/solidity/releases</a></p> 
  <p>注意使用tar.gz文件从源代码构建的话，确保在解压文件之后，<code>deps</code>目录不是空的，实际上包含依赖项。</p> 
  <p>如果你在Mac上，你也可能需要接受Xcode许可证。请确保安装了最新版本，如果遇到错误，请尝试以下操作：</p> 
  <pre class="prettyprint"><code class=" hljs bash">$ <span class="hljs-built_in">sudo</span> xcodebuild -license accept</code></pre> 
  <p>如果你在Windows上，请确保你安装了Git、CMake和VisualStudio 2015以上。</p> 
  <p>现在，安装所有外部依赖项。如果是Mac：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>./scripts/install_deps.sh</code></pre> 
  <p>如果是Windows下：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>scripts\install_deps.bat</code></pre> 
  <p>最后，继续构建solidity。如果是Mac：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>mkdir build
<span class="hljs-variable">$ </span>cd build
<span class="hljs-variable">$ </span>cmake .. &amp;&amp; make</code></pre> 
  <p>如果是Windows：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>mkdir build
<span class="hljs-variable">$ </span>cd build
<span class="hljs-variable">$ </span>cmake -<span class="hljs-constant">G</span> <span class="hljs-string">"Visual Studio 14 2015 Win64"</span> ..</code></pre> 
  <p>下面的命令也在windows下工作：</p> 
  <pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">$</span> <span class="hljs-comment">cmake</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">build</span> <span class="hljs-string">.</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">config</span> <span class="hljs-comment">RelWithDebInfo</span></code></pre> 
  <h3 id="确认">确认</h3> 
  <p>这应该已经安装了你需要的一切，但我们可以确认下。第一，尝试运行：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>which solc</code></pre> 
  <p>如果没有看到任何输出，则需要将<code>solc</code>可执行文件移动到环境设置PATH指定的目录中，或者在bash配置文件中添加一个精确路径。如果找不到文件，可能需要运行：</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>npm install -g solc</code></pre> 
  <p>这应该在节点包所在的任何地方都安装了可执行文件。</p> 
  <p>一旦从<code>solc</code>命令中看到输出（并且在Populus目录中激活了<code>virtualenv</code>），就可以运行测试。</p> 
  <pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>py.test tests/</code></pre> 
  <p>这样，所有的测试都应该通过。如果他们不是这样，你很可能在某个地方错过了一个依赖关系。只要重复以上的步骤，你就会搞定的。</p> 
  <p>当然python也有专门的web3.py库，对于python开发以太坊来说非常的方便，有兴趣的用户可以关注我们的<a href="http://xc.hubwiz.com/course/5b40462cc02e6b6a59171de4?affid=820csdn" rel="nofollow">python以太坊教程</a>，主要是针对python工程师使用web3.py进行区块链以太坊开发的详解。</p> 
  <p>另外其他语言可以学习的以太坊教程如下： </p> 
  <blockquote> 
   <ul> 
    <li><a href="http://xc.hubwiz.com/course/5b2b6e82c02e6b6a59171de2?affid=820csdn" rel="nofollow">web3j教程</a>，主要是针对java和android程序员进行区块链以太坊开发的web3j详解。</li> 
    <li><a href="http://xc.hubwiz.com/course/5a952991adb3847553d205d1?affid=820csdn" rel="nofollow">以太坊教程</a>，主要介绍智能合约与dapp应用开发，适合入门。</li> 
    <li><a href="http://xc.hubwiz.com/course/5abbb7acc02e6b6a59171dd6?affid=820csdn" rel="nofollow">以太坊开发</a>，主要是介绍使用node.js、mongodb、区块链、ipfs实现去中心化电商DApp实战，适合进阶。</li> 
    <li><a href="http://xc.hubwiz.com/course/5b36629bc02e6b6a59171de3?affid=820csdn" rel="nofollow">php以太坊</a>，主要是介绍使用php进行智能合约开发交互，进行账号创建、交易、转账、代币开发以及过滤器和事件等内容。</li> 
    <li><a href="http://xc.hubwiz.com/course/5b6048c3c02e6b6a59171dee?affid=820csdn" rel="nofollow">C#以太坊</a>，主要讲解如何使用C#开发基于.Net的以太坊应用，包括账户管理、状态与交易、智能合约开发与交互、过滤器和事件等。</li> 
   </ul> 
  </blockquote> 
  <p>汇智网原创翻译，转载请标明出处。这里是<a href="http://blog.hubwiz.com/2018/08/14/ethereum-python-populus-Quickstart/" rel="nofollow">原文</a></p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mongo_node/article/details/81870050,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/mongo_node/article/details/81870050,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
