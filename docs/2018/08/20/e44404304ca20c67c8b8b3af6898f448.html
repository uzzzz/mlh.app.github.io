<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Solidity编译器和简单调试 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Solidity编译器和简单调试" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1 安装Solidity编译器 1.1 通过docker安装Solc 搜索docker的Solc镜像 docker search —no-trunc ethereum/solc 通过docker安装Solc docker pull docker.io/ethereum/solc:stable 1.2 运行Solc容器 运行如下命令 docker run —rm -it —privileged=true —net=host -v /home/hpbroot/ethereum_go/contract:/contract —name solc ethereum/solc:stable –version 查看是否成功 &nbsp; 2 新建spring boot工程 2.1 通过Eclipse新建工程 首先，新建ContractCompile工程 在springboot配置文件application.properties中添加如下 1&nbsp;web3j.contract.solcCmd=docker&nbsp;run&nbsp;--rm&nbsp;-it&nbsp;--privileged=true&nbsp;--net=host&nbsp;-v&nbsp;/home/hpbroot/ethereum_go/contract:/contract&nbsp;--name&nbsp;solc&nbsp;ethereum/solc:stable 2 &nbsp; &nbsp;在pom文件添加依赖 3 &nbsp; &nbsp;&lt;dependency&gt; 4&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.ethereum&lt;/groupId&gt; 5&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;solcJ-all&lt;/artifactId&gt; 6&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.4.10&lt;/version&gt; 7 &nbsp; &nbsp;&lt;/dependency&gt; 新建ContractConfig类 1 &nbsp; &nbsp; @Component 2 &nbsp; &nbsp;@ConfigurationProperties(prefix&nbsp;=&nbsp;&quot;web3j.contract&quot;) 3 &nbsp; &nbsp;public&nbsp;class&nbsp;ContractConfig&nbsp;{ 4 &nbsp; &nbsp; &nbsp; &nbsp;private&nbsp;String&nbsp;solcCmd; 5 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;String&nbsp;getSolcCmd()&nbsp;{ 6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;solcCmd; 7 &nbsp; &nbsp; &nbsp; &nbsp; } 8 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;void&nbsp;setSolcCmd(String&nbsp;solcCmd)&nbsp;{ 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.solcCmd&nbsp;=&nbsp;solcCmd; 10 &nbsp; &nbsp; &nbsp;} 11 &nbsp; &nbsp;} 2.2 调用智能合约编译器的代码 1 &nbsp; &nbsp; String&nbsp;soliditySrcCode&nbsp;=MapUtils.getString(preParam,&nbsp;&quot;soliditySrcCode&quot;); 2 &nbsp; &nbsp;if(StringUtils.isBlank(soliditySrcCode))&nbsp;{ 3&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE); 4&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.NOSRCCODE); 5&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;param; 6 &nbsp; &nbsp;} 7 &nbsp; &nbsp;SolidityCompiler&nbsp;solidityCompiler&nbsp;=&nbsp;SolidityCompiler.getInstance(getLog(),contractConfig.getSolcCmd()); 8 &nbsp; &nbsp;byte[]&nbsp;source&nbsp;=&nbsp;soliditySrcCode.getBytes(StandardCharsets.UTF_8); 9 &nbsp; &nbsp;CompilerResult&nbsp;compilerResult&nbsp;=&nbsp;solidityCompiler.compileSrc(source, 10 &nbsp;&nbsp;SolidityCompiler.Options.ABI,&nbsp;SolidityCompiler.Options.BIN); 11 &nbsp; &nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.SUCCESS_CODE); 12&nbsp; &nbsp; param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.SUCCESS_MSG); 13 &nbsp; &nbsp;if(compilerResult.isFailed())&nbsp;{ 14&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE); 15&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;compilerResult.getErrors()); 16 &nbsp; &nbsp;} &nbsp; 3 调用编译智能合约源文件的代码 3.1 编写智能合约源码 1 &nbsp; &nbsp; &nbsp;contract&nbsp;SampleRecipientSuccess&nbsp;{ 2 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;from; 3 &nbsp; &nbsp; &nbsp;uint256&nbsp;public&nbsp;value; 4 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;tokenContract; 5 &nbsp; &nbsp; &nbsp;bytes&nbsp;public&nbsp;extraData; 6 &nbsp; &nbsp; &nbsp;event&nbsp;ReceivedApproval(uint256&nbsp;_value); 7 &nbsp; &nbsp; &nbsp;function&nbsp;receiveApproval(address&nbsp;_from,&nbsp;uint256&nbsp;_value,&nbsp;address&nbsp;_tokenContract,&nbsp;bytes&nbsp;_extraData)&nbsp;{ 8 &nbsp; &nbsp; &nbsp;from&nbsp;=&nbsp;_from; 9 &nbsp; &nbsp; &nbsp;value&nbsp;=&nbsp;_value; 10 &nbsp; &nbsp;tokenContract&nbsp;=&nbsp;_tokenContract; 11&nbsp;&nbsp;&nbsp;&nbsp;extraData&nbsp;=&nbsp;_extraData; 12&nbsp;&nbsp;&nbsp;&nbsp;ReceivedApproval(_value); 13 &nbsp; &nbsp;} 14 &nbsp; } 3.2 通过HTTP调用智能合约的J2EE组件 1 &nbsp; &nbsp; &nbsp; &nbsp;String&nbsp;contractPath=&quot;/SampleRecipientSuccess.sol&quot;; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;contractString&nbsp;=&nbsp;FileUtils.readFileToString(new&nbsp;File(contractPath),StandardCharsets.UTF_8); 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;Object&gt;&nbsp;hashMap&nbsp;=&nbsp;new&nbsp;HashMap&lt;String,Object&gt;(); 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hashMap.put(&quot;soliditySrcCode&quot;,&nbsp;contractString); 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;url&nbsp;=&nbsp;&quot;http://192.168.3.43:18080/ContractCompile/compileContractCmd&quot;; 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResponseEntity&lt;Map&gt;&nbsp;postForEntity&nbsp;=&nbsp;getRestTemplate().postForEntity(url,&nbsp;hashMap,&nbsp;Map.class); 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&nbsp;body&nbsp;=&nbsp;postForEntity.getBody(); 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;returnCode&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;ContractConstant.RETURN_CODE); 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(ContractConstant.SUCCESS_CODE.equals(returnCode))&nbsp;{ 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;result&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;&quot;result&quot;); 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;parseResult&nbsp;=&nbsp;parseResult(result); 12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(AppObjectUtil.toJson(parseResult)); 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 3.3 智能合约编译器组件返回的编译数据 1 &nbsp; &nbsp;{ 2&nbsp;&nbsp;&nbsp;&nbsp;&quot;abis&quot;:&nbsp;[{ 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;value&quot;, 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 12&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;tokenContract&quot;, 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 17&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 19&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 22&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;extraData&quot;, 26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 28&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;bytes&quot; 29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 32&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 33&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;false, 34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[{ 35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_from&quot;, 36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 38&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_value&quot;, 39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 41&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_tokenContract&quot;, 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_extraData&quot;, 45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;bytes&quot; 46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;receiveApproval&quot;, 48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[], 49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 51&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 52&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 53&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 54&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;from&quot;, 55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 56&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 57&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 58&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 61&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 62&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;anonymous&quot;:&nbsp;false, 63&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[{ 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;indexed&quot;:&nbsp;false, 65&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_value&quot;, 66&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 67&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 68&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;ReceivedApproval&quot;, 69&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;event&quot; 70&nbsp;&nbsp;&nbsp;&nbsp;}], 71&nbsp;&nbsp;&nbsp;&nbsp;&quot;bin&quot;:&nbsp; 72&nbsp;&nbsp;&nbsp;&nbsp;&quot;6060604052341561000c57fe5b5b6103d38061001c6000396000f300606060405263ffffffff60e 73&nbsp;&nbsp;&nbsp;&nbsp;060020a6000350416633fa4f245811461004d57806355a373d61461006f578063609d33341461009 74&nbsp;&nbsp;&nbsp;&nbsp;b5780638f4ffcb11461012b578063d5ce338914610199575bfe5b341561005557fe5b61005d6101c 75&nbsp;&nbsp;&nbsp;&nbsp;5565b60408051918252519081900360200190f35b341561007757fe5b61007f6101cb565b6040805 76&nbsp;&nbsp;&nbsp;&nbsp;1600160a060020a039092168252519081900360200190f35b34156100a357fe5b6100ab6101da565 77&nbsp;&nbsp;&nbsp;&nbsp;b6040805160208082528351818301528351919283929083019185019080838382156100f1575b805 78&nbsp;&nbsp;&nbsp;&nbsp;1825260208311156100f157601f1990920191602091820191016100d1565b5050509050908101906 79&nbsp;&nbsp;&nbsp;&nbsp;01f16801561011d5780820380516001836020036101000a031916815260200191505b50925050506 80&nbsp;&nbsp;&nbsp;&nbsp;0405180910390f35b341561013357fe5b604080516020600460643581810135601f8101849004840 81&nbsp;&nbsp;&nbsp;&nbsp;285018401909552848452610197948235600160a060020a039081169560248035966044359093169 82&nbsp;&nbsp;&nbsp;&nbsp;594608494929391019190819084018382808284375094965061026895505050505050565b005b341 83&nbsp;&nbsp;&nbsp;&nbsp;56101a157fe5b61007f6102f8565b60408051600160a060020a03909216825251908190036020019 84&nbsp;&nbsp;&nbsp;&nbsp;0f35b60015481565b600254600160a060020a031681565b600380546040805160206002600185161 85&nbsp;&nbsp;&nbsp;&nbsp;5610100026000190190941693909304601f810184900484028201840190925281815292918301828 86&nbsp;&nbsp;&nbsp;&nbsp;280156102605780601f1061023557610100808354040283529160200191610260565b82019190600 87&nbsp;&nbsp;&nbsp;&nbsp;0526020600020905b81548152906001019060200180831161024357829003601f168201915b50505 88&nbsp;&nbsp;&nbsp;&nbsp;0505081565b60008054600160a060020a0380871673fffffffffffffffffffffffffffffffffffff 89&nbsp;&nbsp;&nbsp;&nbsp;fff19928316179092556001859055600280549285169290911691909117905580516102bd9060039 90&nbsp;&nbsp;&nbsp;&nbsp;06020840190610307565b506040805184815290517f2db24179b782aab7c5ab64add7f84d4f6c845 91&nbsp;&nbsp;&nbsp;&nbsp;d0779695371f29be1f658d043cd9181900360200190a15b50505050565b600054600160a060020a0 92&nbsp;&nbsp;&nbsp;&nbsp;31681565b828054600181600116156101000203166002900490600052602060002090601f0160209 93&nbsp;&nbsp;&nbsp;&nbsp;00481019282601f1061034857805160ff1916838001178555610375565b828001600101855582156 94&nbsp;&nbsp;&nbsp;&nbsp;10375579182015b8281111561037557825182559160200191906001019061035a565b5b506103829 95&nbsp;&nbsp;&nbsp;&nbsp;29150610386565b5090565b6103a491905b80821115610382576000815560010161038c565b50905 96&nbsp;&nbsp;&nbsp;&nbsp;65b905600a165627a7a723058209522849948e8cc25a7d6717d5c10836c97c36425936be5edf3992 97&nbsp;&nbsp;&nbsp;&nbsp;06b3e5d7fa30029&quot; 98 &nbsp;} 总结 通过J2EE组件的接口调用，可以为大多数基于java的区块链应用提供了便利，可以利用J2EE成熟稳定的框架无缝集成到项目中，也是为了以后安卓开发和联盟链提供在线编译智能合约功能，如果是私有的局域网络的企业级联盟链，可以发布该智能合约的J2EE组件到该局域网的机器上去，可以实现联盟中的智能合约统一的编译器，便于快速升级编译器。 &nbsp; 原文链接：http://wangxiaoming.com/blog/2018/05/26/HPB-46-ETH-Solidity-Install-Compile/ &nbsp; 关于我：蓝莲花（汪晓明），微信/QQ：86606813，公众号：xm123798。HPB芯链（http://www.hpb.io)创始人。致力于推动区块链应用落地。 &nbsp; 阅读更多" />
<meta property="og:description" content="1 安装Solidity编译器 1.1 通过docker安装Solc 搜索docker的Solc镜像 docker search —no-trunc ethereum/solc 通过docker安装Solc docker pull docker.io/ethereum/solc:stable 1.2 运行Solc容器 运行如下命令 docker run —rm -it —privileged=true —net=host -v /home/hpbroot/ethereum_go/contract:/contract —name solc ethereum/solc:stable –version 查看是否成功 &nbsp; 2 新建spring boot工程 2.1 通过Eclipse新建工程 首先，新建ContractCompile工程 在springboot配置文件application.properties中添加如下 1&nbsp;web3j.contract.solcCmd=docker&nbsp;run&nbsp;--rm&nbsp;-it&nbsp;--privileged=true&nbsp;--net=host&nbsp;-v&nbsp;/home/hpbroot/ethereum_go/contract:/contract&nbsp;--name&nbsp;solc&nbsp;ethereum/solc:stable 2 &nbsp; &nbsp;在pom文件添加依赖 3 &nbsp; &nbsp;&lt;dependency&gt; 4&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.ethereum&lt;/groupId&gt; 5&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;solcJ-all&lt;/artifactId&gt; 6&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.4.10&lt;/version&gt; 7 &nbsp; &nbsp;&lt;/dependency&gt; 新建ContractConfig类 1 &nbsp; &nbsp; @Component 2 &nbsp; &nbsp;@ConfigurationProperties(prefix&nbsp;=&nbsp;&quot;web3j.contract&quot;) 3 &nbsp; &nbsp;public&nbsp;class&nbsp;ContractConfig&nbsp;{ 4 &nbsp; &nbsp; &nbsp; &nbsp;private&nbsp;String&nbsp;solcCmd; 5 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;String&nbsp;getSolcCmd()&nbsp;{ 6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;solcCmd; 7 &nbsp; &nbsp; &nbsp; &nbsp; } 8 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;void&nbsp;setSolcCmd(String&nbsp;solcCmd)&nbsp;{ 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.solcCmd&nbsp;=&nbsp;solcCmd; 10 &nbsp; &nbsp; &nbsp;} 11 &nbsp; &nbsp;} 2.2 调用智能合约编译器的代码 1 &nbsp; &nbsp; String&nbsp;soliditySrcCode&nbsp;=MapUtils.getString(preParam,&nbsp;&quot;soliditySrcCode&quot;); 2 &nbsp; &nbsp;if(StringUtils.isBlank(soliditySrcCode))&nbsp;{ 3&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE); 4&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.NOSRCCODE); 5&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;param; 6 &nbsp; &nbsp;} 7 &nbsp; &nbsp;SolidityCompiler&nbsp;solidityCompiler&nbsp;=&nbsp;SolidityCompiler.getInstance(getLog(),contractConfig.getSolcCmd()); 8 &nbsp; &nbsp;byte[]&nbsp;source&nbsp;=&nbsp;soliditySrcCode.getBytes(StandardCharsets.UTF_8); 9 &nbsp; &nbsp;CompilerResult&nbsp;compilerResult&nbsp;=&nbsp;solidityCompiler.compileSrc(source, 10 &nbsp;&nbsp;SolidityCompiler.Options.ABI,&nbsp;SolidityCompiler.Options.BIN); 11 &nbsp; &nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.SUCCESS_CODE); 12&nbsp; &nbsp; param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.SUCCESS_MSG); 13 &nbsp; &nbsp;if(compilerResult.isFailed())&nbsp;{ 14&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE); 15&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;compilerResult.getErrors()); 16 &nbsp; &nbsp;} &nbsp; 3 调用编译智能合约源文件的代码 3.1 编写智能合约源码 1 &nbsp; &nbsp; &nbsp;contract&nbsp;SampleRecipientSuccess&nbsp;{ 2 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;from; 3 &nbsp; &nbsp; &nbsp;uint256&nbsp;public&nbsp;value; 4 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;tokenContract; 5 &nbsp; &nbsp; &nbsp;bytes&nbsp;public&nbsp;extraData; 6 &nbsp; &nbsp; &nbsp;event&nbsp;ReceivedApproval(uint256&nbsp;_value); 7 &nbsp; &nbsp; &nbsp;function&nbsp;receiveApproval(address&nbsp;_from,&nbsp;uint256&nbsp;_value,&nbsp;address&nbsp;_tokenContract,&nbsp;bytes&nbsp;_extraData)&nbsp;{ 8 &nbsp; &nbsp; &nbsp;from&nbsp;=&nbsp;_from; 9 &nbsp; &nbsp; &nbsp;value&nbsp;=&nbsp;_value; 10 &nbsp; &nbsp;tokenContract&nbsp;=&nbsp;_tokenContract; 11&nbsp;&nbsp;&nbsp;&nbsp;extraData&nbsp;=&nbsp;_extraData; 12&nbsp;&nbsp;&nbsp;&nbsp;ReceivedApproval(_value); 13 &nbsp; &nbsp;} 14 &nbsp; } 3.2 通过HTTP调用智能合约的J2EE组件 1 &nbsp; &nbsp; &nbsp; &nbsp;String&nbsp;contractPath=&quot;/SampleRecipientSuccess.sol&quot;; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;contractString&nbsp;=&nbsp;FileUtils.readFileToString(new&nbsp;File(contractPath),StandardCharsets.UTF_8); 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;Object&gt;&nbsp;hashMap&nbsp;=&nbsp;new&nbsp;HashMap&lt;String,Object&gt;(); 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hashMap.put(&quot;soliditySrcCode&quot;,&nbsp;contractString); 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;url&nbsp;=&nbsp;&quot;http://192.168.3.43:18080/ContractCompile/compileContractCmd&quot;; 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResponseEntity&lt;Map&gt;&nbsp;postForEntity&nbsp;=&nbsp;getRestTemplate().postForEntity(url,&nbsp;hashMap,&nbsp;Map.class); 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&nbsp;body&nbsp;=&nbsp;postForEntity.getBody(); 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;returnCode&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;ContractConstant.RETURN_CODE); 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(ContractConstant.SUCCESS_CODE.equals(returnCode))&nbsp;{ 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;result&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;&quot;result&quot;); 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;parseResult&nbsp;=&nbsp;parseResult(result); 12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(AppObjectUtil.toJson(parseResult)); 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 3.3 智能合约编译器组件返回的编译数据 1 &nbsp; &nbsp;{ 2&nbsp;&nbsp;&nbsp;&nbsp;&quot;abis&quot;:&nbsp;[{ 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;value&quot;, 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 12&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;tokenContract&quot;, 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 17&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 19&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 22&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;extraData&quot;, 26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 28&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;bytes&quot; 29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 32&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 33&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;false, 34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[{ 35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_from&quot;, 36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 38&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_value&quot;, 39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 41&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_tokenContract&quot;, 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_extraData&quot;, 45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;bytes&quot; 46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;receiveApproval&quot;, 48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[], 49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 51&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 52&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 53&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 54&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;from&quot;, 55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 56&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 57&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 58&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 61&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 62&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;anonymous&quot;:&nbsp;false, 63&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[{ 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;indexed&quot;:&nbsp;false, 65&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_value&quot;, 66&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 67&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 68&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;ReceivedApproval&quot;, 69&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;event&quot; 70&nbsp;&nbsp;&nbsp;&nbsp;}], 71&nbsp;&nbsp;&nbsp;&nbsp;&quot;bin&quot;:&nbsp; 72&nbsp;&nbsp;&nbsp;&nbsp;&quot;6060604052341561000c57fe5b5b6103d38061001c6000396000f300606060405263ffffffff60e 73&nbsp;&nbsp;&nbsp;&nbsp;060020a6000350416633fa4f245811461004d57806355a373d61461006f578063609d33341461009 74&nbsp;&nbsp;&nbsp;&nbsp;b5780638f4ffcb11461012b578063d5ce338914610199575bfe5b341561005557fe5b61005d6101c 75&nbsp;&nbsp;&nbsp;&nbsp;5565b60408051918252519081900360200190f35b341561007757fe5b61007f6101cb565b6040805 76&nbsp;&nbsp;&nbsp;&nbsp;1600160a060020a039092168252519081900360200190f35b34156100a357fe5b6100ab6101da565 77&nbsp;&nbsp;&nbsp;&nbsp;b6040805160208082528351818301528351919283929083019185019080838382156100f1575b805 78&nbsp;&nbsp;&nbsp;&nbsp;1825260208311156100f157601f1990920191602091820191016100d1565b5050509050908101906 79&nbsp;&nbsp;&nbsp;&nbsp;01f16801561011d5780820380516001836020036101000a031916815260200191505b50925050506 80&nbsp;&nbsp;&nbsp;&nbsp;0405180910390f35b341561013357fe5b604080516020600460643581810135601f8101849004840 81&nbsp;&nbsp;&nbsp;&nbsp;285018401909552848452610197948235600160a060020a039081169560248035966044359093169 82&nbsp;&nbsp;&nbsp;&nbsp;594608494929391019190819084018382808284375094965061026895505050505050565b005b341 83&nbsp;&nbsp;&nbsp;&nbsp;56101a157fe5b61007f6102f8565b60408051600160a060020a03909216825251908190036020019 84&nbsp;&nbsp;&nbsp;&nbsp;0f35b60015481565b600254600160a060020a031681565b600380546040805160206002600185161 85&nbsp;&nbsp;&nbsp;&nbsp;5610100026000190190941693909304601f810184900484028201840190925281815292918301828 86&nbsp;&nbsp;&nbsp;&nbsp;280156102605780601f1061023557610100808354040283529160200191610260565b82019190600 87&nbsp;&nbsp;&nbsp;&nbsp;0526020600020905b81548152906001019060200180831161024357829003601f168201915b50505 88&nbsp;&nbsp;&nbsp;&nbsp;0505081565b60008054600160a060020a0380871673fffffffffffffffffffffffffffffffffffff 89&nbsp;&nbsp;&nbsp;&nbsp;fff19928316179092556001859055600280549285169290911691909117905580516102bd9060039 90&nbsp;&nbsp;&nbsp;&nbsp;06020840190610307565b506040805184815290517f2db24179b782aab7c5ab64add7f84d4f6c845 91&nbsp;&nbsp;&nbsp;&nbsp;d0779695371f29be1f658d043cd9181900360200190a15b50505050565b600054600160a060020a0 92&nbsp;&nbsp;&nbsp;&nbsp;31681565b828054600181600116156101000203166002900490600052602060002090601f0160209 93&nbsp;&nbsp;&nbsp;&nbsp;00481019282601f1061034857805160ff1916838001178555610375565b828001600101855582156 94&nbsp;&nbsp;&nbsp;&nbsp;10375579182015b8281111561037557825182559160200191906001019061035a565b5b506103829 95&nbsp;&nbsp;&nbsp;&nbsp;29150610386565b5090565b6103a491905b80821115610382576000815560010161038c565b50905 96&nbsp;&nbsp;&nbsp;&nbsp;65b905600a165627a7a723058209522849948e8cc25a7d6717d5c10836c97c36425936be5edf3992 97&nbsp;&nbsp;&nbsp;&nbsp;06b3e5d7fa30029&quot; 98 &nbsp;} 总结 通过J2EE组件的接口调用，可以为大多数基于java的区块链应用提供了便利，可以利用J2EE成熟稳定的框架无缝集成到项目中，也是为了以后安卓开发和联盟链提供在线编译智能合约功能，如果是私有的局域网络的企业级联盟链，可以发布该智能合约的J2EE组件到该局域网的机器上去，可以实现联盟中的智能合约统一的编译器，便于快速升级编译器。 &nbsp; 原文链接：http://wangxiaoming.com/blog/2018/05/26/HPB-46-ETH-Solidity-Install-Compile/ &nbsp; 关于我：蓝莲花（汪晓明），微信/QQ：86606813，公众号：xm123798。HPB芯链（http://www.hpb.io)创始人。致力于推动区块链应用落地。 &nbsp; 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/08/20/e44404304ca20c67c8b8b3af6898f448.html" />
<meta property="og:url" content="https://mlh.app/2018/08/20/e44404304ca20c67c8b8b3af6898f448.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-20T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"1 安装Solidity编译器 1.1 通过docker安装Solc 搜索docker的Solc镜像 docker search —no-trunc ethereum/solc 通过docker安装Solc docker pull docker.io/ethereum/solc:stable 1.2 运行Solc容器 运行如下命令 docker run —rm -it —privileged=true —net=host -v /home/hpbroot/ethereum_go/contract:/contract —name solc ethereum/solc:stable –version 查看是否成功 &nbsp; 2 新建spring boot工程 2.1 通过Eclipse新建工程 首先，新建ContractCompile工程 在springboot配置文件application.properties中添加如下 1&nbsp;web3j.contract.solcCmd=docker&nbsp;run&nbsp;--rm&nbsp;-it&nbsp;--privileged=true&nbsp;--net=host&nbsp;-v&nbsp;/home/hpbroot/ethereum_go/contract:/contract&nbsp;--name&nbsp;solc&nbsp;ethereum/solc:stable 2 &nbsp; &nbsp;在pom文件添加依赖 3 &nbsp; &nbsp;&lt;dependency&gt; 4&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.ethereum&lt;/groupId&gt; 5&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;solcJ-all&lt;/artifactId&gt; 6&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.4.10&lt;/version&gt; 7 &nbsp; &nbsp;&lt;/dependency&gt; 新建ContractConfig类 1 &nbsp; &nbsp; @Component 2 &nbsp; &nbsp;@ConfigurationProperties(prefix&nbsp;=&nbsp;&quot;web3j.contract&quot;) 3 &nbsp; &nbsp;public&nbsp;class&nbsp;ContractConfig&nbsp;{ 4 &nbsp; &nbsp; &nbsp; &nbsp;private&nbsp;String&nbsp;solcCmd; 5 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;String&nbsp;getSolcCmd()&nbsp;{ 6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;solcCmd; 7 &nbsp; &nbsp; &nbsp; &nbsp; } 8 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;void&nbsp;setSolcCmd(String&nbsp;solcCmd)&nbsp;{ 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.solcCmd&nbsp;=&nbsp;solcCmd; 10 &nbsp; &nbsp; &nbsp;} 11 &nbsp; &nbsp;} 2.2 调用智能合约编译器的代码 1 &nbsp; &nbsp; String&nbsp;soliditySrcCode&nbsp;=MapUtils.getString(preParam,&nbsp;&quot;soliditySrcCode&quot;); 2 &nbsp; &nbsp;if(StringUtils.isBlank(soliditySrcCode))&nbsp;{ 3&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE); 4&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.NOSRCCODE); 5&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;param; 6 &nbsp; &nbsp;} 7 &nbsp; &nbsp;SolidityCompiler&nbsp;solidityCompiler&nbsp;=&nbsp;SolidityCompiler.getInstance(getLog(),contractConfig.getSolcCmd()); 8 &nbsp; &nbsp;byte[]&nbsp;source&nbsp;=&nbsp;soliditySrcCode.getBytes(StandardCharsets.UTF_8); 9 &nbsp; &nbsp;CompilerResult&nbsp;compilerResult&nbsp;=&nbsp;solidityCompiler.compileSrc(source, 10 &nbsp;&nbsp;SolidityCompiler.Options.ABI,&nbsp;SolidityCompiler.Options.BIN); 11 &nbsp; &nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.SUCCESS_CODE); 12&nbsp; &nbsp; param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.SUCCESS_MSG); 13 &nbsp; &nbsp;if(compilerResult.isFailed())&nbsp;{ 14&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE); 15&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;compilerResult.getErrors()); 16 &nbsp; &nbsp;} &nbsp; 3 调用编译智能合约源文件的代码 3.1 编写智能合约源码 1 &nbsp; &nbsp; &nbsp;contract&nbsp;SampleRecipientSuccess&nbsp;{ 2 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;from; 3 &nbsp; &nbsp; &nbsp;uint256&nbsp;public&nbsp;value; 4 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;tokenContract; 5 &nbsp; &nbsp; &nbsp;bytes&nbsp;public&nbsp;extraData; 6 &nbsp; &nbsp; &nbsp;event&nbsp;ReceivedApproval(uint256&nbsp;_value); 7 &nbsp; &nbsp; &nbsp;function&nbsp;receiveApproval(address&nbsp;_from,&nbsp;uint256&nbsp;_value,&nbsp;address&nbsp;_tokenContract,&nbsp;bytes&nbsp;_extraData)&nbsp;{ 8 &nbsp; &nbsp; &nbsp;from&nbsp;=&nbsp;_from; 9 &nbsp; &nbsp; &nbsp;value&nbsp;=&nbsp;_value; 10 &nbsp; &nbsp;tokenContract&nbsp;=&nbsp;_tokenContract; 11&nbsp;&nbsp;&nbsp;&nbsp;extraData&nbsp;=&nbsp;_extraData; 12&nbsp;&nbsp;&nbsp;&nbsp;ReceivedApproval(_value); 13 &nbsp; &nbsp;} 14 &nbsp; } 3.2 通过HTTP调用智能合约的J2EE组件 1 &nbsp; &nbsp; &nbsp; &nbsp;String&nbsp;contractPath=&quot;/SampleRecipientSuccess.sol&quot;; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;contractString&nbsp;=&nbsp;FileUtils.readFileToString(new&nbsp;File(contractPath),StandardCharsets.UTF_8); 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;Object&gt;&nbsp;hashMap&nbsp;=&nbsp;new&nbsp;HashMap&lt;String,Object&gt;(); 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hashMap.put(&quot;soliditySrcCode&quot;,&nbsp;contractString); 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;url&nbsp;=&nbsp;&quot;http://192.168.3.43:18080/ContractCompile/compileContractCmd&quot;; 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResponseEntity&lt;Map&gt;&nbsp;postForEntity&nbsp;=&nbsp;getRestTemplate().postForEntity(url,&nbsp;hashMap,&nbsp;Map.class); 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&nbsp;body&nbsp;=&nbsp;postForEntity.getBody(); 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;returnCode&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;ContractConstant.RETURN_CODE); 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(ContractConstant.SUCCESS_CODE.equals(returnCode))&nbsp;{ 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;result&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;&quot;result&quot;); 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;parseResult&nbsp;=&nbsp;parseResult(result); 12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(AppObjectUtil.toJson(parseResult)); 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 3.3 智能合约编译器组件返回的编译数据 1 &nbsp; &nbsp;{ 2&nbsp;&nbsp;&nbsp;&nbsp;&quot;abis&quot;:&nbsp;[{ 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;value&quot;, 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 12&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;tokenContract&quot;, 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 17&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 19&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 22&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;extraData&quot;, 26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 28&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;bytes&quot; 29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 32&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 33&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;false, 34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[{ 35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_from&quot;, 36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 38&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_value&quot;, 39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 41&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_tokenContract&quot;, 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_extraData&quot;, 45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;bytes&quot; 46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;receiveApproval&quot;, 48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[], 49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 51&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 52&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;constant&quot;:&nbsp;true, 53&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[], 54&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;from&quot;, 55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;outputs&quot;:&nbsp;[{ 56&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;&quot;, 57&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;address&quot; 58&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;payable&quot;:&nbsp;false, 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot; 61&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{ 62&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;anonymous&quot;:&nbsp;false, 63&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;[{ 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;indexed&quot;:&nbsp;false, 65&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;_value&quot;, 66&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;uint256&quot; 67&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}], 68&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;ReceivedApproval&quot;, 69&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;event&quot; 70&nbsp;&nbsp;&nbsp;&nbsp;}], 71&nbsp;&nbsp;&nbsp;&nbsp;&quot;bin&quot;:&nbsp; 72&nbsp;&nbsp;&nbsp;&nbsp;&quot;6060604052341561000c57fe5b5b6103d38061001c6000396000f300606060405263ffffffff60e 73&nbsp;&nbsp;&nbsp;&nbsp;060020a6000350416633fa4f245811461004d57806355a373d61461006f578063609d33341461009 74&nbsp;&nbsp;&nbsp;&nbsp;b5780638f4ffcb11461012b578063d5ce338914610199575bfe5b341561005557fe5b61005d6101c 75&nbsp;&nbsp;&nbsp;&nbsp;5565b60408051918252519081900360200190f35b341561007757fe5b61007f6101cb565b6040805 76&nbsp;&nbsp;&nbsp;&nbsp;1600160a060020a039092168252519081900360200190f35b34156100a357fe5b6100ab6101da565 77&nbsp;&nbsp;&nbsp;&nbsp;b6040805160208082528351818301528351919283929083019185019080838382156100f1575b805 78&nbsp;&nbsp;&nbsp;&nbsp;1825260208311156100f157601f1990920191602091820191016100d1565b5050509050908101906 79&nbsp;&nbsp;&nbsp;&nbsp;01f16801561011d5780820380516001836020036101000a031916815260200191505b50925050506 80&nbsp;&nbsp;&nbsp;&nbsp;0405180910390f35b341561013357fe5b604080516020600460643581810135601f8101849004840 81&nbsp;&nbsp;&nbsp;&nbsp;285018401909552848452610197948235600160a060020a039081169560248035966044359093169 82&nbsp;&nbsp;&nbsp;&nbsp;594608494929391019190819084018382808284375094965061026895505050505050565b005b341 83&nbsp;&nbsp;&nbsp;&nbsp;56101a157fe5b61007f6102f8565b60408051600160a060020a03909216825251908190036020019 84&nbsp;&nbsp;&nbsp;&nbsp;0f35b60015481565b600254600160a060020a031681565b600380546040805160206002600185161 85&nbsp;&nbsp;&nbsp;&nbsp;5610100026000190190941693909304601f810184900484028201840190925281815292918301828 86&nbsp;&nbsp;&nbsp;&nbsp;280156102605780601f1061023557610100808354040283529160200191610260565b82019190600 87&nbsp;&nbsp;&nbsp;&nbsp;0526020600020905b81548152906001019060200180831161024357829003601f168201915b50505 88&nbsp;&nbsp;&nbsp;&nbsp;0505081565b60008054600160a060020a0380871673fffffffffffffffffffffffffffffffffffff 89&nbsp;&nbsp;&nbsp;&nbsp;fff19928316179092556001859055600280549285169290911691909117905580516102bd9060039 90&nbsp;&nbsp;&nbsp;&nbsp;06020840190610307565b506040805184815290517f2db24179b782aab7c5ab64add7f84d4f6c845 91&nbsp;&nbsp;&nbsp;&nbsp;d0779695371f29be1f658d043cd9181900360200190a15b50505050565b600054600160a060020a0 92&nbsp;&nbsp;&nbsp;&nbsp;31681565b828054600181600116156101000203166002900490600052602060002090601f0160209 93&nbsp;&nbsp;&nbsp;&nbsp;00481019282601f1061034857805160ff1916838001178555610375565b828001600101855582156 94&nbsp;&nbsp;&nbsp;&nbsp;10375579182015b8281111561037557825182559160200191906001019061035a565b5b506103829 95&nbsp;&nbsp;&nbsp;&nbsp;29150610386565b5090565b6103a491905b80821115610382576000815560010161038c565b50905 96&nbsp;&nbsp;&nbsp;&nbsp;65b905600a165627a7a723058209522849948e8cc25a7d6717d5c10836c97c36425936be5edf3992 97&nbsp;&nbsp;&nbsp;&nbsp;06b3e5d7fa30029&quot; 98 &nbsp;} 总结 通过J2EE组件的接口调用，可以为大多数基于java的区块链应用提供了便利，可以利用J2EE成熟稳定的框架无缝集成到项目中，也是为了以后安卓开发和联盟链提供在线编译智能合约功能，如果是私有的局域网络的企业级联盟链，可以发布该智能合约的J2EE组件到该局域网的机器上去，可以实现联盟中的智能合约统一的编译器，便于快速升级编译器。 &nbsp; 原文链接：http://wangxiaoming.com/blog/2018/05/26/HPB-46-ETH-Solidity-Install-Compile/ &nbsp; 关于我：蓝莲花（汪晓明），微信/QQ：86606813，公众号：xm123798。HPB芯链（http://www.hpb.io)创始人。致力于推动区块链应用落地。 &nbsp; 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/08/20/e44404304ca20c67c8b8b3af6898f448.html","headline":"Solidity编译器和简单调试","dateModified":"2018-08-20T00:00:00+08:00","datePublished":"2018-08-20T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/20/e44404304ca20c67c8b8b3af6898f448.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>Solidity编译器和简单调试</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h3>1 安装Solidity编译器</h3> 
  <p><strong>1.1 通过docker安装Solc</strong></p> 
  <p>搜索docker的Solc镜像</p> 
  <p>docker search —no-trunc ethereum/solc</p> 
  <p>通过docker安装Solc</p> 
  <p>docker pull docker.io/ethereum/solc:stable</p> 
  <p><strong>1.2 运行Solc容器</strong></p> 
  <p>运行如下命令</p> 
  <blockquote> 
   <p>docker run —rm -it —privileged=true —net=host -v /home/hpbroot/ethereum_go/contract:/contract —name solc ethereum/solc:stable –version</p> 
  </blockquote> 
  <p>查看是否成功</p> 
  <p>&nbsp;</p> 
  <h3>2 新建spring boot工程</h3> 
  <p><strong>2.1 通过Eclipse新建工程</strong></p> 
  <p>首先，新建ContractCompile工程</p> 
  <p><img alt="" class="has" src="http://assets.wangxiaoming.com/image/soli_1.png"></p> 
  <p><img alt="" class="has" src="http://assets.wangxiaoming.com/image/soli_2.png"></p> 
  <p>在springboot配置文件application.properties中添加如下</p> 
  <blockquote> 
   <p>1&nbsp;web3j.contract.solcCmd=docker&nbsp;run&nbsp;--rm&nbsp;-it&nbsp;--privileged=true&nbsp;--net=host&nbsp;-v&nbsp;/home/hpbroot/ethereum_go/contract:/contract&nbsp;--name&nbsp;solc&nbsp;ethereum/solc:stable<br> 2 &nbsp; &nbsp;在pom文件添加依赖<br> 3 &nbsp; &nbsp;&lt;dependency&gt;<br> 4&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.ethereum&lt;/groupId&gt;<br> 5&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;solcJ-all&lt;/artifactId&gt;<br> 6&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;0.4.10&lt;/version&gt;<br> 7 &nbsp; &nbsp;&lt;/dependency&gt;</p> 
  </blockquote> 
  <p><img alt="" class="has" src="http://assets.wangxiaoming.com/image/soli_3.png"></p> 
  <p>新建ContractConfig类</p> 
  <blockquote> 
   <p>1 &nbsp; &nbsp; @Component<br> 2 &nbsp; &nbsp;@ConfigurationProperties(prefix&nbsp;=&nbsp;"web3j.contract")<br> 3 &nbsp; &nbsp;public&nbsp;class&nbsp;ContractConfig&nbsp;{<br> 4 &nbsp; &nbsp; &nbsp; &nbsp;private&nbsp;String&nbsp;solcCmd;<br> 5 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;String&nbsp;getSolcCmd()&nbsp;{<br> 6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;solcCmd;<br> 7 &nbsp; &nbsp; &nbsp; &nbsp; }<br> 8 &nbsp; &nbsp; &nbsp; &nbsp;public&nbsp;void&nbsp;setSolcCmd(String&nbsp;solcCmd)&nbsp;{<br> 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.solcCmd&nbsp;=&nbsp;solcCmd;<br> 10 &nbsp; &nbsp; &nbsp;}<br> 11 &nbsp; &nbsp;}</p> 
  </blockquote> 
  <p><strong>2.2 调用智能合约编译器的代码</strong></p> 
  <blockquote> 
   <p>1 &nbsp; &nbsp; String&nbsp;soliditySrcCode&nbsp;=MapUtils.getString(preParam,&nbsp;"soliditySrcCode");<br> 2 &nbsp; &nbsp;if(StringUtils.isBlank(soliditySrcCode))&nbsp;{<br> 3&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE);<br> 4&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.NOSRCCODE);<br> 5&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;param;<br> 6 &nbsp; &nbsp;}<br> 7 &nbsp; &nbsp;SolidityCompiler&nbsp;solidityCompiler&nbsp;=&nbsp;SolidityCompiler.getInstance(getLog(),contractConfig.getSolcCmd());<br> 8 &nbsp; &nbsp;byte[]&nbsp;source&nbsp;=&nbsp;soliditySrcCode.getBytes(StandardCharsets.UTF_8);<br> 9 &nbsp; &nbsp;CompilerResult&nbsp;compilerResult&nbsp;=&nbsp;solidityCompiler.compileSrc(source,<br> 10 &nbsp;&nbsp;SolidityCompiler.Options.ABI,&nbsp;SolidityCompiler.Options.BIN);<br> 11 &nbsp; &nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.SUCCESS_CODE);<br> 12&nbsp; &nbsp; param.put(ContractConstant.RETURN_MSG,&nbsp;ContractConstant.SUCCESS_MSG);<br> 13 &nbsp; &nbsp;if(compilerResult.isFailed())&nbsp;{<br> 14&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_CODE,&nbsp;ContractConstant.ERROR_CODE);<br> 15&nbsp;&nbsp;&nbsp;&nbsp;param.put(ContractConstant.RETURN_MSG,&nbsp;compilerResult.getErrors());<br> 16 &nbsp; &nbsp;}</p> 
  </blockquote> 
  <h3>&nbsp;</h3> 
  <h3>3 调用编译智能合约源文件的代码</h3> 
  <p><strong>3.1 编写智能合约源码</strong></p> 
  <blockquote> 
   <p>1 &nbsp; &nbsp; &nbsp;contract&nbsp;SampleRecipientSuccess&nbsp;{<br> 2 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;from;<br> 3 &nbsp; &nbsp; &nbsp;uint256&nbsp;public&nbsp;value;<br> 4 &nbsp; &nbsp; &nbsp;address&nbsp;public&nbsp;tokenContract;<br> 5 &nbsp; &nbsp; &nbsp;bytes&nbsp;public&nbsp;extraData;<br> 6 &nbsp; &nbsp; &nbsp;event&nbsp;ReceivedApproval(uint256&nbsp;_value);<br> 7 &nbsp; &nbsp; &nbsp;function&nbsp;receiveApproval(address&nbsp;_from,&nbsp;uint256&nbsp;_value,&nbsp;address&nbsp;_tokenContract,&nbsp;bytes&nbsp;_extraData)&nbsp;{<br> 8 &nbsp; &nbsp; &nbsp;from&nbsp;=&nbsp;_from;<br> 9 &nbsp; &nbsp; &nbsp;value&nbsp;=&nbsp;_value;<br> 10 &nbsp; &nbsp;tokenContract&nbsp;=&nbsp;_tokenContract;<br> 11&nbsp;&nbsp;&nbsp;&nbsp;extraData&nbsp;=&nbsp;_extraData;<br> 12&nbsp;&nbsp;&nbsp;&nbsp;ReceivedApproval(_value);<br> 13 &nbsp; &nbsp;}<br> 14 &nbsp; }</p> 
  </blockquote> 
  <p><strong>3.2 通过HTTP调用智能合约的J2EE组件</strong></p> 
  <blockquote> 
   <p>1 &nbsp; &nbsp; &nbsp; &nbsp;String&nbsp;contractPath="/SampleRecipientSuccess.sol";<br> 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;contractString&nbsp;=&nbsp;FileUtils.readFileToString(new&nbsp;File(contractPath),StandardCharsets.UTF_8);<br> 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HashMap&lt;String,&nbsp;Object&gt;&nbsp;hashMap&nbsp;=&nbsp;new&nbsp;HashMap&lt;String,Object&gt;();<br> 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hashMap.put("soliditySrcCode",&nbsp;contractString);<br> 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;url&nbsp;=&nbsp;"http://192.168.3.43:18080/ContractCompile/compileContractCmd";<br> 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResponseEntity&lt;Map&gt;&nbsp;postForEntity&nbsp;=&nbsp;getRestTemplate().postForEntity(url,&nbsp;hashMap,&nbsp;Map.class);<br> 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&nbsp;body&nbsp;=&nbsp;postForEntity.getBody();<br> 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;returnCode&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;ContractConstant.RETURN_CODE);<br> 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(ContractConstant.SUCCESS_CODE.equals(returnCode))&nbsp;{<br> 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;result&nbsp;=&nbsp;MapUtils.getString(body,&nbsp;"result");<br> 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&lt;String,&nbsp;Object&gt;&nbsp;parseResult&nbsp;=&nbsp;parseResult(result);<br> 12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(AppObjectUtil.toJson(parseResult));<br> 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p> 
  </blockquote> 
  <p><strong>3.3 智能合约编译器组件返回的编译数据</strong></p> 
  <blockquote> 
   <p>1 &nbsp; &nbsp;{<br> 2&nbsp;&nbsp;&nbsp;&nbsp;"abis":&nbsp;[{<br> 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"constant":&nbsp;true,<br> 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"inputs":&nbsp;[],<br> 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"value",<br> 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"outputs":&nbsp;[{<br> 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"",<br> 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"uint256"<br> 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],<br> 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"payable":&nbsp;false,<br> 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"function"<br> 12&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"constant":&nbsp;true,<br> 14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"inputs":&nbsp;[],<br> 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"tokenContract",<br> 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"outputs":&nbsp;[{<br> 17&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"",<br> 18&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"address"<br> 19&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],<br> 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"payable":&nbsp;false,<br> 21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"function"<br> 22&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"constant":&nbsp;true,<br> 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"inputs":&nbsp;[],<br> 25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"extraData",<br> 26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"outputs":&nbsp;[{<br> 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"",<br> 28&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"bytes"<br> 29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],<br> 30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"payable":&nbsp;false,<br> 31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"function"<br> 32&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 33&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"constant":&nbsp;false,<br> 34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"inputs":&nbsp;[{<br> 35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"_from",<br> 36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"address"<br> 37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 38&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"_value",<br> 39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"uint256"<br> 40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 41&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"_tokenContract",<br> 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"address"<br> 43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"_extraData",<br> 45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"bytes"<br> 46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],<br> 47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"receiveApproval",<br> 48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"outputs":&nbsp;[],<br> 49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"payable":&nbsp;false,<br> 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"function"<br> 51&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 52&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"constant":&nbsp;true,<br> 53&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"inputs":&nbsp;[],<br> 54&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"from",<br> 55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"outputs":&nbsp;[{<br> 56&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"",<br> 57&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"address"<br> 58&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],<br> 59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"payable":&nbsp;false,<br> 60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"function"<br> 61&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;{<br> 62&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"anonymous":&nbsp;false,<br> 63&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"inputs":&nbsp;[{<br> 64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"indexed":&nbsp;false,<br> 65&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"_value",<br> 66&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"uint256"<br> 67&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],<br> 68&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name":&nbsp;"ReceivedApproval",<br> 69&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"type":&nbsp;"event"<br> 70&nbsp;&nbsp;&nbsp;&nbsp;}],<br> 71&nbsp;&nbsp;&nbsp;&nbsp;"bin":&nbsp;<br> 72&nbsp;&nbsp;&nbsp;&nbsp;"6060604052341561000c57fe5b5b6103d38061001c6000396000f300606060405263ffffffff60e<br> 73&nbsp;&nbsp;&nbsp;&nbsp;060020a6000350416633fa4f245811461004d57806355a373d61461006f578063609d33341461009<br> 74&nbsp;&nbsp;&nbsp;&nbsp;b5780638f4ffcb11461012b578063d5ce338914610199575bfe5b341561005557fe5b61005d6101c<br> 75&nbsp;&nbsp;&nbsp;&nbsp;5565b60408051918252519081900360200190f35b341561007757fe5b61007f6101cb565b6040805<br> 76&nbsp;&nbsp;&nbsp;&nbsp;1600160a060020a039092168252519081900360200190f35b34156100a357fe5b6100ab6101da565<br> 77&nbsp;&nbsp;&nbsp;&nbsp;b6040805160208082528351818301528351919283929083019185019080838382156100f1575b805<br> 78&nbsp;&nbsp;&nbsp;&nbsp;1825260208311156100f157601f1990920191602091820191016100d1565b5050509050908101906<br> 79&nbsp;&nbsp;&nbsp;&nbsp;01f16801561011d5780820380516001836020036101000a031916815260200191505b50925050506<br> 80&nbsp;&nbsp;&nbsp;&nbsp;0405180910390f35b341561013357fe5b604080516020600460643581810135601f8101849004840<br> 81&nbsp;&nbsp;&nbsp;&nbsp;285018401909552848452610197948235600160a060020a039081169560248035966044359093169<br> 82&nbsp;&nbsp;&nbsp;&nbsp;594608494929391019190819084018382808284375094965061026895505050505050565b005b341<br> 83&nbsp;&nbsp;&nbsp;&nbsp;56101a157fe5b61007f6102f8565b60408051600160a060020a03909216825251908190036020019<br> 84&nbsp;&nbsp;&nbsp;&nbsp;0f35b60015481565b600254600160a060020a031681565b600380546040805160206002600185161<br> 85&nbsp;&nbsp;&nbsp;&nbsp;5610100026000190190941693909304601f810184900484028201840190925281815292918301828<br> 86&nbsp;&nbsp;&nbsp;&nbsp;280156102605780601f1061023557610100808354040283529160200191610260565b82019190600<br> 87&nbsp;&nbsp;&nbsp;&nbsp;0526020600020905b81548152906001019060200180831161024357829003601f168201915b50505<br> 88&nbsp;&nbsp;&nbsp;&nbsp;0505081565b60008054600160a060020a0380871673fffffffffffffffffffffffffffffffffffff<br> 89&nbsp;&nbsp;&nbsp;&nbsp;fff19928316179092556001859055600280549285169290911691909117905580516102bd9060039<br> 90&nbsp;&nbsp;&nbsp;&nbsp;06020840190610307565b506040805184815290517f2db24179b782aab7c5ab64add7f84d4f6c845<br> 91&nbsp;&nbsp;&nbsp;&nbsp;d0779695371f29be1f658d043cd9181900360200190a15b50505050565b600054600160a060020a0<br> 92&nbsp;&nbsp;&nbsp;&nbsp;31681565b828054600181600116156101000203166002900490600052602060002090601f0160209<br> 93&nbsp;&nbsp;&nbsp;&nbsp;00481019282601f1061034857805160ff1916838001178555610375565b828001600101855582156<br> 94&nbsp;&nbsp;&nbsp;&nbsp;10375579182015b8281111561037557825182559160200191906001019061035a565b5b506103829<br> 95&nbsp;&nbsp;&nbsp;&nbsp;29150610386565b5090565b6103a491905b80821115610382576000815560010161038c565b50905<br> 96&nbsp;&nbsp;&nbsp;&nbsp;65b905600a165627a7a723058209522849948e8cc25a7d6717d5c10836c97c36425936be5edf3992<br> 97&nbsp;&nbsp;&nbsp;&nbsp;06b3e5d7fa30029"<br> 98 &nbsp;}</p> 
  </blockquote> 
  <p><strong>总结</strong></p> 
  <p>通过J2EE组件的接口调用，可以为大多数基于java的区块链应用提供了便利，可以利用J2EE成熟稳定的框架无缝集成到项目中，也是为了以后安卓开发和联盟链提供在线编译智能合约功能，如果是私有的局域网络的企业级联盟链，可以发布该智能合约的J2EE组件到该局域网的机器上去，可以实现联盟中的智能合约统一的编译器，便于快速升级编译器。</p> 
  <p>&nbsp;</p> 
  <p><strong>原文链接：</strong><a href="http://wangxiaoming.com/blog/2018/05/26/HPB-46-ETH-Solidity-Install-Compile/" rel="nofollow">http://wangxiaoming.com/blog/2018/05/26/HPB-46-ETH-Solidity-Install-Compile/</a></p> 
  <p>&nbsp;</p> 
  <p><strong>关于我：</strong>蓝莲花（汪晓明），微信/QQ：86606813，公众号：xm123798。HPB芯链（<a href="http://www.hpb.io/" rel="nofollow">http://www.hpb.io</a>)创始人。致力于推动区块链应用落地。<br> &nbsp;</p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qukuai/article/details/81871744,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qukuai/article/details/81871744,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
