<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>blockchain-explorer（pg版） 部署及配置详解 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="blockchain-explorer（pg版） 部署及配置详解" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="前置工具： Git Node.js&nbsp; 8.11.X 高版本暂不支持 PostgreSQL&nbsp; 9.5 以上 此处使用10 本篇部署环境：Ubuntu 准备环境： 安装git sudo apt-get install git 安装node 8.11 因为版本限制，采用源码安装 #路径为 /usr/local cd /usr/local sudo wget https://npm.taobao.org/mirrors/node/latest-v8.x/node-v8.11.1-linux-x64.tar.xz sudo tar xvf node-v8.11.1-linux-x64.tar.xz cd node-v8.11.1-linux-x64/bin ./node -v &nbsp;#此时显示 8.11.1 sudo vim ~/.bashrc #在打开文件的最后一行添加 export PATH=/usr/local/node-v8.11.1-linux-x64/bin:$PATH #打开一个新的终端node -v 验证 安装Postgresql 官网链接 #查看unbuntu版本 cat /etc/issue #参数YOUR_UBUNTU_VERSION_HERE为 xenial(16.04)/bionic(18.04)/trusty(14.04) sudo sh -c &#39;echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ YOUR_UBUNTU_VERSION_HERE-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&#39; #例，版本为16.04 =&gt; deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main sudo apt-get install wget ca-certificates wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - sudo apt-get update sudo apt-get install postgresql-10 psql --version #验证版本 开始部署 下载代码 这里直接取用了master的代码 git clone https://github.com/hyperledger/blockchain-explorer.git 下载fabric工具 这里下载的目前最新的1.2版本，就是fabric configtxgen 之类的工具包，部署fabric时应该已下载。 VERSION=1.2.0 ARCH=$(echo &quot;$(uname -s|tr &#39;[:upper:]&#39; &#39;[:lower:]&#39; | sed &#39;s/mingw64_nt.*/windows/&#39;)-$(uname -m | sed &#39;s/x86_64/amd64/g&#39;)&quot; | awk &#39;{print tolower($0)}&#39;) curl https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/${ARCH}-${VERSION}/hyperledger-fabric-${ARCH}-${VERSION}.tar.gz | tar xz postgresql配置成可访问并开启服务 先启动pg $sudo systemctl enable postgresql $sudo systemctl start postgresql //检查是否启动成功 $sudo systemctl status postgresql ubuntu@ubuntu00:~$ sudo systemctl status postgresql ● postgresql.service - PostgreSQL RDBMS Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled) Active: active (exited) since Fri 2018-08-03 14:12:16 CST; 4h 22min ago Main PID: 10398 (code=exited, status=0/SUCCESS) CGroup: /system.slice/postgresql.service Aug 03 14:12:16 ubuntu00 systemd[1]: Starting PostgreSQL RDBMS... Aug 03 14:12:16 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. Aug 03 14:12:28 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. Aug 03 18:34:24 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. #绿色则启动成功 再进入pg执行代码中的数据库脚本 （老版本） $ cd blockchain-explorer/ # 进入控制台 $ sudo -u postgres psql #变成这样子 ubuntu@ubuntu00:~$ cd blockchain-explorer/ ubuntu@ubuntu00:~/blockchain-explorer$ sudo -u postgres psql psql (10.4 (Ubuntu 10.4-2.pgdg16.04+1)) Type &quot;help&quot; for help. #执行语句，这里是相对路径 postgres=# \i app/persistence/postgreSQL/db/explorerpg.sql #上一句执行完会进入此数据库，再执行 fabricexplorer=# \i app/persistence/postgreSQL/db/updatepg.sql #查看已有数据库 \l #查看已创建表 \d #退出 \q -----------------------------------2018.8.16更新------------------------------------------------- 官方更新了release3.5的代码，更新了创建数据库脚本，新步骤如下，仍可用上一步得方法查看脚本执行结果。 $sudo apt-get install jq $cd blockchain-explorer/app/persistence/postgreSQL/db $./createdb.sh &nbsp; 修改pg访问权限，重启pg //进入配置文件目录 $ cd /etc/postgresql/10/main //修改访问控制文件 $ sudo vi postgresql.conf 把这里原来的注释取消掉 listen_addresses = &#39;localhost&#39; $ sudo vi pg_hba.conf 在此处插入一行或直接在最上面 # TYPE DATABASE USER ADDRESS METHOD host all all 0.0.0.0/0 md5 $ systemctl restart postgresql 修改数据库配置 $cd blockchain-explorer/app/persistence/postgreSQL/db $vi pgconfig.json { &quot;pg&quot;: { &quot;host&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: &quot;5432&quot;, &quot;database&quot;: &quot;fabricexplorer&quot;, &quot;username&quot;: &quot;hppoc&quot;, &quot;passwd&quot;: &quot;password&quot; } } #若在本机，一般无需改动 配置fabric网络 $vi blockchain-explorer/app/platform/fabric/config.json #这里配置了两个order四个peer,可以视情况增删 { &quot;network-config&quot;: { &quot;org1&quot;: { &quot;name&quot;: &quot;org0&quot;, &quot;mspid&quot;: &quot;Org0MSP&quot;, &quot;peer1&quot;: { #注意，若未开启fabric网络未开启TLS，则将grpcs改成grpc,并可省略tls证书配置,下同。 &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:7051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:7053&quot;, &quot;server-hostname&quot;: &quot;peer0.org0.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer0.org0.supplyfinchain.com/tls/ca.crt&quot; }, &quot;peer2&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:8051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:8053&quot;, &quot;server-hostname&quot;: &quot;peer1.org0.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer1.org0.supplyfinchain.com/tls/ca.crt&quot; }, &quot;admin&quot;: { &quot;key&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/keystore&quot;, &quot;cert&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/signcerts&quot; } }, &quot;org2&quot;: { &quot;name&quot;: &quot;org1&quot;, &quot;mspid&quot;: &quot;Org1MSP&quot;, &quot;peer1&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:9051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:9053&quot;, &quot;server-hostname&quot;: &quot;peer0.org1.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer0.org1.supplyfinchain.com/tls/ca.crt&quot; }, &quot;peer2&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:10051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:10053&quot;, &quot;server-hostname&quot;: &quot;peer1.org1.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer1.org1.supplyfinchain.com/tls/ca.crt&quot; }, &quot;admin&quot;: { &quot;key&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/keystore&quot;, &quot;cert&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/signcerts&quot; } } }, &quot;channel&quot;: &quot;channel01&quot;, #需要监听的channel名称 &quot;orderers&quot;:[ { &quot;mspid&quot;: &quot;OrdererMSP&quot;, &quot;server-hostname&quot;:&quot;orderer0.supplyfinchain.com&quot;, &quot;requests&quot;:&quot;grpcs://xxx.xxx.xx.xxx:7050&quot;, &quot;tls_cacerts&quot;:&quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer0.supplyfinchain.com/tls/ca.crt&quot; }, { &quot;mspid&quot;: &quot;OrdererMSP&quot;, &quot;server-hostname&quot;:&quot;orderer1.supplyfinchain.com&quot;, &quot;requests&quot;:&quot;grpcs://xxx.xxx.xx.xxx:7050&quot;, &quot;tls_cacerts&quot;:&quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer1.supplyfinchain.com/tls/ca.crt&quot; } ], &quot;keyValueStore&quot;: &quot;/tmp/fabric-client-kvs&quot;, &quot;configtxgenToolPath&quot;: &quot;/home/ubuntu/bin&quot;, #之前安装的fabric工具路径 &quot;SYNC_START_DATE_FORMAT&quot;:&quot;YYYY/MM/DD&quot;, &quot;syncStartDate&quot;:&quot;2018/01/01&quot;, &quot;eventWaitTime&quot;: &quot;30000&quot;, &quot;license&quot;: &quot;Apache-2.0&quot;, &quot;version&quot;: &quot;1.1&quot; } 启动 $sudo apt-get install make $sudo apt-get install g++ #可能有遗漏，就是安装一些C语言编译相关的插件，install时根据错误提示安装即可 $cd blockchain-explorer $npm install $cd blockchain-explorer/app/test $npm install $npm run test $cd client/ $npm install $npm test -- -u --coverage #这一步可能非常慢，试了几次有的机器几分钟，有时一个小时 $npm run build #表示返回 $cd blockchain-explorer #端口配置在blockchain-explorer/appconfig.json文件，默认8080 $./start.sh #看日志是否报错,有时候启动失败的话需要一定的时候才会打印错误日志 $cat logs/console/console-xxxxxxx.log $./stop.sh -----------------------------------2018.8.9更新------------------------------------------------- 若部署的是fabric1.2，目前不能用master版本代码，可切换release3.5版本，而且仍有BUG，对最新的fabric并不能完全兼容。 &nbsp; &nbsp; 阅读更多" />
<meta property="og:description" content="前置工具： Git Node.js&nbsp; 8.11.X 高版本暂不支持 PostgreSQL&nbsp; 9.5 以上 此处使用10 本篇部署环境：Ubuntu 准备环境： 安装git sudo apt-get install git 安装node 8.11 因为版本限制，采用源码安装 #路径为 /usr/local cd /usr/local sudo wget https://npm.taobao.org/mirrors/node/latest-v8.x/node-v8.11.1-linux-x64.tar.xz sudo tar xvf node-v8.11.1-linux-x64.tar.xz cd node-v8.11.1-linux-x64/bin ./node -v &nbsp;#此时显示 8.11.1 sudo vim ~/.bashrc #在打开文件的最后一行添加 export PATH=/usr/local/node-v8.11.1-linux-x64/bin:$PATH #打开一个新的终端node -v 验证 安装Postgresql 官网链接 #查看unbuntu版本 cat /etc/issue #参数YOUR_UBUNTU_VERSION_HERE为 xenial(16.04)/bionic(18.04)/trusty(14.04) sudo sh -c &#39;echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ YOUR_UBUNTU_VERSION_HERE-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&#39; #例，版本为16.04 =&gt; deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main sudo apt-get install wget ca-certificates wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - sudo apt-get update sudo apt-get install postgresql-10 psql --version #验证版本 开始部署 下载代码 这里直接取用了master的代码 git clone https://github.com/hyperledger/blockchain-explorer.git 下载fabric工具 这里下载的目前最新的1.2版本，就是fabric configtxgen 之类的工具包，部署fabric时应该已下载。 VERSION=1.2.0 ARCH=$(echo &quot;$(uname -s|tr &#39;[:upper:]&#39; &#39;[:lower:]&#39; | sed &#39;s/mingw64_nt.*/windows/&#39;)-$(uname -m | sed &#39;s/x86_64/amd64/g&#39;)&quot; | awk &#39;{print tolower($0)}&#39;) curl https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/${ARCH}-${VERSION}/hyperledger-fabric-${ARCH}-${VERSION}.tar.gz | tar xz postgresql配置成可访问并开启服务 先启动pg $sudo systemctl enable postgresql $sudo systemctl start postgresql //检查是否启动成功 $sudo systemctl status postgresql ubuntu@ubuntu00:~$ sudo systemctl status postgresql ● postgresql.service - PostgreSQL RDBMS Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled) Active: active (exited) since Fri 2018-08-03 14:12:16 CST; 4h 22min ago Main PID: 10398 (code=exited, status=0/SUCCESS) CGroup: /system.slice/postgresql.service Aug 03 14:12:16 ubuntu00 systemd[1]: Starting PostgreSQL RDBMS... Aug 03 14:12:16 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. Aug 03 14:12:28 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. Aug 03 18:34:24 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. #绿色则启动成功 再进入pg执行代码中的数据库脚本 （老版本） $ cd blockchain-explorer/ # 进入控制台 $ sudo -u postgres psql #变成这样子 ubuntu@ubuntu00:~$ cd blockchain-explorer/ ubuntu@ubuntu00:~/blockchain-explorer$ sudo -u postgres psql psql (10.4 (Ubuntu 10.4-2.pgdg16.04+1)) Type &quot;help&quot; for help. #执行语句，这里是相对路径 postgres=# \i app/persistence/postgreSQL/db/explorerpg.sql #上一句执行完会进入此数据库，再执行 fabricexplorer=# \i app/persistence/postgreSQL/db/updatepg.sql #查看已有数据库 \l #查看已创建表 \d #退出 \q -----------------------------------2018.8.16更新------------------------------------------------- 官方更新了release3.5的代码，更新了创建数据库脚本，新步骤如下，仍可用上一步得方法查看脚本执行结果。 $sudo apt-get install jq $cd blockchain-explorer/app/persistence/postgreSQL/db $./createdb.sh &nbsp; 修改pg访问权限，重启pg //进入配置文件目录 $ cd /etc/postgresql/10/main //修改访问控制文件 $ sudo vi postgresql.conf 把这里原来的注释取消掉 listen_addresses = &#39;localhost&#39; $ sudo vi pg_hba.conf 在此处插入一行或直接在最上面 # TYPE DATABASE USER ADDRESS METHOD host all all 0.0.0.0/0 md5 $ systemctl restart postgresql 修改数据库配置 $cd blockchain-explorer/app/persistence/postgreSQL/db $vi pgconfig.json { &quot;pg&quot;: { &quot;host&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: &quot;5432&quot;, &quot;database&quot;: &quot;fabricexplorer&quot;, &quot;username&quot;: &quot;hppoc&quot;, &quot;passwd&quot;: &quot;password&quot; } } #若在本机，一般无需改动 配置fabric网络 $vi blockchain-explorer/app/platform/fabric/config.json #这里配置了两个order四个peer,可以视情况增删 { &quot;network-config&quot;: { &quot;org1&quot;: { &quot;name&quot;: &quot;org0&quot;, &quot;mspid&quot;: &quot;Org0MSP&quot;, &quot;peer1&quot;: { #注意，若未开启fabric网络未开启TLS，则将grpcs改成grpc,并可省略tls证书配置,下同。 &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:7051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:7053&quot;, &quot;server-hostname&quot;: &quot;peer0.org0.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer0.org0.supplyfinchain.com/tls/ca.crt&quot; }, &quot;peer2&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:8051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:8053&quot;, &quot;server-hostname&quot;: &quot;peer1.org0.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer1.org0.supplyfinchain.com/tls/ca.crt&quot; }, &quot;admin&quot;: { &quot;key&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/keystore&quot;, &quot;cert&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/signcerts&quot; } }, &quot;org2&quot;: { &quot;name&quot;: &quot;org1&quot;, &quot;mspid&quot;: &quot;Org1MSP&quot;, &quot;peer1&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:9051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:9053&quot;, &quot;server-hostname&quot;: &quot;peer0.org1.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer0.org1.supplyfinchain.com/tls/ca.crt&quot; }, &quot;peer2&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:10051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:10053&quot;, &quot;server-hostname&quot;: &quot;peer1.org1.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer1.org1.supplyfinchain.com/tls/ca.crt&quot; }, &quot;admin&quot;: { &quot;key&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/keystore&quot;, &quot;cert&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/signcerts&quot; } } }, &quot;channel&quot;: &quot;channel01&quot;, #需要监听的channel名称 &quot;orderers&quot;:[ { &quot;mspid&quot;: &quot;OrdererMSP&quot;, &quot;server-hostname&quot;:&quot;orderer0.supplyfinchain.com&quot;, &quot;requests&quot;:&quot;grpcs://xxx.xxx.xx.xxx:7050&quot;, &quot;tls_cacerts&quot;:&quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer0.supplyfinchain.com/tls/ca.crt&quot; }, { &quot;mspid&quot;: &quot;OrdererMSP&quot;, &quot;server-hostname&quot;:&quot;orderer1.supplyfinchain.com&quot;, &quot;requests&quot;:&quot;grpcs://xxx.xxx.xx.xxx:7050&quot;, &quot;tls_cacerts&quot;:&quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer1.supplyfinchain.com/tls/ca.crt&quot; } ], &quot;keyValueStore&quot;: &quot;/tmp/fabric-client-kvs&quot;, &quot;configtxgenToolPath&quot;: &quot;/home/ubuntu/bin&quot;, #之前安装的fabric工具路径 &quot;SYNC_START_DATE_FORMAT&quot;:&quot;YYYY/MM/DD&quot;, &quot;syncStartDate&quot;:&quot;2018/01/01&quot;, &quot;eventWaitTime&quot;: &quot;30000&quot;, &quot;license&quot;: &quot;Apache-2.0&quot;, &quot;version&quot;: &quot;1.1&quot; } 启动 $sudo apt-get install make $sudo apt-get install g++ #可能有遗漏，就是安装一些C语言编译相关的插件，install时根据错误提示安装即可 $cd blockchain-explorer $npm install $cd blockchain-explorer/app/test $npm install $npm run test $cd client/ $npm install $npm test -- -u --coverage #这一步可能非常慢，试了几次有的机器几分钟，有时一个小时 $npm run build #表示返回 $cd blockchain-explorer #端口配置在blockchain-explorer/appconfig.json文件，默认8080 $./start.sh #看日志是否报错,有时候启动失败的话需要一定的时候才会打印错误日志 $cat logs/console/console-xxxxxxx.log $./stop.sh -----------------------------------2018.8.9更新------------------------------------------------- 若部署的是fabric1.2，目前不能用master版本代码，可切换release3.5版本，而且仍有BUG，对最新的fabric并不能完全兼容。 &nbsp; &nbsp; 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/08/06/1f188061eeaef7593060ff08ef18fe18.html" />
<meta property="og:url" content="https://mlh.app/2018/08/06/1f188061eeaef7593060ff08ef18fe18.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-06T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"前置工具： Git Node.js&nbsp; 8.11.X 高版本暂不支持 PostgreSQL&nbsp; 9.5 以上 此处使用10 本篇部署环境：Ubuntu 准备环境： 安装git sudo apt-get install git 安装node 8.11 因为版本限制，采用源码安装 #路径为 /usr/local cd /usr/local sudo wget https://npm.taobao.org/mirrors/node/latest-v8.x/node-v8.11.1-linux-x64.tar.xz sudo tar xvf node-v8.11.1-linux-x64.tar.xz cd node-v8.11.1-linux-x64/bin ./node -v &nbsp;#此时显示 8.11.1 sudo vim ~/.bashrc #在打开文件的最后一行添加 export PATH=/usr/local/node-v8.11.1-linux-x64/bin:$PATH #打开一个新的终端node -v 验证 安装Postgresql 官网链接 #查看unbuntu版本 cat /etc/issue #参数YOUR_UBUNTU_VERSION_HERE为 xenial(16.04)/bionic(18.04)/trusty(14.04) sudo sh -c &#39;echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ YOUR_UBUNTU_VERSION_HERE-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&#39; #例，版本为16.04 =&gt; deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main sudo apt-get install wget ca-certificates wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - sudo apt-get update sudo apt-get install postgresql-10 psql --version #验证版本 开始部署 下载代码 这里直接取用了master的代码 git clone https://github.com/hyperledger/blockchain-explorer.git 下载fabric工具 这里下载的目前最新的1.2版本，就是fabric configtxgen 之类的工具包，部署fabric时应该已下载。 VERSION=1.2.0 ARCH=$(echo &quot;$(uname -s|tr &#39;[:upper:]&#39; &#39;[:lower:]&#39; | sed &#39;s/mingw64_nt.*/windows/&#39;)-$(uname -m | sed &#39;s/x86_64/amd64/g&#39;)&quot; | awk &#39;{print tolower($0)}&#39;) curl https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/${ARCH}-${VERSION}/hyperledger-fabric-${ARCH}-${VERSION}.tar.gz | tar xz postgresql配置成可访问并开启服务 先启动pg $sudo systemctl enable postgresql $sudo systemctl start postgresql //检查是否启动成功 $sudo systemctl status postgresql ubuntu@ubuntu00:~$ sudo systemctl status postgresql ● postgresql.service - PostgreSQL RDBMS Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled) Active: active (exited) since Fri 2018-08-03 14:12:16 CST; 4h 22min ago Main PID: 10398 (code=exited, status=0/SUCCESS) CGroup: /system.slice/postgresql.service Aug 03 14:12:16 ubuntu00 systemd[1]: Starting PostgreSQL RDBMS... Aug 03 14:12:16 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. Aug 03 14:12:28 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. Aug 03 18:34:24 ubuntu00 systemd[1]: Started PostgreSQL RDBMS. #绿色则启动成功 再进入pg执行代码中的数据库脚本 （老版本） $ cd blockchain-explorer/ # 进入控制台 $ sudo -u postgres psql #变成这样子 ubuntu@ubuntu00:~$ cd blockchain-explorer/ ubuntu@ubuntu00:~/blockchain-explorer$ sudo -u postgres psql psql (10.4 (Ubuntu 10.4-2.pgdg16.04+1)) Type &quot;help&quot; for help. #执行语句，这里是相对路径 postgres=# \\i app/persistence/postgreSQL/db/explorerpg.sql #上一句执行完会进入此数据库，再执行 fabricexplorer=# \\i app/persistence/postgreSQL/db/updatepg.sql #查看已有数据库 \\l #查看已创建表 \\d #退出 \\q -----------------------------------2018.8.16更新------------------------------------------------- 官方更新了release3.5的代码，更新了创建数据库脚本，新步骤如下，仍可用上一步得方法查看脚本执行结果。 $sudo apt-get install jq $cd blockchain-explorer/app/persistence/postgreSQL/db $./createdb.sh &nbsp; 修改pg访问权限，重启pg //进入配置文件目录 $ cd /etc/postgresql/10/main //修改访问控制文件 $ sudo vi postgresql.conf 把这里原来的注释取消掉 listen_addresses = &#39;localhost&#39; $ sudo vi pg_hba.conf 在此处插入一行或直接在最上面 # TYPE DATABASE USER ADDRESS METHOD host all all 0.0.0.0/0 md5 $ systemctl restart postgresql 修改数据库配置 $cd blockchain-explorer/app/persistence/postgreSQL/db $vi pgconfig.json { &quot;pg&quot;: { &quot;host&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: &quot;5432&quot;, &quot;database&quot;: &quot;fabricexplorer&quot;, &quot;username&quot;: &quot;hppoc&quot;, &quot;passwd&quot;: &quot;password&quot; } } #若在本机，一般无需改动 配置fabric网络 $vi blockchain-explorer/app/platform/fabric/config.json #这里配置了两个order四个peer,可以视情况增删 { &quot;network-config&quot;: { &quot;org1&quot;: { &quot;name&quot;: &quot;org0&quot;, &quot;mspid&quot;: &quot;Org0MSP&quot;, &quot;peer1&quot;: { #注意，若未开启fabric网络未开启TLS，则将grpcs改成grpc,并可省略tls证书配置,下同。 &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:7051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:7053&quot;, &quot;server-hostname&quot;: &quot;peer0.org0.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer0.org0.supplyfinchain.com/tls/ca.crt&quot; }, &quot;peer2&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:8051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:8053&quot;, &quot;server-hostname&quot;: &quot;peer1.org0.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer1.org0.supplyfinchain.com/tls/ca.crt&quot; }, &quot;admin&quot;: { &quot;key&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/keystore&quot;, &quot;cert&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/signcerts&quot; } }, &quot;org2&quot;: { &quot;name&quot;: &quot;org1&quot;, &quot;mspid&quot;: &quot;Org1MSP&quot;, &quot;peer1&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:9051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:9053&quot;, &quot;server-hostname&quot;: &quot;peer0.org1.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer0.org1.supplyfinchain.com/tls/ca.crt&quot; }, &quot;peer2&quot;: { &quot;requests&quot;: &quot;grpcs://xxx.xxx.xx.xxx:10051&quot;, &quot;events&quot;: &quot;grpcs://xxx.xxx.xx.xxx:10053&quot;, &quot;server-hostname&quot;: &quot;peer1.org1.supplyfinchain.com&quot;, &quot;tls_cacerts&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer1.org1.supplyfinchain.com/tls/ca.crt&quot; }, &quot;admin&quot;: { &quot;key&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/keystore&quot;, &quot;cert&quot;: &quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/signcerts&quot; } } }, &quot;channel&quot;: &quot;channel01&quot;, #需要监听的channel名称 &quot;orderers&quot;:[ { &quot;mspid&quot;: &quot;OrdererMSP&quot;, &quot;server-hostname&quot;:&quot;orderer0.supplyfinchain.com&quot;, &quot;requests&quot;:&quot;grpcs://xxx.xxx.xx.xxx:7050&quot;, &quot;tls_cacerts&quot;:&quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer0.supplyfinchain.com/tls/ca.crt&quot; }, { &quot;mspid&quot;: &quot;OrdererMSP&quot;, &quot;server-hostname&quot;:&quot;orderer1.supplyfinchain.com&quot;, &quot;requests&quot;:&quot;grpcs://xxx.xxx.xx.xxx:7050&quot;, &quot;tls_cacerts&quot;:&quot;/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer1.supplyfinchain.com/tls/ca.crt&quot; } ], &quot;keyValueStore&quot;: &quot;/tmp/fabric-client-kvs&quot;, &quot;configtxgenToolPath&quot;: &quot;/home/ubuntu/bin&quot;, #之前安装的fabric工具路径 &quot;SYNC_START_DATE_FORMAT&quot;:&quot;YYYY/MM/DD&quot;, &quot;syncStartDate&quot;:&quot;2018/01/01&quot;, &quot;eventWaitTime&quot;: &quot;30000&quot;, &quot;license&quot;: &quot;Apache-2.0&quot;, &quot;version&quot;: &quot;1.1&quot; } 启动 $sudo apt-get install make $sudo apt-get install g++ #可能有遗漏，就是安装一些C语言编译相关的插件，install时根据错误提示安装即可 $cd blockchain-explorer $npm install $cd blockchain-explorer/app/test $npm install $npm run test $cd client/ $npm install $npm test -- -u --coverage #这一步可能非常慢，试了几次有的机器几分钟，有时一个小时 $npm run build #表示返回 $cd blockchain-explorer #端口配置在blockchain-explorer/appconfig.json文件，默认8080 $./start.sh #看日志是否报错,有时候启动失败的话需要一定的时候才会打印错误日志 $cat logs/console/console-xxxxxxx.log $./stop.sh -----------------------------------2018.8.9更新------------------------------------------------- 若部署的是fabric1.2，目前不能用master版本代码，可切换release3.5版本，而且仍有BUG，对最新的fabric并不能完全兼容。 &nbsp; &nbsp; 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/08/06/1f188061eeaef7593060ff08ef18fe18.html","headline":"blockchain-explorer（pg版） 部署及配置详解","dateModified":"2018-08-06T00:00:00+08:00","datePublished":"2018-08-06T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/06/1f188061eeaef7593060ff08ef18fe18.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>blockchain-explorer（pg版） 部署及配置详解</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h1 style="margin-left:0cm;">前置工具：</h1> 
  <p style="margin-left:0cm;">Git</p> 
  <p style="margin-left:0cm;">Node.js&nbsp; 8.11.X 高版本暂不支持</p> 
  <p style="margin-left:0cm;">PostgreSQL&nbsp; 9.5 以上 此处使用10</p> 
  <p style="margin-left:0cm;">本篇部署环境：Ubuntu</p> 
  <h1 style="margin-left:0cm;">准备环境：</h1> 
  <h2>安装git</h2> 
  <p style="margin-left:0cm;">sudo apt-get install git</p> 
  <h2>安装node 8.11</h2> 
  <p style="margin-left:0cm;">因为版本限制，采用源码安装</p> 
  <pre class="has">
<code class="language-bash">#路径为 /usr/local

cd /usr/local

sudo wget https://npm.taobao.org/mirrors/node/latest-v8.x/node-v8.11.1-linux-x64.tar.xz

sudo tar xvf node-v8.11.1-linux-x64.tar.xz

cd node-v8.11.1-linux-x64/bin

./node -v &nbsp;#此时显示 8.11.1

sudo vim ~/.bashrc

#在打开文件的最后一行添加

export PATH=/usr/local/node-v8.11.1-linux-x64/bin:$PATH

#打开一个新的终端node -v 验证</code></pre> 
  <h2>安装Postgresql</h2> 
  <p><a href="https://www.postgresql.org/download/linux/ubuntu/" rel="nofollow">官网链接</a></p> 
  <pre class="has">
<code class="language-bash">#查看unbuntu版本 
cat /etc/issue

#参数YOUR_UBUNTU_VERSION_HERE为 xenial(16.04)/bionic(18.04)/trusty(14.04)
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ YOUR_UBUNTU_VERSION_HERE-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'

#例，版本为16.04 =&gt; deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main

sudo apt-get install wget ca-certificates

wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -

sudo apt-get update

sudo apt-get install postgresql-10

psql --version    #验证版本

</code></pre> 
  <h1>开始部署</h1> 
  <h2>下载代码</h2> 
  <p>这里直接取用了master的代码</p> 
  <pre class="has">
<code class="language-bash">git clone https://github.com/hyperledger/blockchain-explorer.git</code></pre> 
  <h2>下载fabric工具</h2> 
  <p>这里下载的目前最新的1.2版本，就是fabric configtxgen 之类的工具包，部署fabric时应该已下载。</p> 
  <pre class="has">
<code class="language-bash">VERSION=1.2.0

ARCH=$(echo "$(uname -s|tr '[:upper:]' '[:lower:]' | sed 's/mingw64_nt.*/windows/')-$(uname -m | sed 's/x86_64/amd64/g')" | awk '{print tolower($0)}')

curl https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/${ARCH}-${VERSION}/hyperledger-fabric-${ARCH}-${VERSION}.tar.gz | tar xz
</code></pre> 
  <h2>postgresql配置成可访问并开启服务</h2> 
  <p>先启动pg</p> 
  <pre class="has">
<code class="language-bash">
$sudo systemctl enable postgresql

$sudo systemctl start postgresql
//检查是否启动成功
$sudo systemctl status postgresql

ubuntu@ubuntu00:~$ sudo systemctl status postgresql
● postgresql.service - PostgreSQL RDBMS
   Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)
   Active: active (exited) since Fri 2018-08-03 14:12:16 CST; 4h 22min ago
 Main PID: 10398 (code=exited, status=0/SUCCESS)
   CGroup: /system.slice/postgresql.service

Aug 03 14:12:16 ubuntu00 systemd[1]: Starting PostgreSQL RDBMS...
Aug 03 14:12:16 ubuntu00 systemd[1]: Started PostgreSQL RDBMS.
Aug 03 14:12:28 ubuntu00 systemd[1]: Started PostgreSQL RDBMS.
Aug 03 18:34:24 ubuntu00 systemd[1]: Started PostgreSQL RDBMS.
#绿色则启动成功</code></pre> 
  <p><s>再进入pg执行代码中的数据库脚本 （老版本）</s></p> 
  <pre class="has">
<code class="language-bash">$ cd blockchain-explorer/
# 进入控制台
$ sudo -u postgres psql
#变成这样子

ubuntu@ubuntu00:~$ cd blockchain-explorer/
ubuntu@ubuntu00:~/blockchain-explorer$ sudo -u postgres psql
psql (10.4 (Ubuntu 10.4-2.pgdg16.04+1))
Type "help" for help.
#执行语句，这里是相对路径
postgres=# \i app/persistence/postgreSQL/db/explorerpg.sql
#上一句执行完会进入此数据库，再执行
fabricexplorer=# \i app/persistence/postgreSQL/db/updatepg.sql
#查看已有数据库
\l
#查看已创建表
\d
#退出
\q</code></pre> 
  <p>-----------------------------------2018.8.16更新-------------------------------------------------</p> 
  <p>官方更新了release3.5的代码，更新了创建数据库脚本，新步骤如下，仍可用上一步得方法查看脚本执行结果。</p> 
  <pre class="has">
<code class="language-bash">$sudo apt-get install jq 

$cd blockchain-explorer/app/persistence/postgreSQL/db

$./createdb.sh </code></pre> 
  <p>&nbsp;</p> 
  <p>修改pg访问权限，重启pg</p> 
  <pre class="has">
<code class="language-bash">//进入配置文件目录
$ cd /etc/postgresql/10/main
//修改访问控制文件
$ sudo vi postgresql.conf
把这里原来的注释取消掉
listen_addresses = 'localhost' 

$ sudo vi pg_hba.conf
在此处插入一行或直接在最上面
# TYPE  DATABASE        USER            ADDRESS                 METHOD

host    all             all             0.0.0.0/0               md5

$ systemctl restart postgresql
</code></pre> 
  <h2>修改数据库配置</h2> 
  <pre class="has">
<code class="language-bash">$cd blockchain-explorer/app/persistence/postgreSQL/db
$vi pgconfig.json
{
        "pg": {
                "host": "127.0.0.1",
                "port": "5432",
                "database": "fabricexplorer",
                "username": "hppoc",
                "passwd": "password"
        }
}
#若在本机，一般无需改动</code></pre> 
  <h2>配置fabric网络</h2> 
  <pre class="has">
<code class="language-bash">$vi blockchain-explorer/app/platform/fabric/config.json
#这里配置了两个order四个peer,可以视情况增删

 {
        "network-config": {
                "org1": {
                        "name": "org0",
                        "mspid": "Org0MSP",
                        "peer1": {
                                #注意，若未开启fabric网络未开启TLS，则将grpcs改成grpc,并可省略tls证书配置,下同。
                                "requests": "grpcs://xxx.xxx.xx.xxx:7051",
                                "events": "grpcs://xxx.xxx.xx.xxx:7053",
                                "server-hostname": "peer0.org0.supplyfinchain.com",
                                "tls_cacerts": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer0.org0.supplyfinchain.com/tls/ca.crt"
                        },
                        "peer2": {
                                "requests": "grpcs://xxx.xxx.xx.xxx:8051",
                                "events": "grpcs://xxx.xxx.xx.xxx:8053",
                                "server-hostname": "peer1.org0.supplyfinchain.com",
                                "tls_cacerts": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/peers/peer1.org0.supplyfinchain.com/tls/ca.crt"
                        },
                        "admin": {
                                "key": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/keystore",
                                "cert": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org0.supplyfinchain.com/users/Admin@org0.supplyfinchain.com/msp/signcerts"
                        }
                },
               "org2": {
                        "name": "org1",
                        "mspid": "Org1MSP",
                        "peer1": {
                                "requests": "grpcs://xxx.xxx.xx.xxx:9051",
                                "events": "grpcs://xxx.xxx.xx.xxx:9053",
                                "server-hostname": "peer0.org1.supplyfinchain.com",
                                "tls_cacerts": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer0.org1.supplyfinchain.com/tls/ca.crt"
                        },
                        "peer2": {
                                "requests": "grpcs://xxx.xxx.xx.xxx:10051",
                                "events": "grpcs://xxx.xxx.xx.xxx:10053",
                                "server-hostname": "peer1.org1.supplyfinchain.com",
                                "tls_cacerts": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/peers/peer1.org1.supplyfinchain.com/tls/ca.crt"
                        },
                        "admin": {
                                "key": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/keystore",
                                "cert": "/home/ubuntu/supplychain-faas/fabric-network/crypto-config/peerOrganizations/org1.supplyfinchain.com/users/Admin@org1.supplyfinchain.com/msp/signcerts"
                        }
                }

        },
        "channel": "channel01", #需要监听的channel名称
        "orderers":[
                                {
                                "mspid": "OrdererMSP",
                                "server-hostname":"orderer0.supplyfinchain.com",
                                "requests":"grpcs://xxx.xxx.xx.xxx:7050",
                                "tls_cacerts":"/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer0.supplyfinchain.com/tls/ca.crt"
                                },
                                {
                                "mspid": "OrdererMSP",
                                "server-hostname":"orderer1.supplyfinchain.com",
                                "requests":"grpcs://xxx.xxx.xx.xxx:7050",
                                "tls_cacerts":"/home/ubuntu/supplychain-faas/fabric-network/crypto-config/ordererOrganizations/supplyfinchain.com/orderers/orderer1.supplyfinchain.com/tls/ca.crt"
                                }
                                ],
        "keyValueStore": "/tmp/fabric-client-kvs",
        "configtxgenToolPath": "/home/ubuntu/bin", #之前安装的fabric工具路径
        "SYNC_START_DATE_FORMAT":"YYYY/MM/DD",
        "syncStartDate":"2018/01/01",
        "eventWaitTime": "30000",
        "license": "Apache-2.0",
        "version": "1.1"
        }

</code></pre> 
  <h2>启动</h2> 
  <pre class="has">
<code class="language-bash">$sudo apt-get install make 
$sudo apt-get install g++ #可能有遗漏，就是安装一些C语言编译相关的插件，install时根据错误提示安装即可
$cd blockchain-explorer
$npm install
$cd blockchain-explorer/app/test
$npm install
$npm run test
$cd client/
$npm install
$npm test -- -u --coverage
#这一步可能非常慢，试了几次有的机器几分钟，有时一个小时
$npm run build


#表示返回
$cd blockchain-explorer
#端口配置在blockchain-explorer/appconfig.json文件，默认8080
$./start.sh
#看日志是否报错,有时候启动失败的话需要一定的时候才会打印错误日志
$cat logs/console/console-xxxxxxx.log
$./stop.sh</code></pre> 
  <p>-----------------------------------2018.8.9更新-------------------------------------------------</p> 
  <p>若部署的是fabric1.2，目前不能用master版本代码，可切换release3.5版本，而且仍有BUG，对最新的fabric并不能完全兼容。</p> 
  <p>&nbsp;</p> 
  <p>&nbsp;</p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/baidu_37379451/article/details/81385068,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/baidu_37379451/article/details/81385068,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
