<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>动态获取以太坊，以太经典实时价格接口，以及转换汇率（区块链） | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="动态获取以太坊，以太经典实时价格接口，以及转换汇率（区块链）" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebRequest myWebRequest = WebRequest.Create(&quot;http://api.coindog.com/api/v1/currency/ranks&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebResponse myWebResponse = myWebRequest.GetResponse(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Stream ReceiveStream = myWebResponse.GetResponseStream(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string responseStr = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (ReceiveStream != null) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StreamReader reader = new StreamReader(ReceiveStream, Encoding.UTF8); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = reader.ReadToEnd(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = responseStr.Replace(&quot;[&quot;, &quot;&quot;).Replace(&quot;]&quot;, &quot;&quot;).Replace(&quot; &quot;, &quot;&quot;). &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Replace(&quot;\n&quot;, &quot;&quot;).Replace(&quot;\r&quot;, &quot;&quot;).Replace(&quot;{&quot;, &quot;&quot;).Replace(&quot;},&quot;, &quot;|&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //JArray jsonArray = JArray.Parse(responseStr.Trim()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //dynamic data = JObject.Parse(jsonArray[0].ToString()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] arr = responseStr.Split(&#39;|&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (var v in arr) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] ar = v.Split(&#39;,&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] n = ar[0].Split(&#39;:&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string currye = n[1].Replace(&quot;\&quot;&quot;, &quot;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currye == &quot;ETC&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p1 = Convert.ToDecimal(ar[4].Split(&#39;:&#39;)[1]); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (currye == &quot;ET````&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p2 = Convert.ToDecimal(ar[4].Split(&#39;:&#39;)[1]); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp1 = Convert.ToDouble(p1) / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp2 = Convert.ToDouble(p2) / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp3 = p3 / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &lt;script type=&quot;text/javascript&quot;&gt; &nbsp; &nbsp; $(document).ready(function () { &nbsp; &nbsp; &nbsp; &nbsp; zcount = function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var seldz = $(&#39;#dzs&#39;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var selyz = $(&#39;#yzs&#39;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var num = $(&quot;#dz&quot;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var reg = /^\d+$/; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num.length &lt;= 0) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!reg.test(num)) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num &lt; 0) num = 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var js = seldz / selyz; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#yz&quot;).val(js * num); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; $(&#39;#dz&#39;).bind(&#39;input propertychange&#39;, function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#dzs&quot;).change(function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&#39;#yz&#39;).bind(&#39;input propertychange&#39;, function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#yzs&quot;).change(function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp;if (!base.IsPostBack) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string val1 = Request[&quot;type&quot;]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (val1 == &quot;1&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NewMethod(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; &nbsp; private void NewMethod() &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; int id = Convert.ToInt32(Session[&quot;User_ID&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; //获取三种币的余额 &nbsp; &nbsp; &nbsp; &nbsp; DataTable currencyTable = crud.QueryTable(&quot; &nbsp;select top 1 U_Account_ETH,U_Account_ETC,U_Account_ETES from DS_User where ID=&quot;+id+&quot;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; double ETHcurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETH&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double ETCcurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETC&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double ETEScurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETES&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double val2 = Convert.ToDouble(Request[&quot;value1&quot;]);//输入要准备兑换的币 &nbsp; &nbsp; &nbsp; &nbsp; string dzs = Request[&quot;dzs&quot;];//选择准备兑换的币 &nbsp; &nbsp; &nbsp; &nbsp; double val4 = Convert.ToDouble(Request[&quot;value3&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; string yzs = Request[&quot;yzs&quot;]; &nbsp; &nbsp; &nbsp; &nbsp; string sqlName1 = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; string sqlName2 = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (dzs == &quot;ETES&quot; &amp;&amp; val2 &lt; ETEScurrency) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETES&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else if (dzs == &quot;ETH&quot; &amp;&amp; val2 &lt; ETHcurrency) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETH&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;else if (dzs == &quot;ETC&quot; &amp;&amp; val2 &lt; ETCcurrency) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETC&quot;; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp; &nbsp; &nbsp; &nbsp;{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write( &quot;0&quot; ); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (yzs == &quot;ETC&quot;&amp;&amp;dzs!=&quot;ETC&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETC&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp;if (yzs == &quot;ETH&quot;&amp;&amp;dzs!=&quot;ETH&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETH&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;else if (yzs == &quot;ETES&quot; &amp;&amp; dzs != &quot;ETES&quot;) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETES&quot;; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write(&quot;2&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; crud.ExecuteSQL(&quot; update DS_User set &quot; + sqlName1 + &quot;=&quot; + sqlName1 + &quot;- &quot; + val2 + &quot;, &quot; + sqlName2 + &quot;=&quot; + sqlName2 + &quot;+ &quot; + val4 + &quot; where ID=&#39;&quot; + id + &quot;&#39;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; Response.Write(&quot;1&quot;); &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; } 以下为转换JS &nbsp; function sDD() { &nbsp; &nbsp; &nbsp; &nbsp; var options=$(&quot;#dzs option:selected&quot;); &nbsp; &nbsp; &nbsp; &nbsp; var options1 = $(&quot;#yzs option:selected&quot;); &nbsp; &nbsp; &nbsp; &nbsp; $.ajax({ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; url: &quot;Lock_prize.aspx&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;post&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value1&quot;: $(&quot;#dz&quot;).val(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;dzs&quot;: options.text(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value3&quot;: $(&quot;#yz&quot;).val(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;yzs&quot;: options1.text(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;type&quot;: 1, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success: function (data) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (data == &quot;1&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;兑换成功&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (data == &quot;0&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;余额不足，请充值&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(data==&quot;2&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;请选择要兑换的币&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; 阅读更多" />
<meta property="og:description" content="&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebRequest myWebRequest = WebRequest.Create(&quot;http://api.coindog.com/api/v1/currency/ranks&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebResponse myWebResponse = myWebRequest.GetResponse(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Stream ReceiveStream = myWebResponse.GetResponseStream(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string responseStr = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (ReceiveStream != null) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StreamReader reader = new StreamReader(ReceiveStream, Encoding.UTF8); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = reader.ReadToEnd(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = responseStr.Replace(&quot;[&quot;, &quot;&quot;).Replace(&quot;]&quot;, &quot;&quot;).Replace(&quot; &quot;, &quot;&quot;). &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Replace(&quot;\n&quot;, &quot;&quot;).Replace(&quot;\r&quot;, &quot;&quot;).Replace(&quot;{&quot;, &quot;&quot;).Replace(&quot;},&quot;, &quot;|&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //JArray jsonArray = JArray.Parse(responseStr.Trim()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //dynamic data = JObject.Parse(jsonArray[0].ToString()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] arr = responseStr.Split(&#39;|&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (var v in arr) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] ar = v.Split(&#39;,&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] n = ar[0].Split(&#39;:&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string currye = n[1].Replace(&quot;\&quot;&quot;, &quot;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currye == &quot;ETC&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p1 = Convert.ToDecimal(ar[4].Split(&#39;:&#39;)[1]); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (currye == &quot;ET````&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p2 = Convert.ToDecimal(ar[4].Split(&#39;:&#39;)[1]); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp1 = Convert.ToDouble(p1) / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp2 = Convert.ToDouble(p2) / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp3 = p3 / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &lt;script type=&quot;text/javascript&quot;&gt; &nbsp; &nbsp; $(document).ready(function () { &nbsp; &nbsp; &nbsp; &nbsp; zcount = function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var seldz = $(&#39;#dzs&#39;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var selyz = $(&#39;#yzs&#39;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var num = $(&quot;#dz&quot;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var reg = /^\d+$/; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num.length &lt;= 0) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!reg.test(num)) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num &lt; 0) num = 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var js = seldz / selyz; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#yz&quot;).val(js * num); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; $(&#39;#dz&#39;).bind(&#39;input propertychange&#39;, function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#dzs&quot;).change(function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&#39;#yz&#39;).bind(&#39;input propertychange&#39;, function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#yzs&quot;).change(function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp;if (!base.IsPostBack) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string val1 = Request[&quot;type&quot;]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (val1 == &quot;1&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NewMethod(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; &nbsp; private void NewMethod() &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; int id = Convert.ToInt32(Session[&quot;User_ID&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; //获取三种币的余额 &nbsp; &nbsp; &nbsp; &nbsp; DataTable currencyTable = crud.QueryTable(&quot; &nbsp;select top 1 U_Account_ETH,U_Account_ETC,U_Account_ETES from DS_User where ID=&quot;+id+&quot;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; double ETHcurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETH&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double ETCcurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETC&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double ETEScurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETES&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double val2 = Convert.ToDouble(Request[&quot;value1&quot;]);//输入要准备兑换的币 &nbsp; &nbsp; &nbsp; &nbsp; string dzs = Request[&quot;dzs&quot;];//选择准备兑换的币 &nbsp; &nbsp; &nbsp; &nbsp; double val4 = Convert.ToDouble(Request[&quot;value3&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; string yzs = Request[&quot;yzs&quot;]; &nbsp; &nbsp; &nbsp; &nbsp; string sqlName1 = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; string sqlName2 = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (dzs == &quot;ETES&quot; &amp;&amp; val2 &lt; ETEScurrency) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETES&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else if (dzs == &quot;ETH&quot; &amp;&amp; val2 &lt; ETHcurrency) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETH&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;else if (dzs == &quot;ETC&quot; &amp;&amp; val2 &lt; ETCcurrency) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETC&quot;; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp; &nbsp; &nbsp; &nbsp;{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write( &quot;0&quot; ); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (yzs == &quot;ETC&quot;&amp;&amp;dzs!=&quot;ETC&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETC&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp;if (yzs == &quot;ETH&quot;&amp;&amp;dzs!=&quot;ETH&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETH&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;else if (yzs == &quot;ETES&quot; &amp;&amp; dzs != &quot;ETES&quot;) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETES&quot;; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write(&quot;2&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; crud.ExecuteSQL(&quot; update DS_User set &quot; + sqlName1 + &quot;=&quot; + sqlName1 + &quot;- &quot; + val2 + &quot;, &quot; + sqlName2 + &quot;=&quot; + sqlName2 + &quot;+ &quot; + val4 + &quot; where ID=&#39;&quot; + id + &quot;&#39;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; Response.Write(&quot;1&quot;); &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; } 以下为转换JS &nbsp; function sDD() { &nbsp; &nbsp; &nbsp; &nbsp; var options=$(&quot;#dzs option:selected&quot;); &nbsp; &nbsp; &nbsp; &nbsp; var options1 = $(&quot;#yzs option:selected&quot;); &nbsp; &nbsp; &nbsp; &nbsp; $.ajax({ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; url: &quot;Lock_prize.aspx&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;post&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value1&quot;: $(&quot;#dz&quot;).val(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;dzs&quot;: options.text(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value3&quot;: $(&quot;#yz&quot;).val(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;yzs&quot;: options1.text(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;type&quot;: 1, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success: function (data) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (data == &quot;1&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;兑换成功&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (data == &quot;0&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;余额不足，请充值&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(data==&quot;2&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;请选择要兑换的币&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/08/21/735fd5aec5b74f1cd427fb6ed81bc65d.html" />
<meta property="og:url" content="https://mlh.app/2018/08/21/735fd5aec5b74f1cd427fb6ed81bc65d.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-21T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebRequest myWebRequest = WebRequest.Create(&quot;http://api.coindog.com/api/v1/currency/ranks&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebResponse myWebResponse = myWebRequest.GetResponse(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Stream ReceiveStream = myWebResponse.GetResponseStream(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string responseStr = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (ReceiveStream != null) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StreamReader reader = new StreamReader(ReceiveStream, Encoding.UTF8); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = reader.ReadToEnd(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = responseStr.Replace(&quot;[&quot;, &quot;&quot;).Replace(&quot;]&quot;, &quot;&quot;).Replace(&quot; &quot;, &quot;&quot;). &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Replace(&quot;\\n&quot;, &quot;&quot;).Replace(&quot;\\r&quot;, &quot;&quot;).Replace(&quot;{&quot;, &quot;&quot;).Replace(&quot;},&quot;, &quot;|&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //JArray jsonArray = JArray.Parse(responseStr.Trim()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //dynamic data = JObject.Parse(jsonArray[0].ToString()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] arr = responseStr.Split(&#39;|&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (var v in arr) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] ar = v.Split(&#39;,&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] n = ar[0].Split(&#39;:&#39;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string currye = n[1].Replace(&quot;\\&quot;&quot;, &quot;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currye == &quot;ETC&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p1 = Convert.ToDecimal(ar[4].Split(&#39;:&#39;)[1]); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (currye == &quot;ET````&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p2 = Convert.ToDecimal(ar[4].Split(&#39;:&#39;)[1]); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp1 = Convert.ToDouble(p1) / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp2 = Convert.ToDouble(p2) / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp3 = p3 / rate; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &lt;script type=&quot;text/javascript&quot;&gt; &nbsp; &nbsp; $(document).ready(function () { &nbsp; &nbsp; &nbsp; &nbsp; zcount = function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var seldz = $(&#39;#dzs&#39;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var selyz = $(&#39;#yzs&#39;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var num = $(&quot;#dz&quot;).val(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var reg = /^\\d+$/; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num.length &lt;= 0) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!reg.test(num)) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num &lt; 0) num = 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var js = seldz / selyz; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#yz&quot;).val(js * num); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; $(&#39;#dz&#39;).bind(&#39;input propertychange&#39;, function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#dzs&quot;).change(function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&#39;#yz&#39;).bind(&#39;input propertychange&#39;, function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp; &nbsp; $(&quot;#yzs&quot;).change(function () { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount(); &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; &nbsp; }); &nbsp; &nbsp; &nbsp;if (!base.IsPostBack) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string val1 = Request[&quot;type&quot;]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (val1 == &quot;1&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NewMethod(); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; } &nbsp; &nbsp; private void NewMethod() &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; int id = Convert.ToInt32(Session[&quot;User_ID&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; //获取三种币的余额 &nbsp; &nbsp; &nbsp; &nbsp; DataTable currencyTable = crud.QueryTable(&quot; &nbsp;select top 1 U_Account_ETH,U_Account_ETC,U_Account_ETES from DS_User where ID=&quot;+id+&quot;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; double ETHcurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETH&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double ETCcurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETC&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double ETEScurrency = Convert.ToDouble(currencyTable.Rows[0][&quot;U_Account_ETES&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; double val2 = Convert.ToDouble(Request[&quot;value1&quot;]);//输入要准备兑换的币 &nbsp; &nbsp; &nbsp; &nbsp; string dzs = Request[&quot;dzs&quot;];//选择准备兑换的币 &nbsp; &nbsp; &nbsp; &nbsp; double val4 = Convert.ToDouble(Request[&quot;value3&quot;]); &nbsp; &nbsp; &nbsp; &nbsp; string yzs = Request[&quot;yzs&quot;]; &nbsp; &nbsp; &nbsp; &nbsp; string sqlName1 = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; string sqlName2 = &quot;&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (dzs == &quot;ETES&quot; &amp;&amp; val2 &lt; ETEScurrency) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETES&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else if (dzs == &quot;ETH&quot; &amp;&amp; val2 &lt; ETHcurrency) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETH&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;else if (dzs == &quot;ETC&quot; &amp;&amp; val2 &lt; ETCcurrency) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = &quot;U_Account_ETC&quot;; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp; &nbsp; &nbsp; &nbsp;{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write( &quot;0&quot; ); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (yzs == &quot;ETC&quot;&amp;&amp;dzs!=&quot;ETC&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETC&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp;if (yzs == &quot;ETH&quot;&amp;&amp;dzs!=&quot;ETH&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETH&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;else if (yzs == &quot;ETES&quot; &amp;&amp; dzs != &quot;ETES&quot;) &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = &quot;U_Account_ETES&quot;; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write(&quot;2&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; crud.ExecuteSQL(&quot; update DS_User set &quot; + sqlName1 + &quot;=&quot; + sqlName1 + &quot;- &quot; + val2 + &quot;, &quot; + sqlName2 + &quot;=&quot; + sqlName2 + &quot;+ &quot; + val4 + &quot; where ID=&#39;&quot; + id + &quot;&#39;&quot;); &nbsp; &nbsp; &nbsp; &nbsp; Response.Write(&quot;1&quot;); &nbsp; &nbsp; &nbsp; &nbsp; Response.End(); &nbsp; &nbsp; } 以下为转换JS &nbsp; function sDD() { &nbsp; &nbsp; &nbsp; &nbsp; var options=$(&quot;#dzs option:selected&quot;); &nbsp; &nbsp; &nbsp; &nbsp; var options1 = $(&quot;#yzs option:selected&quot;); &nbsp; &nbsp; &nbsp; &nbsp; $.ajax({ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; url: &quot;Lock_prize.aspx&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: &quot;post&quot;, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data: { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value1&quot;: $(&quot;#dz&quot;).val(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;dzs&quot;: options.text(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;value3&quot;: $(&quot;#yz&quot;).val(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;yzs&quot;: options1.text(), &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;type&quot;: 1, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success: function (data) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (data == &quot;1&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;兑换成功&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (data == &quot;0&quot;) { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;余额不足，请充值&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(data==&quot;2&quot;) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;请选择要兑换的币&quot;); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp; }); &nbsp; 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/08/21/735fd5aec5b74f1cd427fb6ed81bc65d.html","headline":"动态获取以太坊，以太经典实时价格接口，以及转换汇率（区块链）","dateModified":"2018-08-21T00:00:00+08:00","datePublished":"2018-08-21T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/21/735fd5aec5b74f1cd427fb6ed81bc65d.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>动态获取以太坊，以太经典实时价格接口，以及转换汇率（区块链）</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <p><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebRequest myWebRequest = WebRequest.Create("http://api.coindog.com/api/v1/currency/ranks");<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WebResponse myWebResponse = myWebRequest.GetResponse();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Stream ReceiveStream = myWebResponse.GetResponseStream();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string responseStr = "";</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (ReceiveStream != null)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StreamReader reader = new StreamReader(ReceiveStream, Encoding.UTF8);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = reader.ReadToEnd();</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseStr = responseStr.Replace("[", "").Replace("]", "").Replace(" ", "").<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Replace("\n", "").Replace("\r", "").Replace("{", "").Replace("},", "|");</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //JArray jsonArray = JArray.Parse(responseStr.Trim());<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //dynamic data = JObject.Parse(jsonArray[0].ToString());</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] arr = responseStr.Split('|');</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (var v in arr)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] ar = v.Split(',');</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string[] n = ar[0].Split(':');</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string currye = n[1].Replace("\"", "");</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (currye == "ETC")<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p1 = Convert.ToDecimal(ar[4].Split(':')[1]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (currye == "ET````")<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p2 = Convert.ToDecimal(ar[4].Split(':')[1]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp1 = Convert.ToDouble(p1) / rate;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp2 = Convert.ToDouble(p2) / rate;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usdp3 = p3 / rate;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; }</p> 
  <p>&lt;script type="text/javascript"&gt;<br> &nbsp; &nbsp; $(document).ready(function () {</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; zcount = function () {</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var seldz = $('#dzs').val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var selyz = $('#yzs').val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var num = $("#dz").val();</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var reg = /^\d+$/;</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num.length &lt;= 0) {</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!reg.test(num)) {</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (num &lt; 0) num = 1;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var js = seldz / selyz;</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $("#yz").val(js * num);<br> &nbsp; &nbsp; &nbsp; &nbsp; }</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; $('#dz').bind('input propertychange', function () {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount();<br> &nbsp; &nbsp; &nbsp; &nbsp; });<br> &nbsp; &nbsp; &nbsp; &nbsp; $("#dzs").change(function () {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount();<br> &nbsp; &nbsp; &nbsp; &nbsp; });<br> &nbsp; &nbsp; &nbsp; &nbsp; $('#yz').bind('input propertychange', function () {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount();<br> &nbsp; &nbsp; &nbsp; &nbsp; });<br> &nbsp; &nbsp; &nbsp; &nbsp; $("#yzs").change(function () {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcount();<br> &nbsp; &nbsp; &nbsp; &nbsp; });<br> &nbsp; &nbsp; });</p> 
  <p>&nbsp;</p> 
  <p>&nbsp; &nbsp;if (!base.IsPostBack)<br> &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string val1 = Request["type"];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (val1 == "1")<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NewMethod();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; }</p> 
  <p>&nbsp; &nbsp; private void NewMethod()<br> &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; int id = Convert.ToInt32(Session["User_ID"]);<br> &nbsp; &nbsp; &nbsp; &nbsp; //获取三种币的余额<br> &nbsp; &nbsp; &nbsp; &nbsp; DataTable currencyTable = crud.QueryTable(" &nbsp;select top 1 U_Account_ETH,U_Account_ETC,U_Account_ETES from DS_User where ID="+id+"");<br> &nbsp; &nbsp; &nbsp; &nbsp; double ETHcurrency = Convert.ToDouble(currencyTable.Rows[0]["U_Account_ETH"]);<br> &nbsp; &nbsp; &nbsp; &nbsp; double ETCcurrency = Convert.ToDouble(currencyTable.Rows[0]["U_Account_ETC"]);<br> &nbsp; &nbsp; &nbsp; &nbsp; double ETEScurrency = Convert.ToDouble(currencyTable.Rows[0]["U_Account_ETES"]);</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; double val2 = Convert.ToDouble(Request["value1"]);//输入要准备兑换的币<br> &nbsp; &nbsp; &nbsp; &nbsp; string dzs = Request["dzs"];//选择准备兑换的币<br> &nbsp; &nbsp; &nbsp; &nbsp; double val4 = Convert.ToDouble(Request["value3"]);<br> &nbsp; &nbsp; &nbsp; &nbsp; string yzs = Request["yzs"];<br> &nbsp; &nbsp; &nbsp; &nbsp; string sqlName1 = "";<br> &nbsp; &nbsp; &nbsp; &nbsp; string sqlName2 = "";</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (dzs == "ETES" &amp;&amp; val2 &lt; ETEScurrency)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = "U_Account_ETES";<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; else if (dzs == "ETH" &amp;&amp; val2 &lt; ETHcurrency)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = "U_Account_ETH";<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp;else if (dzs == "ETC" &amp;&amp; val2 &lt; ETCcurrency)<br> &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName1 = "U_Account_ETC";<br> &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; else<br> &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write( "0" );<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End();<br> &nbsp; &nbsp; &nbsp; &nbsp; }</p> 
  <p><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (yzs == "ETC"&amp;&amp;dzs!="ETC")<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = "U_Account_ETC";<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp;if (yzs == "ETH"&amp;&amp;dzs!="ETH")<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = "U_Account_ETH";<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp;else if (yzs == "ETES" &amp;&amp; dzs != "ETES")<br> &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sqlName2 = "U_Account_ETES";<br> &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; else<br> &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.Write("2");<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Response.End();<br> &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; crud.ExecuteSQL(" update DS_User set " + sqlName1 + "=" + sqlName1 + "- " + val2 + ", " + sqlName2 + "=" + sqlName2 + "+ " + val4 + " where ID='" + id + "'");</p> 
  <p>&nbsp; &nbsp; &nbsp; &nbsp; Response.Write("1");<br> &nbsp; &nbsp; &nbsp; &nbsp; Response.End();<br> &nbsp; &nbsp; }</p> 
  <p>以下为转换JS</p> 
  <p>&nbsp; function sDD() {<br> &nbsp; &nbsp; &nbsp; &nbsp; var options=$("#dzs option:selected");<br> &nbsp; &nbsp; &nbsp; &nbsp; var options1 = $("#yzs option:selected");<br> &nbsp; &nbsp; &nbsp; &nbsp; $.ajax({<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; url: "Lock_prize.aspx",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: "post",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data: {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "value1": $("#dz").val(),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "dzs": options.text(),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "value3": $("#yz").val(),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "yzs": options1.text(),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "type": 1,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success: function (data) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (data == "1")<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert("兑换成功");<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (data == "0") {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert("余额不足，请充值");<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(data=="2")<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert("请选择要兑换的币");<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp; });</p> 
  <p>&nbsp;</p> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qq_33952518/article/details/81906760,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qq_33952518/article/details/81906760,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
