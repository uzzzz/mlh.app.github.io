<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>EOS合约开发第五章-钱包和账户手册 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="EOS合约开发第五章-钱包和账户手册" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="钱包和账户手册 一、创建和启动单个节点 使用以下命令来启动私有的单节点EOSIO： cd build/programs/nodeos ./nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin --plugin eosio::account_history_api_plugin&nbsp; 运行时，nodeos会输出以下的日志消息，这意味着EOSIO已经成功生产EOS区块。 2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transaction 2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transactions 2192031ms thread-0&nbsp; &nbsp;net_plugin.cpp:2760&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting listener, ma&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x clients is 25 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:161&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() begin 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:166&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] Launching block produ&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ction for 1 producers. ******************************* *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* *&nbsp; &nbsp;------ NEW CHAIN ------&nbsp; &nbsp;* *&nbsp; &nbsp;-&nbsp; Welcome to EOSIO!&nbsp; -&nbsp; &nbsp;* *&nbsp; &nbsp;-----------------------&nbsp; &nbsp;* *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* ******************************* Your genesis seems to have an old timestamp Please consider using the --genesis-timestamp option to give your genesis a recent timestamp 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:176&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() end eosio generated block 0e03ce32... #1 @ 2018-04-23T00:36:32.500 with 0 trxs, lib: 0 eosio generated block 68b72661... #2 @ 2018-04-23T00:36:33.000 with 0 trxs, lib: 1 eosio generated block 65485d5d... #3 @ 2018-04-23T00:36:33.500 with 0 trxs, lib: 2 eosio generated block 4444c6a5... #4 @ 2018-04-23T00:36:34.000 with 0 trxs, lib: 3 eosio generated block 1b43b858... #5 @ 2018-04-23T00:36:34.500 with 0 trxs, lib: 4 下图描述了以上刚创建的单节点EOSIO，在上面的配置中，使用nodeos加载钱包插件来管理钱包，nodeos命令行参数中指定的eosio::wallet_api_plugin就是用来启动钱包管理的。无论是nodeos启动钱包管理还是keosd，cleos都是可用来管理钱包、管理账户和调用EOS.IO的功能。 二、配置 默认的配置文件夹路径如下： mac： ~/Library/Application Support/eosio/nodeos/config Linux： ~/.local/share/eosio/nodeos/config 也可以指定配置文件夹，在启动nodeos使用的命令行参数中添加--config-dir来指定nodeos使用的配置文件夹。 配置文件夹下需要有两个文件：genesis.json和config.ini。 启动nodeos后，nodeos在配置的文件夹中查找config.ini，如果找不到，则会创建一个默认的config.ini。 如果需要和上面的命令行启动一样的nodeos，则需要修改已有的默认配置文件： &nbsp; &nbsp;# Load the testnet genesis state, which creates some initial block producers with the default key &nbsp; &nbsp;genesis-json = /path/to/eos/source/genesis.json &nbsp; &nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale &nbsp; &nbsp;enable-stale-production = true &nbsp; &nbsp;# Enable block production with the testnet producers &nbsp; &nbsp;producer-name = eosio &nbsp; &nbsp;# Load the block producer plugin, so you can produce blocks &nbsp; &nbsp;plugin = eosio::producer_plugin &nbsp; &nbsp;# Wallet plugin &nbsp; &nbsp;plugin = eosio::wallet_api_plugin &nbsp; &nbsp;# As well as API and HTTP plugins &nbsp; &nbsp;plugin = eosio::chain_api_plugin &nbsp; &nbsp;plugin = eosio::http_plugin &nbsp; &nbsp;# This will be used by the validation step below, to view account history &nbsp; &nbsp;plugin = eosio::account_history_api_plugin 现在可以使用以下命令运行nodeos： build/programs/nodeos/nodeos 三、数据和日志 数据和日志默认的文件路径如下： mac： ~/Library/Application Support/eosio/nodeos/data Linux： ~/.local/share/eosio/nodeos/data 也可以指定数据文件路劲，在启动nodeos使用的命令行参数中添加--data-dir来指定nodeos使用的数据文件路径。 nodeos将运行时数据（共享内存、日志等）存储在自定义的数据文件路径下。 四、账户和钱包概念 下图是EOSIO账户和钱包的概念视图： &nbsp; 钱包可以被认为是公私钥对的存储库，发送到区块链上执行的操作需要私钥进行签名，通过将密钥本地存储在被锁定的加密存储中，钱包可以以安全的方式获得密钥来进行签名。keosd则完成了这些功能，而cleos则用来访问钱包。 账户则被认为是区块链上的一个带有访问权限控制的安全主体，nodeos则管理了区块链上账户的发布以及账户相关的action。而cleos则用来访问nodeos的账户管理功能。 账户和钱包之间没有固定的关系，nodeos和keosd之间也没有内在联系，他们的基本功能是根本不同的。Cleos有效的充当了keosd密钥检索操作和nodeos账户需要使用这些密钥进行签名的区块链操作之间的中间。 五、创建和管理钱包 进入cleos程序目录 cd /path_to_eos/build/programs/cleos 使用cleos的wallet create命令创建一个钱包 [kingnet@bctestnode3 cleos]$ ./cleos wallet create Creating wallet: default Save password to use in the future to unlock this wallet. Without password imported keys will not be retrievable. &quot;PW5KfoH51MEQ4Yqg1zaz22AdcGKAvaZipL5gtFtgggdJpcbLykLAg&quot; 这里keosd创建了一个名为default的钱包，并且返回了这个钱包的主密码，这个密码用于解锁该钱包文件。 这个钱包文件被命名为default.wallet。默认情况下，keosd将钱包存储在data-dir/eosio-wallet文件目录下，钱包数据文件目录是在启动钱包时的命令行参数--data-dir中指定的。 六、管理多个钱包 Cleos可以管理多个钱包，每个个人钱包受不同的钱包主密码保护，下面创建了另一个钱包并使用参数-n来命名它。 [kingnet@bctestnode3 cleos]$ ./cleos wallet create -n gaoyuan Creating wallet: gaoyuan Save password to use in the future to unlock this wallet. Without password imported keys will not be retrievable. &quot;PW5Js5S7YFPicSrVW6wC35xeDAwaCL63s8VPXhWkVVU3kZQNvL9u4&quot; 列出所有的钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan *&quot; ] 每个列出的钱包后面的星号(*)意味着相应的钱包是解锁状态，创建的账户默认是解锁的。 锁定一个钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet lock -n gaoyuan Locked: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan&quot; ] 使用wallet unlock来解锁钱包 [kingnet@bctestnode3 cleos]$ ./cleos wallet unlock -n gaoyuan password: Unlocked: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan *&quot; ] 如果重启了keosd，执行以下命令： [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [] 这里没有任何钱包，首先需要打开一个钱包才能进行钱包操作，包括列出钱包。关闭keosd时钱包被锁定且keosd重新启动后，钱包并未打开。 打开钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet open Opened: default [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default&quot; ] 如果wallet命令中没有使用-n指定钱包名称，则使用‘default’钱包。 [kingnet@bctestnode3 cleos]$ ./cleos wallet open -n gaoyuan Opened: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default&quot;, &nbsp; &quot;gaoyuan&quot; ] 打开的钱包默认是锁定的。 七、生成和导入密钥 一个空的钱包没有什么用，需要导入密钥到钱包才能使用。 生成密钥对有很多种方法，在这里介绍cleos的create key命令方法。 生成两对公私钥： [kingnet@bctestnode3 cleos]$ ./cleos create key Private key: 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK Public key: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 [kingnet@bctestnode3 cleos]$ ./cleos create key Private key: 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi Public key: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX 打开并解锁默认钱包 将以上生成的两个私钥导入钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK imported private key for: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi imported private key for: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX 检查导入的密钥对： [kingnet@bctestnode3 cleos]$ ./cleos wallet keys [[ &nbsp; &nbsp; &quot;EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;, &nbsp; &nbsp; &quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8&quot;, &nbsp; &nbsp; &quot;5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX&quot;, &nbsp; &nbsp; &quot;5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi&quot; &nbsp; ] ] 钱包文件本身被加密，因此钱包在锁定时将保护这些密钥，访问锁定的钱包中的密钥需要在创建钱包期间提供的主密码。 八、备份钱包 既然钱包包含密钥，最好经常备份钱包，钱包文件在启动keosd时命令行参数data-dir配置的文件目录下。 [kingnet@bctestnode3 cleos]$ ls -l ~/.local/share/eosio/nodeos/data/ total 16 drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 blocks -rw------- 1 kingnet users&nbsp; 567 Apr 23 10:37 default.wallet -rw------- 1 kingnet users&nbsp; 311 Apr 23 10:09 gaoyuan.wallet drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 shared_mem 九、创建账户 在区块链上执行操作需要账户，cleos通过请求nodeos在区块链上创建账户，以下命令均需要启动nodeos，同时某些命令还需要启动keosd，所以最好将nodeos和keosd同时运行起来。 目前keosd和nodeos的默认端口都为8888，我们为了更好了解nodeos和keosd的功能，我们将把keosd的端口改为8899，以下两种方法都可以做到： 1. 编辑keosd配置文件 编辑/data-dir/config/config.ini文件，将http-server-address属性修改为： http-server-address = 127.0.0.1:8899 2. 使用命令行参数 启动keosd是增加命令行参数 --http-server-address = localhost:8899 使用命令行参数启动keosd: [kingnet@bctestnode3 keosd]$ ./keosd --http-server-address=localhost:8899 136660ms thread-0&nbsp; &nbsp;wallet_plugin.cpp:41&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plugin_initialize&nbsp; &nbsp; ] initializing wallet plugin 136660ms thread-0&nbsp; &nbsp;http_plugin.cpp:141&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] host: localhost port: 8899 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:144&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] configured http to listen on localhost:8899 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:213&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] start listening for http requests 136661ms thread-0&nbsp; &nbsp;wallet_api_plugin.cpp:70&nbsp; &nbsp; &nbsp; plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting wallet_api_plugin 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/create 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/get_public_keys 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/import_key 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_keys 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_wallets 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock_all 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/open 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/set_timeout 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/sign_transaction 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/unlock keosd重新启动，钱包被锁定且没有打开，由于keosd在端口8899开始监听，因此需要使用--wallet-port命令行参数。 打开，解锁默认钱包 [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet open Opened: default [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list Wallets: [ &nbsp; &quot;default&quot;, &nbsp; &quot;gaoyuan&quot; ] [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet unlock password: Unlocked: default [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan&quot; ] 现在可以创建账户了，创建账户的命令是cleos create account，以下是命令参数结构： $ cleos create account ${authorizing_account} ${new_account} ${owner_key} ${active_key} 1.authorizing_account : 为账户创建提供资金的账户名称 2.new_account : 想要创建的新账户名称 3.owner_key : 账户owner权限的公钥 4.active_key : 账户active权限的公钥 EOSIO授权账户： 在这里创建账户时，使用EOSIO账户作为授权账户，EOSIO账户是用于引导EOSIO节点的特殊账户，而使用该EOSIO账户在区块链上执行操作必须使用与该账户关联的密钥进行签名，EOSIO账户的密钥可以在config.ini配置文件中找到。 新账户名称： 新账户名称必须符合以下规则： 必须少于13个字符 只能包含以下符号.12345abcdefghijklmnopqrstuvwxyz 账户公钥： 使用在上面生成并导入到钱包的公钥，这些公钥将被分配到某个权限，分配到owner权限的公钥对应的私钥等同于账户的完全控制权，分配到active权限的公钥对应的私钥等同于账户中资金存取权。 [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet keys&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[[ &nbsp; &nbsp; &quot;EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;, &nbsp; &nbsp; &quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8&quot;, &nbsp; &nbsp; &quot;5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX&quot;, &nbsp; &nbsp; &quot;5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi&quot; &nbsp; ] ] [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 create account eosio myaccount2 EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX executed transaction: 49515e71f977ae273716dfdf58eb9bcd0688622f177a27b3edd0ee5fb114d630&nbsp; 352 bytes&nbsp; 102400 cycles #&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eosio &lt;= eosio::newaccount&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;creator&quot;:&quot;eosio&quot;,&quot;name&quot;:&quot;myaccount2&quot;,&quot;owner&quot;:{&quot;threshold&quot;:1,&quot;keys&quot;:[{&quot;key&quot;:&quot;EOS6rfkVfqWXVdY71JHMj3... 如果在创建账户时出现以下错误： 2639714ms thread-0&nbsp; &nbsp;main.cpp:1158&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;main&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;] Failed with error: Assert Exception (10) itr != structs.end(): Unknown struct&nbsp; Failed to serialize type 请先执行： cleos set contract eosio build/contracts/eosio.bios -p eosio 十、账户相关操作命令 cleos commang description create account 创建一个新的账户 get account 获取一个账户 get code 获取一个账户的code和ABI get accounts 获取和一个公钥关联的账户 get servants 获取一个账户的仆人账户 get transactions 获取一个特定账户名称的所有交易 set contract 在账户上创建或者更新智能合约 set account 更新账户状态 transfer 在一个账户上进行转账 阅读更多" />
<meta property="og:description" content="钱包和账户手册 一、创建和启动单个节点 使用以下命令来启动私有的单节点EOSIO： cd build/programs/nodeos ./nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin --plugin eosio::account_history_api_plugin&nbsp; 运行时，nodeos会输出以下的日志消息，这意味着EOSIO已经成功生产EOS区块。 2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transaction 2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transactions 2192031ms thread-0&nbsp; &nbsp;net_plugin.cpp:2760&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting listener, ma&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x clients is 25 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:161&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() begin 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:166&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] Launching block produ&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ction for 1 producers. ******************************* *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* *&nbsp; &nbsp;------ NEW CHAIN ------&nbsp; &nbsp;* *&nbsp; &nbsp;-&nbsp; Welcome to EOSIO!&nbsp; -&nbsp; &nbsp;* *&nbsp; &nbsp;-----------------------&nbsp; &nbsp;* *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* ******************************* Your genesis seems to have an old timestamp Please consider using the --genesis-timestamp option to give your genesis a recent timestamp 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:176&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() end eosio generated block 0e03ce32... #1 @ 2018-04-23T00:36:32.500 with 0 trxs, lib: 0 eosio generated block 68b72661... #2 @ 2018-04-23T00:36:33.000 with 0 trxs, lib: 1 eosio generated block 65485d5d... #3 @ 2018-04-23T00:36:33.500 with 0 trxs, lib: 2 eosio generated block 4444c6a5... #4 @ 2018-04-23T00:36:34.000 with 0 trxs, lib: 3 eosio generated block 1b43b858... #5 @ 2018-04-23T00:36:34.500 with 0 trxs, lib: 4 下图描述了以上刚创建的单节点EOSIO，在上面的配置中，使用nodeos加载钱包插件来管理钱包，nodeos命令行参数中指定的eosio::wallet_api_plugin就是用来启动钱包管理的。无论是nodeos启动钱包管理还是keosd，cleos都是可用来管理钱包、管理账户和调用EOS.IO的功能。 二、配置 默认的配置文件夹路径如下： mac： ~/Library/Application Support/eosio/nodeos/config Linux： ~/.local/share/eosio/nodeos/config 也可以指定配置文件夹，在启动nodeos使用的命令行参数中添加--config-dir来指定nodeos使用的配置文件夹。 配置文件夹下需要有两个文件：genesis.json和config.ini。 启动nodeos后，nodeos在配置的文件夹中查找config.ini，如果找不到，则会创建一个默认的config.ini。 如果需要和上面的命令行启动一样的nodeos，则需要修改已有的默认配置文件： &nbsp; &nbsp;# Load the testnet genesis state, which creates some initial block producers with the default key &nbsp; &nbsp;genesis-json = /path/to/eos/source/genesis.json &nbsp; &nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale &nbsp; &nbsp;enable-stale-production = true &nbsp; &nbsp;# Enable block production with the testnet producers &nbsp; &nbsp;producer-name = eosio &nbsp; &nbsp;# Load the block producer plugin, so you can produce blocks &nbsp; &nbsp;plugin = eosio::producer_plugin &nbsp; &nbsp;# Wallet plugin &nbsp; &nbsp;plugin = eosio::wallet_api_plugin &nbsp; &nbsp;# As well as API and HTTP plugins &nbsp; &nbsp;plugin = eosio::chain_api_plugin &nbsp; &nbsp;plugin = eosio::http_plugin &nbsp; &nbsp;# This will be used by the validation step below, to view account history &nbsp; &nbsp;plugin = eosio::account_history_api_plugin 现在可以使用以下命令运行nodeos： build/programs/nodeos/nodeos 三、数据和日志 数据和日志默认的文件路径如下： mac： ~/Library/Application Support/eosio/nodeos/data Linux： ~/.local/share/eosio/nodeos/data 也可以指定数据文件路劲，在启动nodeos使用的命令行参数中添加--data-dir来指定nodeos使用的数据文件路径。 nodeos将运行时数据（共享内存、日志等）存储在自定义的数据文件路径下。 四、账户和钱包概念 下图是EOSIO账户和钱包的概念视图： &nbsp; 钱包可以被认为是公私钥对的存储库，发送到区块链上执行的操作需要私钥进行签名，通过将密钥本地存储在被锁定的加密存储中，钱包可以以安全的方式获得密钥来进行签名。keosd则完成了这些功能，而cleos则用来访问钱包。 账户则被认为是区块链上的一个带有访问权限控制的安全主体，nodeos则管理了区块链上账户的发布以及账户相关的action。而cleos则用来访问nodeos的账户管理功能。 账户和钱包之间没有固定的关系，nodeos和keosd之间也没有内在联系，他们的基本功能是根本不同的。Cleos有效的充当了keosd密钥检索操作和nodeos账户需要使用这些密钥进行签名的区块链操作之间的中间。 五、创建和管理钱包 进入cleos程序目录 cd /path_to_eos/build/programs/cleos 使用cleos的wallet create命令创建一个钱包 [kingnet@bctestnode3 cleos]$ ./cleos wallet create Creating wallet: default Save password to use in the future to unlock this wallet. Without password imported keys will not be retrievable. &quot;PW5KfoH51MEQ4Yqg1zaz22AdcGKAvaZipL5gtFtgggdJpcbLykLAg&quot; 这里keosd创建了一个名为default的钱包，并且返回了这个钱包的主密码，这个密码用于解锁该钱包文件。 这个钱包文件被命名为default.wallet。默认情况下，keosd将钱包存储在data-dir/eosio-wallet文件目录下，钱包数据文件目录是在启动钱包时的命令行参数--data-dir中指定的。 六、管理多个钱包 Cleos可以管理多个钱包，每个个人钱包受不同的钱包主密码保护，下面创建了另一个钱包并使用参数-n来命名它。 [kingnet@bctestnode3 cleos]$ ./cleos wallet create -n gaoyuan Creating wallet: gaoyuan Save password to use in the future to unlock this wallet. Without password imported keys will not be retrievable. &quot;PW5Js5S7YFPicSrVW6wC35xeDAwaCL63s8VPXhWkVVU3kZQNvL9u4&quot; 列出所有的钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan *&quot; ] 每个列出的钱包后面的星号(*)意味着相应的钱包是解锁状态，创建的账户默认是解锁的。 锁定一个钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet lock -n gaoyuan Locked: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan&quot; ] 使用wallet unlock来解锁钱包 [kingnet@bctestnode3 cleos]$ ./cleos wallet unlock -n gaoyuan password: Unlocked: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan *&quot; ] 如果重启了keosd，执行以下命令： [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [] 这里没有任何钱包，首先需要打开一个钱包才能进行钱包操作，包括列出钱包。关闭keosd时钱包被锁定且keosd重新启动后，钱包并未打开。 打开钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet open Opened: default [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default&quot; ] 如果wallet命令中没有使用-n指定钱包名称，则使用‘default’钱包。 [kingnet@bctestnode3 cleos]$ ./cleos wallet open -n gaoyuan Opened: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default&quot;, &nbsp; &quot;gaoyuan&quot; ] 打开的钱包默认是锁定的。 七、生成和导入密钥 一个空的钱包没有什么用，需要导入密钥到钱包才能使用。 生成密钥对有很多种方法，在这里介绍cleos的create key命令方法。 生成两对公私钥： [kingnet@bctestnode3 cleos]$ ./cleos create key Private key: 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK Public key: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 [kingnet@bctestnode3 cleos]$ ./cleos create key Private key: 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi Public key: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX 打开并解锁默认钱包 将以上生成的两个私钥导入钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK imported private key for: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi imported private key for: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX 检查导入的密钥对： [kingnet@bctestnode3 cleos]$ ./cleos wallet keys [[ &nbsp; &nbsp; &quot;EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;, &nbsp; &nbsp; &quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8&quot;, &nbsp; &nbsp; &quot;5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX&quot;, &nbsp; &nbsp; &quot;5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi&quot; &nbsp; ] ] 钱包文件本身被加密，因此钱包在锁定时将保护这些密钥，访问锁定的钱包中的密钥需要在创建钱包期间提供的主密码。 八、备份钱包 既然钱包包含密钥，最好经常备份钱包，钱包文件在启动keosd时命令行参数data-dir配置的文件目录下。 [kingnet@bctestnode3 cleos]$ ls -l ~/.local/share/eosio/nodeos/data/ total 16 drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 blocks -rw------- 1 kingnet users&nbsp; 567 Apr 23 10:37 default.wallet -rw------- 1 kingnet users&nbsp; 311 Apr 23 10:09 gaoyuan.wallet drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 shared_mem 九、创建账户 在区块链上执行操作需要账户，cleos通过请求nodeos在区块链上创建账户，以下命令均需要启动nodeos，同时某些命令还需要启动keosd，所以最好将nodeos和keosd同时运行起来。 目前keosd和nodeos的默认端口都为8888，我们为了更好了解nodeos和keosd的功能，我们将把keosd的端口改为8899，以下两种方法都可以做到： 1. 编辑keosd配置文件 编辑/data-dir/config/config.ini文件，将http-server-address属性修改为： http-server-address = 127.0.0.1:8899 2. 使用命令行参数 启动keosd是增加命令行参数 --http-server-address = localhost:8899 使用命令行参数启动keosd: [kingnet@bctestnode3 keosd]$ ./keosd --http-server-address=localhost:8899 136660ms thread-0&nbsp; &nbsp;wallet_plugin.cpp:41&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plugin_initialize&nbsp; &nbsp; ] initializing wallet plugin 136660ms thread-0&nbsp; &nbsp;http_plugin.cpp:141&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] host: localhost port: 8899 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:144&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] configured http to listen on localhost:8899 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:213&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] start listening for http requests 136661ms thread-0&nbsp; &nbsp;wallet_api_plugin.cpp:70&nbsp; &nbsp; &nbsp; plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting wallet_api_plugin 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/create 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/get_public_keys 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/import_key 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_keys 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_wallets 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock_all 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/open 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/set_timeout 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/sign_transaction 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/unlock keosd重新启动，钱包被锁定且没有打开，由于keosd在端口8899开始监听，因此需要使用--wallet-port命令行参数。 打开，解锁默认钱包 [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet open Opened: default [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list Wallets: [ &nbsp; &quot;default&quot;, &nbsp; &quot;gaoyuan&quot; ] [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet unlock password: Unlocked: default [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan&quot; ] 现在可以创建账户了，创建账户的命令是cleos create account，以下是命令参数结构： $ cleos create account ${authorizing_account} ${new_account} ${owner_key} ${active_key} 1.authorizing_account : 为账户创建提供资金的账户名称 2.new_account : 想要创建的新账户名称 3.owner_key : 账户owner权限的公钥 4.active_key : 账户active权限的公钥 EOSIO授权账户： 在这里创建账户时，使用EOSIO账户作为授权账户，EOSIO账户是用于引导EOSIO节点的特殊账户，而使用该EOSIO账户在区块链上执行操作必须使用与该账户关联的密钥进行签名，EOSIO账户的密钥可以在config.ini配置文件中找到。 新账户名称： 新账户名称必须符合以下规则： 必须少于13个字符 只能包含以下符号.12345abcdefghijklmnopqrstuvwxyz 账户公钥： 使用在上面生成并导入到钱包的公钥，这些公钥将被分配到某个权限，分配到owner权限的公钥对应的私钥等同于账户的完全控制权，分配到active权限的公钥对应的私钥等同于账户中资金存取权。 [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet keys&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[[ &nbsp; &nbsp; &quot;EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;, &nbsp; &nbsp; &quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8&quot;, &nbsp; &nbsp; &quot;5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX&quot;, &nbsp; &nbsp; &quot;5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi&quot; &nbsp; ] ] [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 create account eosio myaccount2 EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX executed transaction: 49515e71f977ae273716dfdf58eb9bcd0688622f177a27b3edd0ee5fb114d630&nbsp; 352 bytes&nbsp; 102400 cycles #&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eosio &lt;= eosio::newaccount&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;creator&quot;:&quot;eosio&quot;,&quot;name&quot;:&quot;myaccount2&quot;,&quot;owner&quot;:{&quot;threshold&quot;:1,&quot;keys&quot;:[{&quot;key&quot;:&quot;EOS6rfkVfqWXVdY71JHMj3... 如果在创建账户时出现以下错误： 2639714ms thread-0&nbsp; &nbsp;main.cpp:1158&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;main&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;] Failed with error: Assert Exception (10) itr != structs.end(): Unknown struct&nbsp; Failed to serialize type 请先执行： cleos set contract eosio build/contracts/eosio.bios -p eosio 十、账户相关操作命令 cleos commang description create account 创建一个新的账户 get account 获取一个账户 get code 获取一个账户的code和ABI get accounts 获取和一个公钥关联的账户 get servants 获取一个账户的仆人账户 get transactions 获取一个特定账户名称的所有交易 set contract 在账户上创建或者更新智能合约 set account 更新账户状态 transfer 在一个账户上进行转账 阅读更多" />
<link rel="canonical" href="https://mlh.app/2018/08/07/e8b52fcfead4a4f63745c6d055f97803.html" />
<meta property="og:url" content="https://mlh.app/2018/08/07/e8b52fcfead4a4f63745c6d055f97803.html" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-07T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"钱包和账户手册 一、创建和启动单个节点 使用以下命令来启动私有的单节点EOSIO： cd build/programs/nodeos ./nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin --plugin eosio::account_history_api_plugin&nbsp; 运行时，nodeos会输出以下的日志消息，这意味着EOSIO已经成功生产EOS区块。 2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transaction 2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transactions 2192031ms thread-0&nbsp; &nbsp;net_plugin.cpp:2760&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting listener, ma&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x clients is 25 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:161&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() begin 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:166&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] Launching block produ&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ction for 1 producers. ******************************* *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* *&nbsp; &nbsp;------ NEW CHAIN ------&nbsp; &nbsp;* *&nbsp; &nbsp;-&nbsp; Welcome to EOSIO!&nbsp; -&nbsp; &nbsp;* *&nbsp; &nbsp;-----------------------&nbsp; &nbsp;* *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* ******************************* Your genesis seems to have an old timestamp Please consider using the --genesis-timestamp option to give your genesis a recent timestamp 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:176&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() end eosio generated block 0e03ce32... #1 @ 2018-04-23T00:36:32.500 with 0 trxs, lib: 0 eosio generated block 68b72661... #2 @ 2018-04-23T00:36:33.000 with 0 trxs, lib: 1 eosio generated block 65485d5d... #3 @ 2018-04-23T00:36:33.500 with 0 trxs, lib: 2 eosio generated block 4444c6a5... #4 @ 2018-04-23T00:36:34.000 with 0 trxs, lib: 3 eosio generated block 1b43b858... #5 @ 2018-04-23T00:36:34.500 with 0 trxs, lib: 4 下图描述了以上刚创建的单节点EOSIO，在上面的配置中，使用nodeos加载钱包插件来管理钱包，nodeos命令行参数中指定的eosio::wallet_api_plugin就是用来启动钱包管理的。无论是nodeos启动钱包管理还是keosd，cleos都是可用来管理钱包、管理账户和调用EOS.IO的功能。 二、配置 默认的配置文件夹路径如下： mac： ~/Library/Application Support/eosio/nodeos/config Linux： ~/.local/share/eosio/nodeos/config 也可以指定配置文件夹，在启动nodeos使用的命令行参数中添加--config-dir来指定nodeos使用的配置文件夹。 配置文件夹下需要有两个文件：genesis.json和config.ini。 启动nodeos后，nodeos在配置的文件夹中查找config.ini，如果找不到，则会创建一个默认的config.ini。 如果需要和上面的命令行启动一样的nodeos，则需要修改已有的默认配置文件： &nbsp; &nbsp;# Load the testnet genesis state, which creates some initial block producers with the default key &nbsp; &nbsp;genesis-json = /path/to/eos/source/genesis.json &nbsp; &nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale &nbsp; &nbsp;enable-stale-production = true &nbsp; &nbsp;# Enable block production with the testnet producers &nbsp; &nbsp;producer-name = eosio &nbsp; &nbsp;# Load the block producer plugin, so you can produce blocks &nbsp; &nbsp;plugin = eosio::producer_plugin &nbsp; &nbsp;# Wallet plugin &nbsp; &nbsp;plugin = eosio::wallet_api_plugin &nbsp; &nbsp;# As well as API and HTTP plugins &nbsp; &nbsp;plugin = eosio::chain_api_plugin &nbsp; &nbsp;plugin = eosio::http_plugin &nbsp; &nbsp;# This will be used by the validation step below, to view account history &nbsp; &nbsp;plugin = eosio::account_history_api_plugin 现在可以使用以下命令运行nodeos： build/programs/nodeos/nodeos 三、数据和日志 数据和日志默认的文件路径如下： mac： ~/Library/Application Support/eosio/nodeos/data Linux： ~/.local/share/eosio/nodeos/data 也可以指定数据文件路劲，在启动nodeos使用的命令行参数中添加--data-dir来指定nodeos使用的数据文件路径。 nodeos将运行时数据（共享内存、日志等）存储在自定义的数据文件路径下。 四、账户和钱包概念 下图是EOSIO账户和钱包的概念视图： &nbsp; 钱包可以被认为是公私钥对的存储库，发送到区块链上执行的操作需要私钥进行签名，通过将密钥本地存储在被锁定的加密存储中，钱包可以以安全的方式获得密钥来进行签名。keosd则完成了这些功能，而cleos则用来访问钱包。 账户则被认为是区块链上的一个带有访问权限控制的安全主体，nodeos则管理了区块链上账户的发布以及账户相关的action。而cleos则用来访问nodeos的账户管理功能。 账户和钱包之间没有固定的关系，nodeos和keosd之间也没有内在联系，他们的基本功能是根本不同的。Cleos有效的充当了keosd密钥检索操作和nodeos账户需要使用这些密钥进行签名的区块链操作之间的中间。 五、创建和管理钱包 进入cleos程序目录 cd /path_to_eos/build/programs/cleos 使用cleos的wallet create命令创建一个钱包 [kingnet@bctestnode3 cleos]$ ./cleos wallet create Creating wallet: default Save password to use in the future to unlock this wallet. Without password imported keys will not be retrievable. &quot;PW5KfoH51MEQ4Yqg1zaz22AdcGKAvaZipL5gtFtgggdJpcbLykLAg&quot; 这里keosd创建了一个名为default的钱包，并且返回了这个钱包的主密码，这个密码用于解锁该钱包文件。 这个钱包文件被命名为default.wallet。默认情况下，keosd将钱包存储在data-dir/eosio-wallet文件目录下，钱包数据文件目录是在启动钱包时的命令行参数--data-dir中指定的。 六、管理多个钱包 Cleos可以管理多个钱包，每个个人钱包受不同的钱包主密码保护，下面创建了另一个钱包并使用参数-n来命名它。 [kingnet@bctestnode3 cleos]$ ./cleos wallet create -n gaoyuan Creating wallet: gaoyuan Save password to use in the future to unlock this wallet. Without password imported keys will not be retrievable. &quot;PW5Js5S7YFPicSrVW6wC35xeDAwaCL63s8VPXhWkVVU3kZQNvL9u4&quot; 列出所有的钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan *&quot; ] 每个列出的钱包后面的星号(*)意味着相应的钱包是解锁状态，创建的账户默认是解锁的。 锁定一个钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet lock -n gaoyuan Locked: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan&quot; ] 使用wallet unlock来解锁钱包 [kingnet@bctestnode3 cleos]$ ./cleos wallet unlock -n gaoyuan password: Unlocked: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan *&quot; ] 如果重启了keosd，执行以下命令： [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [] 这里没有任何钱包，首先需要打开一个钱包才能进行钱包操作，包括列出钱包。关闭keosd时钱包被锁定且keosd重新启动后，钱包并未打开。 打开钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet open Opened: default [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default&quot; ] 如果wallet命令中没有使用-n指定钱包名称，则使用‘default’钱包。 [kingnet@bctestnode3 cleos]$ ./cleos wallet open -n gaoyuan Opened: gaoyuan [kingnet@bctestnode3 cleos]$ ./cleos wallet list Wallets: [ &nbsp; &quot;default&quot;, &nbsp; &quot;gaoyuan&quot; ] 打开的钱包默认是锁定的。 七、生成和导入密钥 一个空的钱包没有什么用，需要导入密钥到钱包才能使用。 生成密钥对有很多种方法，在这里介绍cleos的create key命令方法。 生成两对公私钥： [kingnet@bctestnode3 cleos]$ ./cleos create key Private key: 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK Public key: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 [kingnet@bctestnode3 cleos]$ ./cleos create key Private key: 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi Public key: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX 打开并解锁默认钱包 将以上生成的两个私钥导入钱包： [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK imported private key for: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi imported private key for: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX 检查导入的密钥对： [kingnet@bctestnode3 cleos]$ ./cleos wallet keys [[ &nbsp; &nbsp; &quot;EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;, &nbsp; &nbsp; &quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8&quot;, &nbsp; &nbsp; &quot;5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX&quot;, &nbsp; &nbsp; &quot;5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi&quot; &nbsp; ] ] 钱包文件本身被加密，因此钱包在锁定时将保护这些密钥，访问锁定的钱包中的密钥需要在创建钱包期间提供的主密码。 八、备份钱包 既然钱包包含密钥，最好经常备份钱包，钱包文件在启动keosd时命令行参数data-dir配置的文件目录下。 [kingnet@bctestnode3 cleos]$ ls -l ~/.local/share/eosio/nodeos/data/ total 16 drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 blocks -rw------- 1 kingnet users&nbsp; 567 Apr 23 10:37 default.wallet -rw------- 1 kingnet users&nbsp; 311 Apr 23 10:09 gaoyuan.wallet drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 shared_mem 九、创建账户 在区块链上执行操作需要账户，cleos通过请求nodeos在区块链上创建账户，以下命令均需要启动nodeos，同时某些命令还需要启动keosd，所以最好将nodeos和keosd同时运行起来。 目前keosd和nodeos的默认端口都为8888，我们为了更好了解nodeos和keosd的功能，我们将把keosd的端口改为8899，以下两种方法都可以做到： 1. 编辑keosd配置文件 编辑/data-dir/config/config.ini文件，将http-server-address属性修改为： http-server-address = 127.0.0.1:8899 2. 使用命令行参数 启动keosd是增加命令行参数 --http-server-address = localhost:8899 使用命令行参数启动keosd: [kingnet@bctestnode3 keosd]$ ./keosd --http-server-address=localhost:8899 136660ms thread-0&nbsp; &nbsp;wallet_plugin.cpp:41&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plugin_initialize&nbsp; &nbsp; ] initializing wallet plugin 136660ms thread-0&nbsp; &nbsp;http_plugin.cpp:141&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] host: localhost port: 8899 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:144&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] configured http to listen on localhost:8899 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:213&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] start listening for http requests 136661ms thread-0&nbsp; &nbsp;wallet_api_plugin.cpp:70&nbsp; &nbsp; &nbsp; plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting wallet_api_plugin 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/create 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/get_public_keys 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/import_key 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_keys 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_wallets 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock_all 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/open 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/set_timeout 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/sign_transaction 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/unlock keosd重新启动，钱包被锁定且没有打开，由于keosd在端口8899开始监听，因此需要使用--wallet-port命令行参数。 打开，解锁默认钱包 [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet open Opened: default [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list Wallets: [ &nbsp; &quot;default&quot;, &nbsp; &quot;gaoyuan&quot; ] [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet unlock password: Unlocked: default [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list Wallets: [ &nbsp; &quot;default *&quot;, &nbsp; &quot;gaoyuan&quot; ] 现在可以创建账户了，创建账户的命令是cleos create account，以下是命令参数结构： $ cleos create account ${authorizing_account} ${new_account} ${owner_key} ${active_key} 1.authorizing_account : 为账户创建提供资金的账户名称 2.new_account : 想要创建的新账户名称 3.owner_key : 账户owner权限的公钥 4.active_key : 账户active权限的公钥 EOSIO授权账户： 在这里创建账户时，使用EOSIO账户作为授权账户，EOSIO账户是用于引导EOSIO节点的特殊账户，而使用该EOSIO账户在区块链上执行操作必须使用与该账户关联的密钥进行签名，EOSIO账户的密钥可以在config.ini配置文件中找到。 新账户名称： 新账户名称必须符合以下规则： 必须少于13个字符 只能包含以下符号.12345abcdefghijklmnopqrstuvwxyz 账户公钥： 使用在上面生成并导入到钱包的公钥，这些公钥将被分配到某个权限，分配到owner权限的公钥对应的私钥等同于账户的完全控制权，分配到active权限的公钥对应的私钥等同于账户中资金存取权。 [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet keys&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[[ &nbsp; &nbsp; &quot;EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;, &nbsp; &nbsp; &quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8&quot;, &nbsp; &nbsp; &quot;5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK&quot; &nbsp; ],[ &nbsp; &nbsp; &quot;EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX&quot;, &nbsp; &nbsp; &quot;5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi&quot; &nbsp; ] ] [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 create account eosio myaccount2 EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX executed transaction: 49515e71f977ae273716dfdf58eb9bcd0688622f177a27b3edd0ee5fb114d630&nbsp; 352 bytes&nbsp; 102400 cycles #&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eosio &lt;= eosio::newaccount&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;creator&quot;:&quot;eosio&quot;,&quot;name&quot;:&quot;myaccount2&quot;,&quot;owner&quot;:{&quot;threshold&quot;:1,&quot;keys&quot;:[{&quot;key&quot;:&quot;EOS6rfkVfqWXVdY71JHMj3... 如果在创建账户时出现以下错误： 2639714ms thread-0&nbsp; &nbsp;main.cpp:1158&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;main&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;] Failed with error: Assert Exception (10) itr != structs.end(): Unknown struct&nbsp; Failed to serialize type 请先执行： cleos set contract eosio build/contracts/eosio.bios -p eosio 十、账户相关操作命令 cleos commang description create account 创建一个新的账户 get account 获取一个账户 get code 获取一个账户的code和ABI get accounts 获取和一个公钥关联的账户 get servants 获取一个账户的仆人账户 get transactions 获取一个特定账户名称的所有交易 set contract 在账户上创建或者更新智能合约 set account 更新账户状态 transfer 在一个账户上进行转账 阅读更多","@type":"BlogPosting","url":"https://mlh.app/2018/08/07/e8b52fcfead4a4f63745c6d055f97803.html","headline":"EOS合约开发第五章-钱包和账户手册","dateModified":"2018-08-07T00:00:00+08:00","datePublished":"2018-08-07T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mlh.app/2018/08/07/e8b52fcfead4a4f63745c6d055f97803.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-3');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>EOS合约开发第五章-钱包和账户手册</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-e2445db1a8.css"> 
 <div class="htmledit_views"> 
  <h1>钱包和账户手册</h1> 
  <h3>一、创建和启动单个节点</h3> 
  <p>使用以下命令来启动私有的单节点EOSIO：</p> 
  <p>cd build/programs/nodeos</p> 
  <p>./nodeos -e -p eosio --plugin eosio::wallet_api_plugin --plugin eosio::chain_api_plugin --plugin eosio::account_history_api_plugin&nbsp;</p> 
  <p>运行时，nodeos会输出以下的日志消息，这意味着EOSIO已经成功生产EOS区块。</p> 
  <p>2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transaction<br> 2192031ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/acco&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unt_history/get_transactions<br> 2192031ms thread-0&nbsp; &nbsp;net_plugin.cpp:2760&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting listener, ma&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x clients is 25<br> 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:161&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() begin<br> 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:166&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] Launching block produ&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ction for 1 producers.<br><br><br> *******************************<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*<br> *&nbsp; &nbsp;------ NEW CHAIN ------&nbsp; &nbsp;*<br> *&nbsp; &nbsp;-&nbsp; Welcome to EOSIO!&nbsp; -&nbsp; &nbsp;*<br> *&nbsp; &nbsp;-----------------------&nbsp; &nbsp;*<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*<br> *******************************<br><br><br> Your genesis seems to have an old timestamp<br> Please consider using the --genesis-timestamp option to give your genesis a recent timestamp<br><br><br> 2192031ms thread-0&nbsp; &nbsp;producer_plugin.cpp:176&nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] producer plugin:&nbsp; plu&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gin_startup() end<br> eosio generated block 0e03ce32... #1 @ 2018-04-23T00:36:32.500 with 0 trxs, lib: 0<br> eosio generated block 68b72661... #2 @ 2018-04-23T00:36:33.000 with 0 trxs, lib: 1<br> eosio generated block 65485d5d... #3 @ 2018-04-23T00:36:33.500 with 0 trxs, lib: 2<br> eosio generated block 4444c6a5... #4 @ 2018-04-23T00:36:34.000 with 0 trxs, lib: 3</p> 
  <p>eosio generated block 1b43b858... #5 @ 2018-04-23T00:36:34.500 with 0 trxs, lib: 4</p> 
  <p>下图描述了以上刚创建的单节点EOSIO，在上面的配置中，使用nodeos加载钱包插件来管理钱包，nodeos命令行参数中指定的eosio::wallet_api_plugin就是用来启动钱包管理的。无论是nodeos启动钱包管理还是keosd，cleos都是可用来管理钱包、管理账户和调用EOS.IO的功能。</p> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/2018052320231624"></p> 
  <h3>二、配置</h3> 
  <p>默认的配置文件夹路径如下：</p> 
  <p>mac： ~/Library/Application Support/eosio/nodeos/config<br> Linux： ~/.local/share/eosio/nodeos/config</p> 
  <p>也可以指定配置文件夹，在启动nodeos使用的命令行参数中添加--config-dir来指定nodeos使用的配置文件夹。</p> 
  <p>配置文件夹下需要有两个文件：genesis.json和config.ini。</p> 
  <p>启动nodeos后，nodeos在配置的文件夹中查找config.ini，如果找不到，则会创建一个默认的config.ini。</p> 
  <p>如果需要和上面的命令行启动一样的nodeos，则需要修改已有的默认配置文件：</p> 
  <p>&nbsp; &nbsp;# Load the testnet genesis state, which creates some initial block producers with the default key<br> &nbsp; &nbsp;genesis-json = /path/to/eos/source/genesis.json<br> &nbsp; &nbsp;# Enable production on a stale chain, since a single-node test chain is pretty much always stale<br> &nbsp; &nbsp;enable-stale-production = true<br> &nbsp; &nbsp;# Enable block production with the testnet producers<br> &nbsp; &nbsp;producer-name = eosio<br> &nbsp; &nbsp;# Load the block producer plugin, so you can produce blocks<br> &nbsp; &nbsp;plugin = eosio::producer_plugin<br> &nbsp; &nbsp;# Wallet plugin<br> &nbsp; &nbsp;plugin = eosio::wallet_api_plugin<br> &nbsp; &nbsp;# As well as API and HTTP plugins<br> &nbsp; &nbsp;plugin = eosio::chain_api_plugin<br> &nbsp; &nbsp;plugin = eosio::http_plugin<br> &nbsp; &nbsp;# This will be used by the validation step below, to view account history</p> 
  <p>&nbsp; &nbsp;plugin = eosio::account_history_api_plugin</p> 
  <p>现在可以使用以下命令运行nodeos：</p> 
  <p>build/programs/nodeos/nodeos</p> 
  <h3>三、数据和日志</h3> 
  <p>数据和日志默认的文件路径如下：</p> 
  <p>mac： ~/Library/Application Support/eosio/nodeos/data<br> Linux： ~/.local/share/eosio/nodeos/data<br> 也可以指定数据文件路劲，在启动nodeos使用的命令行参数中添加--data-dir来指定nodeos使用的数据文件路径。</p> 
  <p>nodeos将运行时数据（共享内存、日志等）存储在自定义的数据文件路径下。</p> 
  <h3>四、账户和钱包概念</h3> 
  <p>下图是EOSIO账户和钱包的概念视图：</p> 
  <p><img alt="" class="has" src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180523202630193"></p> 
  <p>&nbsp;</p> 
  <p>钱包可以被认为是公私钥对的存储库，发送到区块链上执行的操作需要私钥进行签名，通过将密钥本地存储在被锁定的加密存储中，钱包可以以安全的方式获得密钥来进行签名。keosd则完成了这些功能，而cleos则用来访问钱包。</p> 
  <p>账户则被认为是区块链上的一个带有访问权限控制的安全主体，nodeos则管理了区块链上账户的发布以及账户相关的action。而cleos则用来访问nodeos的账户管理功能。</p> 
  <p>账户和钱包之间没有固定的关系，nodeos和keosd之间也没有内在联系，他们的基本功能是根本不同的。Cleos有效的充当了keosd密钥检索操作和nodeos账户需要使用这些密钥进行签名的区块链操作之间的中间。</p> 
  <h3>五、创建和管理钱包</h3> 
  <p>进入cleos程序目录</p> 
  <p>cd /path_to_eos/build/programs/cleos<br> 使用cleos的wallet create命令创建一个钱包<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet create<br> Creating wallet: default<br> Save password to use in the future to unlock this wallet.<br> Without password imported keys will not be retrievable.</p> 
  <p>"PW5KfoH51MEQ4Yqg1zaz22AdcGKAvaZipL5gtFtgggdJpcbLykLAg"</p> 
  <p>这里keosd创建了一个名为default的钱包，并且返回了这个钱包的主密码，这个密码用于解锁该钱包文件。</p> 
  <p>这个钱包文件被命名为default.wallet。默认情况下，keosd将钱包存储在data-dir/eosio-wallet文件目录下，钱包数据文件目录是在启动钱包时的命令行参数--data-dir中指定的。</p> 
  <h3>六、管理多个钱包</h3> 
  <p>Cleos可以管理多个钱包，每个个人钱包受不同的钱包主密码保护，下面创建了另一个钱包并使用参数-n来命名它。<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet create -n gaoyuan<br> Creating wallet: gaoyuan<br> Save password to use in the future to unlock this wallet.<br> Without password imported keys will not be retrievable.<br> "PW5Js5S7YFPicSrVW6wC35xeDAwaCL63s8VPXhWkVVU3kZQNvL9u4"<br> 列出所有的钱包：<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet list<br> Wallets:<br> [<br> &nbsp; "default *",<br> &nbsp; "gaoyuan *"<br> ]<br> 每个列出的钱包后面的星号(*)意味着相应的钱包是解锁状态，创建的账户默认是解锁的。<br> 锁定一个钱包：<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet lock -n gaoyuan<br> Locked: gaoyuan<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet list<br> Wallets:<br> [<br> &nbsp; "default *",<br> &nbsp; "gaoyuan"<br> ]<br> 使用wallet unlock来解锁钱包<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet unlock -n gaoyuan<br> password: Unlocked: gaoyuan<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet list<br> Wallets:<br> [<br> &nbsp; "default *",<br> &nbsp; "gaoyuan *"<br> ]<br> 如果重启了keosd，执行以下命令：<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet list<br> Wallets:<br> []<br> 这里没有任何钱包，首先需要打开一个钱包才能进行钱包操作，包括列出钱包。关闭keosd时钱包被锁定且keosd重新启动后，钱包并未打开。<br> 打开钱包：<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet open<br> Opened: default<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet list<br> Wallets:<br> [<br> &nbsp; "default"<br> ]<br> 如果wallet命令中没有使用-n指定钱包名称，则使用‘default’钱包。<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet open -n gaoyuan<br> Opened: gaoyuan<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet list<br> Wallets:<br> [<br> &nbsp; "default",<br> &nbsp; "gaoyuan"<br> ]</p> 
  <p>打开的钱包默认是锁定的。</p> 
  <h3>七、生成和导入密钥</h3> 
  <p>一个空的钱包没有什么用，需要导入密钥到钱包才能使用。<br> 生成密钥对有很多种方法，在这里介绍cleos的create key命令方法。<br> 生成两对公私钥：<br> [kingnet@bctestnode3 cleos]$ ./cleos create key<br> Private key: 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK<br> Public key: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8<br> [kingnet@bctestnode3 cleos]$ ./cleos create key<br> Private key: 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi<br> Public key: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX<br> 打开并解锁默认钱包<br> 将以上生成的两个私钥导入钱包：<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK<br> imported private key for: EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet import 5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi<br> imported private key for: EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX<br> 检查导入的密钥对：<br> [kingnet@bctestnode3 cleos]$ ./cleos wallet keys<br> [[<br> &nbsp; &nbsp; "EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV",<br> &nbsp; &nbsp; "5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3"<br> &nbsp; ],[<br> &nbsp; &nbsp; "EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8",<br> &nbsp; &nbsp; "5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK"<br> &nbsp; ],[<br> &nbsp; &nbsp; "EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX",<br> &nbsp; &nbsp; "5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi"<br> &nbsp; ]<br> ]</p> 
  <p>钱包文件本身被加密，因此钱包在锁定时将保护这些密钥，访问锁定的钱包中的密钥需要在创建钱包期间提供的主密码。</p> 
  <h3>八、备份钱包</h3> 
  <p>既然钱包包含密钥，最好经常备份钱包，钱包文件在启动keosd时命令行参数data-dir配置的文件目录下。</p> 
  <p>[kingnet@bctestnode3 cleos]$ ls -l ~/.local/share/eosio/nodeos/data/<br> total 16<br> drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 blocks<br> -rw------- 1 kingnet users&nbsp; 567 Apr 23 10:37 default.wallet<br> -rw------- 1 kingnet users&nbsp; 311 Apr 23 10:09 gaoyuan.wallet</p> 
  <p>drwxr-xr-x 2 kingnet users 4096 Apr 23 08:36 shared_mem</p> 
  <h3>九、创建账户</h3> 
  <p>在区块链上执行操作需要账户，cleos通过请求nodeos在区块链上创建账户，以下命令均需要启动nodeos，同时某些命令还需要启动keosd，所以最好将nodeos和keosd同时运行起来。<br> 目前keosd和nodeos的默认端口都为8888，我们为了更好了解nodeos和keosd的功能，我们将把keosd的端口改为8899，以下两种方法都可以做到：<br> 1. 编辑keosd配置文件<br> 编辑/data-dir/config/config.ini文件，将http-server-address属性修改为：<br> http-server-address = 127.0.0.1:8899<br> 2. 使用命令行参数<br> 启动keosd是增加命令行参数 --http-server-address = localhost:8899<br> 使用命令行参数启动keosd:<br> [kingnet@bctestnode3 keosd]$ ./keosd --http-server-address=localhost:8899<br> 136660ms thread-0&nbsp; &nbsp;wallet_plugin.cpp:41&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plugin_initialize&nbsp; &nbsp; ] initializing wallet plugin<br> 136660ms thread-0&nbsp; &nbsp;http_plugin.cpp:141&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] host: localhost port: 8899<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:144&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_initialize&nbsp; &nbsp; ] configured http to listen on localhost:8899<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:213&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] start listening for http requests<br> 136661ms thread-0&nbsp; &nbsp;wallet_api_plugin.cpp:70&nbsp; &nbsp; &nbsp; plugin_startup&nbsp; &nbsp; &nbsp; &nbsp;] starting wallet_api_plugin<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/create<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/get_public_keys<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/import_key<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_keys<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/list_wallets<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/lock_all<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/open<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/set_timeout<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/sign_transaction<br> 136661ms thread-0&nbsp; &nbsp;http_plugin.cpp:242&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add_handler&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ] add api url: /v1/wallet/unlock<br> keosd重新启动，钱包被锁定且没有打开，由于keosd在端口8899开始监听，因此需要使用--wallet-port命令行参数。<br> 打开，解锁默认钱包<br> [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet open<br> Opened: default<br> [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list<br> Wallets:<br> [<br> &nbsp; "default",<br> &nbsp; "gaoyuan"<br> ]<br> [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet unlock<br> password: Unlocked: default<br> [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet list<br> Wallets:<br> [<br> &nbsp; "default *",<br> &nbsp; "gaoyuan"<br> ]<br> 现在可以创建账户了，创建账户的命令是cleos create account，以下是命令参数结构：<br> $ cleos create account ${authorizing_account} ${new_account} ${owner_key} ${active_key}<br> 1.authorizing_account : 为账户创建提供资金的账户名称<br> 2.new_account : 想要创建的新账户名称<br> 3.owner_key : 账户owner权限的公钥<br> 4.active_key : 账户active权限的公钥<br> EOSIO授权账户：<br> 在这里创建账户时，使用EOSIO账户作为授权账户，EOSIO账户是用于引导EOSIO节点的特殊账户，而使用该EOSIO账户在区块链上执行操作必须使用与该账户关联的密钥进行签名，EOSIO账户的密钥可以在config.ini配置文件中找到。<br> 新账户名称：<br> 新账户名称必须符合以下规则：<br> 必须少于13个字符<br> 只能包含以下符号.12345abcdefghijklmnopqrstuvwxyz<br> 账户公钥：<br> 使用在上面生成并导入到钱包的公钥，这些公钥将被分配到某个权限，分配到owner权限的公钥对应的私钥等同于账户的完全控制权，分配到active权限的公钥对应的私钥等同于账户中资金存取权。<br> [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 wallet keys&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[[<br> &nbsp; &nbsp; "EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV",<br> &nbsp; &nbsp; "5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3"<br> &nbsp; ],[<br> &nbsp; &nbsp; "EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8",<br> &nbsp; &nbsp; "5Hpc9t34wXN3uE5Yi8ofMR7jNRJVVLQqpSYHxZ2QUq1purCP1UK"<br> &nbsp; ],[<br> &nbsp; &nbsp; "EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX",<br> &nbsp; &nbsp; "5JVNBoNPMwePkinqh6ABBrhamqfVtopFaVZJBjQCCqsnL5MqkBi"<br> &nbsp; ]<br> ]<br> [kingnet@bctestnode3 cleos]$ ./cleos --wallet-port=8899 create account eosio myaccount2 EOS6rfkVfqWXVdY71JHMj3bquv6sri5gd5aqgjiUU4EPnha96yWU8 EOS75r6BFqZ6gwgsjQgJfdyGGVYqdNfaiUtjJtmRXXL4h4KhxvqkX<br> executed transaction: 49515e71f977ae273716dfdf58eb9bcd0688622f177a27b3edd0ee5fb114d630&nbsp; 352 bytes&nbsp; 102400 cycles<br> #&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eosio &lt;= eosio::newaccount&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {"creator":"eosio","name":"myaccount2","owner":{"threshold":1,"keys":[{"key":"EOS6rfkVfqWXVdY71JHMj3...<br> 如果在创建账户时出现以下错误：<br> 2639714ms thread-0&nbsp; &nbsp;main.cpp:1158&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;main&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;] Failed with error: Assert Exception (10)<br> itr != structs.end(): Unknown struct&nbsp;<br> Failed to serialize type<br> 请先执行：</p> 
  <p>cleos set contract eosio build/contracts/eosio.bios -p eosio</p> 
  <h3>十、账户相关操作命令</h3> 
  <table border="1" cellpadding="1" cellspacing="1" style="width:200px;">
   <tbody>
    <tr>
     <td> <p>cleos commang</p> </td> 
     <td> <p>description</p> </td> 
    </tr>
    <tr>
     <td> <p>create account</p> </td> 
     <td> <p>创建一个新的账户</p> </td> 
    </tr>
    <tr>
     <td> <p>get account</p> </td> 
     <td> <p>获取一个账户</p> </td> 
    </tr>
    <tr>
     <td> <p>get code</p> </td> 
     <td> <p>获取一个账户的code和ABI</p> </td> 
    </tr>
    <tr>
     <td> <p>get accounts</p> </td> 
     <td> <p>获取和一个公钥关联的账户</p> </td> 
    </tr>
    <tr>
     <td> <p>get servants</p> </td> 
     <td> <p>获取一个账户的仆人账户</p> </td> 
    </tr>
    <tr>
     <td> <p>get transactions</p> </td> 
     <td> <p>获取一个特定账户名称的所有交易</p> </td> 
    </tr>
    <tr>
     <td> <p>set contract</p> </td> 
     <td> <p>在账户上创建或者更新智能合约</p> </td> 
    </tr>
    <tr>
     <td> <p>set account</p> </td> 
     <td> <p>更新账户状态</p> </td> 
    </tr>
    <tr>
     <td> <p>transfer</p> </td> 
     <td> <p>在一个账户上进行转账</p> </td> 
    </tr>
   </tbody>
  </table> 
 </div> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/bedrock_stable/article/details/80425504,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/bedrock_stable/article/details/80425504,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0d1dbe5a3e5863242418b768d1601633";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
