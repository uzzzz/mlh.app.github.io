<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>EOS智能合约开发（十一）EOSIO的RAM市场与Bancor算法 | 有组织在！</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="EOS智能合约开发（十一）EOSIO的RAM市场与Bancor算法" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="北京时间 7 月 5 日 0 时，BM 在 Medium 上发表一篇名为《EOSIO RAM Market &amp; Bancor Algorithm》谈论 RAM 市场和 Bancor 算法，并提到 Block.one 已经创建了一个对系统合约的建议更新。以下中文内容由 IMEOS 猫片编译，转载需注明出处。BM 原文见：https://medium.com/@bytemaster/eosio-ram-market-bancor-algorithm-b8e8d4e20c73 原文翻译 EOSIO 区块链软件使得社区能够配置所有全节点所预期拥有的 RAM （随机存取存储器） 数量，以获得最高性能。存储密钥、账户余额、合约状态等账户信息时都需要 RAM。由于单个计算机可用的 RAM 数量受到摩尔定律和其他技术进步的限制，RAM 从根本上说是稀缺的。 EOSIO 采用自由市场的方法，让稀缺资源达到最佳分配。为了促进这个市场，eosio 系统合约允许用户从系统购买 RAM，也可以将 RAM 卖回给系统以换取该区块链原生代币（比如EOS）。这样做不仅调动了RAM 市场的流动性，也推进了价格发现（在近似完全竞争市场的机制条件下，由市场来决定价格）。未分配的可用 RAM 越少，则报价商对剩余 RAM 报价就越高。被用于这个报价商的算法叫做 Bancor Relay。 Bancor Relay 不设定 RAM 的价格。它只提供以先前确定的市场价格进行买卖。任何时候当前的市场价格都不同于 Bancor Relay 提供的当前价格，交易者通过会买入或卖出RAM，以推动它接近市场决定的价格。 eosio 系统合约使用过去出售 RAM 给社区的收益，为那些希望将 RAM 回售给系统的人提供流动性。以 EOS 社区为例：撰写本文时 eosio.ram 账户的余额有 440 万 EOS（约合 4 000 万美金）。这 440 万 EOS 为这 52GB 的 RAM（以当前市场价计算达 2500 万 EOS, 合约 2.7 亿美金）提供流动性。显而易见的是，当做市商仅持有价值低于 RAM 市值的 20％ 的 EOS 时，是无法控制 RAM 的价值。 RAM 是一个商品 虽然 RAM 可以买卖，但它不能在用户之间交易。此外，与传统加密货币维持人为稀缺性的社会共识不同，RAM 的供给或许会根据社区需求以及技术进步而在一夜间增加。为了使那些需要便宜的 RAM 来构建应用程序的开发者和用户受益，RAM 的供给由选民把握。昂贵的 RAM 会造成区块链在许多商业模式中是不适用的。 eosio 系统合约代表对价格体系投票的 EOS 持币者在自然而然地运行。作为 RAM 的持有者，你唯一有权在区块链中拥有的是合约中的存储空间。除了在你决定出售 RAM 时社区愿意通过 eosio 系统合约向你购买之外，你无权享受任何特定的回购价格。由于 RAM 受技术限制，eosio 系统合约通常会以市场价格购买或出售 RAM。再次强调，合约不设定市场价格。市场价格由通过系统合约交互以进行买卖的人设定。 Bancor Relay 波动 Bancor Relay 设置了一些参数，来影响价格响应 RAM 买卖请求的波动速度。这有效地决定了订单的形态，以及当大宗买卖发生时，人们能够看到的滑移程度。 由于在 EOS 区块链上对 Bancor Relay 权重无意的配置，此参数设置为 0.05％ 而不是 50％。这使大宗数量买卖时引动了重大滑移，导致波动超出预期。 我们建议将此参数更新为 50% 预期值。这一变化的直接影响将是暂时降低做市商提供的现货价格。市场参与者将能够与做市商互动，将其推向市场价值。请记住，在新旧价值观下，价格正在由自由市场决定，做市商只不过是在做出反应。这意味着更改参数可能会创建买入或卖出机会，直到价格恢复到市场价值。 随着自由市场推进 Relay 回到由市场价值定价的 RAM，在大量购买和销售时，用户将体验到更少的滑移。减少滑移和波动性为 RAM 的投机者和用户提供了更可预见和稳定的市场。 通过扩容降低成本 自从比特币问世以来，区块链一直在致力于扩容。最近 EOS RAM 市场的价格暴涨表明，以当前的供应量来说市场认为 每 KB RAM 价值为 4 美元。这是一个强有力的市场信号：提供更多的 RAM 将是非常有价值的。 DApp 开发者在构建他们的系统时面临两项成本。 与区块链交互的成本 承载一个全节点的成本 保持 RAM 稀缺（64 GB）可以降低承载一个全节点的成本，但会增加与区块链交互的成本。那么，以今天的 RAM 价格计算，部署典型的智能合约（使用 10MB 内存）的花费约 40,000 美元。试图构建社交媒体平台的开发者可能希望至少托管一个他们自己的全节点。对于他们来说，在具有足够 RAM 的高端硬件上花费 39,000 美元，在存储他们合约的 RAM 上花费1,000 美元是“收支平衡”。 每台服务器每 GB 内存的价格约为 11 美元，而 EOS RAM 市场给 RAM 的定价在每 GB 4,000,000 美元。这表明整个网络可以为超过 300,000 台服务器以相同的价格购买真正的内存，而投机者正在对 EOS 链上有限的 64 GB RAM 竞标进行分配。 整个网络可以保持着重要的去中心化的同时提高全节点的成本。基于对 DApp 开发人员的服务器成本与链上成本的分析，很明显，对于整个网络的用户来说，大幅增加链上的 RAM 和提高全节点成本是一个更加划算的方案。 基于此分析，在将大型合约部署到链上的成本比运行全节点更便宜之前，提高全节点的成本似乎是合理的。 虚拟内存 在20年前，128 MB 的内存都是相当的多了，大多数的电脑都依赖于虚拟内存来支持更多的应用，虚拟内存在没有被使用时会将 RAM 内容交换到磁盘，在 RAM 压力下，这可能会大大减慢计算机运行速度。对我们来说幸运的是，SSD 技术大大缩小了 RAM 和磁盘性能之间的差距。此外，很大比例的 RAM 很少被用于和/或完全用于投机目的。 非出块的全节点应该可以依赖虚拟内存来降低成本，而且网络的绝大部分 CPU 容量未得到充分利用，因此有机会以 CPU 时间来换取 RAM。 新兴的非易失性存储（NVM）技术 现代操作系统还支持 RAM 压缩，可在空闲内核上交换 CPU 周期以获得更多空间。 解压缩 RAM 实际上比从磁盘加载 RAM 更快，压缩、磁盘分页和现代超低延迟磁盘的组合意味着区块链社区可以在最大 TPS 和 RAM 之间进行权衡。毕竟，如果它们可以做到 10 亿TPS，却被仅限于 8MB 的 L3 缓存，那就没有任何的用处。所有区块链必须在内存使用、吞吐量、全节点的成本和稀缺资源需求之间进行市场权衡。 RAM 市场的透明度 为了让 RAM 投机者在当前与未来对稀缺资源的需求中尽一份力，他们需要对 RAM 供应增长进行可靠的预测，突然供应 RAM 和不可预测的增加可能导致他们赔钱和/或远离市场，这将导致资源分配效率降低。 突然增加 RAM 供应代表了系统合约对新供应的低效分配，并且从市场中获取的代币会少于慢慢增加供应而获取的代币，获取代币效率的降低带来的是做市商的收入损失，以及由资金不足的做市商引起的长期波动性的增加。 因此，Block.one 已经创建了一个对系统合约的建议更新：https://github.com/EOSIO/eosio.contracts/pull/2 该更新中将向 RAM 供应添加固定数量的每区块字节数。被选举出来的出块节点可以设定可持续的增长率而不是瞬时增长率，由于增加 RAM 供应是出块节点的职权范围，我个人的角度认为，目前并不需要选民投票来使他们当天就能手动完成的工作自动化。 总结 RAM 旨在为开发人员所使用，他们希望构建真实的东西，让每个人的生活变得更好。自由市场和区块链社区将结合多种方法去降低部署和使用大规模 DApp 的总成本。RAM 并非制定成人为造成稀缺的样子，整个市场正在研究如何随着时间的推移稳定增加 RAM 和 TPS。 阅读更多" />
<meta property="og:description" content="北京时间 7 月 5 日 0 时，BM 在 Medium 上发表一篇名为《EOSIO RAM Market &amp; Bancor Algorithm》谈论 RAM 市场和 Bancor 算法，并提到 Block.one 已经创建了一个对系统合约的建议更新。以下中文内容由 IMEOS 猫片编译，转载需注明出处。BM 原文见：https://medium.com/@bytemaster/eosio-ram-market-bancor-algorithm-b8e8d4e20c73 原文翻译 EOSIO 区块链软件使得社区能够配置所有全节点所预期拥有的 RAM （随机存取存储器） 数量，以获得最高性能。存储密钥、账户余额、合约状态等账户信息时都需要 RAM。由于单个计算机可用的 RAM 数量受到摩尔定律和其他技术进步的限制，RAM 从根本上说是稀缺的。 EOSIO 采用自由市场的方法，让稀缺资源达到最佳分配。为了促进这个市场，eosio 系统合约允许用户从系统购买 RAM，也可以将 RAM 卖回给系统以换取该区块链原生代币（比如EOS）。这样做不仅调动了RAM 市场的流动性，也推进了价格发现（在近似完全竞争市场的机制条件下，由市场来决定价格）。未分配的可用 RAM 越少，则报价商对剩余 RAM 报价就越高。被用于这个报价商的算法叫做 Bancor Relay。 Bancor Relay 不设定 RAM 的价格。它只提供以先前确定的市场价格进行买卖。任何时候当前的市场价格都不同于 Bancor Relay 提供的当前价格，交易者通过会买入或卖出RAM，以推动它接近市场决定的价格。 eosio 系统合约使用过去出售 RAM 给社区的收益，为那些希望将 RAM 回售给系统的人提供流动性。以 EOS 社区为例：撰写本文时 eosio.ram 账户的余额有 440 万 EOS（约合 4 000 万美金）。这 440 万 EOS 为这 52GB 的 RAM（以当前市场价计算达 2500 万 EOS, 合约 2.7 亿美金）提供流动性。显而易见的是，当做市商仅持有价值低于 RAM 市值的 20％ 的 EOS 时，是无法控制 RAM 的价值。 RAM 是一个商品 虽然 RAM 可以买卖，但它不能在用户之间交易。此外，与传统加密货币维持人为稀缺性的社会共识不同，RAM 的供给或许会根据社区需求以及技术进步而在一夜间增加。为了使那些需要便宜的 RAM 来构建应用程序的开发者和用户受益，RAM 的供给由选民把握。昂贵的 RAM 会造成区块链在许多商业模式中是不适用的。 eosio 系统合约代表对价格体系投票的 EOS 持币者在自然而然地运行。作为 RAM 的持有者，你唯一有权在区块链中拥有的是合约中的存储空间。除了在你决定出售 RAM 时社区愿意通过 eosio 系统合约向你购买之外，你无权享受任何特定的回购价格。由于 RAM 受技术限制，eosio 系统合约通常会以市场价格购买或出售 RAM。再次强调，合约不设定市场价格。市场价格由通过系统合约交互以进行买卖的人设定。 Bancor Relay 波动 Bancor Relay 设置了一些参数，来影响价格响应 RAM 买卖请求的波动速度。这有效地决定了订单的形态，以及当大宗买卖发生时，人们能够看到的滑移程度。 由于在 EOS 区块链上对 Bancor Relay 权重无意的配置，此参数设置为 0.05％ 而不是 50％。这使大宗数量买卖时引动了重大滑移，导致波动超出预期。 我们建议将此参数更新为 50% 预期值。这一变化的直接影响将是暂时降低做市商提供的现货价格。市场参与者将能够与做市商互动，将其推向市场价值。请记住，在新旧价值观下，价格正在由自由市场决定，做市商只不过是在做出反应。这意味着更改参数可能会创建买入或卖出机会，直到价格恢复到市场价值。 随着自由市场推进 Relay 回到由市场价值定价的 RAM，在大量购买和销售时，用户将体验到更少的滑移。减少滑移和波动性为 RAM 的投机者和用户提供了更可预见和稳定的市场。 通过扩容降低成本 自从比特币问世以来，区块链一直在致力于扩容。最近 EOS RAM 市场的价格暴涨表明，以当前的供应量来说市场认为 每 KB RAM 价值为 4 美元。这是一个强有力的市场信号：提供更多的 RAM 将是非常有价值的。 DApp 开发者在构建他们的系统时面临两项成本。 与区块链交互的成本 承载一个全节点的成本 保持 RAM 稀缺（64 GB）可以降低承载一个全节点的成本，但会增加与区块链交互的成本。那么，以今天的 RAM 价格计算，部署典型的智能合约（使用 10MB 内存）的花费约 40,000 美元。试图构建社交媒体平台的开发者可能希望至少托管一个他们自己的全节点。对于他们来说，在具有足够 RAM 的高端硬件上花费 39,000 美元，在存储他们合约的 RAM 上花费1,000 美元是“收支平衡”。 每台服务器每 GB 内存的价格约为 11 美元，而 EOS RAM 市场给 RAM 的定价在每 GB 4,000,000 美元。这表明整个网络可以为超过 300,000 台服务器以相同的价格购买真正的内存，而投机者正在对 EOS 链上有限的 64 GB RAM 竞标进行分配。 整个网络可以保持着重要的去中心化的同时提高全节点的成本。基于对 DApp 开发人员的服务器成本与链上成本的分析，很明显，对于整个网络的用户来说，大幅增加链上的 RAM 和提高全节点成本是一个更加划算的方案。 基于此分析，在将大型合约部署到链上的成本比运行全节点更便宜之前，提高全节点的成本似乎是合理的。 虚拟内存 在20年前，128 MB 的内存都是相当的多了，大多数的电脑都依赖于虚拟内存来支持更多的应用，虚拟内存在没有被使用时会将 RAM 内容交换到磁盘，在 RAM 压力下，这可能会大大减慢计算机运行速度。对我们来说幸运的是，SSD 技术大大缩小了 RAM 和磁盘性能之间的差距。此外，很大比例的 RAM 很少被用于和/或完全用于投机目的。 非出块的全节点应该可以依赖虚拟内存来降低成本，而且网络的绝大部分 CPU 容量未得到充分利用，因此有机会以 CPU 时间来换取 RAM。 新兴的非易失性存储（NVM）技术 现代操作系统还支持 RAM 压缩，可在空闲内核上交换 CPU 周期以获得更多空间。 解压缩 RAM 实际上比从磁盘加载 RAM 更快，压缩、磁盘分页和现代超低延迟磁盘的组合意味着区块链社区可以在最大 TPS 和 RAM 之间进行权衡。毕竟，如果它们可以做到 10 亿TPS，却被仅限于 8MB 的 L3 缓存，那就没有任何的用处。所有区块链必须在内存使用、吞吐量、全节点的成本和稀缺资源需求之间进行市场权衡。 RAM 市场的透明度 为了让 RAM 投机者在当前与未来对稀缺资源的需求中尽一份力，他们需要对 RAM 供应增长进行可靠的预测，突然供应 RAM 和不可预测的增加可能导致他们赔钱和/或远离市场，这将导致资源分配效率降低。 突然增加 RAM 供应代表了系统合约对新供应的低效分配，并且从市场中获取的代币会少于慢慢增加供应而获取的代币，获取代币效率的降低带来的是做市商的收入损失，以及由资金不足的做市商引起的长期波动性的增加。 因此，Block.one 已经创建了一个对系统合约的建议更新：https://github.com/EOSIO/eosio.contracts/pull/2 该更新中将向 RAM 供应添加固定数量的每区块字节数。被选举出来的出块节点可以设定可持续的增长率而不是瞬时增长率，由于增加 RAM 供应是出块节点的职权范围，我个人的角度认为，目前并不需要选民投票来使他们当天就能手动完成的工作自动化。 总结 RAM 旨在为开发人员所使用，他们希望构建真实的东西，让每个人的生活变得更好。自由市场和区块链社区将结合多种方法去降低部署和使用大规模 DApp 的总成本。RAM 并非制定成人为造成稀缺的样子，整个市场正在研究如何随着时间的推移稳定增加 RAM 和 TPS。 阅读更多" />
<meta property="og:site_name" content="有组织在！" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-02T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"北京时间 7 月 5 日 0 时，BM 在 Medium 上发表一篇名为《EOSIO RAM Market &amp; Bancor Algorithm》谈论 RAM 市场和 Bancor 算法，并提到 Block.one 已经创建了一个对系统合约的建议更新。以下中文内容由 IMEOS 猫片编译，转载需注明出处。BM 原文见：https://medium.com/@bytemaster/eosio-ram-market-bancor-algorithm-b8e8d4e20c73 原文翻译 EOSIO 区块链软件使得社区能够配置所有全节点所预期拥有的 RAM （随机存取存储器） 数量，以获得最高性能。存储密钥、账户余额、合约状态等账户信息时都需要 RAM。由于单个计算机可用的 RAM 数量受到摩尔定律和其他技术进步的限制，RAM 从根本上说是稀缺的。 EOSIO 采用自由市场的方法，让稀缺资源达到最佳分配。为了促进这个市场，eosio 系统合约允许用户从系统购买 RAM，也可以将 RAM 卖回给系统以换取该区块链原生代币（比如EOS）。这样做不仅调动了RAM 市场的流动性，也推进了价格发现（在近似完全竞争市场的机制条件下，由市场来决定价格）。未分配的可用 RAM 越少，则报价商对剩余 RAM 报价就越高。被用于这个报价商的算法叫做 Bancor Relay。 Bancor Relay 不设定 RAM 的价格。它只提供以先前确定的市场价格进行买卖。任何时候当前的市场价格都不同于 Bancor Relay 提供的当前价格，交易者通过会买入或卖出RAM，以推动它接近市场决定的价格。 eosio 系统合约使用过去出售 RAM 给社区的收益，为那些希望将 RAM 回售给系统的人提供流动性。以 EOS 社区为例：撰写本文时 eosio.ram 账户的余额有 440 万 EOS（约合 4 000 万美金）。这 440 万 EOS 为这 52GB 的 RAM（以当前市场价计算达 2500 万 EOS, 合约 2.7 亿美金）提供流动性。显而易见的是，当做市商仅持有价值低于 RAM 市值的 20％ 的 EOS 时，是无法控制 RAM 的价值。 RAM 是一个商品 虽然 RAM 可以买卖，但它不能在用户之间交易。此外，与传统加密货币维持人为稀缺性的社会共识不同，RAM 的供给或许会根据社区需求以及技术进步而在一夜间增加。为了使那些需要便宜的 RAM 来构建应用程序的开发者和用户受益，RAM 的供给由选民把握。昂贵的 RAM 会造成区块链在许多商业模式中是不适用的。 eosio 系统合约代表对价格体系投票的 EOS 持币者在自然而然地运行。作为 RAM 的持有者，你唯一有权在区块链中拥有的是合约中的存储空间。除了在你决定出售 RAM 时社区愿意通过 eosio 系统合约向你购买之外，你无权享受任何特定的回购价格。由于 RAM 受技术限制，eosio 系统合约通常会以市场价格购买或出售 RAM。再次强调，合约不设定市场价格。市场价格由通过系统合约交互以进行买卖的人设定。 Bancor Relay 波动 Bancor Relay 设置了一些参数，来影响价格响应 RAM 买卖请求的波动速度。这有效地决定了订单的形态，以及当大宗买卖发生时，人们能够看到的滑移程度。 由于在 EOS 区块链上对 Bancor Relay 权重无意的配置，此参数设置为 0.05％ 而不是 50％。这使大宗数量买卖时引动了重大滑移，导致波动超出预期。 我们建议将此参数更新为 50% 预期值。这一变化的直接影响将是暂时降低做市商提供的现货价格。市场参与者将能够与做市商互动，将其推向市场价值。请记住，在新旧价值观下，价格正在由自由市场决定，做市商只不过是在做出反应。这意味着更改参数可能会创建买入或卖出机会，直到价格恢复到市场价值。 随着自由市场推进 Relay 回到由市场价值定价的 RAM，在大量购买和销售时，用户将体验到更少的滑移。减少滑移和波动性为 RAM 的投机者和用户提供了更可预见和稳定的市场。 通过扩容降低成本 自从比特币问世以来，区块链一直在致力于扩容。最近 EOS RAM 市场的价格暴涨表明，以当前的供应量来说市场认为 每 KB RAM 价值为 4 美元。这是一个强有力的市场信号：提供更多的 RAM 将是非常有价值的。 DApp 开发者在构建他们的系统时面临两项成本。 与区块链交互的成本 承载一个全节点的成本 保持 RAM 稀缺（64 GB）可以降低承载一个全节点的成本，但会增加与区块链交互的成本。那么，以今天的 RAM 价格计算，部署典型的智能合约（使用 10MB 内存）的花费约 40,000 美元。试图构建社交媒体平台的开发者可能希望至少托管一个他们自己的全节点。对于他们来说，在具有足够 RAM 的高端硬件上花费 39,000 美元，在存储他们合约的 RAM 上花费1,000 美元是“收支平衡”。 每台服务器每 GB 内存的价格约为 11 美元，而 EOS RAM 市场给 RAM 的定价在每 GB 4,000,000 美元。这表明整个网络可以为超过 300,000 台服务器以相同的价格购买真正的内存，而投机者正在对 EOS 链上有限的 64 GB RAM 竞标进行分配。 整个网络可以保持着重要的去中心化的同时提高全节点的成本。基于对 DApp 开发人员的服务器成本与链上成本的分析，很明显，对于整个网络的用户来说，大幅增加链上的 RAM 和提高全节点成本是一个更加划算的方案。 基于此分析，在将大型合约部署到链上的成本比运行全节点更便宜之前，提高全节点的成本似乎是合理的。 虚拟内存 在20年前，128 MB 的内存都是相当的多了，大多数的电脑都依赖于虚拟内存来支持更多的应用，虚拟内存在没有被使用时会将 RAM 内容交换到磁盘，在 RAM 压力下，这可能会大大减慢计算机运行速度。对我们来说幸运的是，SSD 技术大大缩小了 RAM 和磁盘性能之间的差距。此外，很大比例的 RAM 很少被用于和/或完全用于投机目的。 非出块的全节点应该可以依赖虚拟内存来降低成本，而且网络的绝大部分 CPU 容量未得到充分利用，因此有机会以 CPU 时间来换取 RAM。 新兴的非易失性存储（NVM）技术 现代操作系统还支持 RAM 压缩，可在空闲内核上交换 CPU 周期以获得更多空间。 解压缩 RAM 实际上比从磁盘加载 RAM 更快，压缩、磁盘分页和现代超低延迟磁盘的组合意味着区块链社区可以在最大 TPS 和 RAM 之间进行权衡。毕竟，如果它们可以做到 10 亿TPS，却被仅限于 8MB 的 L3 缓存，那就没有任何的用处。所有区块链必须在内存使用、吞吐量、全节点的成本和稀缺资源需求之间进行市场权衡。 RAM 市场的透明度 为了让 RAM 投机者在当前与未来对稀缺资源的需求中尽一份力，他们需要对 RAM 供应增长进行可靠的预测，突然供应 RAM 和不可预测的增加可能导致他们赔钱和/或远离市场，这将导致资源分配效率降低。 突然增加 RAM 供应代表了系统合约对新供应的低效分配，并且从市场中获取的代币会少于慢慢增加供应而获取的代币，获取代币效率的降低带来的是做市商的收入损失，以及由资金不足的做市商引起的长期波动性的增加。 因此，Block.one 已经创建了一个对系统合约的建议更新：https://github.com/EOSIO/eosio.contracts/pull/2 该更新中将向 RAM 供应添加固定数量的每区块字节数。被选举出来的出块节点可以设定可持续的增长率而不是瞬时增长率，由于增加 RAM 供应是出块节点的职权范围，我个人的角度认为，目前并不需要选民投票来使他们当天就能手动完成的工作自动化。 总结 RAM 旨在为开发人员所使用，他们希望构建真实的东西，让每个人的生活变得更好。自由市场和区块链社区将结合多种方法去降低部署和使用大规模 DApp 的总成本。RAM 并非制定成人为造成稀缺的样子，整个市场正在研究如何随着时间的推移稳定增加 RAM 和 TPS。 阅读更多","@type":"BlogPosting","url":"/2018/08/02/0c3c9195ac6304575476224cafd1dfd6.html","headline":"EOS智能合约开发（十一）EOSIO的RAM市场与Bancor算法","dateModified":"2018-08-02T00:00:00+08:00","datePublished":"2018-08-02T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"/2018/08/02/0c3c9195ac6304575476224cafd1dfd6.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123344652-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123344652-1');
    </script>
    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8889449066804352",
        enable_page_level_ads: true
      });
    </script>
    
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    
    <style>
      @media screen and (max-width:760px){
        .sm-hidden{display:none; }
      }
    </style>

  </head>
  <body>
    
        <amp-auto-ads type="adsense"
              data-ad-client="ca-pub-8889449066804352">
        </amp-auto-ads>
    
    <div class="wrapper">
      <header  class="without-description" >
        <h1>EOS智能合约开发（十一）EOSIO的RAM市场与Bancor算法</h1>
        
        
        <ul>
            <li><a href="https://uzshare.com/" style="line-height: unset;" target="_blank"><strong>柚子社区</strong></a></li>
        </ul>
        
        
        
      </header>
      <section>

<div style="margin:0 0 8px 0;">
<style>
table.gsc-input {
    margin: 0;
}
.cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
    width: auto;
}
.gsc-search-box td {
    border-bottom: none;
}
</style>
<script>
  (function() {
    var cx = '004431708863642777669:qan2_6ugotw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
</div>
	

        <div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post"> 
 <div class="markdown_views"> 
  <p>北京时间 7 月 5 日 0 时，BM 在 Medium 上发表一篇名为《EOSIO RAM Market &amp; Bancor Algorithm》谈论 RAM 市场和 Bancor 算法，并提到 Block.one 已经创建了一个对系统合约的建议更新。以下中文内容由 IMEOS 猫片编译，转载需注明出处。BM 原文见：<a href="https://medium.com/@bytemaster/eosio-ram-market-bancor-algorithm-b8e8d4e20c73" rel="nofollow">https://medium.com/@bytemaster/eosio-ram-market-bancor-algorithm-b8e8d4e20c73</a> <br> 原文翻译</p> 
  <p>EOSIO 区块链软件使得社区能够配置所有全节点所预期拥有的 RAM （随机存取存储器） 数量，以获得最高性能。存储密钥、账户余额、合约状态等账户信息时都需要 RAM。由于单个计算机可用的 RAM 数量受到摩尔定律和其他技术进步的限制，RAM 从根本上说是稀缺的。</p> 
  <p>EOSIO 采用自由市场的方法，让稀缺资源达到最佳分配。为了促进这个市场，eosio 系统合约允许用户从系统购买 RAM，也可以将 RAM 卖回给系统以换取该区块链原生代币（比如EOS）。这样做不仅调动了RAM 市场的流动性，也推进了价格发现（在近似完全竞争市场的机制条件下，由市场来决定价格）。未分配的可用 RAM 越少，则报价商对剩余 RAM 报价就越高。被用于这个报价商的算法叫做 Bancor Relay。</p> 
  <p>Bancor Relay 不设定 RAM 的价格。它只提供以先前确定的市场价格进行买卖。任何时候当前的市场价格都不同于 Bancor Relay 提供的当前价格，交易者通过会买入或卖出RAM，以推动它接近市场决定的价格。</p> 
  <p>eosio 系统合约使用过去出售 RAM 给社区的收益，为那些希望将 RAM 回售给系统的人提供流动性。以 EOS 社区为例：撰写本文时 eosio.ram 账户的余额有 440 万 EOS（约合 4 000 万美金）。这 440 万 EOS 为这 52GB 的 RAM（以当前市场价计算达 2500 万 EOS, 合约 2.7 亿美金）提供流动性。显而易见的是，当做市商仅持有价值低于 RAM 市值的 20％ 的 EOS 时，是无法控制 RAM 的价值。</p> 
  <p>RAM 是一个商品</p> 
  <p>虽然 RAM 可以买卖，但它不能在用户之间交易。此外，与传统加密货币维持人为稀缺性的社会共识不同，RAM 的供给或许会根据社区需求以及技术进步而在一夜间增加。为了使那些需要便宜的 RAM 来构建应用程序的开发者和用户受益，RAM 的供给由选民把握。昂贵的 RAM 会造成区块链在许多商业模式中是不适用的。</p> 
  <p>eosio 系统合约代表对价格体系投票的 EOS 持币者在自然而然地运行。作为 RAM 的持有者，你唯一有权在区块链中拥有的是合约中的存储空间。除了在你决定出售 RAM 时社区愿意通过 eosio 系统合约向你购买之外，你无权享受任何特定的回购价格。由于 RAM 受技术限制，eosio 系统合约通常会以市场价格购买或出售 RAM。再次强调，合约不设定市场价格。市场价格由通过系统合约交互以进行买卖的人设定。</p> 
  <p>Bancor Relay 波动</p> 
  <p>Bancor Relay 设置了一些参数，来影响价格响应 RAM 买卖请求的波动速度。这有效地决定了订单的形态，以及当大宗买卖发生时，人们能够看到的滑移程度。</p> 
  <p>由于在 EOS 区块链上对 Bancor Relay 权重无意的配置，此参数设置为 0.05％ 而不是 50％。这使大宗数量买卖时引动了重大滑移，导致波动超出预期。</p> 
  <p>我们建议将此参数更新为 50% 预期值。这一变化的直接影响将是暂时降低做市商提供的现货价格。市场参与者将能够与做市商互动，将其推向市场价值。请记住，在新旧价值观下，价格正在由自由市场决定，做市商只不过是在做出反应。这意味着更改参数可能会创建买入或卖出机会，直到价格恢复到市场价值。</p> 
  <p>随着自由市场推进 Relay 回到由市场价值定价的 RAM，在大量购买和销售时，用户将体验到更少的滑移。减少滑移和波动性为 RAM 的投机者和用户提供了更可预见和稳定的市场。</p> 
  <p>通过扩容降低成本</p> 
  <p>自从比特币问世以来，区块链一直在致力于扩容。最近 EOS RAM 市场的价格暴涨表明，以当前的供应量来说市场认为 每 KB RAM 价值为 4 美元。这是一个强有力的市场信号：提供更多的 RAM 将是非常有价值的。</p> 
  <p>DApp 开发者在构建他们的系统时面临两项成本。</p> 
  <ol> 
   <li><p>与区块链交互的成本</p></li> 
   <li><p>承载一个全节点的成本</p></li> 
  </ol> 
  <p>保持 RAM 稀缺（64 GB）可以降低承载一个全节点的成本，但会增加与区块链交互的成本。那么，以今天的 RAM 价格计算，部署典型的智能合约（使用 10MB 内存）的花费约 40,000 美元。试图构建社交媒体平台的开发者可能希望至少托管一个他们自己的全节点。对于他们来说，在具有足够 RAM 的高端硬件上花费 39,000 美元，在存储他们合约的 RAM 上花费1,000 美元是“收支平衡”。</p> 
  <p>每台服务器每 GB 内存的价格约为 11 美元，而 EOS RAM 市场给 RAM 的定价在每 GB 4,000,000 美元。这表明整个网络可以为超过 300,000 台服务器以相同的价格购买真正的内存，而投机者正在对 EOS 链上有限的 64 GB RAM 竞标进行分配。</p> 
  <p>整个网络可以保持着重要的去中心化的同时提高全节点的成本。基于对 DApp 开发人员的服务器成本与链上成本的分析，很明显，对于整个网络的用户来说，大幅增加链上的 RAM 和提高全节点成本是一个更加划算的方案。</p> 
  <p>基于此分析，在将大型合约部署到链上的成本比运行全节点更便宜之前，提高全节点的成本似乎是合理的。</p> 
  <p>虚拟内存</p> 
  <p>在20年前，128 MB 的内存都是相当的多了，大多数的电脑都依赖于虚拟内存来支持更多的应用，虚拟内存在没有被使用时会将 RAM 内容交换到磁盘，在 RAM 压力下，这可能会大大减慢计算机运行速度。对我们来说幸运的是，SSD 技术大大缩小了 RAM 和磁盘性能之间的差距。此外，很大比例的 RAM 很少被用于和/或完全用于投机目的。</p> 
  <p>非出块的全节点应该可以依赖虚拟内存来降低成本，而且网络的绝大部分 CPU 容量未得到充分利用，因此有机会以 CPU 时间来换取 RAM。</p> 
  <p><img src="https://blog.uzzz.org/_p?https://img-blog.csdn.net/20180802160005181?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phbWJlYXU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br> 新兴的非易失性存储（NVM）技术</p> 
  <p>现代操作系统还支持 RAM 压缩，可在空闲内核上交换 CPU 周期以获得更多空间。 解压缩 RAM 实际上比从磁盘加载 RAM 更快，压缩、磁盘分页和现代超低延迟磁盘的组合意味着区块链社区可以在最大 TPS 和 RAM 之间进行权衡。毕竟，如果它们可以做到 10 亿TPS，却被仅限于 8MB 的 L3 缓存，那就没有任何的用处。所有区块链必须在内存使用、吞吐量、全节点的成本和稀缺资源需求之间进行市场权衡。</p> 
  <p>RAM 市场的透明度</p> 
  <p>为了让 RAM 投机者在当前与未来对稀缺资源的需求中尽一份力，他们需要对 RAM 供应增长进行可靠的预测，突然供应 RAM 和不可预测的增加可能导致他们赔钱和/或远离市场，这将导致资源分配效率降低。</p> 
  <p>突然增加 RAM 供应代表了系统合约对新供应的低效分配，并且从市场中获取的代币会少于慢慢增加供应而获取的代币，获取代币效率的降低带来的是做市商的收入损失，以及由资金不足的做市商引起的长期波动性的增加。</p> 
  <p>因此，Block.one 已经创建了一个对系统合约的建议更新：<a href="https://github.com/EOSIO/eosio.contracts/pull/2" rel="nofollow">https://github.com/EOSIO/eosio.contracts/pull/2</a></p> 
  <p>该更新中将向 RAM 供应添加固定数量的每区块字节数。被选举出来的出块节点可以设定可持续的增长率而不是瞬时增长率，由于增加 RAM 供应是出块节点的职权范围，我个人的角度认为，目前并不需要选民投票来使他们当天就能手动完成的工作自动化。</p> 
  <p>总结</p> 
  <p>RAM 旨在为开发人员所使用，他们希望构建真实的东西，让每个人的生活变得更好。自由市场和区块链社区将结合多种方法去降低部署和使用大规模 DApp 的总成本。RAM 并非制定成人为造成稀缺的样子，整个市场正在研究如何随着时间的推移稳定增加 RAM 和 TPS。</p> 
 </div> 
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/markdown_views-ea0013b516.css"> 
</div> 
<div class="hide-article-box text-center"> 
 <a class="btn btn-red-hollow" id="btn-readmore" data-track-view="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jambeau/article/details/81360009,&quot;}" data-track-click="{&quot;mod&quot;:&quot;popu_376&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jambeau/article/details/81360009,&quot;}">阅读更多</a> 
</div>

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- 自定义广告 -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-8889449066804352"
	     data-ad-slot="1494696990"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
	</script>


        <br />
        <a href="https://uzshare.com/">更多精彩内容</a>
      </section>
      
      <header style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
        <ul style="display: block;">
          <li><a href="/" style="line-height: 40px;padding-top:0px;">回首页</a></li>
        </ul>
      </header>
      <header class="sm-hidden" style="right: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/imgqcode.png" style="width:160px;" />
      </header>
      
      <header class="sm-hidden" style="left: 0;position: fixed;bottom: 60px;z-index: 100;background: none;border-bottom:none;">
          <img src="https://uzzz.org.cn/hou_imgqcode.png" style="width:160px;">
      </header>
    </div>
    
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ee64533f3c6a7a284cd39a37ee732c8b";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

  </body>
</html>
